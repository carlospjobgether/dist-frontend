var jk=Object.defineProperty,Hk=Object.defineProperties;var Gk=Object.getOwnPropertyDescriptors;var Zb=Object.getOwnPropertySymbols;var Wk=Object.prototype.hasOwnProperty,qk=Object.prototype.propertyIsEnumerable;var Xb=(t,n,a)=>n in t?jk(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,en=(t,n)=>{for(var a in n||(n={}))Wk.call(n,a)&&Xb(t,a,n[a]);if(Zb)for(var a of Zb(n))qk.call(n,a)&&Xb(t,a,n[a]);return t},Pu=(t,n)=>Hk(t,Gk(n));function Tc(t,n){const a=Object.create(null),h=t.split(",");for(let m=0;m<h.length;m++)a[h[m]]=!0;return n?m=>!!a[m.toLowerCase()]:m=>!!a[m]}const Zk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xk=Tc(Zk);function Yb(t){return!!t||t===""}function Ey(t){if(Dn(t)){const n={};for(let a=0;a<t.length;a++){const h=t[a],m=gr(h)?Jk(h):Ey(h);if(m)for(const g in m)n[g]=m[g]}return n}else{if(gr(t))return t;if($i(t))return t}}const Yk=/;(?![^(]*\))/g,Kk=/:(.+)/;function Jk(t){const n={};return t.split(Yk).forEach(a=>{if(a){const h=a.split(Kk);h.length>1&&(n[h[0].trim()]=h[1].trim())}}),n}function Ty(t){let n="";if(gr(t))n=t;else if(Dn(t))for(let a=0;a<t.length;a++){const h=Ty(t[a]);h&&(n+=h+" ")}else if($i(t))for(const a in t)t[a]&&(n+=a+" ");return n.trim()}const Qk="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",eL="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",tL=Tc(Qk),nL=Tc(eL);function iL(t,n){if(t.length!==n.length)return!1;let a=!0;for(let h=0;a&&h<t.length;h++)a=Sm(t[h],n[h]);return a}function Sm(t,n){if(t===n)return!0;let a=tw(t),h=tw(n);if(a||h)return a&&h?t.getTime()===n.getTime():!1;if(a=Dn(t),h=Dn(n),a||h)return a&&h?iL(t,n):!1;if(a=$i(t),h=$i(n),a||h){if(!a||!h)return!1;const m=Object.keys(t).length,g=Object.keys(n).length;if(m!==g)return!1;for(const b in t){const s=t.hasOwnProperty(b),C=n.hasOwnProperty(b);if(s&&!C||!s&&C||!Sm(t[b],n[b]))return!1}}return String(t)===String(n)}function Kb(t,n){return t.findIndex(a=>Sm(a,n))}const E8=t=>t==null?"":Dn(t)||$i(t)&&(t.toString===nw||!qn(t.toString))?JSON.stringify(t,Jb,2):String(t),Jb=(t,n)=>n&&n.__v_isRef?Jb(t,n.value):Ou(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((a,[h,m])=>(a[`${h} =>`]=m,a),{})}:Im(n)?{[`Set(${n.size})`]:[...n.values()]}:$i(n)&&!Dn(n)&&!iw(n)?String(n):n,Si=Object.freeze({}),df=Object.freeze([]),Xo=()=>{},Qb=()=>!1,rL=/^on[^a-z]/,jd=t=>rL.test(t),Cm=t=>t.startsWith("onUpdate:"),_r=Object.assign,ew=(t,n)=>{const a=t.indexOf(n);a>-1&&t.splice(a,1)},oL=Object.prototype.hasOwnProperty,mi=(t,n)=>oL.call(t,n),Dn=Array.isArray,Ou=t=>Mm(t)==="[object Map]",Im=t=>Mm(t)==="[object Set]",tw=t=>t instanceof Date,qn=t=>typeof t=="function",gr=t=>typeof t=="string",Ay=t=>typeof t=="symbol",$i=t=>t!==null&&typeof t=="object",Sy=t=>$i(t)&&qn(t.then)&&qn(t.catch),nw=Object.prototype.toString,Mm=t=>nw.call(t),Cy=t=>Mm(t).slice(8,-1),iw=t=>Mm(t)==="[object Object]",Iy=t=>gr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,km=Tc(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lm=t=>{const n=Object.create(null);return a=>n[a]||(n[a]=t(a))},sL=/-(\w)/g,Ra=Lm(t=>t.replace(sL,(n,a)=>a?a.toUpperCase():"")),aL=/\B([A-Z])/g,Ac=Lm(t=>t.replace(aL,"-$1").toLowerCase()),Du=Lm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ru=Lm(t=>t?`on${Du(t)}`:""),Hd=(t,n)=>!Object.is(t,n),pf=(t,n)=>{for(let a=0;a<t.length;a++)t[a](n)},Pm=(t,n,a)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:a})},Om=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let rw;const ow=()=>rw||(rw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function lL(t,...n){console.warn(`[Vue warn] ${t}`,...n)}let zu;const Dm=[];class cL{constructor(n=!1){this.active=!0,this.effects=[],this.cleanups=[],!n&&zu&&(this.parent=zu,this.index=(zu.scopes||(zu.scopes=[])).push(this)-1)}run(n){if(this.active)try{return this.on(),n()}finally{this.off()}else lL("cannot run an inactive effect scope.")}on(){this.active&&(Dm.push(this),zu=this)}off(){this.active&&(Dm.pop(),zu=Dm[Dm.length-1])}stop(n){if(this.active){if(this.effects.forEach(a=>a.stop()),this.cleanups.forEach(a=>a()),this.scopes&&this.scopes.forEach(a=>a.stop(!0)),this.parent&&!n){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.active=!1}}}function uL(t,n){n=n||zu,n&&n.active&&n.effects.push(t)}const My=t=>{const n=new Set(t);return n.w=0,n.n=0,n},sw=t=>(t.w&Sc)>0,aw=t=>(t.n&Sc)>0,hL=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Sc},fL=t=>{const{deps:n}=t;if(n.length){let a=0;for(let h=0;h<n.length;h++){const m=n[h];sw(m)&&!aw(m)?m.delete(t):n[a++]=m,m.w&=~Sc,m.n&=~Sc}n.length=a}},ky=new WeakMap;let Gd=0,Sc=1;const Ly=30,Wd=[];let ea;const Nu=Symbol("iterate"),Py=Symbol("Map key iterate");class Oy{constructor(n,a=null,h){this.fn=n,this.scheduler=a,this.active=!0,this.deps=[],uL(this,h)}run(){if(!this.active)return this.fn();if(!Wd.includes(this))try{return Wd.push(ea=this),dL(),Sc=1<<++Gd,Gd<=Ly?hL(this):lw(this),this.fn()}finally{Gd<=Ly&&fL(this),Sc=1<<--Gd,Cc(),Wd.pop();const n=Wd.length;ea=n>0?Wd[n-1]:void 0}}stop(){this.active&&(lw(this),this.onStop&&this.onStop(),this.active=!1)}}function lw(t){const{deps:n}=t;if(n.length){for(let a=0;a<n.length;a++)n[a].delete(t);n.length=0}}let mf=!0;const Dy=[];function Fu(){Dy.push(mf),mf=!1}function dL(){Dy.push(mf),mf=!0}function Cc(){const t=Dy.pop();mf=t===void 0?!0:t}function us(t,n,a){if(!cw())return;let h=ky.get(t);h||ky.set(t,h=new Map);let m=h.get(a);m||h.set(a,m=My()),uw(m,{effect:ea,target:t,type:n,key:a})}function cw(){return mf&&ea!==void 0}function uw(t,n){let a=!1;Gd<=Ly?aw(t)||(t.n|=Sc,a=!sw(t)):a=!t.has(ea),a&&(t.add(ea),ea.deps.push(t),ea.onTrack&&ea.onTrack(Object.assign({effect:ea},n)))}function yl(t,n,a,h,m,g){const b=ky.get(t);if(!b)return;let s=[];if(n==="clear")s=[...b.values()];else if(a==="length"&&Dn(t))b.forEach((D,M)=>{(M==="length"||M>=h)&&s.push(D)});else switch(a!==void 0&&s.push(b.get(a)),n){case"add":Dn(t)?Iy(a)&&s.push(b.get("length")):(s.push(b.get(Nu)),Ou(t)&&s.push(b.get(Py)));break;case"delete":Dn(t)||(s.push(b.get(Nu)),Ou(t)&&s.push(b.get(Py)));break;case"set":Ou(t)&&s.push(b.get(Nu));break}const C={target:t,type:n,key:a,newValue:h,oldValue:m,oldTarget:g};if(s.length===1)s[0]&&Ry(s[0],C);else{const D=[];for(const M of s)M&&D.push(...M);Ry(My(D),C)}}function Ry(t,n){for(const a of Dn(t)?t:[...t])(a!==ea||a.allowRecurse)&&(a.onTrigger&&a.onTrigger(_r({effect:a},n)),a.scheduler?a.scheduler():a.run())}const pL=Tc("__proto__,__v_isRef,__isVue"),hw=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Ay)),mL=Rm(),_L=Rm(!1,!0),gL=Rm(!0),yL=Rm(!0,!0),fw=vL();function vL(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...a){const h=ri(this);for(let g=0,b=this.length;g<b;g++)us(h,"get",g+"");const m=h[n](...a);return m===-1||m===!1?h[n](...a.map(ri)):m}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...a){Fu();const h=ri(this)[n].apply(this,a);return Cc(),h}}),t}function Rm(t=!1,n=!1){return function(h,m,g){if(m==="__v_isReactive")return!t;if(m==="__v_isReadonly")return t;if(m==="__v_raw"&&g===(t?n?Tw:Ew:n?ww:bw).get(h))return h;const b=Dn(h);if(!t&&b&&mi(fw,m))return Reflect.get(fw,m,g);const s=Reflect.get(h,m,g);return(Ay(m)?hw.has(m):pL(m))||(t||us(h,"get",m),n)?s:Qr(s)?!b||!Iy(m)?s.value:s:$i(s)?t?Aw(s):Bu(s):s}}const xL=dw(),bL=dw(!0);function dw(t=!1){return function(a,h,m,g){let b=a[h];if(!t&&(m=ri(m),b=ri(b),!Dn(a)&&Qr(b)&&!Qr(m)))return b.value=m,!0;const s=Dn(a)&&Iy(h)?Number(h)<a.length:mi(a,h),C=Reflect.set(a,h,m,g);return a===ri(g)&&(s?Hd(m,b)&&yl(a,"set",h,m,b):yl(a,"add",h,m)),C}}function wL(t,n){const a=mi(t,n),h=t[n],m=Reflect.deleteProperty(t,n);return m&&a&&yl(t,"delete",n,void 0,h),m}function EL(t,n){const a=Reflect.has(t,n);return(!Ay(n)||!hw.has(n))&&us(t,"has",n),a}function TL(t){return us(t,"iterate",Dn(t)?"length":Nu),Reflect.ownKeys(t)}const pw={get:mL,set:xL,deleteProperty:wL,has:EL,ownKeys:TL},mw={get:gL,set(t,n){return console.warn(`Set operation on key "${String(n)}" failed: target is readonly.`,t),!0},deleteProperty(t,n){return console.warn(`Delete operation on key "${String(n)}" failed: target is readonly.`,t),!0}},AL=_r({},pw,{get:_L,set:bL}),SL=_r({},mw,{get:yL}),zy=t=>t,zm=t=>Reflect.getPrototypeOf(t);function Nm(t,n,a=!1,h=!1){t=t.__v_raw;const m=ri(t),g=ri(n);n!==g&&!a&&us(m,"get",n),!a&&us(m,"get",g);const{has:b}=zm(m),s=h?zy:a?Fy:qd;if(b.call(m,n))return s(t.get(n));if(b.call(m,g))return s(t.get(g));t!==m&&t.get(n)}function Fm(t,n=!1){const a=this.__v_raw,h=ri(a),m=ri(t);return t!==m&&!n&&us(h,"has",t),!n&&us(h,"has",m),t===m?a.has(t):a.has(t)||a.has(m)}function Bm(t,n=!1){return t=t.__v_raw,!n&&us(ri(t),"iterate",Nu),Reflect.get(t,"size",t)}function _w(t){t=ri(t);const n=ri(this);return zm(n).has.call(n,t)||(n.add(t),yl(n,"add",t,t)),this}function gw(t,n){n=ri(n);const a=ri(this),{has:h,get:m}=zm(a);let g=h.call(a,t);g?xw(a,h,t):(t=ri(t),g=h.call(a,t));const b=m.call(a,t);return a.set(t,n),g?Hd(n,b)&&yl(a,"set",t,n,b):yl(a,"add",t,n),this}function yw(t){const n=ri(this),{has:a,get:h}=zm(n);let m=a.call(n,t);m?xw(n,a,t):(t=ri(t),m=a.call(n,t));const g=h?h.call(n,t):void 0,b=n.delete(t);return m&&yl(n,"delete",t,void 0,g),b}function vw(){const t=ri(this),n=t.size!==0,a=Ou(t)?new Map(t):new Set(t),h=t.clear();return n&&yl(t,"clear",void 0,void 0,a),h}function $m(t,n){return function(h,m){const g=this,b=g.__v_raw,s=ri(b),C=n?zy:t?Fy:qd;return!t&&us(s,"iterate",Nu),b.forEach((D,M)=>h.call(m,C(D),C(M),g))}}function Um(t,n,a){return function(...h){const m=this.__v_raw,g=ri(m),b=Ou(g),s=t==="entries"||t===Symbol.iterator&&b,C=t==="keys"&&b,D=m[t](...h),M=a?zy:n?Fy:qd;return!n&&us(g,"iterate",C?Py:Nu),{next(){const{value:L,done:F}=D.next();return F?{value:L,done:F}:{value:s?[M(L[0]),M(L[1])]:M(L),done:F}},[Symbol.iterator](){return this}}}}function Ic(t){return function(...n){{const a=n[0]?`on key "${n[0]}" `:"";console.warn(`${Du(t)} operation ${a}failed: target is readonly.`,ri(this))}return t==="delete"?!1:this}}function CL(){const t={get(g){return Nm(this,g)},get size(){return Bm(this)},has:Fm,add:_w,set:gw,delete:yw,clear:vw,forEach:$m(!1,!1)},n={get(g){return Nm(this,g,!1,!0)},get size(){return Bm(this)},has:Fm,add:_w,set:gw,delete:yw,clear:vw,forEach:$m(!1,!0)},a={get(g){return Nm(this,g,!0)},get size(){return Bm(this,!0)},has(g){return Fm.call(this,g,!0)},add:Ic("add"),set:Ic("set"),delete:Ic("delete"),clear:Ic("clear"),forEach:$m(!0,!1)},h={get(g){return Nm(this,g,!0,!0)},get size(){return Bm(this,!0)},has(g){return Fm.call(this,g,!0)},add:Ic("add"),set:Ic("set"),delete:Ic("delete"),clear:Ic("clear"),forEach:$m(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{t[g]=Um(g,!1,!1),a[g]=Um(g,!0,!1),n[g]=Um(g,!1,!0),h[g]=Um(g,!0,!0)}),[t,a,n,h]}const[IL,ML,kL,LL]=CL();function Vm(t,n){const a=n?t?LL:kL:t?ML:IL;return(h,m,g)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?h:Reflect.get(mi(a,m)&&m in h?a:h,m,g)}const PL={get:Vm(!1,!1)},OL={get:Vm(!1,!0)},DL={get:Vm(!0,!1)},RL={get:Vm(!0,!0)};function xw(t,n,a){const h=ri(a);if(h!==a&&n.call(t,h)){const m=Cy(t);console.warn(`Reactive ${m} contains both the raw and reactive versions of the same object${m==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const bw=new WeakMap,ww=new WeakMap,Ew=new WeakMap,Tw=new WeakMap;function zL(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NL(t){return t.__v_skip||!Object.isExtensible(t)?0:zL(Cy(t))}function Bu(t){return t&&t.__v_isReadonly?t:jm(t,!1,pw,PL,bw)}function FL(t){return jm(t,!1,AL,OL,ww)}function Aw(t){return jm(t,!0,mw,DL,Ew)}function _f(t){return jm(t,!0,SL,RL,Tw)}function jm(t,n,a,h,m){if(!$i(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(n&&t.__v_isReactive))return t;const g=m.get(t);if(g)return g;const b=NL(t);if(b===0)return t;const s=new Proxy(t,b===2?h:a);return m.set(t,s),s}function $u(t){return Hm(t)?$u(t.__v_raw):!!(t&&t.__v_isReactive)}function Hm(t){return!!(t&&t.__v_isReadonly)}function Ny(t){return $u(t)||Hm(t)}function ri(t){const n=t&&t.__v_raw;return n?ri(n):t}function Sw(t){return Pm(t,"__v_skip",!0),t}const qd=t=>$i(t)?Bu(t):t,Fy=t=>$i(t)?Aw(t):t;function Cw(t){cw()&&(t=ri(t),t.dep||(t.dep=My()),uw(t.dep,{target:t,type:"get",key:"value"}))}function Iw(t,n){t=ri(t),t.dep&&Ry(t.dep,{target:t,type:"set",key:"value",newValue:n})}function Qr(t){return Boolean(t&&t.__v_isRef===!0)}function gf(t){return Mw(t,!1)}function BL(t){return Mw(t,!0)}function Mw(t,n){return Qr(t)?t:new $L(t,n)}class $L{constructor(n,a){this._shallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?n:ri(n),this._value=a?n:qd(n)}get value(){return Cw(this),this._value}set value(n){n=this._shallow?n:ri(n),Hd(n,this._rawValue)&&(this._rawValue=n,this._value=this._shallow?n:qd(n),Iw(this,n))}}function Zd(t){return Qr(t)?t.value:t}const UL={get:(t,n,a)=>Zd(Reflect.get(t,n,a)),set:(t,n,a,h)=>{const m=t[n];return Qr(m)&&!Qr(a)?(m.value=a,!0):Reflect.set(t,n,a,h)}};function kw(t){return $u(t)?t:new Proxy(t,UL)}class VL{constructor(n,a,h){this._setter=a,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Oy(n,()=>{this._dirty||(this._dirty=!0,Iw(this))}),this.__v_isReadonly=h}get value(){const n=ri(this);return Cw(n),n._dirty&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function Wi(t,n){let a,h;const m=qn(t);m?(a=t,h=()=>{console.warn("Write operation failed: computed value is readonly")}):(a=t.get,h=t.set);const g=new VL(a,h,m||!h);return n&&(g.effect.onTrack=n.onTrack,g.effect.onTrigger=n.onTrigger),g}Promise.resolve();let Mc=!1;const yf=new Set;ow().__VUE_HMR_RUNTIME__={createRecord:By(Lw),rerender:By(GL),reload:By(WL)};const Uu=new Map;function jL(t){const n=t.type.__hmrId;let a=Uu.get(n);a||(Lw(n,t.type),a=Uu.get(n)),a.instances.add(t)}function HL(t){Uu.get(t.type.__hmrId).instances.delete(t)}function Lw(t,n){return Uu.has(t)?!1:(Uu.set(t,{initialDef:Xd(n),instances:new Set}),!0)}function Xd(t){return CE(t)?t.__vccOpts:t}function GL(t,n){const a=Uu.get(t);!a||(a.initialDef.render=n,[...a.instances].forEach(h=>{n&&(h.render=n,Xd(h.type).render=n),h.renderCache=[],Mc=!0,h.update(),Mc=!1}))}function WL(t,n){const a=Uu.get(t);if(!a)return;n=Xd(n),Pw(a.initialDef,n);const h=[...a.instances];for(const m of h){const g=Xd(m.type);yf.has(g)||(g!==a.initialDef&&Pw(g,n),yf.add(g)),m.appContext.optionsCache.delete(m.type),m.ceReload?(yf.add(g),m.ceReload(n.styles),yf.delete(g)):m.parent?(mv(m.parent.update),m.parent.type.__asyncLoader&&m.parent.ceReload&&m.parent.ceReload(n.styles)):m.appContext.reload?m.appContext.reload():typeof window!="undefined"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}PE(()=>{for(const m of h)yf.delete(Xd(m.type))})}function Pw(t,n){_r(t,n);for(const a in t)a!=="__file"&&!(a in n)&&delete t[a]}function By(t){return(n,a)=>{try{return t(n,a)}catch(h){console.error(h),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Vu,Yd=[],$y=!1;function Kd(t,...n){Vu?Vu.emit(t,...n):$y||Yd.push({event:t,args:n})}function Ow(t,n){Vu=t,Vu?(Vu.enabled=!0,Yd.forEach(({event:a,args:h})=>Vu.emit(a,...h)),Yd=[]):typeof window!="undefined"&&!navigator.userAgent.includes("jsdom")?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(h=>{Ow(h,n)}),setTimeout(()=>{Vu||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,$y=!0,Yd=[])},3e3)):($y=!0,Yd=[])}function qL(t,n){Kd("app:init",t,n,{Fragment:ko,Text:xf,Comment:fo,Static:ep})}function ZL(t){Kd("app:unmount",t)}const XL=Uy("component:added"),Dw=Uy("component:updated"),YL=Uy("component:removed");function Uy(t){return n=>{Kd(t,n.appContext.app,n.uid,n.parent?n.parent.uid:void 0,n)}}const KL=Rw("perf:start"),JL=Rw("perf:end");function Rw(t){return(n,a,h)=>{Kd(t,n.appContext.app,n.uid,n,a,h)}}function QL(t,n,a){Kd("component:emit",t.appContext.app,t,n,a)}function eP(t,n,...a){const h=t.vnode.props||Si;{const{emitsOptions:M,propsOptions:[L]}=t;if(M)if(!(n in M))(!L||!(Ru(n)in L))&&qt(`Component emitted event "${n}" but it is neither declared in the emits option nor as an "${Ru(n)}" prop.`);else{const F=M[n];qn(F)&&(F(...a)||qt(`Invalid event arguments: event validation failed for event "${n}".`))}}let m=a;const g=n.startsWith("update:"),b=g&&n.slice(7);if(b&&b in h){const M=`${b==="modelValue"?"model":b}Modifiers`,{number:L,trim:F}=h[M]||Si;F?m=a.map(Y=>Y.trim()):L&&(m=a.map(Om))}QL(t,n,m);{const M=n.toLowerCase();M!==n&&h[Ru(M)]&&qt(`Event "${M}" is emitted in component ${r_(t,t.type)} but the handler is registered for "${n}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Ac(n)}" instead of "${n}".`)}let s,C=h[s=Ru(n)]||h[s=Ru(Ra(n))];!C&&g&&(C=h[s=Ru(Ac(n))]),C&&Ds(C,t,6,m);const D=h[s+"Once"];if(D){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Ds(D,t,6,m)}}function zw(t,n,a=!1){const h=n.emitsCache,m=h.get(t);if(m!==void 0)return m;const g=t.emits;let b={},s=!1;if(!qn(t)){const C=D=>{const M=zw(D,n,!0);M&&(s=!0,_r(b,M))};!a&&n.mixins.length&&n.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}return!g&&!s?(h.set(t,null),null):(Dn(g)?g.forEach(C=>b[C]=null):_r(b,g),h.set(t,b),b)}function Vy(t,n){return!t||!jd(n)?!1:(n=n.slice(2).replace(/Once$/,""),mi(t,n[0].toLowerCase()+n.slice(1))||mi(t,Ac(n))||mi(t,n))}let Co=null,Gm=null;function Wm(t){const n=Co;return Co=t,Gm=t&&t.type.__scopeId||null,n}function T8(t){Gm=t}function A8(){Gm=null}function tP(t,n=Co,a){if(!n||t._n)return t;const h=(...m)=>{h._d&&_E(-1);const g=Wm(n),b=t(...m);return Wm(g),h._d&&_E(1),Dw(n),b};return h._n=!0,h._c=!0,h._d=!0,h}let jy=!1;function qm(){jy=!0}function Hy(t){const{type:n,vnode:a,proxy:h,withProxy:m,props:g,propsOptions:[b],slots:s,attrs:C,emit:D,render:M,renderCache:L,data:F,setupState:Y,ctx:Te,inheritAttrs:ue}=t;let K,G;const Q=Wm(t);jy=!1;try{if(a.shapeFlag&4){const Ae=m||h;K=ta(M.call(Ae,Ae,L,g,Y,F,Te)),G=C}else{const Ae=n;C===g&&qm(),K=ta(Ae.length>1?Ae(g,{get attrs(){return qm(),C},slots:s,emit:D}):Ae(g,null)),G=n.props?C:iP(C)}}catch(Ae){tp.length=0,a_(Ae,t,1),K=eo(fo)}let _e=K,Ce;if(K.patchFlag>0&&K.patchFlag&2048&&([_e,Ce]=nP(K)),G&&ue!==!1){const Ae=Object.keys(G),{shapeFlag:Le}=_e;if(Ae.length){if(Le&(1|6))b&&Ae.some(Cm)&&(G=rP(G,b)),_e=Pc(_e,G);else if(!jy&&_e.type!==fo){const $e=Object.keys(C),pt=[],Xe=[];for(let ve=0,Ye=$e.length;ve<Ye;ve++){const Be=$e[ve];jd(Be)?Cm(Be)||pt.push(Be[2].toLowerCase()+Be.slice(3)):Xe.push(Be)}Xe.length&&qt(`Extraneous non-props attributes (${Xe.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),pt.length&&qt(`Extraneous non-emits event listeners (${pt.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return a.dirs&&(Fw(_e)||qt("Runtime directive used on component with non-element root node. The directives will not function as intended."),_e.dirs=_e.dirs?_e.dirs.concat(a.dirs):a.dirs),a.transition&&(Fw(_e)||qt("Component inside <Transition> renders non-element root node that cannot be animated."),_e.transition=a.transition),Ce?Ce(_e):K=_e,Wm(Q),K}const nP=t=>{const n=t.children,a=t.dynamicChildren,h=Nw(n);if(!h)return[t,void 0];const m=n.indexOf(h),g=a?a.indexOf(h):-1,b=s=>{n[m]=s,a&&(g>-1?a[g]=s:s.patchFlag>0&&(t.dynamicChildren=[...a,s]))};return[ta(h),b]};function Nw(t){let n;for(let a=0;a<t.length;a++){const h=t[a];if(bf(h)){if(h.type!==fo||h.children==="v-if"){if(n)return;n=h}}else return}return n}const iP=t=>{let n;for(const a in t)(a==="class"||a==="style"||jd(a))&&((n||(n={}))[a]=t[a]);return n},rP=(t,n)=>{const a={};for(const h in t)(!Cm(h)||!(h.slice(9)in n))&&(a[h]=t[h]);return a},Fw=t=>t.shapeFlag&(6|1)||t.type===fo;function oP(t,n,a){const{props:h,children:m,component:g}=t,{props:b,children:s,patchFlag:C}=n,D=g.emitsOptions;if((m||s)&&Mc||n.dirs||n.transition)return!0;if(a&&C>=0){if(C&1024)return!0;if(C&16)return h?Bw(h,b,D):!!b;if(C&8){const M=n.dynamicProps;for(let L=0;L<M.length;L++){const F=M[L];if(b[F]!==h[F]&&!Vy(D,F))return!0}}}else return(m||s)&&(!s||!s.$stable)?!0:h===b?!1:h?b?Bw(h,b,D):!0:!!b;return!1}function Bw(t,n,a){const h=Object.keys(n);if(h.length!==Object.keys(t).length)return!0;for(let m=0;m<h.length;m++){const g=h[m];if(n[g]!==t[g]&&!Vy(a,g))return!0}return!1}function sP({vnode:t,parent:n},a){for(;n&&n.subTree===t;)(t=n.vnode).el=a,n=n.parent}const aP=t=>t.__isSuspense;function lP(t,n){n&&n.pendingBranch?Dn(t)?n.effects.push(...t):n.effects.push(t):PE(t)}function Zm(t,n){if(!Lr)qt("provide() can only be used inside setup().");else{let a=Lr.provides;const h=Lr.parent&&Lr.parent.provides;h===a&&(a=Lr.provides=Object.create(h)),a[t]=n}}function hs(t,n,a=!1){const h=Lr||Co;if(h){const m=h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides;if(m&&t in m)return m[t];if(arguments.length>1)return a&&qn(n)?n.call(h.proxy):n;qt(`injection "${String(t)}" not found.`)}else qt("inject() can only be used inside setup() or functional components.")}function cP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xy(()=>{t.isMounted=!0}),qw(()=>{t.isUnmounting=!0}),t}const Os=[Function,Array],uP={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Os,onEnter:Os,onAfterEnter:Os,onEnterCancelled:Os,onBeforeLeave:Os,onLeave:Os,onAfterLeave:Os,onLeaveCancelled:Os,onBeforeAppear:Os,onAppear:Os,onAfterAppear:Os,onAppearCancelled:Os},setup(t,{slots:n}){const a=wl(),h=cP();let m;return()=>{const g=n.default&&jw(n.default(),!0);if(!g||!g.length)return;g.length>1&&qt("<transition> can only be used on a single element or component. Use <transition-group> for lists.");const b=ri(t),{mode:s}=b;s&&!["in-out","out-in","default"].includes(s)&&qt(`invalid <transition> mode: ${s}`);const C=g[0];if(h.isLeaving)return Wy(C);const D=Vw(C);if(!D)return Wy(C);const M=Gy(D,b,h,a);qy(D,M);const L=a.subTree,F=L&&Vw(L);let Y=!1;const{getTransitionKey:Te}=D.type;if(Te){const ue=Te();m===void 0?m=ue:ue!==m&&(m=ue,Y=!0)}if(F&&F.type!==fo&&(!qu(D,F)||Y)){const ue=Gy(F,b,h,a);if(qy(F,ue),s==="out-in")return h.isLeaving=!0,ue.afterLeave=()=>{h.isLeaving=!1,a.update()},Wy(C);s==="in-out"&&D.type!==fo&&(ue.delayLeave=(K,G,Q)=>{const _e=Uw(h,F);_e[String(F.key)]=F,K._leaveCb=()=>{G(),K._leaveCb=void 0,delete M.delayedLeave},M.delayedLeave=Q})}return C}}},$w=uP;function Uw(t,n){const{leavingVNodes:a}=t;let h=a.get(n.type);return h||(h=Object.create(null),a.set(n.type,h)),h}function Gy(t,n,a,h){const{appear:m,mode:g,persisted:b=!1,onBeforeEnter:s,onEnter:C,onAfterEnter:D,onEnterCancelled:M,onBeforeLeave:L,onLeave:F,onAfterLeave:Y,onLeaveCancelled:Te,onBeforeAppear:ue,onAppear:K,onAfterAppear:G,onAppearCancelled:Q}=n,_e=String(t.key),Ce=Uw(a,t),Ae=($e,pt)=>{$e&&Ds($e,h,9,pt)},Le={mode:g,persisted:b,beforeEnter($e){let pt=s;if(!a.isMounted)if(m)pt=ue||s;else return;$e._leaveCb&&$e._leaveCb(!0);const Xe=Ce[_e];Xe&&qu(t,Xe)&&Xe.el._leaveCb&&Xe.el._leaveCb(),Ae(pt,[$e])},enter($e){let pt=C,Xe=D,ve=M;if(!a.isMounted)if(m)pt=K||C,Xe=G||D,ve=Q||M;else return;let Ye=!1;const Be=$e._enterCb=Pe=>{Ye||(Ye=!0,Pe?Ae(ve,[$e]):Ae(Xe,[$e]),Le.delayedLeave&&Le.delayedLeave(),$e._enterCb=void 0)};pt?(pt($e,Be),pt.length<=1&&Be()):Be()},leave($e,pt){const Xe=String(t.key);if($e._enterCb&&$e._enterCb(!0),a.isUnmounting)return pt();Ae(L,[$e]);let ve=!1;const Ye=$e._leaveCb=Be=>{ve||(ve=!0,pt(),Be?Ae(Te,[$e]):Ae(Y,[$e]),$e._leaveCb=void 0,Ce[Xe]===t&&delete Ce[Xe])};Ce[Xe]=t,F?(F($e,Ye),F.length<=1&&Ye()):Ye()},clone($e){return Gy($e,n,a,h)}};return Le}function Wy(t){if(Jd(t))return t=Pc(t),t.children=null,t}function Vw(t){return Jd(t)?t.children?t.children[0]:void 0:t}function qy(t,n){t.shapeFlag&6&&t.component?qy(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function jw(t,n=!1){let a=[],h=0;for(let m=0;m<t.length;m++){const g=t[m];g.type===ko?(g.patchFlag&128&&h++,a=a.concat(jw(g.children,n))):(n||g.type!==fo)&&a.push(g)}if(h>1)for(let m=0;m<a.length;m++)a[m].patchFlag=-2;return a}function kc(t){return qn(t)?{setup:t,name:t.name}:t}const Zy=t=>!!t.type.__asyncLoader,Jd=t=>t.type.__isKeepAlive;function Hw(t,n){Ww(t,"a",n)}function Gw(t,n){Ww(t,"da",n)}function Ww(t,n,a=Lr){const h=t.__wdc||(t.__wdc=()=>{let m=a;for(;m;){if(m.isDeactivated)return;m=m.parent}t()});if(Xm(n,h,a),a){let m=a.parent;for(;m&&m.parent;)Jd(m.parent.vnode)&&hP(h,n,a,m),m=m.parent}}function hP(t,n,a,h){const m=Xm(n,t,h,!0);Ym(()=>{ew(h[n],m)},a)}function Xm(t,n,a=Lr,h=!1){if(a){const m=a[t]||(a[t]=[]),g=n.__weh||(n.__weh=(...b)=>{if(a.isUnmounted)return;Fu(),Ef(a);const s=Ds(n,a,t,b);return Zu(),Cc(),s});return h?m.unshift(g):m.push(g),g}else{const m=Ru(uv[t].replace(/ hook$/,""));qt(`${m} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const vl=t=>(n,a=Lr)=>(!i_||t==="sp")&&Xm(t,n,a),fP=vl("bm"),Xy=vl("m"),dP=vl("bu"),pP=vl("u"),qw=vl("bum"),Ym=vl("um"),mP=vl("sp"),_P=vl("rtg"),gP=vl("rtc");function yP(t,n=Lr){Xm("ec",t,n)}function vP(){const t=Object.create(null);return(n,a)=>{t[a]?qt(`${n} property "${a}" is already defined in ${t[a]}.`):t[a]=n}}let Yy=!0;function xP(t){const n=Yw(t),a=t.proxy,h=t.ctx;Yy=!1,n.beforeCreate&&Zw(n.beforeCreate,t,"bc");const{data:m,computed:g,methods:b,watch:s,provide:C,inject:D,created:M,beforeMount:L,mounted:F,beforeUpdate:Y,updated:Te,activated:ue,deactivated:K,beforeDestroy:G,beforeUnmount:Q,destroyed:_e,unmounted:Ce,render:Ae,renderTracked:Le,renderTriggered:$e,errorCaptured:pt,serverPrefetch:Xe,expose:ve,inheritAttrs:Ye,components:Be,directives:Pe,filters:xe}=n,je=vP();{const[Qe]=t.propsOptions;if(Qe)for(const ht in Qe)je("Props",ht)}if(D&&bP(D,h,je,t.appContext.config.unwrapInjectedRef),b)for(const Qe in b){const ht=b[Qe];qn(ht)?(Object.defineProperty(h,Qe,{value:ht.bind(a),configurable:!0,enumerable:!0,writable:!0}),je("Methods",Qe)):qt(`Method "${Qe}" has type "${typeof ht}" in the component definition. Did you reference the function correctly?`)}if(m){qn(m)||qt("The data option must be a function. Plain object usage is no longer supported.");const Qe=m.call(a,a);if(Sy(Qe)&&qt("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!$i(Qe))qt("data() should return an object.");else{t.data=Bu(Qe);for(const ht in Qe)je("Data",ht),ht[0]!=="$"&&ht[0]!=="_"&&Object.defineProperty(h,ht,{configurable:!0,enumerable:!0,get:()=>Qe[ht],set:Xo})}}if(Yy=!0,g)for(const Qe in g){const ht=g[Qe],ct=qn(ht)?ht.bind(a,a):qn(ht.get)?ht.get.bind(a,a):Xo;ct===Xo&&qt(`Computed property "${Qe}" has no getter.`);const Ut=!qn(ht)&&qn(ht.set)?ht.set.bind(a):()=>{qt(`Write operation failed: computed property "${Qe}" is readonly.`)},Ke=Wi({get:ct,set:Ut});Object.defineProperty(h,Qe,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:hn=>Ke.value=hn}),je("Computed",Qe)}if(s)for(const Qe in s)Xw(s[Qe],h,a,Qe);if(C){const Qe=qn(C)?C.call(a):C;Reflect.ownKeys(Qe).forEach(ht=>{Zm(ht,Qe[ht])})}M&&Zw(M,t,"c");function lt(Qe,ht){Dn(ht)?ht.forEach(ct=>Qe(ct.bind(a))):ht&&Qe(ht.bind(a))}if(lt(fP,L),lt(Xy,F),lt(dP,Y),lt(pP,Te),lt(Hw,ue),lt(Gw,K),lt(yP,pt),lt(gP,Le),lt(_P,$e),lt(qw,Q),lt(Ym,Ce),lt(mP,Xe),Dn(ve))if(ve.length){const Qe=t.exposed||(t.exposed={});ve.forEach(ht=>{Object.defineProperty(Qe,ht,{get:()=>a[ht],set:ct=>a[ht]=ct})})}else t.exposed||(t.exposed={});Ae&&t.render===Xo&&(t.render=Ae),Ye!=null&&(t.inheritAttrs=Ye),Be&&(t.components=Be),Pe&&(t.directives=Pe)}function bP(t,n,a=Xo,h=!1){Dn(t)&&(t=Ky(t));for(const m in t){const g=t[m];let b;$i(g)?"default"in g?b=hs(g.from||m,g.default,!0):b=hs(g.from||m):b=hs(g),Qr(b)?h?Object.defineProperty(n,m,{enumerable:!0,configurable:!0,get:()=>b.value,set:s=>b.value=s}):(qt(`injected property "${m}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),n[m]=b):n[m]=b,a("Inject",m)}}function Zw(t,n,a){Ds(Dn(t)?t.map(h=>h.bind(n.proxy)):t.bind(n.proxy),n,a)}function Xw(t,n,a,h){const m=h.includes(".")?zE(a,h):()=>a[h];if(gr(t)){const g=n[t];qn(g)?Na(m,g):qt(`Invalid watch handler specified by key "${t}"`,g)}else if(qn(t))Na(m,t.bind(a));else if($i(t))if(Dn(t))t.forEach(g=>Xw(g,n,a,h));else{const g=qn(t.handler)?t.handler.bind(a):n[t.handler];qn(g)?Na(m,g,t):qt(`Invalid watch handler specified by key "${t.handler}"`,g)}else qt(`Invalid watch option: "${h}"`,t)}function Yw(t){const n=t.type,{mixins:a,extends:h}=n,{mixins:m,optionsCache:g,config:{optionMergeStrategies:b}}=t.appContext,s=g.get(n);let C;return s?C=s:!m.length&&!a&&!h?C=n:(C={},m.length&&m.forEach(D=>Km(C,D,b,!0)),Km(C,n,b)),g.set(n,C),C}function Km(t,n,a,h=!1){const{mixins:m,extends:g}=n;g&&Km(t,g,a,!0),m&&m.forEach(b=>Km(t,b,a,!0));for(const b in n)if(h&&b==="expose")qt('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const s=wP[b]||a&&a[b];t[b]=s?s(t[b],n[b]):n[b]}return t}const wP={data:Kw,props:ju,emits:ju,methods:ju,computed:ju,beforeCreate:Io,created:Io,beforeMount:Io,mounted:Io,beforeUpdate:Io,updated:Io,beforeDestroy:Io,beforeUnmount:Io,destroyed:Io,unmounted:Io,activated:Io,deactivated:Io,errorCaptured:Io,serverPrefetch:Io,components:ju,directives:ju,watch:TP,provide:Kw,inject:EP};function Kw(t,n){return n?t?function(){return _r(qn(t)?t.call(this,this):t,qn(n)?n.call(this,this):n)}:n:t}function EP(t,n){return ju(Ky(t),Ky(n))}function Ky(t){if(Dn(t)){const n={};for(let a=0;a<t.length;a++)n[t[a]]=t[a];return n}return t}function Io(t,n){return t?[...new Set([].concat(t,n))]:n}function ju(t,n){return t?_r(_r(Object.create(null),t),n):n}function TP(t,n){if(!t)return n;if(!n)return t;const a=_r(Object.create(null),t);for(const h in n)a[h]=Io(t[h],n[h]);return a}function AP(t,n,a,h=!1){const m={},g={};Pm(g,t_,1),t.propsDefaults=Object.create(null),Jw(t,n,m,g);for(const b in t.propsOptions[0])b in m||(m[b]=void 0);iE(n||{},m,t),a?t.props=h?m:FL(m):t.type.props?t.props=m:t.props=g,t.attrs=g}function SP(t,n,a,h){const{props:m,attrs:g,vnode:{patchFlag:b}}=t,s=ri(m),[C]=t.propsOptions;let D=!1;if(!(t.type.__hmrId||t.parent&&t.parent.type.__hmrId)&&(h||b>0)&&!(b&16)){if(b&8){const M=t.vnode.dynamicProps;for(let L=0;L<M.length;L++){let F=M[L];const Y=n[F];if(C)if(mi(g,F))Y!==g[F]&&(g[F]=Y,D=!0);else{const Te=Ra(F);m[Te]=Jy(C,s,Te,Y,t,!1)}else Y!==g[F]&&(g[F]=Y,D=!0)}}}else{Jw(t,n,m,g)&&(D=!0);let M;for(const L in s)(!n||!mi(n,L)&&((M=Ac(L))===L||!mi(n,M)))&&(C?a&&(a[L]!==void 0||a[M]!==void 0)&&(m[L]=Jy(C,s,L,void 0,t,!0)):delete m[L]);if(g!==s)for(const L in g)(!n||!mi(n,L))&&(delete g[L],D=!0)}D&&yl(t,"set","$attrs"),iE(n||{},m,t)}function Jw(t,n,a,h){const[m,g]=t.propsOptions;let b=!1,s;if(n)for(let C in n){if(km(C))continue;const D=n[C];let M;m&&mi(m,M=Ra(C))?!g||!g.includes(M)?a[M]=D:(s||(s={}))[M]=D:Vy(t.emitsOptions,C)||D!==h[C]&&(h[C]=D,b=!0)}if(g){const C=ri(a),D=s||Si;for(let M=0;M<g.length;M++){const L=g[M];a[L]=Jy(m,C,L,D[L],t,!mi(D,L))}}return b}function Jy(t,n,a,h,m,g){const b=t[a];if(b!=null){const s=mi(b,"default");if(s&&h===void 0){const C=b.default;if(b.type!==Function&&qn(C)){const{propsDefaults:D}=m;a in D?h=D[a]:(Ef(m),h=D[a]=C.call(null,n),Zu())}else h=C}b[0]&&(g&&!s?h=!1:b[1]&&(h===""||h===Ac(a))&&(h=!0))}return h}function Qw(t,n,a=!1){const h=n.propsCache,m=h.get(t);if(m)return m;const g=t.props,b={},s=[];let C=!1;if(!qn(t)){const M=L=>{C=!0;const[F,Y]=Qw(L,n,!0);_r(b,F),Y&&s.push(...Y)};!a&&n.mixins.length&&n.mixins.forEach(M),t.extends&&M(t.extends),t.mixins&&t.mixins.forEach(M)}if(!g&&!C)return h.set(t,df),df;if(Dn(g))for(let M=0;M<g.length;M++){gr(g[M])||qt("props must be strings when using array syntax.",g[M]);const L=Ra(g[M]);eE(L)&&(b[L]=Si)}else if(g){$i(g)||qt("invalid props options",g);for(const M in g){const L=Ra(M);if(eE(L)){const F=g[M],Y=b[L]=Dn(F)||qn(F)?{type:F}:F;if(Y){const Te=nE(Boolean,Y.type),ue=nE(String,Y.type);Y[0]=Te>-1,Y[1]=ue<0||Te<ue,(Te>-1||mi(Y,"default"))&&s.push(L)}}}}const D=[b,s];return h.set(t,D),D}function eE(t){return t[0]!=="$"?!0:(qt(`Invalid prop name: "${t}" is a reserved property.`),!1)}function Qy(t){const n=t&&t.toString().match(/^\s*function (\w+)/);return n?n[1]:t===null?"null":""}function tE(t,n){return Qy(t)===Qy(n)}function nE(t,n){return Dn(n)?n.findIndex(a=>tE(a,t)):qn(n)&&tE(n,t)?0:-1}function iE(t,n,a){const h=ri(n),m=a.propsOptions[0];for(const g in m){let b=m[g];b!=null&&CP(g,h[g],b,!mi(t,g)&&!mi(t,Ac(g)))}}function CP(t,n,a,h){const{type:m,required:g,validator:b}=a;if(g&&h){qt('Missing required prop: "'+t+'"');return}if(!(n==null&&!a.required)){if(m!=null&&m!==!0){let s=!1;const C=Dn(m)?m:[m],D=[];for(let M=0;M<C.length&&!s;M++){const{valid:L,expectedType:F}=MP(n,C[M]);D.push(F||""),s=L}if(!s){qt(kP(t,n,D));return}}b&&!b(n)&&qt('Invalid prop: custom validator check failed for prop "'+t+'".')}}const IP=Tc("String,Number,Boolean,Function,Symbol,BigInt");function MP(t,n){let a;const h=Qy(n);if(IP(h)){const m=typeof t;a=m===h.toLowerCase(),!a&&m==="object"&&(a=t instanceof n)}else h==="Object"?a=$i(t):h==="Array"?a=Dn(t):h==="null"?a=t===null:a=t instanceof n;return{valid:a,expectedType:h}}function kP(t,n,a){let h=`Invalid prop: type check failed for prop "${t}". Expected ${a.map(Du).join(" | ")}`;const m=a[0],g=Cy(n),b=rE(n,m),s=rE(n,g);return a.length===1&&oE(m)&&!LP(m,g)&&(h+=` with value ${b}`),h+=`, got ${g} `,oE(g)&&(h+=`with value ${s}.`),h}function rE(t,n){return n==="String"?`"${t}"`:n==="Number"?`${Number(t)}`:`${t}`}function oE(t){return["string","number","boolean"].some(a=>t.toLowerCase()===a)}function LP(...t){return t.some(n=>n.toLowerCase()==="boolean")}const sE=t=>t[0]==="_"||t==="$stable",ev=t=>Dn(t)?t.map(ta):[ta(t)],PP=(t,n,a)=>{const h=tP((...m)=>(Lr&&qt(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),ev(n(...m))),a);return h._c=!1,h},aE=(t,n,a)=>{const h=t._ctx;for(const m in t){if(sE(m))continue;const g=t[m];if(qn(g))n[m]=PP(m,g,h);else if(g!=null){qt(`Non-function value encountered for slot "${m}". Prefer function slots for better performance.`);const b=ev(g);n[m]=()=>b}}},lE=(t,n)=>{Jd(t.vnode)||qt("Non-function value encountered for default slot. Prefer function slots for better performance.");const a=ev(n);t.slots.default=()=>a},OP=(t,n)=>{if(t.vnode.shapeFlag&32){const a=n._;a?(t.slots=ri(n),Pm(n,"_",a)):aE(n,t.slots={})}else t.slots={},n&&lE(t,n);Pm(t.slots,t_,1)},DP=(t,n,a)=>{const{vnode:h,slots:m}=t;let g=!0,b=Si;if(h.shapeFlag&32){const s=n._;s?Mc?_r(m,n):a&&s===1?g=!1:(_r(m,n),!a&&s===1&&delete m._):(g=!n.$stable,aE(n,m)),b=n}else n&&(lE(t,n),b={default:1});if(g)for(const s in m)!sE(s)&&!(s in b)&&delete m[s]},RP=Tc("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo");function cE(t){RP(t)&&qt("Do not use built-in directive ids as custom directive id: "+t)}function S8(t,n){const a=Co;if(a===null)return qt("withDirectives can only be used inside render functions."),t;const h=a.proxy,m=t.dirs||(t.dirs=[]);for(let g=0;g<n.length;g++){let[b,s,C,D=Si]=n[g];qn(b)&&(b={mounted:b,updated:b}),b.deep&&Ju(s),m.push({dir:b,instance:h,value:s,oldValue:void 0,arg:C,modifiers:D})}return t}function Hu(t,n,a,h){const m=t.dirs,g=n&&n.dirs;for(let b=0;b<m.length;b++){const s=m[b];g&&(s.oldValue=g[b].value);let C=s.dir[h];C&&(Fu(),Ds(C,a,8,[t.el,s,t,n]),Cc())}}function uE(){return{app:null,config:{isNativeTag:Qb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zP=0;function NP(t,n){return function(h,m=null){m!=null&&!$i(m)&&(qt("root props passed to app.mount() must be an object."),m=null);const g=uE(),b=new Set;let s=!1;const C=g.app={_uid:zP++,_component:h,_props:m,_container:null,_context:g,_instance:null,version:NE,get config(){return g.config},set config(D){qt("app.config cannot be replaced. Modify individual options instead.")},use(D,...M){return b.has(D)?qt("Plugin has already been applied to target app."):D&&qn(D.install)?(b.add(D),D.install(C,...M)):qn(D)?(b.add(D),D(C,...M)):qt('A plugin must either be a function or an object with an "install" function.'),C},mixin(D){return g.mixins.includes(D)?qt("Mixin has already been applied to target app"+(D.name?`: ${D.name}`:"")):g.mixins.push(D),C},component(D,M){return sv(D,g.config),M?(g.components[D]&&qt(`Component "${D}" has already been registered in target app.`),g.components[D]=M,C):g.components[D]},directive(D,M){return cE(D),M?(g.directives[D]&&qt(`Directive "${D}" has already been registered in target app.`),g.directives[D]=M,C):g.directives[D]},mount(D,M,L){if(s)qt("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{const F=eo(h,m);return F.appContext=g,g.reload=()=>{t(Pc(F),D,L)},M&&n?n(F,D):t(F,D,L),s=!0,C._container=D,D.__vue_app__=C,C._instance=F.component,qL(C,NE),lv(F.component)||F.component.proxy}},unmount(){s?(t(null,C._container),C._instance=null,ZL(C),delete C._container.__vue_app__):qt("Cannot unmount an app that is not mounted.")},provide(D,M){return D in g.provides&&qt(`App already provides property with key "${String(D)}". It will be overwritten with the new value.`),g.provides[D]=M,C}};return C}}let Gu,Lc;function xl(t,n){t.appContext.config.performance&&hE()&&Lc.mark(`vue-${n}-${t.uid}`),KL(t,n,Gu?Lc.now():Date.now())}function bl(t,n){if(t.appContext.config.performance&&hE()){const a=`vue-${n}-${t.uid}`,h=a+":end";Lc.mark(h),Lc.measure(`<${r_(t,t.type)}> ${n}`,a,h),Lc.clearMarks(a),Lc.clearMarks(h)}JL(t,n,Gu?Lc.now():Date.now())}function hE(){return Gu!==void 0||(typeof window!="undefined"&&window.performance?(Gu=!0,Lc=window.performance):Gu=!1),Gu}function FP(){const t=[];if(t.length){const n=t.length>1;console.warn(`Feature flag${n?"s":""} ${t.join(", ")} ${n?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see http://link.vuejs.org/feature-flags.`)}}const Mo=lP;function BP(t){return $P(t)}function $P(t,n){FP();const a=ow();a.__VUE__=!0,Ow(a.__VUE_DEVTOOLS_GLOBAL_HOOK__,a);const{insert:h,remove:m,patchProp:g,createElement:b,createText:s,createComment:C,setText:D,setElementText:M,parentNode:L,nextSibling:F,setScopeId:Y=Xo,cloneNode:Te,insertStaticContent:ue}=t,K=(te,ge,Ze,Je=null,mt=null,St=null,Vt=!1,Ct=null,vt=Mc?!1:!!ge.dynamicChildren)=>{if(te===ge)return;te&&!qu(te,ge)&&(Je=sn(te),dn(te,mt,St,!0),te=null),ge.patchFlag===-2&&(vt=!1,ge.dynamicChildren=null);const{type:Me,ref:et,shapeFlag:jt}=ge;switch(Me){case xf:G(te,ge,Ze,Je);break;case fo:Q(te,ge,Ze,Je);break;case ep:te==null?_e(ge,Ze,Je,Vt):Ce(te,ge,Ze,Vt);break;case ko:xe(te,ge,Ze,Je,mt,St,Vt,Ct,vt);break;default:jt&1?$e(te,ge,Ze,Je,mt,St,Vt,Ct,vt):jt&6?je(te,ge,Ze,Je,mt,St,Vt,Ct,vt):jt&64||jt&128?Me.process(te,ge,Ze,Je,mt,St,Vt,Ct,vt,me):qt("Invalid VNode type:",Me,`(${typeof Me})`)}et!=null&&mt&&tv(et,te&&te.ref,St,ge||te,!ge)},G=(te,ge,Ze,Je)=>{if(te==null)h(ge.el=s(ge.children),Ze,Je);else{const mt=ge.el=te.el;ge.children!==te.children&&D(mt,ge.children)}},Q=(te,ge,Ze,Je)=>{te==null?h(ge.el=C(ge.children||""),Ze,Je):ge.el=te.el},_e=(te,ge,Ze,Je)=>{[te.el,te.anchor]=ue(te.children,ge,Ze,Je)},Ce=(te,ge,Ze,Je)=>{if(ge.children!==te.children){const mt=F(te.anchor);Le(te),[ge.el,ge.anchor]=ue(ge.children,Ze,mt,Je)}else ge.el=te.el,ge.anchor=te.anchor},Ae=({el:te,anchor:ge},Ze,Je)=>{let mt;for(;te&&te!==ge;)mt=F(te),h(te,Ze,Je),te=mt;h(ge,Ze,Je)},Le=({el:te,anchor:ge})=>{let Ze;for(;te&&te!==ge;)Ze=F(te),m(te),te=Ze;m(ge)},$e=(te,ge,Ze,Je,mt,St,Vt,Ct,vt)=>{Vt=Vt||ge.type==="svg",te==null?pt(ge,Ze,Je,mt,St,Vt,Ct,vt):Ye(te,ge,mt,St,Vt,Ct,vt)},pt=(te,ge,Ze,Je,mt,St,Vt,Ct)=>{let vt,Me;const{type:et,props:jt,shapeFlag:Zt,transition:bn,patchFlag:Tn,dirs:An}=te;{if(vt=te.el=b(te.type,St,jt&&jt.is,jt),Zt&8?M(vt,te.children):Zt&16&&ve(te.children,vt,null,Je,mt,St&&et!=="foreignObject",Vt,Ct),An&&Hu(te,null,Je,"created"),jt){for(const si in jt)si!=="value"&&!km(si)&&g(vt,si,null,jt[si],St,te.children,Je,mt,Et);"value"in jt&&g(vt,"value",null,jt.value),(Me=jt.onVnodeBeforeMount)&&za(Me,Je,te)}Xe(vt,te,te.scopeId,Vt,Je)}Object.defineProperty(vt,"__vnode",{value:te,enumerable:!1}),Object.defineProperty(vt,"__vueParentComponent",{value:Je,enumerable:!1}),An&&Hu(te,null,Je,"beforeMount");const Sn=(!mt||mt&&!mt.pendingBranch)&&bn&&!bn.persisted;Sn&&bn.beforeEnter(vt),h(vt,ge,Ze),((Me=jt&&jt.onVnodeMounted)||Sn||An)&&Mo(()=>{Me&&za(Me,Je,te),Sn&&bn.enter(vt),An&&Hu(te,null,Je,"mounted")},mt)},Xe=(te,ge,Ze,Je,mt)=>{if(Ze&&Y(te,Ze),Je)for(let St=0;St<Je.length;St++)Y(te,Je[St]);if(mt){let St=mt.subTree;if(St.patchFlag>0&&St.patchFlag&2048&&(St=Nw(St.children)||St),ge===St){const Vt=mt.vnode;Xe(te,Vt,Vt.scopeId,Vt.slotScopeIds,mt.parent)}}},ve=(te,ge,Ze,Je,mt,St,Vt,Ct,vt=0)=>{for(let Me=vt;Me<te.length;Me++){const et=te[Me]=Ct?Oc(te[Me]):ta(te[Me]);K(null,et,ge,Ze,Je,mt,St,Vt,Ct)}},Ye=(te,ge,Ze,Je,mt,St,Vt)=>{const Ct=ge.el=te.el;let{patchFlag:vt,dynamicChildren:Me,dirs:et}=ge;vt|=te.patchFlag&16;const jt=te.props||Si,Zt=ge.props||Si;let bn;(bn=Zt.onVnodeBeforeUpdate)&&za(bn,Ze,ge,te),et&&Hu(ge,te,Ze,"beforeUpdate"),Mc&&(vt=0,Vt=!1,Me=null);const Tn=mt&&ge.type!=="foreignObject";if(Me?(Be(te.dynamicChildren,Me,Ct,Ze,Je,Tn,St),Ze&&Ze.type.__hmrId&&Qd(te,ge)):Vt||Ut(te,ge,Ct,null,Ze,Je,Tn,St,!1),vt>0){if(vt&16)Pe(Ct,ge,jt,Zt,Ze,Je,mt);else if(vt&2&&jt.class!==Zt.class&&g(Ct,"class",null,Zt.class,mt),vt&4&&g(Ct,"style",jt.style,Zt.style,mt),vt&8){const An=ge.dynamicProps;for(let Sn=0;Sn<An.length;Sn++){const si=An[Sn],Ci=jt[si],lr=Zt[si];(lr!==Ci||si==="value")&&g(Ct,si,Ci,lr,mt,te.children,Ze,Je,Et)}}vt&1&&te.children!==ge.children&&M(Ct,ge.children)}else!Vt&&Me==null&&Pe(Ct,ge,jt,Zt,Ze,Je,mt);((bn=Zt.onVnodeUpdated)||et)&&Mo(()=>{bn&&za(bn,Ze,ge,te),et&&Hu(ge,te,Ze,"updated")},Je)},Be=(te,ge,Ze,Je,mt,St,Vt)=>{for(let Ct=0;Ct<ge.length;Ct++){const vt=te[Ct],Me=ge[Ct],et=vt.el&&(vt.type===ko||!qu(vt,Me)||vt.shapeFlag&(6|64))?L(vt.el):Ze;K(vt,Me,et,null,Je,mt,St,Vt,!0)}},Pe=(te,ge,Ze,Je,mt,St,Vt)=>{if(Ze!==Je){for(const Ct in Je){if(km(Ct))continue;const vt=Je[Ct],Me=Ze[Ct];vt!==Me&&Ct!=="value"&&g(te,Ct,Me,vt,Vt,ge.children,mt,St,Et)}if(Ze!==Si)for(const Ct in Ze)!km(Ct)&&!(Ct in Je)&&g(te,Ct,Ze[Ct],null,Vt,ge.children,mt,St,Et);"value"in Je&&g(te,"value",Ze.value,Je.value)}},xe=(te,ge,Ze,Je,mt,St,Vt,Ct,vt)=>{const Me=ge.el=te?te.el:s(""),et=ge.anchor=te?te.anchor:s("");let{patchFlag:jt,dynamicChildren:Zt,slotScopeIds:bn}=ge;Mc&&(jt=0,vt=!1,Zt=null),bn&&(Ct=Ct?Ct.concat(bn):bn),te==null?(h(Me,Ze,Je),h(et,Ze,Je),ve(ge.children,Ze,et,mt,St,Vt,Ct,vt)):jt>0&&jt&64&&Zt&&te.dynamicChildren?(Be(te.dynamicChildren,Zt,Ze,mt,St,Vt,Ct),mt&&mt.type.__hmrId?Qd(te,ge):(ge.key!=null||mt&&ge===mt.subTree)&&Qd(te,ge,!0)):Ut(te,ge,Ze,et,mt,St,Vt,Ct,vt)},je=(te,ge,Ze,Je,mt,St,Vt,Ct,vt)=>{ge.slotScopeIds=Ct,te==null?ge.shapeFlag&512?mt.ctx.activate(ge,Ze,Je,Vt,vt):lt(ge,Ze,Je,mt,St,Vt,vt):Qe(te,ge,vt)},lt=(te,ge,Ze,Je,mt,St,Vt)=>{const Ct=te.component=iO(te,Je,mt);if(Ct.type.__hmrId&&jL(Ct),o_(te),xl(Ct,"mount"),Jd(te)&&(Ct.ctx.renderer=me),xl(Ct,"init"),oO(Ct),bl(Ct,"init"),Ct.asyncDep){if(mt&&mt.registerDep(Ct,ht),!te.el){const vt=Ct.subTree=eo(fo);Q(null,vt,ge,Ze)}return}ht(Ct,te,ge,Ze,mt,St,Vt),s_(),bl(Ct,"mount")},Qe=(te,ge,Ze)=>{const Je=ge.component=te.component;if(oP(te,ge,Ze))if(Je.asyncDep&&!Je.asyncResolved){o_(ge),ct(Je,ge,Ze),s_();return}else Je.next=ge,vO(Je.update),Je.update();else ge.component=te.component,ge.el=te.el,Je.vnode=ge},ht=(te,ge,Ze,Je,mt,St,Vt)=>{const Ct=()=>{if(te.isMounted){let{next:et,bu:jt,u:Zt,parent:bn,vnode:Tn}=te,An=et,Sn;o_(et||te.vnode),vt.allowRecurse=!1,et?(et.el=Tn.el,ct(te,et,Vt)):et=Tn,jt&&pf(jt),(Sn=et.props&&et.props.onVnodeBeforeUpdate)&&za(Sn,bn,et,Tn),vt.allowRecurse=!0,xl(te,"render");const si=Hy(te);bl(te,"render");const Ci=te.subTree;te.subTree=si,xl(te,"patch"),K(Ci,si,L(Ci.el),sn(Ci),te,mt,St),bl(te,"patch"),et.el=si.el,An===null&&sP(te,si.el),Zt&&Mo(Zt,mt),(Sn=et.props&&et.props.onVnodeUpdated)&&Mo(()=>za(Sn,bn,et,Tn),mt),Dw(te),s_()}else{let et;const{el:jt,props:Zt}=ge,{bm:bn,m:Tn,parent:An}=te,Sn=Zy(ge);if(vt.allowRecurse=!1,bn&&pf(bn),!Sn&&(et=Zt&&Zt.onVnodeBeforeMount)&&za(et,An,ge),vt.allowRecurse=!0,jt&&ot){const si=()=>{xl(te,"render"),te.subTree=Hy(te),bl(te,"render"),xl(te,"hydrate"),ot(jt,te.subTree,te,mt,null),bl(te,"hydrate")};Sn?ge.type.__asyncLoader().then(()=>!te.isUnmounted&&si()):si()}else{xl(te,"render");const si=te.subTree=Hy(te);bl(te,"render"),xl(te,"patch"),K(null,si,Ze,Je,te,mt,St),bl(te,"patch"),ge.el=si.el}if(Tn&&Mo(Tn,mt),!Sn&&(et=Zt&&Zt.onVnodeMounted)){const si=ge;Mo(()=>za(et,An,si),mt)}ge.shapeFlag&256&&te.a&&Mo(te.a,mt),te.isMounted=!0,XL(te),ge=Ze=Je=null}},vt=new Oy(Ct,()=>mv(te.update),te.scope),Me=te.update=vt.run.bind(vt);Me.id=te.uid,vt.allowRecurse=Me.allowRecurse=!0,vt.onTrack=te.rtc?et=>pf(te.rtc,et):void 0,vt.onTrigger=te.rtg?et=>pf(te.rtg,et):void 0,Me.ownerInstance=te,Me()},ct=(te,ge,Ze)=>{ge.component=te;const Je=te.vnode.props;te.vnode=ge,te.next=null,SP(te,ge.props,Je,Ze),DP(te,ge.children,Ze),Fu(),_v(void 0,te.update),Cc()},Ut=(te,ge,Ze,Je,mt,St,Vt,Ct,vt=!1)=>{const Me=te&&te.children,et=te?te.shapeFlag:0,jt=ge.children,{patchFlag:Zt,shapeFlag:bn}=ge;if(Zt>0){if(Zt&128){hn(Me,jt,Ze,Je,mt,St,Vt,Ct,vt);return}else if(Zt&256){Ke(Me,jt,Ze,Je,mt,St,Vt,Ct,vt);return}}bn&8?(et&16&&Et(Me,mt,St),jt!==Me&&M(Ze,jt)):et&16?bn&16?hn(Me,jt,Ze,Je,mt,St,Vt,Ct,vt):Et(Me,mt,St,!0):(et&8&&M(Ze,""),bn&16&&ve(jt,Ze,Je,mt,St,Vt,Ct,vt))},Ke=(te,ge,Ze,Je,mt,St,Vt,Ct,vt)=>{te=te||df,ge=ge||df;const Me=te.length,et=ge.length,jt=Math.min(Me,et);let Zt;for(Zt=0;Zt<jt;Zt++){const bn=ge[Zt]=vt?Oc(ge[Zt]):ta(ge[Zt]);K(te[Zt],bn,Ze,null,mt,St,Vt,Ct,vt)}Me>et?Et(te,mt,St,!0,!1,jt):ve(ge,Ze,Je,mt,St,Vt,Ct,vt,jt)},hn=(te,ge,Ze,Je,mt,St,Vt,Ct,vt)=>{let Me=0;const et=ge.length;let jt=te.length-1,Zt=et-1;for(;Me<=jt&&Me<=Zt;){const bn=te[Me],Tn=ge[Me]=vt?Oc(ge[Me]):ta(ge[Me]);if(qu(bn,Tn))K(bn,Tn,Ze,null,mt,St,Vt,Ct,vt);else break;Me++}for(;Me<=jt&&Me<=Zt;){const bn=te[jt],Tn=ge[Zt]=vt?Oc(ge[Zt]):ta(ge[Zt]);if(qu(bn,Tn))K(bn,Tn,Ze,null,mt,St,Vt,Ct,vt);else break;jt--,Zt--}if(Me>jt){if(Me<=Zt){const bn=Zt+1,Tn=bn<et?ge[bn].el:Je;for(;Me<=Zt;)K(null,ge[Me]=vt?Oc(ge[Me]):ta(ge[Me]),Ze,Tn,mt,St,Vt,Ct,vt),Me++}}else if(Me>Zt)for(;Me<=jt;)dn(te[Me],mt,St,!0),Me++;else{const bn=Me,Tn=Me,An=new Map;for(Me=Tn;Me<=Zt;Me++){const ti=ge[Me]=vt?Oc(ge[Me]):ta(ge[Me]);ti.key!=null&&(An.has(ti.key)&&qt("Duplicate keys found during update:",JSON.stringify(ti.key),"Make sure keys are unique."),An.set(ti.key,Me))}let Sn,si=0;const Ci=Zt-Tn+1;let lr=!1,xr=0;const Ti=new Array(Ci);for(Me=0;Me<Ci;Me++)Ti[Me]=0;for(Me=bn;Me<=jt;Me++){const ti=te[Me];if(si>=Ci){dn(ti,mt,St,!0);continue}let gi;if(ti.key!=null)gi=An.get(ti.key);else for(Sn=Tn;Sn<=Zt;Sn++)if(Ti[Sn-Tn]===0&&qu(ti,ge[Sn])){gi=Sn;break}gi===void 0?dn(ti,mt,St,!0):(Ti[gi-Tn]=Me+1,gi>=xr?xr=gi:lr=!0,K(ti,ge[gi],Ze,null,mt,St,Vt,Ct,vt),si++)}const Ui=lr?UP(Ti):df;for(Sn=Ui.length-1,Me=Ci-1;Me>=0;Me--){const ti=Tn+Me,gi=ge[ti],Cr=ti+1<et?ge[ti+1].el:Je;Ti[Me]===0?K(null,gi,Ze,Cr,mt,St,Vt,Ct,vt):lr&&(Sn<0||Me!==Ui[Sn]?Ht(gi,Ze,Cr,2):Sn--)}}},Ht=(te,ge,Ze,Je,mt=null)=>{const{el:St,type:Vt,transition:Ct,children:vt,shapeFlag:Me}=te;if(Me&6){Ht(te.component.subTree,ge,Ze,Je);return}if(Me&128){te.suspense.move(ge,Ze,Je);return}if(Me&64){Vt.move(te,ge,Ze,me);return}if(Vt===ko){h(St,ge,Ze);for(let jt=0;jt<vt.length;jt++)Ht(vt[jt],ge,Ze,Je);h(te.anchor,ge,Ze);return}if(Vt===ep){Ae(te,ge,Ze);return}if(Je!==2&&Me&1&&Ct)if(Je===0)Ct.beforeEnter(St),h(St,ge,Ze),Mo(()=>Ct.enter(St),mt);else{const{leave:jt,delayLeave:Zt,afterLeave:bn}=Ct,Tn=()=>h(St,ge,Ze),An=()=>{jt(St,()=>{Tn(),bn&&bn()})};Zt?Zt(St,Tn,An):An()}else h(St,ge,Ze)},dn=(te,ge,Ze,Je=!1,mt=!1)=>{const{type:St,props:Vt,ref:Ct,children:vt,dynamicChildren:Me,shapeFlag:et,patchFlag:jt,dirs:Zt}=te;if(Ct!=null&&tv(Ct,null,Ze,te,!0),et&256){ge.ctx.deactivate(te);return}const bn=et&1&&Zt,Tn=!Zy(te);let An;if(Tn&&(An=Vt&&Vt.onVnodeBeforeUnmount)&&za(An,ge,te),et&6)kt(te.component,Ze,Je);else{if(et&128){te.suspense.unmount(Ze,Je);return}bn&&Hu(te,null,ge,"beforeUnmount"),et&64?te.type.remove(te,ge,Ze,mt,me,Je):Me&&(St!==ko||jt>0&&jt&64)?Et(Me,ge,Ze,!1,!0):(St===ko&&jt&(128|256)||!mt&&et&16)&&Et(vt,ge,Ze),Je&&Ue(te)}(Tn&&(An=Vt&&Vt.onVnodeUnmounted)||bn)&&Mo(()=>{An&&za(An,ge,te),bn&&Hu(te,null,ge,"unmounted")},Ze)},Ue=te=>{const{type:ge,el:Ze,anchor:Je,transition:mt}=te;if(ge===ko){wt(Ze,Je);return}if(ge===ep){Le(te);return}const St=()=>{m(Ze),mt&&!mt.persisted&&mt.afterLeave&&mt.afterLeave()};if(te.shapeFlag&1&&mt&&!mt.persisted){const{leave:Vt,delayLeave:Ct}=mt,vt=()=>Vt(Ze,St);Ct?Ct(te.el,St,vt):vt()}else St()},wt=(te,ge)=>{let Ze;for(;te!==ge;)Ze=F(te),m(te),te=Ze;m(ge)},kt=(te,ge,Ze)=>{te.type.__hmrId&&HL(te);const{bum:Je,scope:mt,update:St,subTree:Vt,um:Ct}=te;Je&&pf(Je),mt.stop(),St&&(St.active=!1,dn(Vt,te,ge,Ze)),Ct&&Mo(Ct,ge),Mo(()=>{te.isUnmounted=!0},ge),ge&&ge.pendingBranch&&!ge.isUnmounted&&te.asyncDep&&!te.asyncResolved&&te.suspenseId===ge.pendingId&&(ge.deps--,ge.deps===0&&ge.resolve()),YL(te)},Et=(te,ge,Ze,Je=!1,mt=!1,St=0)=>{for(let Vt=St;Vt<te.length;Vt++)dn(te[Vt],ge,Ze,Je,mt)},sn=te=>te.shapeFlag&6?sn(te.component.subTree):te.shapeFlag&128?te.suspense.next():F(te.anchor||te.el),En=(te,ge,Ze)=>{te==null?ge._vnode&&dn(ge._vnode,null,null,!0):K(ge._vnode||null,te,ge,null,null,null,Ze),OE(),ge._vnode=te},me={p:K,um:dn,m:Ht,r:Ue,mt:lt,mc:ve,pc:Ut,pbc:Be,n:sn,o:t};let oe,ot;return n&&([oe,ot]=n(me)),{render:En,hydrate:oe,createApp:NP(En,oe)}}function tv(t,n,a,h,m=!1){if(Dn(t)){t.forEach((F,Y)=>tv(F,n&&(Dn(n)?n[Y]:n),a,h,m));return}if(Zy(h)&&!m)return;const g=h.shapeFlag&4?lv(h.component)||h.component.proxy:h.el,b=m?null:g,{i:s,r:C}=t;if(!s){qt("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const D=n&&n.r,M=s.refs===Si?s.refs={}:s.refs,L=s.setupState;if(D!=null&&D!==C&&(gr(D)?(M[D]=null,mi(L,D)&&(L[D]=null)):Qr(D)&&(D.value=null)),gr(C)){const F=()=>{M[C]=b,mi(L,C)&&(L[C]=b)};b?(F.id=-1,Mo(F,a)):F()}else if(Qr(C)){const F=()=>{C.value=b};b?(F.id=-1,Mo(F,a)):F()}else qn(C)?El(C,s,12,[b,M]):qt("Invalid template ref type:",b,`(${typeof b})`)}function za(t,n,a,h=null){Ds(t,n,7,[a,h])}function Qd(t,n,a=!1){const h=t.children,m=n.children;if(Dn(h)&&Dn(m))for(let g=0;g<h.length;g++){const b=h[g];let s=m[g];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=m[g]=Oc(m[g]),s.el=b.el),a||Qd(b,s)),s.type===fo&&!s.el&&(s.el=b.el)}}function UP(t){const n=t.slice(),a=[0];let h,m,g,b,s;const C=t.length;for(h=0;h<C;h++){const D=t[h];if(D!==0){if(m=a[a.length-1],t[m]<D){n[h]=m,a.push(h);continue}for(g=0,b=a.length-1;g<b;)s=g+b>>1,t[a[s]]<D?g=s+1:b=s;D<t[a[g]]&&(g>0&&(n[h]=a[g-1]),a[g]=h)}}for(g=a.length,b=a[g-1];g-- >0;)a[g]=b,b=n[b];return a}const VP=t=>t.__isTeleport,vf=t=>t&&(t.disabled||t.disabled===""),fE=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,nv=(t,n)=>{const a=t&&t.to;if(gr(a))if(n){const h=n(a);return h||qt(`Failed to locate Teleport target with selector "${a}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),h}else return qt("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return!a&&!vf(t)&&qt(`Invalid Teleport target: ${a}`),a},jP={__isTeleport:!0,process(t,n,a,h,m,g,b,s,C,D){const{mc:M,pc:L,pbc:F,o:{insert:Y,querySelector:Te,createText:ue,createComment:K}}=D,G=vf(n.props);let{shapeFlag:Q,children:_e,dynamicChildren:Ce}=n;if(Mc&&(C=!1,Ce=null),t==null){const Ae=n.el=K("teleport start"),Le=n.anchor=K("teleport end");Y(Ae,a,h),Y(Le,a,h);const $e=n.target=nv(n.props,Te),pt=n.targetAnchor=ue("");$e?(Y(pt,$e),b=b||fE($e)):G||qt("Invalid Teleport target on mount:",$e,`(${typeof $e})`);const Xe=(ve,Ye)=>{Q&16&&M(_e,ve,Ye,m,g,b,s,C)};G?Xe(a,Le):$e&&Xe($e,pt)}else{n.el=t.el;const Ae=n.anchor=t.anchor,Le=n.target=t.target,$e=n.targetAnchor=t.targetAnchor,pt=vf(t.props),Xe=pt?a:Le,ve=pt?Ae:$e;if(b=b||fE(Le),Ce?(F(t.dynamicChildren,Ce,Xe,m,g,b,s),Qd(t,n,!0)):C||L(t,n,Xe,ve,m,g,b,s,!1),G)pt||Jm(n,a,Ae,D,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const Ye=n.target=nv(n.props,Te);Ye?Jm(n,Ye,null,D,0):qt("Invalid Teleport target on update:",Le,`(${typeof Le})`)}else pt&&Jm(n,Le,$e,D,1)}},remove(t,n,a,h,{um:m,o:{remove:g}},b){const{shapeFlag:s,children:C,anchor:D,targetAnchor:M,target:L,props:F}=t;if(L&&g(M),(b||!vf(F))&&(g(D),s&16))for(let Y=0;Y<C.length;Y++){const Te=C[Y];m(Te,n,a,!0,!!Te.dynamicChildren)}},move:Jm,hydrate:HP};function Jm(t,n,a,{o:{insert:h},m},g=2){g===0&&h(t.targetAnchor,n,a);const{el:b,anchor:s,shapeFlag:C,children:D,props:M}=t,L=g===2;if(L&&h(b,n,a),(!L||vf(M))&&C&16)for(let F=0;F<D.length;F++)m(D[F],n,a,2);L&&h(s,n,a)}function HP(t,n,a,h,m,g,{o:{nextSibling:b,parentNode:s,querySelector:C}},D){const M=n.target=nv(n.props,C);if(M){const L=M._lpa||M.firstChild;n.shapeFlag&16&&(vf(n.props)?(n.anchor=D(b(t),n,s(t),a,h,m,g),n.targetAnchor=L):(n.anchor=b(t),n.targetAnchor=D(L,n,M,a,h,m,g)),M._lpa=n.targetAnchor&&b(n.targetAnchor))}return n.anchor&&b(n.anchor)}const C8=jP,Qm="components",GP="directives";function I8(t,n){return iv(Qm,t,!0,n)||t}const dE=Symbol();function M8(t){return gr(t)?iv(Qm,t,!1)||t:t||dE}function k8(t){return iv(GP,t)}function iv(t,n,a=!0,h=!1){const m=Co||Lr;if(m){const g=m.type;if(t===Qm){const s=cv(g);if(s&&(s===n||s===Ra(n)||s===Du(Ra(n))))return g}const b=pE(m[t]||g[t],n)||pE(m.appContext[t],n);if(!b&&h)return g;if(a&&!b){const s=t===Qm?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";qt(`Failed to resolve ${t.slice(0,-1)}: ${n}${s}`)}return b}else qt(`resolve${Du(t.slice(0,-1))} can only be used in render() or setup().`)}function pE(t,n){return t&&(t[n]||t[Ra(n)]||t[Du(Ra(n))])}const ko=Symbol("Fragment"),xf=Symbol("Text"),fo=Symbol("Comment"),ep=Symbol("Static"),tp=[];let Wu=null;function mE(t=!1){tp.push(Wu=t?null:[])}function WP(){tp.pop(),Wu=tp[tp.length-1]||null}let e_=1;function _E(t){e_+=t}function gE(t){return t.dynamicChildren=e_>0?Wu||df:null,WP(),e_>0&&Wu&&Wu.push(t),t}function L8(t,n,a,h,m,g){return gE(xE(t,n,a,h,m,g,!0))}function yE(t,n,a,h,m){return gE(eo(t,n,a,h,m,!0))}function bf(t){return t?t.__v_isVNode===!0:!1}function qu(t,n){return n.shapeFlag&6&&yf.has(n.type)?!1:t.type===n.type&&t.key===n.key}const qP=(...t)=>ZP(...t),t_="__vInternal",vE=({key:t})=>t!=null?t:null,n_=({ref:t})=>t!=null?gr(t)||Qr(t)||qn(t)?{i:Co,r:t}:t:null;function xE(t,n=null,a=null,h=0,m=null,g=t===ko?0:1,b=!1,s=!1){const C={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&vE(n),ref:n&&n_(n),scopeId:Gm,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:h,dynamicProps:m,dynamicChildren:null,appContext:null};return s?(rv(C,a),g&128&&t.normalize(C)):a&&(C.shapeFlag|=gr(a)?8:16),C.key!==C.key&&qt("VNode created with invalid key (NaN). VNode type:",C.type),e_>0&&!b&&Wu&&(C.patchFlag>0||g&6)&&C.patchFlag!==32&&Wu.push(C),C}const eo=qP;function ZP(t,n=null,a=null,h=0,m=null,g=!1){if((!t||t===dE)&&(t||qt(`Invalid vnode type when creating vnode: ${t}.`),t=fo),bf(t)){const s=Pc(t,n,!0);return a&&rv(s,a),s}if(CE(t)&&(t=t.__vccOpts),n){n=XP(n);let{class:s,style:C}=n;s&&!gr(s)&&(n.class=Ty(s)),$i(C)&&(Ny(C)&&!Dn(C)&&(C=_r({},C)),n.style=Ey(C))}const b=gr(t)?1:aP(t)?128:VP(t)?64:$i(t)?4:qn(t)?2:0;return b&4&&Ny(t)&&(t=ri(t),qt("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),xE(t,n,a,h,m,b,g,!0)}function XP(t){return t?Ny(t)||t_ in t?_r({},t):t:null}function Pc(t,n,a=!1){const{props:h,ref:m,patchFlag:g,children:b}=t,s=n?KP(h||{},n):h;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&vE(s),ref:n&&n.ref?a&&m?Dn(m)?m.concat(n_(n)):[m,n_(n)]:n_(n):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:g===-1&&Dn(b)?b.map(bE):b,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==ko?g===-1?16:g|16:g,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Pc(t.ssContent),ssFallback:t.ssFallback&&Pc(t.ssFallback),el:t.el,anchor:t.anchor}}function bE(t){const n=Pc(t);return Dn(t.children)&&(n.children=t.children.map(bE)),n}function YP(t=" ",n=0){return eo(xf,null,t,n)}function P8(t,n){const a=eo(ep,null,t);return a.staticCount=n,a}function O8(t="",n=!1){return n?(mE(),yE(fo,null,t)):eo(fo,null,t)}function ta(t){return t==null||typeof t=="boolean"?eo(fo):Dn(t)?eo(ko,null,t.slice()):typeof t=="object"?Oc(t):eo(xf,null,String(t))}function Oc(t){return t.el===null||t.memo?t:Pc(t)}function rv(t,n){let a=0;const{shapeFlag:h}=t;if(n==null)n=null;else if(Dn(n))a=16;else if(typeof n=="object")if(h&(1|64)){const m=n.default;m&&(m._c&&(m._d=!1),rv(t,m()),m._c&&(m._d=!0));return}else{a=32;const m=n._;!m&&!(t_ in n)?n._ctx=Co:m===3&&Co&&(Co.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else qn(n)?(n={default:n,_ctx:Co},a=32):(n=String(n),h&64?(a=16,n=[YP(n)]):a=8);t.children=n,t.shapeFlag|=a}function KP(...t){const n={};for(let a=0;a<t.length;a++){const h=t[a];for(const m in h)if(m==="class")n.class!==h.class&&(n.class=Ty([n.class,h.class]));else if(m==="style")n.style=Ey([n.style,h.style]);else if(jd(m)){const g=n[m],b=h[m];g!==b&&(n[m]=g?[].concat(g,b):b)}else m!==""&&(n[m]=h[m])}return n}function D8(t,n,a,h){let m;const g=a&&a[h];if(Dn(t)||gr(t)){m=new Array(t.length);for(let b=0,s=t.length;b<s;b++)m[b]=n(t[b],b,void 0,g&&g[b])}else if(typeof t=="number"){if(!Number.isInteger(t))return qt(`The v-for range expect an integer value but got ${t}.`),[];m=new Array(t);for(let b=0;b<t;b++)m[b]=n(b+1,b,void 0,g&&g[b])}else if($i(t))if(t[Symbol.iterator])m=Array.from(t,(b,s)=>n(b,s,void 0,g&&g[s]));else{const b=Object.keys(t);m=new Array(b.length);for(let s=0,C=b.length;s<C;s++){const D=b[s];m[s]=n(t[D],D,s,g&&g[s])}}else m=[];return a&&(a[h]=m),m}function R8(t,n){for(let a=0;a<n.length;a++){const h=n[a];if(Dn(h))for(let m=0;m<h.length;m++)t[h[m].name]=h[m].fn;else h&&(t[h.name]=h.fn)}return t}function z8(t,n,a={},h,m){if(Co.isCE)return eo("slot",n==="default"?null:{name:n},h&&h());let g=t[n];g&&g.length>1&&(qt("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),g=()=>[]),g&&g._c&&(g._d=!1),mE();const b=g&&wE(g(a)),s=yE(ko,{key:a.key||`_${n}`},b||(h?h():[]),b&&t._===1?64:-2);return!m&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),g&&g._c&&(g._d=!0),s}function wE(t){return t.some(n=>bf(n)?!(n.type===fo||n.type===ko&&!wE(n.children)):!0)?t:null}const ov=t=>t?TE(t)?lv(t)||t.proxy:ov(t.parent):null,wf=_r(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>_f(t.props),$attrs:t=>_f(t.attrs),$slots:t=>_f(t.slots),$refs:t=>_f(t.refs),$parent:t=>ov(t.parent),$root:t=>ov(t.root),$emit:t=>t.emit,$options:t=>Yw(t),$forceUpdate:t=>()=>mv(t.update),$nextTick:t=>pv.bind(t.proxy),$watch:t=>wO.bind(t)}),EE={get({_:t},n){const{ctx:a,setupState:h,data:m,props:g,accessCache:b,type:s,appContext:C}=t;if(n==="__isVue")return!0;if(h!==Si&&h.__isScriptSetup&&mi(h,n))return h[n];let D;if(n[0]!=="$"){const Y=b[n];if(Y!==void 0)switch(Y){case 0:return h[n];case 1:return m[n];case 3:return a[n];case 2:return g[n]}else{if(h!==Si&&mi(h,n))return b[n]=0,h[n];if(m!==Si&&mi(m,n))return b[n]=1,m[n];if((D=t.propsOptions[0])&&mi(D,n))return b[n]=2,g[n];if(a!==Si&&mi(a,n))return b[n]=3,a[n];Yy&&(b[n]=4)}}const M=wf[n];let L,F;if(M)return n==="$attrs"&&(us(t,"get",n),qm()),M(t);if((L=s.__cssModules)&&(L=L[n]))return L;if(a!==Si&&mi(a,n))return b[n]=3,a[n];if(F=C.config.globalProperties,mi(F,n))return F[n];Co&&(!gr(n)||n.indexOf("__v")!==0)&&(m!==Si&&(n[0]==="$"||n[0]==="_")&&mi(m,n)?qt(`Property ${JSON.stringify(n)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Co&&qt(`Property ${JSON.stringify(n)} was accessed during render but is not defined on instance.`))},set({_:t},n,a){const{data:h,setupState:m,ctx:g}=t;if(m!==Si&&mi(m,n))m[n]=a;else if(h!==Si&&mi(h,n))h[n]=a;else if(mi(t.props,n))return qt(`Attempting to mutate prop "${n}". Props are readonly.`,t),!1;return n[0]==="$"&&n.slice(1)in t?(qt(`Attempting to mutate public property "${n}". Properties starting with $ are reserved and readonly.`,t),!1):(n in t.appContext.config.globalProperties?Object.defineProperty(g,n,{enumerable:!0,configurable:!0,value:a}):g[n]=a,!0)},has({_:{data:t,setupState:n,accessCache:a,ctx:h,appContext:m,propsOptions:g}},b){let s;return a[b]!==void 0||t!==Si&&mi(t,b)||n!==Si&&mi(n,b)||(s=g[0])&&mi(s,b)||mi(h,b)||mi(wf,b)||mi(m.config.globalProperties,b)}};EE.ownKeys=t=>(qt("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t));function JP(t){const n={};return Object.defineProperty(n,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(wf).forEach(a=>{Object.defineProperty(n,a,{configurable:!0,enumerable:!1,get:()=>wf[a](t),set:Xo})}),n}function QP(t){const{ctx:n,propsOptions:[a]}=t;a&&Object.keys(a).forEach(h=>{Object.defineProperty(n,h,{enumerable:!0,configurable:!0,get:()=>t.props[h],set:Xo})})}function eO(t){const{ctx:n,setupState:a}=t;Object.keys(ri(a)).forEach(h=>{if(!a.__isScriptSetup){if(h[0]==="$"||h[0]==="_"){qt(`setup() return property ${JSON.stringify(h)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(n,h,{enumerable:!0,configurable:!0,get:()=>a[h],set:Xo})}})}const tO=uE();let nO=0;function iO(t,n,a){const h=t.type,m=(n?n.appContext:t.appContext)||tO,g={uid:nO++,vnode:t,type:h,parent:n,appContext:m,root:null,next:null,subTree:null,update:null,scope:new cL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qw(h,m),emitsOptions:zw(h,m),emit:null,emitted:null,propsDefaults:Si,inheritAttrs:h.inheritAttrs,ctx:Si,data:Si,props:Si,attrs:Si,slots:Si,refs:Si,setupState:Si,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx=JP(g),g.root=n?n.root:g,g.emit=eP.bind(null,g),t.ce&&t.ce(g),g}let Lr=null;const wl=()=>Lr||Co,Ef=t=>{Lr=t,t.scope.on()},Zu=()=>{Lr&&Lr.scope.off(),Lr=null},rO=Tc("slot,component");function sv(t,n){const a=n.isNativeTag||Qb;(rO(t)||a(t))&&qt("Do not use built-in or reserved HTML elements as component id: "+t)}function TE(t){return t.vnode.shapeFlag&4}let i_=!1;function oO(t,n=!1){i_=n;const{props:a,children:h}=t.vnode,m=TE(t);AP(t,a,m,n),OP(t,h);const g=m?sO(t,n):void 0;return i_=!1,g}function sO(t,n){const a=t.type;{if(a.name&&sv(a.name,t.appContext.config),a.components){const m=Object.keys(a.components);for(let g=0;g<m.length;g++)sv(m[g],t.appContext.config)}if(a.directives){const m=Object.keys(a.directives);for(let g=0;g<m.length;g++)cE(m[g])}a.compilerOptions&&aO()&&qt('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=Sw(new Proxy(t.ctx,EE)),QP(t);const{setup:h}=a;if(h){const m=t.setupContext=h.length>1?cO(t):null;Ef(t),Fu();const g=El(h,t,0,[_f(t.props),m]);if(Cc(),Zu(),Sy(g)){if(g.then(Zu,Zu),n)return g.then(b=>{AE(t,b,n)}).catch(b=>{a_(b,t,0)});t.asyncDep=g}else AE(t,g,n)}else SE(t,n)}function AE(t,n,a){qn(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:$i(n)?(bf(n)&&qt("setup() should not return VNodes directly - return a render function instead."),t.devtoolsRawSetupState=n,t.setupState=kw(n),eO(t)):n!==void 0&&qt(`setup() should return an object. Received: ${n===null?"null":typeof n}`),SE(t,a)}let av;const aO=()=>!av;function SE(t,n,a){const h=t.type;if(!t.render){if(!n&&av&&!h.render){const m=h.template;if(m){xl(t,"compile");const{isCustomElement:g,compilerOptions:b}=t.appContext.config,{delimiters:s,compilerOptions:C}=h,D=_r(_r({isCustomElement:g,delimiters:s},b),C);h.render=av(m,D),bl(t,"compile")}}t.render=h.render||Xo}Ef(t),Fu(),xP(t),Cc(),Zu(),!h.render&&t.render===Xo&&!n&&(h.template?qt('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):qt("Component is missing template or render function."))}function lO(t){return new Proxy(t.attrs,{get(n,a){return qm(),us(t,"get","$attrs"),n[a]},set(){return qt("setupContext.attrs is readonly."),!1},deleteProperty(){return qt("setupContext.attrs is readonly."),!1}})}function cO(t){const n=h=>{t.exposed&&qt("expose() should be called only once per setup()."),t.exposed=h||{}};let a;return Object.freeze({get attrs(){return a||(a=lO(t))},get slots(){return _f(t.slots)},get emit(){return(h,...m)=>t.emit(h,...m)},expose:n})}function lv(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(kw(Sw(t.exposed)),{get(n,a){if(a in n)return n[a];if(a in wf)return wf[a](t)}}))}const uO=/(?:^|[-_])(\w)/g,hO=t=>t.replace(uO,n=>n.toUpperCase()).replace(/[-_]/g,"");function cv(t){return qn(t)&&t.displayName||t.name}function r_(t,n,a=!1){let h=cv(n);if(!h&&n.__file){const m=n.__file.match(/([^/\\]+)\.\w+$/);m&&(h=m[1])}if(!h&&t&&t.parent){const m=g=>{for(const b in g)if(g[b]===n)return b};h=m(t.components||t.parent.type.components)||m(t.appContext.components)}return h?hO(h):a?"App":"Anonymous"}function CE(t){return qn(t)&&"__vccOpts"in t}const Xu=[];function o_(t){Xu.push(t)}function s_(){Xu.pop()}function qt(t,...n){Fu();const a=Xu.length?Xu[Xu.length-1].component:null,h=a&&a.appContext.config.warnHandler,m=fO();if(h)El(h,a,11,[t+n.join(""),a&&a.proxy,m.map(({vnode:g})=>`at <${r_(a,g.type)}>`).join(`
`),m]);else{const g=[`[Vue warn]: ${t}`,...n];m.length&&g.push(`
`,...dO(m)),console.warn(...g)}Cc()}function fO(){let t=Xu[Xu.length-1];if(!t)return[];const n=[];for(;t;){const a=n[0];a&&a.vnode===t?a.recurseCount++:n.push({vnode:t,recurseCount:0});const h=t.component&&t.component.parent;t=h&&h.vnode}return n}function dO(t){const n=[];return t.forEach((a,h)=>{n.push(...h===0?[]:[`
`],...pO(a))}),n}function pO({vnode:t,recurseCount:n}){const a=n>0?`... (${n} recursive calls)`:"",h=t.component?t.component.parent==null:!1,m=` at <${r_(t.component,t.type,h)}`,g=">"+a;return t.props?[m,...mO(t.props),g]:[m+g]}function mO(t){const n=[],a=Object.keys(t);return a.slice(0,3).forEach(h=>{n.push(...IE(h,t[h]))}),a.length>3&&n.push(" ..."),n}function IE(t,n,a){return gr(n)?(n=JSON.stringify(n),a?n:[`${t}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?a?n:[`${t}=${n}`]:Qr(n)?(n=IE(t,ri(n.value),!0),a?n:[`${t}=Ref<`,n,">"]):qn(n)?[`${t}=fn${n.name?`<${n.name}>`:""}`]:(n=ri(n),a?n:[`${t}=`,n])}const uv={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next"};function El(t,n,a,h){let m;try{m=h?t(...h):t()}catch(g){a_(g,n,a)}return m}function Ds(t,n,a,h){if(qn(t)){const g=El(t,n,a,h);return g&&Sy(g)&&g.catch(b=>{a_(b,n,a)}),g}const m=[];for(let g=0;g<t.length;g++)m.push(Ds(t[g],n,a,h));return m}function a_(t,n,a,h=!0){const m=n?n.vnode:null;if(n){let g=n.parent;const b=n.proxy,s=uv[a];for(;g;){const D=g.ec;if(D){for(let M=0;M<D.length;M++)if(D[M](t,b,s)===!1)return}g=g.parent}const C=n.appContext.config.errorHandler;if(C){El(C,null,10,[t,b,s]);return}}_O(t,a,m,h)}function _O(t,n,a,h=!0){{const m=uv[n];if(a&&o_(a),qt(`Unhandled error${m?` during execution of ${m}`:""}`),a&&s_(),h)throw t;console.error(t)}}let l_=!1,hv=!1;const fs=[];let Tl=0;const np=[];let Tf=null,Yu=0;const ip=[];let Al=null,Ku=0;const ME=Promise.resolve();let fv=null,dv=null;const gO=100;function pv(t){const n=fv||ME;return t?n.then(this?t.bind(this):t):n}function yO(t){let n=Tl+1,a=fs.length;for(;n<a;){const h=n+a>>>1;rp(fs[h])<t?n=h+1:a=h}return n}function mv(t){(!fs.length||!fs.includes(t,l_&&t.allowRecurse?Tl+1:Tl))&&t!==dv&&(t.id==null?fs.push(t):fs.splice(yO(t.id),0,t),kE())}function kE(){!l_&&!hv&&(hv=!0,fv=ME.then(DE))}function vO(t){const n=fs.indexOf(t);n>Tl&&fs.splice(n,1)}function LE(t,n,a,h){Dn(t)?a.push(...t):(!n||!n.includes(t,t.allowRecurse?h+1:h))&&a.push(t),kE()}function xO(t){LE(t,Tf,np,Yu)}function PE(t){LE(t,Al,ip,Ku)}function _v(t,n=null){if(np.length){for(dv=n,Tf=[...new Set(np)],np.length=0,t=t||new Map,Yu=0;Yu<Tf.length;Yu++)gv(t,Tf[Yu])||Tf[Yu]();Tf=null,Yu=0,dv=null,_v(t,n)}}function OE(t){if(ip.length){const n=[...new Set(ip)];if(ip.length=0,Al){Al.push(...n);return}for(Al=n,t=t||new Map,Al.sort((a,h)=>rp(a)-rp(h)),Ku=0;Ku<Al.length;Ku++)gv(t,Al[Ku])||Al[Ku]();Al=null,Ku=0}}const rp=t=>t.id==null?1/0:t.id;function DE(t){hv=!1,l_=!0,t=t||new Map,_v(t),fs.sort((a,h)=>rp(a)-rp(h));const n=a=>gv(t,a);try{for(Tl=0;Tl<fs.length;Tl++){const a=fs[Tl];if(a&&a.active!==!1){if(n(a))continue;El(a,null,14)}}}finally{Tl=0,fs.length=0,OE(t),l_=!1,fv=null,(fs.length||np.length||ip.length)&&DE(t)}}function gv(t,n){if(!t.has(n))t.set(n,1);else{const a=t.get(n);if(a>gO){const h=n.ownerInstance,m=h&&cv(h.type);return qt(`Maximum recursive updates exceeded${m?` in component <${m}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(n,a+1)}}function bO(t,n){return yv(t,null,n)}const RE={};function Na(t,n,a){return qn(n)||qt("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),yv(t,n,a)}function yv(t,n,{immediate:a,deep:h,flush:m,onTrack:g,onTrigger:b}=Si){n||(a!==void 0&&qt('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),h!==void 0&&qt('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const s=Q=>{qt("Invalid watch source: ",Q,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},C=Lr;let D,M=!1,L=!1;if(Qr(t)?(D=()=>t.value,M=!!t._shallow):$u(t)?(D=()=>t,h=!0):Dn(t)?(L=!0,M=t.some($u),D=()=>t.map(Q=>{if(Qr(Q))return Q.value;if($u(Q))return Ju(Q);if(qn(Q))return El(Q,C,2);s(Q)})):qn(t)?n?D=()=>El(t,C,2):D=()=>{if(!(C&&C.isUnmounted))return F&&F(),Ds(t,C,3,[Y])}:(D=Xo,s(t)),n&&h){const Q=D;D=()=>Ju(Q())}let F,Y=Q=>{F=G.onStop=()=>{El(Q,C,4)}};if(i_)return Y=Xo,n?a&&Ds(n,C,3,[D(),L?[]:void 0,Y]):D(),Xo;let Te=L?[]:RE;const ue=()=>{if(!!G.active)if(n){const Q=G.run();(h||M||(L?Q.some((_e,Ce)=>Hd(_e,Te[Ce])):Hd(Q,Te)))&&(F&&F(),Ds(n,C,3,[Q,Te===RE?void 0:Te,Y]),Te=Q)}else G.run()};ue.allowRecurse=!!n;let K;m==="sync"?K=ue:m==="post"?K=()=>Mo(ue,C&&C.suspense):K=()=>{!C||C.isMounted?xO(ue):ue()};const G=new Oy(D,K);return G.onTrack=g,G.onTrigger=b,n?a?ue():Te=G.run():m==="post"?Mo(G.run.bind(G),C&&C.suspense):G.run(),()=>{G.stop(),C&&C.scope&&ew(C.scope.effects,G)}}function wO(t,n,a){const h=this.proxy,m=gr(t)?t.includes(".")?zE(h,t):()=>h[t]:t.bind(h,h);let g;qn(n)?g=n:(g=n.handler,a=n);const b=Lr;Ef(this);const s=yv(m,g.bind(h),a);return b?Ef(b):Zu(),s}function zE(t,n){const a=n.split(".");return()=>{let h=t;for(let m=0;m<a.length&&h;m++)h=h[a[m]];return h}}function Ju(t,n){if(!$i(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Qr(t))Ju(t.value,n);else if(Dn(t))for(let a=0;a<t.length;a++)Ju(t[a],n);else if(Im(t)||Ou(t))t.forEach(a=>{Ju(a,n)});else if(iw(t))for(const a in t)Ju(t[a],n);return t}function Qu(t,n,a){const h=arguments.length;return h===2?$i(n)&&!Dn(n)?bf(n)?eo(t,null,[n]):eo(t,n):eo(t,null,n):(h>3?a=Array.prototype.slice.call(arguments,2):h===3&&bf(a)&&(a=[a]),eo(t,n,a))}function EO(){if(typeof window=="undefined")return;const t={style:"color:#3ba776"},n={style:"color:#0b1bc9"},a={style:"color:#b62e24"},h={style:"color:#9d288c"},m={header(L){return $i(L)?L.__isVue?["div",t,"VueInstance"]:Qr(L)?["div",{},["span",t,M(L)],"<",s(L.value),">"]:$u(L)?["div",{},["span",t,"Reactive"],"<",s(L),`>${Hm(L)?" (readonly)":""}`]:Hm(L)?["div",{},["span",t,"Readonly"],"<",s(L),">"]:null:null},hasBody(L){return L&&L.__isVue},body(L){if(L&&L.__isVue)return["div",{},...g(L.$)]}};function g(L){const F=[];L.type.props&&L.props&&F.push(b("props",ri(L.props))),L.setupState!==Si&&F.push(b("setup",L.setupState)),L.data!==Si&&F.push(b("data",ri(L.data)));const Y=C(L,"computed");Y&&F.push(b("computed",Y));const Te=C(L,"inject");return Te&&F.push(b("injected",Te)),F.push(["div",{},["span",{style:h.style+";opacity:0.66"},"$ (internal): "],["object",{object:L}]]),F}function b(L,F){return F=_r({},F),Object.keys(F).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},L],["div",{style:"padding-left:1.25em"},...Object.keys(F).map(Y=>["div",{},["span",h,Y+": "],s(F[Y],!1)])]]:["span",{}]}function s(L,F=!0){return typeof L=="number"?["span",n,L]:typeof L=="string"?["span",a,JSON.stringify(L)]:typeof L=="boolean"?["span",h,L]:$i(L)?["object",{object:F?ri(L):L}]:["span",a,String(L)]}function C(L,F){const Y=L.type;if(qn(Y))return;const Te={};for(const ue in L.ctx)D(Y,ue,F)&&(Te[ue]=L.ctx[ue]);return Te}function D(L,F,Y){const Te=L[Y];if(Dn(Te)&&Te.includes(F)||$i(Te)&&F in Te||L.extends&&D(L.extends,F,Y)||L.mixins&&L.mixins.some(ue=>D(ue,F,Y)))return!0}function M(L){return L._shallow?"ShallowRef":L.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(m):window.devtoolsFormatters=[m]}const NE="3.2.21",TO="http://www.w3.org/2000/svg",Af=typeof document!="undefined"?document:null,FE=new Map,AO={insert:(t,n,a)=>{n.insertBefore(t,a||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,a,h)=>{const m=n?Af.createElementNS(TO,t):Af.createElement(t,a?{is:a}:void 0);return t==="select"&&h&&h.multiple!=null&&m.setAttribute("multiple",h.multiple),m},createText:t=>Af.createTextNode(t),createComment:t=>Af.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Af.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},cloneNode(t){const n=t.cloneNode(!0);return"_value"in t&&(n._value=t._value),n},insertStaticContent(t,n,a,h){const m=a?a.previousSibling:n.lastChild;let g=FE.get(t);if(!g){const b=Af.createElement("template");if(b.innerHTML=h?`<svg>${t}</svg>`:t,g=b.content,h){const s=g.firstChild;for(;s.firstChild;)g.appendChild(s.firstChild);g.removeChild(s)}FE.set(t,g)}return n.insertBefore(g.cloneNode(!0),a),[m?m.nextSibling:n.firstChild,a?a.previousSibling:n.lastChild]}};function SO(t,n,a){const h=t._vtc;h&&(n=(n?[n,...h]:[...h]).join(" ")),n==null?t.removeAttribute("class"):a?t.setAttribute("class",n):t.className=n}function CO(t,n,a){const h=t.style,m=gr(a);if(a&&!m){for(const g in a)vv(h,g,a[g]);if(n&&!gr(n))for(const g in n)a[g]==null&&vv(h,g,"")}else{const g=h.display;m?n!==a&&(h.cssText=a):n&&t.removeAttribute("style"),"_vod"in t&&(h.display=g)}}const BE=/\s*!important$/;function vv(t,n,a){if(Dn(a))a.forEach(h=>vv(t,n,h));else if(n.startsWith("--"))t.setProperty(n,a);else{const h=IO(t,n);BE.test(a)?t.setProperty(Ac(h),a.replace(BE,""),"important"):t[h]=a}}const $E=["Webkit","Moz","ms"],xv={};function IO(t,n){const a=xv[n];if(a)return a;let h=Ra(n);if(h!=="filter"&&h in t)return xv[n]=h;h=Du(h);for(let m=0;m<$E.length;m++){const g=$E[m]+h;if(g in t)return xv[n]=g}return n}const UE="http://www.w3.org/1999/xlink";function MO(t,n,a,h,m){if(h&&n.startsWith("xlink:"))a==null?t.removeAttributeNS(UE,n.slice(6,n.length)):t.setAttributeNS(UE,n,a);else{const g=Xk(n);a==null||g&&!Yb(a)?t.removeAttribute(n):t.setAttribute(n,g?"":a)}}function kO(t,n,a,h,m,g,b){if(n==="innerHTML"||n==="textContent"){h&&b(h,m,g),t[n]=a==null?"":a;return}if(n==="value"&&t.tagName!=="PROGRESS"){t._value=a;const s=a==null?"":a;t.value!==s&&(t.value=s),a==null&&t.removeAttribute(n);return}if(a===""||a==null){const s=typeof t[n];if(s==="boolean"){t[n]=Yb(a);return}else if(a==null&&s==="string"){t[n]="",t.removeAttribute(n);return}else if(s==="number"){try{t[n]=0}catch{}t.removeAttribute(n);return}}try{t[n]=a}catch(s){qt(`Failed setting prop "${n}" on <${t.tagName.toLowerCase()}>: value ${a} is invalid.`,s)}}let c_=Date.now,VE=!1;if(typeof window!="undefined"){c_()>document.createEvent("Event").timeStamp&&(c_=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);VE=!!(t&&Number(t[1])<=53)}let bv=0;const LO=Promise.resolve(),PO=()=>{bv=0},OO=()=>bv||(LO.then(PO),bv=c_());function eh(t,n,a,h){t.addEventListener(n,a,h)}function DO(t,n,a,h){t.removeEventListener(n,a,h)}function RO(t,n,a,h,m=null){const g=t._vei||(t._vei={}),b=g[n];if(h&&b)b.value=h;else{const[s,C]=zO(n);if(h){const D=g[n]=NO(h,m);eh(t,s,D,C)}else b&&(DO(t,s,b,C),g[n]=void 0)}}const jE=/(?:Once|Passive|Capture)$/;function zO(t){let n;if(jE.test(t)){n={};let a;for(;a=t.match(jE);)t=t.slice(0,t.length-a[0].length),n[a[0].toLowerCase()]=!0}return[Ac(t.slice(2)),n]}function NO(t,n){const a=h=>{const m=h.timeStamp||c_();(VE||m>=a.attached-1)&&Ds(FO(h,a.value),n,5,[h])};return a.value=t,a.attached=OO(),a}function FO(t,n){if(Dn(n)){const a=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{a.call(t),t._stopped=!0},n.map(h=>m=>!m._stopped&&h(m))}else return n}const HE=/^on[a-z]/,BO=(t,n,a,h,m=!1,g,b,s,C)=>{n==="class"?SO(t,h,m):n==="style"?CO(t,a,h):jd(n)?Cm(n)||RO(t,n,a,h,b):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):$O(t,n,h,m))?kO(t,n,h,g,b,s,C):(n==="true-value"?t._trueValue=h:n==="false-value"&&(t._falseValue=h),MO(t,n,h,m))};function $O(t,n,a,h){return h?!!(n==="innerHTML"||n==="textContent"||n in t&&HE.test(n)&&qn(a)):n==="spellcheck"||n==="draggable"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||HE.test(n)&&gr(a)?!1:n in t}const Dc="transition",op="animation",GE=(t,{slots:n})=>Qu($w,UO(t),n);GE.displayName="Transition";const WE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};GE.props=_r({},$w.props,WE);const th=(t,n=[])=>{Dn(t)?t.forEach(a=>a(...n)):t&&t(...n)},qE=t=>t?Dn(t)?t.some(n=>n.length>1):t.length>1:!1;function UO(t){const n={};for(const Be in t)Be in WE||(n[Be]=t[Be]);if(t.css===!1)return n;const{name:a="v",type:h,duration:m,enterFromClass:g=`${a}-enter-from`,enterActiveClass:b=`${a}-enter-active`,enterToClass:s=`${a}-enter-to`,appearFromClass:C=g,appearActiveClass:D=b,appearToClass:M=s,leaveFromClass:L=`${a}-leave-from`,leaveActiveClass:F=`${a}-leave-active`,leaveToClass:Y=`${a}-leave-to`}=t,Te=VO(m),ue=Te&&Te[0],K=Te&&Te[1],{onBeforeEnter:G,onEnter:Q,onEnterCancelled:_e,onLeave:Ce,onLeaveCancelled:Ae,onBeforeAppear:Le=G,onAppear:$e=Q,onAppearCancelled:pt=_e}=n,Xe=(Be,Pe,xe)=>{Sf(Be,Pe?M:s),Sf(Be,Pe?D:b),xe&&xe()},ve=(Be,Pe)=>{Sf(Be,Y),Sf(Be,F),Pe&&Pe()},Ye=Be=>(Pe,xe)=>{const je=Be?$e:Q,lt=()=>Xe(Pe,Be,xe);th(je,[Pe,lt]),ZE(()=>{Sf(Pe,Be?C:g),Rc(Pe,Be?M:s),qE(je)||XE(Pe,h,ue,lt)})};return _r(n,{onBeforeEnter(Be){th(G,[Be]),Rc(Be,g),Rc(Be,b)},onBeforeAppear(Be){th(Le,[Be]),Rc(Be,C),Rc(Be,D)},onEnter:Ye(!1),onAppear:Ye(!0),onLeave(Be,Pe){const xe=()=>ve(Be,Pe);Rc(Be,L),WO(),Rc(Be,F),ZE(()=>{Sf(Be,L),Rc(Be,Y),qE(Ce)||XE(Be,h,K,xe)}),th(Ce,[Be,xe])},onEnterCancelled(Be){Xe(Be,!1),th(_e,[Be])},onAppearCancelled(Be){Xe(Be,!0),th(pt,[Be])},onLeaveCancelled(Be){ve(Be),th(Ae,[Be])}})}function VO(t){if(t==null)return null;if($i(t))return[wv(t.enter),wv(t.leave)];{const n=wv(t);return[n,n]}}function wv(t){const n=Om(t);return jO(n),n}function jO(t){typeof t!="number"?qt(`<transition> explicit duration is not a valid number - got ${JSON.stringify(t)}.`):isNaN(t)&&qt("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function Rc(t,n){n.split(/\s+/).forEach(a=>a&&t.classList.add(a)),(t._vtc||(t._vtc=new Set)).add(n)}function Sf(t,n){n.split(/\s+/).forEach(h=>h&&t.classList.remove(h));const{_vtc:a}=t;a&&(a.delete(n),a.size||(t._vtc=void 0))}function ZE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let HO=0;function XE(t,n,a,h){const m=t._endId=++HO,g=()=>{m===t._endId&&h()};if(a)return setTimeout(g,a);const{type:b,timeout:s,propCount:C}=GO(t,n);if(!b)return h();const D=b+"end";let M=0;const L=()=>{t.removeEventListener(D,F),g()},F=Y=>{Y.target===t&&++M>=C&&L()};setTimeout(()=>{M<C&&L()},s+1),t.addEventListener(D,F)}function GO(t,n){const a=window.getComputedStyle(t),h=Te=>(a[Te]||"").split(", "),m=h(Dc+"Delay"),g=h(Dc+"Duration"),b=YE(m,g),s=h(op+"Delay"),C=h(op+"Duration"),D=YE(s,C);let M=null,L=0,F=0;n===Dc?b>0&&(M=Dc,L=b,F=g.length):n===op?D>0&&(M=op,L=D,F=C.length):(L=Math.max(b,D),M=L>0?b>D?Dc:op:null,F=M?M===Dc?g.length:C.length:0);const Y=M===Dc&&/\b(transform|all)(,|$)/.test(a[Dc+"Property"]);return{type:M,timeout:L,propCount:F,hasTransform:Y}}function YE(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((a,h)=>KE(a)+KE(t[h])))}function KE(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function WO(){return document.body.offsetHeight}const u_=t=>{const n=t.props["onUpdate:modelValue"];return Dn(n)?a=>pf(n,a):n};function qO(t){t.target.composing=!0}function JE(t){const n=t.target;n.composing&&(n.composing=!1,ZO(n,"input"))}function ZO(t,n){const a=document.createEvent("HTMLEvents");a.initEvent(n,!0,!0),t.dispatchEvent(a)}const N8={created(t,{modifiers:{lazy:n,trim:a,number:h}},m){t._assign=u_(m);const g=h||m.props&&m.props.type==="number";eh(t,n?"change":"input",b=>{if(b.target.composing)return;let s=t.value;a?s=s.trim():g&&(s=Om(s)),t._assign(s)}),a&&eh(t,"change",()=>{t.value=t.value.trim()}),n||(eh(t,"compositionstart",qO),eh(t,"compositionend",JE),eh(t,"change",JE))},mounted(t,{value:n}){t.value=n==null?"":n},beforeUpdate(t,{value:n,modifiers:{lazy:a,trim:h,number:m}},g){if(t._assign=u_(g),t.composing||document.activeElement===t&&(a||h&&t.value.trim()===n||(m||t.type==="number")&&Om(t.value)===n))return;const b=n==null?"":n;t.value!==b&&(t.value=b)}},F8={deep:!0,created(t,n,a){t._assign=u_(a),eh(t,"change",()=>{const h=t._modelValue,m=XO(t),g=t.checked,b=t._assign;if(Dn(h)){const s=Kb(h,m),C=s!==-1;if(g&&!C)b(h.concat(m));else if(!g&&C){const D=[...h];D.splice(s,1),b(D)}}else if(Im(h)){const s=new Set(h);g?s.add(m):s.delete(m),b(s)}else b(eT(t,g))})},mounted:QE,beforeUpdate(t,n,a){t._assign=u_(a),QE(t,n,a)}};function QE(t,{value:n,oldValue:a},h){t._modelValue=n,Dn(n)?t.checked=Kb(n,h.props.value)>-1:Im(n)?t.checked=n.has(h.props.value):n!==a&&(t.checked=Sm(n,eT(t,!0)))}function XO(t){return"_value"in t?t._value:t.value}function eT(t,n){const a=n?"_trueValue":"_falseValue";return a in t?t[a]:n}const YO=["ctrl","shift","alt","meta"],KO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>YO.some(a=>t[`${a}Key`]&&!n.includes(a))},B8=(t,n)=>(a,...h)=>{for(let m=0;m<n.length;m++){const g=KO[n[m]];if(g&&g(a,n))return}return t(a,...h)},$8={beforeMount(t,{value:n},{transition:a}){t._vod=t.style.display==="none"?"":t.style.display,a&&n?a.beforeEnter(t):sp(t,n)},mounted(t,{value:n},{transition:a}){a&&n&&a.enter(t)},updated(t,{value:n,oldValue:a},{transition:h}){!n!=!a&&(h?n?(h.beforeEnter(t),sp(t,!0),h.enter(t)):h.leave(t,()=>{sp(t,!1)}):sp(t,n))},beforeUnmount(t,{value:n}){sp(t,n)}};function sp(t,n){t.style.display=n?t._vod:"none"}const JO=_r({patchProp:BO},AO);let tT;function QO(){return tT||(tT=BP(JO))}const U8=(...t)=>{const n=QO().createApp(...t);eD(n),tD(n);const{mount:a}=n;return n.mount=h=>{const m=nD(h);if(!m)return;const g=n._component;!qn(g)&&!g.render&&!g.template&&(g.template=m.innerHTML),m.innerHTML="";const b=a(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),b},n};function eD(t){Object.defineProperty(t.config,"isNativeTag",{value:n=>tL(n)||nL(n),writable:!1})}function tD(t){{const n=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return n},set(){qt("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const a=t.config.compilerOptions,h='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return qt(h),a},set(){qt(h)}})}}function nD(t){if(gr(t)){const n=document.querySelector(t);return n||qt(`Failed to mount app: mount target selector "${t}" returned null.`),n}return window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&qt('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function iD(){EO()}iD();function rD(){return nT().__VUE_DEVTOOLS_GLOBAL_HOOK__}function nT(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const oD=typeof Proxy=="function",sD="devtools-plugin:setup",aD="plugin:settings:set";class lD{constructor(n,a){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=a;const h={};if(n.settings)for(const b in n.settings){const s=n.settings[b];h[b]=s.defaultValue}const m=`__vue-devtools-plugin-settings__${n.id}`;let g=en({},h);try{const b=localStorage.getItem(m),s=JSON.parse(b);Object.assign(g,s)}catch{}this.fallbacks={getSettings(){return g},setSettings(b){try{localStorage.setItem(m,JSON.stringify(b))}catch{}g=b}},a.on(aD,(b,s)=>{b===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(b,s)=>this.target?this.target.on[s]:(...C)=>{this.onQueue.push({method:s,args:C})}}),this.proxiedTarget=new Proxy({},{get:(b,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...C)=>(this.targetQueue.push({method:s,args:C,resolve:()=>{}}),this.fallbacks[s](...C)):(...C)=>new Promise(D=>{this.targetQueue.push({method:s,args:C,resolve:D})})})}async setRealTarget(n){this.target=n;for(const a of this.onQueue)this.target.on[a.method](...a.args);for(const a of this.targetQueue)a.resolve(await this.target[a.method](...a.args))}}function Ev(t,n){const a=nT(),h=rD(),m=oD&&t.enableEarlyProxy;if(h&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!m))h.emit(sD,t,n);else{const g=m?new lD(t,h):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:n,proxy:g}),g&&n(g.proxiedTarget)}}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const iT=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Cf=t=>iT?Symbol("[vue-router]: "+t):"[vue-router]: "+t,rT=Cf("router view location matched"),oT=Cf("router view depth"),h_=Cf("router"),Tv=Cf("route location"),Av=Cf("router view location"),Sl=typeof window!="undefined";function cD(t){return t.__esModule||iT&&t[Symbol.toStringTag]==="Module"}const zi=Object.assign;function Sv(t,n){const a={};for(const h in n){const m=n[h];a[h]=Array.isArray(m)?m.map(t):t(m)}return a}const ap=()=>{};function wi(t){const n=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+t].concat(n))}const uD=/\/$/,hD=t=>t.replace(uD,"");function Cv(t,n,a="/"){let h,m={},g="",b="";const s=n.indexOf("?"),C=n.indexOf("#",s>-1?s:0);return s>-1&&(h=n.slice(0,s),g=n.slice(s+1,C>-1?C:n.length),m=t(g)),C>-1&&(h=h||n.slice(0,C),b=n.slice(C,n.length)),h=pD(h!=null?h:n,a),{fullPath:h+(g&&"?")+g+b,path:h,query:m,hash:b}}function fD(t,n){const a=n.query?t(n.query):"";return n.path+(a&&"?")+a+(n.hash||"")}function sT(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function aT(t,n,a){const h=n.matched.length-1,m=a.matched.length-1;return h>-1&&h===m&&zc(n.matched[h],a.matched[m])&&lT(n.params,a.params)&&t(n.query)===t(a.query)&&n.hash===a.hash}function zc(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function lT(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(!dD(t[a],n[a]))return!1;return!0}function dD(t,n){return Array.isArray(t)?cT(t,n):Array.isArray(n)?cT(n,t):t===n}function cT(t,n){return Array.isArray(n)?t.length===n.length&&t.every((a,h)=>a===n[h]):t.length===1&&t[0]===n}function pD(t,n){if(t.startsWith("/"))return t;if(!n.startsWith("/"))return wi(`Cannot resolve a relative location without an absolute path. Trying to resolve "${t}" from "${n}". It should look like "/${n}".`),t;if(!t)return n;const a=n.split("/"),h=t.split("/");let m=a.length-1,g,b;for(g=0;g<h.length;g++)if(b=h[g],!(m===1||b==="."))if(b==="..")m--;else break;return a.slice(0,m).join("/")+"/"+h.slice(g-(g===h.length?1:0)).join("/")}var lp;(function(t){t.pop="pop",t.push="push"})(lp||(lp={}));var cp;(function(t){t.back="back",t.forward="forward",t.unknown=""})(cp||(cp={}));function mD(t){if(!t)if(Sl){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hD(t)}const _D=/^[^#]+#/;function gD(t,n){return t.replace(_D,"#")+n}function yD(t,n){const a=document.documentElement.getBoundingClientRect(),h=t.getBoundingClientRect();return{behavior:n.behavior,left:h.left-a.left-(n.left||0),top:h.top-a.top-(n.top||0)}}const f_=()=>({left:window.pageXOffset,top:window.pageYOffset});function vD(t){let n;if("el"in t){const a=t.el,h=typeof a=="string"&&a.startsWith("#");if(typeof t.el=="string"&&(!h||!document.getElementById(t.el.slice(1))))try{const g=document.querySelector(t.el);if(h&&g){wi(`The selector "${t.el}" should be passed as "el: document.querySelector('${t.el}')" because it starts with "#".`);return}}catch{wi(`The selector "${t.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const m=typeof a=="string"?h?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!m){wi(`Couldn't find element using selector "${t.el}" returned by scrollBehavior.`);return}n=yD(m,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function uT(t,n){return(history.state?history.state.position-n:-1)+t}const Iv=new Map;function xD(t,n){Iv.set(t,n)}function bD(t){const n=Iv.get(t);return Iv.delete(t),n}let wD=()=>location.protocol+"//"+location.host;function hT(t,n){const{pathname:a,search:h,hash:m}=n,g=t.indexOf("#");if(g>-1){let s=m.includes(t.slice(g))?t.slice(g).length:1,C=m.slice(s);return C[0]!=="/"&&(C="/"+C),sT(C,"")}return sT(a,t)+h+m}function ED(t,n,a,h){let m=[],g=[],b=null;const s=({state:F})=>{const Y=hT(t,location),Te=a.value,ue=n.value;let K=0;if(F){if(a.value=Y,n.value=F,b&&b===Te){b=null;return}K=ue?F.position-ue.position:0}else h(Y);m.forEach(G=>{G(a.value,Te,{delta:K,type:lp.pop,direction:K?K>0?cp.forward:cp.back:cp.unknown})})};function C(){b=a.value}function D(F){m.push(F);const Y=()=>{const Te=m.indexOf(F);Te>-1&&m.splice(Te,1)};return g.push(Y),Y}function M(){const{history:F}=window;!F.state||F.replaceState(zi({},F.state,{scroll:f_()}),"")}function L(){for(const F of g)F();g=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",M),{pauseListeners:C,listen:D,destroy:L}}function fT(t,n,a,h=!1,m=!1){return{back:t,current:n,forward:a,replaced:h,position:window.history.length,scroll:m?f_():null}}function TD(t){const{history:n,location:a}=window,h={value:hT(t,a)},m={value:n.state};m.value||g(h.value,{back:null,current:h.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function g(C,D,M){const L=t.indexOf("#"),F=L>-1?(a.host&&document.querySelector("base")?t:t.slice(L))+C:wD()+t+C;try{n[M?"replaceState":"pushState"](D,"",F),m.value=D}catch(Y){wi("Error with push/replace State",Y),a[M?"replace":"assign"](F)}}function b(C,D){const M=zi({},n.state,fT(m.value.back,C,m.value.forward,!0),D,{position:m.value.position});g(C,M,!0),h.value=C}function s(C,D){const M=zi({},m.value,n.state,{forward:C,scroll:f_()});n.state||wi(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`),g(M.current,M,!0);const L=zi({},fT(h.value,C,null),{position:M.position+1},D);g(C,L,!1),h.value=C}return{location:h,state:m,push:s,replace:b}}function V8(t){t=mD(t);const n=TD(t),a=ED(t,n.state,n.location,n.replace);function h(g,b=!0){b||a.pauseListeners(),history.go(g)}const m=zi({location:"",base:t,go:h,createHref:gD.bind(null,t)},n,a);return Object.defineProperty(m,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(m,"state",{enumerable:!0,get:()=>n.state.value}),m}function AD(t){return typeof t=="string"||t&&typeof t=="object"}function dT(t){return typeof t=="string"||typeof t=="symbol"}const Nc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pT=Cf("navigation failure");var mT;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(mT||(mT={}));const SD={[1]({location:t,currentLocation:n}){return`No match for
 ${JSON.stringify(t)}${n?`
while being at
`+JSON.stringify(n):""}`},[2]({from:t,to:n}){return`Redirected from "${t.fullPath}" to "${ID(n)}" via a navigation guard.`},[4]({from:t,to:n}){return`Navigation aborted from "${t.fullPath}" to "${n.fullPath}" via a navigation guard.`},[8]({from:t,to:n}){return`Navigation cancelled from "${t.fullPath}" to "${n.fullPath}" with a new navigation.`},[16]({from:t,to:n}){return`Avoided redundant navigation to current location: "${t.fullPath}".`}};function If(t,n){return zi(new Error(SD[t](n)),{type:t,[pT]:!0},n)}function nh(t,n){return t instanceof Error&&pT in t&&(n==null||!!(t.type&n))}const CD=["params","query","hash"];function ID(t){if(typeof t=="string")return t;if("path"in t)return t.path;const n={};for(const a of CD)a in t&&(n[a]=t[a]);return JSON.stringify(n,null,2)}const _T="[^/]+?",MD={sensitive:!1,strict:!1,start:!0,end:!0},kD=/[.+*?^${}()[\]/\\]/g;function LD(t,n){const a=zi({},MD,n),h=[];let m=a.start?"^":"";const g=[];for(const D of t){const M=D.length?[]:[90];a.strict&&!D.length&&(m+="/");for(let L=0;L<D.length;L++){const F=D[L];let Y=40+(a.sensitive?.25:0);if(F.type===0)L||(m+="/"),m+=F.value.replace(kD,"\\$&"),Y+=40;else if(F.type===1){const{value:Te,repeatable:ue,optional:K,regexp:G}=F;g.push({name:Te,repeatable:ue,optional:K});const Q=G||_T;if(Q!==_T){Y+=10;try{new RegExp(`(${Q})`)}catch(Ce){throw new Error(`Invalid custom RegExp for param "${Te}" (${Q}): `+Ce.message)}}let _e=ue?`((?:${Q})(?:/(?:${Q}))*)`:`(${Q})`;L||(_e=K&&D.length<2?`(?:/${_e})`:"/"+_e),K&&(_e+="?"),m+=_e,Y+=20,K&&(Y+=-8),ue&&(Y+=-20),Q===".*"&&(Y+=-50)}M.push(Y)}h.push(M)}if(a.strict&&a.end){const D=h.length-1;h[D][h[D].length-1]+=.7000000000000001}a.strict||(m+="/?"),a.end?m+="$":a.strict&&(m+="(?:/|$)");const b=new RegExp(m,a.sensitive?"":"i");function s(D){const M=D.match(b),L={};if(!M)return null;for(let F=1;F<M.length;F++){const Y=M[F]||"",Te=g[F-1];L[Te.name]=Y&&Te.repeatable?Y.split("/"):Y}return L}function C(D){let M="",L=!1;for(const F of t){(!L||!M.endsWith("/"))&&(M+="/"),L=!1;for(const Y of F)if(Y.type===0)M+=Y.value;else if(Y.type===1){const{value:Te,repeatable:ue,optional:K}=Y,G=Te in D?D[Te]:"";if(Array.isArray(G)&&!ue)throw new Error(`Provided param "${Te}" is an array but it is not repeatable (* or + modifiers)`);const Q=Array.isArray(G)?G.join("/"):G;if(!Q)if(K)F.length<2&&(M.endsWith("/")?M=M.slice(0,-1):L=!0);else throw new Error(`Missing required param "${Te}"`);M+=Q}}return M}return{re:b,score:h,keys:g,parse:s,stringify:C}}function PD(t,n){let a=0;for(;a<t.length&&a<n.length;){const h=n[a]-t[a];if(h)return h;a++}return t.length<n.length?t.length===1&&t[0]===40+40?-1:1:t.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function OD(t,n){let a=0;const h=t.score,m=n.score;for(;a<h.length&&a<m.length;){const g=PD(h[a],m[a]);if(g)return g;a++}return m.length-h.length}const DD={type:0,value:""},RD=/[a-zA-Z0-9_]/;function zD(t){if(!t)return[[]];if(t==="/")return[[DD]];if(!t.startsWith("/"))throw new Error(`Route paths should start with a "/": "${t}" should be "/${t}".`);function n(Y){throw new Error(`ERR (${a})/"${D}": ${Y}`)}let a=0,h=a;const m=[];let g;function b(){g&&m.push(g),g=[]}let s=0,C,D="",M="";function L(){!D||(a===0?g.push({type:0,value:D}):a===1||a===2||a===3?(g.length>1&&(C==="*"||C==="+")&&n(`A repeatable param (${D}) must be alone in its segment. eg: '/:ids+.`),g.push({type:1,value:D,regexp:M,repeatable:C==="*"||C==="+",optional:C==="*"||C==="?"})):n("Invalid state to consume buffer"),D="")}function F(){D+=C}for(;s<t.length;){if(C=t[s++],C==="\\"&&a!==2){h=a,a=4;continue}switch(a){case 0:C==="/"?(D&&L(),b()):C===":"?(L(),a=1):F();break;case 4:F(),a=h;break;case 1:C==="("?a=2:RD.test(C)?F():(L(),a=0,C!=="*"&&C!=="?"&&C!=="+"&&s--);break;case 2:C===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+C:a=3:M+=C;break;case 3:L(),a=0,C!=="*"&&C!=="?"&&C!=="+"&&s--,M="";break;default:n("Unknown state");break}}return a===2&&n(`Unfinished custom RegExp for param "${D}"`),L(),b(),m}function ND(t,n,a){const h=LD(zD(t.path),a);{const g=new Set;for(const b of h.keys)g.has(b.name)&&wi(`Found duplicated params with name "${b.name}" for path "${t.path}". Only the last one will be available on "$route.params".`),g.add(b.name)}const m=zi(h,{record:t,parent:n,children:[],alias:[]});return n&&!m.record.aliasOf==!n.record.aliasOf&&n.children.push(m),m}function FD(t,n){const a=[],h=new Map;n=yT({strict:!1,end:!0,sensitive:!1},n);function m(M){return h.get(M)}function g(M,L,F){const Y=!F,Te=$D(M);Te.aliasOf=F&&F.record;const ue=yT(n,M),K=[Te];if("alias"in M){const _e=typeof M.alias=="string"?[M.alias]:M.alias;for(const Ce of _e)K.push(zi({},Te,{components:F?F.record.components:Te.components,path:Ce,aliasOf:F?F.record:Te}))}let G,Q;for(const _e of K){const{path:Ce}=_e;if(L&&Ce[0]!=="/"){const Ae=L.record.path,Le=Ae[Ae.length-1]==="/"?"":"/";_e.path=L.record.path+(Ce&&Le+Ce)}if(_e.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.`);if(G=ND(_e,L,ue),L&&Ce[0]==="/"&&HD(G,L),F?(F.alias.push(G),jD(F,G)):(Q=Q||G,Q!==G&&Q.alias.push(G),Y&&M.name&&!gT(G)&&b(M.name)),"children"in Te){const Ae=Te.children;for(let Le=0;Le<Ae.length;Le++)g(Ae[Le],G,F&&F.children[Le])}F=F||G,C(G)}return Q?()=>{b(Q)}:ap}function b(M){if(dT(M)){const L=h.get(M);L&&(h.delete(M),a.splice(a.indexOf(L),1),L.children.forEach(b),L.alias.forEach(b))}else{const L=a.indexOf(M);L>-1&&(a.splice(L,1),M.record.name&&h.delete(M.record.name),M.children.forEach(b),M.alias.forEach(b))}}function s(){return a}function C(M){let L=0;for(;L<a.length&&OD(M,a[L])>=0;)L++;a.splice(L,0,M),M.record.name&&!gT(M)&&h.set(M.record.name,M)}function D(M,L){let F,Y={},Te,ue;if("name"in M&&M.name){if(F=h.get(M.name),!F)throw If(1,{location:M});ue=F.record.name,Y=zi(BD(L.params,F.keys.filter(Q=>!Q.optional).map(Q=>Q.name)),M.params),Te=F.stringify(Y)}else if("path"in M)Te=M.path,Te.startsWith("/")||wi(`The Matcher cannot resolve relative paths but received "${Te}". Unless you directly called \`matcher.resolve("${Te}")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-router-next.`),F=a.find(Q=>Q.re.test(Te)),F&&(Y=F.parse(Te),ue=F.record.name);else{if(F=L.name?h.get(L.name):a.find(Q=>Q.re.test(L.path)),!F)throw If(1,{location:M,currentLocation:L});ue=F.record.name,Y=zi({},L.params,M.params),Te=F.stringify(Y)}const K=[];let G=F;for(;G;)K.unshift(G.record),G=G.parent;return{name:ue,path:Te,params:Y,matched:K,meta:VD(K)}}return t.forEach(M=>g(M)),{addRoute:g,resolve:D,removeRoute:b,getRoutes:s,getRecordMatcher:m}}function BD(t,n){const a={};for(const h of n)h in t&&(a[h]=t[h]);return a}function $D(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:UD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function UD(t){const n={},a=t.props||!1;if("component"in t)n.default=a;else for(const h in t.components)n[h]=typeof a=="boolean"?a:a[h];return n}function gT(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function VD(t){return t.reduce((n,a)=>zi(n,a.meta),{})}function yT(t,n){const a={};for(const h in t)a[h]=h in n?n[h]:t[h];return a}function Mv(t,n){return t.name===n.name&&t.optional===n.optional&&t.repeatable===n.repeatable}function jD(t,n){for(const a of t.keys)if(!a.optional&&!n.keys.find(Mv.bind(null,a)))return wi(`Alias "${n.record.path}" and the original record: "${t.record.path}" should have the exact same param named "${a.name}"`);for(const a of n.keys)if(!a.optional&&!t.keys.find(Mv.bind(null,a)))return wi(`Alias "${n.record.path}" and the original record: "${t.record.path}" should have the exact same param named "${a.name}"`)}function HD(t,n){for(const a of n.keys)if(!t.keys.find(Mv.bind(null,a)))return wi(`Absolute path "${t.record.path}" should have the exact same param named "${a.name}" as its parent "${n.record.path}".`)}const vT=/#/g,GD=/&/g,WD=/\//g,qD=/=/g,ZD=/\?/g,xT=/\+/g,XD=/%5B/g,YD=/%5D/g,bT=/%5E/g,KD=/%60/g,wT=/%7B/g,JD=/%7C/g,ET=/%7D/g,QD=/%20/g;function kv(t){return encodeURI(""+t).replace(JD,"|").replace(XD,"[").replace(YD,"]")}function e3(t){return kv(t).replace(wT,"{").replace(ET,"}").replace(bT,"^")}function Lv(t){return kv(t).replace(xT,"%2B").replace(QD,"+").replace(vT,"%23").replace(GD,"%26").replace(KD,"`").replace(wT,"{").replace(ET,"}").replace(bT,"^")}function t3(t){return Lv(t).replace(qD,"%3D")}function n3(t){return kv(t).replace(vT,"%23").replace(ZD,"%3F")}function i3(t){return t==null?"":n3(t).replace(WD,"%2F")}function up(t){try{return decodeURIComponent(""+t)}catch{wi(`Error decoding "${t}". Using original value`)}return""+t}function r3(t){const n={};if(t===""||t==="?")return n;const h=(t[0]==="?"?t.slice(1):t).split("&");for(let m=0;m<h.length;++m){const g=h[m].replace(xT," "),b=g.indexOf("="),s=up(b<0?g:g.slice(0,b)),C=b<0?null:up(g.slice(b+1));if(s in n){let D=n[s];Array.isArray(D)||(D=n[s]=[D]),D.push(C)}else n[s]=C}return n}function TT(t){let n="";for(let a in t){const h=t[a];if(a=t3(a),h==null){h!==void 0&&(n+=(n.length?"&":"")+a);continue}(Array.isArray(h)?h.map(g=>g&&Lv(g)):[h&&Lv(h)]).forEach(g=>{g!==void 0&&(n+=(n.length?"&":"")+a,g!=null&&(n+="="+g))})}return n}function o3(t){const n={};for(const a in t){const h=t[a];h!==void 0&&(n[a]=Array.isArray(h)?h.map(m=>m==null?null:""+m):h==null?h:""+h)}return n}function hp(){let t=[];function n(h){return t.push(h),()=>{const m=t.indexOf(h);m>-1&&t.splice(m,1)}}function a(){t=[]}return{add:n,list:()=>t,reset:a}}function s3(t,n,a){const h=()=>{t[n].delete(a)};Ym(h),Gw(h),Hw(()=>{t[n].add(a)}),t[n].add(a)}function j8(t){if(!wl()){wi("getCurrentInstance() returned null. onBeforeRouteLeave() must be called at the top of a setup function");return}const n=hs(rT,{}).value;if(!n){wi("No active route record was found when calling `onBeforeRouteLeave()`. Make sure you call this function inside of a component child of <router-view>. Maybe you called it inside of App.vue?");return}s3(n,"leaveGuards",t)}function Fc(t,n,a,h,m){const g=h&&(h.enterCallbacks[m]=h.enterCallbacks[m]||[]);return()=>new Promise((b,s)=>{const C=L=>{L===!1?s(If(4,{from:a,to:n})):L instanceof Error?s(L):AD(L)?s(If(2,{from:n,to:L})):(g&&h.enterCallbacks[m]===g&&typeof L=="function"&&g.push(L),b())},D=t.call(h&&h.instances[m],n,a,a3(C,n,a));let M=Promise.resolve(D);if(t.length<3&&(M=M.then(C)),t.length>2){const L=`The "next" callback was never called inside of ${t.name?'"'+t.name+'"':""}:
${t.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof D=="object"&&"then"in D)M=M.then(F=>C._called?F:(wi(L),Promise.reject(new Error("Invalid navigation guard"))));else if(D!==void 0&&!C._called){wi(L),s(new Error("Invalid navigation guard"));return}}M.catch(L=>s(L))})}function a3(t,n,a){let h=0;return function(){h++==1&&wi(`The "next" callback was called more than once in one navigation guard when going from "${a.fullPath}" to "${n.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),t._called=!0,h===1&&t.apply(null,arguments)}}function Pv(t,n,a,h){const m=[];for(const g of t)for(const b in g.components){let s=g.components[b];{if(!s||typeof s!="object"&&typeof s!="function")throw wi(`Component "${b}" in record with path "${g.path}" is not a valid component. Received "${String(s)}".`),new Error("Invalid route component");if("then"in s){wi(`Component "${b}" in record with path "${g.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const C=s;s=()=>C}else s.__asyncLoader&&!s.__warnedDefineAsync&&(s.__warnedDefineAsync=!0,wi(`Component "${b}" in record with path "${g.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(n!=="beforeRouteEnter"&&!g.instances[b]))if(l3(s)){const D=(s.__vccOpts||s)[n];D&&m.push(Fc(D,a,h,g,b))}else{let C=s();"catch"in C||(wi(`Component "${b}" in record with path "${g.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),C=Promise.resolve(C)),m.push(()=>C.then(D=>{if(!D)return Promise.reject(new Error(`Couldn't resolve component "${b}" at "${g.path}"`));const M=cD(D)?D.default:D;g.components[b]=M;const F=(M.__vccOpts||M)[n];return F&&Fc(F,a,h,g,b)()}))}}return m}function l3(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function AT(t){const n=hs(h_),a=hs(Tv),h=Wi(()=>n.resolve(Zd(t.to))),m=Wi(()=>{const{matched:C}=h.value,{length:D}=C,M=C[D-1],L=a.matched;if(!M||!L.length)return-1;const F=L.findIndex(zc.bind(null,M));if(F>-1)return F;const Y=ST(C[D-2]);return D>1&&ST(M)===Y&&L[L.length-1].path!==Y?L.findIndex(zc.bind(null,C[D-2])):F}),g=Wi(()=>m.value>-1&&f3(a.params,h.value.params)),b=Wi(()=>m.value>-1&&m.value===a.matched.length-1&&lT(a.params,h.value.params));function s(C={}){return h3(C)?n[Zd(t.replace)?"replace":"push"](Zd(t.to)).catch(ap):Promise.resolve()}if(Sl){const C=wl();if(C){const D={route:h.value,isActive:g.value,isExactActive:b.value};C.__vrl_devtools=C.__vrl_devtools||[],C.__vrl_devtools.push(D),bO(()=>{D.route=h.value,D.isActive=g.value,D.isExactActive=b.value},{flush:"post"})}}return{route:h,href:Wi(()=>h.value.href),isActive:g,isExactActive:b,navigate:s}}const c3=kc({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:AT,setup(t,{slots:n}){const a=Bu(AT(t)),{options:h}=hs(h_),m=Wi(()=>({[CT(t.activeClass,h.linkActiveClass,"router-link-active")]:a.isActive,[CT(t.exactActiveClass,h.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const g=n.default&&n.default(a);return t.custom?g:Qu("a",{"aria-current":a.isExactActive?t.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:m.value},g)}}}),u3=c3;function h3(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function f3(t,n){for(const a in n){const h=n[a],m=t[a];if(typeof h=="string"){if(h!==m)return!1}else if(!Array.isArray(m)||m.length!==h.length||h.some((g,b)=>g!==m[b]))return!1}return!0}function ST(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const CT=(t,n,a)=>t!=null?t:n!=null?n:a,d3=kc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:n,slots:a}){m3();const h=hs(Av),m=Wi(()=>t.route||h.value),g=hs(oT,0),b=Wi(()=>m.value.matched[g]);Zm(oT,g+1),Zm(rT,b),Zm(Av,m);const s=gf();return Na(()=>[s.value,b.value,t.name],([C,D,M],[L,F,Y])=>{D&&(D.instances[M]=C,F&&F!==D&&C&&C===L&&(D.leaveGuards.size||(D.leaveGuards=F.leaveGuards),D.updateGuards.size||(D.updateGuards=F.updateGuards))),C&&D&&(!F||!zc(D,F)||!L)&&(D.enterCallbacks[M]||[]).forEach(Te=>Te(C))},{flush:"post"}),()=>{const C=m.value,D=b.value,M=D&&D.components[t.name],L=t.name;if(!M)return IT(a.default,{Component:M,route:C});const F=D.props[t.name],Y=F?F===!0?C.params:typeof F=="function"?F(C):F:null,ue=Qu(M,zi({},Y,n,{onVnodeUnmounted:K=>{K.component.isUnmounted&&(D.instances[L]=null)},ref:s}));if(Sl&&ue.ref){const K={depth:g,name:D.name,path:D.path,meta:D.meta};(Array.isArray(ue.ref)?ue.ref.map(Q=>Q.i):[ue.ref.i]).forEach(Q=>{Q.__vrv_devtools=K})}return IT(a.default,{Component:ue,route:C})||ue}}});function IT(t,n){if(!t)return null;const a=t(n);return a.length===1?a[0]:a}const p3=d3;function m3(){const t=wl(),n=t.parent&&t.parent.type.name;if(n&&(n==="KeepAlive"||n.includes("Transition"))){const a=n==="KeepAlive"?"keep-alive":"transition";wi(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${a}>
    <component :is="Component" />
  </${a}>
</router-view>`)}}function fp(t,n){const a=zi({},t,{matched:t.matched.map(h=>T3(h,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:t.fullPath,tooltip:n,value:a}}}function d_(t){return{_custom:{display:t}}}let _3=0;function g3(t,n,a){if(n.__hasDevtools)return;n.__hasDevtools=!0;const h=_3++;Ev({id:"org.vuejs.router"+(h?"."+h:""),label:"Vue Router",packageName:"vue-router",homepage:"https://next.router.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",componentStateTypes:["Routing"],app:t},m=>{m.on.inspectComponent((M,L)=>{M.instanceData&&M.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:fp(n.currentRoute.value,"Current Route")})}),m.on.visitComponentTree(({treeNode:M,componentInstance:L})=>{if(L.__vrv_devtools){const F=L.__vrv_devtools;M.tags.push({label:(F.name?`${F.name.toString()}: `:"")+F.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:MT})}Array.isArray(L.__vrl_devtools)&&(L.__devtoolsApi=m,L.__vrl_devtools.forEach(F=>{let Y=PT,Te="";F.isExactActive?(Y=LT,Te="This is exactly active"):F.isActive&&(Y=kT,Te="This link is active"),M.tags.push({label:F.route.path,textColor:0,tooltip:Te,backgroundColor:Y})}))}),Na(n.currentRoute,()=>{C(),m.notifyComponentUpdate(),m.sendInspectorTree(s),m.sendInspectorState(s)});const g="router:navigations:"+h;m.addTimelineLayer({id:g,label:`Router${h?" "+h:""} Navigations`,color:4237508}),n.onError((M,L)=>{m.addTimelineEvent({layerId:g,event:{title:"Error during Navigation",subtitle:L.fullPath,logType:"error",time:Date.now(),data:{error:M},groupId:L.meta.__navigationId}})});let b=0;n.beforeEach((M,L)=>{const F={guard:d_("beforeEach"),from:fp(L,"Current Location during this navigation"),to:fp(M,"Target location")};Object.defineProperty(M.meta,"__navigationId",{value:b++}),m.addTimelineEvent({layerId:g,event:{time:Date.now(),title:"Start of navigation",subtitle:M.fullPath,data:F,groupId:M.meta.__navigationId}})}),n.afterEach((M,L,F)=>{const Y={guard:d_("afterEach")};F?(Y.failure={_custom:{type:Error,readOnly:!0,display:F?F.message:"",tooltip:"Navigation Failure",value:F}},Y.status=d_("\u274C")):Y.status=d_("\u2705"),Y.from=fp(L,"Current Location during this navigation"),Y.to=fp(M,"Target location"),m.addTimelineEvent({layerId:g,event:{title:"End of navigation",subtitle:M.fullPath,time:Date.now(),data:Y,logType:F?"warning":"default",groupId:M.meta.__navigationId}})});const s="router-inspector:"+h;m.addInspector({id:s,label:"Routes"+(h?" "+h:""),icon:"book",treeFilterPlaceholder:"Search routes"});function C(){if(!D)return;const M=D;let L=a.getRoutes().filter(F=>!F.parent);L.forEach(RT),M.filter&&(L=L.filter(F=>Ov(F,M.filter.toLowerCase()))),L.forEach(F=>DT(F,n.currentRoute.value)),M.rootNodes=L.map(OT)}let D;m.on.getInspectorTree(M=>{D=M,M.app===t&&M.inspectorId===s&&C()}),m.on.getInspectorState(M=>{if(M.app===t&&M.inspectorId===s){const F=a.getRoutes().find(Y=>Y.record.__vd_id===M.nodeId);F&&(M.state={options:v3(F)})}}),m.sendInspectorTree(s),m.sendInspectorState(s)})}function y3(t){return t.optional?t.repeatable?"*":"?":t.repeatable?"+":""}function v3(t){const{record:n}=t,a=[{editable:!1,key:"path",value:n.path}];return n.name!=null&&a.push({editable:!1,key:"name",value:n.name}),a.push({editable:!1,key:"regexp",value:t.re}),t.keys.length&&a.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:t.keys.map(h=>`${h.name}${y3(h)}`).join(" "),tooltip:"Param keys",value:t.keys}}}),n.redirect!=null&&a.push({editable:!1,key:"redirect",value:n.redirect}),t.alias.length&&a.push({editable:!1,key:"aliases",value:t.alias.map(h=>h.record.path)}),a.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:t.score.map(h=>h.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:t.score}}}),a}const MT=15485081,kT=2450411,LT=8702998,x3=2282478,PT=16486972,b3=6710886;function OT(t){const n=[],{record:a}=t;a.name!=null&&n.push({label:String(a.name),textColor:0,backgroundColor:x3}),a.aliasOf&&n.push({label:"alias",textColor:0,backgroundColor:PT}),t.__vd_match&&n.push({label:"matches",textColor:0,backgroundColor:MT}),t.__vd_exactActive&&n.push({label:"exact",textColor:0,backgroundColor:LT}),t.__vd_active&&n.push({label:"active",textColor:0,backgroundColor:kT}),a.redirect&&n.push({label:"redirect: "+(typeof a.redirect=="string"?a.redirect:"Object"),textColor:16777215,backgroundColor:b3});let h=a.__vd_id;return h==null&&(h=String(w3++),a.__vd_id=h),{id:h,label:a.path,tags:n,children:t.children.map(OT)}}let w3=0;const E3=/^\/(.*)\/([a-z]*)$/;function DT(t,n){const a=n.matched.length&&zc(n.matched[n.matched.length-1],t.record);t.__vd_exactActive=t.__vd_active=a,a||(t.__vd_active=n.matched.some(h=>zc(h,t.record))),t.children.forEach(h=>DT(h,n))}function RT(t){t.__vd_match=!1,t.children.forEach(RT)}function Ov(t,n){const a=String(t.re).match(E3);if(t.__vd_match=!1,!a||a.length<3)return!1;if(new RegExp(a[1].replace(/\$$/,""),a[2]).test(n))return t.children.forEach(b=>Ov(b,n)),t.record.path!=="/"||n==="/"?(t.__vd_match=t.re.test(n),!0):!1;const m=t.record.path.toLowerCase(),g=up(m);return!n.startsWith("/")&&(g.includes(n)||m.includes(n))||g.startsWith(n)||m.startsWith(n)||t.record.name&&String(t.record.name).includes(n)?!0:t.children.some(b=>Ov(b,n))}function T3(t,n){const a={};for(const h in t)n.includes(h)||(a[h]=t[h]);return a}function H8(t){const n=FD(t.routes,t),a=t.parseQuery||r3,h=t.stringifyQuery||TT,m=t.history;if(!m)throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');const g=hp(),b=hp(),s=hp(),C=BL(Nc);let D=Nc;Sl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=Sv.bind(null,Ue=>""+Ue),L=Sv.bind(null,i3),F=Sv.bind(null,up);function Y(Ue,wt){let kt,Et;return dT(Ue)?(kt=n.getRecordMatcher(Ue),Et=wt):Et=Ue,n.addRoute(Et,kt)}function Te(Ue){const wt=n.getRecordMatcher(Ue);wt?n.removeRoute(wt):wi(`Cannot remove non-existent route "${String(Ue)}"`)}function ue(){return n.getRoutes().map(Ue=>Ue.record)}function K(Ue){return!!n.getRecordMatcher(Ue)}function G(Ue,wt){if(wt=zi({},wt||C.value),typeof Ue=="string"){const oe=Cv(a,Ue,wt.path),ot=n.resolve({path:oe.path},wt),te=m.createHref(oe.fullPath);return te.startsWith("//")?wi(`Location "${Ue}" resolved to "${te}". A resolved location cannot start with multiple slashes.`):ot.matched.length||wi(`No match found for location with path "${Ue}"`),zi(oe,ot,{params:F(ot.params),hash:up(oe.hash),redirectedFrom:void 0,href:te})}let kt;if("path"in Ue)"params"in Ue&&!("name"in Ue)&&Object.keys(Ue.params).length&&wi(`Path "${Ue.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),kt=zi({},Ue,{path:Cv(a,Ue.path,wt.path).path});else{const oe=zi({},Ue.params);for(const ot in oe)oe[ot]==null&&delete oe[ot];kt=zi({},Ue,{params:L(Ue.params)}),wt.params=L(wt.params)}const Et=n.resolve(kt,wt),sn=Ue.hash||"";sn&&!sn.startsWith("#")&&wi(`A \`hash\` should always start with the character "#". Replace "${sn}" with "#${sn}".`),Et.params=M(F(Et.params));const En=fD(h,zi({},Ue,{hash:e3(sn),path:Et.path})),me=m.createHref(En);return me.startsWith("//")?wi(`Location "${Ue}" resolved to "${me}". A resolved location cannot start with multiple slashes.`):Et.matched.length||wi(`No match found for location with path "${"path"in Ue?Ue.path:Ue}"`),zi({fullPath:En,hash:sn,query:h===TT?o3(Ue.query):Ue.query||{}},Et,{redirectedFrom:void 0,href:me})}function Q(Ue){return typeof Ue=="string"?Cv(a,Ue,C.value.path):zi({},Ue)}function _e(Ue,wt){if(D!==Ue)return If(8,{from:wt,to:Ue})}function Ce(Ue){return $e(Ue)}function Ae(Ue){return Ce(zi(Q(Ue),{replace:!0}))}function Le(Ue){const wt=Ue.matched[Ue.matched.length-1];if(wt&&wt.redirect){const{redirect:kt}=wt;let Et=typeof kt=="function"?kt(Ue):kt;if(typeof Et=="string"&&(Et=Et.includes("?")||Et.includes("#")?Et=Q(Et):{path:Et},Et.params={}),!("path"in Et)&&!("name"in Et))throw wi(`Invalid redirect found:
${JSON.stringify(Et,null,2)}
 when navigating to "${Ue.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return zi({query:Ue.query,hash:Ue.hash,params:Ue.params},Et)}}function $e(Ue,wt){const kt=D=G(Ue),Et=C.value,sn=Ue.state,En=Ue.force,me=Ue.replace===!0,oe=Le(kt);if(oe)return $e(zi(Q(oe),{state:sn,force:En,replace:me}),wt||kt);const ot=kt;ot.redirectedFrom=wt;let te;return!En&&aT(h,Et,kt)&&(te=If(16,{to:ot,from:Et}),Ut(Et,Et,!0,!1)),(te?Promise.resolve(te):Xe(ot,Et)).catch(ge=>nh(ge)?ge:Qe(ge,ot,Et)).then(ge=>{if(ge){if(nh(ge,2))return aT(h,G(ge.to),ot)&&wt&&(wt._count=wt._count?wt._count+1:1)>10?(wi(`Detected an infinite redirection in a navigation guard when going from "${Et.fullPath}" to "${ot.fullPath}". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):$e(zi(Q(ge.to),{state:sn,force:En,replace:me}),wt||ot)}else ge=Ye(ot,Et,!0,me,sn);return ve(ot,Et,ge),ge})}function pt(Ue,wt){const kt=_e(Ue,wt);return kt?Promise.reject(kt):Promise.resolve()}function Xe(Ue,wt){let kt;const[Et,sn,En]=A3(Ue,wt);kt=Pv(Et.reverse(),"beforeRouteLeave",Ue,wt);for(const oe of Et)oe.leaveGuards.forEach(ot=>{kt.push(Fc(ot,Ue,wt))});const me=pt.bind(null,Ue,wt);return kt.push(me),Mf(kt).then(()=>{kt=[];for(const oe of g.list())kt.push(Fc(oe,Ue,wt));return kt.push(me),Mf(kt)}).then(()=>{kt=Pv(sn,"beforeRouteUpdate",Ue,wt);for(const oe of sn)oe.updateGuards.forEach(ot=>{kt.push(Fc(ot,Ue,wt))});return kt.push(me),Mf(kt)}).then(()=>{kt=[];for(const oe of Ue.matched)if(oe.beforeEnter&&!wt.matched.includes(oe))if(Array.isArray(oe.beforeEnter))for(const ot of oe.beforeEnter)kt.push(Fc(ot,Ue,wt));else kt.push(Fc(oe.beforeEnter,Ue,wt));return kt.push(me),Mf(kt)}).then(()=>(Ue.matched.forEach(oe=>oe.enterCallbacks={}),kt=Pv(En,"beforeRouteEnter",Ue,wt),kt.push(me),Mf(kt))).then(()=>{kt=[];for(const oe of b.list())kt.push(Fc(oe,Ue,wt));return kt.push(me),Mf(kt)}).catch(oe=>nh(oe,8)?oe:Promise.reject(oe))}function ve(Ue,wt,kt){for(const Et of s.list())Et(Ue,wt,kt)}function Ye(Ue,wt,kt,Et,sn){const En=_e(Ue,wt);if(En)return En;const me=wt===Nc,oe=Sl?history.state:{};kt&&(Et||me?m.replace(Ue.fullPath,zi({scroll:me&&oe&&oe.scroll},sn)):m.push(Ue.fullPath,sn)),C.value=Ue,Ut(Ue,wt,kt,me),ct()}let Be;function Pe(){Be=m.listen((Ue,wt,kt)=>{const Et=G(Ue),sn=Le(Et);if(sn){$e(zi(sn,{replace:!0}),Et).catch(ap);return}D=Et;const En=C.value;Sl&&xD(uT(En.fullPath,kt.delta),f_()),Xe(Et,En).catch(me=>nh(me,4|8)?me:nh(me,2)?($e(me.to,Et).then(oe=>{nh(oe,4|16)&&!kt.delta&&kt.type===lp.pop&&m.go(-1,!1)}).catch(ap),Promise.reject()):(kt.delta&&m.go(-kt.delta,!1),Qe(me,Et,En))).then(me=>{me=me||Ye(Et,En,!1),me&&(kt.delta?m.go(-kt.delta,!1):kt.type===lp.pop&&nh(me,4|16)&&m.go(-1,!1)),ve(Et,En,me)}).catch(ap)})}let xe=hp(),je=hp(),lt;function Qe(Ue,wt,kt){ct(Ue);const Et=je.list();return Et.length?Et.forEach(sn=>sn(Ue,wt,kt)):(wi("uncaught error during route navigation:"),console.error(Ue)),Promise.reject(Ue)}function ht(){return lt&&C.value!==Nc?Promise.resolve():new Promise((Ue,wt)=>{xe.add([Ue,wt])})}function ct(Ue){lt||(lt=!0,Pe(),xe.list().forEach(([wt,kt])=>Ue?kt(Ue):wt()),xe.reset())}function Ut(Ue,wt,kt,Et){const{scrollBehavior:sn}=t;if(!Sl||!sn)return Promise.resolve();const En=!kt&&bD(uT(Ue.fullPath,0))||(Et||!kt)&&history.state&&history.state.scroll||null;return pv().then(()=>sn(Ue,wt,En)).then(me=>me&&vD(me)).catch(me=>Qe(me,Ue,wt))}const Ke=Ue=>m.go(Ue);let hn;const Ht=new Set;return{currentRoute:C,addRoute:Y,removeRoute:Te,hasRoute:K,getRoutes:ue,resolve:G,options:t,push:Ce,replace:Ae,go:Ke,back:()=>Ke(-1),forward:()=>Ke(1),beforeEach:g.add,beforeResolve:b.add,afterEach:s.add,onError:je.add,isReady:ht,install(Ue){const wt=this;Ue.component("RouterLink",u3),Ue.component("RouterView",p3),Ue.config.globalProperties.$router=wt,Object.defineProperty(Ue.config.globalProperties,"$route",{enumerable:!0,get:()=>Zd(C)}),Sl&&!hn&&C.value===Nc&&(hn=!0,Ce(m.location).catch(sn=>{wi("Unexpected error when starting the router:",sn)}));const kt={};for(const sn in Nc)kt[sn]=Wi(()=>C.value[sn]);Ue.provide(h_,wt),Ue.provide(Tv,Bu(kt)),Ue.provide(Av,C);const Et=Ue.unmount;Ht.add(Ue),Ue.unmount=function(){Ht.delete(Ue),Ht.size<1&&(D=Nc,Be&&Be(),C.value=Nc,hn=!1,lt=!1),Et()},Sl&&g3(Ue,wt,n)}}}function Mf(t){return t.reduce((n,a)=>n.then(()=>a()),Promise.resolve())}function A3(t,n){const a=[],h=[],m=[],g=Math.max(n.matched.length,t.matched.length);for(let b=0;b<g;b++){const s=n.matched[b];s&&(t.matched.find(D=>zc(D,s))?h.push(s):a.push(s));const C=t.matched[b];C&&(n.matched.find(D=>zc(D,C))||m.push(C))}return[a,h,m]}function G8(){return hs(h_)}function W8(){return hs(Tv)}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var zT="store";function q8(t){return t===void 0&&(t=null),hs(t!==null?t:zT)}function ih(t,n){Object.keys(t).forEach(function(a){return n(t[a],a)})}function NT(t){return t!==null&&typeof t=="object"}function S3(t){return t&&typeof t.then=="function"}function na(t,n){if(!t)throw new Error("[vuex] "+n)}function C3(t,n){return function(){return t(n)}}function FT(t,n,a){return n.indexOf(t)<0&&(a&&a.prepend?n.unshift(t):n.push(t)),function(){var h=n.indexOf(t);h>-1&&n.splice(h,1)}}function BT(t,n){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var a=t.state;p_(t,a,[],t._modules.root,!0),Dv(t,a,n)}function Dv(t,n,a){var h=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var m=t._wrappedGetters,g={};ih(m,function(b,s){g[s]=C3(b,t),Object.defineProperty(t.getters,s,{get:function(){return g[s]()},enumerable:!0})}),t._state=Bu({data:n}),t.strict&&P3(t),h&&a&&t._withCommit(function(){h.data=null})}function p_(t,n,a,h,m){var g=!a.length,b=t._modules.getNamespace(a);if(h.namespaced&&(t._modulesNamespaceMap[b]&&console.error("[vuex] duplicate namespace "+b+" for the namespaced module "+a.join("/")),t._modulesNamespaceMap[b]=h),!g&&!m){var s=Rv(n,a.slice(0,-1)),C=a[a.length-1];t._withCommit(function(){C in s&&console.warn('[vuex] state field "'+C+'" was overridden by a module with the same name at "'+a.join(".")+'"'),s[C]=h.state})}var D=h.context=I3(t,b,a);h.forEachMutation(function(M,L){var F=b+L;M3(t,F,M,D)}),h.forEachAction(function(M,L){var F=M.root?L:b+L,Y=M.handler||M;k3(t,F,Y,D)}),h.forEachGetter(function(M,L){var F=b+L;L3(t,F,M,D)}),h.forEachChild(function(M,L){p_(t,n,a.concat(L),M,m)})}function I3(t,n,a){var h=n==="",m={dispatch:h?t.dispatch:function(g,b,s){var C=m_(g,b,s),D=C.payload,M=C.options,L=C.type;if((!M||!M.root)&&(L=n+L,!t._actions[L])){console.error("[vuex] unknown local action type: "+C.type+", global type: "+L);return}return t.dispatch(L,D)},commit:h?t.commit:function(g,b,s){var C=m_(g,b,s),D=C.payload,M=C.options,L=C.type;if((!M||!M.root)&&(L=n+L,!t._mutations[L])){console.error("[vuex] unknown local mutation type: "+C.type+", global type: "+L);return}t.commit(L,D,M)}};return Object.defineProperties(m,{getters:{get:h?function(){return t.getters}:function(){return $T(t,n)}},state:{get:function(){return Rv(t.state,a)}}}),m}function $T(t,n){if(!t._makeLocalGettersCache[n]){var a={},h=n.length;Object.keys(t.getters).forEach(function(m){if(m.slice(0,h)===n){var g=m.slice(h);Object.defineProperty(a,g,{get:function(){return t.getters[m]},enumerable:!0})}}),t._makeLocalGettersCache[n]=a}return t._makeLocalGettersCache[n]}function M3(t,n,a,h){var m=t._mutations[n]||(t._mutations[n]=[]);m.push(function(b){a.call(t,h.state,b)})}function k3(t,n,a,h){var m=t._actions[n]||(t._actions[n]=[]);m.push(function(b){var s=a.call(t,{dispatch:h.dispatch,commit:h.commit,getters:h.getters,state:h.state,rootGetters:t.getters,rootState:t.state},b);return S3(s)||(s=Promise.resolve(s)),t._devtoolHook?s.catch(function(C){throw t._devtoolHook.emit("vuex:error",C),C}):s})}function L3(t,n,a,h){if(t._wrappedGetters[n]){console.error("[vuex] duplicate getter key: "+n);return}t._wrappedGetters[n]=function(g){return a(h.state,h.getters,g.state,g.getters)}}function P3(t){Na(function(){return t._state.data},function(){na(t._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function Rv(t,n){return n.reduce(function(a,h){return a[h]},t)}function m_(t,n,a){return NT(t)&&t.type&&(a=n,n=t,t=t.type),na(typeof t=="string","expects string as the type, but found "+typeof t+"."),{type:t,payload:n,options:a}}var O3="vuex bindings",UT="vuex:mutations",zv="vuex:actions",kf="vuex",D3=0;function R3(t,n){Ev({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[O3]},function(a){a.addTimelineLayer({id:UT,label:"Vuex Mutations",color:VT}),a.addTimelineLayer({id:zv,label:"Vuex Actions",color:VT}),a.addInspector({id:kf,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),a.on.getInspectorTree(function(h){if(h.app===t&&h.inspectorId===kf)if(h.filter){var m=[];WT(m,n._modules.root,h.filter,""),h.rootNodes=m}else h.rootNodes=[GT(n._modules.root,"")]}),a.on.getInspectorState(function(h){if(h.app===t&&h.inspectorId===kf){var m=h.nodeId;$T(n,m),h.state=F3($3(n._modules,m),m==="root"?n.getters:n._makeLocalGettersCache,m)}}),a.on.editInspectorState(function(h){if(h.app===t&&h.inspectorId===kf){var m=h.nodeId,g=h.path;m!=="root"&&(g=m.split("/").filter(Boolean).concat(g)),n._withCommit(function(){h.set(n._state.data,g,h.state.value)})}}),n.subscribe(function(h,m){var g={};h.payload&&(g.payload=h.payload),g.state=m,a.notifyComponentUpdate(),a.sendInspectorTree(kf),a.sendInspectorState(kf),a.addTimelineEvent({layerId:UT,event:{time:Date.now(),title:h.type,data:g}})}),n.subscribeAction({before:function(h,m){var g={};h.payload&&(g.payload=h.payload),h._id=D3++,h._time=Date.now(),g.state=m,a.addTimelineEvent({layerId:zv,event:{time:h._time,title:h.type,groupId:h._id,subtitle:"start",data:g}})},after:function(h,m){var g={},b=Date.now()-h._time;g.duration={_custom:{type:"duration",display:b+"ms",tooltip:"Action duration",value:b}},h.payload&&(g.payload=h.payload),g.state=m,a.addTimelineEvent({layerId:zv,event:{time:Date.now(),title:h.type,groupId:h._id,subtitle:"end",data:g}})}})})}var VT=8702998,z3=6710886,N3=16777215,jT={label:"namespaced",textColor:N3,backgroundColor:z3};function HT(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function GT(t,n){return{id:n||"root",label:HT(n),tags:t.namespaced?[jT]:[],children:Object.keys(t._children).map(function(a){return GT(t._children[a],n+a+"/")})}}function WT(t,n,a,h){h.includes(a)&&t.push({id:h||"root",label:h.endsWith("/")?h.slice(0,h.length-1):h||"Root",tags:n.namespaced?[jT]:[]}),Object.keys(n._children).forEach(function(m){WT(t,n._children[m],a,h+m+"/")})}function F3(t,n,a){n=a==="root"?n:n[a];var h=Object.keys(n),m={state:Object.keys(t.state).map(function(b){return{key:b,editable:!0,value:t.state[b]}})};if(h.length){var g=B3(n);m.getters=Object.keys(g).map(function(b){return{key:b.endsWith("/")?HT(b):b,editable:!1,value:Nv(function(){return g[b]})}})}return m}function B3(t){var n={};return Object.keys(t).forEach(function(a){var h=a.split("/");if(h.length>1){var m=n,g=h.pop();h.forEach(function(b){m[b]||(m[b]={_custom:{value:{},display:b,tooltip:"Module",abstract:!0}}),m=m[b]._custom.value}),m[g]=Nv(function(){return t[a]})}else n[a]=Nv(function(){return t[a]})}),n}function $3(t,n){var a=n.split("/").filter(function(h){return h});return a.reduce(function(h,m,g){var b=h[m];if(!b)throw new Error('Missing module "'+m+'" for path "'+n+'".');return g===a.length-1?b:b._children},n==="root"?t:t.root._children)}function Nv(t){try{return t()}catch(n){return n}}var ia=function(n,a){this.runtime=a,this._children=Object.create(null),this._rawModule=n;var h=n.state;this.state=(typeof h=="function"?h():h)||{}},qT={namespaced:{configurable:!0}};qT.namespaced.get=function(){return!!this._rawModule.namespaced};ia.prototype.addChild=function(n,a){this._children[n]=a};ia.prototype.removeChild=function(n){delete this._children[n]};ia.prototype.getChild=function(n){return this._children[n]};ia.prototype.hasChild=function(n){return n in this._children};ia.prototype.update=function(n){this._rawModule.namespaced=n.namespaced,n.actions&&(this._rawModule.actions=n.actions),n.mutations&&(this._rawModule.mutations=n.mutations),n.getters&&(this._rawModule.getters=n.getters)};ia.prototype.forEachChild=function(n){ih(this._children,n)};ia.prototype.forEachGetter=function(n){this._rawModule.getters&&ih(this._rawModule.getters,n)};ia.prototype.forEachAction=function(n){this._rawModule.actions&&ih(this._rawModule.actions,n)};ia.prototype.forEachMutation=function(n){this._rawModule.mutations&&ih(this._rawModule.mutations,n)};Object.defineProperties(ia.prototype,qT);var rh=function(n){this.register([],n,!1)};rh.prototype.get=function(n){return n.reduce(function(a,h){return a.getChild(h)},this.root)};rh.prototype.getNamespace=function(n){var a=this.root;return n.reduce(function(h,m){return a=a.getChild(m),h+(a.namespaced?m+"/":"")},"")};rh.prototype.update=function(n){ZT([],this.root,n)};rh.prototype.register=function(n,a,h){var m=this;h===void 0&&(h=!0),KT(n,a);var g=new ia(a,h);if(n.length===0)this.root=g;else{var b=this.get(n.slice(0,-1));b.addChild(n[n.length-1],g)}a.modules&&ih(a.modules,function(s,C){m.register(n.concat(C),s,h)})};rh.prototype.unregister=function(n){var a=this.get(n.slice(0,-1)),h=n[n.length-1],m=a.getChild(h);if(!m){console.warn("[vuex] trying to unregister module '"+h+"', which is not registered");return}!m.runtime||a.removeChild(h)};rh.prototype.isRegistered=function(n){var a=this.get(n.slice(0,-1)),h=n[n.length-1];return a?a.hasChild(h):!1};function ZT(t,n,a){if(KT(t,a),n.update(a),a.modules)for(var h in a.modules){if(!n.getChild(h)){console.warn("[vuex] trying to add a new module '"+h+"' on hot reloading, manual reload is needed");return}ZT(t.concat(h),n.getChild(h),a.modules[h])}}var XT={assert:function(t){return typeof t=="function"},expected:"function"},U3={assert:function(t){return typeof t=="function"||typeof t=="object"&&typeof t.handler=="function"},expected:'function or object with "handler" function'},YT={getters:XT,mutations:XT,actions:U3};function KT(t,n){Object.keys(YT).forEach(function(a){if(!!n[a]){var h=YT[a];ih(n[a],function(m,g){na(h.assert(m),V3(t,a,g,m,h.expected))})}})}function V3(t,n,a,h,m){var g=n+" should be "+m+' but "'+n+"."+a+'"';return t.length>0&&(g+=' in module "'+t.join(".")+'"'),g+=" is "+JSON.stringify(h)+".",g}function Z8(t){return new Yo(t)}var Yo=function t(n){var a=this;n===void 0&&(n={}),na(typeof Promise!="undefined","vuex requires a Promise polyfill in this browser."),na(this instanceof t,"store must be called with the new operator.");var h=n.plugins;h===void 0&&(h=[]);var m=n.strict;m===void 0&&(m=!1);var g=n.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new rh(n),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=g;var b=this,s=this,C=s.dispatch,D=s.commit;this.dispatch=function(F,Y){return C.call(b,F,Y)},this.commit=function(F,Y,Te){return D.call(b,F,Y,Te)},this.strict=m;var M=this._modules.root.state;p_(this,M,[],this._modules.root),Dv(this,M),h.forEach(function(L){return L(a)})},Fv={state:{configurable:!0}};Yo.prototype.install=function(n,a){n.provide(a||zT,this),n.config.globalProperties.$store=this;var h=this._devtools!==void 0?this._devtools:!0;h&&R3(n,this)};Fv.state.get=function(){return this._state.data};Fv.state.set=function(t){na(!1,"use store.replaceState() to explicit replace store state.")};Yo.prototype.commit=function(n,a,h){var m=this,g=m_(n,a,h),b=g.type,s=g.payload,C=g.options,D={type:b,payload:s},M=this._mutations[b];if(!M){console.error("[vuex] unknown mutation type: "+b);return}this._withCommit(function(){M.forEach(function(F){F(s)})}),this._subscribers.slice().forEach(function(L){return L(D,m.state)}),C&&C.silent&&console.warn("[vuex] mutation type: "+b+". Silent option has been removed. Use the filter functionality in the vue-devtools")};Yo.prototype.dispatch=function(n,a){var h=this,m=m_(n,a),g=m.type,b=m.payload,s={type:g,payload:b},C=this._actions[g];if(!C){console.error("[vuex] unknown action type: "+g);return}try{this._actionSubscribers.slice().filter(function(M){return M.before}).forEach(function(M){return M.before(s,h.state)})}catch(M){console.warn("[vuex] error in before action subscribers: "),console.error(M)}var D=C.length>1?Promise.all(C.map(function(M){return M(b)})):C[0](b);return new Promise(function(M,L){D.then(function(F){try{h._actionSubscribers.filter(function(Y){return Y.after}).forEach(function(Y){return Y.after(s,h.state)})}catch(Y){console.warn("[vuex] error in after action subscribers: "),console.error(Y)}M(F)},function(F){try{h._actionSubscribers.filter(function(Y){return Y.error}).forEach(function(Y){return Y.error(s,h.state,F)})}catch(Y){console.warn("[vuex] error in error action subscribers: "),console.error(Y)}L(F)})})};Yo.prototype.subscribe=function(n,a){return FT(n,this._subscribers,a)};Yo.prototype.subscribeAction=function(n,a){var h=typeof n=="function"?{before:n}:n;return FT(h,this._actionSubscribers,a)};Yo.prototype.watch=function(n,a,h){var m=this;return na(typeof n=="function","store.watch only accepts a function."),Na(function(){return n(m.state,m.getters)},a,Object.assign({},h))};Yo.prototype.replaceState=function(n){var a=this;this._withCommit(function(){a._state.data=n})};Yo.prototype.registerModule=function(n,a,h){h===void 0&&(h={}),typeof n=="string"&&(n=[n]),na(Array.isArray(n),"module path must be a string or an Array."),na(n.length>0,"cannot register the root module by using registerModule."),this._modules.register(n,a),p_(this,this.state,n,this._modules.get(n),h.preserveState),Dv(this,this.state)};Yo.prototype.unregisterModule=function(n){var a=this;typeof n=="string"&&(n=[n]),na(Array.isArray(n),"module path must be a string or an Array."),this._modules.unregister(n),this._withCommit(function(){var h=Rv(a.state,n.slice(0,-1));delete h[n[n.length-1]]}),BT(this)};Yo.prototype.hasModule=function(n){return typeof n=="string"&&(n=[n]),na(Array.isArray(n),"module path must be a string or an Array."),this._modules.isRegistered(n)};Yo.prototype.hotUpdate=function(n){this._modules.update(n),BT(this,!0)};Yo.prototype._withCommit=function(n){var a=this._committing;this._committing=!0,n(),this._committing=a};Object.defineProperties(Yo.prototype,Fv);var X8=$v(function(t,n){var a={};return __(n)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),Bv(n).forEach(function(h){var m=h.key,g=h.val;a[m]=function(){var s=this.$store.state,C=this.$store.getters;if(t){var D=Uv(this.$store,"mapState",t);if(!D)return;s=D.context.state,C=D.context.getters}return typeof g=="function"?g.call(this,s,C):s[g]},a[m].vuex=!0}),a}),Y8=$v(function(t,n){var a={};return __(n)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),Bv(n).forEach(function(h){var m=h.key,g=h.val;a[m]=function(){for(var s=[],C=arguments.length;C--;)s[C]=arguments[C];var D=this.$store.commit;if(t){var M=Uv(this.$store,"mapMutations",t);if(!M)return;D=M.context.commit}return typeof g=="function"?g.apply(this,[D].concat(s)):D.apply(this.$store,[g].concat(s))}}),a}),K8=$v(function(t,n){var a={};return __(n)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),Bv(n).forEach(function(h){var m=h.key,g=h.val;a[m]=function(){for(var s=[],C=arguments.length;C--;)s[C]=arguments[C];var D=this.$store.dispatch;if(t){var M=Uv(this.$store,"mapActions",t);if(!M)return;D=M.context.dispatch}return typeof g=="function"?g.apply(this,[D].concat(s)):D.apply(this.$store,[g].concat(s))}}),a});function Bv(t){return __(t)?Array.isArray(t)?t.map(function(n){return{key:n,val:n}}):Object.keys(t).map(function(n){return{key:n,val:t[n]}}):[]}function __(t){return Array.isArray(t)||NT(t)}function $v(t){return function(n,a){return typeof n!="string"?(a=n,n=""):n.charAt(n.length-1)!=="/"&&(n+="/"),t(n,a)}}function Uv(t,n,a){var h=t._modulesNamespaceMap[a];return h||console.error("[vuex] module namespace not found in "+n+"(): "+a),h}var Ko="top",ds="bottom",ps="right",Jo="left",dp="auto",Lf=[Ko,ds,ps,Jo],oh="start",Pf="end",JT="clippingParents",Vv="viewport",Of="popper",QT="reference",jv=Lf.reduce(function(t,n){return t.concat([n+"-"+oh,n+"-"+Pf])},[]),Hv=[].concat(Lf,[dp]).reduce(function(t,n){return t.concat([n,n+"-"+oh,n+"-"+Pf])},[]),e2="beforeRead",t2="read",n2="afterRead",i2="beforeMain",r2="main",o2="afterMain",s2="beforeWrite",a2="write",l2="afterWrite",g_=[e2,t2,n2,i2,r2,o2,s2,a2,l2];function Fa(t){return t?(t.nodeName||"").toLowerCase():null}function ra(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function pp(t){var n=ra(t).Element;return t instanceof n||t instanceof Element}function ms(t){var n=ra(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function c2(t){if(typeof ShadowRoot=="undefined")return!1;var n=ra(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function j3(t){var n=t.state;Object.keys(n.elements).forEach(function(a){var h=n.styles[a]||{},m=n.attributes[a]||{},g=n.elements[a];!ms(g)||!Fa(g)||(Object.assign(g.style,h),Object.keys(m).forEach(function(b){var s=m[b];s===!1?g.removeAttribute(b):g.setAttribute(b,s===!0?"":s)}))})}function H3(t){var n=t.state,a={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,a.popper),n.styles=a,n.elements.arrow&&Object.assign(n.elements.arrow.style,a.arrow),function(){Object.keys(n.elements).forEach(function(h){var m=n.elements[h],g=n.attributes[h]||{},b=Object.keys(n.styles.hasOwnProperty(h)?n.styles[h]:a[h]),s=b.reduce(function(C,D){return C[D]="",C},{});!ms(m)||!Fa(m)||(Object.assign(m.style,s),Object.keys(g).forEach(function(C){m.removeAttribute(C)}))})}}var Gv={name:"applyStyles",enabled:!0,phase:"write",fn:j3,effect:H3,requires:["computeStyles"]};function oa(t){return t.split("-")[0]}function Df(t,n){var a=t.getBoundingClientRect(),h=1,m=1;return{width:a.width/h,height:a.height/m,top:a.top/m,right:a.right/h,bottom:a.bottom/m,left:a.left/h,x:a.left/h,y:a.top/m}}function Wv(t){var n=Df(t),a=t.offsetWidth,h=t.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-h)<=1&&(h=n.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:h}}function u2(t,n){var a=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(a&&c2(a)){var h=n;do{if(h&&t.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function sa(t){return ra(t).getComputedStyle(t)}function G3(t){return["table","td","th"].indexOf(Fa(t))>=0}function Bc(t){return((pp(t)?t.ownerDocument:t.document)||window.document).documentElement}function y_(t){return Fa(t)==="html"?t:t.assignedSlot||t.parentNode||(c2(t)?t.host:null)||Bc(t)}function h2(t){return!ms(t)||sa(t).position==="fixed"?null:t.offsetParent}function W3(t){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,a=navigator.userAgent.indexOf("Trident")!==-1;if(a&&ms(t)){var h=sa(t);if(h.position==="fixed")return null}for(var m=y_(t);ms(m)&&["html","body"].indexOf(Fa(m))<0;){var g=sa(m);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||n&&g.willChange==="filter"||n&&g.filter&&g.filter!=="none")return m;m=m.parentNode}return null}function mp(t){for(var n=ra(t),a=h2(t);a&&G3(a)&&sa(a).position==="static";)a=h2(a);return a&&(Fa(a)==="html"||Fa(a)==="body"&&sa(a).position==="static")?n:a||W3(t)||n}function qv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}var $c=Math.max,_p=Math.min,v_=Math.round;function x_(t,n,a){return $c(t,_p(n,a))}function f2(){return{top:0,right:0,bottom:0,left:0}}function d2(t){return Object.assign({},f2(),t)}function p2(t,n){return n.reduce(function(a,h){return a[h]=t,a},{})}var q3=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,d2(typeof n!="number"?n:p2(n,Lf))};function Z3(t){var n,a=t.state,h=t.name,m=t.options,g=a.elements.arrow,b=a.modifiersData.popperOffsets,s=oa(a.placement),C=qv(s),D=[Jo,ps].indexOf(s)>=0,M=D?"height":"width";if(!(!g||!b)){var L=q3(m.padding,a),F=Wv(g),Y=C==="y"?Ko:Jo,Te=C==="y"?ds:ps,ue=a.rects.reference[M]+a.rects.reference[C]-b[C]-a.rects.popper[M],K=b[C]-a.rects.reference[C],G=mp(g),Q=G?C==="y"?G.clientHeight||0:G.clientWidth||0:0,_e=ue/2-K/2,Ce=L[Y],Ae=Q-F[M]-L[Te],Le=Q/2-F[M]/2+_e,$e=x_(Ce,Le,Ae),pt=C;a.modifiersData[h]=(n={},n[pt]=$e,n.centerOffset=$e-Le,n)}}function X3(t){var n=t.state,a=t.options,h=a.element,m=h===void 0?"[data-popper-arrow]":h;if(m!=null&&!(typeof m=="string"&&(m=n.elements.popper.querySelector(m),!m))){if(ms(m)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),!u2(n.elements.popper,m)){console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "));return}n.elements.arrow=m}}var m2={name:"arrow",enabled:!0,phase:"main",fn:Z3,effect:X3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rf(t){return t.split("-")[1]}var Y3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function K3(t){var n=t.x,a=t.y,h=window,m=h.devicePixelRatio||1;return{x:v_(v_(n*m)/m)||0,y:v_(v_(a*m)/m)||0}}function _2(t){var n,a=t.popper,h=t.popperRect,m=t.placement,g=t.variation,b=t.offsets,s=t.position,C=t.gpuAcceleration,D=t.adaptive,M=t.roundOffsets,L=M===!0?K3(b):typeof M=="function"?M(b):b,F=L.x,Y=F===void 0?0:F,Te=L.y,ue=Te===void 0?0:Te,K=b.hasOwnProperty("x"),G=b.hasOwnProperty("y"),Q=Jo,_e=Ko,Ce=window;if(D){var Ae=mp(a),Le="clientHeight",$e="clientWidth";Ae===ra(a)&&(Ae=Bc(a),sa(Ae).position!=="static"&&s==="absolute"&&(Le="scrollHeight",$e="scrollWidth")),Ae=Ae,(m===Ko||(m===Jo||m===ps)&&g===Pf)&&(_e=ds,ue-=Ae[Le]-h.height,ue*=C?1:-1),(m===Jo||(m===Ko||m===ds)&&g===Pf)&&(Q=ps,Y-=Ae[$e]-h.width,Y*=C?1:-1)}var pt=Object.assign({position:s},D&&Y3);if(C){var Xe;return Object.assign({},pt,(Xe={},Xe[_e]=G?"0":"",Xe[Q]=K?"0":"",Xe.transform=(Ce.devicePixelRatio||1)<=1?"translate("+Y+"px, "+ue+"px)":"translate3d("+Y+"px, "+ue+"px, 0)",Xe))}return Object.assign({},pt,(n={},n[_e]=G?ue+"px":"",n[Q]=K?Y+"px":"",n.transform="",n))}function J3(t){var n=t.state,a=t.options,h=a.gpuAcceleration,m=h===void 0?!0:h,g=a.adaptive,b=g===void 0?!0:g,s=a.roundOffsets,C=s===void 0?!0:s;{var D=sa(n.elements.popper).transitionProperty||"";b&&["transform","top","right","bottom","left"].some(function(L){return D.indexOf(L)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var M={placement:oa(n.placement),variation:Rf(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:m};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,_2(Object.assign({},M,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:b,roundOffsets:C})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,_2(Object.assign({},M,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var Zv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:J3,data:{}},b_={passive:!0};function Q3(t){var n=t.state,a=t.instance,h=t.options,m=h.scroll,g=m===void 0?!0:m,b=h.resize,s=b===void 0?!0:b,C=ra(n.elements.popper),D=[].concat(n.scrollParents.reference,n.scrollParents.popper);return g&&D.forEach(function(M){M.addEventListener("scroll",a.update,b_)}),s&&C.addEventListener("resize",a.update,b_),function(){g&&D.forEach(function(M){M.removeEventListener("scroll",a.update,b_)}),s&&C.removeEventListener("resize",a.update,b_)}}var Xv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Q3,data:{}},eR={left:"right",right:"left",bottom:"top",top:"bottom"};function w_(t){return t.replace(/left|right|bottom|top/g,function(n){return eR[n]})}var tR={start:"end",end:"start"};function g2(t){return t.replace(/start|end/g,function(n){return tR[n]})}function Yv(t){var n=ra(t),a=n.pageXOffset,h=n.pageYOffset;return{scrollLeft:a,scrollTop:h}}function Kv(t){return Df(Bc(t)).left+Yv(t).scrollLeft}function nR(t){var n=ra(t),a=Bc(t),h=n.visualViewport,m=a.clientWidth,g=a.clientHeight,b=0,s=0;return h&&(m=h.width,g=h.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(b=h.offsetLeft,s=h.offsetTop)),{width:m,height:g,x:b+Kv(t),y:s}}function iR(t){var n,a=Bc(t),h=Yv(t),m=(n=t.ownerDocument)==null?void 0:n.body,g=$c(a.scrollWidth,a.clientWidth,m?m.scrollWidth:0,m?m.clientWidth:0),b=$c(a.scrollHeight,a.clientHeight,m?m.scrollHeight:0,m?m.clientHeight:0),s=-h.scrollLeft+Kv(t),C=-h.scrollTop;return sa(m||a).direction==="rtl"&&(s+=$c(a.clientWidth,m?m.clientWidth:0)-g),{width:g,height:b,x:s,y:C}}function Jv(t){var n=sa(t),a=n.overflow,h=n.overflowX,m=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+m+h)}function y2(t){return["html","body","#document"].indexOf(Fa(t))>=0?t.ownerDocument.body:ms(t)&&Jv(t)?t:y2(y_(t))}function gp(t,n){var a;n===void 0&&(n=[]);var h=y2(t),m=h===((a=t.ownerDocument)==null?void 0:a.body),g=ra(h),b=m?[g].concat(g.visualViewport||[],Jv(h)?h:[]):h,s=n.concat(b);return m?s:s.concat(gp(y_(b)))}function Qv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rR(t){var n=Df(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function v2(t,n){return n===Vv?Qv(nR(t)):ms(n)?rR(n):Qv(iR(Bc(t)))}function oR(t){var n=gp(y_(t)),a=["absolute","fixed"].indexOf(sa(t).position)>=0,h=a&&ms(t)?mp(t):t;return pp(h)?n.filter(function(m){return pp(m)&&u2(m,h)&&Fa(m)!=="body"}):[]}function sR(t,n,a){var h=n==="clippingParents"?oR(t):[].concat(n),m=[].concat(h,[a]),g=m[0],b=m.reduce(function(s,C){var D=v2(t,C);return s.top=$c(D.top,s.top),s.right=_p(D.right,s.right),s.bottom=_p(D.bottom,s.bottom),s.left=$c(D.left,s.left),s},v2(t,g));return b.width=b.right-b.left,b.height=b.bottom-b.top,b.x=b.left,b.y=b.top,b}function x2(t){var n=t.reference,a=t.element,h=t.placement,m=h?oa(h):null,g=h?Rf(h):null,b=n.x+n.width/2-a.width/2,s=n.y+n.height/2-a.height/2,C;switch(m){case Ko:C={x:b,y:n.y-a.height};break;case ds:C={x:b,y:n.y+n.height};break;case ps:C={x:n.x+n.width,y:s};break;case Jo:C={x:n.x-a.width,y:s};break;default:C={x:n.x,y:n.y}}var D=m?qv(m):null;if(D!=null){var M=D==="y"?"height":"width";switch(g){case oh:C[D]=C[D]-(n[M]/2-a[M]/2);break;case Pf:C[D]=C[D]+(n[M]/2-a[M]/2);break}}return C}function zf(t,n){n===void 0&&(n={});var a=n,h=a.placement,m=h===void 0?t.placement:h,g=a.boundary,b=g===void 0?JT:g,s=a.rootBoundary,C=s===void 0?Vv:s,D=a.elementContext,M=D===void 0?Of:D,L=a.altBoundary,F=L===void 0?!1:L,Y=a.padding,Te=Y===void 0?0:Y,ue=d2(typeof Te!="number"?Te:p2(Te,Lf)),K=M===Of?QT:Of,G=t.rects.popper,Q=t.elements[F?K:M],_e=sR(pp(Q)?Q:Q.contextElement||Bc(t.elements.popper),b,C),Ce=Df(t.elements.reference),Ae=x2({reference:Ce,element:G,strategy:"absolute",placement:m}),Le=Qv(Object.assign({},G,Ae)),$e=M===Of?Le:Ce,pt={top:_e.top-$e.top+ue.top,bottom:$e.bottom-_e.bottom+ue.bottom,left:_e.left-$e.left+ue.left,right:$e.right-_e.right+ue.right},Xe=t.modifiersData.offset;if(M===Of&&Xe){var ve=Xe[m];Object.keys(pt).forEach(function(Ye){var Be=[ps,ds].indexOf(Ye)>=0?1:-1,Pe=[Ko,ds].indexOf(Ye)>=0?"y":"x";pt[Ye]+=ve[Pe]*Be})}return pt}function aR(t,n){n===void 0&&(n={});var a=n,h=a.placement,m=a.boundary,g=a.rootBoundary,b=a.padding,s=a.flipVariations,C=a.allowedAutoPlacements,D=C===void 0?Hv:C,M=Rf(h),L=M?s?jv:jv.filter(function(Te){return Rf(Te)===M}):Lf,F=L.filter(function(Te){return D.indexOf(Te)>=0});F.length===0&&(F=L,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var Y=F.reduce(function(Te,ue){return Te[ue]=zf(t,{placement:ue,boundary:m,rootBoundary:g,padding:b})[oa(ue)],Te},{});return Object.keys(Y).sort(function(Te,ue){return Y[Te]-Y[ue]})}function lR(t){if(oa(t)===dp)return[];var n=w_(t);return[g2(t),n,g2(n)]}function cR(t){var n=t.state,a=t.options,h=t.name;if(!n.modifiersData[h]._skip){for(var m=a.mainAxis,g=m===void 0?!0:m,b=a.altAxis,s=b===void 0?!0:b,C=a.fallbackPlacements,D=a.padding,M=a.boundary,L=a.rootBoundary,F=a.altBoundary,Y=a.flipVariations,Te=Y===void 0?!0:Y,ue=a.allowedAutoPlacements,K=n.options.placement,G=oa(K),Q=G===K,_e=C||(Q||!Te?[w_(K)]:lR(K)),Ce=[K].concat(_e).reduce(function(dn,Ue){return dn.concat(oa(Ue)===dp?aR(n,{placement:Ue,boundary:M,rootBoundary:L,padding:D,flipVariations:Te,allowedAutoPlacements:ue}):Ue)},[]),Ae=n.rects.reference,Le=n.rects.popper,$e=new Map,pt=!0,Xe=Ce[0],ve=0;ve<Ce.length;ve++){var Ye=Ce[ve],Be=oa(Ye),Pe=Rf(Ye)===oh,xe=[Ko,ds].indexOf(Be)>=0,je=xe?"width":"height",lt=zf(n,{placement:Ye,boundary:M,rootBoundary:L,altBoundary:F,padding:D}),Qe=xe?Pe?ps:Jo:Pe?ds:Ko;Ae[je]>Le[je]&&(Qe=w_(Qe));var ht=w_(Qe),ct=[];if(g&&ct.push(lt[Be]<=0),s&&ct.push(lt[Qe]<=0,lt[ht]<=0),ct.every(function(dn){return dn})){Xe=Ye,pt=!1;break}$e.set(Ye,ct)}if(pt)for(var Ut=Te?3:1,Ke=function(Ue){var wt=Ce.find(function(kt){var Et=$e.get(kt);if(Et)return Et.slice(0,Ue).every(function(sn){return sn})});if(wt)return Xe=wt,"break"},hn=Ut;hn>0;hn--){var Ht=Ke(hn);if(Ht==="break")break}n.placement!==Xe&&(n.modifiersData[h]._skip=!0,n.placement=Xe,n.reset=!0)}}var b2={name:"flip",enabled:!0,phase:"main",fn:cR,requiresIfExists:["offset"],data:{_skip:!1}};function w2(t,n,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-n.height-a.y,right:t.right-n.width+a.x,bottom:t.bottom-n.height+a.y,left:t.left-n.width-a.x}}function E2(t){return[Ko,ps,ds,Jo].some(function(n){return t[n]>=0})}function uR(t){var n=t.state,a=t.name,h=n.rects.reference,m=n.rects.popper,g=n.modifiersData.preventOverflow,b=zf(n,{elementContext:"reference"}),s=zf(n,{altBoundary:!0}),C=w2(b,h),D=w2(s,m,g),M=E2(C),L=E2(D);n.modifiersData[a]={referenceClippingOffsets:C,popperEscapeOffsets:D,isReferenceHidden:M,hasPopperEscaped:L},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":L})}var T2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:uR};function hR(t,n,a){var h=oa(t),m=[Jo,Ko].indexOf(h)>=0?-1:1,g=typeof a=="function"?a(Object.assign({},n,{placement:t})):a,b=g[0],s=g[1];return b=b||0,s=(s||0)*m,[Jo,ps].indexOf(h)>=0?{x:s,y:b}:{x:b,y:s}}function fR(t){var n=t.state,a=t.options,h=t.name,m=a.offset,g=m===void 0?[0,0]:m,b=Hv.reduce(function(M,L){return M[L]=hR(L,n.rects,g),M},{}),s=b[n.placement],C=s.x,D=s.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=C,n.modifiersData.popperOffsets.y+=D),n.modifiersData[h]=b}var A2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fR};function dR(t){var n=t.state,a=t.name;n.modifiersData[a]=x2({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var e0={name:"popperOffsets",enabled:!0,phase:"read",fn:dR,data:{}};function pR(t){return t==="x"?"y":"x"}function mR(t){var n=t.state,a=t.options,h=t.name,m=a.mainAxis,g=m===void 0?!0:m,b=a.altAxis,s=b===void 0?!1:b,C=a.boundary,D=a.rootBoundary,M=a.altBoundary,L=a.padding,F=a.tether,Y=F===void 0?!0:F,Te=a.tetherOffset,ue=Te===void 0?0:Te,K=zf(n,{boundary:C,rootBoundary:D,padding:L,altBoundary:M}),G=oa(n.placement),Q=Rf(n.placement),_e=!Q,Ce=qv(G),Ae=pR(Ce),Le=n.modifiersData.popperOffsets,$e=n.rects.reference,pt=n.rects.popper,Xe=typeof ue=="function"?ue(Object.assign({},n.rects,{placement:n.placement})):ue,ve={x:0,y:0};if(!!Le){if(g||s){var Ye=Ce==="y"?Ko:Jo,Be=Ce==="y"?ds:ps,Pe=Ce==="y"?"height":"width",xe=Le[Ce],je=Le[Ce]+K[Ye],lt=Le[Ce]-K[Be],Qe=Y?-pt[Pe]/2:0,ht=Q===oh?$e[Pe]:pt[Pe],ct=Q===oh?-pt[Pe]:-$e[Pe],Ut=n.elements.arrow,Ke=Y&&Ut?Wv(Ut):{width:0,height:0},hn=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:f2(),Ht=hn[Ye],dn=hn[Be],Ue=x_(0,$e[Pe],Ke[Pe]),wt=_e?$e[Pe]/2-Qe-Ue-Ht-Xe:ht-Ue-Ht-Xe,kt=_e?-$e[Pe]/2+Qe+Ue+dn+Xe:ct+Ue+dn+Xe,Et=n.elements.arrow&&mp(n.elements.arrow),sn=Et?Ce==="y"?Et.clientTop||0:Et.clientLeft||0:0,En=n.modifiersData.offset?n.modifiersData.offset[n.placement][Ce]:0,me=Le[Ce]+wt-En-sn,oe=Le[Ce]+kt-En;if(g){var ot=x_(Y?_p(je,me):je,xe,Y?$c(lt,oe):lt);Le[Ce]=ot,ve[Ce]=ot-xe}if(s){var te=Ce==="x"?Ko:Jo,ge=Ce==="x"?ds:ps,Ze=Le[Ae],Je=Ze+K[te],mt=Ze-K[ge],St=x_(Y?_p(Je,me):Je,Ze,Y?$c(mt,oe):mt);Le[Ae]=St,ve[Ae]=St-Ze}}n.modifiersData[h]=ve}}var S2={name:"preventOverflow",enabled:!0,phase:"main",fn:mR,requiresIfExists:["offset"]};function _R(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function gR(t){return t===ra(t)||!ms(t)?Yv(t):_R(t)}function yR(t){var n=t.getBoundingClientRect(),a=n.width/t.offsetWidth||1,h=n.height/t.offsetHeight||1;return a!==1||h!==1}function vR(t,n,a){a===void 0&&(a=!1);var h=ms(n);ms(n)&&yR(n);var m=Bc(n),g=Df(t),b={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(h||!h&&!a)&&((Fa(n)!=="body"||Jv(m))&&(b=gR(n)),ms(n)?(s=Df(n),s.x+=n.clientLeft,s.y+=n.clientTop):m&&(s.x=Kv(m))),{x:g.left+b.scrollLeft-s.x,y:g.top+b.scrollTop-s.y,width:g.width,height:g.height}}function xR(t){var n=new Map,a=new Set,h=[];t.forEach(function(g){n.set(g.name,g)});function m(g){a.add(g.name);var b=[].concat(g.requires||[],g.requiresIfExists||[]);b.forEach(function(s){if(!a.has(s)){var C=n.get(s);C&&m(C)}}),h.push(g)}return t.forEach(function(g){a.has(g.name)||m(g)}),h}function bR(t){var n=xR(t);return g_.reduce(function(a,h){return a.concat(n.filter(function(m){return m.phase===h}))},[])}function wR(t){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(t())})})),n}}function Uc(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),h=1;h<n;h++)a[h-1]=arguments[h];return[].concat(a).reduce(function(m,g){return m.replace(/%s/,g)},t)}var sh='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',ER='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',C2=["name","enabled","phase","fn","effect","requires","options"];function TR(t){t.forEach(function(n){[].concat(Object.keys(n),C2).filter(function(a,h,m){return m.indexOf(a)===h}).forEach(function(a){switch(a){case"name":typeof n.name!="string"&&console.error(Uc(sh,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":typeof n.enabled!="boolean"&&console.error(Uc(sh,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));break;case"phase":g_.indexOf(n.phase)<0&&console.error(Uc(sh,n.name,'"phase"',"either "+g_.join(", "),'"'+String(n.phase)+'"'));break;case"fn":typeof n.fn!="function"&&console.error(Uc(sh,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":n.effect!=null&&typeof n.effect!="function"&&console.error(Uc(sh,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":n.requires!=null&&!Array.isArray(n.requires)&&console.error(Uc(sh,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(Uc(sh,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+C2.map(function(h){return'"'+h+'"'}).join(", ")+'; but "'+a+'" was provided.')}n.requires&&n.requires.forEach(function(h){t.find(function(m){return m.name===h})==null&&console.error(Uc(ER,String(n.name),h,h))})})})}function AR(t,n){var a=new Set;return t.filter(function(h){var m=n(h);if(!a.has(m))return a.add(m),!0})}function SR(t){var n=t.reduce(function(a,h){var m=a[h.name];return a[h.name]=m?Object.assign({},m,h,{options:Object.assign({},m.options,h.options),data:Object.assign({},m.data,h.data)}):h,a},{});return Object.keys(n).map(function(a){return n[a]})}var I2="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",CR="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",M2={placement:"bottom",modifiers:[],strategy:"absolute"};function k2(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return!n.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function E_(t){t===void 0&&(t={});var n=t,a=n.defaultModifiers,h=a===void 0?[]:a,m=n.defaultOptions,g=m===void 0?M2:m;return function(s,C,D){D===void 0&&(D=g);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},M2,g),modifiersData:{},elements:{reference:s,popper:C},attributes:{},styles:{}},L=[],F=!1,Y={state:M,setOptions:function(G){var Q=typeof G=="function"?G(M.options):G;ue(),M.options=Object.assign({},g,M.options,Q),M.scrollParents={reference:pp(s)?gp(s):s.contextElement?gp(s.contextElement):[],popper:gp(C)};var _e=bR(SR([].concat(h,M.options.modifiers)));M.orderedModifiers=_e.filter(function(Ye){return Ye.enabled});{var Ce=AR([].concat(_e,M.options.modifiers),function(Ye){var Be=Ye.name;return Be});if(TR(Ce),oa(M.options.placement)===dp){var Ae=M.orderedModifiers.find(function(Ye){var Be=Ye.name;return Be==="flip"});Ae||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var Le=sa(C),$e=Le.marginTop,pt=Le.marginRight,Xe=Le.marginBottom,ve=Le.marginLeft;[$e,pt,Xe,ve].some(function(Ye){return parseFloat(Ye)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return Te(),Y.update()},forceUpdate:function(){if(!F){var G=M.elements,Q=G.reference,_e=G.popper;if(!k2(Q,_e)){console.error(I2);return}M.rects={reference:vR(Q,mp(_e),M.options.strategy==="fixed"),popper:Wv(_e)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(Ye){return M.modifiersData[Ye.name]=Object.assign({},Ye.data)});for(var Ce=0,Ae=0;Ae<M.orderedModifiers.length;Ae++){if(Ce+=1,Ce>100){console.error(CR);break}if(M.reset===!0){M.reset=!1,Ae=-1;continue}var Le=M.orderedModifiers[Ae],$e=Le.fn,pt=Le.options,Xe=pt===void 0?{}:pt,ve=Le.name;typeof $e=="function"&&(M=$e({state:M,options:Xe,name:ve,instance:Y})||M)}}},update:wR(function(){return new Promise(function(K){Y.forceUpdate(),K(M)})}),destroy:function(){ue(),F=!0}};if(!k2(s,C))return console.error(I2),Y;Y.setOptions(D).then(function(K){!F&&D.onFirstUpdate&&D.onFirstUpdate(K)});function Te(){M.orderedModifiers.forEach(function(K){var G=K.name,Q=K.options,_e=Q===void 0?{}:Q,Ce=K.effect;if(typeof Ce=="function"){var Ae=Ce({state:M,name:G,instance:Y,options:_e}),Le=function(){};L.push(Ae||Le)}})}function ue(){L.forEach(function(K){return K()}),L=[]}return Y}}var IR=E_(),MR=[Xv,e0,Zv,Gv],kR=E_({defaultModifiers:MR}),LR=[Xv,e0,Zv,Gv,A2,b2,S2,m2,T2],t0=E_({defaultModifiers:LR}),L2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",popperGenerator:E_,detectOverflow:zf,createPopperBase:IR,createPopper:t0,createPopperLite:kR,top:Ko,bottom:ds,right:ps,left:Jo,auto:dp,basePlacements:Lf,start:oh,end:Pf,clippingParents:JT,viewport:Vv,popper:Of,reference:QT,variationPlacements:jv,placements:Hv,beforeRead:e2,read:t2,afterRead:n2,beforeMain:i2,main:r2,afterMain:o2,beforeWrite:s2,write:a2,afterWrite:l2,modifierPhases:g_,applyStyles:Gv,arrow:m2,computeStyles:Zv,eventListeners:Xv,flip:b2,hide:T2,offset:A2,popperOffsets:e0,preventOverflow:S2});/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const PR=1e6,OR=1e3,n0="transitionend",DR=t=>t==null?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),RR=t=>{do t+=Math.floor(Math.random()*PR);while(document.getElementById(t));return t},P2=t=>{let n=t.getAttribute("data-bs-target");if(!n||n==="#"){let a=t.getAttribute("href");if(!a||!a.includes("#")&&!a.startsWith("."))return null;a.includes("#")&&!a.startsWith("#")&&(a=`#${a.split("#")[1]}`),n=a&&a!=="#"?a.trim():null}return n},i0=t=>{const n=P2(t);return n&&document.querySelector(n)?n:null},Vc=t=>{const n=P2(t);return n?document.querySelector(n):null},zR=t=>{if(!t)return 0;let{transitionDuration:n,transitionDelay:a}=window.getComputedStyle(t);const h=Number.parseFloat(n),m=Number.parseFloat(a);return!h&&!m?0:(n=n.split(",")[0],a=a.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(a))*OR)},O2=t=>{t.dispatchEvent(new Event(n0))},ah=t=>!t||typeof t!="object"?!1:(typeof t.jquery!="undefined"&&(t=t[0]),typeof t.nodeType!="undefined"),jc=t=>ah(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,Ba=(t,n,a)=>{Object.keys(a).forEach(h=>{const m=a[h],g=n[h],b=g&&ah(g)?"element":DR(g);if(!new RegExp(m).test(b))throw new TypeError(`${t.toUpperCase()}: Option "${h}" provided type "${b}" but expected type "${m}".`)})},yp=t=>!ah(t)||t.getClientRects().length===0?!1:getComputedStyle(t).getPropertyValue("visibility")==="visible",lh=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled!="undefined"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",D2=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const n=t.getRootNode();return n instanceof ShadowRoot?n:null}return t instanceof ShadowRoot?t:t.parentNode?D2(t.parentNode):null},T_=()=>{},Nf=t=>{t.offsetHeight},R2=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},r0=[],NR=t=>{document.readyState==="loading"?(r0.length||document.addEventListener("DOMContentLoaded",()=>{r0.forEach(n=>n())}),r0.push(t)):t()},Qo=()=>document.documentElement.dir==="rtl",Rs=t=>{NR(()=>{const n=R2();if(n){const a=t.NAME,h=n.fn[a];n.fn[a]=t.jQueryInterface,n.fn[a].Constructor=t,n.fn[a].noConflict=()=>(n.fn[a]=h,t.jQueryInterface)}})},ch=t=>{typeof t=="function"&&t()},z2=(t,n,a=!0)=>{if(!a){ch(t);return}const h=5,m=zR(n)+h;let g=!1;const b=({target:s})=>{s===n&&(g=!0,n.removeEventListener(n0,b),ch(t))};n.addEventListener(n0,b),setTimeout(()=>{g||O2(n)},m)},N2=(t,n,a,h)=>{let m=t.indexOf(n);if(m===-1)return t[!a&&h?t.length-1:0];const g=t.length;return m+=a?1:-1,h&&(m=(m+g)%g),t[Math.max(0,Math.min(m,g-1))]},FR=/[^.]*(?=\..*)\.|.*/,BR=/\..*/,$R=/::\d+$/,o0={};let F2=1;const UR={mouseenter:"mouseover",mouseleave:"mouseout"},VR=/^(mouseenter|mouseleave)/i,B2=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function $2(t,n){return n&&`${n}::${F2++}`||t.uidEvent||F2++}function U2(t){const n=$2(t);return t.uidEvent=n,o0[n]=o0[n]||{},o0[n]}function jR(t,n){return function a(h){return h.delegateTarget=t,a.oneOff&&Bt.off(t,h.type,n),n.apply(t,[h])}}function HR(t,n,a){return function h(m){const g=t.querySelectorAll(n);for(let{target:b}=m;b&&b!==this;b=b.parentNode)for(let s=g.length;s--;)if(g[s]===b)return m.delegateTarget=b,h.oneOff&&Bt.off(t,m.type,n,a),a.apply(b,[m]);return null}}function V2(t,n,a=null){const h=Object.keys(t);for(let m=0,g=h.length;m<g;m++){const b=t[h[m]];if(b.originalHandler===n&&b.delegationSelector===a)return b}return null}function j2(t,n,a){const h=typeof n=="string",m=h?a:n;let g=G2(t);return B2.has(g)||(g=t),[h,m,g]}function H2(t,n,a,h,m){if(typeof n!="string"||!t)return;if(a||(a=h,h=null),VR.test(n)){const Y=Te=>function(ue){if(!ue.relatedTarget||ue.relatedTarget!==ue.delegateTarget&&!ue.delegateTarget.contains(ue.relatedTarget))return Te.call(this,ue)};h?h=Y(h):a=Y(a)}const[g,b,s]=j2(n,a,h),C=U2(t),D=C[s]||(C[s]={}),M=V2(D,b,g?a:null);if(M){M.oneOff=M.oneOff&&m;return}const L=$2(b,n.replace(FR,"")),F=g?HR(t,a,h):jR(t,a);F.delegationSelector=g?a:null,F.originalHandler=b,F.oneOff=m,F.uidEvent=L,D[L]=F,t.addEventListener(s,F,g)}function s0(t,n,a,h,m){const g=V2(n[a],h,m);!g||(t.removeEventListener(a,g,Boolean(m)),delete n[a][g.uidEvent])}function GR(t,n,a,h){const m=n[a]||{};Object.keys(m).forEach(g=>{if(g.includes(h)){const b=m[g];s0(t,n,a,b.originalHandler,b.delegationSelector)}})}function G2(t){return t=t.replace(BR,""),UR[t]||t}const Bt={on(t,n,a,h){H2(t,n,a,h,!1)},one(t,n,a,h){H2(t,n,a,h,!0)},off(t,n,a,h){if(typeof n!="string"||!t)return;const[m,g,b]=j2(n,a,h),s=b!==n,C=U2(t),D=n.startsWith(".");if(typeof g!="undefined"){if(!C||!C[b])return;s0(t,C,b,g,m?a:null);return}D&&Object.keys(C).forEach(L=>{GR(t,C,L,n.slice(1))});const M=C[b]||{};Object.keys(M).forEach(L=>{const F=L.replace($R,"");if(!s||n.includes(F)){const Y=M[L];s0(t,C,b,Y.originalHandler,Y.delegationSelector)}})},trigger(t,n,a){if(typeof n!="string"||!t)return null;const h=R2(),m=G2(n),g=n!==m,b=B2.has(m);let s,C=!0,D=!0,M=!1,L=null;return g&&h&&(s=h.Event(n,a),h(t).trigger(s),C=!s.isPropagationStopped(),D=!s.isImmediatePropagationStopped(),M=s.isDefaultPrevented()),b?(L=document.createEvent("HTMLEvents"),L.initEvent(m,C,!0)):L=new CustomEvent(n,{bubbles:C,cancelable:!0}),typeof a!="undefined"&&Object.keys(a).forEach(F=>{Object.defineProperty(L,F,{get(){return a[F]}})}),M&&L.preventDefault(),D&&t.dispatchEvent(L),L.defaultPrevented&&typeof s!="undefined"&&s.preventDefault(),L}},Hc=new Map,vp={set(t,n,a){Hc.has(t)||Hc.set(t,new Map);const h=Hc.get(t);if(!h.has(n)&&h.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`);return}h.set(n,a)},get(t,n){return Hc.has(t)&&Hc.get(t).get(n)||null},remove(t,n){if(!Hc.has(t))return;const a=Hc.get(t);a.delete(n),a.size===0&&Hc.delete(t)}},WR="5.1.3";class aa{constructor(n){n=jc(n),!!n&&(this._element=n,vp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){vp.remove(this._element,this.constructor.DATA_KEY),Bt.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(n=>{this[n]=null})}_queueCallback(n,a,h=!0){z2(n,a,h)}static getInstance(n){return vp.get(jc(n),this.DATA_KEY)}static getOrCreateInstance(n,a={}){return this.getInstance(n)||new this(n,typeof a=="object"?a:null)}static get VERSION(){return WR}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const A_=(t,n="hide")=>{const a=`click.dismiss${t.EVENT_KEY}`,h=t.NAME;Bt.on(document,a,`[data-bs-dismiss="${h}"]`,function(m){if(["A","AREA"].includes(this.tagName)&&m.preventDefault(),lh(this))return;const g=Vc(this)||this.closest(`.${h}`);t.getOrCreateInstance(g)[n]()})},qR="alert",ZR="bs.alert",W2=`.${ZR}`,XR=`close${W2}`,YR=`closed${W2}`,KR="fade",JR="show";class S_ extends aa{static get NAME(){return qR}close(){if(Bt.trigger(this._element,XR).defaultPrevented)return;this._element.classList.remove(JR);const a=this._element.classList.contains(KR);this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),Bt.trigger(this._element,YR),this.dispose()}static jQueryInterface(n){return this.each(function(){const a=S_.getOrCreateInstance(this);if(typeof n=="string"){if(a[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);a[n](this)}})}}A_(S_,"close");Rs(S_);const QR="button",ez="bs.button",tz=`.${ez}`,nz=".data-api",iz="active",q2='[data-bs-toggle="button"]',rz=`click${tz}${nz}`;class C_ extends aa{static get NAME(){return QR}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(iz))}static jQueryInterface(n){return this.each(function(){const a=C_.getOrCreateInstance(this);n==="toggle"&&a[n]()})}}Bt.on(document,rz,q2,t=>{t.preventDefault();const n=t.target.closest(q2);C_.getOrCreateInstance(n).toggle()});Rs(C_);function Z2(t){return t==="true"?!0:t==="false"?!1:t===Number(t).toString()?Number(t):t===""||t==="null"?null:t}function a0(t){return t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const to={setDataAttribute(t,n,a){t.setAttribute(`data-bs-${a0(n)}`,a)},removeDataAttribute(t,n){t.removeAttribute(`data-bs-${a0(n)}`)},getDataAttributes(t){if(!t)return{};const n={};return Object.keys(t.dataset).filter(a=>a.startsWith("bs")).forEach(a=>{let h=a.replace(/^bs/,"");h=h.charAt(0).toLowerCase()+h.slice(1,h.length),n[h]=Z2(t.dataset[a])}),n},getDataAttribute(t,n){return Z2(t.getAttribute(`data-bs-${a0(n)}`))},offset(t){const n=t.getBoundingClientRect();return{top:n.top+window.pageYOffset,left:n.left+window.pageXOffset}},position(t){return{top:t.offsetTop,left:t.offsetLeft}}},oz=3,Gn={find(t,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,t))},findOne(t,n=document.documentElement){return Element.prototype.querySelector.call(n,t)},children(t,n){return[].concat(...t.children).filter(a=>a.matches(n))},parents(t,n){const a=[];let h=t.parentNode;for(;h&&h.nodeType===Node.ELEMENT_NODE&&h.nodeType!==oz;)h.matches(n)&&a.push(h),h=h.parentNode;return a},prev(t,n){let a=t.previousElementSibling;for(;a;){if(a.matches(n))return[a];a=a.previousElementSibling}return[]},next(t,n){let a=t.nextElementSibling;for(;a;){if(a.matches(n))return[a];a=a.nextElementSibling}return[]},focusableChildren(t){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(a=>`${a}:not([tabindex^="-"])`).join(", ");return this.find(n,t).filter(a=>!lh(a)&&yp(a))}},X2="carousel",sz="bs.carousel",_s=`.${sz}`,Y2=".data-api",az="ArrowLeft",lz="ArrowRight",cz=500,uz=40,K2={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},hz={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},uh="next",hh="prev",fh="left",xp="right",fz={[az]:xp,[lz]:fh},dz=`slide${_s}`,J2=`slid${_s}`,pz=`keydown${_s}`,mz=`mouseenter${_s}`,_z=`mouseleave${_s}`,gz=`touchstart${_s}`,yz=`touchmove${_s}`,vz=`touchend${_s}`,xz=`pointerdown${_s}`,bz=`pointerup${_s}`,wz=`dragstart${_s}`,Ez=`load${_s}${Y2}`,Tz=`click${_s}${Y2}`,Az="carousel",dh="active",Sz="slide",Cz="carousel-item-end",Iz="carousel-item-start",Mz="carousel-item-next",kz="carousel-item-prev",Lz="pointer-event",Pz=".active",I_=".active.carousel-item",Oz=".carousel-item",Dz=".carousel-item img",Rz=".carousel-item-next, .carousel-item-prev",zz=".carousel-indicators",Nz="[data-bs-target]",Fz="[data-bs-slide], [data-bs-slide-to]",Bz='[data-bs-ride="carousel"]',$z="touch",Uz="pen";class Cl extends aa{constructor(n,a){super(n);this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(a),this._indicatorsElement=Gn.findOne(zz,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return K2}static get NAME(){return X2}next(){this._slide(uh)}nextWhenVisible(){!document.hidden&&yp(this._element)&&this.next()}prev(){this._slide(hh)}pause(n){n||(this._isPaused=!0),Gn.findOne(Rz,this._element)&&(O2(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(n){n||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(n){this._activeElement=Gn.findOne(I_,this._element);const a=this._getItemIndex(this._activeElement);if(n>this._items.length-1||n<0)return;if(this._isSliding){Bt.one(this._element,J2,()=>this.to(n));return}if(a===n){this.pause(),this.cycle();return}const h=n>a?uh:hh;this._slide(h,this._items[n])}_getConfig(n){return n=en(en(en({},K2),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Ba(X2,n,hz),n}_handleSwipe(){const n=Math.abs(this.touchDeltaX);if(n<=uz)return;const a=n/this.touchDeltaX;this.touchDeltaX=0,!!a&&this._slide(a>0?xp:fh)}_addEventListeners(){this._config.keyboard&&Bt.on(this._element,pz,n=>this._keydown(n)),this._config.pause==="hover"&&(Bt.on(this._element,mz,n=>this.pause(n)),Bt.on(this._element,_z,n=>this.cycle(n))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const n=g=>this._pointerEvent&&(g.pointerType===Uz||g.pointerType===$z),a=g=>{n(g)?this.touchStartX=g.clientX:this._pointerEvent||(this.touchStartX=g.touches[0].clientX)},h=g=>{this.touchDeltaX=g.touches&&g.touches.length>1?0:g.touches[0].clientX-this.touchStartX},m=g=>{n(g)&&(this.touchDeltaX=g.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(b=>this.cycle(b),cz+this._config.interval))};Gn.find(Dz,this._element).forEach(g=>{Bt.on(g,wz,b=>b.preventDefault())}),this._pointerEvent?(Bt.on(this._element,xz,g=>a(g)),Bt.on(this._element,bz,g=>m(g)),this._element.classList.add(Lz)):(Bt.on(this._element,gz,g=>a(g)),Bt.on(this._element,yz,g=>h(g)),Bt.on(this._element,vz,g=>m(g)))}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const a=fz[n.key];a&&(n.preventDefault(),this._slide(a))}_getItemIndex(n){return this._items=n&&n.parentNode?Gn.find(Oz,n.parentNode):[],this._items.indexOf(n)}_getItemByOrder(n,a){const h=n===uh;return N2(this._items,a,h,this._config.wrap)}_triggerSlideEvent(n,a){const h=this._getItemIndex(n),m=this._getItemIndex(Gn.findOne(I_,this._element));return Bt.trigger(this._element,dz,{relatedTarget:n,direction:a,from:m,to:h})}_setActiveIndicatorElement(n){if(this._indicatorsElement){const a=Gn.findOne(Pz,this._indicatorsElement);a.classList.remove(dh),a.removeAttribute("aria-current");const h=Gn.find(Nz,this._indicatorsElement);for(let m=0;m<h.length;m++)if(Number.parseInt(h[m].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(n)){h[m].classList.add(dh),h[m].setAttribute("aria-current","true");break}}}_updateInterval(){const n=this._activeElement||Gn.findOne(I_,this._element);if(!n)return;const a=Number.parseInt(n.getAttribute("data-bs-interval"),10);a?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=a):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(n,a){const h=this._directionToOrder(n),m=Gn.findOne(I_,this._element),g=this._getItemIndex(m),b=a||this._getItemByOrder(h,m),s=this._getItemIndex(b),C=Boolean(this._interval),D=h===uh,M=D?Iz:Cz,L=D?Mz:kz,F=this._orderToDirection(h);if(b&&b.classList.contains(dh)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(b,F).defaultPrevented||!m||!b)return;this._isSliding=!0,C&&this.pause(),this._setActiveIndicatorElement(b),this._activeElement=b;const Te=()=>{Bt.trigger(this._element,J2,{relatedTarget:b,direction:F,from:g,to:s})};if(this._element.classList.contains(Sz)){b.classList.add(L),Nf(b),m.classList.add(M),b.classList.add(M);const ue=()=>{b.classList.remove(M,L),b.classList.add(dh),m.classList.remove(dh,L,M),this._isSliding=!1,setTimeout(Te,0)};this._queueCallback(ue,m,!0)}else m.classList.remove(dh),b.classList.add(dh),this._isSliding=!1,Te();C&&this.cycle()}_directionToOrder(n){return[xp,fh].includes(n)?Qo()?n===fh?hh:uh:n===fh?uh:hh:n}_orderToDirection(n){return[uh,hh].includes(n)?Qo()?n===hh?fh:xp:n===hh?xp:fh:n}static carouselInterface(n,a){const h=Cl.getOrCreateInstance(n,a);let{_config:m}=h;typeof a=="object"&&(m=en(en({},m),a));const g=typeof a=="string"?a:m.slide;if(typeof a=="number")h.to(a);else if(typeof g=="string"){if(typeof h[g]=="undefined")throw new TypeError(`No method named "${g}"`);h[g]()}else m.interval&&m.ride&&(h.pause(),h.cycle())}static jQueryInterface(n){return this.each(function(){Cl.carouselInterface(this,n)})}static dataApiClickHandler(n){const a=Vc(this);if(!a||!a.classList.contains(Az))return;const h=en(en({},to.getDataAttributes(a)),to.getDataAttributes(this)),m=this.getAttribute("data-bs-slide-to");m&&(h.interval=!1),Cl.carouselInterface(a,h),m&&Cl.getInstance(a).to(m),n.preventDefault()}}Bt.on(document,Tz,Fz,Cl.dataApiClickHandler);Bt.on(window,Ez,()=>{const t=Gn.find(Bz);for(let n=0,a=t.length;n<a;n++)Cl.carouselInterface(t[n],Cl.getInstance(t[n]))});Rs(Cl);const Q2="collapse",eA="bs.collapse",bp=`.${eA}`,Vz=".data-api",tA={toggle:!0,parent:null},jz={toggle:"boolean",parent:"(null|element)"},Hz=`show${bp}`,Gz=`shown${bp}`,Wz=`hide${bp}`,qz=`hidden${bp}`,Zz=`click${bp}${Vz}`,l0="show",Ff="collapse",M_="collapsing",nA="collapsed",iA=`:scope .${Ff} .${Ff}`,Xz="collapse-horizontal",Yz="width",Kz="height",Jz=".collapse.show, .collapse.collapsing",c0='[data-bs-toggle="collapse"]';class Bf extends aa{constructor(n,a){super(n);this._isTransitioning=!1,this._config=this._getConfig(a),this._triggerArray=[];const h=Gn.find(c0);for(let m=0,g=h.length;m<g;m++){const b=h[m],s=i0(b),C=Gn.find(s).filter(D=>D===this._element);s!==null&&C.length&&(this._selector=s,this._triggerArray.push(b))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tA}static get NAME(){return Q2}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[],a;if(this._config.parent){const D=Gn.find(iA,this._config.parent);n=Gn.find(Jz,this._config.parent).filter(M=>!D.includes(M))}const h=Gn.findOne(this._selector);if(n.length){const D=n.find(M=>h!==M);if(a=D?Bf.getInstance(D):null,a&&a._isTransitioning)return}if(Bt.trigger(this._element,Hz).defaultPrevented)return;n.forEach(D=>{h!==D&&Bf.getOrCreateInstance(D,{toggle:!1}).hide(),a||vp.set(D,eA,null)});const g=this._getDimension();this._element.classList.remove(Ff),this._element.classList.add(M_),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const b=()=>{this._isTransitioning=!1,this._element.classList.remove(M_),this._element.classList.add(Ff,l0),this._element.style[g]="",Bt.trigger(this._element,Gz)},C=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(b,this._element,!0),this._element.style[g]=`${this._element[C]}px`}hide(){if(this._isTransitioning||!this._isShown()||Bt.trigger(this._element,Wz).defaultPrevented)return;const a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,Nf(this._element),this._element.classList.add(M_),this._element.classList.remove(Ff,l0);const h=this._triggerArray.length;for(let g=0;g<h;g++){const b=this._triggerArray[g],s=Vc(b);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([b],!1)}this._isTransitioning=!0;const m=()=>{this._isTransitioning=!1,this._element.classList.remove(M_),this._element.classList.add(Ff),Bt.trigger(this._element,qz)};this._element.style[a]="",this._queueCallback(m,this._element,!0)}_isShown(n=this._element){return n.classList.contains(l0)}_getConfig(n){return n=en(en(en({},tA),to.getDataAttributes(this._element)),n),n.toggle=Boolean(n.toggle),n.parent=jc(n.parent),Ba(Q2,n,jz),n}_getDimension(){return this._element.classList.contains(Xz)?Yz:Kz}_initializeChildren(){if(!this._config.parent)return;const n=Gn.find(iA,this._config.parent);Gn.find(c0,this._config.parent).filter(a=>!n.includes(a)).forEach(a=>{const h=Vc(a);h&&this._addAriaAndCollapsedClass([a],this._isShown(h))})}_addAriaAndCollapsedClass(n,a){!n.length||n.forEach(h=>{a?h.classList.remove(nA):h.classList.add(nA),h.setAttribute("aria-expanded",a)})}static jQueryInterface(n){return this.each(function(){const a={};typeof n=="string"&&/show|hide/.test(n)&&(a.toggle=!1);const h=Bf.getOrCreateInstance(this,a);if(typeof n=="string"){if(typeof h[n]=="undefined")throw new TypeError(`No method named "${n}"`);h[n]()}})}}Bt.on(document,Zz,c0,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const n=i0(this);Gn.find(n).forEach(h=>{Bf.getOrCreateInstance(h,{toggle:!1}).toggle()})});Rs(Bf);const u0="dropdown",Qz="bs.dropdown",ph=`.${Qz}`,h0=".data-api",k_="Escape",rA="Space",oA="Tab",f0="ArrowUp",L_="ArrowDown",e4=2,t4=new RegExp(`${f0}|${L_}|${k_}`),n4=`hide${ph}`,i4=`hidden${ph}`,r4=`show${ph}`,o4=`shown${ph}`,sA=`click${ph}${h0}`,aA=`keydown${ph}${h0}`,s4=`keyup${ph}${h0}`,$f="show",a4="dropup",l4="dropend",c4="dropstart",u4="navbar",wp='[data-bs-toggle="dropdown"]',d0=".dropdown-menu",h4=".navbar-nav",f4=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",d4=Qo()?"top-end":"top-start",p4=Qo()?"top-start":"top-end",m4=Qo()?"bottom-end":"bottom-start",_4=Qo()?"bottom-start":"bottom-end",g4=Qo()?"left-start":"right-start",y4=Qo()?"right-start":"left-start",v4={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},x4={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class zs extends aa{constructor(n,a){super(n);this._popper=null,this._config=this._getConfig(a),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return v4}static get DefaultType(){return x4}static get NAME(){return u0}toggle(){return this._isShown()?this.hide():this.show()}show(){if(lh(this._element)||this._isShown(this._menu))return;const n={relatedTarget:this._element};if(Bt.trigger(this._element,r4,n).defaultPrevented)return;const h=zs.getParentFromElement(this._element);this._inNavbar?to.setDataAttribute(this._menu,"popper","none"):this._createPopper(h),"ontouchstart"in document.documentElement&&!h.closest(h4)&&[].concat(...document.body.children).forEach(m=>Bt.on(m,"mouseover",T_)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add($f),this._element.classList.add($f),Bt.trigger(this._element,o4,n)}hide(){if(lh(this._element)||!this._isShown(this._menu))return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){Bt.trigger(this._element,n4,n).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(h=>Bt.off(h,"mouseover",T_)),this._popper&&this._popper.destroy(),this._menu.classList.remove($f),this._element.classList.remove($f),this._element.setAttribute("aria-expanded","false"),to.removeDataAttribute(this._menu,"popper"),Bt.trigger(this._element,i4,n))}_getConfig(n){if(n=en(en(en({},this.constructor.Default),to.getDataAttributes(this._element)),n),Ba(u0,n,this.constructor.DefaultType),typeof n.reference=="object"&&!ah(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${u0.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(n){if(typeof L2=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let a=this._element;this._config.reference==="parent"?a=n:ah(this._config.reference)?a=jc(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);const h=this._getPopperConfig(),m=h.modifiers.find(g=>g.name==="applyStyles"&&g.enabled===!1);this._popper=t0(a,this._menu,h),m&&to.setDataAttribute(this._menu,"popper","static")}_isShown(n=this._element){return n.classList.contains($f)}_getMenuElement(){return Gn.next(this._element,d0)[0]}_getPlacement(){const n=this._element.parentNode;if(n.classList.contains(l4))return g4;if(n.classList.contains(c4))return y4;const a=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(a4)?a?p4:d4:a?_4:m4}_detectNavbar(){return this._element.closest(`.${u4}`)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(a=>Number.parseInt(a,10)):typeof n=="function"?a=>n(a,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(n.modifiers=[{name:"applyStyles",enabled:!1}]),en(en({},n),typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig)}_selectMenuItem({key:n,target:a}){const h=Gn.find(f4,this._menu).filter(yp);!h.length||N2(h,a,n===L_,!h.includes(a)).focus()}static jQueryInterface(n){return this.each(function(){const a=zs.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n]()}})}static clearMenus(n){if(n&&(n.button===e4||n.type==="keyup"&&n.key!==oA))return;const a=Gn.find(wp);for(let h=0,m=a.length;h<m;h++){const g=zs.getInstance(a[h]);if(!g||g._config.autoClose===!1||!g._isShown())continue;const b={relatedTarget:g._element};if(n){const s=n.composedPath(),C=s.includes(g._menu);if(s.includes(g._element)||g._config.autoClose==="inside"&&!C||g._config.autoClose==="outside"&&C||g._menu.contains(n.target)&&(n.type==="keyup"&&n.key===oA||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;n.type==="click"&&(b.clickEvent=n)}g._completeHide(b)}}static getParentFromElement(n){return Vc(n)||n.parentNode}static dataApiKeydownHandler(n){if(/input|textarea/i.test(n.target.tagName)?n.key===rA||n.key!==k_&&(n.key!==L_&&n.key!==f0||n.target.closest(d0)):!t4.test(n.key))return;const a=this.classList.contains($f);if(!a&&n.key===k_||(n.preventDefault(),n.stopPropagation(),lh(this)))return;const h=this.matches(wp)?this:Gn.prev(this,wp)[0],m=zs.getOrCreateInstance(h);if(n.key===k_){m.hide();return}if(n.key===f0||n.key===L_){a||m.show(),m._selectMenuItem(n);return}(!a||n.key===rA)&&zs.clearMenus()}}Bt.on(document,aA,wp,zs.dataApiKeydownHandler);Bt.on(document,aA,d0,zs.dataApiKeydownHandler);Bt.on(document,sA,zs.clearMenus);Bt.on(document,s4,zs.clearMenus);Bt.on(document,sA,wp,function(t){t.preventDefault(),zs.getOrCreateInstance(this).toggle()});Rs(zs);const lA=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cA=".sticky-top";class p0{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",a=>a+n),this._setElementAttributes(lA,"paddingRight",a=>a+n),this._setElementAttributes(cA,"marginRight",a=>a-n)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,a,h){const m=this.getWidth(),g=b=>{if(b!==this._element&&window.innerWidth>b.clientWidth+m)return;this._saveInitialAttribute(b,a);const s=window.getComputedStyle(b)[a];b.style[a]=`${h(Number.parseFloat(s))}px`};this._applyManipulationCallback(n,g)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(lA,"paddingRight"),this._resetElementAttributes(cA,"marginRight")}_saveInitialAttribute(n,a){const h=n.style[a];h&&to.setDataAttribute(n,a,h)}_resetElementAttributes(n,a){const h=m=>{const g=to.getDataAttribute(m,a);typeof g=="undefined"?m.style.removeProperty(a):(to.removeDataAttribute(m,a),m.style[a]=g)};this._applyManipulationCallback(n,h)}_applyManipulationCallback(n,a){ah(n)?a(n):Gn.find(n,this._element).forEach(a)}isOverflowing(){return this.getWidth()>0}}const b4={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},w4={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},uA="backdrop",E4="fade",hA="show",fA=`mousedown.bs.${uA}`;class dA{constructor(n){this._config=this._getConfig(n),this._isAppended=!1,this._element=null}show(n){if(!this._config.isVisible){ch(n);return}this._append(),this._config.isAnimated&&Nf(this._getElement()),this._getElement().classList.add(hA),this._emulateAnimation(()=>{ch(n)})}hide(n){if(!this._config.isVisible){ch(n);return}this._getElement().classList.remove(hA),this._emulateAnimation(()=>{this.dispose(),ch(n)})}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(E4),this._element=n}return this._element}_getConfig(n){return n=en(en({},b4),typeof n=="object"?n:{}),n.rootElement=jc(n.rootElement),Ba(uA,n,w4),n}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),Bt.on(this._getElement(),fA,()=>{ch(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(Bt.off(this._element,fA),this._element.remove(),this._isAppended=!1)}_emulateAnimation(n){z2(n,this._getElement(),this._config.isAnimated)}}const T4={trapElement:null,autofocus:!0},A4={trapElement:"element",autofocus:"boolean"},S4="focustrap",C4="bs.focustrap",P_=`.${C4}`,I4=`focusin${P_}`,M4=`keydown.tab${P_}`,k4="Tab",L4="forward",pA="backward";class mA{constructor(n){this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:n,autofocus:a}=this._config;this._isActive||(a&&n.focus(),Bt.off(document,P_),Bt.on(document,I4,h=>this._handleFocusin(h)),Bt.on(document,M4,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Bt.off(document,P_))}_handleFocusin(n){const{target:a}=n,{trapElement:h}=this._config;if(a===document||a===h||h.contains(a))return;const m=Gn.focusableChildren(h);m.length===0?h.focus():this._lastTabNavDirection===pA?m[m.length-1].focus():m[0].focus()}_handleKeydown(n){n.key===k4&&(this._lastTabNavDirection=n.shiftKey?pA:L4)}_getConfig(n){return n=en(en({},T4),typeof n=="object"?n:{}),Ba(S4,n,A4),n}}const _A="modal",P4="bs.modal",Ns=`.${P4}`,O4=".data-api",gA="Escape",yA={backdrop:!0,keyboard:!0,focus:!0},D4={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},R4=`hide${Ns}`,z4=`hidePrevented${Ns}`,vA=`hidden${Ns}`,xA=`show${Ns}`,N4=`shown${Ns}`,bA=`resize${Ns}`,wA=`click.dismiss${Ns}`,EA=`keydown.dismiss${Ns}`,F4=`mouseup.dismiss${Ns}`,TA=`mousedown.dismiss${Ns}`,B4=`click${Ns}${O4}`,AA="modal-open",$4="fade",SA="show",m0="modal-static",U4=".modal.show",V4=".modal-dialog",j4=".modal-body",H4='[data-bs-toggle="modal"]';class Uf extends aa{constructor(n,a){super(n);this._config=this._getConfig(a),this._dialog=Gn.findOne(V4,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new p0}static get Default(){return yA}static get NAME(){return _A}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||Bt.trigger(this._element,xA,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(AA),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Bt.on(this._dialog,TA,()=>{Bt.one(this._element,F4,h=>{h.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(n)))}hide(){if(!this._isShown||this._isTransitioning||Bt.trigger(this._element,R4).defaultPrevented)return;this._isShown=!1;const a=this._isAnimated();a&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(SA),Bt.off(this._element,wA),Bt.off(this._dialog,TA),this._queueCallback(()=>this._hideModal(),this._element,a)}dispose(){[window,this._dialog].forEach(n=>Bt.off(n,Ns)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new dA({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new mA({trapElement:this._element})}_getConfig(n){return n=en(en(en({},yA),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Ba(_A,n,D4),n}_showElement(n){const a=this._isAnimated(),h=Gn.findOne(j4,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,h&&(h.scrollTop=0),a&&Nf(this._element),this._element.classList.add(SA);const m=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Bt.trigger(this._element,N4,{relatedTarget:n})};this._queueCallback(m,this._dialog,a)}_setEscapeEvent(){this._isShown?Bt.on(this._element,EA,n=>{this._config.keyboard&&n.key===gA?(n.preventDefault(),this.hide()):!this._config.keyboard&&n.key===gA&&this._triggerBackdropTransition()}):Bt.off(this._element,EA)}_setResizeEvent(){this._isShown?Bt.on(window,bA,()=>this._adjustDialog()):Bt.off(window,bA)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(AA),this._resetAdjustments(),this._scrollBar.reset(),Bt.trigger(this._element,vA)})}_showBackdrop(n){Bt.on(this._element,wA,a=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}a.target===a.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(n)}_isAnimated(){return this._element.classList.contains($4)}_triggerBackdropTransition(){if(Bt.trigger(this._element,z4).defaultPrevented)return;const{classList:a,scrollHeight:h,style:m}=this._element,g=h>document.documentElement.clientHeight;!g&&m.overflowY==="hidden"||a.contains(m0)||(g||(m.overflowY="hidden"),a.add(m0),this._queueCallback(()=>{a.remove(m0),g||this._queueCallback(()=>{m.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,a=this._scrollBar.getWidth(),h=a>0;(!h&&n&&!Qo()||h&&!n&&Qo())&&(this._element.style.paddingLeft=`${a}px`),(h&&!n&&!Qo()||!h&&n&&Qo())&&(this._element.style.paddingRight=`${a}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,a){return this.each(function(){const h=Uf.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof h[n]=="undefined")throw new TypeError(`No method named "${n}"`);h[n](a)}})}}Bt.on(document,B4,H4,function(t){const n=Vc(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bt.one(n,xA,m=>{m.defaultPrevented||Bt.one(n,vA,()=>{yp(this)&&this.focus()})});const a=Gn.findOne(U4);a&&Uf.getInstance(a).hide(),Uf.getOrCreateInstance(n).toggle(this)});A_(Uf);Rs(Uf);const CA="offcanvas",G4="bs.offcanvas",mh=`.${G4}`,IA=".data-api",W4=`load${mh}${IA}`,q4="Escape",MA={backdrop:!0,keyboard:!0,scroll:!1},Z4={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},kA="show",X4="offcanvas-backdrop",LA=".offcanvas.show",Y4=`show${mh}`,K4=`shown${mh}`,J4=`hide${mh}`,PA=`hidden${mh}`,Q4=`click${mh}${IA}`,eN=`keydown.dismiss${mh}`,tN='[data-bs-toggle="offcanvas"]';class _h extends aa{constructor(n,a){super(n);this._config=this._getConfig(a),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return CA}static get Default(){return MA}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||Bt.trigger(this._element,Y4,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new p0().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kA);const h=()=>{this._config.scroll||this._focustrap.activate(),Bt.trigger(this._element,K4,{relatedTarget:n})};this._queueCallback(h,this._element,!0)}hide(){if(!this._isShown||Bt.trigger(this._element,J4).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(kA),this._backdrop.hide();const a=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new p0().reset(),Bt.trigger(this._element,PA)};this._queueCallback(a,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(n){return n=en(en(en({},MA),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Ba(CA,n,Z4),n}_initializeBackDrop(){return new dA({className:X4,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new mA({trapElement:this._element})}_addEventListeners(){Bt.on(this._element,eN,n=>{this._config.keyboard&&n.key===q4&&this.hide()})}static jQueryInterface(n){return this.each(function(){const a=_h.getOrCreateInstance(this,n);if(typeof n=="string"){if(a[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);a[n](this)}})}}Bt.on(document,Q4,tN,function(t){const n=Vc(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),lh(this))return;Bt.one(n,PA,()=>{yp(this)&&this.focus()});const a=Gn.findOne(LA);a&&a!==n&&_h.getInstance(a).hide(),_h.getOrCreateInstance(n).toggle(this)});Bt.on(window,W4,()=>Gn.find(LA).forEach(t=>_h.getOrCreateInstance(t).show()));A_(_h);Rs(_h);const nN=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),iN=/^aria-[\w-]*$/i,rN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,oN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,sN=(t,n)=>{const a=t.nodeName.toLowerCase();if(n.includes(a))return nN.has(a)?Boolean(rN.test(t.nodeValue)||oN.test(t.nodeValue)):!0;const h=n.filter(m=>m instanceof RegExp);for(let m=0,g=h.length;m<g;m++)if(h[m].test(a))return!0;return!1},aN={"*":["class","dir","id","lang","role",iN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function OA(t,n,a){if(!t.length)return t;if(a&&typeof a=="function")return a(t);const m=new window.DOMParser().parseFromString(t,"text/html"),g=[].concat(...m.body.querySelectorAll("*"));for(let b=0,s=g.length;b<s;b++){const C=g[b],D=C.nodeName.toLowerCase();if(!Object.keys(n).includes(D)){C.remove();continue}const M=[].concat(...C.attributes),L=[].concat(n["*"]||[],n[D]||[]);M.forEach(F=>{sN(F,L)||C.removeAttribute(F.nodeName)})}return m.body.innerHTML}const DA="tooltip",lN="bs.tooltip",$a=`.${lN}`,cN="bs-tooltip",uN=new Set(["sanitize","allowList","sanitizeFn"]),hN={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},fN={AUTO:"auto",TOP:"top",RIGHT:Qo()?"left":"right",BOTTOM:"bottom",LEFT:Qo()?"right":"left"},dN={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:aN,popperConfig:null},pN={HIDE:`hide${$a}`,HIDDEN:`hidden${$a}`,SHOW:`show${$a}`,SHOWN:`shown${$a}`,INSERTED:`inserted${$a}`,CLICK:`click${$a}`,FOCUSIN:`focusin${$a}`,FOCUSOUT:`focusout${$a}`,MOUSEENTER:`mouseenter${$a}`,MOUSELEAVE:`mouseleave${$a}`},O_="fade",mN="modal",Ep="show",Tp="show",_0="out",RA=".tooltip-inner",zA=`.${mN}`,NA="hide.bs.modal",Ap="hover",g0="focus",_N="click",gN="manual";class Vf extends aa{constructor(n,a){if(typeof L2=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(n);this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(a),this.tip=null,this._setListeners()}static get Default(){return dN}static get NAME(){return DA}static get Event(){return pN}static get DefaultType(){return hN}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(n){if(!!this._isEnabled)if(n){const a=this._initializeOnDelegatedTarget(n);a._activeTrigger.click=!a._activeTrigger.click,a._isWithActiveTrigger()?a._enter(null,a):a._leave(null,a)}else{if(this.getTipElement().classList.contains(Ep)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),Bt.off(this._element.closest(zA),NA,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;const n=Bt.trigger(this._element,this.constructor.Event.SHOW),a=D2(this._element),h=a===null?this._element.ownerDocument.documentElement.contains(this._element):a.contains(this._element);if(n.defaultPrevented||!h)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(RA).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const m=this.getTipElement(),g=RR(this.constructor.NAME);m.setAttribute("id",g),this._element.setAttribute("aria-describedby",g),this._config.animation&&m.classList.add(O_);const b=typeof this._config.placement=="function"?this._config.placement.call(this,m,this._element):this._config.placement,s=this._getAttachment(b);this._addAttachmentClass(s);const{container:C}=this._config;vp.set(m,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(C.append(m),Bt.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=t0(this._element,m,this._getPopperConfig(s)),m.classList.add(Ep);const D=this._resolvePossibleFunction(this._config.customClass);D&&m.classList.add(...D.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(F=>{Bt.on(F,"mouseover",T_)});const M=()=>{const F=this._hoverState;this._hoverState=null,Bt.trigger(this._element,this.constructor.Event.SHOWN),F===_0&&this._leave(null,this)},L=this.tip.classList.contains(O_);this._queueCallback(M,this.tip,L)}hide(){if(!this._popper)return;const n=this.getTipElement(),a=()=>{this._isWithActiveTrigger()||(this._hoverState!==Tp&&n.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),Bt.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(Bt.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;n.classList.remove(Ep),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(g=>Bt.off(g,"mouseover",T_)),this._activeTrigger[_N]=!1,this._activeTrigger[g0]=!1,this._activeTrigger[Ap]=!1;const m=this.tip.classList.contains(O_);this._queueCallback(a,this.tip,m),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const n=document.createElement("div");n.innerHTML=this._config.template;const a=n.children[0];return this.setContent(a),a.classList.remove(O_,Ep),this.tip=a,this.tip}setContent(n){this._sanitizeAndSetContent(n,this.getTitle(),RA)}_sanitizeAndSetContent(n,a,h){const m=Gn.findOne(h,n);if(!a&&m){m.remove();return}this.setElementContent(m,a)}setElementContent(n,a){if(n!==null){if(ah(a)){a=jc(a),this._config.html?a.parentNode!==n&&(n.innerHTML="",n.append(a)):n.textContent=a.textContent;return}this._config.html?(this._config.sanitize&&(a=OA(a,this._config.allowList,this._config.sanitizeFn)),n.innerHTML=a):n.textContent=a}}getTitle(){const n=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(n)}updateAttachment(n){return n==="right"?"end":n==="left"?"start":n}_initializeOnDelegatedTarget(n,a){return a||this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(a=>Number.parseInt(a,10)):typeof n=="function"?a=>n(a,this._element):n}_resolvePossibleFunction(n){return typeof n=="function"?n.call(this._element):n}_getPopperConfig(n){const a={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:h=>this._handlePopperPlacementChange(h)}],onFirstUpdate:h=>{h.options.placement!==h.placement&&this._handlePopperPlacementChange(h)}};return en(en({},a),typeof this._config.popperConfig=="function"?this._config.popperConfig(a):this._config.popperConfig)}_addAttachmentClass(n){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(n)}`)}_getAttachment(n){return fN[n.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(a=>{if(a==="click")Bt.on(this._element,this.constructor.Event.CLICK,this._config.selector,h=>this.toggle(h));else if(a!==gN){const h=a===Ap?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,m=a===Ap?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;Bt.on(this._element,h,this._config.selector,g=>this._enter(g)),Bt.on(this._element,m,this._config.selector,g=>this._leave(g))}}),this._hideModalHandler=()=>{this._element&&this.hide()},Bt.on(this._element.closest(zA),NA,this._hideModalHandler),this._config.selector?this._config=Pu(en({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const n=this._element.getAttribute("title"),a=typeof this._element.getAttribute("data-bs-original-title");(n||a!=="string")&&(this._element.setAttribute("data-bs-original-title",n||""),n&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",n),this._element.setAttribute("title",""))}_enter(n,a){if(a=this._initializeOnDelegatedTarget(n,a),n&&(a._activeTrigger[n.type==="focusin"?g0:Ap]=!0),a.getTipElement().classList.contains(Ep)||a._hoverState===Tp){a._hoverState=Tp;return}if(clearTimeout(a._timeout),a._hoverState=Tp,!a._config.delay||!a._config.delay.show){a.show();return}a._timeout=setTimeout(()=>{a._hoverState===Tp&&a.show()},a._config.delay.show)}_leave(n,a){if(a=this._initializeOnDelegatedTarget(n,a),n&&(a._activeTrigger[n.type==="focusout"?g0:Ap]=a._element.contains(n.relatedTarget)),!a._isWithActiveTrigger()){if(clearTimeout(a._timeout),a._hoverState=_0,!a._config.delay||!a._config.delay.hide){a.hide();return}a._timeout=setTimeout(()=>{a._hoverState===_0&&a.hide()},a._config.delay.hide)}}_isWithActiveTrigger(){for(const n in this._activeTrigger)if(this._activeTrigger[n])return!0;return!1}_getConfig(n){const a=to.getDataAttributes(this._element);return Object.keys(a).forEach(h=>{uN.has(h)&&delete a[h]}),n=en(en(en({},this.constructor.Default),a),typeof n=="object"&&n?n:{}),n.container=n.container===!1?document.body:jc(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),Ba(DA,n,this.constructor.DefaultType),n.sanitize&&(n.template=OA(n.template,n.allowList,n.sanitizeFn)),n}_getDelegateConfig(){const n={};for(const a in this._config)this.constructor.Default[a]!==this._config[a]&&(n[a]=this._config[a]);return n}_cleanTipClass(){const n=this.getTipElement(),a=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),h=n.getAttribute("class").match(a);h!==null&&h.length>0&&h.map(m=>m.trim()).forEach(m=>n.classList.remove(m))}_getBasicClassPrefix(){return cN}_handlePopperPlacementChange(n){const{state:a}=n;!a||(this.tip=a.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(a.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(n){return this.each(function(){const a=Vf.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n]()}})}}Rs(Vf);const yN="popover",vN="bs.popover",Ua=`.${vN}`,xN="bs-popover",bN=Pu(en({},Vf.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),wN=Pu(en({},Vf.DefaultType),{content:"(string|element|function)"}),EN={HIDE:`hide${Ua}`,HIDDEN:`hidden${Ua}`,SHOW:`show${Ua}`,SHOWN:`shown${Ua}`,INSERTED:`inserted${Ua}`,CLICK:`click${Ua}`,FOCUSIN:`focusin${Ua}`,FOCUSOUT:`focusout${Ua}`,MOUSEENTER:`mouseenter${Ua}`,MOUSELEAVE:`mouseleave${Ua}`},TN=".popover-header",AN=".popover-body";class y0 extends Vf{static get Default(){return bN}static get NAME(){return yN}static get Event(){return EN}static get DefaultType(){return wN}isWithContent(){return this.getTitle()||this._getContent()}setContent(n){this._sanitizeAndSetContent(n,this.getTitle(),TN),this._sanitizeAndSetContent(n,this._getContent(),AN)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return xN}static jQueryInterface(n){return this.each(function(){const a=y0.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n]()}})}}Rs(y0);const FA="scrollspy",SN="bs.scrollspy",D_=`.${SN}`,CN=".data-api",BA={offset:10,method:"auto",target:""},IN={offset:"number",method:"string",target:"(string|element)"},MN=`activate${D_}`,kN=`scroll${D_}`,LN=`load${D_}${CN}`,$A="dropdown-item",jf="active",PN='[data-bs-spy="scroll"]',ON=".nav, .list-group",v0=".nav-link",DN=".nav-item",UA=".list-group-item",x0=`${v0}, ${UA}, .${$A}`,RN=".dropdown",zN=".dropdown-toggle",NN="offset",VA="position";class R_ extends aa{constructor(n,a){super(n);this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(a),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,Bt.on(this._scrollElement,kN,()=>this._process()),this.refresh(),this._process()}static get Default(){return BA}static get NAME(){return FA}refresh(){const n=this._scrollElement===this._scrollElement.window?NN:VA,a=this._config.method==="auto"?n:this._config.method,h=a===VA?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Gn.find(x0,this._config.target).map(g=>{const b=i0(g),s=b?Gn.findOne(b):null;if(s){const C=s.getBoundingClientRect();if(C.width||C.height)return[to[a](s).top+h,b]}return null}).filter(g=>g).sort((g,b)=>g[0]-b[0]).forEach(g=>{this._offsets.push(g[0]),this._targets.push(g[1])})}dispose(){Bt.off(this._scrollElement,D_),super.dispose()}_getConfig(n){return n=en(en(en({},BA),to.getDataAttributes(this._element)),typeof n=="object"&&n?n:{}),n.target=jc(n.target)||document.documentElement,Ba(FA,n,IN),n}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const n=this._getScrollTop()+this._config.offset,a=this._getScrollHeight(),h=this._config.offset+a-this._getOffsetHeight();if(this._scrollHeight!==a&&this.refresh(),n>=h){const m=this._targets[this._targets.length-1];this._activeTarget!==m&&this._activate(m);return}if(this._activeTarget&&n<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let m=this._offsets.length;m--;)this._activeTarget!==this._targets[m]&&n>=this._offsets[m]&&(typeof this._offsets[m+1]=="undefined"||n<this._offsets[m+1])&&this._activate(this._targets[m])}_activate(n){this._activeTarget=n,this._clear();const a=x0.split(",").map(m=>`${m}[data-bs-target="${n}"],${m}[href="${n}"]`),h=Gn.findOne(a.join(","),this._config.target);h.classList.add(jf),h.classList.contains($A)?Gn.findOne(zN,h.closest(RN)).classList.add(jf):Gn.parents(h,ON).forEach(m=>{Gn.prev(m,`${v0}, ${UA}`).forEach(g=>g.classList.add(jf)),Gn.prev(m,DN).forEach(g=>{Gn.children(g,v0).forEach(b=>b.classList.add(jf))})}),Bt.trigger(this._scrollElement,MN,{relatedTarget:n})}_clear(){Gn.find(x0,this._config.target).filter(n=>n.classList.contains(jf)).forEach(n=>n.classList.remove(jf))}static jQueryInterface(n){return this.each(function(){const a=R_.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n]()}})}}Bt.on(window,LN,()=>{Gn.find(PN).forEach(t=>new R_(t))});Rs(R_);const FN="tab",BN="bs.tab",Sp=`.${BN}`,$N=".data-api",UN=`hide${Sp}`,VN=`hidden${Sp}`,jN=`show${Sp}`,HN=`shown${Sp}`,GN=`click${Sp}${$N}`,WN="dropdown-menu",Cp="active",jA="fade",HA="show",qN=".dropdown",ZN=".nav, .list-group",GA=".active",WA=":scope > li > .active",XN='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',YN=".dropdown-toggle",KN=":scope > .dropdown-menu .active";class z_ extends aa{static get NAME(){return FN}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Cp))return;let n;const a=Vc(this._element),h=this._element.closest(ZN);if(h){const s=h.nodeName==="UL"||h.nodeName==="OL"?WA:GA;n=Gn.find(s,h),n=n[n.length-1]}const m=n?Bt.trigger(n,UN,{relatedTarget:this._element}):null;if(Bt.trigger(this._element,jN,{relatedTarget:n}).defaultPrevented||m!==null&&m.defaultPrevented)return;this._activate(this._element,h);const b=()=>{Bt.trigger(n,VN,{relatedTarget:this._element}),Bt.trigger(this._element,HN,{relatedTarget:n})};a?this._activate(a,a.parentNode,b):b()}_activate(n,a,h){const g=(a&&(a.nodeName==="UL"||a.nodeName==="OL")?Gn.find(WA,a):Gn.children(a,GA))[0],b=h&&g&&g.classList.contains(jA),s=()=>this._transitionComplete(n,g,h);g&&b?(g.classList.remove(HA),this._queueCallback(s,n,!0)):s()}_transitionComplete(n,a,h){if(a){a.classList.remove(Cp);const g=Gn.findOne(KN,a.parentNode);g&&g.classList.remove(Cp),a.getAttribute("role")==="tab"&&a.setAttribute("aria-selected",!1)}n.classList.add(Cp),n.getAttribute("role")==="tab"&&n.setAttribute("aria-selected",!0),Nf(n),n.classList.contains(jA)&&n.classList.add(HA);let m=n.parentNode;if(m&&m.nodeName==="LI"&&(m=m.parentNode),m&&m.classList.contains(WN)){const g=n.closest(qN);g&&Gn.find(YN,g).forEach(b=>b.classList.add(Cp)),n.setAttribute("aria-expanded",!0)}h&&h()}static jQueryInterface(n){return this.each(function(){const a=z_.getOrCreateInstance(this);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n]()}})}}Bt.on(document,GN,XN,function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),lh(this))return;z_.getOrCreateInstance(this).show()});Rs(z_);const qA="toast",JN="bs.toast",Gc=`.${JN}`,QN=`mouseover${Gc}`,e5=`mouseout${Gc}`,t5=`focusin${Gc}`,n5=`focusout${Gc}`,i5=`hide${Gc}`,r5=`hidden${Gc}`,o5=`show${Gc}`,s5=`shown${Gc}`,a5="fade",ZA="hide",Ip="show",N_="showing",l5={animation:"boolean",autohide:"boolean",delay:"number"},XA={animation:!0,autohide:!0,delay:5e3};class F_ extends aa{constructor(n,a){super(n);this._config=this._getConfig(a),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return l5}static get Default(){return XA}static get NAME(){return qA}show(){if(Bt.trigger(this._element,o5).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(a5);const a=()=>{this._element.classList.remove(N_),Bt.trigger(this._element,s5),this._maybeScheduleHide()};this._element.classList.remove(ZA),Nf(this._element),this._element.classList.add(Ip),this._element.classList.add(N_),this._queueCallback(a,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(Ip)||Bt.trigger(this._element,i5).defaultPrevented)return;const a=()=>{this._element.classList.add(ZA),this._element.classList.remove(N_),this._element.classList.remove(Ip),Bt.trigger(this._element,r5)};this._element.classList.add(N_),this._queueCallback(a,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(Ip)&&this._element.classList.remove(Ip),super.dispose()}_getConfig(n){return n=en(en(en({},XA),to.getDataAttributes(this._element)),typeof n=="object"&&n?n:{}),Ba(qA,n,this.constructor.DefaultType),n}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(n,a){switch(n.type){case"mouseover":case"mouseout":this._hasMouseInteraction=a;break;case"focusin":case"focusout":this._hasKeyboardInteraction=a;break}if(a){this._clearTimeout();return}const h=n.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){Bt.on(this._element,QN,n=>this._onInteraction(n,!0)),Bt.on(this._element,e5,n=>this._onInteraction(n,!1)),Bt.on(this._element,t5,n=>this._onInteraction(n,!0)),Bt.on(this._element,n5,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const a=F_.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof a[n]=="undefined")throw new TypeError(`No method named "${n}"`);a[n](this)}})}}A_(F_);Rs(F_);var Fs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function c5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u5(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(a){var h=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,h.get?h:{enumerable:!0,get:function(){return t[a]}})}),n}var YA={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){var a="__v-click-outside",h=typeof window!="undefined",m=typeof navigator!="undefined",g=h&&("ontouchstart"in window||m&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],b=function(M){var L=M.event,F=M.handler;(0,M.middleware)(L)&&F(L)},s=function(M,L){var F=function(Q){var _e=typeof Q=="function";if(!_e&&typeof Q!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:_e?Q:Q.handler,middleware:Q.middleware||function(Ce){return Ce},events:Q.events||g,isActive:Q.isActive!==!1,detectIframe:Q.detectIframe!==!1,capture:Boolean(Q.capture)}}(L.value),Y=F.handler,Te=F.middleware,ue=F.detectIframe,K=F.capture;if(F.isActive){if(M[a]=F.events.map(function(Q){return{event:Q,srcTarget:document.documentElement,handler:function(_e){return function(Ce){var Ae=Ce.el,Le=Ce.event,$e=Ce.handler,pt=Ce.middleware,Xe=Le.path||Le.composedPath&&Le.composedPath();(Xe?Xe.indexOf(Ae)<0:!Ae.contains(Le.target))&&b({event:Le,handler:$e,middleware:pt})}({el:M,event:_e,handler:Y,middleware:Te})},capture:K}}),ue){var G={event:"blur",srcTarget:window,handler:function(Q){return function(_e){var Ce=_e.el,Ae=_e.event,Le=_e.handler,$e=_e.middleware;setTimeout(function(){var pt=document.activeElement;pt&&pt.tagName==="IFRAME"&&!Ce.contains(pt)&&b({event:Ae,handler:Le,middleware:$e})},0)}({el:M,event:Q,handler:Y,middleware:Te})},capture:K};M[a]=[].concat(M[a],[G])}M[a].forEach(function(Q){var _e=Q.event,Ce=Q.srcTarget,Ae=Q.handler;return setTimeout(function(){M[a]&&Ce.addEventListener(_e,Ae,K)},0)})}},C=function(M){(M[a]||[]).forEach(function(L){return L.srcTarget.removeEventListener(L.event,L.handler,L.capture)}),delete M[a]},D=h?{beforeMount:s,updated:function(M,L){var F=L.value,Y=L.oldValue;JSON.stringify(F)!==JSON.stringify(Y)&&(C(M),s(M,{value:F}))},unmounted:C}:{};return{install:function(M){M.directive("click-outside",D)},directive:D}})})(YA);var J8=YA.exports,KA={exports:{}};(function(t){(function(n){var a=":not(:disabled):not(.ajs-reset)",h={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39,TAB:9},m={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+a].join(a+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},g=[];function b(ve,Ye){ve.className+=" "+Ye}function s(ve,Ye){for(var Be=ve.className.split(" "),Pe=Ye.split(" "),xe=0;xe<Pe.length;xe+=1){var je=Be.indexOf(Pe[xe]);je>-1&&Be.splice(je,1)}ve.className=Be.join(" ")}function C(){return n.getComputedStyle(document.body).direction==="rtl"}function D(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function M(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function L(ve){for(;ve.lastChild;)ve.removeChild(ve.lastChild)}function F(ve){if(ve===null)return ve;var Ye;if(Array.isArray(ve)){Ye=[];for(var Be=0;Be<ve.length;Be+=1)Ye.push(F(ve[Be]));return Ye}if(ve instanceof Date)return new Date(ve.getTime());if(ve instanceof RegExp)return Ye=new RegExp(ve.source),Ye.global=ve.global,Ye.ignoreCase=ve.ignoreCase,Ye.multiline=ve.multiline,Ye.lastIndex=ve.lastIndex,Ye;if(typeof ve=="object"){Ye={};for(var Pe in ve)ve.hasOwnProperty(Pe)&&(Ye[Pe]=F(ve[Pe]));return Ye}return ve}function Y(ve,Ye){if(ve.elements){var Be=ve.elements.root;Be.parentNode.removeChild(Be),delete ve.elements,ve.settings=F(ve.__settings),ve.__init=Ye,delete ve.__internal}}var Te=!1;try{var ue=Object.defineProperty({},"passive",{get:function(){Te=!0}});n.addEventListener("test",ue,ue),n.removeEventListener("test",ue,ue)}catch{}var K=function(ve,Ye,Be,Pe,xe){ve.addEventListener(Ye,Be,Te?{capture:Pe,passive:xe}:Pe===!0)},G=function(ve,Ye,Be,Pe,xe){ve.removeEventListener(Ye,Be,Te?{capture:Pe,passive:xe}:Pe===!0)},Q=function(){var ve,Ye,Be=!1,Pe={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(ve in Pe)if(document.documentElement.style[ve]!==void 0){Ye=Pe[ve],Be=!0;break}return{type:Ye,supported:Be}}();function _e(ve,Ye){return function(){if(arguments.length>0){for(var Be=[],Pe=0;Pe<arguments.length;Pe+=1)Be.push(arguments[Pe]);return Be.push(ve),Ye.apply(ve,Be)}return Ye.apply(ve,[null,ve])}}function Ce(ve,Ye){return{index:ve,button:Ye,cancel:!1}}function Ae(ve,Ye){if(typeof Ye.get(ve)=="function")return Ye.get(ve).call(Ye)}var Le=function(){var ve=[],Ye=!1,Be=n.navigator.userAgent.indexOf("Safari")>-1&&n.navigator.userAgent.indexOf("Chrome")<0,Pe={dimmer:'<div class="ajs-dimmer"></div>',modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},xe={animationIn:"ajs-in",animationOut:"ajs-out",base:"alertify",basic:"ajs-basic",capture:"ajs-capture",closable:"ajs-closable",fixed:"ajs-fixed",frameless:"ajs-frameless",hidden:"ajs-hidden",maximize:"ajs-maximize",maximized:"ajs-maximized",maximizable:"ajs-maximizable",modeless:"ajs-modeless",movable:"ajs-movable",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",pin:"ajs-pin",pinnable:"ajs-pinnable",prefix:"ajs-",resizable:"ajs-resizable",restore:"ajs-restore",shake:"ajs-shake",unpinned:"ajs-unpinned",noTransition:"ajs-no-transition"};function je(H){if(!H.__internal){Xe.defaults.hooks.preinit(H),delete H.__init,H.__settings||(H.__settings=F(H.settings));var Re;typeof H.setup=="function"?(Re=H.setup(),Re.options=Re.options||{},Re.focus=Re.focus||{}):Re={buttons:[],focus:{element:null,select:!1},options:{}},typeof H.hooks!="object"&&(H.hooks={});var It=[];if(Array.isArray(Re.buttons))for(var _t=0;_t<Re.buttons.length;_t+=1){var vn=Re.buttons[_t],on={};for(var ai in vn)vn.hasOwnProperty(ai)&&(on[ai]=vn[ai]);It.push(on)}var Hn=H.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:It,focus:Re.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},Xt={};Xt.root=document.createElement("div"),Xt.root.style.display="none",Xt.root.className=xe.base+" "+xe.hidden+" ",Xt.root.innerHTML=Pe.dimmer+Pe.modal,Xt.dimmer=Xt.root.firstChild,Xt.modal=Xt.root.lastChild,Xt.modal.innerHTML=Pe.dialog,Xt.dialog=Xt.modal.firstChild,Xt.dialog.innerHTML=Pe.reset+Pe.commands+Pe.header+Pe.body+Pe.footer+Pe.resizeHandle+Pe.reset,Xt.reset=[],Xt.reset.push(Xt.dialog.firstChild),Xt.reset.push(Xt.dialog.lastChild),Xt.commands={},Xt.commands.container=Xt.reset[0].nextSibling,Xt.commands.pin=Xt.commands.container.firstChild,Xt.commands.maximize=Xt.commands.pin.nextSibling,Xt.commands.close=Xt.commands.maximize.nextSibling,Xt.header=Xt.commands.container.nextSibling,Xt.body=Xt.header.nextSibling,Xt.body.innerHTML=Pe.content,Xt.content=Xt.body.firstChild,Xt.footer=Xt.body.nextSibling,Xt.footer.innerHTML=Pe.buttons.auxiliary+Pe.buttons.primary,Xt.resizeHandle=Xt.footer.nextSibling,Xt.buttons={},Xt.buttons.auxiliary=Xt.footer.firstChild,Xt.buttons.primary=Xt.buttons.auxiliary.nextSibling,Xt.buttons.primary.innerHTML=Pe.button,Xt.buttonTemplate=Xt.buttons.primary.firstChild,Xt.buttons.primary.removeChild(Xt.buttonTemplate);for(var cr=0;cr<H.__internal.buttons.length;cr+=1){var Di=H.__internal.buttons[cr];ve.indexOf(Di.key)<0&&ve.push(Di.key),Di.element=Xt.buttonTemplate.cloneNode(),Di.element.innerHTML=Di.text,typeof Di.className=="string"&&Di.className!==""&&b(Di.element,Di.className);for(var Do in Di.attrs)Do!=="className"&&Di.attrs.hasOwnProperty(Do)&&Di.element.setAttribute(Do,Di.attrs[Do]);Di.scope==="auxiliary"?Xt.buttons.auxiliary.appendChild(Di.element):Xt.buttons.primary.appendChild(Di.element)}H.elements=Xt,Hn.resetHandler=_e(H,Ti),Hn.beginMoveHandler=_e(H,j),Hn.beginResizeHandler=_e(H,un),Hn.bringToFrontHandler=_e(H,sn),Hn.modalClickHandler=_e(H,bn),Hn.buttonsClickHandler=_e(H,si),Hn.commandsClickHandler=_e(H,ot),Hn.transitionInHandler=_e(H,gi),Hn.transitionOutHandler=_e(H,Cr);for(var Nn in Hn.options)Re.options[Nn]!==void 0?H.set(Nn,Re.options[Nn]):Xe.defaults.hasOwnProperty(Nn)?H.set(Nn,Xe.defaults[Nn]):Nn==="title"&&H.set(Nn,Xe.defaults.glossary[Nn]);typeof H.build=="function"&&H.build(),Xe.defaults.hooks.postinit(H)}document.body.appendChild(H.elements.root)}var lt,Qe;function ht(){lt=M(),Qe=D()}function ct(){n.scrollTo(lt,Qe)}function Ut(){for(var H=0,Re=0;Re<g.length;Re+=1){var It=g[Re];(It.isModal()||It.isMaximized())&&(H+=1)}H===0&&document.body.className.indexOf(xe.noOverflow)>=0?(s(document.body,xe.noOverflow),Ht(!1)):H>0&&document.body.className.indexOf(xe.noOverflow)<0&&(Ht(!0),b(document.body,xe.noOverflow))}var Ke="",hn=0;function Ht(H){Xe.defaults.preventBodyShift&&(H&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(hn=Qe,Ke=n.getComputedStyle(document.body).top,b(document.body,xe.fixed),document.body.style.top=-Qe+"px"):H||(Qe=hn,document.body.style.top=Ke,s(document.body,xe.fixed),ct()))}function dn(H,Re,It){typeof It=="string"&&s(H.elements.root,xe.prefix+It),b(H.elements.root,xe.prefix+Re),H.elements.root.offsetWidth}function Ue(H){H.get("transitionOff")?b(H.elements.root,xe.noTransition):s(H.elements.root,xe.noTransition)}function wt(H){H.get("modal")?(s(H.elements.root,xe.modeless),H.isOpen()&&(Oo(H),Ct(H),Ut())):(b(H.elements.root,xe.modeless),H.isOpen()&&(zn(H),Ct(H),Ut()))}function kt(H){H.get("basic")?b(H.elements.root,xe.basic):s(H.elements.root,xe.basic)}function Et(H){H.get("frameless")?b(H.elements.root,xe.frameless):s(H.elements.root,xe.frameless)}function sn(H,Re){for(var It=g.indexOf(Re),_t=It+1;_t<g.length;_t+=1)if(g[_t].isModal())return;return document.body.lastChild!==Re.elements.root&&(document.body.appendChild(Re.elements.root),g.splice(g.indexOf(Re),1),g.push(Re),xr(Re)),!1}function En(H,Re,It,_t){switch(Re){case"title":H.setHeader(_t);break;case"modal":wt(H);break;case"basic":kt(H);break;case"frameless":Et(H);break;case"pinned":vt(H);break;case"closable":et(H);break;case"maximizable":Me(H);break;case"pinnable":mt(H);break;case"movable":Ve(H);break;case"resizable":He(H);break;case"padding":_t?s(H.elements.root,xe.noPadding):H.elements.root.className.indexOf(xe.noPadding)<0&&b(H.elements.root,xe.noPadding);break;case"overflow":_t?s(H.elements.root,xe.noOverflow):H.elements.root.className.indexOf(xe.noOverflow)<0&&b(H.elements.root,xe.noOverflow);break;case"transition":dn(H,_t,It);break;case"transitionOff":Ue(H);break}typeof H.hooks.onupdate=="function"&&H.hooks.onupdate.call(H,Re,It,_t)}function me(H,Re,It,_t,vn){var on={op:void 0,items:[]};if(typeof vn=="undefined"&&typeof _t=="string")on.op="get",Re.hasOwnProperty(_t)?(on.found=!0,on.value=Re[_t]):(on.found=!1,on.value=void 0);else{var ai;if(on.op="set",typeof _t=="object"){var Hn=_t;for(var Xt in Hn)Re.hasOwnProperty(Xt)?(Re[Xt]!==Hn[Xt]&&(ai=Re[Xt],Re[Xt]=Hn[Xt],It.call(H,Xt,ai,Hn[Xt])),on.items.push({key:Xt,value:Hn[Xt],found:!0})):on.items.push({key:Xt,value:Hn[Xt],found:!1})}else if(typeof _t=="string")Re.hasOwnProperty(_t)?(Re[_t]!==vn&&(ai=Re[_t],Re[_t]=vn,It.call(H,_t,ai,vn)),on.items.push({key:_t,value:vn,found:!0})):on.items.push({key:_t,value:vn,found:!1});else throw new Error("args must be a string or object")}return on}function oe(H){var Re;Sn(H,function(It){return Re=H.get("invokeOnCloseOff")!==!0&&It.invokeOnClose===!0}),!Re&&H.isOpen()&&H.close()}function ot(H,Re){var It=H.srcElement||H.target;switch(It){case Re.elements.commands.pin:Re.isPinned()?ge(Re):te(Re);break;case Re.elements.commands.maximize:Re.isMaximized()?Je(Re):Ze(Re);break;case Re.elements.commands.close:oe(Re);break}return!1}function te(H){H.set("pinned",!0)}function ge(H){H.set("pinned",!1)}function Ze(H){Ae("onmaximize",H),b(H.elements.root,xe.maximized),H.isOpen()&&Ut(),Ae("onmaximized",H)}function Je(H){Ae("onrestore",H),s(H.elements.root,xe.maximized),H.isOpen()&&Ut(),Ae("onrestored",H)}function mt(H){H.get("pinnable")?b(H.elements.root,xe.pinnable):s(H.elements.root,xe.pinnable)}function St(H){var Re=M();H.elements.modal.style.marginTop=D()+"px",H.elements.modal.style.marginLeft=Re+"px",H.elements.modal.style.marginRight=-Re+"px"}function Vt(H){var Re=parseInt(H.elements.modal.style.marginTop,10),It=parseInt(H.elements.modal.style.marginLeft,10);if(H.elements.modal.style.marginTop="",H.elements.modal.style.marginLeft="",H.elements.modal.style.marginRight="",H.isOpen()){var _t=0,vn=0;H.elements.dialog.style.top!==""&&(_t=parseInt(H.elements.dialog.style.top,10)),H.elements.dialog.style.top=_t+(Re-D())+"px",H.elements.dialog.style.left!==""&&(vn=parseInt(H.elements.dialog.style.left,10)),H.elements.dialog.style.left=vn+(It-M())+"px"}}function Ct(H){!H.get("modal")&&!H.get("pinned")?St(H):Vt(H)}function vt(H){H.get("pinned")?(s(H.elements.root,xe.unpinned),H.isOpen()&&Vt(H)):(b(H.elements.root,xe.unpinned),H.isOpen()&&!H.isModal()&&St(H))}function Me(H){H.get("maximizable")?b(H.elements.root,xe.maximizable):s(H.elements.root,xe.maximizable)}function et(H){H.get("closable")?(b(H.elements.root,xe.closable),Dr(H)):(s(H.elements.root,xe.closable),br(H))}var jt=!1,Zt=0;function bn(H,Re){if(H.timeStamp-Zt>200&&(Zt=H.timeStamp)&&!jt){var It=H.srcElement||H.target;Re.get("closableByDimmer")===!0&&It===Re.elements.modal&&oe(Re)}jt=!1}var Tn=0,An=!1;function Sn(H,Re){if(Date.now()-Tn>200&&(Tn=Date.now()))for(var It=0;It<H.__internal.buttons.length;It+=1){var _t=H.__internal.buttons[It];if(!_t.element.disabled&&Re(_t)){var vn=Ce(It,_t);typeof H.callback=="function"&&H.callback.apply(H,[vn]),vn.cancel===!1&&H.close();break}}}function si(H,Re){var It=H.srcElement||H.target;Sn(Re,function(_t){return _t.element===It&&(An=!0)})}function Ci(H){if(An){An=!1;return}var Re=g[g.length-1],It=H.keyCode;if(Re.__internal.buttons.length===0&&It===h.ESC&&Re.get("closable")===!0)return oe(Re),!1;if(ve.indexOf(It)>-1)return Sn(Re,function(_t){return _t.key===It}),!1}function lr(H){var Re=g[g.length-1],It=H.keyCode;if(It===h.LEFT||It===h.RIGHT){for(var _t=Re.__internal.buttons,vn=0;vn<_t.length;vn+=1)if(document.activeElement===_t[vn].element)switch(It){case h.LEFT:_t[(vn||_t.length)-1].element.focus();return;case h.RIGHT:_t[(vn+1)%_t.length].element.focus();return}}else if(It<h.F12+1&&It>h.F1-1&&ve.indexOf(It)>-1)return H.preventDefault(),H.stopPropagation(),Sn(Re,function(on){return on.key===It}),!1}function xr(H,Re){if(Re)Re.focus();else{var It=H.__internal.focus,_t=It.element;switch(typeof It.element){case"number":H.__internal.buttons.length>It.element&&(H.get("basic")===!0?_t=H.elements.reset[0]:_t=H.__internal.buttons[It.element].element);break;case"string":_t=H.elements.body.querySelector(It.element);break;case"function":_t=It.element.call(H);break}(H.get("defaultFocusOff")===!0||(typeof _t=="undefined"||_t===null)&&H.__internal.buttons.length===0)&&(_t=H.elements.reset[0]),_t&&_t.focus&&(_t.focus(),It.select&&_t.select&&_t.select())}}function Ti(H,Re){if(!Re){for(var It=g.length-1;It>-1;It-=1)if(g[It].isModal()){Re=g[It];break}}if(Re&&Re.isModal()){var _t=Re.elements.reset[0],vn=Re.elements.reset[1],on=H.relatedTarget,ai=Re.elements.root.contains(on),Hn=H.srcElement||H.target,Xt;if(Hn===_t&&!ai||Hn===vn&&on===_t)return;Hn===vn||Hn===document.body?Xt=_t:Hn===_t&&on===vn?Xt=Ui(Re):Hn===_t&&ai&&(Xt=Ui(Re,!0)),xr(Re,Xt)}}function Ui(H,Re){var It=[].slice.call(H.elements.dialog.querySelectorAll(m.tabbable));Re&&It.reverse();for(var _t=0;_t<It.length;_t+=1){var vn=It[_t];if(vn.offsetParent||vn.offsetWidth||vn.offsetHeight||vn.getClientRects().length)return vn}}function ti(H){var Re=g[g.length-1];Re&&H.shiftKey&&H.keyCode===h.TAB&&Re.elements.reset[1].focus()}function gi(H,Re){clearTimeout(Re.__internal.timerIn),xr(Re),An=!1,Ae("onfocus",Re),G(Re.elements.dialog,Q.type,Re.__internal.transitionInHandler),s(Re.elements.root,xe.animationIn)}function Cr(H,Re){clearTimeout(Re.__internal.timerOut),G(Re.elements.dialog,Q.type,Re.__internal.transitionOutHandler),Se(Re),gn(Re),Re.isMaximized()&&!Re.get("startMaximized")&&Je(Re),typeof Re.__internal.destroy=="function"&&Re.__internal.destroy.apply(Re)}var yr=null,qi=0,tr=0,Gr="pageX",Or="pageY",Ji=null,go=!1,Wr=null;function se(H,Re){var It=H[Gr]-qi,_t=H[Or]-tr;go&&(_t-=document.body.scrollTop),Re.style.left=It+"px",Re.style.top=_t+"px"}function $(H,Re){var It=H[Gr]-qi,_t=H[Or]-tr;go&&(_t-=document.body.scrollTop),Re.style.left=Math.min(Ji.maxLeft,Math.max(Ji.minLeft,It))+"px",go?Re.style.top=Math.min(Ji.maxTop,Math.max(Ji.minTop,_t))+"px":Re.style.top=Math.max(Ji.minTop,_t)+"px"}function j(H,Re){if(Fe===null&&!Re.isMaximized()&&Re.get("movable")){var It,_t=0,vn=0;if(H.type==="touchstart"?(H.preventDefault(),It=H.targetTouches[0],Gr="clientX",Or="clientY"):H.button===0&&(It=H),It){var on=Re.elements.dialog;if(b(on,xe.capture),on.style.left&&(_t=parseInt(on.style.left,10)),on.style.top&&(vn=parseInt(on.style.top,10)),qi=It[Gr]-_t,tr=It[Or]-vn,Re.isModal()?tr+=Re.elements.modal.scrollTop:Re.isPinned()&&(tr-=document.body.scrollTop),Re.get("moveBounded")){var ai=on,Hn=-_t,Xt=-vn;do Hn+=ai.offsetLeft,Xt+=ai.offsetTop;while(ai=ai.offsetParent);Ji={maxLeft:Hn,minLeft:-Hn,maxTop:document.documentElement.clientHeight-on.clientHeight-Xt,minTop:-Xt},Wr=$}else Ji=null,Wr=se;return Ae("onmove",Re),go=!Re.isModal()&&Re.isPinned(),yr=Re,Wr(It,on),b(document.body,xe.noSelection),!1}}}function re(H){if(yr){var Re;H.type==="touchmove"?(H.preventDefault(),Re=H.targetTouches[0]):H.button===0&&(Re=H),Re&&Wr(Re,yr.elements.dialog)}}function pe(){if(yr){var H=yr;yr=Ji=null,s(document.body,xe.noSelection),s(H.elements.dialog,xe.capture),Ae("onmoved",H)}}function Se(H){yr=null;var Re=H.elements.dialog;Re.style.left=Re.style.top=""}function Ve(H){H.get("movable")?(b(H.elements.root,xe.movable),H.isOpen()&&nr(H)):(Se(H),s(H.elements.root,xe.movable),H.isOpen()&&Rt(H))}var Fe=null,Ie=Number.Nan,Ge=0,gt=0,Pt=0;function yt(H,Re,It){var _t=Re,vn=0,on=0;do vn+=_t.offsetLeft,on+=_t.offsetTop;while(_t=_t.offsetParent);var ai,Hn;It===!0?(ai=H.pageX,Hn=H.pageY):(ai=H.clientX,Hn=H.clientY);var Xt=C();if(Xt&&(ai=document.body.offsetWidth-ai,isNaN(Ie)||(vn=document.body.offsetWidth-vn-Re.offsetWidth)),Re.style.height=Hn-on+Pt+"px",Re.style.width=ai-vn+Pt+"px",!isNaN(Ie)){var cr=Math.abs(Re.offsetWidth-Ge)*.5;Xt&&(cr*=-1),Re.offsetWidth>Ge?Re.style.left=Ie+cr+"px":Re.offsetWidth>=gt&&(Re.style.left=Ie-cr+"px")}}function un(H,Re){if(!Re.isMaximized()){var It;if(H.type==="touchstart"?(H.preventDefault(),It=H.targetTouches[0]):H.button===0&&(It=H),It){Ae("onresize",Re),Fe=Re,Pt=Re.elements.resizeHandle.offsetHeight/2;var _t=Re.elements.dialog;return b(_t,xe.capture),Ie=parseInt(_t.style.left,10),_t.style.height=_t.offsetHeight+"px",_t.style.minHeight=Re.elements.header.offsetHeight+Re.elements.footer.offsetHeight+"px",_t.style.width=(Ge=_t.offsetWidth)+"px",_t.style.maxWidth!=="none"&&(_t.style.minWidth=(gt=_t.offsetWidth)+"px"),_t.style.maxWidth="none",b(document.body,xe.noSelection),!1}}}function Yt(H){if(Fe){var Re;H.type==="touchmove"?(H.preventDefault(),Re=H.targetTouches[0]):H.button===0&&(Re=H),Re&&yt(Re,Fe.elements.dialog,!Fe.get("modal")&&!Fe.get("pinned"))}}function an(){if(Fe){var H=Fe;Fe=null,s(document.body,xe.noSelection),s(H.elements.dialog,xe.capture),jt=!0,Ae("onresized",H)}}function gn(H){Fe=null;var Re=H.elements.dialog;Re.style.maxWidth==="none"&&(Re.style.maxWidth=Re.style.minWidth=Re.style.width=Re.style.height=Re.style.minHeight=Re.style.left="",Ie=Number.Nan,Ge=gt=Pt=0)}function He(H){H.get("resizable")?(b(H.elements.root,xe.resizable),H.isOpen()&&Vn(H)):(gn(H),s(H.elements.root,xe.resizable),H.isOpen()&&Ln(H))}function jn(){for(var H=0;H<g.length;H+=1){var Re=g[H];Re.get("autoReset")&&(Se(Re),gn(Re))}}function Jt(H){g.length===1&&(K(n,"resize",jn),K(document.body,"keyup",Ci),K(document.body,"keydown",lr),K(document.body,"focus",Ti),K(document.documentElement,"mousemove",re),K(document.documentElement,"touchmove",re,!1,!1),K(document.documentElement,"mouseup",pe),K(document.documentElement,"touchend",pe),K(document.documentElement,"mousemove",Yt),K(document.documentElement,"touchmove",Yt,!1,!1),K(document.documentElement,"mouseup",an),K(document.documentElement,"touchend",an)),K(H.elements.commands.container,"click",H.__internal.commandsClickHandler),K(H.elements.footer,"click",H.__internal.buttonsClickHandler),K(H.elements.reset[0],"focusin",H.__internal.resetHandler),K(H.elements.reset[0],"keydown",ti),K(H.elements.reset[1],"focusin",H.__internal.resetHandler),An=!0,K(H.elements.dialog,Q.type,H.__internal.transitionInHandler),H.get("modal")||zn(H),H.get("resizable")&&Vn(H),H.get("movable")&&nr(H)}function Yn(H){g.length===1&&(G(n,"resize",jn),G(document.body,"keyup",Ci),G(document.body,"keydown",lr),G(document.body,"focus",Ti),G(document.documentElement,"mousemove",re),G(document.documentElement,"mouseup",pe),G(document.documentElement,"mousemove",Yt),G(document.documentElement,"mouseup",an)),G(H.elements.commands.container,"click",H.__internal.commandsClickHandler),G(H.elements.footer,"click",H.__internal.buttonsClickHandler),G(H.elements.reset[0],"focusin",H.__internal.resetHandler),G(H.elements.reset[0],"keydown",ti),G(H.elements.reset[1],"focusin",H.__internal.resetHandler),K(H.elements.dialog,Q.type,H.__internal.transitionOutHandler),H.get("modal")||Oo(H),H.get("movable")&&Rt(H),H.get("resizable")&&Ln(H)}function zn(H){K(H.elements.dialog,"focus",H.__internal.bringToFrontHandler,!0)}function Oo(H){G(H.elements.dialog,"focus",H.__internal.bringToFrontHandler,!0)}function nr(H){K(H.elements.header,"mousedown",H.__internal.beginMoveHandler),K(H.elements.header,"touchstart",H.__internal.beginMoveHandler,!1,!1)}function Rt(H){G(H.elements.header,"mousedown",H.__internal.beginMoveHandler),G(H.elements.header,"touchstart",H.__internal.beginMoveHandler,!1,!1)}function Vn(H){K(H.elements.resizeHandle,"mousedown",H.__internal.beginResizeHandler),K(H.elements.resizeHandle,"touchstart",H.__internal.beginResizeHandler,!1,!1)}function Ln(H){G(H.elements.resizeHandle,"mousedown",H.__internal.beginResizeHandler),G(H.elements.resizeHandle,"touchstart",H.__internal.beginResizeHandler,!1,!1)}function Dr(H){K(H.elements.modal,"click",H.__internal.modalClickHandler)}function br(H){G(H.elements.modal,"click",H.__internal.modalClickHandler)}return{__init:je,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(xe.modeless)<0},isMaximized:function(){return this.elements.root.className.indexOf(xe.maximized)>-1},isPinned:function(){return this.elements.root.className.indexOf(xe.unpinned)<0},maximize:function(){return this.isMaximized()||Ze(this),this},restore:function(){return this.isMaximized()&&Je(this),this},pin:function(){return this.isPinned()||te(this),this},unpin:function(){return this.isPinned()&&ge(this),this},bringToFront:function(){return sn(null,this),this},moveTo:function(H,Re){if(!isNaN(H)&&!isNaN(Re)){Ae("onmove",this);var It=this.elements.dialog,_t=It,vn=0,on=0;It.style.left&&(vn-=parseInt(It.style.left,10)),It.style.top&&(on-=parseInt(It.style.top,10));do vn+=_t.offsetLeft,on+=_t.offsetTop;while(_t=_t.offsetParent);var ai=H-vn,Hn=Re-on;C()&&(ai*=-1),It.style.left=ai+"px",It.style.top=Hn+"px",Ae("onmoved",this)}return this},resizeTo:function(H,Re){var It=parseFloat(H),_t=parseFloat(Re),vn=/(\d*\.\d+|\d+)%/;if(!isNaN(It)&&!isNaN(_t)&&this.get("resizable")===!0){Ae("onresize",this),(""+H).match(vn)&&(It=It/100*document.documentElement.clientWidth),(""+Re).match(vn)&&(_t=_t/100*document.documentElement.clientHeight);var on=this.elements.dialog;on.style.maxWidth!=="none"&&(on.style.minWidth=(gt=on.offsetWidth)+"px"),on.style.maxWidth="none",on.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",on.style.width=It+"px",on.style.height=_t+"px",Ae("onresized",this)}return this},setting:function(H,Re){var It=this,_t=me(this,this.__internal.options,function(Hn,Xt,cr){En(It,Hn,Xt,cr)},H,Re);if(_t.op==="get")return _t.found?_t.value:typeof this.settings!="undefined"?me(this,this.settings,this.settingUpdated||function(){},H,Re).value:void 0;if(_t.op==="set"){if(_t.items.length>0)for(var vn=this.settingUpdated||function(){},on=0;on<_t.items.length;on+=1){var ai=_t.items[on];!ai.found&&typeof this.settings!="undefined"&&me(this,this.settings,vn,ai.key,ai.value)}return this}},set:function(H,Re){return this.setting(H,Re),this},get:function(H){return this.setting(H)},setHeader:function(H){return typeof H=="string"?(L(this.elements.header),this.elements.header.innerHTML=H):H instanceof n.HTMLElement&&this.elements.header.firstChild!==H&&(L(this.elements.header),this.elements.header.appendChild(H)),this},setContent:function(H){return typeof H=="string"?(L(this.elements.content),this.elements.content.innerHTML=H):H instanceof n.HTMLElement&&this.elements.content.firstChild!==H&&(L(this.elements.content),this.elements.content.appendChild(H)),this},showModal:function(H){return this.show(!0,H)},show:function(H,Re){if(je(this),this.__internal.isOpen){Se(this),gn(this),b(this.elements.dialog,xe.shake);var _t=this;setTimeout(function(){s(_t.elements.dialog,xe.shake)},200)}else{if(this.__internal.isOpen=!0,g.push(this),Xe.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",Ye="0"),typeof this.prepare=="function"&&this.prepare(),Jt(this),H!==void 0&&this.set("modal",H),ht(),Ut(),typeof Re=="string"&&Re!==""&&(this.__internal.className=Re,b(this.elements.root,Re)),this.get("startMaximized")?this.maximize():this.isMaximized()&&Je(this),Ct(this),this.elements.root.removeAttribute("style"),s(this.elements.root,xe.animationOut),b(this.elements.root,xe.animationIn),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,Q.supported?1e3:100),Be){var It=this.elements.root;It.style.display="none",setTimeout(function(){It.style.display="block"},0)}this.elements.root.offsetWidth,s(this.elements.root,xe.hidden),ct(),typeof this.hooks.onshow=="function"&&this.hooks.onshow.call(this),Ae("onshow",this)}return this},close:function(){return this.__internal.isOpen&&Ae("onclosing",this)!==!1&&(Yn(this),s(this.elements.root,xe.animationIn),b(this.elements.root,xe.animationOut),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,Q.supported?1e3:100),b(this.elements.root,xe.hidden),this.elements.modal.offsetWidth,Xe.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),typeof this.__internal.className!="undefined"&&this.__internal.className!==""&&s(this.elements.root,this.__internal.className),typeof this.hooks.onclose=="function"&&this.hooks.onclose.call(this),Ae("onclose",this),g.splice(g.indexOf(this),1),this.__internal.isOpen=!1,Ut()),!g.length&&Ye==="0"&&document.body.removeAttribute("tabindex"),this},closeOthers:function(){return Xe.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){Y(this,je)},this.close()):this.__internal.destroy||Y(this,je)),this}}}(),$e=function(){var ve,Ye=[],Be=m.notifier.classes,Pe=Be.base;function xe(ct){if(!ct.__internal){ct.__internal={position:Xe.defaults.notifier.position,delay:Xe.defaults.notifier.delay},ve=document.createElement("DIV");var Ut="transitionOff"in m.notifier?m.notifier.transitionOff:m.transitionOff;Ut&&(Pe=Be.base+" ajs-no-transition"),Qe(ct)}ve.parentNode!==document.body&&document.body.appendChild(ve)}function je(ct){ct.__internal.pushed=!0,Ye.push(ct)}function lt(ct){Ye.splice(Ye.indexOf(ct),1),ct.__internal.pushed=!1}function Qe(ct){switch(ve.className=Pe,ct.__internal.position){case"top-right":b(ve,Be.top+" "+Be.right);break;case"top-left":b(ve,Be.top+" "+Be.left);break;case"top-center":b(ve,Be.top+" "+Be.center);break;case"bottom-left":b(ve,Be.bottom+" "+Be.left);break;case"bottom-center":b(ve,Be.bottom+" "+Be.center);break;default:case"bottom-right":b(ve,Be.bottom+" "+Be.right);break}}function ht(ct,Ut){function Ke(Ue,wt){(!wt.__internal.closeButton||Ue.target.getAttribute("data-close")==="true")&&wt.dismiss(!0)}function hn(Ue,wt){G(wt.element,Q.type,hn),ve.removeChild(wt.element)}function Ht(Ue){return Ue.__internal||(Ue.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},Ue.__internal.clickHandler=_e(Ue,Ke),Ue.__internal.transitionEndHandler=_e(Ue,hn)),Ue}function dn(Ue){clearTimeout(Ue.__internal.timer),clearTimeout(Ue.__internal.transitionTimeout)}return Ht({element:ct,push:function(Ue,wt){if(!this.__internal.pushed){je(this),dn(this);var kt,Et;switch(arguments.length){case 0:Et=this.__internal.delay;break;case 1:typeof Ue=="number"?Et=Ue:(kt=Ue,Et=this.__internal.delay);break;case 2:kt=Ue,Et=wt;break}return this.__internal.closeButton=Xe.defaults.notifier.closeButton,typeof kt!="undefined"&&this.setContent(kt),$e.__internal.position.indexOf("top")<0?ve.appendChild(this.element):ve.insertBefore(this.element,ve.firstChild),this.element.offsetWidth,b(this.element,Be.visible),K(this.element,"click",this.__internal.clickHandler),this.delay(Et)}return this},ondismiss:function(){},callback:Ut,dismiss:function(Ue){return this.__internal.pushed&&(dn(this),typeof this.ondismiss=="function"&&this.ondismiss.call(this)===!1||(G(this.element,"click",this.__internal.clickHandler),typeof this.element!="undefined"&&this.element.parentNode===ve&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,Q.supported?1e3:100),s(this.element,Be.visible),typeof this.callback=="function"&&this.callback.call(this,Ue)),lt(this))),this},delay:function(Ue){if(dn(this),this.__internal.delay=typeof Ue!="undefined"&&!isNaN(+Ue)?+Ue:$e.__internal.delay,this.__internal.delay>0){var wt=this;this.__internal.timer=setTimeout(function(){wt.dismiss()},this.__internal.delay*1e3)}return this},setContent:function(Ue){if(typeof Ue=="string"?(L(this.element),this.element.innerHTML=Ue):Ue instanceof n.HTMLElement&&this.element.firstChild!==Ue&&(L(this.element),this.element.appendChild(Ue)),this.__internal.closeButton){var wt=document.createElement("span");b(wt,Be.close),wt.setAttribute("data-close",!0),this.element.appendChild(wt)}return this},dismissOthers:function(){return $e.dismissAll(this),this}})}return{setting:function(ct,Ut){if(xe(this),typeof Ut=="undefined")return this.__internal[ct];switch(ct){case"position":this.__internal.position=Ut,Qe(this);break;case"delay":this.__internal.delay=Ut;break}return this},set:function(ct,Ut){return this.setting(ct,Ut),this},get:function(ct){return this.setting(ct)},create:function(ct,Ut){xe(this);var Ke=document.createElement("div");return Ke.className=Be.message+(typeof ct=="string"&&ct!==""?" "+Be.prefix+ct:""),ht(Ke,Ut)},dismissAll:function(ct){for(var Ut=Ye.slice(0),Ke=0;Ke<Ut.length;Ke+=1){var hn=Ut[Ke];(ct===void 0||ct!==hn)&&hn.dismiss()}}}}();function pt(){var ve={};function Ye(xe,je){for(var lt in je)je.hasOwnProperty(lt)&&(xe[lt]=je[lt]);return xe}function Be(xe){var je=ve[xe].dialog;return je&&typeof je.__init=="function"&&je.__init(je),je}function Pe(xe,je,lt,Qe){var ht={dialog:null,factory:je};return Qe!==void 0&&(ht.factory=function(){return Ye(new ve[Qe].factory,new je)}),lt||(ht.dialog=Ye(new ht.factory,Le)),ve[xe]=ht}return{defaults:m,dialog:function(xe,je,lt,Qe){if(typeof je!="function")return Be(xe);if(this.hasOwnProperty(xe))throw new Error("alertify.dialog: name already exists");var ht=Pe(xe,je,lt,Qe);lt?this[xe]=function(){if(arguments.length===0)return ht.dialog;var ct=Ye(new ht.factory,Le);return ct&&typeof ct.__init=="function"&&ct.__init(ct),ct.main.apply(ct,arguments),ct.show.apply(ct)}:this[xe]=function(){if(ht.dialog&&typeof ht.dialog.__init=="function"&&ht.dialog.__init(ht.dialog),arguments.length===0)return ht.dialog;var ct=ht.dialog;return ct.main.apply(ht.dialog,arguments),ct.show.apply(ht.dialog)}},closeAll:function(xe){for(var je=g.slice(0),lt=0;lt<je.length;lt+=1){var Qe=je[lt];(xe===void 0||xe!==Qe)&&Qe.close()}},setting:function(xe,je,lt){if(xe==="notifier")return $e.setting(je,lt);var Qe=Be(xe);if(Qe)return Qe.setting(je,lt)},set:function(xe,je,lt){return this.setting(xe,je,lt)},get:function(xe,je){return this.setting(xe,je)},notify:function(xe,je,lt,Qe){return $e.create(je,Qe).push(xe,lt)},message:function(xe,je,lt){return $e.create(null,lt).push(xe,je)},success:function(xe,je,lt){return $e.create("success",lt).push(xe,je)},error:function(xe,je,lt){return $e.create("error",lt).push(xe,je)},warning:function(xe,je,lt){return $e.create("warning",lt).push(xe,je)},dismissAll:function(){$e.dismissAll()}}}var Xe=new pt;Xe.dialog("alert",function(){return{main:function(ve,Ye,Be){var Pe,xe,je;switch(arguments.length){case 1:xe=ve;break;case 2:typeof Ye=="function"?(xe=ve,je=Ye):(Pe=ve,xe=Ye);break;case 3:Pe=ve,xe=Ye,je=Be;break}return this.set("title",Pe),this.set("message",xe),this.set("onok",je),this},setup:function(){return{buttons:[{text:Xe.defaults.glossary.ok,key:h.ESC,invokeOnClose:!0,className:Xe.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(ve){this.setContent(ve)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(ve,Ye,Be){switch(ve){case"message":this.setMessage(Be);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=Be);break}},callback:function(ve){if(typeof this.get("onok")=="function"){var Ye=this.get("onok").call(this,ve);typeof Ye!="undefined"&&(ve.cancel=!Ye)}}}}),Xe.dialog("confirm",function(){var ve={timer:null,index:null,text:null,duration:null,task:function(Pe,xe){if(xe.isOpen()){if(xe.__internal.buttons[ve.index].element.innerHTML=ve.text+" (&#8207;"+ve.duration+"&#8207;) ",ve.duration-=1,ve.duration===-1){Ye(xe);var je=xe.__internal.buttons[ve.index],lt=Ce(ve.index,je);typeof xe.callback=="function"&&xe.callback.apply(xe,[lt]),lt.close!==!1&&xe.close()}}else Ye(xe)}};function Ye(Pe){ve.timer!==null&&(clearInterval(ve.timer),ve.timer=null,Pe.__internal.buttons[ve.index].element.innerHTML=ve.text)}function Be(Pe,xe,je){Ye(Pe),ve.duration=je,ve.index=xe,ve.text=Pe.__internal.buttons[xe].element.innerHTML,ve.timer=setInterval(_e(Pe,ve.task),1e3),ve.task(null,Pe)}return{main:function(Pe,xe,je,lt){var Qe,ht,ct,Ut;switch(arguments.length){case 1:ht=Pe;break;case 2:ht=Pe,ct=xe;break;case 3:ht=Pe,ct=xe,Ut=je;break;case 4:Qe=Pe,ht=xe,ct=je,Ut=lt;break}return this.set("title",Qe),this.set("message",ht),this.set("onok",ct),this.set("oncancel",Ut),this},setup:function(){return{buttons:[{text:Xe.defaults.glossary.ok,key:h.ENTER,className:Xe.defaults.theme.ok},{text:Xe.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:Xe.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(Pe){this.setContent(Pe)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(Pe,xe,je){switch(Pe){case"message":this.setMessage(je);break;case"labels":"ok"in je&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=je.ok,this.__internal.buttons[0].element.innerHTML=je.ok),"cancel"in je&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=je.cancel,this.__internal.buttons[1].element.innerHTML=je.cancel);break;case"reverseButtons":je===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element=je==="ok"?0:1;break}},callback:function(Pe){Ye(this);var xe;switch(Pe.index){case 0:typeof this.get("onok")=="function"&&(xe=this.get("onok").call(this,Pe),typeof xe!="undefined"&&(Pe.cancel=!xe));break;case 1:typeof this.get("oncancel")=="function"&&(xe=this.get("oncancel").call(this,Pe),typeof xe!="undefined"&&(Pe.cancel=!xe));break}},autoOk:function(Pe){return Be(this,0,Pe),this},autoCancel:function(Pe){return Be(this,1,Pe),this}}}),Xe.dialog("prompt",function(){var ve=document.createElement("INPUT"),Ye=document.createElement("P");return{main:function(Be,Pe,xe,je,lt){var Qe,ht,ct,Ut,Ke;switch(arguments.length){case 1:ht=Be;break;case 2:ht=Be,ct=Pe;break;case 3:ht=Be,ct=Pe,Ut=xe;break;case 4:ht=Be,ct=Pe,Ut=xe,Ke=je;break;case 5:Qe=Be,ht=Pe,ct=xe,Ut=je,Ke=lt;break}return this.set("title",Qe),this.set("message",ht),this.set("value",ct),this.set("onok",Ut),this.set("oncancel",Ke),this},setup:function(){return{buttons:[{text:Xe.defaults.glossary.ok,key:h.ENTER,className:Xe.defaults.theme.ok},{text:Xe.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:Xe.defaults.theme.cancel}],focus:{element:ve,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){ve.className=Xe.defaults.theme.input,ve.setAttribute("type","text"),ve.value=this.get("value"),this.elements.content.appendChild(Ye),this.elements.content.appendChild(ve)},prepare:function(){},setMessage:function(Be){typeof Be=="string"?(L(Ye),Ye.innerHTML=Be):Be instanceof n.HTMLElement&&Ye.firstChild!==Be&&(L(Ye),Ye.appendChild(Be))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(Be,Pe,xe){switch(Be){case"message":this.setMessage(xe);break;case"value":ve.value=xe;break;case"type":switch(xe){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":ve.type=xe;break;default:ve.type="text";break}break;case"labels":xe.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=xe.ok),xe.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=xe.cancel);break;case"reverseButtons":xe===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break}},callback:function(Be){var Pe;switch(Be.index){case 0:this.settings.value=ve.value,typeof this.get("onok")=="function"&&(Pe=this.get("onok").call(this,Be,this.settings.value),typeof Pe!="undefined"&&(Be.cancel=!Pe));break;case 1:typeof this.get("oncancel")=="function"&&(Pe=this.get("oncancel").call(this,Be),typeof Pe!="undefined"&&(Be.cancel=!Pe)),Be.cancel||(ve.value=this.settings.value);break}}}}),t.exports=Xe})(typeof window!="undefined"?window:Fs)})(KA);var Q8=KA.exports,JA={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){var a,h,m;function g(s,C){if(!a)a=C;else if(!h)h=C;else{var D="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+h+")(sharedChunk); self.onerror = null;",M={};a(M),m=C(M),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(m.workerUrl=window.URL.createObjectURL(new Blob([D],{type:"text/javascript"})))}}g(["exports"],function(s){var C="2.8.2",D=M;function M(r,e,o,l){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=o,this.p2y=l}M.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},M.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},M.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},M.prototype.solveCurveX=function(r,e){var o,l,u,d,_;for(e===void 0&&(e=1e-6),u=r,_=0;_<8;_++){if(d=this.sampleCurveX(u)-r,Math.abs(d)<e)return u;var y=this.sampleCurveDerivativeX(u);if(Math.abs(y)<1e-6)break;u-=d/y}if((u=r)<(o=0))return o;if(u>(l=1))return l;for(;o<l;){if(d=this.sampleCurveX(u),Math.abs(d-r)<e)return u;r>d?o=u:l=u,u=.5*(l-o)+o}return u},M.prototype.solve=function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))};var L=F;function F(r,e){this.x=r,this.y=e}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,o=r.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),o=Math.sin(r),l=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=l,this},_rotateAround:function(r,e){var o=Math.cos(r),l=Math.sin(r),u=e.y+l*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-l*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(r){return r instanceof F?r:Array.isArray(r)?new F(r[0],r[1]):r};var Y=typeof self!="undefined"?self:{};const Te=Math.PI/180,ue=180/Math.PI;function K(r){return r*Te}function G(r){return r*ue}const Q=[[0,0],[1,0],[1,1],[0,1]];function _e(r){if(r<=0)return 0;if(r>=1)return 1;const e=r*r,o=e*r;return 4*(r<.5?o:3*(r-e)+o-.75)}function Ce(r,e,o,l){const u=new D(r,e,o,l);return function(d){return u.solve(d)}}const Ae=Ce(.25,.1,.25,1);function Le(r,e,o){return Math.min(o,Math.max(e,r))}function $e(r,e,o){return(o=Le((o-r)/(e-r),0,1))*o*(3-2*o)}function pt(r,e,o){const l=o-e,u=((r-e)%l+l)%l+e;return u===e?o:u}function Xe(r,e,o){if(!r.length)return o(null,[]);let l=r.length;const u=new Array(r.length);let d=null;r.forEach((_,y)=>{e(_,(w,T)=>{w&&(d=w),u[y]=T,--l==0&&o(d,u)})})}function ve(r){const e=[];for(const o in r)e.push(r[o]);return e}function Ye(r,...e){for(const o of e)for(const l in o)r[l]=o[l];return r}let Be=1;function Pe(){return Be++}function xe(){return function r(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function je(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function lt(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Qe(r,e){r.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function ht(r,e){return r.indexOf(e,r.length-e.length)!==-1}function ct(r,e,o){const l={};for(const u in r)l[u]=e.call(o||this,r[u],u,r);return l}function Ut(r,e,o){const l={};for(const u in r)e.call(o||this,r[u],u,r)&&(l[u]=r[u]);return l}function Ke(r){return Array.isArray(r)?r.map(Ke):typeof r=="object"&&r?ct(r,Ke):r}const hn={};function Ht(r){hn[r]||(typeof console!="undefined"&&console.warn(r),hn[r]=!0)}function dn(r,e,o){return(o.y-r.y)*(e.x-r.x)>(e.y-r.y)*(o.x-r.x)}function Ue(r){let e=0;for(let o,l,u=0,d=r.length,_=d-1;u<d;_=u++)o=r[u],l=r[_],e+=(l.x-o.x)*(o.y+l.y);return e}function wt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function kt(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,u,d)=>{const _=u||d;return e[l]=!_||_.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let Et,sn,En,me,oe=null;function ot(r){if(oe==null){const e=r.navigator?r.navigator.userAgent:null;oe=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return oe}function te(r){try{const e=Y[r];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}const ge={now:()=>En!==void 0?En:Y.performance.now(),setNow(r){En=r},restoreNow(){En=void 0},frame(r){const e=Y.requestAnimationFrame(r);return{cancel:()=>Y.cancelAnimationFrame(e)}},getImageData(r,e=0){const{width:o,height:l}=r;me||(me=Y.document.createElement("canvas"));const u=me.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return(o>me.width||l>me.height)&&(me.width=o,me.height=l),u.clearRect(-e,-e,o+2*e,l+2*e),u.drawImage(r,0,0,o,l),u.getImageData(-e,-e,o+2*e,l+2*e)},resolveURL:r=>(Et||(Et=Y.document.createElement("a")),Et.href=r,Et.href),get devicePixelRatio(){return Y.devicePixelRatio},get prefersReducedMotion(){return!!Y.matchMedia&&(sn==null&&(sn=Y.matchMedia("(prefers-reduced-motion: reduce)")),sn.matches)}};let Ze;const Je={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Ze==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ze={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):r}catch{Ze=r}}return Ze},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},mt={supported:!1,testSupport:function(r){!Ct&&Vt&&(vt?Me(r):St=r)}};let St,Vt,Ct=!1,vt=!1;function Me(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Vt),r.isContextLost())return;mt.supported=!0}catch{}r.deleteTexture(e),Ct=!0}Y.document&&(Vt=Y.document.createElement("img"),Vt.onload=function(){St&&Me(St),St=null,vt=!0},Vt.onerror=function(){Ct=!0,St=null},Vt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const et="01",jt="NO_ACCESS_TOKEN";function Zt(r){return r.indexOf("mapbox:")===0}function bn(r){return Je.API_URL_REGEX.test(r)}const Tn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function An(r){const e=r.match(Tn);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Sn(r){const e=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${e}`}function si(r){if(!r)return null;const e=r.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(Y.atob(e[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ci{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const o=si(Je.ACCESS_TOKEN);let l="";return l=o&&o.u?Y.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(u,d)=>String.fromCharCode(Number("0x"+d)))):Je.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${l}`:`mapbox.eventData:${l}`}fetchEventData(){const e=te("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{const u=Y.localStorage.getItem(o);u&&(this.eventData=JSON.parse(u));const d=Y.localStorage.getItem(l);d&&(this.anonId=d)}catch{Ht("Unable to read from LocalStorage")}}saveEventData(){const e=te("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{Y.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&Y.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{Ht("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,o,l,u){if(!Je.EVENTS_URL)return;const d=An(Je.EVENTS_URL);d.params.push(`access_token=${u||Je.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:et,userId:this.anonId},y=o?Ye(_,o):_,w={url:Sn(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([y])};this.pendingRequest=Se(w,T=>{this.pendingRequest=null,l(T),this.saveEventData(),this.processRequests(u)})}queueRequest(e,o){this.queue.push(e),this.processRequests(o)}}const lr=new class extends Ci{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,e){Je.EVENTS_URL&&Je.ACCESS_TOKEN&&Array.isArray(r)&&r.some(o=>Zt(o)||bn(o))&&this.queueRequest(Date.now(),e)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=si(Je.ACCESS_TOKEN),o=e?e.u:Je.ACCESS_TOKEN;let l=o!==this.eventData.tokenU;lt(this.anonId)||(this.anonId=xe(),l=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const d=new Date(this.eventData.lastSuccess),_=new Date(u),y=(u-this.eventData.lastSuccess)/864e5;l=l||y>=1||y<-1||d.getDate()!==_.getDate()}else l=!0;l?this.postEvent(u,{"enabled.telemetry":!1},d=>{d||(this.eventData.lastSuccess=u,this.eventData.tokenU=o)},r):this.processRequests()}},xr=lr.postTurnstileEvent.bind(lr),Ti=new class extends Ci{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,e,o,l){this.skuToken=e,this.errorCb=l,Je.EVENTS_URL&&(o||Je.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(jt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),lt(this.anonId)||(this.anonId=xe()),this.postEvent(o,{skuToken:this.skuToken},l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},r))}},Ui=Ti.postMapLoadEvent.bind(Ti),ti=new class extends Ci{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,e,o,l){if(!Je.API_URL||!Je.SESSION_PATH)return;const u=An(Je.API_URL+Je.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${l||Je.ACCESS_TOKEN||""}`);const d={url:Sn(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ve(d,_=>{this.pendingRequest=null,o(_),this.saveEventData(),this.processRequests(l)})}getSessionAPI(r,e,o,l){this.skuToken=e,this.errorCb=l,Je.SESSION_PATH&&Je.API_URL&&(o||Je.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(jt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||this.getSession(o,this.skuToken,l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},r)}},gi=ti.getSessionAPI.bind(ti),Cr=new Set,yr="mapbox-tiles";let qi,tr,Gr=500,Or=50;function Ji(){Y.caches&&!qi&&(qi=Y.caches.open(yr))}function go(r){const e=r.indexOf("?");return e<0?r:r.slice(0,e)}let Wr=1/0;const se={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(se);class $ extends Error{constructor(e,o,l){o===401&&bn(l)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=o,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const j=wt()?()=>self.worker&&self.worker.referrer:()=>(Y.location.protocol==="blob:"?Y.parent:Y).location.href,re=function(r,e){if(!(/^file:/.test(o=r.url)||/^file:/.test(j())&&!/^\w+:/.test(o))){if(Y.fetch&&Y.Request&&Y.AbortController&&Y.Request.prototype.hasOwnProperty("signal"))return function(l,u){const d=new Y.AbortController,_=new Y.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:j(),signal:d.signal});let y=!1,w=!1;const T=(I=_.url).indexOf("sku=")>0&&bn(I);var I;l.type==="json"&&_.headers.set("Accept","application/json");const k=(B,V,q)=>{if(w)return;if(B&&B.message!=="SecurityError"&&Ht(B),V&&q)return O(V);const ee=Date.now();Y.fetch(_).then(le=>{if(le.ok){const be=T?le.clone():null;return O(le,be,ee)}return u(new $(le.statusText,le.status,l.url))}).catch(le=>{le.code!==20&&u(new Error(le.message))})},O=(B,V,q)=>{(l.type==="arrayBuffer"?B.arrayBuffer():l.type==="json"?B.json():B.text()).then(ee=>{w||(V&&q&&function(le,be,ke){if(Ji(),!qi)return;const Oe={status:be.status,statusText:be.statusText,headers:new Y.Headers};be.headers.forEach((rt,at)=>Oe.headers.set(at,rt));const ze=kt(be.headers.get("Cache-Control")||"");if(ze["no-store"])return;ze["max-age"]&&Oe.headers.set("Expires",new Date(ke+1e3*ze["max-age"]).toUTCString());const Ne=Oe.headers.get("Expires");Ne&&(new Date(Ne).getTime()-ke<42e4||function(rt,at){if(tr===void 0)try{new Response(new ReadableStream),tr=!0}catch{tr=!1}tr?at(rt.body):rt.blob().then(at)}(be,rt=>{const at=new Y.Response(rt,Oe);Ji(),qi&&qi.then(xt=>xt.put(go(le.url),at)).catch(xt=>Ht(xt.message))}))}(_,V,q),y=!0,u(null,ee,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(ee=>{w||u(new Error(ee.message))})};return T?function(B,V){if(Ji(),!qi)return V(null);const q=go(B.url);qi.then(ee=>{ee.match(q).then(le=>{const be=function(ke){if(!ke)return!1;const Oe=new Date(ke.headers.get("Expires")||0),ze=kt(ke.headers.get("Cache-Control")||"");return Oe>Date.now()&&!ze["no-cache"]}(le);ee.delete(q),be&&ee.put(q,le.clone()),V(null,le,be)}).catch(V)}).catch(V)}(_,k):k(null,null),{cancel:()=>{w=!0,y||d.abort()}}}(r,e);if(wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var o;return function(l,u){const d=new Y.XMLHttpRequest;d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer");for(const _ in l.headers)d.setRequestHeader(_,l.headers[_]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=()=>{u(new Error(d.statusText))},d.onload=()=>{if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){let _=d.response;if(l.type==="json")try{_=JSON.parse(d.response)}catch(y){return u(y)}u(null,_,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else u(new $(d.statusText,d.status,l.url))},d.send(l.body),{cancel:()=>d.abort()}}(r,e)},pe=function(r,e){return re(Ye(r,{type:"arrayBuffer"}),e)},Se=function(r,e){return re(Ye(r,{method:"POST"}),e)},Ve=function(r,e){return re(Ye(r,{method:"GET"}),e)};function Fe(r){const e=Y.document.createElement("a");return e.href=r,e.protocol===Y.document.location.protocol&&e.host===Y.document.location.host}const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ge,gt;Ge=[],gt=0;const Pt=function(r,e){if(mt.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),gt>=Je.MAX_PARALLEL_IMAGE_REQUESTS){const d={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Ge.push(d),d}gt++;let o=!1;const l=()=>{if(!o)for(o=!0,gt--;Ge.length&&gt<Je.MAX_PARALLEL_IMAGE_REQUESTS;){const d=Ge.shift(),{requestParameters:_,callback:y,cancelled:w}=d;w||(d.cancel=Pt(_,y).cancel)}},u=pe(r,(d,_,y,w)=>{l(),d?e(d):_&&(Y.createImageBitmap?function(T,I){const k=new Y.Blob([new Uint8Array(T)],{type:"image/png"});Y.createImageBitmap(k).then(O=>{I(null,O)}).catch(O=>{I(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(T,I)=>e(T,I,y,w)):function(T,I){const k=new Y.Image,O=Y.URL;k.onload=()=>{I(null,k),O.revokeObjectURL(k.src),k.onload=null,Y.requestAnimationFrame(()=>{k.src=Ie})},k.onerror=()=>I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const B=new Y.Blob([new Uint8Array(T)],{type:"image/png"});k.src=T.byteLength?O.createObjectURL(B):Ie}(_,(T,I)=>e(T,I,y,w)))});return{cancel:()=>{u.cancel(),l()}}};function yt(r,e,o){o[r]&&o[r].indexOf(e)!==-1||(o[r]=o[r]||[],o[r].push(e))}function un(r,e,o){if(o&&o[r]){const l=o[r].indexOf(e);l!==-1&&o[r].splice(l,1)}}class Yt{constructor(e,o={}){Ye(this,o),this.type=e}}class an extends Yt{constructor(e,o={}){super("error",Ye({error:e},o))}}class gn{on(e,o){return this._listeners=this._listeners||{},yt(e,o,this._listeners),this}off(e,o){return un(e,o,this._listeners),un(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},yt(e,o,this._oneTimeListeners),this):new Promise(l=>this.once(e,l))}fire(e,o){typeof e=="string"&&(e=new Yt(e,o||{}));const l=e.type;if(this.listens(l)){e.target=this;const u=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const y of u)y.call(this,e);const d=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const y of d)un(l,y,this._oneTimeListeners),y.call(this,e);const _=this._eventedParent;_&&(Ye(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(e))}else e instanceof an&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var He=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function jn(r,...e){for(const o of e)for(const l in o)r[l]=o[l];return r}function Jt(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Yn(r){if(Array.isArray(r))return r.map(Yn);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const o in r)e[o]=Yn(r[o]);return e}return Jt(r)}class zn extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class Oo{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[l,u]of o)this.bindings[l]=u}concat(e){return new Oo(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const nr={kind:"null"},Rt={kind:"number"},Vn={kind:"string"},Ln={kind:"boolean"},Dr={kind:"color"},br={kind:"object"},H={kind:"value"},Re={kind:"collator"},It={kind:"formatted"},_t={kind:"resolvedImage"};function vn(r,e){return{kind:"array",itemType:r,N:e}}function on(r){if(r.kind==="array"){const e=on(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}const ai=[nr,Rt,Vn,Ln,Dr,It,br,vn(H),_t];function Hn(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Hn(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const o of ai)if(!Hn(o,e))return null}}return`Expected ${on(r)} but found ${on(e)} instead.`}function Xt(r,e){return e.some(o=>o.kind===r.kind)}function cr(r,e){return e.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}function Di(r){var e={exports:{}};return r(e,e.exports),e.exports}var Do=Di(function(r,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(y){return(y=Math.round(y))<0?0:y>255?255:y}function u(y){return l(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function d(y){return(w=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:w>1?1:w;var w}function _(y,w,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?y+(w-y)*T*6:2*T<1?w:3*T<2?y+(w-y)*(2/3-T)*6:y}try{e.parseCSSColor=function(y){var w,T=y.replace(/ /g,"").toLowerCase();if(T in o)return o[T].slice();if(T[0]==="#")return T.length===4?(w=parseInt(T.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:T.length===7&&(w=parseInt(T.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var I=T.indexOf("("),k=T.indexOf(")");if(I!==-1&&k+1===T.length){var O=T.substr(0,I),B=T.substr(I+1,k-(I+1)).split(","),V=1;switch(O){case"rgba":if(B.length!==4)return null;V=d(B.pop());case"rgb":return B.length!==3?null:[u(B[0]),u(B[1]),u(B[2]),V];case"hsla":if(B.length!==4)return null;V=d(B.pop());case"hsl":if(B.length!==3)return null;var q=(parseFloat(B[0])%360+360)%360/360,ee=d(B[1]),le=d(B[2]),be=le<=.5?le*(ee+1):le+ee-le*ee,ke=2*le-be;return[l(255*_(ke,be,q+1/3)),l(255*_(ke,be,q)),l(255*_(ke,be,q-1/3)),V];default:return null}}return null}}catch{}});class Nn{constructor(e,o,l,u=1){this.r=e,this.g=o,this.b=l,this.a=u}static parse(e){if(!e)return;if(e instanceof Nn)return e;if(typeof e!="string")return;const o=Do.parseCSSColor(e);return o?new Nn(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,l,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(l)},${u})`}toArray(){const{r:e,g:o,b:l,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*o/u,255*l/u,u]}}Nn.black=new Nn(0,0,0,1),Nn.white=new Nn(1,1,1,1),Nn.transparent=new Nn(0,0,0,0),Nn.red=new Nn(1,0,0,1),Nn.blue=new Nn(0,0,1,1);class ts{constructor(e,o,l){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class eu{constructor(e,o,l,u,d){this.text=e.normalize?e.normalize():e,this.image=o,this.scale=l,this.fontStack=u,this.textColor=d}}class Zi{constructor(e){this.sections=e}static fromString(e){return new Zi([new eu(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Zi?e:Zi.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(l)}return e}}class Ir{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ir({name:e,available:!1}):null}serialize(){return["image",this.name]}}function qr(r,e,o,l){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,e,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,e,o,l]:[r,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ca(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Nn||r instanceof ts||r instanceof Zi||r instanceof Ir)return!0;if(Array.isArray(r)){for(const e of r)if(!ca(e))return!1;return!0}if(typeof r=="object"){for(const e in r)if(!ca(r[e]))return!1;return!0}return!1}function Vi(r){if(r===null)return nr;if(typeof r=="string")return Vn;if(typeof r=="boolean")return Ln;if(typeof r=="number")return Rt;if(r instanceof Nn)return Dr;if(r instanceof ts)return Re;if(r instanceof Zi)return It;if(r instanceof Ir)return _t;if(Array.isArray(r)){const e=r.length;let o;for(const l of r){const u=Vi(l);if(o){if(o===u)continue;o=H;break}o=u}return vn(o||H,e)}return br}function Zr(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Nn||r instanceof Zi||r instanceof Ir?r.toString():JSON.stringify(r)}class yo{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ca(e[1]))return o.error("invalid value");const l=e[1];let u=Vi(l);const d=o.expectedType;return u.kind!=="array"||u.N!==0||!d||d.kind!=="array"||typeof d.N=="number"&&d.N!==0||(u=d),new yo(u,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Nn?["rgba"].concat(this.value.toArray()):this.value instanceof Zi?this.value.serialize():this.value}}class ur{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Pl={string:Vn,number:Rt,boolean:Ln,object:br};class wr{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let l,u=1;const d=e[0];if(d==="array"){let y,w;if(e.length>2){const T=e[1];if(typeof T!="string"||!(T in Pl)||T==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);y=Pl[T],u++}else y=H;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);w=e[2],u++}l=vn(y,w)}else l=Pl[d];const _=[];for(;u<e.length;u++){const y=o.parse(e[u],u,H);if(!y)return null;_.push(y)}return new wr(l,_)}evaluate(e){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(e);if(!Hn(this.type,Vi(l)))return l;if(o===this.args.length-1)throw new ur(`Expected value to be of type ${on(this.type)}, but found ${on(Vi(l))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if(e.kind==="array"){const l=e.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){o.push(l.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&o.push(u)}}return o.concat(this.args.map(l=>l.serialize()))}}class ua{constructor(e){this.type=It,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const u=[];let d=!1;for(let _=1;_<=e.length-1;++_){const y=e[_];if(d&&typeof y=="object"&&!Array.isArray(y)){d=!1;let w=null;if(y["font-scale"]&&(w=o.parse(y["font-scale"],1,Rt),!w))return null;let T=null;if(y["text-font"]&&(T=o.parse(y["text-font"],1,vn(Vn)),!T))return null;let I=null;if(y["text-color"]&&(I=o.parse(y["text-color"],1,Dr),!I))return null;const k=u[u.length-1];k.scale=w,k.font=T,k.textColor=I}else{const w=o.parse(e[_],1,H);if(!w)return null;const T=w.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");d=!0,u.push({content:w,scale:null,font:null,textColor:null})}}return new ua(u)}evaluate(e){return new Zi(this.sections.map(o=>{const l=o.content.evaluate(e);return Vi(l)===_t?new eu("",l,null,null,null):new eu(Zr(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),e.push(l)}return e}}class $s{constructor(e){this.type=_t,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");const l=o.parse(e[1],1,Vn);return l?new $s(l):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),l=Ir.fromString(o);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(o)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ah={"to-boolean":Ln,"to-color":Dr,"to-number":Rt,"to-string":Vn};class oo{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[0];if((l==="to-boolean"||l==="to-string")&&e.length!==2)return o.error("Expected one argument.");const u=Ah[l],d=[];for(let _=1;_<e.length;_++){const y=o.parse(e[_],_,H);if(!y)return null;d.push(y)}return new oo(u,d)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let o,l;for(const u of this.args){if(o=u.evaluate(e),l=null,o instanceof Nn)return o;if(typeof o=="string"){const d=e.parseColor(o);if(d)return d}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:qr(o[0],o[1],o[2],o[3]),!l))return new Nn(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ur(l||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const l of this.args){if(o=l.evaluate(e),o===null)return 0;const u=Number(o);if(!isNaN(u))return u}throw new ur(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Zi.fromString(Zr(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ir.fromString(Zr(this.args[0].evaluate(e))):Zr(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ua([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new $s(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Sh=["Unknown","Point","LineString","Polygon"];class tu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:l,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*o-e[0])+this.featureDistanceData.bearing[1]*(u*o-e[1])}return 0}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=Nn.parse(e)),o}}class Mr{constructor(e,o,l,u){this.name=e,this.type=o,this._evaluate=l,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const l=e[0],u=Mr.definitions[l];if(!u)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const d=Array.isArray(u)?u[0]:u.type,_=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,y=_.filter(([T])=>!Array.isArray(T)||T.length===e.length-1);let w=null;for(const[T,I]of y){w=new Es(o.registry,o.path,null,o.scope);const k=[];let O=!1;for(let B=1;B<e.length;B++){const V=e[B],q=Array.isArray(T)?T[B-1]:T.type,ee=w.parse(V,1+k.length,q);if(!ee){O=!0;break}k.push(ee)}if(!O)if(Array.isArray(T)&&T.length!==k.length)w.error(`Expected ${T.length} arguments, but found ${k.length} instead.`);else{for(let B=0;B<k.length;B++){const V=Array.isArray(T)?T[B]:T.type,q=k[B];w.concat(B+1).checkSubtype(V,q.type)}if(w.errors.length===0)return new Mr(l,d,I,k)}}if(y.length===1)o.errors.push(...w.errors);else{const T=(y.length?y:_).map(([k])=>{return O=k,Array.isArray(O)?`(${O.map(on).join(", ")})`:`(${on(O.type)}...)`;var O}).join(" | "),I=[];for(let k=1;k<e.length;k++){const O=o.parse(e[k],1+I.length);if(!O)return null;I.push(on(O.type))}o.error(`Expected arguments of type ${T}, but found (${I.join(", ")}) instead.`)}return null}static register(e,o){Mr.definitions=o;for(const l in o)e[l]=Mr}}class Xa{constructor(e,o,l){this.type=Re,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");const l=e[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const u=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Ln);if(!u)return null;const d=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Ln);if(!d)return null;let _=null;return l.locale&&(_=o.parse(l.locale,1,Vn),!_)?null:new Xa(u,d,_)}evaluate(e){return new ts(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const bs=8192;function nu(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function Ya(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function iu(r,e){const o=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(o*u*bs),Math.round(l*u*bs)]}function Us(r,e,o){const l=r[0]-e[0],u=r[1]-e[1],d=r[0]-o[0],_=r[1]-o[1];return l*_-d*u==0&&l*d<=0&&u*_<=0}function ru(r,e){let o=!1;for(let _=0,y=e.length;_<y;_++){const w=e[_];for(let T=0,I=w.length;T<I-1;T++){if(Us(r,w[T],w[T+1]))return!1;(u=w[T])[1]>(l=r)[1]!=(d=w[T+1])[1]>l[1]&&l[0]<(d[0]-u[0])*(l[1]-u[1])/(d[1]-u[1])+u[0]&&(o=!o)}}var l,u,d;return o}function rd(r,e){for(let o=0;o<e.length;o++)if(ru(r,e[o]))return!0;return!1}function Ol(r,e,o,l){const u=l[0]-o[0],d=l[1]-o[1],_=(r[0]-o[0])*d-u*(r[1]-o[1]),y=(e[0]-o[0])*d-u*(e[1]-o[1]);return _>0&&y<0||_<0&&y>0}function Ch(r,e,o){for(const T of o)for(let I=0;I<T.length-1;++I)if((y=[(_=T[I+1])[0]-(d=T[I])[0],_[1]-d[1]])[0]*(w=[(u=e)[0]-(l=r)[0],u[1]-l[1]])[1]-y[1]*w[0]!=0&&Ol(l,u,d,_)&&Ol(d,_,l,u))return!0;var l,u,d,_,y,w;return!1}function Dl(r,e){for(let o=0;o<r.length;++o)if(!ru(r[o],e))return!1;for(let o=0;o<r.length-1;++o)if(Ch(r[o],r[o+1],e))return!1;return!0}function ou(r,e){for(let o=0;o<e.length;o++)if(Dl(r,e[o]))return!0;return!1}function Ka(r,e,o){const l=[];for(let u=0;u<r.length;u++){const d=[];for(let _=0;_<r[u].length;_++){const y=iu(r[u][_],o);nu(e,y),d.push(y)}l.push(d)}return l}function ha(r,e,o){const l=[];for(let u=0;u<r.length;u++){const d=Ka(r[u],e,o);l.push(d)}return l}function Rl(r,e,o,l){if(r[0]<o[0]||r[0]>o[2]){const u=.5*l;let d=r[0]-o[0]>u?-l:o[0]-r[0]>u?l:0;d===0&&(d=r[0]-o[2]>u?-l:o[2]-r[0]>u?l:0),r[0]+=d}nu(e,r)}function Ih(r,e,o,l){const u=Math.pow(2,l.z)*bs,d=[l.x*bs,l.y*bs],_=[];if(!r)return _;for(const y of r)for(const w of y){const T=[w.x+d[0],w.y+d[1]];Rl(T,e,o,u),_.push(T)}return _}function su(r,e,o,l){const u=Math.pow(2,l.z)*bs,d=[l.x*bs,l.y*bs],_=[];if(!r)return _;for(const w of r){const T=[];for(const I of w){const k=[I.x+d[0],I.y+d[1]];nu(e,k),T.push(k)}_.push(T)}if(e[2]-e[0]<=u/2){(y=e)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const w of _)for(const T of w)Rl(T,e,o,u)}var y;return _}class ws{constructor(e,o){this.type=Ln,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ca(e[1])){const l=e[1];if(l.type==="FeatureCollection")for(let u=0;u<l.features.length;++u){const d=l.features[u].geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new ws(l,l.features[u].geometry)}else if(l.type==="Feature"){const u=l.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new ws(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new ws(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,l){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(!_)return!1;if(l.type==="Polygon"){const y=Ka(l.coordinates,d,_),w=Ih(o.geometry(),u,d,_);if(!Ya(u,d))return!1;for(const T of w)if(!ru(T,y))return!1}if(l.type==="MultiPolygon"){const y=ha(l.coordinates,d,_),w=Ih(o.geometry(),u,d,_);if(!Ya(u,d))return!1;for(const T of w)if(!rd(T,y))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,l){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(!_)return!1;if(l.type==="Polygon"){const y=Ka(l.coordinates,d,_),w=su(o.geometry(),u,d,_);if(!Ya(u,d))return!1;for(const T of w)if(!Dl(T,y))return!1}if(l.type==="MultiPolygon"){const y=ha(l.coordinates,d,_),w=su(o.geometry(),u,d,_);if(!Ya(u,d))return!1;for(const T of w)if(!ou(T,y))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function ir(r){if(r instanceof Mr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ws)return!1;let e=!0;return r.eachChild(o=>{e&&!ir(o)&&(e=!1)}),e}function ns(r){if(r instanceof Mr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(o=>{e&&!ns(o)&&(e=!1)}),e}function Vs(r,e){if(r instanceof Mr&&e.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(l=>{o&&!Vs(l,e)&&(o=!1)}),o}class js{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=e[1];return o.scope.has(l)?new js(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Es{constructor(e,o=[],l,u=new Oo,d=[]){this.registry=e,this.path=o,this.key=o.map(_=>`[${_}]`).join(""),this.scope=u,this.errors=d,this.expectedType=l}parse(e,o,l,u,d={}){return o?this.concat(o,l,u)._parse(e,d):this._parse(e,d)}_parse(e,o){function l(u,d,_){return _==="assert"?new wr(d,[u]):_==="coerce"?new oo(d,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const d=this.registry[u];if(d){let _=d.parse(e,this);if(!_)return null;if(this.expectedType){const y=this.expectedType,w=_.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||w.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(y,w))return null}else _=l(_,y,o.typeAnnotation||"coerce");else _=l(_,y,o.typeAnnotation||"assert")}if(!(_ instanceof yo)&&_.type.kind!=="resolvedImage"&&zl(_)){const y=new tu;try{_=new yo(_.type,_.evaluate(y))}catch(w){return this.error(w.message),null}}return _}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,l){const u=typeof e=="number"?this.path.concat(e):this.path,d=l?this.scope.concat(l):this.scope;return new Es(this.registry,u,o||null,d,this.errors)}error(e,...o){const l=`${this.key}${o.map(u=>`[${u}]`).join("")}`;this.errors.push(new zn(l,e))}checkSubtype(e,o){const l=Hn(e,o);return l&&this.error(l),l}}function zl(r){if(r instanceof js)return zl(r.boundExpression);if(r instanceof Mr&&r.name==="error"||r instanceof Xa||r instanceof ws)return!1;const e=r instanceof oo||r instanceof wr;let o=!0;return r.eachChild(l=>{o=e?o&&zl(l):o&&l instanceof yo}),!!o&&ir(r)&&Vs(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ja(r,e){const o=r.length-1;let l,u,d=0,_=o,y=0;for(;d<=_;)if(y=Math.floor((d+_)/2),l=r[y],u=r[y+1],l<=e){if(y===o||e<u)return y;d=y+1}else{if(!(l>e))throw new ur("Input is not a number.");_=y-1}return 0}class Qa{constructor(e,o,l){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[u,d]of l)this.labels.push(u),this.outputs.push(d)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(e[1],1,Rt);if(!l)return null;const u=[];let d=null;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);for(let _=1;_<e.length;_+=2){const y=_===1?-1/0:e[_],w=e[_+1],T=_,I=_+1;if(typeof y!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=y)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const k=o.parse(w,I,d);if(!k)return null;d=d||k.type,u.push([y,k])}return new Qa(d,l,u)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return l[0].evaluate(e);const d=o.length;return u>=o[d-1]?l[d-1].evaluate(e):l[Ja(o,u)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}function mn(r,e,o){return r*(1-o)+e*o}var Nl=Object.freeze({__proto__:null,number:mn,color:function(r,e,o){return new Nn(mn(r.r,e.r,o),mn(r.g,e.g,o),mn(r.b,e.b,o),mn(r.a,e.a,o))},array:function(r,e,o){return r.map((l,u)=>mn(l,e[u],o))}});const Mh=.95047,Rr=1.08883,Fl=4/29,Bl=6/29,el=3*Bl*Bl,kh=Math.PI/180,Lh=180/Math.PI;function tl(r){return r>.008856451679035631?Math.pow(r,1/3):r/el+Fl}function is(r){return r>Bl?r*r*r:el*(r-Fl)}function Hs(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function au(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function $l(r){const e=au(r.r),o=au(r.g),l=au(r.b),u=tl((.4124564*e+.3575761*o+.1804375*l)/Mh),d=tl((.2126729*e+.7151522*o+.072175*l)/1);return{l:116*d-16,a:500*(u-d),b:200*(d-tl((.0193339*e+.119192*o+.9503041*l)/Rr)),alpha:r.a}}function Ul(r){let e=(r.l+16)/116,o=isNaN(r.a)?e:e+r.a/500,l=isNaN(r.b)?e:e-r.b/200;return e=1*is(e),o=Mh*is(o),l=Rr*is(l),new Nn(Hs(3.2404542*o-1.5371385*e-.4985314*l),Hs(-.969266*o+1.8760108*e+.041556*l),Hs(.0556434*o-.2040259*e+1.0572252*l),r.alpha)}function Ph(r,e,o){const l=e-r;return r+o*(l>180||l<-180?l-360*Math.round(l/360):l)}const fa={forward:$l,reverse:Ul,interpolate:function(r,e,o){return{l:mn(r.l,e.l,o),a:mn(r.a,e.a,o),b:mn(r.b,e.b,o),alpha:mn(r.alpha,e.alpha,o)}}},da={forward:function(r){const{l:e,a:o,b:l}=$l(r),u=Math.atan2(l,o)*Lh;return{h:u<0?u+360:u,c:Math.sqrt(o*o+l*l),l:e,alpha:r.a}},reverse:function(r){const e=r.h*kh,o=r.c;return Ul({l:r.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:r.alpha})},interpolate:function(r,e,o){return{h:Ph(r.h,e.h,o),c:mn(r.c,e.c,o),l:mn(r.l,e.l,o),alpha:mn(r.alpha,e.alpha,o)}}};var Vl=Object.freeze({__proto__:null,lab:fa,hcl:da});class zr{constructor(e,o,l,u,d){this.type=e,this.operator=o,this.interpolation=l,this.input=u,this.labels=[],this.outputs=[];for(const[_,y]of d)this.labels.push(_),this.outputs.push(y)}static interpolationFactor(e,o,l,u){let d=0;if(e.name==="exponential")d=jl(o,e.base,l,u);else if(e.name==="linear")d=jl(o,1,l,u);else if(e.name==="cubic-bezier"){const _=e.controlPoints;d=new D(_[0],_[1],_[2],_[3]).solve(jl(o,1,l,u))}return d}static parse(e,o){let[l,u,d,..._]=e;if(!Array.isArray(u)||u.length===0)return o.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const T=u[1];if(typeof T!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:T}}else{if(u[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const T=u.slice(1);if(T.length!==4||T.some(I=>typeof I!="number"||I<0||I>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:T}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(d=o.parse(d,2,Rt),!d)return null;const y=[];let w=null;l==="interpolate-hcl"||l==="interpolate-lab"?w=Dr:o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let T=0;T<_.length;T+=2){const I=_[T],k=_[T+1],O=T+3,B=T+4;if(typeof I!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(y.length&&y[y.length-1][0]>=I)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const V=o.parse(k,B,w);if(!V)return null;w=w||V.type,y.push([I,V])}return w.kind==="number"||w.kind==="color"||w.kind==="array"&&w.itemType.kind==="number"&&typeof w.N=="number"?new zr(w,l,u,d,y):o.error(`Type ${on(w)} is not interpolatable.`)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return l[0].evaluate(e);const d=o.length;if(u>=o[d-1])return l[d-1].evaluate(e);const _=Ja(o,u),y=zr.interpolationFactor(this.interpolation,u,o[_],o[_+1]),w=l[_].evaluate(e),T=l[_+1].evaluate(e);return this.operator==="interpolate"?Nl[this.type.kind.toLowerCase()](w,T,y):this.operator==="interpolate-hcl"?da.reverse(da.interpolate(da.forward(w),da.forward(T),y)):fa.reverse(fa.interpolate(fa.forward(w),fa.forward(T),y))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function jl(r,e,o,l){const u=l-o,d=r-o;return u===0?0:e===1?d/u:(Math.pow(e,d)-1)/(Math.pow(e,u)-1)}class pa{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let l=null;const u=o.expectedType;u&&u.kind!=="value"&&(l=u);const d=[];for(const y of e.slice(1)){const w=o.parse(y,1+d.length,l,void 0,{typeAnnotation:"omit"});if(!w)return null;l=l||w.type,d.push(w)}const _=u&&d.some(y=>Hn(u,y.type));return new pa(_?H:l,d)}evaluate(e){let o,l=null,u=0;for(const d of this.args){if(u++,l=d.evaluate(e),l&&l instanceof Ir&&!l.available&&(o||(o=l),l=null,u===this.args.length))return o;if(l!==null)break}return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class ma{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const l=[];for(let d=1;d<e.length-1;d+=2){const _=e[d];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,d);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",d);const y=o.parse(e[d+1],d+1);if(!y)return null;l.push([_,y])}const u=o.parse(e[e.length-1],e.length-1,o.expectedType,l);return u?new ma(l,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,l]of this.bindings)e.push(o,l.serialize());return e.push(this.result.serialize()),e}}class Hl{constructor(e,o,l){this.type=e,this.index=o,this.input=l}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Rt),u=o.parse(e[2],2,vn(o.expectedType||H));return l&&u?new Hl(u.type.itemType,l,u):null}evaluate(e){const o=this.index.evaluate(e),l=this.input.evaluate(e);if(o<0)throw new ur(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new ur(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new ur(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class nl{constructor(e,o){this.type=Ln,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,H),u=o.parse(e[2],2,H);return l&&u?Xt(l.type,[Ln,Vn,Rt,nr,H])?new nl(l,u):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(l.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(l==null)return!1;if(!cr(o,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${on(Vi(o))} instead.`);if(!cr(l,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${on(Vi(l))} instead.`);return l.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class il{constructor(e,o,l){this.type=Rt,this.needle=e,this.haystack=o,this.fromIndex=l}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,H),u=o.parse(e[2],2,H);if(!l||!u)return null;if(!Xt(l.type,[Ln,Vn,Rt,nr,H]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(l.type)} instead`);if(e.length===4){const d=o.parse(e[3],3,Rt);return d?new il(l,u,d):null}return new il(l,u)}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!cr(o,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${on(Vi(o))} instead.`);if(!cr(l,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${on(Vi(l))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return l.indexOf(o,u)}return l.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class rl{constructor(e,o,l,u,d,_){this.inputType=e,this.type=o,this.input=l,this.cases=u,this.outputs=d,this.otherwise=_}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let l,u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const d={},_=[];for(let T=2;T<e.length-1;T+=2){let I=e[T];const k=e[T+1];Array.isArray(I)||(I=[I]);const O=o.concat(T);if(I.length===0)return O.error("Expected at least one branch label.");for(const V of I){if(typeof V!="number"&&typeof V!="string")return O.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return O.error("Numeric branch labels must be integer values.");if(l){if(O.checkSubtype(l,Vi(V)))return null}else l=Vi(V);if(d[String(V)]!==void 0)return O.error("Branch labels must be unique.");d[String(V)]=_.length}const B=o.parse(k,T,u);if(!B)return null;u=u||B.type,_.push(B)}const y=o.parse(e[1],1,H);if(!y)return null;const w=o.parse(e[e.length-1],e.length-1,u);return w?y.type.kind!=="value"&&o.concat(1).checkSubtype(l,y.type)?null:new rl(l,u,y,d,_,w):null}evaluate(e){const o=this.input.evaluate(e);return(Vi(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],u={};for(const _ of o){const y=u[this.cases[_]];y===void 0?(u[this.cases[_]]=l.length,l.push([this.cases[_],[_]])):l[y][1].push(_)}const d=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,y]of l)e.push(y.length===1?d(y[0]):y.map(d)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}class ol{constructor(e,o,l){this.type=e,this.branches=o,this.otherwise=l}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const u=[];for(let _=1;_<e.length-1;_+=2){const y=o.parse(e[_],_,Ln);if(!y)return null;const w=o.parse(e[_+1],_+1,l);if(!w)return null;u.push([y,w]),l=l||w.type}const d=o.parse(e[e.length-1],e.length-1,l);return d?new ol(l,u,d):null}evaluate(e){for(const[o,l]of this.branches)if(o.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,l]of this.branches)e(o),e(l);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class sl{constructor(e,o,l,u){this.type=e,this.input=o,this.beginIndex=l,this.endIndex=u}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,H),u=o.parse(e[2],2,Rt);if(!l||!u)return null;if(!Xt(l.type,[vn(H),Vn,H]))return o.error(`Expected first argument to be of type array or string, but found ${on(l.type)} instead`);if(e.length===4){const d=o.parse(e[3],3,Rt);return d?new sl(l.type,l,u,d):null}return new sl(l.type,l,u)}evaluate(e){const o=this.input.evaluate(e),l=this.beginIndex.evaluate(e);if(!cr(o,["string","array"]))throw new ur(`Expected first argument to be of type array or string, but found ${on(Vi(o))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return o.slice(l,u)}return o.slice(l)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Gl(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ts(r,e,o,l){return l.compare(e,o)===0}function Gs(r,e,o){const l=r!=="=="&&r!=="!=";return class QA{constructor(d,_,y){this.type=Ln,this.lhs=d,this.rhs=_,this.collator=y,this.hasUntypedArgument=d.type.kind==="value"||_.type.kind==="value"}static parse(d,_){if(d.length!==3&&d.length!==4)return _.error("Expected two or three arguments.");const y=d[0];let w=_.parse(d[1],1,H);if(!w)return null;if(!Gl(y,w.type))return _.concat(1).error(`"${y}" comparisons are not supported for type '${on(w.type)}'.`);let T=_.parse(d[2],2,H);if(!T)return null;if(!Gl(y,T.type))return _.concat(2).error(`"${y}" comparisons are not supported for type '${on(T.type)}'.`);if(w.type.kind!==T.type.kind&&w.type.kind!=="value"&&T.type.kind!=="value")return _.error(`Cannot compare types '${on(w.type)}' and '${on(T.type)}'.`);l&&(w.type.kind==="value"&&T.type.kind!=="value"?w=new wr(T.type,[w]):w.type.kind!=="value"&&T.type.kind==="value"&&(T=new wr(w.type,[T])));let I=null;if(d.length===4){if(w.type.kind!=="string"&&T.type.kind!=="string"&&w.type.kind!=="value"&&T.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(I=_.parse(d[3],3,Re),!I)return null}return new QA(w,T,I)}evaluate(d){const _=this.lhs.evaluate(d),y=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){const w=Vi(_),T=Vi(y);if(w.kind!==T.kind||w.kind!=="string"&&w.kind!=="number")throw new ur(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${w.kind}, ${T.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const w=Vi(_),T=Vi(y);if(w.kind!=="string"||T.kind!=="string")return e(d,_,y)}return this.collator?o(d,_,y,this.collator.evaluate(d)):e(d,_,y)}eachChild(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)}outputDefined(){return!0}serialize(){const d=[r];return this.eachChild(_=>{d.push(_.serialize())}),d}}}const Oh=Gs("==",function(r,e,o){return e===o},Ts),od=Gs("!=",function(r,e,o){return e!==o},function(r,e,o,l){return!Ts(0,e,o,l)}),lu=Gs("<",function(r,e,o){return e<o},function(r,e,o,l){return l.compare(e,o)<0}),Dh=Gs(">",function(r,e,o){return e>o},function(r,e,o,l){return l.compare(e,o)>0}),Rh=Gs("<=",function(r,e,o){return e<=o},function(r,e,o,l){return l.compare(e,o)<=0}),As=Gs(">=",function(r,e,o){return e>=o},function(r,e,o,l){return l.compare(e,o)>=0});class cu{constructor(e,o,l,u,d){this.type=Vn,this.number=e,this.locale=o,this.currency=l,this.minFractionDigits=u,this.maxFractionDigits=d}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");const l=o.parse(e[1],1,Rt);if(!l)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return o.error("NumberFormat options argument must be an object.");let d=null;if(u.locale&&(d=o.parse(u.locale,1,Vn),!d))return null;let _=null;if(u.currency&&(_=o.parse(u.currency,1,Vn),!_))return null;let y=null;if(u["min-fraction-digits"]&&(y=o.parse(u["min-fraction-digits"],1,Rt),!y))return null;let w=null;return u["max-fraction-digits"]&&(w=o.parse(u["max-fraction-digits"],1,Rt),!w)?null:new cu(l,d,_,y,w)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Wl{constructor(e){this.type=Rt,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const l=o.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${on(l.type)} instead.`):new Wl(l):null}evaluate(e){const o=this.input.evaluate(e);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ur(`Expected value to be of type string or array, but found ${on(Vi(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Ws={"==":Oh,"!=":od,">":Dh,"<":lu,">=":As,"<=":Rh,array:wr,at:Hl,boolean:wr,case:ol,coalesce:pa,collator:Xa,format:ua,image:$s,in:nl,"index-of":il,interpolate:zr,"interpolate-hcl":zr,"interpolate-lab":zr,length:Wl,let:ma,literal:yo,match:rl,number:wr,"number-format":cu,object:wr,slice:sl,step:Qa,string:wr,"to-boolean":oo,"to-color":oo,"to-number":oo,"to-string":oo,var:js,within:ws};function uu(r,[e,o,l,u]){e=e.evaluate(r),o=o.evaluate(r),l=l.evaluate(r);const d=u?u.evaluate(r):1,_=qr(e,o,l,d);if(_)throw new ur(_);return new Nn(e/255*d,o/255*d,l/255*d,d)}function hu(r,e){return r in e}function ql(r,e){const o=e[r];return o===void 0?null:o}function Ss(r){return{type:r}}function fu(r){return{result:"success",value:r}}function qs(r){return{result:"error",value:r}}function _a(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function zh(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function ga(r){return!!r.expression&&r.expression.interpolated}function Jn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function vo(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Zl(r){return r}function Xl(r,e){const o=e.type==="color",l=r.stops&&typeof r.stops[0][0]=="object",u=l||!(l||r.property!==void 0),d=r.type||(ga(e)?"exponential":"interval");if(o&&((r=jn({},r)).stops&&(r.stops=r.stops.map(T=>[T[0],Nn.parse(T[1])])),r.default=Nn.parse(r.default?r.default:e.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!Vl[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let _,y,w;if(d==="exponential")_=Kl;else if(d==="interval")_=Yl;else if(d==="categorical"){_=Nh,y=Object.create(null);for(const T of r.stops)y[T[0]]=T[1];w=typeof r.stops[0][0]}else{if(d!=="identity")throw new Error(`Unknown function type "${d}"`);_=Cs}if(l){const T={},I=[];for(let B=0;B<r.stops.length;B++){const V=r.stops[B],q=V[0].zoom;T[q]===void 0&&(T[q]={zoom:q,type:r.type,property:r.property,default:r.default,stops:[]},I.push(q)),T[q].stops.push([V[0].value,V[1]])}const k=[];for(const B of I)k.push([T[B].zoom,Xl(T[B],e)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:zr.interpolationFactor.bind(void 0,O),zoomStops:k.map(B=>B[0]),evaluate:({zoom:B},V)=>Kl({stops:k,base:r.base},e,B).evaluate(B,V)}}if(u){const T=d==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:zr.interpolationFactor.bind(void 0,T),zoomStops:r.stops.map(I=>I[0]),evaluate:({zoom:I})=>_(r,e,I,y,w)}}return{kind:"source",evaluate(T,I){const k=I&&I.properties?I.properties[r.property]:void 0;return k===void 0?ya(r.default,e.default):_(r,e,k,y,w)}}}function ya(r,e,o){return r!==void 0?r:e!==void 0?e:o!==void 0?o:void 0}function Nh(r,e,o,l,u){return ya(typeof o===u?l[o]:void 0,r.default,e.default)}function Yl(r,e,o){if(Jn(o)!=="number")return ya(r.default,e.default);const l=r.stops.length;if(l===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[l-1][0])return r.stops[l-1][1];const u=Ja(r.stops.map(d=>d[0]),o);return r.stops[u][1]}function Kl(r,e,o){const l=r.base!==void 0?r.base:1;if(Jn(o)!=="number")return ya(r.default,e.default);const u=r.stops.length;if(u===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[u-1][0])return r.stops[u-1][1];const d=Ja(r.stops.map(I=>I[0]),o),_=function(I,k,O,B){const V=B-O,q=I-O;return V===0?0:k===1?q/V:(Math.pow(k,q)-1)/(Math.pow(k,V)-1)}(o,l,r.stops[d][0],r.stops[d+1][0]),y=r.stops[d][1],w=r.stops[d+1][1];let T=Nl[e.type]||Zl;if(r.colorSpace&&r.colorSpace!=="rgb"){const I=Vl[r.colorSpace];T=(k,O)=>I.reverse(I.interpolate(I.forward(k),I.forward(O),_))}return typeof y.evaluate=="function"?{evaluate(...I){const k=y.evaluate.apply(void 0,I),O=w.evaluate.apply(void 0,I);if(k!==void 0&&O!==void 0)return T(k,O,_)}}:T(y,w,_)}function Cs(r,e,o){return e.type==="color"?o=Nn.parse(o):e.type==="formatted"?o=Zi.fromString(o.toString()):e.type==="resolvedImage"?o=Ir.fromString(o.toString()):Jn(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0),ya(o,r.default,e.default)}Mr.register(Ws,{error:[{kind:"error"},[Vn],(r,[e])=>{throw new ur(e.evaluate(r))}],typeof:[Vn,[H],(r,[e])=>on(Vi(e.evaluate(r)))],"to-rgba":[vn(Rt,4),[Dr],(r,[e])=>e.evaluate(r).toArray()],rgb:[Dr,[Rt,Rt,Rt],uu],rgba:[Dr,[Rt,Rt,Rt,Rt],uu],has:{type:Ln,overloads:[[[Vn],(r,[e])=>hu(e.evaluate(r),r.properties())],[[Vn,br],(r,[e,o])=>hu(e.evaluate(r),o.evaluate(r))]]},get:{type:H,overloads:[[[Vn],(r,[e])=>ql(e.evaluate(r),r.properties())],[[Vn,br],(r,[e,o])=>ql(e.evaluate(r),o.evaluate(r))]]},"feature-state":[H,[Vn],(r,[e])=>ql(e.evaluate(r),r.featureState||{})],properties:[br,[],r=>r.properties()],"geometry-type":[Vn,[],r=>r.geometryType()],id:[H,[],r=>r.id()],zoom:[Rt,[],r=>r.globals.zoom],pitch:[Rt,[],r=>r.globals.pitch||0],"distance-from-center":[Rt,[],r=>r.distanceFromCenter()],"heatmap-density":[Rt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Rt,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[Rt,[],r=>r.globals.skyRadialProgress||0],accumulated:[H,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Rt,Ss(Rt),(r,e)=>{let o=0;for(const l of e)o+=l.evaluate(r);return o}],"*":[Rt,Ss(Rt),(r,e)=>{let o=1;for(const l of e)o*=l.evaluate(r);return o}],"-":{type:Rt,overloads:[[[Rt,Rt],(r,[e,o])=>e.evaluate(r)-o.evaluate(r)],[[Rt],(r,[e])=>-e.evaluate(r)]]},"/":[Rt,[Rt,Rt],(r,[e,o])=>e.evaluate(r)/o.evaluate(r)],"%":[Rt,[Rt,Rt],(r,[e,o])=>e.evaluate(r)%o.evaluate(r)],ln2:[Rt,[],()=>Math.LN2],pi:[Rt,[],()=>Math.PI],e:[Rt,[],()=>Math.E],"^":[Rt,[Rt,Rt],(r,[e,o])=>Math.pow(e.evaluate(r),o.evaluate(r))],sqrt:[Rt,[Rt],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[Rt,[Rt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[Rt,[Rt],(r,[e])=>Math.log(e.evaluate(r))],log2:[Rt,[Rt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[Rt,[Rt],(r,[e])=>Math.sin(e.evaluate(r))],cos:[Rt,[Rt],(r,[e])=>Math.cos(e.evaluate(r))],tan:[Rt,[Rt],(r,[e])=>Math.tan(e.evaluate(r))],asin:[Rt,[Rt],(r,[e])=>Math.asin(e.evaluate(r))],acos:[Rt,[Rt],(r,[e])=>Math.acos(e.evaluate(r))],atan:[Rt,[Rt],(r,[e])=>Math.atan(e.evaluate(r))],min:[Rt,Ss(Rt),(r,e)=>Math.min(...e.map(o=>o.evaluate(r)))],max:[Rt,Ss(Rt),(r,e)=>Math.max(...e.map(o=>o.evaluate(r)))],abs:[Rt,[Rt],(r,[e])=>Math.abs(e.evaluate(r))],round:[Rt,[Rt],(r,[e])=>{const o=e.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[Rt,[Rt],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[Rt,[Rt],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[Ln,[Vn,H],(r,[e,o])=>r.properties()[e.value]===o.value],"filter-id-==":[Ln,[H],(r,[e])=>r.id()===e.value],"filter-type-==":[Ln,[Vn],(r,[e])=>r.geometryType()===e.value],"filter-<":[Ln,[Vn,H],(r,[e,o])=>{const l=r.properties()[e.value],u=o.value;return typeof l==typeof u&&l<u}],"filter-id-<":[Ln,[H],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o<l}],"filter->":[Ln,[Vn,H],(r,[e,o])=>{const l=r.properties()[e.value],u=o.value;return typeof l==typeof u&&l>u}],"filter-id->":[Ln,[H],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o>l}],"filter-<=":[Ln,[Vn,H],(r,[e,o])=>{const l=r.properties()[e.value],u=o.value;return typeof l==typeof u&&l<=u}],"filter-id-<=":[Ln,[H],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o<=l}],"filter->=":[Ln,[Vn,H],(r,[e,o])=>{const l=r.properties()[e.value],u=o.value;return typeof l==typeof u&&l>=u}],"filter-id->=":[Ln,[H],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o>=l}],"filter-has":[Ln,[H],(r,[e])=>e.value in r.properties()],"filter-has-id":[Ln,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ln,[vn(Vn)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ln,[vn(H)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[Ln,[Vn,vn(H)],(r,[e,o])=>o.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[Ln,[Vn,vn(H)],(r,[e,o])=>function(l,u,d,_){for(;d<=_;){const y=d+_>>1;if(u[y]===l)return!0;u[y]>l?_=y-1:d=y+1}return!1}(r.properties()[e.value],o.value,0,o.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(r,[e,o])=>e.evaluate(r)&&o.evaluate(r)],[Ss(Ln),(r,e)=>{for(const o of e)if(!o.evaluate(r))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(r,[e,o])=>e.evaluate(r)||o.evaluate(r)],[Ss(Ln),(r,e)=>{for(const o of e)if(o.evaluate(r))return!0;return!1}]]},"!":[Ln,[Ln],(r,[e])=>!e.evaluate(r)],"is-supported-script":[Ln,[Vn],(r,[e])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(e.evaluate(r))}],upcase:[Vn,[Vn],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[Vn,[Vn],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[Vn,Ss(H),(r,e)=>e.map(o=>Zr(o.evaluate(r))).join("")],"resolved-locale":[Vn,[Re],(r,[e])=>e.evaluate(r).resolvedLocale()]});class Jl{constructor(e,o){this.expression=e,this._warningHistory={},this._evaluator=new tu,this._defaultValue=o?function(l){return l.type==="color"&&vo(l.default)?new Nn(0,0,0,0):l.type==="color"?Nn.parse(l.default)||null:l.default===void 0?null:l.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,l,u,d,_,y,w){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null,this.expression.evaluate(this._evaluator)}evaluate(e,o,l,u,d,_,y,w){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function va(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ws}function al(r,e){const o=new Es(Ws,[],e?function(u){const d={color:Dr,string:Vn,number:Rt,enum:Vn,boolean:Ln,formatted:It,resolvedImage:_t};return u.type==="array"?vn(d[u.value]||H,u.length):d[u.type]}(e):void 0),l=o.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?fu(new Jl(l,e)):qs(o.errors)}class xa{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!ns(o.expression)}evaluateWithoutErrorHandling(e,o,l,u,d,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,u,d,_)}evaluate(e,o,l,u,d,_){return this._styleExpression.evaluate(e,o,l,u,d,_)}}class Ql{constructor(e,o,l,u){this.kind=e,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!ns(o.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,o,l,u,d,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,u,d,_)}evaluate(e,o,l,u,d,_){return this._styleExpression.evaluate(e,o,l,u,d,_)}interpolationFactor(e,o,l){return this.interpolationType?zr.interpolationFactor(this.interpolationType,e,o,l):0}}function du(r,e){if((r=al(r,e)).result==="error")return r;const o=r.value.expression,l=ir(o);if(!l&&!_a(e))return qs([new zn("","data expressions not supported")]);const u=Vs(o,["zoom","pitch","distance-from-center"]);if(!u&&!zh(e))return qs([new zn("","zoom expressions not supported")]);const d=rs(o);return d||u?d instanceof zn?qs([d]):d instanceof zr&&!ga(e)?qs([new zn("",'"interpolate" expressions cannot be used with this property')]):fu(d?new Ql(l?"camera":"composite",r.value,d.labels,d instanceof zr?d.interpolation:void 0):new xa(l?"constant":"source",r.value)):qs([new zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ec{constructor(e,o){this._parameters=e,this._specification=o,jn(this,Xl(this._parameters,this._specification))}static deserialize(e){return new ec(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function rs(r){let e=null;if(r instanceof ma)e=rs(r.result);else if(r instanceof pa){for(const o of r.args)if(e=rs(o),e)break}else(r instanceof Qa||r instanceof zr)&&r.input instanceof Mr&&r.input.name==="zoom"&&(e=r);return e instanceof zn||r.eachChild(o=>{const l=rs(o);l instanceof zn?e=l:!e&&l?e=new zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new zn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Wt{constructor(e,o,l,u){this.message=(e?`${e}: `:"")+l,u&&(this.identifier=u),o!=null&&o.__line__&&(this.line=o.__line__)}}function Xr(r){const e=r.key,o=r.value,l=r.valueSpec||{},u=r.objectElementValidators||{},d=r.style,_=r.styleSpec;let y=[];const w=Jn(o);if(w!=="object")return[new Wt(e,o,`object expected, ${w} found`)];for(const T in o){const I=T.split(".")[0],k=l[I]||l["*"];let O;u[I]?O=u[I]:l[I]?O=Mn:u["*"]?O=u["*"]:l["*"]&&(O=Mn),O?y=y.concat(O({key:(e&&`${e}.`)+T,value:o[T],valueSpec:k,style:d,styleSpec:_,object:o,objectKey:T},o)):y.push(new Wt(e,o[T],`unknown property "${T}"`))}for(const T in l)u[T]||l[T].required&&l[T].default===void 0&&o[T]===void 0&&y.push(new Wt(e,o,`missing required property "${T}"`));return y}function os(r){const e=r.value,o=r.valueSpec,l=r.style,u=r.styleSpec,d=r.key,_=r.arrayElementValidator||Mn;if(Jn(e)!=="array")return[new Wt(d,e,`array expected, ${Jn(e)} found`)];if(o.length&&e.length!==o.length)return[new Wt(d,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new Wt(d,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let y={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};u.$version<7&&(y.function=o.function),Jn(o.value)==="object"&&(y=o.value);let w=[];for(let T=0;T<e.length;T++)w=w.concat(_({array:e,arrayIndex:T,value:e[T],valueSpec:y,style:l,styleSpec:u,key:`${d}[${T}]`}));return w}function ba(r){const e=r.key,o=r.value,l=r.valueSpec;let u=Jn(o);if(u==="number"&&o!=o&&(u="NaN"),u!=="number")return[new Wt(e,o,`number expected, ${u} found`)];if("minimum"in l){let d=l.minimum;if(Jn(l.minimum)==="array"&&(d=l.minimum[r.arrayIndex]),o<d)return[new Wt(e,o,`${o} is less than the minimum value ${d}`)]}if("maximum"in l){let d=l.maximum;if(Jn(l.maximum)==="array"&&(d=l.maximum[r.arrayIndex]),o>d)return[new Wt(e,o,`${o} is greater than the maximum value ${d}`)]}return[]}function pu(r){const e=r.valueSpec,o=Jt(r.value.type);let l,u,d,_={};const y=o!=="categorical"&&r.value.property===void 0,w=!y,T=Jn(r.value.stops)==="array"&&Jn(r.value.stops[0])==="array"&&Jn(r.value.stops[0][0])==="object",I=Xr({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(B){if(o==="identity")return[new Wt(B.key,B.value,'identity function may not have a "stops" property')];let V=[];const q=B.value;return V=V.concat(os({key:B.key,value:q,valueSpec:B.valueSpec,style:B.style,styleSpec:B.styleSpec,arrayElementValidator:k})),Jn(q)==="array"&&q.length===0&&V.push(new Wt(B.key,q,"array must have at least one stop")),V},default:function(B){return Mn({key:B.key,value:B.value,valueSpec:e,style:B.style,styleSpec:B.styleSpec})}}});return o==="identity"&&y&&I.push(new Wt(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||I.push(new Wt(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!ga(r.valueSpec)&&I.push(new Wt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(w&&!_a(r.valueSpec)?I.push(new Wt(r.key,r.value,"property functions not supported")):y&&!zh(r.valueSpec)&&I.push(new Wt(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!T||r.value.property!==void 0||I.push(new Wt(r.key,r.value,'"property" property is required')),I;function k(B){let V=[];const q=B.value,ee=B.key;if(Jn(q)!=="array")return[new Wt(ee,q,`array expected, ${Jn(q)} found`)];if(q.length!==2)return[new Wt(ee,q,`array length 2 expected, length ${q.length} found`)];if(T){if(Jn(q[0])!=="object")return[new Wt(ee,q,`object expected, ${Jn(q[0])} found`)];if(q[0].zoom===void 0)return[new Wt(ee,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Wt(ee,q,"object stop key must have value")];const le=Jt(q[0].zoom);if(typeof le!="number")return[new Wt(ee,q[0].zoom,"stop zoom values must be numbers")];if(d&&d>le)return[new Wt(ee,q[0].zoom,"stop zoom values must appear in ascending order")];le!==d&&(d=le,u=void 0,_={}),V=V.concat(Xr({key:`${ee}[0]`,value:q[0],valueSpec:{zoom:{}},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{zoom:ba,value:O}}))}else V=V.concat(O({key:`${ee}[0]`,value:q[0],valueSpec:{},style:B.style,styleSpec:B.styleSpec},q));return va(Yn(q[1]))?V.concat([new Wt(`${ee}[1]`,q[1],"expressions are not allowed in function stops.")]):V.concat(Mn({key:`${ee}[1]`,value:q[1],valueSpec:e,style:B.style,styleSpec:B.styleSpec}))}function O(B,V){const q=Jn(B.value),ee=Jt(B.value),le=B.value!==null?B.value:V;if(l){if(q!==l)return[new Wt(B.key,le,`${q} stop domain type must match previous stop domain type ${l}`)]}else l=q;if(q!=="number"&&q!=="string"&&q!=="boolean"&&typeof ee!="number"&&typeof ee!="string"&&typeof ee!="boolean")return[new Wt(B.key,le,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&o!=="categorical"){let be=`number expected, ${q} found`;return _a(e)&&o===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(B.key,le,be)]}return o!=="categorical"||q!=="number"||typeof ee=="number"&&isFinite(ee)&&Math.floor(ee)===ee?o!=="categorical"&&q==="number"&&typeof ee=="number"&&typeof u=="number"&&u!==void 0&&ee<u?[new Wt(B.key,le,"stop domain values must appear in ascending order")]:(u=ee,o==="categorical"&&ee in _?[new Wt(B.key,le,"stop domain values must be unique")]:(_[ee]=!0,[])):[new Wt(B.key,le,`integer expected, found ${String(ee)}`)]}}function Zs(r){const e=(r.expressionContext==="property"?du:al)(Yn(r.value),r.valueSpec);if(e.result==="error")return e.value.map(l=>new Wt(`${r.key}${l.key}`,r.value,l.message));const o=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new Wt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ns(o))return[new Wt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return Ro(o,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Vs(o,["zoom","feature-state"]))return[new Wt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!ir(o))return[new Wt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ro(r,e){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)o.delete(u);if(o.size===0)return[];const l=[];return r instanceof Mr&&o.has(r.name)?[new Wt(e.key,e.value,`["${r.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(r.eachChild(u=>{l.push(...Ro(u,e))}),l)}function wa(r){const e=r.key,o=r.value,l=r.valueSpec,u=[];return Array.isArray(l.values)?l.values.indexOf(Jt(o))===-1&&u.push(new Wt(e,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(Jt(o))===-1&&u.push(new Wt(e,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),u}function so(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!so(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function ss(r,e="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};so(r)||(r=Z(r));const o=r;let l=!0;try{l=function(T){if(!xo(T))return T;let I=Yn(T);return Ea(I),I=tc(I),I}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const u=He[`filter_${e}`],d=al(l,u);let _=null;if(d.result==="error")throw new Error(d.value.map(T=>`${T.key}: ${T.message}`).join(", "));_=(T,I,k)=>d.value.evaluate(T,I,{},k);let y=null,w=null;if(l!==o){const T=al(o,u);if(T.result==="error")throw new Error(T.value.map(I=>`${I.key}: ${I.message}`).join(", "));y=(I,k,O,B,V)=>T.value.evaluate(I,k,{},O,void 0,void 0,B,V),w=!ir(T.value.expression)}return _=_,{filter:_,dynamicFilter:y||void 0,needGeometry:Is(l),needFeature:!!w}}function tc(r){if(!Array.isArray(r))return r;const e=function(o){if(Fh.has(o[0])){for(let l=1;l<o.length;l++)if(xo(o[l]))return!0}return o}(r);return e===!0?e:e.map(o=>tc(o))}function Ea(r){let e=!1;const o=[];if(r[0]==="case"){for(let l=1;l<r.length-1;l+=2)e=e||xo(r[l]),o.push(r[l+1]);o.push(r[r.length-1])}else if(r[0]==="match"){e=e||xo(r[1]);for(let l=2;l<r.length-1;l+=2)o.push(r[l+1]);o.push(r[r.length-1])}else if(r[0]==="step"){e=e||xo(r[1]);for(let l=1;l<r.length-1;l+=2)o.push(r[l+1])}e&&(r.length=0,r.push("any",...o));for(let l=1;l<r.length;l++)Ea(r[l])}function xo(r){if(!Array.isArray(r))return!1;if((e=r[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let o=1;o<r.length;o++)if(xo(r[o]))return!0;return!1}const Fh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function nc(r,e){return r<e?-1:r>e?1:0}function Is(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(Is(r[e]))return!0;return!1}function Z(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?S(r[1],r[2],"=="):e==="!="?we(S(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?S(r[1],r[2],e):e==="any"?(o=r.slice(1),["any"].concat(o.map(Z))):e==="all"?["all"].concat(r.slice(1).map(Z)):e==="none"?["all"].concat(r.slice(1).map(Z).map(we)):e==="in"?z(r[1],r.slice(2)):e==="!in"?we(z(r[1],r.slice(2))):e==="has"?ie(r[1]):e==="!has"?we(ie(r[1])):e!=="within"||r;var o}function S(r,e,o){switch(r){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,r,e]}}function z(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",r,["literal",e.sort(nc)]]:["filter-in-small",r,["literal",e]]}}function ie(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function we(r){return["!",r]}function De(r){return so(Yn(r.value))?Zs(jn({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):tt(r)}function tt(r){const e=r.value,o=r.key;if(Jn(e)!=="array")return[new Wt(o,e,`array expected, ${Jn(e)} found`)];const l=r.styleSpec;let u,d=[];if(e.length<1)return[new Wt(o,e,"filter array must have at least 1 element")];switch(d=d.concat(wa({key:`${o}[0]`,value:e[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Jt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Jt(e[1])==="$type"&&d.push(new Wt(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&d.push(new Wt(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Jn(e[1]),u!=="string"&&d.push(new Wt(`${o}[1]`,e[1],`string expected, ${u} found`)));for(let _=2;_<e.length;_++)u=Jn(e[_]),Jt(e[1])==="$type"?d=d.concat(wa({key:`${o}[${_}]`,value:e[_],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&d.push(new Wt(`${o}[${_}]`,e[_],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let _=1;_<e.length;_++)d=d.concat(tt({key:`${o}[${_}]`,value:e[_],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":u=Jn(e[1]),e.length!==2?d.push(new Wt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&d.push(new Wt(`${o}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Jn(e[1]),e.length!==2?d.push(new Wt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="object"&&d.push(new Wt(`${o}[1]`,e[1],`object expected, ${u} found`))}return d}function At(r,e){const o=r.key,l=r.style,u=r.styleSpec,d=r.value,_=r.objectKey,y=u[`${e}_${r.layerType}`];if(!y)return[];const w=_.match(/^(.*)-transition$/);if(e==="paint"&&w&&y[w[1]]&&y[w[1]].transition)return Mn({key:o,value:d,valueSpec:u.transition,style:l,styleSpec:u});const T=r.valueSpec||y[_];if(!T)return[new Wt(o,d,`unknown property "${_}"`)];let I;if(Jn(d)==="string"&&_a(T)&&!T.tokens&&(I=/^{([^}]+)}$/.exec(d)))return[new Wt(o,d,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(I[1])} }\`.`)];const k=[];return r.layerType==="symbol"&&(_==="text-field"&&l&&!l.glyphs&&k.push(new Wt(o,d,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&vo(Yn(d))&&Jt(d.type)==="identity"&&k.push(new Wt(o,d,'"text-font" does not support identity functions'))),k.concat(Mn({key:r.key,value:d,valueSpec:T,style:l,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:_}))}function Gt(r){return At(r,"paint")}function ln(r){return At(r,"layout")}function pn(r){let e=[];const o=r.value,l=r.key,u=r.style,d=r.styleSpec;o.type||o.ref||e.push(new Wt(l,o,'either "type" or "ref" is required'));let _=Jt(o.type);const y=Jt(o.ref);if(o.id){const w=Jt(o.id);for(let T=0;T<r.arrayIndex;T++){const I=u.layers[T];Jt(I.id)===w&&e.push(new Wt(l,o.id,`duplicate layer id "${o.id}", previously used at line ${I.id.__line__}`))}}if("ref"in o){let w;["type","source","source-layer","filter","layout"].forEach(T=>{T in o&&e.push(new Wt(l,o[T],`"${T}" is prohibited for ref layers`))}),u.layers.forEach(T=>{Jt(T.id)===y&&(w=T)}),w?w.ref?e.push(new Wt(l,o.ref,"ref cannot reference another ref layer")):_=Jt(w.type):typeof y=="string"&&e.push(new Wt(l,o.ref,`ref layer "${y}" not found`))}else if(_!=="background"&&_!=="sky")if(o.source){const w=u.sources&&u.sources[o.source],T=w&&Jt(w.type);w?T==="vector"&&_==="raster"?e.push(new Wt(l,o.source,`layer "${o.id}" requires a raster source`)):T==="raster"&&_!=="raster"?e.push(new Wt(l,o.source,`layer "${o.id}" requires a vector source`)):T!=="vector"||o["source-layer"]?T==="raster-dem"&&_!=="hillshade"?e.push(new Wt(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||T==="geojson"&&w.lineMetrics||e.push(new Wt(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Wt(l,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new Wt(l,o.source,`source "${o.source}" not found`))}else e.push(new Wt(l,o,'missing required property "source"'));return e=e.concat(Xr({key:l,value:o,valueSpec:d.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mn({key:`${l}.type`,value:o.type,valueSpec:d.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:w=>De(jn({layerType:_},w)),layout:w=>Xr({layer:o,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":T=>ln(jn({layerType:_},T))}}),paint:w=>Xr({layer:o,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":T=>Gt(jn({layerType:_},T))}})}})),e}function $t(r){const e=r.value,o=r.key,l=Jn(e);return l!=="string"?[new Wt(o,e,`string expected, ${l} found`)]:[]}const Xn={promoteId:function({key:r,value:e}){if(Jn(e)==="string")return $t({key:r,value:e});{const o=[];for(const l in e)o.push(...$t({key:`${r}.${l}`,value:e[l]}));return o}}};function Pn(r){const e=r.value,o=r.key,l=r.styleSpec,u=r.style;if(!e.type)return[new Wt(o,e,'"type" is required')];const d=Jt(e.type);let _;switch(d){case"vector":case"raster":case"raster-dem":return _=Xr({key:o,value:e,valueSpec:l[`source_${d.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:Xn}),_;case"geojson":if(_=Xr({key:o,value:e,valueSpec:l.source_geojson,style:u,styleSpec:l,objectElementValidators:Xn}),e.cluster)for(const y in e.clusterProperties){const[w,T]=e.clusterProperties[y],I=typeof w=="string"?[w,["accumulated"],["get",y]]:w;_.push(...Zs({key:`${o}.${y}.map`,value:T,expressionContext:"cluster-map"})),_.push(...Zs({key:`${o}.${y}.reduce`,value:I,expressionContext:"cluster-reduce"}))}return _;case"video":return Xr({key:o,value:e,valueSpec:l.source_video,style:u,styleSpec:l});case"image":return Xr({key:o,value:e,valueSpec:l.source_image,style:u,styleSpec:l});case"canvas":return[new Wt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wa({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:l})}}function On(r){const e=r.value,o=r.styleSpec,l=o.light,u=r.style;let d=[];const _=Jn(e);if(e===void 0)return d;if(_!=="object")return d=d.concat([new Wt("light",e,`object expected, ${_} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&l[w[1]]&&l[w[1]].transition?Mn({key:y,value:e[y],valueSpec:o.transition,style:u,styleSpec:o}):l[y]?Mn({key:y,value:e[y],valueSpec:l[y],style:u,styleSpec:o}):[new Wt(y,e[y],`unknown property "${y}"`)])}return d}function Un(r){const e=r.value,o=r.key,l=r.style,u=r.styleSpec,d=u.terrain;let _=[];const y=Jn(e);if(e===void 0)return _;if(y!=="object")return _=_.concat([new Wt("terrain",e,`object expected, ${y} found`)]),_;for(const w in e){const T=w.match(/^(.*)-transition$/);_=_.concat(T&&d[T[1]]&&d[T[1]].transition?Mn({key:w,value:e[w],valueSpec:u.transition,style:l,styleSpec:u}):d[w]?Mn({key:w,value:e[w],valueSpec:d[w],style:l,styleSpec:u}):[new Wt(w,e[w],`unknown property "${w}"`)])}if(e.source){const w=l.sources&&l.sources[e.source],T=w&&Jt(w.type);w?T!=="raster-dem"&&_.push(new Wt(o,e.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):_.push(new Wt(o,e.source,`source "${e.source}" not found`))}else _.push(new Wt(o,e,'terrain is missing required property "source"'));return _}function Fn(r){const e=r.value,o=r.style,l=r.styleSpec,u=l.fog;let d=[];const _=Jn(e);if(e===void 0)return d;if(_!=="object")return d=d.concat([new Wt("fog",e,`object expected, ${_} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&u[w[1]]&&u[w[1]].transition?Mn({key:y,value:e[y],valueSpec:l.transition,style:o,styleSpec:l}):u[y]?Mn({key:y,value:e[y],valueSpec:u[y],style:o,styleSpec:l}):[new Wt(y,e[y],`unknown property "${y}"`)])}return d}const di={"*":()=>[],array:os,boolean:function(r){const e=r.value,o=r.key,l=Jn(e);return l!=="boolean"?[new Wt(o,e,`boolean expected, ${l} found`)]:[]},number:ba,color:function(r){const e=r.key,o=r.value,l=Jn(o);return l!=="string"?[new Wt(e,o,`color expected, ${l} found`)]:Do.parseCSSColor(o)===null?[new Wt(e,o,`color expected, "${o}" found`)]:[]},enum:wa,filter:De,function:pu,layer:pn,object:Xr,source:Pn,light:On,terrain:Un,fog:Fn,string:$t,formatted:function(r){return $t(r).length===0?[]:Zs(r)},resolvedImage:function(r){return $t(r).length===0?[]:Zs(r)},projection:function(r){const e=r.value,o=r.styleSpec,l=o.projection,u=r.style;let d=[];const _=Jn(e);if(_==="object")for(const y in e)d=d.concat(Mn({key:y,value:e[y],valueSpec:l[y],style:u,styleSpec:o}));else _!=="string"&&(d=d.concat([new Wt("projection",e,`object or string expected, ${_} found`)]));return d}};function Mn(r){const e=r.value,o=r.valueSpec,l=r.styleSpec;return o.expression&&vo(Jt(e))?pu(r):o.expression&&va(Yn(e))?Zs(r):o.type&&di[o.type]?di[o.type](r):Xr(jn({},r,{valueSpec:o.type?l[o.type]:o}))}function Cn(r){const e=r.value,o=r.key,l=$t(r);return l.length||(e.indexOf("{fontstack}")===-1&&l.push(new Wt(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&l.push(new Wt(o,e,'"glyphs" url must include a "{range}" token'))),l}function ni(r,e=He){return Qn(Mn({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Cn,"*":()=>[]}}))}const li=r=>Qn(Gt(r)),ci=r=>Qn(ln(r));function Qn(r){return r.slice().sort((e,o)=>e.line&&o.line?e.line-o.line:0)}function _i(r,e){let o=!1;if(e&&e.length)for(const l of e)r.fire(new an(new Error(l.message))),o=!0;return o}var pi=Oi;function Oi(r,e,o){var l=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var u=new Int32Array(this.arrayBuffer);r=u[0],this.d=(e=u[1])+2*(o=u[2]);for(var d=0;d<this.d*this.d;d++){var _=u[3+d],y=u[3+d+1];l.push(_===y?null:u.subarray(_,y))}var w=u[3+l.length+1];this.keys=u.subarray(u[3+l.length],w),this.bboxes=u.subarray(w),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var T=0;T<this.d*this.d;T++)l.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=r,this.padding=o,this.scale=e/r,this.uid=0;var I=o/e*r;this.min=-I,this.max=r+I}Oi.prototype.insert=function(r,e,o,l,u){this._forEachCell(e,o,l,u,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(u)},Oi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Oi.prototype._insertCell=function(r,e,o,l,u,d){this.cells[u].push(d)},Oi.prototype.query=function(r,e,o,l,u){var d=this.min,_=this.max;if(r<=d&&e<=d&&_<=o&&_<=l&&!u)return Array.prototype.slice.call(this.keys);var y=[];return this._forEachCell(r,e,o,l,this._queryCell,y,{},u),y},Oi.prototype._queryCell=function(r,e,o,l,u,d,_,y){var w=this.cells[u];if(w!==null)for(var T=this.keys,I=this.bboxes,k=0;k<w.length;k++){var O=w[k];if(_[O]===void 0){var B=4*O;(y?y(I[B+0],I[B+1],I[B+2],I[B+3]):r<=I[B+2]&&e<=I[B+3]&&o>=I[B+0]&&l>=I[B+1])?(_[O]=!0,d.push(T[O])):_[O]=!1}}},Oi.prototype._forEachCell=function(r,e,o,l,u,d,_,y){for(var w=this._convertToCellCoord(r),T=this._convertToCellCoord(e),I=this._convertToCellCoord(o),k=this._convertToCellCoord(l),O=w;O<=I;O++)for(var B=T;B<=k;B++){var V=this.d*B+O;if((!y||y(this._convertFromCellCoord(O),this._convertFromCellCoord(B),this._convertFromCellCoord(O+1),this._convertFromCellCoord(B+1)))&&u.call(this,r,e,o,l,V,d,_,y))return}},Oi.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Oi.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Oi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,e=3+this.cells.length+1+1,o=0,l=0;l<this.cells.length;l++)o+=this.cells[l].length;var u=new Int32Array(e+o+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var d=e,_=0;_<r.length;_++){var y=r[_];u[3+_]=d,u.set(y,d),d+=y.length}return u[3+r.length]=d,u.set(this.keys,d),u[3+r.length+1]=d+=this.keys.length,u.set(this.bboxes,d),d+=this.bboxes.length,u.buffer};const Qi={};function Ft(r,e,o={}){Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),Qi[e]={klass:r,omit:o.omit||[]}}Ft(Object,"Object"),pi.serialize=function(r,e){const o=r.toArrayBuffer();return e&&e.push(o),{buffer:o}},pi.deserialize=function(r){return new pi(r.buffer)},Object.defineProperty(pi,"name",{value:"Grid"}),Ft(pi,"Grid"),Ft(Nn,"Color"),Ft(Error,"Error"),Ft($,"AJAXError"),Ft(Ir,"ResolvedImage"),Ft(ec,"StylePropertyFunction"),Ft(Jl,"StyleExpression",{omit:["_evaluator"]}),Ft(Ql,"ZoomDependentExpression"),Ft(xa,"ZoomConstantExpression"),Ft(Mr,"CompoundExpression",{omit:["_evaluate"]});for(const r in Ws)Qi[Ws[r]._classRegistryKey]||Ft(Ws[r],`Expression${r}`);function ji(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function zo(r){return Y.ImageBitmap&&r instanceof Y.ImageBitmap}function Yr(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(ji(r)||zo(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return e&&e.push(o.buffer),o}if(r instanceof Y.ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const l of r)o.push(Yr(l,e));return o}if(typeof r=="object"){const o=r.constructor,l=o._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${l}`);const u=o.serialize?o.serialize(r,e):{};if(!o.serialize){for(const d in r)r.hasOwnProperty(d)&&(Qi[l].omit.indexOf(d)>=0||(u[d]=Yr(r[d],e)));r instanceof Error&&(u.message=r.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof r)}function Nr(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||ji(r)||zo(r)||ArrayBuffer.isView(r)||r instanceof Y.ImageData)return r;if(Array.isArray(r))return r.map(Nr);if(typeof r=="object"){const e=r.$name||"Object",{klass:o}=Qi[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(r);const l=Object.create(o.prototype);for(const u of Object.keys(r))u!=="$name"&&(l[u]=Nr(r[u]));return l}throw new Error("can't deserialize object of type "+typeof r)}class hr{constructor(){this.first=!0}update(e,o){const l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}const Ni=r=>r>=1536&&r<=1791,No=r=>r>=1872&&r<=1919,fr=r=>r>=2208&&r<=2303,vr=r=>r>=11904&&r<=12031,Kr=r=>r>=12032&&r<=12255,Ta=r=>r>=12272&&r<=12287,Ms=r=>r>=12288&&r<=12351,Fo=r=>r>=12352&&r<=12447,ic=r=>r>=12448&&r<=12543,Bh=r=>r>=12544&&r<=12591,rc=r=>r>=12704&&r<=12735,$h=r=>r>=12736&&r<=12783,oc=r=>r>=12784&&r<=12799,mu=r=>r>=12800&&r<=13055,_u=r=>r>=13056&&r<=13311,gu=r=>r>=13312&&r<=19903,yu=r=>r>=19968&&r<=40959,Uh=r=>r>=40960&&r<=42127,ll=r=>r>=42128&&r<=42191,vu=r=>r>=44032&&r<=55215,Aa=r=>r>=63744&&r<=64255,sc=r=>r>=64336&&r<=65023,Hp=r=>r>=65040&&r<=65055,ac=r=>r>=65072&&r<=65103,Gp=r=>r>=65104&&r<=65135,Vh=r=>r>=65136&&r<=65279,sd=r=>r>=65280&&r<=65519;function jh(r){for(const e of r)if(Hh(e.charCodeAt(0)))return!0;return!1}function Wp(r){for(const e of r)if(!qp(e.charCodeAt(0)))return!1;return!0}function qp(r){return!(Ni(r)||No(r)||fr(r)||sc(r)||Vh(r))}function Hh(r){return!(r!==746&&r!==747&&(r<4352||!(rc(r)||Bh(r)||ac(r)&&!(r>=65097&&r<=65103)||Aa(r)||_u(r)||vr(r)||$h(r)||!(!Ms(r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||gu(r)||yu(r)||mu(r)||(e=>e>=12592&&e<=12687)(r)||(e=>e>=43360&&e<=43391)(r)||(e=>e>=55216&&e<=55295)(r)||(e=>e>=4352&&e<=4607)(r)||vu(r)||Fo(r)||Ta(r)||(e=>e>=12688&&e<=12703)(r)||Kr(r)||oc(r)||ic(r)&&r!==12540||!(!sd(r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Gp(r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||(e=>e>=5120&&e<=5759)(r)||(e=>e>=6320&&e<=6399)(r)||Hp(r)||(e=>e>=19904&&e<=19967)(r)||Uh(r)||ll(r))))}function Gh(r){return!(Hh(r)||function(e){return!!((o=>o>=128&&o<=255)(e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||(o=>o>=8192&&o<=8303)(e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||(o=>o>=8448&&o<=8527)(e)||(o=>o>=8528&&o<=8591)(e)||(o=>o>=8960&&o<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||(o=>o>=9216&&o<=9279)(e)&&e!==9251||(o=>o>=9280&&o<=9311)(e)||(o=>o>=9312&&o<=9471)(e)||(o=>o>=9632&&o<=9727)(e)||(o=>o>=9728&&o<=9983)(e)&&!(e>=9754&&e<=9759)||(o=>o>=11008&&o<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ms(e)||ic(e)||(o=>o>=57344&&o<=63743)(e)||ac(e)||Gp(e)||sd(e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function Wh(r){return r>=1424&&r<=2303||sc(r)||Vh(r)}function _g(r,e){return!(!e&&Wh(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||(o=>o>=6016&&o<=6143)(r))}function gg(r){for(const e of r)if(Wh(e.charCodeAt(0)))return!0;return!1}const ad="deferred",xu="loading",ld="loaded";let cd=null,ao="unavailable",bo=null;const bu=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(ao="error"),cd&&cd(r)};function cl(){ud.fire(new Yt("pluginStateChange",{pluginStatus:ao,pluginURL:bo}))}const ud=new gn,qh=function(){return ao},lc=function(){if(ao!==ad||!bo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ao=xu,cl(),bo&&pe({url:bo},r=>{r?bu(r):(ao=ld,cl())})},Bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ao===ld||Bo.applyArabicShaping!=null,isLoading:()=>ao===xu,setState(r){ao=r.pluginStatus,bo=r.pluginURL},isParsed:()=>Bo.applyArabicShaping!=null&&Bo.processBidirectionalText!=null&&Bo.processStyledBidirectionalText!=null,getPluginURL:()=>bo};class Ii{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hr,this.transition={},this.pitch=0)}isSupportedScript(e){return function(o,l){for(const u of o)if(!_g(u.charCodeAt(0),l))return!1;return!0}(e,Bo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class wu{constructor(e,o){this.property=e,this.value=o,this.expression=function(l,u){if(vo(l))return new ec(l,u);if(va(l)){const d=du(l,u);if(d.result==="error")throw new Error(d.value.map(_=>`${_.key}: ${_.message}`).join(", "));return d.value}{let d=l;return typeof l=="string"&&u.type==="color"&&(d=Nn.parse(l)),{kind:"constant",evaluate:()=>d}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,l){return this.property.possiblyEvaluate(this,e,o,l)}}class cc{constructor(e){this.property=e,this.value=new wu(e,void 0)}transitioned(e,o){return new i(this.property,this.value,o,Ye({},e.transition,this.transition),e.now)}untransitioned(){return new i(this.property,this.value,null,{},0)}}class f{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Ke(this._values[e].value.value)}setValue(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new cc(this._values[e].property)),this._values[e].value=new wu(this._values[e].property,o===null?void 0:Ke(o))}getTransition(e){return Ke(this._values[e].transition)}setTransition(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new cc(this._values[e].property)),this._values[e].transition=Ke(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l);const u=this.getTransition(o);u!==void 0&&(e[`${o}-transition`]=u)}return e}transitioned(e,o){const l=new c(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].transitioned(e,o._values[u]);return l}untransitioned(){const e=new c(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class i{constructor(e,o,l,u,d){const _=u.delay||0,y=u.duration||0;d=d||0,this.property=e,this.value=o,this.begin=d+_,this.end=this.begin+y,e.specification.transition&&(u.delay||u.duration)&&(this.prior=l)}possiblyEvaluate(e,o,l){const u=e.now||0,d=this.value.possiblyEvaluate(e,o,l),_=this.prior;if(_){if(u>this.end)return this.prior=null,d;if(this.value.isDataDriven())return this.prior=null,d;if(u<this.begin)return _.possiblyEvaluate(e,o,l);{const y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(e,o,l),d,_e(y))}}return d}}class c{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,l){const u=new x(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,o,l);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class p{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Ke(this._values[e].value)}setValue(e,o){this._values[e]=new wu(this._values[e].property,o===null?void 0:Ke(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l)}return e}possiblyEvaluate(e,o,l){const u=new x(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,o,l);return u}}class v{constructor(e,o,l){this.property=e,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,l,u){return this.property.evaluate(this.value,this.parameters,e,o,l,u)}}class x{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class E{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,l){const u=Nl[this.specification.type];return u?u(e,o,l):e}}class A{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,l,u){return new v(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},l,u)}:e.expression,o)}interpolate(e,o,l){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new v(this,{kind:"constant",value:void 0},e.parameters);const u=Nl[this.specification.type];return u?new v(this,{kind:"constant",value:u(e.value.value,o.value.value,l)},e.parameters):e}evaluate(e,o,l,u,d,_){return e.kind==="constant"?e.value:e.evaluate(o,l,u,d,_)}}class P extends A{possiblyEvaluate(e,o,l,u){if(e.value===void 0)return new v(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){const d=e.expression.evaluate(o,null,{},l,u),_=e.property.specification.type==="resolvedImage"&&typeof d!="string"?d.name:d,y=this._calculate(_,_,_,o);return new v(this,{kind:"constant",value:y},o)}if(e.expression.kind==="camera"){const d=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new v(this,{kind:"constant",value:d},o)}return new v(this,e.expression,o)}evaluate(e,o,l,u,d,_){if(e.kind==="source"){const y=e.evaluate(o,l,u,d,_);return this._calculate(y,y,y,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},l,u),e.evaluate({zoom:Math.floor(o.zoom)},l,u),e.evaluate({zoom:Math.floor(o.zoom)+1},l,u),o):e.value}_calculate(e,o,l,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o,other:l}:{from:l,to:o,other:e}}interpolate(e){return e}}class R{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,u){if(e.value!==void 0){if(e.expression.kind==="constant"){const d=e.expression.evaluate(o,null,{},l,u);return this._calculate(d,d,d,o)}return this._calculate(e.expression.evaluate(new Ii(Math.floor(o.zoom-1),o)),e.expression.evaluate(new Ii(Math.floor(o.zoom),o)),e.expression.evaluate(new Ii(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,l,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class N{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,u){return!!e.expression.evaluate(o,null,{},l,u)}interpolate(){return!1}}class U{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const l=e[o];l.specification.overridable&&this.overridableProperties.push(o);const u=this.defaultPropertyValues[o]=new wu(l,void 0),d=this.defaultTransitionablePropertyValues[o]=new cc(l);this.defaultTransitioningPropertyValues[o]=d.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=u.possiblyEvaluate({})}}}function X(r,e){return 256*(r=Le(Math.floor(r),0,255))+Le(Math.floor(e),0,255)}Ft(A,"DataDrivenProperty"),Ft(E,"DataConstantProperty"),Ft(P,"CrossFadedDataDrivenProperty"),Ft(R,"CrossFadedProperty"),Ft(N,"ColorRampProperty");const ne={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class J{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class W{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function de(r,e=1){let o=0,l=0;return{members:r.map(u=>{const d=ne[u.type].BYTES_PER_ELEMENT,_=o=ae(o,Math.max(e,d)),y=u.components||1;return l=Math.max(l,d),o+=d*y,{name:u.name,type:u.type,components:y,offset:_}}),size:ae(o,Math.max(l,e)),alignment:e}}function ae(r,e){return Math.ceil(r/e)*e}class he extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.int16[u+0]=o,this.int16[u+1]=l,e}}he.prototype.bytesPerElement=4,Ft(he,"StructArrayLayout2i4");class fe extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const d=3*e;return this.int16[d+0]=o,this.int16[d+1]=l,this.int16[d+2]=u,e}}fe.prototype.bytesPerElement=6,Ft(fe,"StructArrayLayout3i6");class ye extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l,u)}emplace(e,o,l,u,d){const _=4*e;return this.int16[_+0]=o,this.int16[_+1]=l,this.int16[_+2]=u,this.int16[_+3]=d,e}}ye.prototype.bytesPerElement=8,Ft(ye,"StructArrayLayout4i8");class ce extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,u,d,_,y)}emplace(e,o,l,u,d,_,y,w){const T=6*e,I=12*e,k=3*e;return this.int16[T+0]=o,this.int16[T+1]=l,this.uint8[I+4]=u,this.uint8[I+5]=d,this.uint8[I+6]=_,this.uint8[I+7]=y,this.float32[k+2]=w,e}}ce.prototype.bytesPerElement=12,Ft(ce,"StructArrayLayout2i4ub1f12");class Ee extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l,u)}emplace(e,o,l,u,d){const _=4*e;return this.float32[_+0]=o,this.float32[_+1]=l,this.float32[_+2]=u,this.float32[_+3]=d,e}}Ee.prototype.bytesPerElement=16,Ft(Ee,"StructArrayLayout4f16");class We extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w,T,I){const k=this.length;return this.resize(k+1),this.emplace(k,e,o,l,u,d,_,y,w,T,I)}emplace(e,o,l,u,d,_,y,w,T,I,k){const O=10*e;return this.uint16[O+0]=o,this.uint16[O+1]=l,this.uint16[O+2]=u,this.uint16[O+3]=d,this.uint16[O+4]=_,this.uint16[O+5]=y,this.uint16[O+6]=w,this.uint16[O+7]=T,this.uint16[O+8]=I,this.uint16[O+9]=k,e}}We.prototype.bytesPerElement=20,Ft(We,"StructArrayLayout10ui20");class it extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w){const T=this.length;return this.resize(T+1),this.emplace(T,e,o,l,u,d,_,y,w)}emplace(e,o,l,u,d,_,y,w,T){const I=8*e;return this.uint16[I+0]=o,this.uint16[I+1]=l,this.uint16[I+2]=u,this.uint16[I+3]=d,this.uint16[I+4]=_,this.uint16[I+5]=y,this.uint16[I+6]=w,this.uint16[I+7]=T,e}}it.prototype.bytesPerElement=16,Ft(it,"StructArrayLayout8ui16");class ut extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,u,d,_)}emplace(e,o,l,u,d,_,y){const w=6*e;return this.int16[w+0]=o,this.int16[w+1]=l,this.int16[w+2]=u,this.int16[w+3]=d,this.int16[w+4]=_,this.int16[w+5]=y,e}}ut.prototype.bytesPerElement=12,Ft(ut,"StructArrayLayout6i12");class st extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee){const le=this.length;return this.resize(le+1),this.emplace(le,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee)}emplace(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le){const be=16*e;return this.int16[be+0]=o,this.int16[be+1]=l,this.int16[be+2]=u,this.int16[be+3]=d,this.uint16[be+4]=_,this.uint16[be+5]=y,this.uint16[be+6]=w,this.uint16[be+7]=T,this.int16[be+8]=I,this.int16[be+9]=k,this.int16[be+10]=O,this.int16[be+11]=B,this.int16[be+12]=V,this.int16[be+13]=q,this.int16[be+14]=ee,this.int16[be+15]=le,e}}st.prototype.bytesPerElement=32,Ft(st,"StructArrayLayout4i4ui4i4i32");class Ot extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const d=3*e;return this.float32[d+0]=o,this.float32[d+1]=l,this.float32[d+2]=u,e}}Ot.prototype.bytesPerElement=12,Ft(Ot,"StructArrayLayout3f12");class qe extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}qe.prototype.bytesPerElement=4,Ft(qe,"StructArrayLayout1ul4");class Dt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w,T,I,k,O,B){const V=this.length;return this.resize(V+1),this.emplace(V,e,o,l,u,d,_,y,w,T,I,k,O,B)}emplace(e,o,l,u,d,_,y,w,T,I,k,O,B,V){const q=20*e,ee=10*e;return this.int16[q+0]=o,this.int16[q+1]=l,this.int16[q+2]=u,this.int16[q+3]=d,this.int16[q+4]=_,this.float32[ee+3]=y,this.float32[ee+4]=w,this.float32[ee+5]=T,this.float32[ee+6]=I,this.int16[q+14]=k,this.uint32[ee+8]=O,this.uint16[q+18]=B,this.uint16[q+19]=V,e}}Dt.prototype.bytesPerElement=40,Ft(Dt,"StructArrayLayout5i4f1i1ul2ui40");class Mt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,u,d,_,y)}emplace(e,o,l,u,d,_,y,w){const T=8*e;return this.int16[T+0]=o,this.int16[T+1]=l,this.int16[T+2]=u,this.int16[T+4]=d,this.int16[T+5]=_,this.int16[T+6]=y,this.int16[T+7]=w,e}}Mt.prototype.bytesPerElement=16,Ft(Mt,"StructArrayLayout3i2i2i16");class rn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d){const _=this.length;return this.resize(_+1),this.emplace(_,e,o,l,u,d)}emplace(e,o,l,u,d,_){const y=4*e,w=8*e;return this.float32[y+0]=o,this.float32[y+1]=l,this.float32[y+2]=u,this.int16[w+6]=d,this.int16[w+7]=_,e}}rn.prototype.bytesPerElement=16,Ft(rn,"StructArrayLayout2f1f2i16");class ft extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l,u)}emplace(e,o,l,u,d){const _=12*e,y=3*e;return this.uint8[_+0]=o,this.uint8[_+1]=l,this.float32[y+1]=u,this.float32[y+2]=d,e}}ft.prototype.bytesPerElement=12,Ft(ft,"StructArrayLayout2ub2f12");class Qt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const d=3*e;return this.uint16[d+0]=o,this.uint16[d+1]=l,this.uint16[d+2]=u,e}}Qt.prototype.bytesPerElement=6,Ft(Qt,"StructArrayLayout3ui6");class yn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze)}emplace(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze,Ne){const rt=30*e,at=15*e,xt=60*e;return this.int16[rt+0]=o,this.int16[rt+1]=l,this.int16[rt+2]=u,this.float32[at+2]=d,this.float32[at+3]=_,this.uint16[rt+8]=y,this.uint16[rt+9]=w,this.uint32[at+5]=T,this.uint32[at+6]=I,this.uint32[at+7]=k,this.uint16[rt+16]=O,this.uint16[rt+17]=B,this.uint16[rt+18]=V,this.float32[at+10]=q,this.float32[at+11]=ee,this.uint8[xt+48]=le,this.uint8[xt+49]=be,this.uint8[xt+50]=ke,this.uint32[at+13]=Oe,this.int16[rt+28]=ze,this.uint8[xt+58]=Ne,e}}yn.prototype.bytesPerElement=60,Ft(yn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class tn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze,Ne,rt,at,xt,bt,nt,dt,Tt,Nt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze,Ne,rt,at,xt,bt,nt,dt,Tt,Nt)}emplace(e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee,le,be,ke,Oe,ze,Ne,rt,at,xt,bt,nt,dt,Tt,Nt,Lt){const zt=38*e,In=19*e;return this.int16[zt+0]=o,this.int16[zt+1]=l,this.int16[zt+2]=u,this.float32[In+2]=d,this.float32[In+3]=_,this.int16[zt+8]=y,this.int16[zt+9]=w,this.int16[zt+10]=T,this.int16[zt+11]=I,this.int16[zt+12]=k,this.int16[zt+13]=O,this.uint16[zt+14]=B,this.uint16[zt+15]=V,this.uint16[zt+16]=q,this.uint16[zt+17]=ee,this.uint16[zt+18]=le,this.uint16[zt+19]=be,this.uint16[zt+20]=ke,this.uint16[zt+21]=Oe,this.uint16[zt+22]=ze,this.uint16[zt+23]=Ne,this.uint16[zt+24]=rt,this.uint16[zt+25]=at,this.uint16[zt+26]=xt,this.uint16[zt+27]=bt,this.uint16[zt+28]=nt,this.uint32[In+15]=dt,this.float32[In+16]=Tt,this.float32[In+17]=Nt,this.float32[In+18]=Lt,e}}tn.prototype.bytesPerElement=76,Ft(tn,"StructArrayLayout3i2f6i15ui1ul3f76");class nn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}nn.prototype.bytesPerElement=4,Ft(nn,"StructArrayLayout1f4");class xn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,u,d,_,y)}emplace(e,o,l,u,d,_,y,w){const T=7*e;return this.float32[T+0]=o,this.float32[T+1]=l,this.float32[T+2]=u,this.float32[T+3]=d,this.float32[T+4]=_,this.float32[T+5]=y,this.float32[T+6]=w,e}}xn.prototype.bytesPerElement=28,Ft(xn,"StructArrayLayout7f28");class Bn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d){const _=this.length;return this.resize(_+1),this.emplace(_,e,o,l,u,d)}emplace(e,o,l,u,d,_){const y=5*e;return this.float32[y+0]=o,this.float32[y+1]=l,this.float32[y+2]=u,this.float32[y+3]=d,this.float32[y+4]=_,e}}Bn.prototype.bytesPerElement=20,Ft(Bn,"StructArrayLayout5f20");class _n extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l,u)}emplace(e,o,l,u,d){const _=6*e;return this.uint32[3*e+0]=o,this.uint16[_+2]=l,this.uint16[_+3]=u,this.uint16[_+4]=d,e}}_n.prototype.bytesPerElement=12,Ft(_n,"StructArrayLayout1ul3ui12");class wn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.uint16[u+0]=o,this.uint16[u+1]=l,e}}wn.prototype.bytesPerElement=4,Ft(wn,"StructArrayLayout2ui4");class ii extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}ii.prototype.bytesPerElement=2,Ft(ii,"StructArrayLayout1ui2");class Fi extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.float32[u+0]=o,this.float32[u+1]=l,e}}Fi.prototype.bytesPerElement=8,Ft(Fi,"StructArrayLayout2f8");class Fr extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,d,_,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,u,d,_,y)}emplace(e,o,l,u,d,_,y,w){const T=8*e,I=4*e;return this.int16[T+0]=o,this.int16[T+1]=l,this.int16[T+2]=u,this.int16[T+3]=d,this.int16[T+4]=_,this.int16[T+5]=y,this.float32[I+3]=w,e}}Fr.prototype.bytesPerElement=16,Ft(Fr,"StructArrayLayout6i1f16");class Br extends J{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Br.prototype.size=12;class wo extends ut{get(e){return new Br(this,e)}}Ft(wo,"FillExtrusionExtArray");class as extends J{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}as.prototype.size=40;class Xs extends Dt{get(e){return new as(this,e)}}Ft(Xs,"CollisionBoxArray");class Sa extends J{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Sa.prototype.size=60;class Ys extends yn{get(e){return new Sa(this,e)}}Ft(Ys,"PlacedSymbolArray");class Hi extends J{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Hi.prototype.size=76;class Xi extends tn{get(e){return new Hi(this,e)}}Ft(Xi,"SymbolInstanceArray");class ui extends nn{getoffsetX(e){return this.float32[1*e+0]}}Ft(ui,"GlyphOffsetArray");class rr extends fe{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ft(rr,"SymbolLineVertexArray");class Eo extends J{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Eo.prototype.size=12;class Bi extends _n{get(e){return new Eo(this,e)}}Ft(Bi,"FeatureIndexArray");class $o extends J{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}$o.prototype.size=4;class Eu extends wn{get(e){return new $o(this,e)}}Ft(Eu,"FillExtrusionCentroidArray");class To extends J{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}get a_scale(){return this._structArray.float32[this._pos4+3]}}To.prototype.size=16;class ul extends Fr{get(e){return new To(this,e)}}Ft(ul,"CircleGlobeExtArray");const Zp=de([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),hd=de([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var uc=Di(function(r){r.exports=function(e,o){var l,u,d,_,y,w,T,I;for(u=e.length-(l=3&e.length),d=o,y=3432918353,w=461845907,I=0;I<u;)T=255&e.charCodeAt(I)|(255&e.charCodeAt(++I))<<8|(255&e.charCodeAt(++I))<<16|(255&e.charCodeAt(++I))<<24,++I,d=27492+(65535&(_=5*(65535&(d=(d^=T=(65535&(T=(T=(65535&T)*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(T=0,l){case 3:T^=(255&e.charCodeAt(I+2))<<16;case 2:T^=(255&e.charCodeAt(I+1))<<8;case 1:d^=T=(65535&(T=(T=(65535&(T^=255&e.charCodeAt(I)))*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return d^=e.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),yg=Di(function(r){r.exports=function(e,o){for(var l,u=e.length,d=o^u,_=0;u>=4;)l=1540483477*(65535&(l=255&e.charCodeAt(_)|(255&e.charCodeAt(++_))<<8|(255&e.charCodeAt(++_))<<16|(255&e.charCodeAt(++_))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),u-=4,++_;switch(u){case 3:d^=(255&e.charCodeAt(_+2))<<16;case 2:d^=(255&e.charCodeAt(_+1))<<8;case 1:d=1540483477*(65535&(d^=255&e.charCodeAt(_)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),Ca=uc,fd=yg;Ca.murmur3=uc,Ca.murmur2=fd;class Xp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,l,u){this.ids.push(jx(e)),this.positions.push(o,l,u)}getPositions(e){const o=jx(e);let l=0,u=this.ids.length-1;for(;l<u;){const _=l+u>>1;this.ids[_]>=o?u=_:l=_+1}const d=[];for(;this.ids[l]===o;)d.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return d}static serialize(e,o){const l=new Float64Array(e.ids),u=new Uint32Array(e.positions);return vg(l,u,0,l.length-1),o&&o.push(l.buffer,u.buffer),{ids:l,positions:u}}static deserialize(e){const o=new Xp;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function jx(r){const e=+r;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ca(String(r))}function vg(r,e,o,l){for(;o<l;){const u=r[o+l>>1];let d=o-1,_=l+1;for(;;){do d++;while(r[d]<u);do _--;while(r[_]>u);if(d>=_)break;Yp(r,d,_),Yp(e,3*d,3*_),Yp(e,3*d+1,3*_+1),Yp(e,3*d+2,3*_+2)}_-o<l-_?(vg(r,e,o,_),o=_+1):(vg(r,e,_+1,l),l=_)}}function Yp(r,e,o){const l=r[e];r[e]=r[o],r[o]=l}Ft(Xp,"FeaturePositionMap");class hl{constructor(e,o){this.gl=e.gl,this.location=o}}class Kp extends hl{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Hx extends hl{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Gx extends hl{constructor(e,o){super(e,o),this.current=Nn.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const bI=new Float32Array(16),wI=new Float32Array(9),EI=new Float32Array(4);function xg(r){return[X(255*r.r,255*r.g),X(255*r.b,255*r.a)]}class dd{constructor(e,o,l){this.value=e,this.uniformNames=o.map(u=>`u_${u}`),this.type=l}setUniform(e,o,l){e.set(l.constantOr(this.value))}getBinding(e,o,l){return this.type==="color"?new Gx(e,o):new Kp(e,o)}}class Zh{constructor(e,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=o.tl.concat(o.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,o,l,u){const d=u==="u_pattern_to"||u==="u_dash_to"?this.patternTo:u==="u_pattern_from"||u==="u_dash_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;d&&e.set(d)}getBinding(e,o,l){return l==="u_pattern_from"||l==="u_pattern_to"||l==="u_dash_from"||l==="u_dash_to"?new Hx(e,o):new Kp(e,o)}}class fl{constructor(e,o,l,u){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(d=>({name:`a_${d}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,o,l,u,d,_){const y=this.paintVertexArray.length,w=this.expression.evaluate(new Ii(0),o,{},d,u,_);this.paintVertexArray.resize(e),this._setPaintValue(y,e,w)}updatePaintArray(e,o,l,u,d){const _=this.expression.evaluate({zoom:0},l,u,void 0,d);this._setPaintValue(e,o,_)}_setPaintValue(e,o,l){if(this.type==="color"){const u=xg(l);for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,u[0],u[1])}else{for(let u=e;u<o;u++)this.paintVertexArray.emplace(u,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ks{constructor(e,o,l,u,d,_){this.expression=e,this.uniformNames=o.map(y=>`u_${y}_t`),this.type=l,this.useIntegerZoom=u,this.zoom=d,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(e,o,l,u,d,_){const y=this.expression.evaluate(new Ii(this.zoom),o,{},d,u,_),w=this.expression.evaluate(new Ii(this.zoom+1),o,{},d,u,_),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,y,w)}updatePaintArray(e,o,l,u,d){const _=this.expression.evaluate({zoom:this.zoom},l,u,void 0,d),y=this.expression.evaluate({zoom:this.zoom+1},l,u,void 0,d);this._setPaintValue(e,o,_,y)}_setPaintValue(e,o,l,u){if(this.type==="color"){const d=xg(l),_=xg(u);for(let y=e;y<o;y++)this.paintVertexArray.emplace(y,d[0],d[1],_[0],_[1])}else{for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,l,u);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,u=Le(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(u)}getBinding(e,o,l){return new Kp(e,o)}}class hc{constructor(e,o,l,u,d,_,y){this.expression=e,this.type=l,this.useIntegerZoom=u,this.zoom=d,this.layerId=y,this.paintVertexAttributes=(l==="array"?hd:Zp).members;for(let w=0;w<o.length;++w);this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,o,l){const u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(e,o,l,u,d,_){this._setPaintValues(e,o,l.patterns&&l.patterns[this.layerId],_)}_setPaintValues(e,o,l,u){if(!u||!l)return;const{min:d,mid:_,max:y}=l,w=u[d],T=u[_],I=u[y];if(w&&T&&I)for(let k=e;k<o;k++)this._setPaintValue(this.zoomInPaintVertexArray,k,T,w),this._setPaintValue(this.zoomOutPaintVertexArray,k,T,I)}_setPaintValue(e,o,l,u){e.emplace(o,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fc{constructor(e,o,l=()=>!0){this.binders={},this._buffers=[];const u=[];for(const d in e.paint._values){if(!l(d))continue;const _=e.paint.get(d);if(!(_ instanceof v&&_a(_.property.specification)))continue;const y=AI(d,e.type),w=_.value,T=_.property.specification.type,I=_.property.useIntegerZoom,k=_.property.specification["property-type"],O=k==="cross-faded"||k==="cross-faded-data-driven",B=String(d)==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(w.kind!=="constant"||B)if(w.kind==="source"||B||O){const V=Wx(d,T,"source");this.binders[d]=O?new hc(w,y,T,I,o,V,e.id):new fl(w,y,T,V),u.push(`/a_${d}`)}else{const V=Wx(d,T,"composite");this.binders[d]=new Ks(w,y,T,I,o,V),u.push(`/z_${d}`)}else this.binders[d]=O?new Zh(w.value,y):new dd(w.value,y,T),u.push(`/u_${d}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof fl||o instanceof Ks?o.maxValue:0}populatePaintArrays(e,o,l,u,d,_){for(const y in this.binders){const w=this.binders[y];(w instanceof fl||w instanceof Ks||w instanceof hc)&&w.populatePaintArray(e,o,l,u,d,_)}}setConstantPatternPositions(e,o){for(const l in this.binders){const u=this.binders[l];u instanceof Zh&&u.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,l,u,d,_){let y=!1;for(const w in e){const T=o.getPositions(w);for(const I of T){const k=l.feature(I.index);for(const O in this.binders){const B=this.binders[O];if((B instanceof fl||B instanceof Ks||B instanceof hc)&&B.expression.isStateDependent===!0){const V=u.paint.get(O);B.expression=V.value,B.updatePaintArray(I.start,I.end,k,e[w],d,_),y=!0}}}}return y}defines(){const e=[];for(const o in this.binders){const l=this.binders[o];(l instanceof dd||l instanceof Zh)&&e.push(...l.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof fl||l instanceof Ks||l instanceof hc)for(let u=0;u<l.paintVertexAttributes.length;u++)e.push(l.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof dd||l instanceof Zh||l instanceof Ks)for(const u of l.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const l=[];for(const u in this.binders){const d=this.binders[u];if(d instanceof dd||d instanceof Zh||d instanceof Ks){for(const _ of d.uniformNames)if(o[_]){const y=d.getBinding(e,o[_],_);l.push({name:_,property:u,binding:y})}}}return l}setUniforms(e,o,l,u){for(const{name:d,property:_,binding:y}of o)this.binders[_].setUniform(y,u,l.get(_),d)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(e&&l instanceof hc){const u=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(l instanceof fl||l instanceof Ks)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(const o in this.binders){const l=this.binders[o];(l instanceof fl||l instanceof Ks||l instanceof hc)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof fl||o instanceof Ks||o instanceof hc)&&o.destroy()}}}class Tu{constructor(e,o,l=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new fc(u,o,l);this.needsUpload=!1,this._featureMap=new Xp,this._bufferOffset=0}populatePaintArrays(e,o,l,u,d,_,y){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,o,u,d,_,y);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,l,u,d){for(const _ of l)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,o,_,u,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const TI={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function AI(r,e){return TI[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}const SI={"line-pattern":{source:We,composite:We},"fill-pattern":{source:We,composite:We},"fill-extrusion-pattern":{source:We,composite:We},"line-dasharray":{source:it,composite:it}},CI={color:{source:Fi,composite:Ee},number:{source:nn,composite:Fi}};function Wx(r,e,o){const l=SI[r];return l&&l[o]||CI[e][o]}Ft(dd,"ConstantBinder"),Ft(Zh,"CrossFadedConstantBinder"),Ft(fl,"SourceExpressionBinder"),Ft(hc,"CrossFadedCompositeBinder"),Ft(Ks,"CompositeExpressionBinder"),Ft(fc,"ProgramConfiguration",{omit:["_buffers"]}),Ft(Tu,"ProgramConfigurationSet");const Jp="-transition";class Js extends gn{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new p(o.layout)),o.paint)){this._transitionablePaint=new f(o.paint);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new x(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,l={}){o!=null&&this._validate(ci,`layers.${this.id}.layout.${e}`,e,o,l)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return ht(e,Jp)?this._transitionablePaint.getTransition(e.slice(0,-Jp.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,l={}){if(o!=null&&this._validate(li,`layers.${this.id}.paint.${e}`,e,o,l))return!1;if(ht(e,Jp))return this._transitionablePaint.setTransition(e.slice(0,-Jp.length),o||void 0),!1;{const u=this._transitionablePaint._values[e],d=u.property.specification["property-type"]==="cross-faded-data-driven",_=u.value.isDataDriven(),y=u.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const w=this._transitionablePaint._values[e].value;return w.isDataDriven()||_||d||this._handleOverridablePaintPropertyUpdate(e,y,w)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,o,l){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ut(e,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(e,o,l,u,d={}){return(!d||d.validate!==!1)&&_i(this,e.call(ni,{key:o,layerType:this.type,objectKey:l,value:u,styleSpec:He,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof v&&_a(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ss(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const II=de([{name:"a_pos",components:2,type:"Int16"}],4),MI=de([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"},{name:"a_scale",components:1,type:"Float32"}]);class Yi{constructor(e=[]){this.segments=e}prepareSegment(e,o,l,u){let d=this.segments[this.segments.length-1];return e>Yi.MAX_VERTEX_ARRAY_LENGTH&&Ht(`Max vertices per segment is ${Yi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!d||d.vertexLength+e>Yi.MAX_VERTEX_ARRAY_LENGTH||d.sortKey!==u)&&(d={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},u!==void 0&&(d.sortKey=u),this.segments.push(d)),d}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,l,u){return new Yi([{vertexOffset:e,primitiveOffset:o,vertexLength:l,primitiveLength:u,vaos:{},sortKey:0}])}}Yi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ft(Yi,"SegmentVector");var Rn=8192;class dc{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof xi?new xi(e.lng,e.lat):xi.convert(e),this}setSouthWest(e){return this._sw=e instanceof xi?new xi(e.lng,e.lat):xi.convert(e),this}extend(e){const o=this._sw,l=this._ne;let u,d;if(e instanceof xi)u=e,d=e;else{if(!(e instanceof dc))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(dc.convert(e)):this.extend(xi.convert(e)):this;if(u=e._sw,d=e._ne,!u||!d)return this}return o||l?(o.lng=Math.min(u.lng,o.lng),o.lat=Math.min(u.lat,o.lat),l.lng=Math.max(d.lng,l.lng),l.lat=Math.max(d.lat,l.lat)):(this._sw=new xi(u.lng,u.lat),this._ne=new xi(d.lng,d.lat)),this}getCenter(){return new xi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new xi(this.getWest(),this.getNorth())}getSouthEast(){return new xi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:l}=xi.convert(e);let u=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&u}static convert(e){return!e||e instanceof dc?e:new dc(e)}}const bg=63710088e-1;class xi{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xi(pt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,l=this.lat*o,u=e.lat*o,d=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos((e.lng-this.lng)*o);return bg*Math.acos(Math.min(d,1))}toBounds(e=0){const o=360*e/40075017,l=o/Math.cos(Math.PI/180*this.lat);return new dc(new xi(this.lng-l,this.lat-o),new xi(this.lng+l,this.lat+o))}static convert(e){if(e instanceof xi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new xi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new xi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const qx=2*Math.PI*bg;function wg(r){return qx*Math.cos(r*Math.PI/180)}function pd(r){return(180+r)/360}function Xh(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Yh(r,e){return r/wg(e)}function ks(r){return 360*r-180}function $r(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Zx(r,e){return r*wg($r(e))}const Ia=85.051129;class Qp{constructor(e,o,l=0){this.x=+e,this.y=+o,this.z=+l}static fromLngLat(e,o=0){const l=xi.convert(e);return new Qp(pd(l.lng),Xh(l.lat),Yh(o,l.lat))}toLngLat(){return new xi(ks(this.x),$r(this.y))}toAltitude(){return Zx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/qx*(e=$r(this.y),1/Math.cos(e*Math.PI/180));var e}}function Eg(r,e,o,l,u,d,_,y,w){const T=(e+l)/2,I=(o+u)/2,k=new L(T,I);y(k),function(O,B,V,q,ee,le){const be=V-ee,ke=q-le;return Math.abs((q-B)*be-(V-O)*ke)/Math.hypot(be,ke)}(k.x,k.y,d.x,d.y,_.x,_.y)>=w?(Eg(r,e,o,T,I,d,k,y,w),Eg(r,T,I,l,u,k,_,y,w)):r.push(_)}function kI(r,e,o){let l=r[0],u=l.x,d=l.y;e(l);const _=[l];for(let y=1;y<r.length;y++){const w=r[y],{x:T,y:I}=w;e(w),Eg(_,u,d,T,I,l,w,e,o),u=T,d=I,l=w}return _}const Tg=Math.pow(2,14)-1,Xx=-Tg-1;function LI(r,e){const o=Math.round(r.x*e),l=Math.round(r.y*e);return r.x=Le(o,Xx,Tg),r.y=Le(l,Xx,Tg),(o<r.x||o>r.x+1||l<r.y||l>r.y+1)&&Ht("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function dl(r,e,o){const l=r.loadGeometry(),u=r.extent,d=Rn/u;if(e&&o&&o.projection.isReprojectedInTileSpace){const _=1<<e.z,{scale:y,x:w,y:T,projection:I}=o,k=O=>{const B=ks((e.x+O.x/u)/_),V=$r((e.y+O.y/u)/_),q=I.project(B,V);O.x=(q.x*y-w)*u,O.y=(q.y*y-T)*u};for(let O=0;O<l.length;O++)if(r.type!==1)l[O]=kI(l[O],k,1);else{const B=[];for(const V of l[O])V.x<0||V.x>=u||V.y<0||V.y>=u||(k(V),B.push(V));l[O]=B}}for(const _ of l)for(const y of _)LI(y,d);return l}function Au(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?dl(r):[]}}function em(r,e,o,l,u){r.emplaceBack(2*e+(l+1)/2,2*o+(u+1)/2)}function tm(r,e,o,l){const u=16384;r.emplaceBack(e.x,e.y,e.z,o[0]*u,o[1]*u,o[2]*u,l)}class Ag{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new he,this.indexArray=new Qt,this.segments=new Yi,this.programConfigurations=new Tu(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,u){const d=this.layers[0],_=[];let y=null;d.type==="circle"&&(y=d.layout.get("circle-sort-key"));for(const{feature:T,id:I,index:k,sourceLayerIndex:O}of e){const B=this.layers[0]._featureFilter.needGeometry,V=Au(T,B);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),V,l))continue;const q=y?y.evaluate(V,{},l):void 0,ee={id:I,properties:T.properties,type:T.type,sourceLayerIndex:O,index:k,geometry:B?V.geometry:dl(T,l,u),patterns:{},sortKey:q};_.push(ee)}y&&_.sort((T,I)=>T.sortKey-I.sortKey);let w=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new ul,w=u.projection);for(const T of _){const{geometry:I,index:k,sourceLayerIndex:O}=T,B=e[k].feature;this.addFeature(T,I,k,o.availableImages,l,w),o.featureIndex.insert(B,I,k,O,this.index)}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,II.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,MI.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,o,l,u,d,_){for(const y of o)for(const w of y){const T=w.x,I=w.y;if(T<0||T>=Rn||I<0||I>=Rn)continue;if(_){const B=_.projectTilePoint(T,I,d),V=_.upVector(d,T,I),q=$r((I/Rn+d.y)/(1<<d.z)),ee=_.pixelsPerMeter(q,1)/Yh(1,q),le=this.globeExtVertexArray;tm(le,B,V,ee),tm(le,B,V,ee),tm(le,B,V,ee),tm(le,B,V,ee)}const k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=k.vertexLength;em(this.layoutVertexArray,T,I,-1,-1),em(this.layoutVertexArray,T,I,1,-1),em(this.layoutVertexArray,T,I,1,1),em(this.layoutVertexArray,T,I,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),k.vertexLength+=4,k.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},u,d)}}function Yx(r,e){for(let o=0;o<r.length;o++)if(Kh(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(Kh(r,e[o]))return!0;return!!Sg(r,e)}function PI(r,e,o){return!!Kh(r,e)||!!Cg(e,r,o)}function Kx(r,e){if(r.length===1)return Qx(e,r[0]);for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<l.length;u++)if(Kh(r,l[u]))return!0}for(let o=0;o<r.length;o++)if(Qx(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(Sg(r,e[o]))return!0;return!1}function OI(r,e,o){if(r.length>1){if(Sg(r,e))return!0;for(let l=0;l<e.length;l++)if(Cg(e[l],r,o))return!0}for(let l=0;l<r.length;l++)if(Cg(r[l],e,o))return!0;return!1}function Sg(r,e){if(r.length===0||e.length===0)return!1;for(let o=0;o<r.length-1;o++){const l=r[o],u=r[o+1];for(let d=0;d<e.length-1;d++)if(DI(l,u,e[d],e[d+1]))return!0}return!1}function DI(r,e,o,l){return dn(r,o,l)!==dn(e,o,l)&&dn(r,e,o)!==dn(r,e,l)}function Cg(r,e,o){const l=o*o;if(e.length===1)return r.distSqr(e[0])<l;for(let u=1;u<e.length;u++)if(Jx(r,e[u-1],e[u])<l)return!0;return!1}function Jx(r,e,o){const l=e.distSqr(o);if(l===0)return r.distSqr(e);const u=((r.x-e.x)*(o.x-e.x)+(r.y-e.y)*(o.y-e.y))/l;return r.distSqr(u<0?e:u>1?o:o.sub(e)._mult(u)._add(e))}function Qx(r,e){let o,l,u,d=!1;for(let _=0;_<r.length;_++){o=r[_];for(let y=0,w=o.length-1;y<o.length;w=y++)l=o[y],u=o[w],l.y>e.y!=u.y>e.y&&e.x<(u.x-l.x)*(e.y-l.y)/(u.y-l.y)+l.x&&(d=!d)}return d}function Kh(r,e){let o=!1;for(let l=0,u=r.length-1;l<r.length;u=l++){const d=r[l],_=r[u];d.y>e.y!=_.y>e.y&&e.x<(_.x-d.x)*(e.y-d.y)/(_.y-d.y)+d.x&&(o=!o)}return o}function e1(r,e,o,l,u){for(const _ of r)if(e<=_.x&&o<=_.y&&l>=_.x&&u>=_.y)return!0;const d=[new L(e,o),new L(e,u),new L(l,u),new L(l,o)];if(r.length>2){for(const _ of d)if(Kh(r,_))return!0}for(let _=0;_<r.length-1;_++)if(RI(r[_],r[_+1],d))return!0;return!1}function RI(r,e,o){const l=o[0],u=o[2];if(r.x<l.x&&e.x<l.x||r.x>u.x&&e.x>u.x||r.y<l.y&&e.y<l.y||r.y>u.y&&e.y>u.y)return!1;const d=dn(r,e,o[0]);return d!==dn(r,e,o[1])||d!==dn(r,e,o[2])||d!==dn(r,e,o[3])}function Jh(r,e,o){const l=e.paint.get(r).value;return l.kind==="constant"?l.value:o.programConfigurations.get(e.id).getMaxValue(r)}function nm(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function t1(r,e,o,l,u){if(!e[0]&&!e[1])return r;const d=L.convert(e)._mult(u);o==="viewport"&&d._rotate(-l);const _=[];for(let y=0;y<r.length;y++)_.push(r[y].sub(d));return _}function n1(r,e,o,l){const u=L.convert(r)._mult(l);return e==="viewport"&&u._rotate(-o),u}Ft(Ag,"CircleBucket",{omit:["layers"]});const zI=new U({"circle-sort-key":new A(He.layout_circle["circle-sort-key"])});var NI={paint:new U({"circle-radius":new A(He.paint_circle["circle-radius"]),"circle-color":new A(He.paint_circle["circle-color"]),"circle-blur":new A(He.paint_circle["circle-blur"]),"circle-opacity":new A(He.paint_circle["circle-opacity"]),"circle-translate":new E(He.paint_circle["circle-translate"]),"circle-translate-anchor":new E(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new E(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new E(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new A(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new A(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new A(He.paint_circle["circle-stroke-opacity"])}),layout:zI},Ig=1e-6,Uo=typeof Float32Array!="undefined"?Float32Array:Array;function i1(){var r=new Uo(9);return Uo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Ma(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Mg(r,e,o){var l=e[0],u=e[1],d=e[2],_=e[3],y=e[4],w=e[5],T=e[6],I=e[7],k=e[8],O=e[9],B=e[10],V=e[11],q=e[12],ee=e[13],le=e[14],be=e[15],ke=o[0],Oe=o[1],ze=o[2],Ne=o[3];return r[0]=ke*l+Oe*y+ze*k+Ne*q,r[1]=ke*u+Oe*w+ze*O+Ne*ee,r[2]=ke*d+Oe*T+ze*B+Ne*le,r[3]=ke*_+Oe*I+ze*V+Ne*be,r[4]=(ke=o[4])*l+(Oe=o[5])*y+(ze=o[6])*k+(Ne=o[7])*q,r[5]=ke*u+Oe*w+ze*O+Ne*ee,r[6]=ke*d+Oe*T+ze*B+Ne*le,r[7]=ke*_+Oe*I+ze*V+Ne*be,r[8]=(ke=o[8])*l+(Oe=o[9])*y+(ze=o[10])*k+(Ne=o[11])*q,r[9]=ke*u+Oe*w+ze*O+Ne*ee,r[10]=ke*d+Oe*T+ze*B+Ne*le,r[11]=ke*_+Oe*I+ze*V+Ne*be,r[12]=(ke=o[12])*l+(Oe=o[13])*y+(ze=o[14])*k+(Ne=o[15])*q,r[13]=ke*u+Oe*w+ze*O+Ne*ee,r[14]=ke*d+Oe*T+ze*B+Ne*le,r[15]=ke*_+Oe*I+ze*V+Ne*be,r}function Su(r,e,o){var l,u,d,_,y,w,T,I,k,O,B,V,q=o[0],ee=o[1],le=o[2];return e===r?(r[12]=e[0]*q+e[4]*ee+e[8]*le+e[12],r[13]=e[1]*q+e[5]*ee+e[9]*le+e[13],r[14]=e[2]*q+e[6]*ee+e[10]*le+e[14],r[15]=e[3]*q+e[7]*ee+e[11]*le+e[15]):(u=e[1],d=e[2],_=e[3],y=e[4],w=e[5],T=e[6],I=e[7],k=e[8],O=e[9],B=e[10],V=e[11],r[0]=l=e[0],r[1]=u,r[2]=d,r[3]=_,r[4]=y,r[5]=w,r[6]=T,r[7]=I,r[8]=k,r[9]=O,r[10]=B,r[11]=V,r[12]=l*q+y*ee+k*le+e[12],r[13]=u*q+w*ee+O*le+e[13],r[14]=d*q+T*ee+B*le+e[14],r[15]=_*q+I*ee+V*le+e[15]),r}function pc(r,e,o){var l=o[0],u=o[1],d=o[2];return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r[3]=e[3]*l,r[4]=e[4]*u,r[5]=e[5]*u,r[6]=e[6]*u,r[7]=e[7]*u,r[8]=e[8]*d,r[9]=e[9]*d,r[10]=e[10]*d,r[11]=e[11]*d,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function kg(r,e,o){var l=Math.sin(o),u=Math.cos(o),d=e[4],_=e[5],y=e[6],w=e[7],T=e[8],I=e[9],k=e[10],O=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=d*u+T*l,r[5]=_*u+I*l,r[6]=y*u+k*l,r[7]=w*u+O*l,r[8]=T*u-d*l,r[9]=I*u-_*l,r[10]=k*u-y*l,r[11]=O*u-w*l,r}function Lg(r,e,o){var l=Math.sin(o),u=Math.cos(o),d=e[0],_=e[1],y=e[2],w=e[3],T=e[8],I=e[9],k=e[10],O=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=d*u-T*l,r[1]=_*u-I*l,r[2]=y*u-k*l,r[3]=w*u-O*l,r[8]=d*l+T*u,r[9]=_*l+I*u,r[10]=y*l+k*u,r[11]=w*l+O*u,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var FI=Mg;function Pg(){var r=new Uo(3);return Uo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function r1(r){var e=new Uo(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function o1(r){return Math.hypot(r[0],r[1],r[2])}function md(r,e,o){var l=new Uo(3);return l[0]=r,l[1]=e,l[2]=o,l}function s1(r,e,o){return r[0]=e[0]+o[0],r[1]=e[1]+o[1],r[2]=e[2]+o[2],r}function a1(r,e,o){return r[0]=e[0]-o[0],r[1]=e[1]-o[1],r[2]=e[2]-o[2],r}function l1(r,e,o){return r[0]=e[0]*o[0],r[1]=e[1]*o[1],r[2]=e[2]*o[2],r}function Og(r,e,o){return r[0]=Math.min(e[0],o[0]),r[1]=Math.min(e[1],o[1]),r[2]=Math.min(e[2],o[2]),r}function Dg(r,e,o){return r[0]=Math.max(e[0],o[0]),r[1]=Math.max(e[1],o[1]),r[2]=Math.max(e[2],o[2]),r}function _d(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r}function Rg(r,e,o,l){return r[0]=e[0]+o[0]*l,r[1]=e[1]+o[1]*l,r[2]=e[2]+o[2]*l,r}function gd(r,e){var o=e[0],l=e[1],u=e[2],d=o*o+l*l+u*u;return d>0&&(d=1/Math.sqrt(d)),r[0]=e[0]*d,r[1]=e[1]*d,r[2]=e[2]*d,r}function yd(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function c1(r,e,o){var l=e[0],u=e[1],d=e[2],_=o[0],y=o[1],w=o[2];return r[0]=u*w-d*y,r[1]=d*_-l*w,r[2]=l*y-u*_,r}function Cu(r,e,o){var l=e[0],u=e[1],d=e[2],_=o[3]*l+o[7]*u+o[11]*d+o[15];return r[0]=(o[0]*l+o[4]*u+o[8]*d+o[12])/(_=_||1),r[1]=(o[1]*l+o[5]*u+o[9]*d+o[13])/_,r[2]=(o[2]*l+o[6]*u+o[10]*d+o[14])/_,r}function u1(r,e,o){var l=o[0],u=o[1],d=o[2],_=e[0],y=e[1],w=e[2],T=u*w-d*y,I=d*_-l*w,k=l*y-u*_,O=u*k-d*I,B=d*T-l*k,V=l*I-u*T,q=2*o[3];return I*=q,k*=q,B*=2,V*=2,r[0]=_+(T*=q)+(O*=2),r[1]=y+I+B,r[2]=w+k+V,r}var vd,Qh=a1,BI=l1,$I=o1;function ef(r,e,o){var l=e[0],u=e[1],d=e[2],_=e[3];return r[0]=o[0]*l+o[4]*u+o[8]*d+o[12]*_,r[1]=o[1]*l+o[5]*u+o[9]*d+o[13]*_,r[2]=o[2]*l+o[6]*u+o[10]*d+o[14]*_,r[3]=o[3]*l+o[7]*u+o[11]*d+o[15]*_,r}function h1(){var r=new Uo(4);return Uo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function f1(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function d1(r,e,o){o*=.5;var l=e[0],u=e[1],d=e[2],_=e[3],y=Math.sin(o),w=Math.cos(o);return r[0]=l*w+_*y,r[1]=u*w+d*y,r[2]=d*w-u*y,r[3]=_*w-l*y,r}Pg(),vd=new Uo(4),Uo!=Float32Array&&(vd[0]=0,vd[1]=0,vd[2]=0,vd[3]=0),Pg(),md(1,0,0),md(0,1,0),h1(),h1(),i1();class zg{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,l,u){const d=Math.pow(2,l),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const T=ef([],w,e),I=1/T[3]/o*d;return function(k,O,B){return k[0]=O[0]*B[0],k[1]=O[1]*B[1],k[2]=O[2]*B[2],k[3]=O[3]*B[3],k}(T,T,[I,I,u?1/T[3]:I,I])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const T=gd([],c1([],Qh([],_[w[0]],_[w[1]]),Qh([],_[w[2]],_[w[1]]))),I=-yd(T,_[w[1]]);return T.concat(I)});return new zg(_,y)}}class ls{constructor(e,o){this.min=e,this.max=o,this.center=_d([],s1([],this.min,this.max),.5)}quadrant(e){const o=[e%2==0,e<2],l=r1(this.min),u=r1(this.max);for(let d=0;d<o.length;d++)l[d]=o[d]?this.min[d]:this.center[d],u[d]=o[d]?this.center[d]:this.max[d];return u[2]=this.max[2],new ls(l,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,o=this.max;return[[e[0],e[1],e[2]],[o[0],e[1],e[2]],[o[0],o[1],e[2]],[e[0],o[1],e[2]],[e[0],e[1],o[2]],[o[0],e[1],o[2]],[o[0],o[1],o[2]],[e[0],o[1],o[2]]]}intersects(e){const o=this.getCorners();let l=!0;for(let u=0;u<e.planes.length;u++){const d=e.planes[u];let _=0;for(let y=0;y<o.length;y++)_+=yd(d,o[y])+d[3]>=0;if(_===0)return 0;_!==o.length&&(l=!1)}if(l)return 2;for(let u=0;u<3;u++){let d=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let y=0;y<e.points.length;y++){const w=e.points[y][u]-this.min[u];d=Math.min(d,w),_=Math.max(_,w)}if(_<0||d>this.max[u]-this.min[u])return 0}return 1}}function p1(r,e,o,l,u,d,_,y,w){if(d&&r.queryGeometry.isAboveHorizon)return!1;d&&(w*=r.pixelToTileUnitsFactor);for(const T of e)for(const I of T){const k=I.add(y),O=u&&o.elevation?o.elevation.exaggeration()*u.getElevationAt(k.x,k.y,!0):0,B=d?k:UI(k,O,l),V=d?r.tilespaceRays.map(ee=>jI(ee,O)):r.queryGeometry.screenGeometry,q=ef([],[I.x,I.y,O,1],l);if(!_&&d?w*=q[3]/o.cameraToCenterDistance:_&&!d&&(w*=o.cameraToCenterDistance/q[3]),PI(V,B,w))return!0}return!1}function UI(r,e,o){const l=ef([],[r.x,r.y,e,1],o);return new L(l[0]/l[3],l[1]/l[3])}const m1=md(0,0,0),VI=md(0,0,1);function jI(r,e){const o=Pg();return m1[2]=e,r.intersectsPlane(m1,VI,o),new L(o[0],o[1])}class _1 extends Ag{}function g1(r,{width:e,height:o},l,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*o*l)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*o*l);return r.width=e,r.height=o,r.data=u,r}function y1(r,e,o){const{width:l,height:u}=e;l===r.width&&u===r.height||(Ng(r,e,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,l),height:Math.min(r.height,u)},o),r.width=l,r.height=u,r.data=e.data)}function Ng(r,e,o,l,u,d){if(u.width===0||u.height===0)return e;if(u.width>r.width||u.height>r.height||o.x>r.width-u.width||o.y>r.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||l.x>e.width-u.width||l.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const _=r.data,y=e.data;for(let w=0;w<u.height;w++){const T=((o.y+w)*r.width+o.x)*d,I=((l.y+w)*e.width+l.x)*d;for(let k=0;k<u.width*d;k++)y[I+k]=_[T+k]}return e}Ft(_1,"HeatmapBucket",{omit:["layers"]});class pl{constructor(e,o){g1(this,e,1,o)}resize(e){y1(this,new pl(e),1)}clone(){return new pl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,u,d){Ng(e,o,l,u,d,1)}}class Vo{constructor(e,o){g1(this,e,4,o)}resize(e){y1(this,new Vo(e),4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,u,d){Ng(e,o,l,u,d,4)}}Ft(pl,"AlphaImage"),Ft(Vo,"RGBAImage");var HI={paint:new U({"heatmap-radius":new A(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new A(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new E(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new N(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new E(He.paint_heatmap["heatmap-opacity"])})};function Fg(r){const e={},o=r.resolution||256,l=r.clips?r.clips.length:1,u=r.image||new Vo({width:o,height:l}),d=(_,y,w)=>{e[r.evaluationKey]=w;const T=r.expression.evaluate(e);u.data[_+y+0]=Math.floor(255*T.r/T.a),u.data[_+y+1]=Math.floor(255*T.g/T.a),u.data[_+y+2]=Math.floor(255*T.b/T.a),u.data[_+y+3]=Math.floor(255*T.a)};if(r.clips)for(let _=0,y=0;_<l;++_,y+=4*o)for(let w=0,T=0;w<o;w++,T+=4){const I=w/(o-1),{start:k,end:O}=r.clips[_];d(y,T,k*(1-I)+O*I)}else for(let _=0,y=0;_<o;_++,y+=4)d(0,y,_/(o-1));return u}var GI={paint:new U({"hillshade-illumination-direction":new E(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new E(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new E(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new E(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new E(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new E(He.paint_hillshade["hillshade-accent-color"])})};const WI=de([{name:"a_pos",components:2,type:"Int16"}],4),{members:qI}=WI;var im=rm,ZI=rm;function rm(r,e,o){o=o||2;var l,u,d,_,y,w,T,I=e&&e.length,k=I?e[0]*o:r.length,O=v1(r,0,k,o,!0),B=[];if(!O||O.next===O.prev)return B;if(I&&(O=function(q,ee,le,be){var ke,Oe,ze,Ne=[];for(ke=0,Oe=ee.length;ke<Oe;ke++)(ze=v1(q,ee[ke]*be,ke<Oe-1?ee[ke+1]*be:q.length,be,!1))===ze.next&&(ze.steiner=!0),Ne.push(nM(ze));for(Ne.sort(QI),ke=0;ke<Ne.length;ke++)le=mc(le=eM(Ne[ke],le),le.next);return le}(r,e,O,o)),r.length>80*o){l=d=r[0],u=_=r[1];for(var V=o;V<k;V+=o)(y=r[V])<l&&(l=y),(w=r[V+1])<u&&(u=w),y>d&&(d=y),w>_&&(_=w);T=(T=Math.max(d-l,_-u))!==0?1/T:0}return xd(O,B,o,l,u,T),B}function v1(r,e,o,l,u){var d,_;if(u===Ug(r,e,o,l)>0)for(d=e;d<o;d+=l)_=w1(d,r[d],r[d+1],_);else for(d=o-l;d>=e;d-=l)_=w1(d,r[d],r[d+1],_);return _&&om(_,_.next)&&(wd(_),_=_.next),_}function mc(r,e){if(!r)return r;e||(e=r);var o,l=r;do if(o=!1,l.steiner||!om(l,l.next)&&or(l.prev,l,l.next)!==0)l=l.next;else{if(wd(l),(l=e=l.prev)===l.next)break;o=!0}while(o||l!==e);return e}function xd(r,e,o,l,u,d,_){if(r){!_&&d&&function(I,k,O,B){var V=I;do V.z===null&&(V.z=Bg(V.x,V.y,k,O,B)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==I);V.prevZ.nextZ=null,V.prevZ=null,function(q){var ee,le,be,ke,Oe,ze,Ne,rt,at=1;do{for(le=q,q=null,Oe=null,ze=0;le;){for(ze++,be=le,Ne=0,ee=0;ee<at&&(Ne++,be=be.nextZ);ee++);for(rt=at;Ne>0||rt>0&&be;)Ne!==0&&(rt===0||!be||le.z<=be.z)?(ke=le,le=le.nextZ,Ne--):(ke=be,be=be.nextZ,rt--),Oe?Oe.nextZ=ke:q=ke,ke.prevZ=Oe,Oe=ke;le=be}Oe.nextZ=null,at*=2}while(ze>1)}(V)}(r,l,u,d);for(var y,w,T=r;r.prev!==r.next;)if(y=r.prev,w=r.next,d?YI(r,l,u,d):XI(r))e.push(y.i/o),e.push(r.i/o),e.push(w.i/o),wd(r),r=w.next,T=w.next;else if((r=w)===T){_?_===1?xd(r=KI(mc(r),e,o),e,o,l,u,d,2):_===2&&JI(r,e,o,l,u,d):xd(mc(r),e,o,l,u,d,1);break}}}function XI(r){var e=r.prev,o=r,l=r.next;if(or(e,o,l)>=0)return!1;for(var u=r.next.next;u!==r.prev;){if(tf(e.x,e.y,o.x,o.y,l.x,l.y,u.x,u.y)&&or(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function YI(r,e,o,l){var u=r.prev,d=r,_=r.next;if(or(u,d,_)>=0)return!1;for(var y=u.x>d.x?u.x>_.x?u.x:_.x:d.x>_.x?d.x:_.x,w=u.y>d.y?u.y>_.y?u.y:_.y:d.y>_.y?d.y:_.y,T=Bg(u.x<d.x?u.x<_.x?u.x:_.x:d.x<_.x?d.x:_.x,u.y<d.y?u.y<_.y?u.y:_.y:d.y<_.y?d.y:_.y,e,o,l),I=Bg(y,w,e,o,l),k=r.prevZ,O=r.nextZ;k&&k.z>=T&&O&&O.z<=I;){if(k!==r.prev&&k!==r.next&&tf(u.x,u.y,d.x,d.y,_.x,_.y,k.x,k.y)&&or(k.prev,k,k.next)>=0||(k=k.prevZ,O!==r.prev&&O!==r.next&&tf(u.x,u.y,d.x,d.y,_.x,_.y,O.x,O.y)&&or(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;k&&k.z>=T;){if(k!==r.prev&&k!==r.next&&tf(u.x,u.y,d.x,d.y,_.x,_.y,k.x,k.y)&&or(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;O&&O.z<=I;){if(O!==r.prev&&O!==r.next&&tf(u.x,u.y,d.x,d.y,_.x,_.y,O.x,O.y)&&or(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function KI(r,e,o){var l=r;do{var u=l.prev,d=l.next.next;!om(u,d)&&x1(u,l,l.next,d)&&bd(u,d)&&bd(d,u)&&(e.push(u.i/o),e.push(l.i/o),e.push(d.i/o),wd(l),wd(l.next),l=r=d),l=l.next}while(l!==r);return mc(l)}function JI(r,e,o,l,u,d){var _=r;do{for(var y=_.next.next;y!==_.prev;){if(_.i!==y.i&&iM(_,y)){var w=b1(_,y);return _=mc(_,_.next),w=mc(w,w.next),xd(_,e,o,l,u,d),void xd(w,e,o,l,u,d)}y=y.next}_=_.next}while(_!==r)}function QI(r,e){return r.x-e.x}function eM(r,e){var o=function(d,_){var y,w=_,T=d.x,I=d.y,k=-1/0;do{if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){var O=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(O<=T&&O>k){if(k=O,O===T){if(I===w.y)return w;if(I===w.next.y)return w.next}y=w.x<w.next.x?w:w.next}}w=w.next}while(w!==_);if(!y)return null;if(T===k)return y;var B,V=y,q=y.x,ee=y.y,le=1/0;w=y;do T>=w.x&&w.x>=q&&T!==w.x&&tf(I<ee?T:k,I,q,ee,I<ee?k:T,I,w.x,w.y)&&(B=Math.abs(I-w.y)/(T-w.x),bd(w,d)&&(B<le||B===le&&(w.x>y.x||w.x===y.x&&tM(y,w)))&&(y=w,le=B)),w=w.next;while(w!==V);return y}(r,e);if(!o)return e;var l=b1(o,r),u=mc(o,o.next);return mc(l,l.next),e===o?u:e}function tM(r,e){return or(r.prev,r,e.prev)<0&&or(e.next,r,r.next)<0}function Bg(r,e,o,l,u){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-o)*u)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function nM(r){var e=r,o=r;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==r);return o}function tf(r,e,o,l,u,d,_,y){return(u-_)*(e-y)-(r-_)*(d-y)>=0&&(r-_)*(l-y)-(o-_)*(e-y)>=0&&(o-_)*(d-y)-(u-_)*(l-y)>=0}function iM(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(o,l){var u=o;do{if(u.i!==o.i&&u.next.i!==o.i&&u.i!==l.i&&u.next.i!==l.i&&x1(u,u.next,o,l))return!0;u=u.next}while(u!==o);return!1}(r,e)&&(bd(r,e)&&bd(e,r)&&function(o,l){var u=o,d=!1,_=(o.x+l.x)/2,y=(o.y+l.y)/2;do u.y>y!=u.next.y>y&&u.next.y!==u.y&&_<(u.next.x-u.x)*(y-u.y)/(u.next.y-u.y)+u.x&&(d=!d),u=u.next;while(u!==o);return d}(r,e)&&(or(r.prev,r,e.prev)||or(r,e.prev,e))||om(r,e)&&or(r.prev,r,r.next)>0&&or(e.prev,e,e.next)>0)}function or(r,e,o){return(e.y-r.y)*(o.x-e.x)-(e.x-r.x)*(o.y-e.y)}function om(r,e){return r.x===e.x&&r.y===e.y}function x1(r,e,o,l){var u=am(or(r,e,o)),d=am(or(r,e,l)),_=am(or(o,l,r)),y=am(or(o,l,e));return u!==d&&_!==y||!(u!==0||!sm(r,o,e))||!(d!==0||!sm(r,l,e))||!(_!==0||!sm(o,r,l))||!(y!==0||!sm(o,e,l))}function sm(r,e,o){return e.x<=Math.max(r.x,o.x)&&e.x>=Math.min(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&e.y>=Math.min(r.y,o.y)}function am(r){return r>0?1:r<0?-1:0}function bd(r,e){return or(r.prev,r,r.next)<0?or(r,e,r.next)>=0&&or(r,r.prev,e)>=0:or(r,e,r.prev)<0||or(r,r.next,e)<0}function b1(r,e){var o=new $g(r.i,r.x,r.y),l=new $g(e.i,e.x,e.y),u=r.next,d=e.prev;return r.next=e,e.prev=r,o.next=u,u.prev=o,l.next=o,o.prev=l,d.next=l,l.prev=d,l}function w1(r,e,o,l){var u=new $g(r,e,o);return l?(u.next=l.next,u.prev=l,l.next.prev=u,l.next=u):(u.prev=u,u.next=u),u}function wd(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function $g(r,e,o){this.i=r,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ug(r,e,o,l){for(var u=0,d=e,_=o-l;d<o;d+=l)u+=(r[_]-r[d])*(r[d+1]+r[_+1]),_=d;return u}function rM(r,e,o,l,u){E1(r,e,o||0,l||r.length-1,u||oM)}function E1(r,e,o,l,u){for(;l>o;){if(l-o>600){var d=l-o+1,_=e-o+1,y=Math.log(d),w=.5*Math.exp(2*y/3),T=.5*Math.sqrt(y*w*(d-w)/d)*(_-d/2<0?-1:1);E1(r,e,Math.max(o,Math.floor(e-_*w/d+T)),Math.min(l,Math.floor(e+(d-_)*w/d+T)),u)}var I=r[e],k=o,O=l;for(Ed(r,o,e),u(r[l],I)>0&&Ed(r,o,l);k<O;){for(Ed(r,k,O),k++,O--;u(r[k],I)<0;)k++;for(;u(r[O],I)>0;)O--}u(r[o],I)===0?Ed(r,o,O):Ed(r,++O,l),O<=e&&(o=O+1),e<=O&&(l=O-1)}}function Ed(r,e,o){var l=r[e];r[e]=r[o],r[o]=l}function oM(r,e){return r<e?-1:r>e?1:0}function Vg(r,e){const o=r.length;if(o<=1)return[r];const l=[];let u,d;for(let _=0;_<o;_++){const y=Ue(r[_]);y!==0&&(r[_].area=Math.abs(y),d===void 0&&(d=y<0),d===y<0?(u&&l.push(u),u=[r[_]]):u.push(r[_]))}if(u&&l.push(u),e>1)for(let _=0;_<l.length;_++)l[_].length<=e||(rM(l[_],e,1,l[_].length-1,sM),l[_]=l[_].slice(0,e));return l}function sM(r,e){return e.area-r.area}function jg(r,e,o){const l=o.patternDependencies;let u=!1;for(const d of e){const _=d.paint.get(`${r}-pattern`);_.isConstant()||(u=!0);const y=_.constantOr(null);y&&(u=!0,l[y.to]=!0,l[y.from]=!0)}return u}function Hg(r,e,o,l,u){const d=u.patternDependencies;for(const _ of e){const y=_.paint.get(`${r}-pattern`).value;if(y.kind!=="constant"){let w=y.evaluate({zoom:l-1},o,{},u.availableImages),T=y.evaluate({zoom:l},o,{},u.availableImages),I=y.evaluate({zoom:l+1},o,{},u.availableImages);w=w&&w.name?w.name:w,T=T&&T.name?T.name:T,I=I&&I.name?I.name:I,d[w]=!0,d[T]=!0,d[I]=!0,o.patterns[_.id]={min:w,mid:T,max:I}}}return o}rm.deviation=function(r,e,o,l){var u=e&&e.length,d=Math.abs(Ug(r,0,u?e[0]*o:r.length,o));if(u)for(var _=0,y=e.length;_<y;_++)d-=Math.abs(Ug(r,e[_]*o,_<y-1?e[_+1]*o:r.length,o));var w=0;for(_=0;_<l.length;_+=3){var T=l[_]*o,I=l[_+1]*o,k=l[_+2]*o;w+=Math.abs((r[T]-r[k])*(r[I+1]-r[T+1])-(r[T]-r[I])*(r[k+1]-r[T+1]))}return d===0&&w===0?0:Math.abs((w-d)/d)},rm.flatten=function(r){for(var e=r[0][0].length,o={vertices:[],holes:[],dimensions:e},l=0,u=0;u<r.length;u++){for(var d=0;d<r[u].length;d++)for(var _=0;_<e;_++)o.vertices.push(r[u][d][_]);u>0&&o.holes.push(l+=r[u-1].length)}return o},im.default=ZI;class lm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new he,this.indexArray=new Qt,this.indexArray2=new wn,this.programConfigurations=new Tu(e.layers,e.zoom),this.segments=new Yi,this.segments2=new Yi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=e.projection}populate(e,o,l,u){this.hasPattern=jg("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:y,id:w,index:T,sourceLayerIndex:I}of e){const k=this.layers[0]._featureFilter.needGeometry,O=Au(y,k);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),O,l))continue;const B=d?d.evaluate(O,{},l,o.availableImages):void 0,V={id:w,properties:y.properties,type:y.type,sourceLayerIndex:I,index:T,geometry:k?O.geometry:dl(y,l,u),patterns:{},sortKey:B};_.push(V)}d&&_.sort((y,w)=>y.sortKey-w.sortKey);for(const y of _){const{geometry:w,index:T,sourceLayerIndex:I}=y;if(this.hasPattern){const k=Hg("fill",this.layers,y,this.zoom,o);this.patternFeatures.push(k)}else this.addFeature(y,w,T,l,{},o.availableImages);o.featureIndex.insert(e[T].feature,w,T,I,this.index)}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}addFeatures(e,o,l,u,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qI),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,l,u,d,_=[]){for(const y of Vg(o,500)){let w=0;for(const V of y)w+=V.length;const T=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),I=T.vertexLength,k=[],O=[];for(const V of y){if(V.length===0)continue;V!==y[0]&&O.push(k.length/2);const q=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),ee=q.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(ee+V.length-1,ee),k.push(V[0].x),k.push(V[0].y);for(let le=1;le<V.length;le++)this.layoutVertexArray.emplaceBack(V[le].x,V[le].y),this.indexArray2.emplaceBack(ee+le-1,ee+le),k.push(V[le].x),k.push(V[le].y);q.vertexLength+=V.length,q.primitiveLength+=V.length}const B=im(k,O);for(let V=0;V<B.length;V+=3)this.indexArray.emplaceBack(I+B[V],I+B[V+1],I+B[V+2]);T.vertexLength+=w,T.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,d,_,u)}}Ft(lm,"FillBucket",{omit:["layers","patternFeatures"]});const aM=new U({"fill-sort-key":new A(He.layout_fill["fill-sort-key"])});var lM={paint:new U({"fill-antialias":new E(He.paint_fill["fill-antialias"]),"fill-opacity":new A(He.paint_fill["fill-opacity"]),"fill-color":new A(He.paint_fill["fill-color"]),"fill-outline-color":new A(He.paint_fill["fill-outline-color"]),"fill-translate":new E(He.paint_fill["fill-translate"]),"fill-translate-anchor":new E(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new P(He.paint_fill["fill-pattern"])}),layout:aM};const cM=de([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),uM=de([{name:"a_centroid_pos",components:2,type:"Uint16"}]),hM=de([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:fM}=cM;var T1=nf;function nf(r,e,o,l,u){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=l,this._values=u,r.readFields(dM,this,e)}function dM(r,e,o){r==1?e.id=o.readVarint():r==2?function(l,u){for(var d=l.readVarint()+l.pos;l.pos<d;){var _=u._keys[l.readVarint()],y=u._values[l.readVarint()];u.properties[_]=y}}(o,e):r==3?e.type=o.readVarint():r==4&&(e._geometry=o.pos)}function pM(r){for(var e,o,l=0,u=0,d=r.length,_=d-1;u<d;_=u++)l+=((o=r[_]).x-(e=r[u]).x)*(e.y+o.y);return l}nf.types=["Unknown","Point","LineString","Polygon"],nf.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,o=r.readVarint()+r.pos,l=1,u=0,d=0,_=0,y=[];r.pos<o;){if(u<=0){var w=r.readVarint();l=7&w,u=w>>3}if(u--,l===1||l===2)d+=r.readSVarint(),_+=r.readSVarint(),l===1&&(e&&y.push(e),e=[]),e.push(new L(d,_));else{if(l!==7)throw new Error("unknown command "+l);e&&e.push(e[0].clone())}}return e&&y.push(e),y},nf.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,o=1,l=0,u=0,d=0,_=1/0,y=-1/0,w=1/0,T=-1/0;r.pos<e;){if(l<=0){var I=r.readVarint();o=7&I,l=I>>3}if(l--,o===1||o===2)(u+=r.readSVarint())<_&&(_=u),u>y&&(y=u),(d+=r.readSVarint())<w&&(w=d),d>T&&(T=d);else if(o!==7)throw new Error("unknown command "+o)}return[_,w,y,T]},nf.prototype.toGeoJSON=function(r,e,o){var l,u,d=this.extent*Math.pow(2,o),_=this.extent*r,y=this.extent*e,w=this.loadGeometry(),T=nf.types[this.type];function I(B){for(var V=0;V<B.length;V++){var q=B[V];B[V]=[360*(q.x+_)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+y)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var k=[];for(l=0;l<w.length;l++)k[l]=w[l][0];I(w=k);break;case 2:for(l=0;l<w.length;l++)I(w[l]);break;case 3:for(w=function(B){var V=B.length;if(V<=1)return[B];for(var q,ee,le=[],be=0;be<V;be++){var ke=pM(B[be]);ke!==0&&(ee===void 0&&(ee=ke<0),ee===ke<0?(q&&le.push(q),q=[B[be]]):q.push(B[be]))}return q&&le.push(q),le}(w),l=0;l<w.length;l++)for(u=0;u<w[l].length;u++)I(w[l][u])}w.length===1?w=w[0]:T="Multi"+T;var O={type:"Feature",geometry:{type:T,coordinates:w},properties:this.properties};return"id"in this&&(O.id=this.id),O};var A1=S1;function S1(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(mM,this,e),this.length=this._features.length}function mM(r,e,o){r===15?e.version=o.readVarint():r===1?e.name=o.readString():r===5?e.extent=o.readVarint():r===2?e._features.push(o.pos):r===3?e._keys.push(o.readString()):r===4&&e._values.push(function(l){for(var u=null,d=l.readVarint()+l.pos;l.pos<d;){var _=l.readVarint()>>3;u=_===1?l.readString():_===2?l.readFloat():_===3?l.readDouble():_===4?l.readVarint64():_===5?l.readVarint():_===6?l.readSVarint():_===7?l.readBoolean():null}return u}(o))}function _M(r,e,o){if(r===3){var l=new A1(o,o.readVarint()+o.pos);l.length&&(e[l.name]=l)}}S1.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new T1(this._pbf,e,this.extent,this._keys,this._values)};var Iu={VectorTile:function(r,e){this.layers=r.readFields(_M,{},e)},VectorTileFeature:T1,VectorTileLayer:A1};function cm(r,e,o,l){const u=[],d=l===0?(_,y,w,T,I,k)=>{_.push(new L(k,w+(k-y)/(T-y)*(I-w)))}:(_,y,w,T,I,k)=>{_.push(new L(y+(k-w)/(I-w)*(T-y),k))};for(const _ of r){const y=[];for(const w of _){if(w.length<=2)continue;const T=[];for(let O=0;O<w.length-1;O++){const B=w[O].x,V=w[O].y,q=w[O+1].x,ee=w[O+1].y,le=l===0?B:V,be=l===0?q:ee;le<e?be>e&&d(T,B,V,q,ee,e):le>o?be<o&&d(T,B,V,q,ee,o):T.push(w[O]),be<e&&le>=e&&d(T,B,V,q,ee,e),be>o&&le<=o&&d(T,B,V,q,ee,o)}let I=w[w.length-1];const k=l===0?I.x:I.y;k>=e&&k<=o&&T.push(I),T.length&&(I=T[T.length-1],T[0].x===I.x&&T[0].y===I.y||T.push(T[0]),y.push(T))}y.length&&u.push(y)}return u}const gM=Iu.VectorTileFeature.types,yM=Math.pow(2,13);function Td(r,e,o,l,u,d,_,y){r.emplaceBack((e<<1)+_,(o<<1)+d,(Math.floor(l*yM)<<1)+u,Math.round(y))}function Ad(r,e,o){const l=16384;r.emplaceBack(e.x,e.y,e.z,o[0]*l,o[1]*l,o[2]*l)}class C1{constructor(){this.acc=new L(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new L(e.x,e.y),this.max=new L(e.x,e.y))}append(e,o){this.currentPolyCount.edges++,this.acc._add(e);const l=this.min,u=this.max;e.x<l.x?l.x=e.x:e.x>u.x&&(u.x=e.x),e.y<l.y?l.y=e.y:e.y>u.y&&(u.y=e.y),((e.x===0||e.x===Rn)&&e.x===o.x)!=((e.y===0||e.y===Rn)&&e.y===o.y)&&this.processBorderOverlap(e,o),o.x<0!=e.x<0&&this.addBorderIntersection(0,mn(o.y,e.y,(0-o.x)/(e.x-o.x))),o.x>Rn!=e.x>Rn&&this.addBorderIntersection(1,mn(o.y,e.y,(Rn-o.x)/(e.x-o.x))),o.y<0!=e.y<0&&this.addBorderIntersection(2,mn(o.x,e.x,(0-o.y)/(e.y-o.y))),o.y>Rn!=e.y>Rn&&this.addBorderIntersection(3,mn(o.x,e.x,(Rn-o.y)/(e.y-o.y)))}addBorderIntersection(e,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[e];o<l[0]&&(l[0]=o),o>l[1]&&(l[1]=o)}processBorderOverlap(e,o){if(e.x===o.x){if(e.y===o.y)return;const l=e.x===0?0:1;this.addBorderIntersection(l,o.y),this.addBorderIntersection(l,e.y)}else{const l=e.y===0?2:3;this.addBorderIntersection(l,o.x),this.addBorderIntersection(l,e.x)}}centroid(){const e=this.polyCount.reduce((o,l)=>o+l.edges,0);return e!==0?this.acc.div(e)._round():new L(0,0)}span(){return new L(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,o)=>e+ +(o[0]!==Number.MAX_VALUE),0)}}class Sd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ye,this.centroidVertexArray=new Eu,this.indexArray=new Qt,this.programConfigurations=new Tu(e.layers,e.zoom),this.segments=new Yi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=e.enableTerrain}populate(e,o,l,u){this.features=[],this.hasPattern=jg("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(d){const _=Math.exp(Math.PI*(1-d.y/(1<<d.z)*2));return 80150034*_/(_*_+1)/Rn/(1<<d.z)}(l);for(const{feature:d,id:_,index:y,sourceLayerIndex:w}of e){const T=this.layers[0]._featureFilter.needGeometry,I=Au(d,T);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),I,l))continue;const k={id:_,sourceLayerIndex:w,index:y,geometry:T?I.geometry:dl(d,l,u),properties:d.properties,type:d.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(Hg("fill-extrusion",this.layers,k,this.zoom,o)):this.addFeature(k,k.geometry,y,l,{},o.availableImages,u),o.featureIndex.insert(d,k.geometry,y,w,this.index,O)}this.sortBorders()}addFeatures(e,o,l,u,d){for(const _ of this.features){const{geometry:y}=_;this.addFeature(_,y,_.index,o,l,u,d)}this.sortBorders()}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fM),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,hM.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,uM.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,u,d,_,y){const w=[new L(0,0),new L(Rn,Rn)],T=y.projection,I=T.name==="globe",k=this.enableTerrain&&!I?new C1:null;I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new wo);const O=Vg(o,500);for(let q=O.length-1;q>=0;q--){const ee=O[q];(ee.length===0||(B=ee[0]).every(le=>le.x<=0)||B.every(le=>le.x>=Rn)||B.every(le=>le.y<=0)||B.every(le=>le.y>=Rn))&&O.splice(q,1)}var B;let V;if(I){const q=11.25,ee=1<<u.z,le=ks(u.x/ee),be=ks((u.x+1)/ee),ke=$r(u.y/ee),Oe=$r((u.y+1)/ee);V=function(ze,Ne,rt,at,xt=0,bt){const nt=[];if(!ze.length||!rt||!at)return nt;const dt=(kn,$n)=>{for(const cn of kn)nt.push({polygon:cn,bounds:$n})},Tt=Math.ceil(Math.log2(rt)),Nt=Math.ceil(Math.log2(at)),Lt=Tt-Nt,zt=[];for(let kn=0;kn<Math.abs(Lt);kn++)zt.push(Lt>0?0:1);for(let kn=0;kn<Math.min(Tt,Nt);kn++)zt.push(0),zt.push(1);let In=ze;if(In=cm(In,Ne[0].y-xt,Ne[1].y+xt,1),In=cm(In,Ne[0].x-xt,Ne[1].x+xt,0),!In.length)return nt;const Wn=[];for(zt.length?Wn.push({polygons:In,bounds:Ne,depth:0}):dt(In,Ne);Wn.length;){const kn=Wn.pop(),$n=kn.depth,cn=zt[$n],Kt=kn.bounds[0],Kn=kn.bounds[1],hi=cn===0?Kt.x:Kt.y,dr=cn===0?Kn.x:Kn.y,Mi=bt?bt(cn,hi,dr):.5*(hi+dr),pr=cm(kn.polygons,hi-xt,Mi+xt,cn),fi=cm(kn.polygons,Mi-xt,dr+xt,cn);if(pr.length){const ei=[Kt,new L(cn===0?Mi:Kn.x,cn===1?Mi:Kn.y)];zt.length>$n+1?Wn.push({polygons:pr,bounds:ei,depth:$n+1}):dt(pr,ei)}if(fi.length){const ei=[new L(cn===0?Mi:Kt.x,cn===1?Mi:Kt.y),Kn];zt.length>$n+1?Wn.push({polygons:fi,bounds:ei,depth:$n+1}):dt(fi,ei)}}return nt}(O,w,Math.ceil((be-le)/q),Math.ceil((ke-Oe)/q),1,(ze,Ne,rt)=>{if(ze===0)return .5*(Ne+rt);{const at=$r((u.y+Ne/Rn)/ee);return(Xh(.5*($r((u.y+rt/Rn)/ee)+at))*ee-u.y)*Rn}})}else{V=[];for(const q of O)V.push({polygon:q,bounds:w})}for(const q of V){const ee=q.polygon;let le=0,be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let rt=0;rt<ee.length;rt++){const at=ee[rt];if(at.length===0)continue;le+=at.length;let xt=0;k&&k.startRing(at[0]);for(let bt=0;bt<at.length;bt++){const nt=at[bt];if(bt>=1){const dt=at[bt-1];if(!vM(nt,dt,q.bounds)){k&&k.append(nt,dt),be.vertexLength+4>Yi.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Tt=nt.sub(dt)._perp(),Nt=Tt.x/(Math.abs(Tt.x)+Math.abs(Tt.y)),Lt=Tt.y>0?1:0,zt=dt.dist(nt);xt+zt>32768&&(xt=0),Td(this.layoutVertexArray,nt.x,nt.y,Nt,Lt,0,0,xt),Td(this.layoutVertexArray,nt.x,nt.y,Nt,Lt,0,1,xt),xt+=zt,Td(this.layoutVertexArray,dt.x,dt.y,Nt,Lt,0,0,xt),Td(this.layoutVertexArray,dt.x,dt.y,Nt,Lt,0,1,xt);const In=be.vertexLength;if(this.indexArray.emplaceBack(In,In+2,In+1),this.indexArray.emplaceBack(In+1,In+2,In+3),be.vertexLength+=4,be.primitiveLength+=2,I){const Wn=this.layoutVertexExtArray,kn=T.projectTilePoint(nt.x,nt.y,u),$n=T.projectTilePoint(dt.x,dt.y,u),cn=T.upVector(u,nt.x,nt.y),Kt=T.upVector(u,dt.x,dt.y);Ad(Wn,kn,cn),Ad(Wn,kn,cn),Ad(Wn,$n,Kt),Ad(Wn,$n,Kt)}}}}}if(be.vertexLength+le>Yi.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray)),gM[e.type]!=="Polygon")continue;const ke=[],Oe=[],ze=be.vertexLength;for(let rt=0;rt<ee.length;rt++){const at=ee[rt];if(at.length!==0){at!==ee[0]&&Oe.push(ke.length/2);for(let xt=0;xt<at.length;xt++){const bt=at[xt];Td(this.layoutVertexArray,bt.x,bt.y,0,0,1,1,0),ke.push(bt.x),ke.push(bt.y),k&&k.currentPolyCount.top++,I&&Ad(this.layoutVertexExtArray,T.projectTilePoint(bt.x,bt.y,u),T.upVector(u,bt.x,bt.y))}}}const Ne=im(ke,Oe);for(let rt=0;rt<Ne.length;rt+=3)this.indexArray.emplaceBack(ze+Ne[rt],ze+Ne[rt+2],ze+Ne[rt+1]);be.primitiveLength+=Ne.length/3,be.vertexLength+=le}if(k&&k.polyCount.length>0){if(k.borders){k.vertexArrayOffset=this.centroidVertexArray.length;const q=k.borders,ee=this.featuresOnBorder.push(k)-1;for(let le=0;le<4;le++)q[le][0]!==Number.MAX_VALUE&&this.borders[le].push(ee)}this.encodeCentroid(k.borders?void 0:k.centroid(),k)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,d,_,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((o,l)=>this.featuresOnBorder[o].borders[e][0]-this.featuresOnBorder[l].borders[e][0])}encodeCentroid(e,o,l=!0){let u,d;if(e)if(e.y!==0){const y=o.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(y.x/10)),d=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(y.y/10))}else u=Math.ceil(7*(e.x+450)),d=0;else u=0,d=+l;let _=l?this.centroidVertexArray.length:o.vertexArrayOffset;for(const y of o.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*y.edges+y.top);for(let w=0;w<2*y.edges;w++)this.centroidVertexArray.emplace(_++,0,d),this.centroidVertexArray.emplace(_++,u,d);for(let w=0;w<y.top;w++)this.centroidVertexArray.emplace(_++,u,d)}}}function vM(r,e,o){return r.x===e.x&&(r.x<o[0].x||r.x>o[1].x)||r.y===e.y&&(r.y<o[0].y||r.y>o[1].y)}Ft(Sd,"FillExtrusionBucket",{omit:["layers","features"]}),Ft(C1,"PartMetadata");var xM={paint:new U({"fill-extrusion-opacity":new E(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new A(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new E(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new E(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new P(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new A(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new A(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new E(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Cd(r,e){return r.x*e.x+r.y*e.y}function I1(r,e){if(r.length===1){let o=0;const l=e[o++];let u;for(;!u||l.equals(u);)if(u=e[o++],!u)return 1/0;for(;o<e.length;o++){const d=e[o],_=r[0],y=u.sub(l),w=d.sub(l),T=_.sub(l),I=Cd(y,y),k=Cd(y,w),O=Cd(w,w),B=Cd(T,y),V=Cd(T,w),q=I*O-k*k,ee=(O*B-k*V)/q,le=(I*V-k*B)/q,be=l.z*(1-ee-le)+u.z*ee+d.z*le;if(isFinite(be))return be}return 1/0}{let o=1/0;for(const l of e)o=Math.min(o,l.z);return o}}function M1(r){const e=new L(r[0],r[1]);return e.z=r[2],e}function bM(r,e,o,l,u,d,_,y){const w=_*u.getElevationAt(r,e,!0,!0),T=d[0]!==0,I=T?d[1]===0?_*(d[0]/7-450):_*function(k,O,B){const V=Math.floor(O[0]/8),q=Math.floor(O[1]/8),ee=10*(O[0]-8*V),le=10*(O[1]-8*q),be=k.getElevationAt(V,q,!0,!0),ke=k.getMeterToDEM(B),Oe=Math.floor(.5*(ee*ke-1)),ze=Math.floor(.5*(le*ke-1)),Ne=k.tileCoordToPixel(V,q),rt=2*Oe+1,at=2*ze+1,xt=function(Lt,zt,In,Wn,kn){return[Lt.getElevationAtPixel(zt,In,!0),Lt.getElevationAtPixel(zt+kn,In,!0),Lt.getElevationAtPixel(zt,In+kn,!0),Lt.getElevationAtPixel(zt+Wn,In+kn,!0)]}(k,Ne.x-Oe,Ne.y-ze,rt,at),bt=Math.abs(xt[0]-xt[1]),nt=Math.abs(xt[2]-xt[3]),dt=Math.abs(xt[0]-xt[2])+Math.abs(xt[1]-xt[3]),Tt=Math.min(.25,.5*ke*(bt+nt)/rt),Nt=Math.min(.25,.5*ke*dt/at);return be+Math.max(Tt*ee,Nt*le)}(u,d,y):w;return{base:w+(o===0)?-1:o,top:T?Math.max(I+l,w+o+2):w+l}}const wM=de([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:EM}=wM,TM=de([{name:"a_packed",components:3,type:"Float32"}]),{members:AM}=TM,SM=Iu.VectorTileFeature.types,CM=Math.cos(Math.PI/180*37.5);class um{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new ce,this.layoutVertexArray2=new Ot,this.indexArray=new Qt,this.programConfigurations=new Tu(e.layers,e.zoom),this.segments=new Yi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,u){this.hasPattern=jg("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:I,id:k,index:O,sourceLayerIndex:B}of e){const V=this.layers[0]._featureFilter.needGeometry,q=Au(I,V);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),q,l))continue;const ee=d?d.evaluate(q,{},l):void 0,le={id:k,properties:I.properties,type:I.type,sourceLayerIndex:B,index:O,geometry:V?q.geometry:dl(I,l,u),patterns:{},sortKey:ee};_.push(le)}d&&_.sort((I,k)=>I.sortKey-k.sortKey);const{lineAtlas:y,featureIndex:w}=o,T=this.addConstantDashes(y);for(const I of _){const{geometry:k,index:O,sourceLayerIndex:B}=I;if(T&&this.addFeatureDashes(I,y),this.hasPattern){const V=Hg("line",this.layers,I,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(I,k,O,l,y.positions,o.availableImages);w.insert(e[O].feature,k,O,B,this.index)}}addConstantDashes(e){let o=!1;for(const l of this.layers){const u=l.paint.get("line-dasharray").value,d=l.layout.get("line-cap").value;if(u.kind!=="constant"||d.kind!=="constant")o=!0;else{const _=d.value,y=u.value;if(!y)continue;e.addDash(y.from,_),e.addDash(y.to,_),y.other&&e.addDash(y.other,_)}}return o}addFeatureDashes(e,o){const l=this.zoom;for(const u of this.layers){const d=u.paint.get("line-dasharray").value,_=u.layout.get("line-cap").value;if(d.kind==="constant"&&_.kind==="constant")continue;let y,w,T,I,k,O;if(d.kind==="constant"){const ee=d.value;if(!ee)continue;y=ee.other||ee.to,w=ee.to,T=ee.from}else y=d.evaluate({zoom:l-1},e),w=d.evaluate({zoom:l},e),T=d.evaluate({zoom:l+1},e);_.kind==="constant"?I=k=O=_.value:(I=_.evaluate({zoom:l-1},e),k=_.evaluate({zoom:l},e),O=_.evaluate({zoom:l+1},e)),o.addDash(y,I),o.addDash(w,k),o.addDash(T,O);const B=o.getKey(y,I),V=o.getKey(w,k),q=o.getKey(T,O);e.patterns[u.id]={min:B,mid:V,max:q}}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}addFeatures(e,o,l,u,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,AM)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,EM),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,l,u,d,_){const y=this.layers[0].layout,w=y.get("line-join").evaluate(e,{}),T=y.get("line-cap").evaluate(e,{}),I=y.get("line-miter-limit"),k=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const O of o)this.addLine(O,e,w,T,I,k);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,d,_,u)}addLine(e,o,l,u,d,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<e.length-1;le++)this.totalDistance+=e[le].dist(e[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=SM[o.type]==="Polygon";let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let T=0;for(;T<w-1&&e[T].equals(e[T+1]);)T++;if(w<(y?3:2))return;l==="bevel"&&(d=1.05);const I=this.overscaling<=16?122880/(512*this.overscaling):0,k=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let O,B,V,q,ee;this.e1=this.e2=-1,y&&(O=e[w-2],ee=e[T].sub(O)._unit()._perp());for(let le=T;le<w;le++){if(V=le===w-1?y?e[T+1]:void 0:e[le+1],V&&e[le].equals(V))continue;ee&&(q=ee),O&&(B=O),O=e[le],ee=V?V.sub(O)._unit()._perp():q,q=q||ee;let be=q.add(ee);be.x===0&&be.y===0||be._unit();const ke=q.x*ee.x+q.y*ee.y,Oe=be.x*ee.x+be.y*ee.y,ze=Oe!==0?1/Oe:1/0,Ne=2*Math.sqrt(2-2*Oe),rt=Oe<CM&&B&&V,at=q.x*ee.y-q.y*ee.x>0;if(rt&&le>T){const nt=O.dist(B);if(nt>2*I){const dt=O.sub(O.sub(B)._mult(I/nt)._round());this.updateDistance(B,dt),this.addCurrentVertex(dt,q,0,0,k),B=dt}}const xt=B&&V;let bt=xt?l:y?"butt":u;if(xt&&bt==="round"&&(ze<_?bt="miter":ze<=2&&(bt="fakeround")),bt==="miter"&&ze>d&&(bt="bevel"),bt==="bevel"&&(ze>2&&(bt="flipbevel"),ze<d&&(bt="miter")),B&&this.updateDistance(B,O),bt==="miter")be._mult(ze),this.addCurrentVertex(O,be,0,0,k);else if(bt==="flipbevel"){if(ze>100)be=ee.mult(-1);else{const nt=ze*q.add(ee).mag()/q.sub(ee).mag();be._perp()._mult(nt*(at?-1:1))}this.addCurrentVertex(O,be,0,0,k),this.addCurrentVertex(O,be.mult(-1),0,0,k)}else if(bt==="bevel"||bt==="fakeround"){const nt=-Math.sqrt(ze*ze-1),dt=at?nt:0,Tt=at?0:nt;if(B&&this.addCurrentVertex(O,q,dt,Tt,k),bt==="fakeround"){const Nt=Math.round(180*Ne/Math.PI/20);for(let Lt=1;Lt<Nt;Lt++){let zt=Lt/Nt;if(zt!==.5){const Wn=zt-.5;zt+=zt*Wn*(zt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*Wn*Wn+(.848013+ke*(.215638*ke-1.06021)))}const In=ee.sub(q)._mult(zt)._add(q)._unit()._mult(at?-1:1);this.addHalfVertex(O,In.x,In.y,!1,at,0,k)}}V&&this.addCurrentVertex(O,ee,-dt,-Tt,k)}else if(bt==="butt")this.addCurrentVertex(O,be,0,0,k);else if(bt==="square"){const nt=B?1:-1;B||this.addCurrentVertex(O,be,nt,nt,k),this.addCurrentVertex(O,be,0,0,k),B&&this.addCurrentVertex(O,be,nt,nt,k)}else bt==="round"&&(B&&(this.addCurrentVertex(O,q,0,0,k),this.addCurrentVertex(O,q,1,1,k,!0)),V&&(this.addCurrentVertex(O,ee,-1,-1,k,!0),this.addCurrentVertex(O,ee,0,0,k)));if(rt&&le<w-1){const nt=O.dist(V);if(nt>2*I){const dt=O.add(V.sub(O)._mult(I/nt)._round());this.updateDistance(O,dt),this.addCurrentVertex(dt,ee,0,0,k),O=dt}}}}addCurrentVertex(e,o,l,u,d,_=!1){const y=o.y*u-o.x,w=-o.y-o.x*u;this.addHalfVertex(e,o.x+o.y*l,o.y-o.x*l,_,!1,l,d),this.addHalfVertex(e,y,w,_,!0,-u,d)}addHalfVertex({x:e,y:o},l,u,d,_,y,w){this.layoutVertexArray.emplaceBack((e<<1)+(d?1:0),(o<<1)+(_?1:0),Math.round(63*l)+128,Math.round(63*u)+128,1+(y===0?0:y<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const T=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),w.primitiveLength++),_?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}Ft(um,"LineBucket",{omit:["layers","patternFeatures"]});const IM=new U({"line-cap":new A(He.layout_line["line-cap"]),"line-join":new A(He.layout_line["line-join"]),"line-miter-limit":new E(He.layout_line["line-miter-limit"]),"line-round-limit":new E(He.layout_line["line-round-limit"]),"line-sort-key":new A(He.layout_line["line-sort-key"])});var k1={paint:new U({"line-opacity":new A(He.paint_line["line-opacity"]),"line-color":new A(He.paint_line["line-color"]),"line-translate":new E(He.paint_line["line-translate"]),"line-translate-anchor":new E(He.paint_line["line-translate-anchor"]),"line-width":new A(He.paint_line["line-width"]),"line-gap-width":new A(He.paint_line["line-gap-width"]),"line-offset":new A(He.paint_line["line-offset"]),"line-blur":new A(He.paint_line["line-blur"]),"line-dasharray":new P(He.paint_line["line-dasharray"]),"line-pattern":new P(He.paint_line["line-pattern"]),"line-gradient":new N(He.paint_line["line-gradient"])}),layout:IM};const L1=new class extends A{possiblyEvaluate(r,e){return e=new Ii(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,o,l){return e=Ye({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,o,l)}}(k1.paint.properties["line-width"].specification);function P1(r,e){return e>0?e+2*r:r}L1.useIntegerZoom=!0;const MM=de([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),kM=de([{name:"a_projected_pos",components:3,type:"Float32"}],4);de([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const LM=de([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),PM=de([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);de([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const O1=de([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),OM=de([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);de([{name:"triangle",components:3,type:"Uint16"}]),de([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),de([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),de([{type:"Float32",name:"offsetX"}]),de([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ur=24;const ka=128;function Gg(r,e){const{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Ii(r+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:u}=o;let d=0;for(;d<l.length&&l[d]<=r;)d++;d=Math.max(0,d-1);let _=d;for(;_<l.length&&l[_]<r+1;)_++;_=Math.min(l.length-1,_);const y=l[d],w=l[_];return o.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:w,interpolationType:u}:{kind:"camera",minZoom:y,maxZoom:w,minSize:o.evaluate(new Ii(y)),maxSize:o.evaluate(new Ii(w)),interpolationType:u}}}function hm(r,{uSize:e,uSizeT:o},{lowerSize:l,upperSize:u}){return r.kind==="source"?l/ka:r.kind==="composite"?mn(l/ka,u/ka,o):e}function rf(r,e){let o=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:u,minZoom:d,maxZoom:_}=r,y=u?Le(zr.interpolationFactor(u,e,d,_),0,1):0;r.kind==="camera"?l=mn(r.minSize,r.maxSize,y):o=y}return{uSizeT:o,uSize:l}}var DM=Object.freeze({__proto__:null,getSizeData:Gg,evaluateSizeForFeature:hm,evaluateSizeForZoom:rf,SIZE_PACK_FACTOR:ka});function RM(r,e,o){return r.sections.forEach(l=>{l.text=function(u,d,_){const y=d.layout.get("text-transform").evaluate(_,{});return y==="uppercase"?u=u.toLocaleUpperCase():y==="lowercase"&&(u=u.toLocaleLowerCase()),Bo.applyArabicShaping&&(u=Bo.applyArabicShaping(u)),u}(l.text,e,o)}),r}const Id={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function zM(r){return r==="\uFE36"||r==="\uFE48"||r==="\uFE38"||r==="\uFE44"||r==="\uFE42"||r==="\uFE3E"||r==="\uFE3C"||r==="\uFE3A"||r==="\uFE18"||r==="\uFE40"||r==="\uFE10"||r==="\uFE13"||r==="\uFE14"||r==="\uFF40"||r==="\uFFE3"||r==="\uFE11"||r==="\uFE12"}function NM(r){return r==="\uFE35"||r==="\uFE47"||r==="\uFE37"||r==="\uFE43"||r==="\uFE41"||r==="\uFE3D"||r==="\uFE3B"||r==="\uFE39"||r==="\uFE17"||r==="\uFE3F"}var D1=function(r,e,o,l,u){var d,_,y=8*u-l-1,w=(1<<y)-1,T=w>>1,I=-7,k=o?u-1:0,O=o?-1:1,B=r[e+k];for(k+=O,d=B&(1<<-I)-1,B>>=-I,I+=y;I>0;d=256*d+r[e+k],k+=O,I-=8);for(_=d&(1<<-I)-1,d>>=-I,I+=l;I>0;_=256*_+r[e+k],k+=O,I-=8);if(d===0)d=1-T;else{if(d===w)return _?NaN:1/0*(B?-1:1);_+=Math.pow(2,l),d-=T}return(B?-1:1)*_*Math.pow(2,d-l)},R1=function(r,e,o,l,u,d){var _,y,w,T=8*d-u-1,I=(1<<T)-1,k=I>>1,O=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=l?0:d-1,V=l?1:-1,q=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,_=I):(_=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-_))<1&&(_--,w*=2),(e+=_+k>=1?O/w:O*Math.pow(2,1-k))*w>=2&&(_++,w/=2),_+k>=I?(y=0,_=I):_+k>=1?(y=(e*w-1)*Math.pow(2,u),_+=k):(y=e*Math.pow(2,k-1)*Math.pow(2,u),_=0));u>=8;r[o+B]=255&y,B+=V,y/=256,u-=8);for(_=_<<u|y,T+=u;T>0;r[o+B]=255&_,B+=V,_/=256,T-=8);r[o+B-V]|=128*q},Md=Ai;function Ai(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var Wg=4294967296,z1=1/Wg,N1=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ml(r){return r.type===Ai.Bytes?r.readVarint()+r.pos:r.pos+1}function of(r,e,o){return o?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function F1(r,e,o){var l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(l);for(var u=o.pos-1;u>=r;u--)o.buf[u+l]=o.buf[u]}function FM(r,e){for(var o=0;o<r.length;o++)e.writeVarint(r[o])}function BM(r,e){for(var o=0;o<r.length;o++)e.writeSVarint(r[o])}function $M(r,e){for(var o=0;o<r.length;o++)e.writeFloat(r[o])}function UM(r,e){for(var o=0;o<r.length;o++)e.writeDouble(r[o])}function VM(r,e){for(var o=0;o<r.length;o++)e.writeBoolean(r[o])}function jM(r,e){for(var o=0;o<r.length;o++)e.writeFixed32(r[o])}function HM(r,e){for(var o=0;o<r.length;o++)e.writeSFixed32(r[o])}function GM(r,e){for(var o=0;o<r.length;o++)e.writeFixed64(r[o])}function WM(r,e){for(var o=0;o<r.length;o++)e.writeSFixed64(r[o])}function fm(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function sf(r,e,o){r[o]=e,r[o+1]=e>>>8,r[o+2]=e>>>16,r[o+3]=e>>>24}function B1(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function qM(r,e,o){e.glyphs=[],r===1&&o.readMessage(ZM,e)}function ZM(r,e,o){if(r===3){const{id:l,bitmap:u,width:d,height:_,left:y,top:w,advance:T}=o.readMessage(XM,{});e.glyphs.push({id:l,bitmap:new pl({width:d+6,height:_+6},u),metrics:{width:d,height:_,left:y,top:w,advance:T}})}else r===4?e.ascender=o.readSVarint():r===5&&(e.descender=o.readSVarint())}function XM(r,e,o){r===1?e.id=o.readVarint():r===2?e.bitmap=o.readBytes():r===3?e.width=o.readVarint():r===4?e.height=o.readVarint():r===5?e.left=o.readSVarint():r===6?e.top=o.readSVarint():r===7&&(e.advance=o.readVarint())}function qg(r){let e=0,o=0;for(const _ of r)e+=_.w*_.h,o=Math.max(o,_.w);r.sort((_,y)=>y.h-_.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let u=0,d=0;for(const _ of r)for(let y=l.length-1;y>=0;y--){const w=l[y];if(!(_.w>w.w||_.h>w.h)){if(_.x=w.x,_.y=w.y,d=Math.max(d,_.y+_.h),u=Math.max(u,_.x+_.w),_.w===w.w&&_.h===w.h){const T=l.pop();y<l.length&&(l[y]=T)}else _.h===w.h?(w.x+=_.w,w.w-=_.w):_.w===w.w?(w.y+=_.h,w.h-=_.h):(l.push({x:w.x+_.w,y:w.y,w:w.w-_.w,h:_.h}),w.y+=_.h,w.h-=_.h);break}}return{w:u,h:d,fill:e/(u*d)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(r,e,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),u=l>>3,d=this.pos;this.type=7&l,r(u,e,this),this.pos===d&&this.skip(l)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=fm(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=B1(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=fm(this.buf,this.pos)+fm(this.buf,this.pos+4)*Wg;return this.pos+=8,r},readSFixed64:function(){var r=fm(this.buf,this.pos)+B1(this.buf,this.pos+4)*Wg;return this.pos+=8,r},readFloat:function(){var r=D1(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=D1(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,o,l=this.buf;return e=127&(o=l[this.pos++]),o<128?e:(e|=(127&(o=l[this.pos++]))<<7,o<128?e:(e|=(127&(o=l[this.pos++]))<<14,o<128?e:(e|=(127&(o=l[this.pos++]))<<21,o<128?e:function(u,d,_){var y,w,T=_.buf;if(y=(112&(w=T[_.pos++]))>>4,w<128||(y|=(127&(w=T[_.pos++]))<<3,w<128)||(y|=(127&(w=T[_.pos++]))<<10,w<128)||(y|=(127&(w=T[_.pos++]))<<17,w<128)||(y|=(127&(w=T[_.pos++]))<<24,w<128)||(y|=(1&(w=T[_.pos++]))<<31,w<128))return of(u,y,d);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=l[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&N1?function(o,l,u){return N1.decode(o.subarray(l,u))}(this.buf,e,r):function(o,l,u){for(var d="",_=l;_<u;){var y,w,T,I=o[_],k=null,O=I>239?4:I>223?3:I>191?2:1;if(_+O>u)break;O===1?I<128&&(k=I):O===2?(192&(y=o[_+1]))==128&&(k=(31&I)<<6|63&y)<=127&&(k=null):O===3?(w=o[_+2],(192&(y=o[_+1]))==128&&(192&w)==128&&((k=(15&I)<<12|(63&y)<<6|63&w)<=2047||k>=55296&&k<=57343)&&(k=null)):O===4&&(w=o[_+2],T=o[_+3],(192&(y=o[_+1]))==128&&(192&w)==128&&(192&T)==128&&((k=(15&I)<<18|(63&y)<<12|(63&w)<<6|63&T)<=65535||k>=1114112)&&(k=null)),k===null?(k=65533,O=1):k>65535&&(k-=65536,d+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k),d+=String.fromCharCode(k),_+=O}return d}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Ai.Bytes)return r.push(this.readVarint(e));var o=ml(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSVarint());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Ai.Bytes)return r.push(this.readBoolean());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFloat());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Ai.Bytes)return r.push(this.readDouble());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFixed32());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSFixed32());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFixed64());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSFixed64());var e=ml(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ai.Fixed32)this.pos+=4;else{if(e!==Ai.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),sf(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),sf(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),sf(this.buf,-1&r,this.pos),sf(this.buf,Math.floor(r*z1),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),sf(this.buf,-1&r,this.pos),sf(this.buf,Math.floor(r*z1),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,o){var l,u;if(e>=0?(l=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(l=~(-e%4294967296))?l=l+1|0:(l=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(d,_,y){y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,y.buf[y.pos]=127&(d>>>=7)}(l,0,o),function(d,_){var y=(7&d)<<4;_.buf[_.pos++]|=y|((d>>>=3)?128:0),d&&(_.buf[_.pos++]=127&d|((d>>>=7)?128:0),d&&(_.buf[_.pos++]=127&d|((d>>>=7)?128:0),d&&(_.buf[_.pos++]=127&d|((d>>>=7)?128:0),d&&(_.buf[_.pos++]=127&d|((d>>>=7)?128:0),d&&(_.buf[_.pos++]=127&d)))))}(u,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(l,u,d){for(var _,y,w=0;w<u.length;w++){if((_=u.charCodeAt(w))>55295&&_<57344){if(!y){_>56319||w+1===u.length?(l[d++]=239,l[d++]=191,l[d++]=189):y=_;continue}if(_<56320){l[d++]=239,l[d++]=191,l[d++]=189,y=_;continue}_=y-55296<<10|_-56320|65536,y=null}else y&&(l[d++]=239,l[d++]=191,l[d++]=189,y=null);_<128?l[d++]=_:(_<2048?l[d++]=_>>6|192:(_<65536?l[d++]=_>>12|224:(l[d++]=_>>18|240,l[d++]=_>>12&63|128),l[d++]=_>>6&63|128),l[d++]=63&_|128)}return d}(this.buf,r,this.pos);var o=this.pos-e;o>=128&&F1(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),R1(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),R1(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,e){this.pos++;var o=this.pos;r(e,this);var l=this.pos-o;l>=128&&F1(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(r,e,o){this.writeTag(r,Ai.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,FM,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,BM,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,VM,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,$M,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,UM,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,jM,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,HM,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,GM,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,WM,e)},writeBytesField:function(r,e){this.writeTag(r,Ai.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Ai.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Ai.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Ai.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class Zg{constructor(e,{pixelRatio:o,version:l,stretchX:u,stretchY:d,content:_}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=u,this.stretchY=d,this.content=_,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class $1{constructor(e,o){const l={},u={};this.haveRenderCallbacks=[];const d=[];this.addImages(e,l,d),this.addImages(o,u,d);const{w:_,h:y}=qg(d),w=new Vo({width:_||1,height:y||1});for(const T in e){const I=e[T],k=l[T].paddedRect;Vo.copy(I.data,w,{x:0,y:0},{x:k.x+1,y:k.y+1},I.data)}for(const T in o){const I=o[T],k=u[T].paddedRect,O=k.x+1,B=k.y+1,V=I.data.width,q=I.data.height;Vo.copy(I.data,w,{x:0,y:0},{x:O,y:B},I.data),Vo.copy(I.data,w,{x:0,y:q-1},{x:O,y:B-1},{width:V,height:1}),Vo.copy(I.data,w,{x:0,y:0},{x:O,y:B+q},{width:V,height:1}),Vo.copy(I.data,w,{x:V-1,y:0},{x:O-1,y:B},{width:1,height:q}),Vo.copy(I.data,w,{x:0,y:0},{x:O+V,y:B},{width:1,height:q})}this.image=w,this.iconPositions=l,this.patternPositions=u}addImages(e,o,l){for(const u in e){const d=e[u],_={x:0,y:0,w:d.data.width+2,h:d.data.height+2};l.push(_),o[u]=new Zg(_,d),d.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>e.hasImage(l)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),o)}patchUpdatedImage(e,o,l){if(!e||!o||e.version===o.version)return;e.version=o.version;const[u,d]=e.tl;l.update(o.data,void 0,{x:u,y:d})}}Ft(Zg,"ImagePosition"),Ft($1,"ImageAtlas");const cs={horizontal:1,vertical:2,horizontalOnly:3};class kd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const l=new kd;return l.scale=e||1,l.fontStack=o,l}static forImage(e){const o=new kd;return o.imageName=e,o}}class af{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const l=new af;for(let u=0;u<e.sections.length;u++){const d=e.sections[u];d.image?l.addImageSection(d):l.addTextSection(d,o)}return l}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(o,l){let u="";for(let d=0;d<o.length;d++){const _=o.charCodeAt(d+1)||null,y=o.charCodeAt(d-1)||null;u+=!l&&(_&&Gh(_)&&!Id[o[d+1]]||y&&Gh(y)&&!Id[o[d-1]])||!Id[o[d]]?o[d]:Id[o[d]]}return u}(this.text,e)}trim(){let e=0;for(let l=0;l<this.text.length&&dm[this.text.charCodeAt(l)];l++)e++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=e&&dm[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const l=new af;return l.text=this.text.substring(e,o),l.sectionIndex=this.sectionIndex.slice(e,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(kd.forText(e.scale,e.fontStack||o));const l=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(l)}addImageSection(e){const o=e.image?e.image.name:"";if(o.length===0)return void Ht("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(kd.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ht("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xg(r,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q){const ee=af.fromFeature(r,u);let le;k===cs.vertical&&ee.verticalizePunctuation(O);const{processBidirectionalText:be,processStyledBidirectionalText:ke}=Bo;if(be&&ee.sections.length===1){le=[];const Ne=be(ee.toString(),Yg(ee,T,d,e,l,B,V));for(const rt of Ne){const at=new af;at.text=rt,at.sections=ee.sections;for(let xt=0;xt<rt.length;xt++)at.sectionIndex.push(0);le.push(at)}}else if(ke){le=[];const Ne=ke(ee.text,ee.sectionIndex,Yg(ee,T,d,e,l,B,V));for(const rt of Ne){const at=new af;at.text=rt[0],at.sectionIndex=rt[1],at.sections=ee.sections,le.push(at)}}else le=function(Ne,rt){const at=[],xt=Ne.text;let bt=0;for(const nt of rt)at.push(Ne.substring(bt,nt)),bt=nt;return bt<xt.length&&at.push(Ne.substring(bt,xt.length)),at}(ee,Yg(ee,T,d,e,l,B,V));const Oe=[],ze={positionedLines:Oe,text:ee.toString(),top:I[1],bottom:I[1],left:I[0],right:I[0],writingMode:k,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ne,rt,at,xt,bt,nt,dt,Tt,Nt,Lt,zt,In){let Wn=0,kn=0,$n=0;const cn=Tt==="right"?1:Tt==="left"?0:.5;let Kt=!1;for(const fi of bt){const ei=fi.getSections();for(const bi of ei){if(bi.imageName)continue;const Gi=rt[bi.fontStack];if(Gi&&(Kt=Gi.ascender!==void 0&&Gi.descender!==void 0,!Kt))break}if(!Kt)break}let Kn=0;for(const fi of bt){fi.trim();const ei=fi.getMaxScale(),bi=(ei-1)*Ur,Gi={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[Kn]=Gi;const Ki=Gi.positionedGlyphs;let mr=0;if(!fi.length()){kn+=nt,++Kn;continue}let Er=0,Go=0;for(let Ei=0;Ei<fi.length();Ei++){const co=fi.getSection(Ei),Wo=fi.getSectionIndex(Ei),kr=fi.getCharCode(Ei);let Tr=co.scale,Ri=null,ki=null,So=null,uo=Ur,sr=0;const ho=!(Nt===cs.horizontal||!zt&&!Hh(kr)||zt&&(dm[kr]||(hi=kr,Ni(hi)||No(hi)||fr(hi)||sc(hi)||Vh(hi))));if(co.imageName){const Jr=xt[co.imageName];if(!Jr)continue;So=co.imageName,Ne.iconsInText=Ne.iconsInText||!0,ki=Jr.paddedRect;const Ar=Jr.displaySize;Tr=Tr*Ur/In,Ri={width:Ar[0],height:Ar[1],left:1,top:-3,advance:ho?Ar[1]:Ar[0],localGlyph:!1},sr=Kt?-Ri.height*Tr:ei*Ur-17-Ar[1]*Tr,uo=Ri.advance;const Ps=(ho?Ar[0]:Ar[1])*Tr-Ur*ei;Ps>0&&Ps>mr&&(mr=Ps)}else{const Jr=at[co.fontStack];if(!Jr)continue;Jr[kr]&&(ki=Jr[kr]);const Ar=rt[co.fontStack];if(!Ar)continue;const Ps=Ar.glyphs[kr];if(!Ps)continue;if(Ri=Ps.metrics,uo=kr!==8203?Ur:0,Kt){const wc=Ar.ascender!==void 0?Math.abs(Ar.ascender):0,$d=Ar.descender!==void 0?Math.abs(Ar.descender):0,Ud=(wc+$d)*Tr;Er<Ud&&(Er=Ud,Go=(wc-$d)/2*Tr),sr=-wc*Tr}else sr=(ei-Tr)*Ur-17}ho?(Ne.verticalizable=!0,Ki.push({glyph:kr,imageName:So,x:Wn,y:kn+sr,vertical:ho,scale:Tr,localGlyph:Ri.localGlyph,fontStack:co.fontStack,sectionIndex:Wo,metrics:Ri,rect:ki}),Wn+=uo*Tr+Lt):(Ki.push({glyph:kr,imageName:So,x:Wn,y:kn+sr,vertical:ho,scale:Tr,localGlyph:Ri.localGlyph,fontStack:co.fontStack,sectionIndex:Wo,metrics:Ri,rect:ki}),Wn+=Ri.advance*Tr+Lt)}Ki.length!==0&&($n=Math.max(Wn-Lt,$n),Kt?G1(Ki,cn,mr,Go,nt*ei/2):G1(Ki,cn,mr,0,nt/2)),Wn=0;const Ao=nt*ei+mr;Gi.lineOffset=Math.max(mr,bi),kn+=Ao,++Kn}var hi;const dr=kn,{horizontalAlign:Mi,verticalAlign:pr}=Kg(dt);(function(fi,ei,bi,Gi,Ki,mr){const Er=(ei-bi)*Ki,Go=-mr*Gi;for(const Ao of fi)for(const Ei of Ao.positionedGlyphs)Ei.x+=Er,Ei.y+=Go})(Ne.positionedLines,cn,Mi,pr,$n,dr),Ne.top+=-pr*dr,Ne.bottom=Ne.top+dr,Ne.left+=-Mi*$n,Ne.right=Ne.left+$n,Ne.hasBaseline=Kt}(ze,e,o,l,le,_,y,w,k,T,O,q),!function(Ne){for(const rt of Ne)if(rt.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&ze}const dm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},YM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function U1(r,e,o,l,u,d){if(e.imageName){const _=l[e.imageName];return _?_.displaySize[0]*e.scale*Ur/d+u:0}{const _=o[e.fontStack],y=_&&_.glyphs[r];return y?y.metrics.advance*e.scale+u:0}}function V1(r,e,o,l){const u=Math.pow(r-e,2);return l?r<e?u/2:2*u:u+Math.abs(o)*o}function KM(r,e,o){let l=0;return r===10&&(l-=1e4),o&&(l+=150),r!==40&&r!==65288||(l+=50),e!==41&&e!==65289||(l+=50),l}function j1(r,e,o,l,u,d){let _=null,y=V1(e,o,u,d);for(const w of l){const T=V1(e-w.x,o,u,d)+w.badness;T<=y&&(_=w,y=T)}return{index:r,x:e,priorBreak:_,badness:y}}function H1(r){return r?H1(r.priorBreak).concat(r.index):[]}function Yg(r,e,o,l,u,d,_){if(d!=="point")return[];if(!r)return[];const y=[],w=function(O,B,V,q,ee,le){let be=0;for(let ke=0;ke<O.length();ke++){const Oe=O.getSection(ke);be+=U1(O.getCharCode(ke),Oe,q,ee,B,le)}return be/Math.max(1,Math.ceil(be/V))}(r,e,o,l,u,_),T=r.text.indexOf("\u200B")>=0;let I=0;for(let O=0;O<r.length();O++){const B=r.getSection(O),V=r.getCharCode(O);if(dm[V]||(I+=U1(V,B,l,u,e,_)),O<r.length()-1){const q=!((k=V)<11904||!(rc(k)||Bh(k)||ac(k)||Aa(k)||_u(k)||vr(k)||$h(k)||Ms(k)||gu(k)||yu(k)||mu(k)||sd(k)||Fo(k)||Ta(k)||Kr(k)||oc(k)||ic(k)||Hp(k)||ll(k)||Uh(k)));(YM[V]||q||B.imageName)&&y.push(j1(O+1,I,w,y,KM(V,r.getCharCode(O+1),q&&T),!1))}}var k;return H1(j1(r.length(),I,w,y,0,!0))}function Kg(r){let e=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function G1(r,e,o,l,u){if(!(e||o||l||u))return;const d=r.length-1,_=r[d],y=(_.x+_.metrics.advance*_.scale)*e;for(let w=0;w<=d;w++)r[w].x-=y,r[w].y+=o+l+u}function JM(r,e,o){const{horizontalAlign:l,verticalAlign:u}=Kg(o),d=e[0]-r.displaySize[0]*l,_=e[1]-r.displaySize[1]*u;return{image:r,top:_,bottom:_+r.displaySize[1],left:d,right:d+r.displaySize[0]}}function W1(r,e,o,l,u,d){const _=r.image;let y;if(_.content){const ee=_.content,le=_.pixelRatio||1;y=[ee[0]/le,ee[1]/le,_.displaySize[0]-ee[2]/le,_.displaySize[1]-ee[3]/le]}const w=e.left*d,T=e.right*d;let I,k,O,B;o==="width"||o==="both"?(B=u[0]+w-l[3],k=u[0]+T+l[1]):(B=u[0]+(w+T-_.displaySize[0])/2,k=B+_.displaySize[0]);const V=e.top*d,q=e.bottom*d;return o==="height"||o==="both"?(I=u[1]+V-l[0],O=u[1]+q+l[2]):(I=u[1]+(V+q-_.displaySize[1])/2,O=I+_.displaySize[1]),{image:_,top:I,right:k,bottom:O,left:B,collisionPadding:y}}class _l extends L{constructor(e,o,l,u,d){super(e,o),this.angle=u,this.z=l,d!==void 0&&(this.segment=d)}clone(){return new _l(this.x,this.y,this.z,this.angle,this.segment)}}function q1(r,e,o,l,u){if(e.segment===void 0)return!0;let d=e,_=e.segment+1,y=0;for(;y>-o/2;){if(_--,_<0)return!1;y-=r[_].dist(d),d=r[_]}y+=r[_].dist(r[_+1]),_++;const w=[];let T=0;for(;y<o/2;){const I=r[_],k=r[_+1];if(!k)return!1;let O=r[_-1].angleTo(I)-I.angleTo(k);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:y,angleDelta:O}),T+=O;y-w[0].distance>l;)T-=w.shift().angleDelta;if(T>u)return!1;_++,y+=I.dist(k)}return!0}function Z1(r){let e=0;for(let o=0;o<r.length-1;o++)e+=r[o].dist(r[o+1]);return e}function X1(r,e,o){return r?.6*e*o:0}function Y1(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function QM(r,e,o,l,u,d){const _=X1(o,u,d),y=Y1(o,l)*d;let w=0;const T=Z1(r)/2;for(let I=0;I<r.length-1;I++){const k=r[I],O=r[I+1],B=k.dist(O);if(w+B>T){const V=(T-w)/B,q=mn(k.x,O.x,V),ee=mn(k.y,O.y,V),le=new _l(q,ee,0,O.angleTo(k),I);return!_||q1(r,le,y,_,e)?le:void 0}w+=B}}function ek(r,e,o,l,u,d,_,y,w){const T=X1(l,d,_),I=Y1(l,u),k=I*_,O=r[0].x===0||r[0].x===w||r[0].y===0||r[0].y===w;return e-k<e/4&&(e=k+e/4),K1(r,O?e/2*y%e:(I/2+2*d)*_*y%e,e,T,o,k,O,!1,w)}function K1(r,e,o,l,u,d,_,y,w){const T=d/2,I=Z1(r);let k=0,O=e-o,B=[];for(let V=0;V<r.length-1;V++){const q=r[V],ee=r[V+1],le=q.dist(ee),be=ee.angleTo(q);for(;O+o<k+le;){O+=o;const ke=(O-k)/le,Oe=mn(q.x,ee.x,ke),ze=mn(q.y,ee.y,ke);if(Oe>=0&&Oe<w&&ze>=0&&ze<w&&O-T>=0&&O+T<=I){const Ne=new _l(Oe,ze,0,be,V);Ne._round(),l&&!q1(r,Ne,d,l,u)||B.push(Ne)}}k+=le}return y||B.length||_||(B=K1(r,k/2,o,l,u,d,_,!0,w)),B}function J1(r,e,o,l,u){const d=[];for(let _=0;_<r.length;_++){const y=r[_];let w;for(let T=0;T<y.length-1;T++){let I=y[T],k=y[T+1];I.x<e&&k.x<e||(I.x<e?I=new L(e,I.y+(e-I.x)/(k.x-I.x)*(k.y-I.y))._round():k.x<e&&(k=new L(e,I.y+(e-I.x)/(k.x-I.x)*(k.y-I.y))._round()),I.y<o&&k.y<o||(I.y<o?I=new L(I.x+(o-I.y)/(k.y-I.y)*(k.x-I.x),o)._round():k.y<o&&(k=new L(I.x+(o-I.y)/(k.y-I.y)*(k.x-I.x),o)._round()),I.x>=l&&k.x>=l||(I.x>=l?I=new L(l,I.y+(l-I.x)/(k.x-I.x)*(k.y-I.y))._round():k.x>=l&&(k=new L(l,I.y+(l-I.x)/(k.x-I.x)*(k.y-I.y))._round()),I.y>=u&&k.y>=u||(I.y>=u?I=new L(I.x+(u-I.y)/(k.y-I.y)*(k.x-I.x),u)._round():k.y>=u&&(k=new L(I.x+(u-I.y)/(k.y-I.y)*(k.x-I.x),u)._round()),w&&I.equals(w[w.length-1])||(w=[I],d.push(w)),w.push(k)))))}}return d}Ft(_l,"Anchor");const Ld=1e20;function Q1(r,e,o,l,u,d,_,y,w){for(let T=e;T<e+l;T++)eb(r,o*d+T,d,u,_,y,w);for(let T=o;T<o+u;T++)eb(r,T*d+e,1,l,_,y,w)}function eb(r,e,o,l,u,d,_){d[0]=0,_[0]=-Ld,_[1]=Ld,u[0]=r[e];for(let y=1,w=0,T=0;y<l;y++){u[y]=r[e+y*o];const I=y*y;do{const k=d[w];T=(u[y]-u[k]+I-k*k)/(y-k)/2}while(T<=_[w]&&--w>-1);w++,d[w]=y,_[w]=T,_[w+1]=Ld}for(let y=0,w=0;y<l;y++){for(;_[w+1]<y;)w++;const T=d[w],I=y-T;r[e+y*o]=u[T]+I*I}}const Jg={none:0,ideographs:1,all:2};class lf{constructor(e,o,l){this.requestManager=e,this.localGlyphMode=o,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,o){const l=[];for(const u in e)for(const d of e[u])l.push({stack:u,id:d});Xe(l,({stack:u,id:d},_)=>{let y=this.entries[u];y||(y=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=y.glyphs[d];if(w!==void 0)return void _(null,{stack:u,id:d,glyph:w});if(w=this._tinySDF(y,u,d),w)return y.glyphs[d]=w,void _(null,{stack:u,id:d,glyph:w});const T=Math.floor(d/256);if(256*T>65535)return void _(new Error("glyphs > 65535 not supported"));if(y.ranges[T])return void _(null,{stack:u,id:d,glyph:w});let I=y.requests[T];I||(I=y.requests[T]=[],lf.loadGlyphRange(u,T,this.url,this.requestManager,(k,O)=>{if(O){y.ascender=O.ascender,y.descender=O.descender;for(const B in O.glyphs)this._doesCharSupportLocalGlyph(+B)||(y.glyphs[+B]=O.glyphs[+B]);y.ranges[T]=!0}for(const B of I)B(k,O);delete y.requests[T]})),I.push((k,O)=>{k?_(k):O&&_(null,{stack:u,id:d,glyph:O.glyphs[d]||null})})},(u,d)=>{if(u)o(u);else if(d){const _={};for(const{stack:y,id:w,glyph:T}of d)_[y]===void 0&&(_[y]={}),_[y].glyphs===void 0&&(_[y].glyphs={}),_[y].glyphs[w]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},_[y].ascender=this.entries[y].ascender,_[y].descender=this.entries[y].descender;o(null,_)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Jg.none&&(this.localGlyphMode===Jg.all?!!this.localFontFamily:!!this.localFontFamily&&(yu(e)||vu(e)||Fo(e)||ic(e)||Ms(e)))}_tinySDF(e,o,l){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(l))return;let d=e.tinySDF;if(!d){let q="400";/bold/i.test(o)?q="900":/medium/i.test(o)?q="500":/light/i.test(o)&&(q="200"),d=e.tinySDF=new lf.TinySDF({fontFamily:u,fontWeight:q,fontSize:48,buffer:6,radius:16}),d.fontWeight=q}if(this.localGlyphs[d.fontWeight][l])return this.localGlyphs[d.fontWeight][l];const _=String.fromCharCode(l),{data:y,width:w,height:T,glyphWidth:I,glyphHeight:k,glyphLeft:O,glyphTop:B,glyphAdvance:V}=d.draw(_);return this.localGlyphs[d.fontWeight][l]={id:l,bitmap:new pl({width:w,height:T},y),metrics:{width:I/2,height:k/2,left:O/2,top:B/2-27,advance:V/2,localGlyph:!0}}}}function tb(r,e,o,l){const u=[],d=r.image,_=d.pixelRatio,y=d.paddedRect.w-2,w=d.paddedRect.h-2,T=r.right-r.left,I=r.bottom-r.top,k=d.stretchX||[[0,y]],O=d.stretchY||[[0,w]],B=(nt,dt)=>nt+dt[1]-dt[0],V=k.reduce(B,0),q=O.reduce(B,0),ee=y-V,le=w-q;let be=0,ke=V,Oe=0,ze=q,Ne=0,rt=ee,at=0,xt=le;if(d.content&&l){const nt=d.content;be=pm(k,0,nt[0]),Oe=pm(O,0,nt[1]),ke=pm(k,nt[0],nt[2]),ze=pm(O,nt[1],nt[3]),Ne=nt[0]-be,at=nt[1]-Oe,rt=nt[2]-nt[0]-ke,xt=nt[3]-nt[1]-ze}const bt=(nt,dt,Tt,Nt)=>{const Lt=mm(nt.stretch-be,ke,T,r.left),zt=_m(nt.fixed-Ne,rt,nt.stretch,V),In=mm(dt.stretch-Oe,ze,I,r.top),Wn=_m(dt.fixed-at,xt,dt.stretch,q),kn=mm(Tt.stretch-be,ke,T,r.left),$n=_m(Tt.fixed-Ne,rt,Tt.stretch,V),cn=mm(Nt.stretch-Oe,ze,I,r.top),Kt=_m(Nt.fixed-at,xt,Nt.stretch,q),Kn=new L(Lt,In),hi=new L(kn,In),dr=new L(kn,cn),Mi=new L(Lt,cn),pr=new L(zt/_,Wn/_),fi=new L($n/_,Kt/_),ei=e*Math.PI/180;if(ei){const Ki=Math.sin(ei),mr=Math.cos(ei),Er=[mr,-Ki,Ki,mr];Kn._matMult(Er),hi._matMult(Er),Mi._matMult(Er),dr._matMult(Er)}const bi=nt.stretch+nt.fixed,Gi=dt.stretch+dt.fixed;return{tl:Kn,tr:hi,bl:Mi,br:dr,tex:{x:d.paddedRect.x+1+bi,y:d.paddedRect.y+1+Gi,w:Tt.stretch+Tt.fixed-bi,h:Nt.stretch+Nt.fixed-Gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pr,pixelOffsetBR:fi,minFontScaleX:rt/_/T,minFontScaleY:xt/_/I,isSDF:o}};if(l&&(d.stretchX||d.stretchY)){const nt=nb(k,ee,V),dt=nb(O,le,q);for(let Tt=0;Tt<nt.length-1;Tt++){const Nt=nt[Tt],Lt=nt[Tt+1];for(let zt=0;zt<dt.length-1;zt++)u.push(bt(Nt,dt[zt],Lt,dt[zt+1]))}}else u.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:w+1}));return u}function pm(r,e,o){let l=0;for(const u of r)l+=Math.max(e,Math.min(o,u[1]))-Math.max(e,Math.min(o,u[0]));return l}function nb(r,e,o){const l=[{fixed:-1,stretch:0}];for(const[u,d]of r){const _=l[l.length-1];l.push({fixed:u-_.stretch,stretch:_.stretch}),l.push({fixed:u-_.stretch,stretch:_.stretch+(d-u)})}return l.push({fixed:e+1,stretch:o}),l}function mm(r,e,o,l){return r/e*o+l}function _m(r,e,o,l){return r-e*o/l}function tk(r,e,o,l){const u=e+r.positionedLines[l].lineOffset;return l===0?o+u/2:o+(u+(e+r.positionedLines[l-1].lineOffset))/2}lf.loadGlyphRange=function(r,e,o,l,u){const d=256*e,_=d+255,y=l.transformRequest(l.normalizeGlyphsURL(o).replace("{fontstack}",r).replace("{range}",`${d}-${_}`),se.Glyphs);pe(y,(w,T)=>{if(w)u(w);else if(T){const I={},k=function(O){return new Md(O).readFields(qM,{})}(T);for(const O of k.glyphs)I[O.id]=O;u(null,{glyphs:I,ascender:k.ascender,descender:k.descender})}})},lf.TinySDF=class{constructor({fontSize:r=24,buffer:e=3,radius:o=8,cutoff:l=.25,fontFamily:u="sans-serif",fontWeight:d="normal",fontStyle:_="normal"}){this.buffer=e,this.cutoff=l,this.radius=o;const y=this.size=r+4*e,w=this._createCanvas(y),T=this.ctx=w.getContext("2d",{willReadFrequently:!0});T.font=`${_} ${d} ${r}px ${u}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(r){const e=document.createElement("canvas");return e.width=e.height=r,e}draw(r){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:l,actualBoundingBoxLeft:u,actualBoundingBoxRight:d}=this.ctx.measureText(r),_=Math.floor(o),y=Math.min(this.size-this.buffer,Math.ceil(d-u)),w=Math.min(this.size-this.buffer,Math.ceil(o)+Math.ceil(l)),T=y+2*this.buffer,I=w+2*this.buffer,k=T*I,O=new Uint8ClampedArray(k),B={data:O,width:T,height:I,glyphWidth:y,glyphHeight:w,glyphTop:_,glyphLeft:0,glyphAdvance:e};if(y===0||w===0)return B;const{ctx:V,buffer:q,gridInner:ee,gridOuter:le}=this;V.clearRect(q,q,y,w),V.fillText(r,q,q+_+1);const be=V.getImageData(q,q,y,w);le.fill(Ld,0,k),ee.fill(0,0,k);for(let ke=0;ke<w;ke++)for(let Oe=0;Oe<y;Oe++){const ze=be.data[4*(ke*y+Oe)+3]/255;if(ze===0)continue;const Ne=(ke+q)*T+Oe+q;if(ze===1)le[Ne]=0,ee[Ne]=Ld;else{const rt=.5-ze;le[Ne]=rt>0?rt*rt:0,ee[Ne]=rt<0?rt*rt:0}}Q1(le,0,0,T,I,T,this.f,this.v,this.z),Q1(ee,q,q,y,w,T,this.f,this.v,this.z);for(let ke=0;ke<k;ke++){const Oe=Math.sqrt(le[ke])-Math.sqrt(ee[ke]);O[ke]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return B}};class nk{constructor(e=[],o=ik){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:l}=this,u=o[e];for(;e>0;){const d=e-1>>1,_=o[d];if(l(u,_)>=0)break;o[e]=_,e=d}o[e]=u}_down(e){const{data:o,compare:l}=this,u=this.length>>1,d=o[e];for(;e<u;){let _=1+(e<<1),y=o[_];const w=_+1;if(w<this.length&&l(o[w],y)<0&&(_=w,y=o[w]),l(y,d)>=0)break;o[e]=y,e=_}o[e]=d}}function ik(r,e){return r<e?-1:r>e?1:0}function rk(r,e=1,o=!1){let l=1/0,u=1/0,d=-1/0,_=-1/0;const y=r[0];for(let B=0;B<y.length;B++){const V=y[B];(!B||V.x<l)&&(l=V.x),(!B||V.y<u)&&(u=V.y),(!B||V.x>d)&&(d=V.x),(!B||V.y>_)&&(_=V.y)}const w=Math.min(d-l,_-u);let T=w/2;const I=new nk([],ok);if(w===0)return new L(l,u);for(let B=l;B<d;B+=w)for(let V=u;V<_;V+=w)I.push(new cf(B+T,V+T,T,r));let k=function(B){let V=0,q=0,ee=0;const le=B[0];for(let be=0,ke=le.length,Oe=ke-1;be<ke;Oe=be++){const ze=le[be],Ne=le[Oe],rt=ze.x*Ne.y-Ne.x*ze.y;q+=(ze.x+Ne.x)*rt,ee+=(ze.y+Ne.y)*rt,V+=3*rt}return new cf(q/V,ee/V,0,B)}(r),O=I.length;for(;I.length;){const B=I.pop();(B.d>k.d||!k.d)&&(k=B,o&&console.log("found best %d after %d probes",Math.round(1e4*B.d)/1e4,O)),B.max-k.d<=e||(T=B.h/2,I.push(new cf(B.p.x-T,B.p.y-T,T,r)),I.push(new cf(B.p.x+T,B.p.y-T,T,r)),I.push(new cf(B.p.x-T,B.p.y+T,T,r)),I.push(new cf(B.p.x+T,B.p.y+T,T,r)),O+=4)}return o&&(console.log(`num probes: ${O}`),console.log(`best distance: ${k.d}`)),k.p}function ok(r,e){return e.max-r.max}function cf(r,e,o,l){this.p=new L(r,e),this.h=o,this.d=function(u,d){let _=!1,y=1/0;for(let w=0;w<d.length;w++){const T=d[w];for(let I=0,k=T.length,O=k-1;I<k;O=I++){const B=T[I],V=T[O];B.y>u.y!=V.y>u.y&&u.x<(V.x-B.x)*(u.y-B.y)/(V.y-B.y)+B.x&&(_=!_),y=Math.min(y,Jx(u,B,V))}}return(_?1:-1)*Math.sqrt(y)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const Qg=Number.POSITIVE_INFINITY,sk=Math.sqrt(2);function ib(r,e){return e[1]!==Qg?function(o,l,u){let d=0,_=0;switch(l=Math.abs(l),u=Math.abs(u),o){case"top-right":case"top-left":case"top":_=u-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-u}switch(o){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,_]}(r,e[0],e[1]):function(o,l){let u=0,d=0;l<0&&(l=0);const _=l/sk;switch(o){case"top-right":case"top-left":d=_-7;break;case"bottom-right":case"bottom-left":d=7-_;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(o){case"top-right":case"bottom-right":u=-_;break;case"top-left":case"bottom-left":u=_;break;case"left":u=l;break;case"right":u=-l}return[u,d]}(r,e[0])}function ak(r,e,o,l,u,d,_,y,w,T){r.createArrays(),r.tilePixelRatio=Rn/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const I=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,O={};if(r.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:ee}=r.textSizeData;O.compositeTextSizes=[k["text-size"].possiblyEvaluate(new Ii(q),y),k["text-size"].possiblyEvaluate(new Ii(ee),y)]}if(r.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:ee}=r.iconSizeData;O.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new Ii(q),y),k["icon-size"].possiblyEvaluate(new Ii(ee),y)]}O.layoutTextSize=k["text-size"].possiblyEvaluate(new Ii(w+1),y),O.layoutIconSize=k["icon-size"].possiblyEvaluate(new Ii(w+1),y),O.textMaxSize=k["text-size"].possiblyEvaluate(new Ii(18),y);const B=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",V=I.get("text-size");for(const q of r.features){const ee=I.get("text-font").evaluate(q,{},y).join(","),le=V.evaluate(q,{},y),be=O.layoutTextSize.evaluate(q,{},y),ke=(O.layoutIconSize.evaluate(q,{},y),{horizontal:{},vertical:void 0}),Oe=q.text;let ze,Ne=[0,0];if(Oe){const xt=Oe.toString(),bt=I.get("text-letter-spacing").evaluate(q,{},y)*Ur,nt=I.get("text-line-height").evaluate(q,{},y)*Ur,dt=Wp(xt)?bt:0,Tt=I.get("text-anchor").evaluate(q,{},y),Nt=I.get("text-variable-anchor");if(!Nt){const $n=I.get("text-radial-offset").evaluate(q,{},y);Ne=$n?ib(Tt,[$n*Ur,Qg]):I.get("text-offset").evaluate(q,{},y).map(cn=>cn*Ur)}let Lt=B?"center":I.get("text-justify").evaluate(q,{},y);const zt=I.get("symbol-placement"),In=zt==="point",Wn=zt==="point"?I.get("text-max-width").evaluate(q,{},y)*Ur:0,kn=$n=>{r.allowVerticalPlacement&&jh(xt)&&(ke.vertical=Xg(Oe,e,o,u,ee,Wn,nt,Tt,$n,dt,Ne,cs.vertical,!0,zt,be,le))};if(!B&&Nt){const $n=Lt==="auto"?Nt.map(Kt=>ey(Kt)):[Lt];let cn=!1;for(let Kt=0;Kt<$n.length;Kt++){const Kn=$n[Kt];if(!ke.horizontal[Kn])if(cn)ke.horizontal[Kn]=ke.horizontal[0];else{const hi=Xg(Oe,e,o,u,ee,Wn,nt,"center",Kn,dt,Ne,cs.horizontal,!1,zt,be,le);hi&&(ke.horizontal[Kn]=hi,cn=hi.positionedLines.length===1)}}kn("left")}else{if(Lt==="auto"&&(Lt=ey(Tt)),In||I.get("text-writing-mode").indexOf("horizontal")>=0||!jh(xt)){const $n=Xg(Oe,e,o,u,ee,Wn,nt,Tt,Lt,dt,Ne,cs.horizontal,!1,zt,be,le);$n&&(ke.horizontal[Lt]=$n)}kn(zt==="point"?"left":Lt)}}let rt=!1;if(q.icon&&q.icon.name){const xt=l[q.icon.name];xt&&(ze=JM(u[q.icon.name],I.get("icon-offset").evaluate(q,{},y),I.get("icon-anchor").evaluate(q,{},y)),rt=xt.sdf,r.sdfIcons===void 0?r.sdfIcons=xt.sdf:r.sdfIcons!==xt.sdf&&Ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==r.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const at=ob(ke.horizontal)||ke.vertical;r.iconsInText||(r.iconsInText=!!at&&at.iconsInText),(at||ze)&&lk(r,q,ke,ze,l,O,be,0,Ne,rt,_,y,T)}d&&r.generateCollisionDebugBuffers(w,r.collisionBoxArray)}function ey(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lk(r,e,o,l,u,d,_,y,w,T,I,k,O){let B=d.textMaxSize.evaluate(e,{},k);B===void 0&&(B=_);const V=r.layers[0].layout,q=V.get("icon-offset").evaluate(e,{},k),ee=ob(o.horizontal)||o.vertical,le=_/24,be=r.tilePixelRatio*B/24,ke=(nt=r.overscaling,r.zoom>18&&nt>2&&(nt>>=1),Math.max(Rn/(512*nt),1)*V.get("symbol-spacing")),Oe=V.get("text-padding")*r.tilePixelRatio,ze=V.get("icon-padding")*r.tilePixelRatio,Ne=K(V.get("text-max-angle")),rt=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",at=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",xt=V.get("symbol-placement"),bt=ke/2;var nt;const dt=V.get("icon-text-fit");let Tt;l&&dt!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(Tt=W1(l,o.vertical,dt,V.get("icon-text-fit-padding"),q,le)),ee&&(l=W1(l,ee,dt,V.get("icon-text-fit-padding"),q,le)));const Nt=(Lt,zt,In)=>{if(zt.x<0||zt.x>=Rn||zt.y<0||zt.y>=Rn)return;const{x:Wn,y:kn,z:$n}=O.projectTilePoint(zt.x,zt.y,In),cn=new _l(Wn,kn,$n,0,void 0);(function(Kt,Kn,hi,dr,Mi,pr,fi,ei,bi,Gi,Ki,mr,Er,Go,Ao,Ei,co,Wo,kr,Tr,Ri,ki,So,uo,sr){const ho=Kt.addToLineVertexArray(Kn,dr);let Jr,Ar,Ps,wc,$d,Ud,Ub,Vb=0,jb=0,Hb=0,Gb=0,gy=-1,yy=-1;const Da={};let Wb=Ca(""),vy=0,xy=0;if(bi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[vy,xy]=bi.layout.get("text-offset").evaluate(Ri,{},sr).map(qo=>qo*Ur):(vy=bi.layout.get("text-radial-offset").evaluate(Ri,{},sr)*Ur,xy=Qg),Kt.allowVerticalPlacement&&Mi.vertical){const qo=Mi.vertical;if(Ao)Ud=ty(qo),ei&&(Ub=ty(ei));else{const Zo=bi.layout.get("text-rotate").evaluate(Ri,{},sr)+90;Ps=gm(Gi,hi,Kn,Ki,mr,Er,qo,Go,Zo,Ei),ei&&(wc=gm(Gi,hi,Kn,Ki,mr,Er,ei,Wo,Zo))}}if(pr){const qo=bi.layout.get("icon-rotate").evaluate(Ri,{},sr),Zo=bi.layout.get("icon-text-fit")!=="none",Vd=tb(pr,qo,So,Zo),wy=ei?tb(ei,qo,So,Zo):void 0;Ar=gm(Gi,hi,Kn,Ki,mr,Er,pr,Wo,qo),Vb=4*Vd.length;const qb=Kt.iconSizeData;let Lu=null;qb.kind==="source"?(Lu=[ka*bi.layout.get("icon-size").evaluate(Ri,{},sr)],Lu[0]>_c&&Ht(`${Kt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):qb.kind==="composite"&&(Lu=[ka*ki.compositeIconSizes[0].evaluate(Ri,{},sr),ka*ki.compositeIconSizes[1].evaluate(Ri,{},sr)],(Lu[0]>_c||Lu[1]>_c)&&Ht(`${Kt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Kt.addSymbols(Kt.icon,Vd,Lu,Tr,kr,Ri,!1,hi,Kn,ho.lineStartIndex,ho.lineLength,-1,uo,sr),gy=Kt.icon.placedSymbolArray.length-1,wy&&(jb=4*wy.length,Kt.addSymbols(Kt.icon,wy,Lu,Tr,kr,Ri,cs.vertical,hi,Kn,ho.lineStartIndex,ho.lineLength,-1,uo,sr),yy=Kt.icon.placedSymbolArray.length-1)}for(const qo in Mi.horizontal){const Zo=Mi.horizontal[qo];Jr||(Wb=Ca(Zo.text),Ao?$d=ty(Zo):Jr=gm(Gi,hi,Kn,Ki,mr,Er,Zo,Go,bi.layout.get("text-rotate").evaluate(Ri,{},sr),Ei));const Vd=Zo.positionedLines.length===1;if(Hb+=rb(Kt,hi,Kn,Zo,fi,bi,Ao,Ri,Ei,ho,Mi.vertical?cs.horizontal:cs.horizontalOnly,Vd?Object.keys(Mi.horizontal):[qo],Da,gy,ki,uo,sr),Vd)break}Mi.vertical&&(Gb+=rb(Kt,hi,Kn,Mi.vertical,fi,bi,Ao,Ri,Ei,ho,cs.vertical,["vertical"],Da,yy,ki,uo,sr));let Ec=-1;const by=(qo,Zo)=>qo?Math.max(qo,Zo):Zo;Ec=by($d,Ec),Ec=by(Ud,Ec),Ec=by(Ub,Ec);const Vk=Ec>-1?1:0;Kt.glyphOffsetArray.length>=gc.MAX_GLYPHS&&Ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ri.sortKey!==void 0&&Kt.addToSortKeyRanges(Kt.symbolInstances.length,Ri.sortKey),Kt.symbolInstances.emplaceBack(hi.x,hi.y,hi.z,Kn.x,Kn.y,Da.right>=0?Da.right:-1,Da.center>=0?Da.center:-1,Da.left>=0?Da.left:-1,Da.vertical>=0?Da.vertical:-1,gy,yy,Wb,Jr!==void 0?Jr:Kt.collisionBoxArray.length,Jr!==void 0?Jr+1:Kt.collisionBoxArray.length,Ps!==void 0?Ps:Kt.collisionBoxArray.length,Ps!==void 0?Ps+1:Kt.collisionBoxArray.length,Ar!==void 0?Ar:Kt.collisionBoxArray.length,Ar!==void 0?Ar+1:Kt.collisionBoxArray.length,wc||Kt.collisionBoxArray.length,wc?wc+1:Kt.collisionBoxArray.length,Ki,Hb,Gb,Vb,jb,Vk,0,vy,xy,Ec)})(r,zt,cn,Lt,o,l,u,Tt,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,Oe,rt,w,0,ze,at,q,e,d,T,I,k)};if(xt==="line")for(const Lt of J1(e.geometry,0,0,Rn,Rn)){const zt=ek(Lt,ke,Ne,o.vertical||ee,l,24,be,r.overscaling,Rn);for(const In of zt){const Wn=ee;Wn&&ck(r,Wn.text,bt,In)||Nt(Lt,In,k)}}else if(xt==="line-center"){for(const Lt of e.geometry)if(Lt.length>1){const zt=QM(Lt,Ne,o.vertical||ee,l,24,be);zt&&Nt(Lt,zt,k)}}else if(e.type==="Polygon")for(const Lt of Vg(e.geometry,0)){const zt=rk(Lt,16);Nt(Lt[0],new _l(zt.x,zt.y,0,0,void 0),k)}else if(e.type==="LineString")for(const Lt of e.geometry)Nt(Lt,new _l(Lt[0].x,Lt[0].y,0,0,void 0),k);else if(e.type==="Point")for(const Lt of e.geometry)for(const zt of Lt)Nt([zt],new _l(zt.x,zt.y,0,0,void 0),k)}const _c=32640;function rb(r,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q,ee){const le=function(Oe,ze,Ne,rt,at,xt,bt,nt){const dt=[];if(ze.positionedLines.length===0)return dt;const Tt=rt.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Nt=function(kn){const $n=kn[0],cn=kn[1],Kt=$n*cn;return Kt>0?[$n,-cn]:Kt<0?[-$n,cn]:$n===0?[cn,$n]:[cn,-$n]}(Ne);let Lt=Math.abs(ze.top-ze.bottom);for(const kn of ze.positionedLines)Lt-=kn.lineOffset;const zt=ze.positionedLines.length,In=Lt/zt;let Wn=ze.top-Ne[1];for(let kn=0;kn<zt;++kn){const $n=ze.positionedLines[kn];Wn=tk(ze,In,Wn,kn);for(const cn of $n.positionedGlyphs){if(!cn.rect)continue;const Kt=cn.rect||{};let Kn=4,hi=!0,dr=1,Mi=0;if(cn.imageName){const ki=bt[cn.imageName];if(!ki)continue;if(ki.sdf){Ht("SDF images are not supported in formatted text and will be ignored.");continue}hi=!1,dr=ki.pixelRatio,Kn=1/dr}const pr=(at||nt)&&cn.vertical,fi=cn.metrics.advance*cn.scale/2,ei=cn.metrics,bi=cn.rect;if(bi===null)continue;nt&&ze.verticalizable&&(Mi=cn.imageName?fi-cn.metrics.width*cn.scale/2:0);const Gi=at?[cn.x+fi,cn.y]:[0,0];let Ki=[0,0],mr=[0,0],Er=!1;at||(pr?(mr=[cn.x+fi+Nt[0],cn.y+Nt[1]-Mi],Er=!0):Ki=[cn.x+fi+Ne[0],cn.y+Ne[1]-Mi]);const Go=bi.w*cn.scale/(dr*(cn.localGlyph?2:1)),Ao=bi.h*cn.scale/(dr*(cn.localGlyph?2:1));let Ei,co,Wo,kr;if(pr){const ki=cn.y-Wn,So=new L(-fi,fi-ki),uo=-Math.PI/2,sr=new L(...mr);Ei=new L(-fi+Ki[0],Ki[1]),Ei._rotateAround(uo,So)._add(sr),Ei.x+=-ki+fi,Ei.y-=(ei.left-Kn)*cn.scale;const ho=cn.imageName?ei.advance*cn.scale:Ur*cn.scale,Jr=String.fromCharCode(cn.glyph);zM(Jr)?Ei.x+=(1-Kn)*cn.scale:NM(Jr)?Ei.x+=ho-ei.height*cn.scale+(-Kn-1)*cn.scale:Ei.x+=cn.imageName||ei.width+2*Kn===bi.w&&ei.height+2*Kn===bi.h?(ho-Ao)/2:(ho-(ei.height+2*Kn)*cn.scale)/2,co=new L(Ei.x,Ei.y-Go),Wo=new L(Ei.x+Ao,Ei.y),kr=new L(Ei.x+Ao,Ei.y-Go)}else{const ki=(ei.left-Kn)*cn.scale-fi+Ki[0],So=(-ei.top-Kn)*cn.scale+Ki[1],uo=ki+Go,sr=So+Ao;Ei=new L(ki,So),co=new L(uo,So),Wo=new L(ki,sr),kr=new L(uo,sr)}if(Tt){let ki;ki=at?new L(0,0):Er?new L(Nt[0],Nt[1]):new L(Ne[0],Ne[1]),Ei._rotateAround(Tt,ki),co._rotateAround(Tt,ki),Wo._rotateAround(Tt,ki),kr._rotateAround(Tt,ki)}const Tr=new L(0,0),Ri=new L(0,0);dt.push({tl:Ei,tr:co,bl:Wo,br:kr,tex:Kt,writingMode:ze.writingMode,glyphOffset:Gi,sectionIndex:cn.sectionIndex,isSDF:hi,pixelOffsetTL:Tr,pixelOffsetBR:Ri,minFontScaleX:0,minFontScaleY:0})}}return dt}(0,l,w,d,_,y,u,r.allowVerticalPlacement),be=r.textSizeData;let ke=null;be.kind==="source"?(ke=[ka*d.layout.get("text-size").evaluate(y,{},ee)],ke[0]>_c&&Ht(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):be.kind==="composite"&&(ke=[ka*V.compositeTextSizes[0].evaluate(y,{},ee),ka*V.compositeTextSizes[1].evaluate(y,{},ee)],(ke[0]>_c||ke[1]>_c)&&Ht(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,le,ke,w,_,y,I,e,o,T.lineStartIndex,T.lineLength,B,q,ee);for(const Oe of k)O[Oe]=r.text.placedSymbolArray.length-1;return 4*le.length}function ob(r){for(const e in r)return r[e];return null}function gm(r,e,o,l,u,d,_,y,w,T){let I=_.top,k=_.bottom,O=_.left,B=_.right;const V=_.collisionPadding;if(V&&(O-=V[0],I-=V[1],B+=V[2],k+=V[3]),w){const q=new L(O,I),ee=new L(B,I),le=new L(O,k),be=new L(B,k),ke=K(w);let Oe=new L(0,0);T&&(Oe=new L(T[0],T[1])),q._rotateAround(ke,Oe),ee._rotateAround(ke,Oe),le._rotateAround(ke,Oe),be._rotateAround(ke,Oe),O=Math.min(q.x,ee.x,le.x,be.x),B=Math.max(q.x,ee.x,le.x,be.x),I=Math.min(q.y,ee.y,le.y,be.y),k=Math.max(q.y,ee.y,le.y,be.y)}return r.emplaceBack(e.x,e.y,e.z,o.x,o.y,O,I,B,k,y,l,u,d),r.length-1}function ty(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const e=r.bottom-r.top;return e>0?Math.max(10,e):null}function ck(r,e,o,l){const u=r.compareText;if(e in u){const d=u[e];for(let _=d.length-1;_>=0;_--)if(l.dist(d[_])<o)return!0}else u[e]=[];return u[e].push(l),!1}const uk=Iu.VectorTileFeature.types,hk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ym(r,e,o,l,u,d,_,y,w,T,I,k,O,B,V,q){const ee=I?Math.min(_c,Math.round(I[0])):0,le=I?Math.min(_c,Math.round(I[1])):0;r.emplaceBack(e,o,Math.round(32*_),Math.round(32*y),w,T,(ee<<1)+(k?1:0),le,16*O,16*B,256*V,256*q,l,u,d,0)}function ny(r,e,o){r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o)}function fk(r){for(const e of r.sections)if(gg(e.text))return!0;return!1}class iy{constructor(e){this.layoutVertexArray=new st,this.indexArray=new Qt,this.programConfigurations=e,this.segments=new Yi,this.dynamicLayoutVertexArray=new Ot,this.opacityVertexArray=new qe,this.placedSymbolArray=new Ys}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,l,u){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,MM.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,kM.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,hk,!0),this.opacityVertexBuffer.itemSize=1),(l||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ft(iy,"SymbolBuffers");class ry{constructor(e,o,l){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new l,this.segments=new Yi,this.collisionVertexArray=new ft,this.collisionVertexArrayExt=new Ot}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,LM.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,PM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ft(ry,"CollisionBuffers");class gc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(_=>_.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ma([]),this.placementViewportMatrix=Ma([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gg(this.zoom,o["text-size"]),this.iconSizeData=Gg(this.zoom,o["icon-size"]);const l=this.layers[0].layout,u=l.get("symbol-sort-key"),d=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(_=>cs[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new iy(new Tu(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new iy(new Tu(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new ui,this.lineVertexArray=new rr,this.symbolInstances=new Xi}calculateGlyphDependencies(e,o,l,u,d){for(let _=0;_<e.length;_++)if(o[e.charCodeAt(_)]=!0,u&&d){const y=Id[e.charAt(_)];y&&(o[y.charCodeAt(0)]=!0)}}populate(e,o,l,u){const d=this.layers[0],_=d.layout,y=_.get("text-font"),w=_.get("text-field"),T=_.get("icon-image"),I=(w.value.kind!=="constant"||w.value.value instanceof Zi&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),k=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,O=_.get("symbol-sort-key");if(this.features=[],!I&&!k)return;const B=o.iconDependencies,V=o.glyphDependencies,q=o.availableImages,ee=new Ii(this.zoom);for(const{feature:le,id:be,index:ke,sourceLayerIndex:Oe}of e){const ze=d._featureFilter.needGeometry,Ne=Au(le,ze);if(!d._featureFilter.filter(ee,Ne,l))continue;let rt,at;if(ze||(Ne.geometry=dl(le,l,u)),I){const bt=d.getValueAndResolveTokens("text-field",Ne,l,q),nt=Zi.factory(bt);fk(nt)&&(this.hasRTLText=!0),(!this.hasRTLText||qh()==="unavailable"||this.hasRTLText&&Bo.isParsed())&&(rt=RM(nt,d,Ne))}if(k){const bt=d.getValueAndResolveTokens("icon-image",Ne,l,q);at=bt instanceof Ir?bt:Ir.fromString(bt)}if(!rt&&!at)continue;const xt=this.sortFeaturesByKey?O.evaluate(Ne,{},l):void 0;if(this.features.push({id:be,text:rt,icon:at,index:ke,sourceLayerIndex:Oe,geometry:Ne.geometry,properties:le.properties,type:uk[le.type],sortKey:xt}),at&&(B[at.name]=!0),rt){const bt=y.evaluate(Ne,{},l).join(","),nt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(cs.vertical)>=0;for(const dt of rt.sections)if(dt.image)B[dt.image.name]=!0;else{const Tt=jh(rt.toString()),Nt=dt.fontStack||bt,Lt=V[Nt]=V[Nt]||{};this.calculateGlyphDependencies(dt.text,Lt,nt,this.allowVerticalPlacement,Tt)}}}_.get("symbol-placement")==="line"&&(this.features=function(le){const be={},ke={},Oe=[];let ze=0;function Ne(bt){Oe.push(le[bt]),ze++}function rt(bt,nt,dt){const Tt=ke[bt];return delete ke[bt],ke[nt]=Tt,Oe[Tt].geometry[0].pop(),Oe[Tt].geometry[0]=Oe[Tt].geometry[0].concat(dt[0]),Tt}function at(bt,nt,dt){const Tt=be[nt];return delete be[nt],be[bt]=Tt,Oe[Tt].geometry[0].shift(),Oe[Tt].geometry[0]=dt[0].concat(Oe[Tt].geometry[0]),Tt}function xt(bt,nt,dt){const Tt=dt?nt[0][nt[0].length-1]:nt[0][0];return`${bt}:${Tt.x}:${Tt.y}`}for(let bt=0;bt<le.length;bt++){const nt=le[bt],dt=nt.geometry,Tt=nt.text?nt.text.toString():null;if(!Tt){Ne(bt);continue}const Nt=xt(Tt,dt),Lt=xt(Tt,dt,!0);if(Nt in ke&&Lt in be&&ke[Nt]!==be[Lt]){const zt=at(Nt,Lt,dt),In=rt(Nt,Lt,Oe[zt].geometry);delete be[Nt],delete ke[Lt],ke[xt(Tt,Oe[In].geometry,!0)]=In,Oe[zt].geometry=null}else Nt in ke?rt(Nt,Lt,dt):Lt in be?at(Nt,Lt,dt):(Ne(bt),be[Nt]=ze-1,ke[Lt]=ze-1)}return Oe.filter(bt=>bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,be)=>le.sortKey-be.sortKey)}update(e,o,l,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,l,u),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,l,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const l=this.lineVertexArray.length,u=e.segment;if(u!==void 0){let d=e.dist(o[u+1]),_=e.dist(o[u]);const y={};for(let w=u+1;w<o.length;w++)y[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:d},w<o.length-1&&(d+=o[w+1].dist(o[w]));for(let w=u||0;w>=0;w--)y[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){const T=y[w];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,o,l,u,d,_,y,w,T,I,k,O,B,V){const q=e.indexArray,ee=e.layoutVertexArray,le=e.segments.prepareSegment(4*o.length,ee,q,this.canOverlap?_.sortKey:void 0),be=this.glyphOffsetArray.length,ke=le.vertexLength,Oe=this.allowVerticalPlacement&&y===cs.vertical?Math.PI/2:0,ze=_.text&&_.text.sections;for(let Ne=0;Ne<o.length;Ne++){const{tl:rt,tr:at,bl:xt,br:bt,tex:nt,pixelOffsetTL:dt,pixelOffsetBR:Tt,minFontScaleX:Nt,minFontScaleY:Lt,glyphOffset:zt,isSDF:In,sectionIndex:Wn}=o[Ne],kn=le.vertexLength,$n=zt[1];ym(ee,w.x,w.y,w.z,T.x,T.y,rt.x,$n+rt.y,nt.x,nt.y,l,In,dt.x,dt.y,Nt,Lt),ym(ee,w.x,w.y,w.z,T.x,T.y,at.x,$n+at.y,nt.x+nt.w,nt.y,l,In,Tt.x,dt.y,Nt,Lt),ym(ee,w.x,w.y,w.z,T.x,T.y,xt.x,$n+xt.y,nt.x,nt.y+nt.h,l,In,dt.x,Tt.y,Nt,Lt),ym(ee,w.x,w.y,w.z,T.x,T.y,bt.x,$n+bt.y,nt.x+nt.w,nt.y+nt.h,l,In,Tt.x,Tt.y,Nt,Lt),ny(e.dynamicLayoutVertexArray,w,Oe),q.emplaceBack(kn,kn+1,kn+2),q.emplaceBack(kn+1,kn+2,kn+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),Ne!==o.length-1&&Wn===o[Ne+1].sectionIndex||e.programConfigurations.populatePaintArrays(ee.length,_,_.index,{},B,V,ze&&ze[Wn])}e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,T.x,T.y,be,this.glyphOffsetArray.length-be,ke,I,k,T.segment,l?l[0]:0,l?l[1]:0,u[0],u[1],y,0,!1,0,O,0)}_commitLayoutVertex(e,o,l,u,d,_,y){e.emplaceBack(o,l,u,d,_,Math.round(y.x),Math.round(y.y))}_addCollisionDebugVertices(e,o,l,u,d,_,y){const w=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),T=w.vertexLength,I=y.tileAnchorX,k=y.tileAnchorY;for(let B=0;B<4;B++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(o,-e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,e.padding),l.collisionVertexArrayExt.emplaceBack(o,-e.padding,e.padding),this._commitLayoutVertex(l.layoutVertexArray,u,d,_,I,k,new L(e.x1,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,d,_,I,k,new L(e.x2,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,d,_,I,k,new L(e.x2,e.y2)),this._commitLayoutVertex(l.layoutVertexArray,u,d,_,I,k,new L(e.x1,e.y2)),w.vertexLength+=4;const O=l.indexArray;O.emplaceBack(T,T+1),O.emplaceBack(T+1,T+2),O.emplaceBack(T+2,T+3),O.emplaceBack(T+3,T),w.primitiveLength+=4}_addTextDebugCollisionBoxes(e,o,l,u,d,_){for(let y=u;y<d;y++){const w=l.get(y),T=this.getSymbolInstanceTextSize(e,_,o,y);this._addCollisionDebugVertices(w,T,this.textCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(e,o,l,u,d,_){for(let y=u;y<d;y++){const w=l.get(y),T=this.getSymbolInstanceIconSize(e,o,y);this._addCollisionDebugVertices(w,T,this.iconCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,_)}}generateCollisionDebugBuffers(e,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ry(Mt,O1.members,wn),this.iconCollisionBox=new ry(Mt,O1.members,wn);const l=rf(this.iconSizeData,e),u=rf(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const _=this.symbolInstances.get(d);this._addTextDebugCollisionBoxes(u,e,o,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(u,e,o,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(l,e,o,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(l,e,o,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(e,o,l,u){const d=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:u),_=hm(this.textSizeData,e,d)/Ur;return this.tilePixelRatio*_}getSymbolInstanceIconSize(e,o,l){const u=this.icon.placedSymbolArray.get(l),d=hm(this.iconSizeData,e,u);return this.tilePixelRatio*d}_commitDebugCollisionVertexUpdate(e,o,l){e.emplaceBack(o,-l,-l),e.emplaceBack(o,l,-l),e.emplaceBack(o,l,l),e.emplaceBack(o,-l,l)}_updateTextDebugCollisionBoxes(e,o,l,u,d,_){for(let y=u;y<d;y++){const w=l.get(y),T=this.getSymbolInstanceTextSize(e,_,o,y);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,w.padding)}}_updateIconDebugCollisionBoxes(e,o,l,u,d){for(let _=u;_<d;_++){const y=l.get(_),w=this.getSymbolInstanceIconSize(e,o,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,w,y.padding)}}updateCollisionDebugBuffers(e,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=rf(this.iconSizeData,e),u=rf(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const _=this.symbolInstances.get(d);this._updateTextDebugCollisionBoxes(u,e,o,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(u,e,o,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(l,e,o,_.iconBoxStartIndex,_.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(l,e,o,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,o,l,u,d,_,y,w,T){const I={};for(let k=o;k<l;k++){const O=e.get(k);I.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},I.textFeatureIndex=O.featureIndex;break}for(let k=u;k<d;k++){const O=e.get(k);I.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},I.verticalTextFeatureIndex=O.featureIndex;break}for(let k=_;k<y;k++){const O=e.get(k);I.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},I.iconFeatureIndex=O.featureIndex;break}for(let k=w;k<T;k++){const O=e.get(k);I.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},I.verticalIconFeatureIndex=O.featureIndex;break}return I}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const l=e.placedSymbolArray.get(o),u=l.vertexStartIndex+4*l.numGlyphs;for(let d=l.vertexStartIndex;d<u;d+=4)e.indexArray.emplaceBack(d,d+1,d+2),e.indexArray.emplaceBack(d+1,d+2,d+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(e),l=Math.cos(e),u=[],d=[],_=[];for(let y=0;y<this.symbolInstances.length;++y){_.push(y);const w=this.symbolInstances.get(y);u.push(0|Math.round(o*w.tileAnchorX+l*w.tileAnchorY)),d.push(w.featureIndex)}return _.sort((y,w)=>u[y]-u[w]||d[w]-d[y]),_}addToSortKeyRanges(e,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((u,d,_)=>{u>=0&&_.indexOf(u)===d&&this.addIndicesForPlacedSymbol(this.text,u)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ft(gc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),gc.MAX_GLYPHS=65535,gc.addDynamicAttributes=ny;const dk=new U({"symbol-placement":new E(He.layout_symbol["symbol-placement"]),"symbol-spacing":new E(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new E(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new A(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new E(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new E(He.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new E(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new E(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new E(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new A(He.layout_symbol["icon-size"]),"icon-text-fit":new E(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new E(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new A(He.layout_symbol["icon-image"]),"icon-rotate":new A(He.layout_symbol["icon-rotate"]),"icon-padding":new E(He.layout_symbol["icon-padding"]),"icon-keep-upright":new E(He.layout_symbol["icon-keep-upright"]),"icon-offset":new A(He.layout_symbol["icon-offset"]),"icon-anchor":new A(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new E(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new E(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new E(He.layout_symbol["text-rotation-alignment"]),"text-field":new A(He.layout_symbol["text-field"]),"text-font":new A(He.layout_symbol["text-font"]),"text-size":new A(He.layout_symbol["text-size"]),"text-max-width":new A(He.layout_symbol["text-max-width"]),"text-line-height":new A(He.layout_symbol["text-line-height"]),"text-letter-spacing":new A(He.layout_symbol["text-letter-spacing"]),"text-justify":new A(He.layout_symbol["text-justify"]),"text-radial-offset":new A(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new E(He.layout_symbol["text-variable-anchor"]),"text-anchor":new A(He.layout_symbol["text-anchor"]),"text-max-angle":new E(He.layout_symbol["text-max-angle"]),"text-writing-mode":new E(He.layout_symbol["text-writing-mode"]),"text-rotate":new A(He.layout_symbol["text-rotate"]),"text-padding":new E(He.layout_symbol["text-padding"]),"text-keep-upright":new E(He.layout_symbol["text-keep-upright"]),"text-transform":new A(He.layout_symbol["text-transform"]),"text-offset":new A(He.layout_symbol["text-offset"]),"text-allow-overlap":new E(He.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new E(He.layout_symbol["text-ignore-placement"]),"text-optional":new E(He.layout_symbol["text-optional"])});var oy={paint:new U({"icon-opacity":new A(He.paint_symbol["icon-opacity"]),"icon-color":new A(He.paint_symbol["icon-color"]),"icon-halo-color":new A(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new A(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new A(He.paint_symbol["icon-halo-blur"]),"icon-translate":new E(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new E(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new A(He.paint_symbol["text-opacity"]),"text-color":new A(He.paint_symbol["text-color"],{runtimeType:Dr,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new A(He.paint_symbol["text-halo-color"]),"text-halo-width":new A(He.paint_symbol["text-halo-width"]),"text-halo-blur":new A(He.paint_symbol["text-halo-blur"]),"text-translate":new E(He.paint_symbol["text-translate"]),"text-translate-anchor":new E(He.paint_symbol["text-translate-anchor"])}),layout:dk};class sb{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nr,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ft(sb,"FormatSectionOverride",{omit:["defaultValue"]});class vm extends Js{constructor(e){super(e,oy)}recalculate(e,o){super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const u=[];for(const d of l)u.indexOf(d)<0&&u.push(d);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,o,l,u){const d=this.layout.get(e).evaluate(o,{},l,u),_=this._unevaluatedLayout._values[e];return _.isDataDriven()||va(_.value)||!d?d:function(y,w){return w.replace(/{([^{}]+)}/g,(T,I)=>I in y?String(y[I]):"")}(o.properties,d)}createBucket(e){return new gc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of oy.paint.overridableProperties){if(!vm.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),l=new sb(o),u=new Jl(l,o.property.specification);let d=null;d=o.value.kind==="constant"||o.value.kind==="source"?new xa("source",u):new Ql("composite",u,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new v(o.property,d,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&vm.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const l=e.get("text-field"),u=oy.paint.properties[o];let d=!1;const _=y=>{for(const w of y)if(u.overrides&&u.overrides.hasOverride(w))return void(d=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Zi)_(l.value.value.sections);else if(l.value.kind==="source"){const y=T=>{d||(T instanceof yo&&Vi(T.value)===It?_(T.value.sections):T instanceof ua?_(T.sections):T.eachChild(y))},w=l.value;w._styleExpression&&y(w._styleExpression.expression)}return d}getProgramConfiguration(e){return new fc(this,e)}}var pk={paint:new U({"background-color":new E(He.paint_background["background-color"]),"background-pattern":new R(He.paint_background["background-pattern"]),"background-opacity":new E(He.paint_background["background-opacity"])})},mk={paint:new U({"raster-opacity":new E(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new E(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new E(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new E(He.paint_raster["raster-brightness-max"]),"raster-saturation":new E(He.paint_raster["raster-saturation"]),"raster-contrast":new E(He.paint_raster["raster-contrast"]),"raster-resampling":new E(He.paint_raster["raster-resampling"]),"raster-fade-duration":new E(He.paint_raster["raster-fade-duration"])})};class _k extends Js{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var gk={paint:new U({"sky-type":new E(He.paint_sky["sky-type"]),"sky-atmosphere-sun":new E(He.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new E(He.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new E(He.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new E(He.paint_sky["sky-gradient-radius"]),"sky-gradient":new N(He.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new E(He.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new E(He.paint_sky["sky-atmosphere-color"]),"sky-opacity":new E(He.paint_sky["sky-opacity"])})};function sy(r,e,o){const l=[0,0,1],u=f1([]);return function(d,_,y){y*=.5;var w=_[0],T=_[1],I=_[2],k=_[3],O=Math.sin(y),B=Math.cos(y);d[0]=w*B-I*O,d[1]=T*B+k*O,d[2]=I*B+w*O,d[3]=k*B-T*O}(u,u,o?-K(r)+Math.PI:K(r)),d1(u,u,-K(e)),u1(l,l,u),gd(l,l)}const yk={circle:class extends Js{constructor(r){super(r,NI)}createBucket(r){return new Ag(r)}queryRadius(r){const e=r;return Jh("circle-radius",this,e)+Jh("circle-stroke-width",this,e)+nm(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,o,l,u,d,_,y){const w=n1(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o);return p1(r,l,d,_,y,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",w,T)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new fc(this,r)}},heatmap:class extends Js{createBucket(r){return new _1(r)}constructor(r){super(r,HI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Fg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Jh("heatmap-radius",this,r)}queryIntersectsFeature(r,e,o,l,u,d,_,y){const w=this.paint.get("heatmap-radius").evaluate(e,o);return p1(r,l,d,_,y,!0,!0,new L(0,0),w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new fc(this,r)}},hillshade:class extends Js{constructor(r){super(r,GI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Js{constructor(r){super(r,lM)}getProgramIds(){const r=this.paint.get("fill-pattern"),e=r&&r.constantOr(1),o=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(r){return new fc(this,r)}recalculate(r,e){super.recalculate(r,e);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new lm(r)}queryRadius(){return nm(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,o,l,u,d){return!r.queryGeometry.isAboveHorizon&&Kx(t1(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends Js{constructor(r){super(r,xM)}createBucket(r){return new Sd(r)}queryRadius(){return nm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new fc(this,r)}queryIntersectsFeature(r,e,o,l,u,d,_,y,w){const T=n1(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),I=this.paint.get("fill-extrusion-height").evaluate(e,o),k=this.paint.get("fill-extrusion-base").evaluate(e,o),O=[0,0],B=y&&d.elevation,V=d.elevation?d.elevation.exaggeration():1,q=r.tile.getBucket(this);if(B&&q instanceof Sd){const be=q.centroidVertexArray,ke=w+1;if(ke<be.length){const Oe=be.get(ke);O[0]=Oe.a_centroid_pos0,O[1]=Oe.a_centroid_pos1}}if(O[0]===0&&O[1]===1)return!1;const ee=function(be,ke,Oe,ze,Ne,rt,at,xt,bt){return rt?function(nt,dt,Tt,Nt,Lt,zt,In,Wn,kn){const $n=[],cn=[],Kt=[0,0,0,1];for(const Kn of nt){const hi=[],dr=[];for(const Mi of Kn){const pr=Mi.x+Nt.x,fi=Mi.y+Nt.y,ei=bM(pr,fi,dt,Tt,zt,In,Wn,kn);Kt[0]=pr,Kt[1]=fi,Kt[2]=ei.base,Kt[3]=1,ef(Kt,Kt,Lt),Kt[3]=Math.max(Kt[3],1e-5);const bi=M1([Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]]);Kt[0]=pr,Kt[1]=fi,Kt[2]=ei.top,Kt[3]=1,ef(Kt,Kt,Lt),Kt[3]=Math.max(Kt[3],1e-5);const Gi=M1([Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]]);hi.push(bi),dr.push(Gi)}$n.push(hi),cn.push(dr)}return[$n,cn]}(be,ke,Oe,ze,Ne,rt,at,xt,bt):function(nt,dt,Tt,Nt,Lt){const zt=[],In=[],Wn=Lt[8]*dt,kn=Lt[9]*dt,$n=Lt[10]*dt,cn=Lt[11]*dt,Kt=Lt[8]*Tt,Kn=Lt[9]*Tt,hi=Lt[10]*Tt,dr=Lt[11]*Tt;for(const Mi of nt){const pr=[],fi=[];for(const ei of Mi){const bi=ei.x+Nt.x,Gi=ei.y+Nt.y,Ki=Lt[0]*bi+Lt[4]*Gi+Lt[12],mr=Lt[1]*bi+Lt[5]*Gi+Lt[13],Er=Lt[2]*bi+Lt[6]*Gi+Lt[14],Go=Lt[3]*bi+Lt[7]*Gi+Lt[15],Ao=Ki+Wn,Ei=mr+kn,co=Er+$n,Wo=Math.max(Go+cn,1e-5),kr=Ki+Kt,Tr=mr+Kn,Ri=Er+hi,ki=Math.max(Go+dr,1e-5),So=new L(Ao/Wo,Ei/Wo);So.z=co/Wo,pr.push(So);const uo=new L(kr/ki,Tr/ki);uo.z=Ri/ki,fi.push(uo)}zt.push(pr),In.push(fi)}return[zt,In]}(be,ke,Oe,ze,Ne)}(l,k,I,T,_,B?y:null,O,V,d.center.lat),le=r.queryGeometry;return function(be,ke,Oe){let ze=1/0;Kx(Oe,ke)&&(ze=I1(Oe,ke[0]));for(let Ne=0;Ne<ke.length;Ne++){const rt=ke[Ne],at=be[Ne];for(let xt=0;xt<rt.length-1;xt++){const bt=rt[xt],nt=[bt,rt[xt+1],at[xt+1],at[xt],bt];Yx(Oe,nt)&&(ze=Math.min(ze,I1(Oe,nt)))}}return ze!==1/0&&ze}(ee[0],ee[1],le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends Js{constructor(r){super(r,k1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Qa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=L1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new um(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new fc(this,r)}queryRadius(r){const e=r,o=P1(Jh("line-width",this,e),Jh("line-gap-width",this,e)),l=Jh("line-offset",this,e);return o/2+Math.abs(l)+nm(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,o,l,u,d){if(r.queryGeometry.isAboveHorizon)return!1;const _=t1(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),y=r.pixelToTileUnitsFactor/2*P1(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),w=this.paint.get("line-offset").evaluate(e,o);return w&&(l=function(T,I){const k=[],O=new L(0,0);for(let B=0;B<T.length;B++){const V=T[B],q=[];for(let ee=0;ee<V.length;ee++){const le=V[ee-1],be=V[ee],ke=V[ee+1],Oe=ee===0?O:be.sub(le)._unit()._perp(),ze=ee===V.length-1?O:ke.sub(be)._unit()._perp(),Ne=Oe._add(ze)._unit();Ne._mult(1/(Ne.x*ze.x+Ne.y*ze.y)),q.push(Ne._mult(I)._add(be))}k.push(q)}return k}(l,w*r.pixelToTileUnitsFactor)),function(T,I,k){for(let O=0;O<I.length;O++){const B=I[O];if(T.length>=3){for(let V=0;V<B.length;V++)if(Kh(T,B[V]))return!0}if(OI(T,B,k))return!0}return!1}(_,l,y)}isTileClipped(){return!0}},symbol:vm,background:class extends Js{constructor(r){super(r,pk)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Js{constructor(r){super(r,mk)}getProgramIds(){return["raster"]}},sky:class extends Js{constructor(r){super(r,gk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Fg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(r,e){if(this.paint.get("sky-type")==="atmosphere"){const l=this.paint.get("sky-atmosphere-sun"),u=!l,d=r.style.light,_=d.properties.get("position");return u&&d.properties.get("anchor")==="viewport"&&Ht("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?sy(_.azimuthal,90-_.polar,e):sy(l[0],90-l[1],e)}const o=this.paint.get("sky-gradient-center");return sy(o[0],90-o[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}}};class Pd{constructor(e,o,l,u){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(o,u)}update(e,o,l){const{width:u,height:d}=e,{context:_}=this,{gl:y}=_,{HTMLImageElement:w,HTMLCanvasElement:T,HTMLVideoElement:I,ImageData:k,ImageBitmap:O}=Y;if(y.bindTexture(y.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!o||o.premultiply!==!1)),l||this.size&&this.size[0]===u&&this.size[1]===d){const{x:B,y:V}=l||{x:0,y:0};e instanceof w||e instanceof T||e instanceof I||e instanceof k||O&&e instanceof O?y.texSubImage2D(y.TEXTURE_2D,0,B,V,y.RGBA,y.UNSIGNED_BYTE,e):y.texSubImage2D(y.TEXTURE_2D,0,B,V,u,d,y.RGBA,y.UNSIGNED_BYTE,e.data)}else this.size=[u,d],e instanceof w||e instanceof T||e instanceof I||e instanceof k||O&&e instanceof O?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,e):y.texImage2D(y.TEXTURE_2D,0,this.format,u,d,0,this.format,y.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(e,o){const{context:l}=this,{gl:u}=l;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),o!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,o),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class ay{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.image=new pl({width:e,height:o}),this.positions={},this.uploaded=!1}getDash(e,o){const l=this.getKey(e,o);return this.positions[l]}trim(){const e=this.width,o=this.height=je(this.nextRow);this.image.resize({width:e,height:o})}getKey(e,o){return e.join(",")+o}getDashRanges(e,o,l){const u=[];let d=e.length%2==1?-e[e.length-1]*l:0,_=e[0]*l,y=!0;u.push({left:d,right:_,isDash:y,zeroLength:e[0]===0});let w=e[0];for(let T=1;T<e.length;T++){y=!y;const I=e[T];d=w*l,w+=I,_=w*l,u.push({left:d,right:_,isDash:y,zeroLength:I===0})}return u}addRoundDash(e,o,l){const u=o/2;for(let d=-l;d<=l;d++){const _=this.width*(this.nextRow+l+d);let y=0,w=e[y];for(let T=0;T<this.width;T++){T/w.right>1&&(w=e[++y]);const I=Math.abs(T-w.left),k=Math.abs(T-w.right),O=Math.min(I,k);let B;const V=d/l*(u+1);if(w.isDash){const q=u-Math.abs(V);B=Math.sqrt(O*O+q*q)}else B=u-Math.sqrt(O*O+V*V);this.image.data[_+T]=Math.max(0,Math.min(255,B+128))}}}addRegularDash(e,o){for(let w=e.length-1;w>=0;--w){const T=e[w],I=e[w+1];T.zeroLength?e.splice(w,1):I&&I.isDash===T.isDash&&(I.left=T.left,e.splice(w,1))}const l=e[0],u=e[e.length-1];l.isDash===u.isDash&&(l.left=u.left-this.width,u.right=l.right+this.width);const d=this.width*this.nextRow;let _=0,y=e[_];for(let w=0;w<this.width;w++){w/y.right>1&&(y=e[++_]);const T=Math.abs(w-y.left),I=Math.abs(w-y.right),k=Math.min(T,I);this.image.data[d+w]=Math.max(0,Math.min(255,(y.isDash?k:-k)+o+128))}}addDash(e,o){const l=this.getKey(e,o);if(this.positions[l])return this.positions[l];const u=o==="round",d=u?7:0,_=2*d+1;if(this.nextRow+_>this.height)return Ht("LineAtlas out of space"),null;e.length===0&&e.push(1);let y=0;for(let I=0;I<e.length;I++)e[I]<0&&(Ht("Negative value is found in line dasharray, replacing values with 0"),e[I]=0),y+=e[I];if(y!==0){const I=this.width/y,k=this.getDashRanges(e,this.width,I);u?this.addRoundDash(k,I,d):this.addRegularDash(k,o==="square"?.5*I:0)}const w=this.nextRow+d;this.nextRow+=_;const T={tl:[w,d],br:[y,0]};return this.positions[l]=T,T}}Ft(ay,"LineAtlas");class vk{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}const xk=Y.performance;function ab(r){const e=r?r.url.toString():void 0;return xk.getEntriesByName(e)}class bk{constructor(){this.tasks={},this.taskQueue=[],Qe(["process"],this),this.invoker=new vk(this.process),this.nextId=0}add(e,o){const l=this.nextId++,u=function({type:d,isSymbolTile:_,zoom:y}){return y=y||0,d==="message"?0:d!=="maybePrepare"||_?d!=="parseTile"||_?d==="parseTile"&&_?300-y:d==="maybePrepare"&&_?400-y:500:200-y:100-y}(o);if(u===0){wt();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:e,metadata:o,priority:u,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){wt();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const o=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let e=null,o=1/0;for(let u=0;u<this.taskQueue.length;u++){const d=this.tasks[this.taskQueue[u]];d.priority<o&&(o=d.priority,e=u)}if(e===null)return null;const l=this.taskQueue[e];return this.taskQueue.splice(e,1),l}remove(){this.invoker.remove()}}const wk=de([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),Ek=de([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:lb}=wk,cb=de([{name:"a_pos_3",components:3,type:"Int16"}]);var Od=de([{name:"a_pos",type:"Int16",components:2}]);const uf=Rn/Math.PI/2,jo=-uf,Ho=uf,Tk=[new ls([jo,jo,jo],[Ho,Ho,Ho]),new ls([jo,jo,jo],[0,0,Ho]),new ls([0,jo,jo],[Ho,0,Ho]),new ls([jo,0,jo],[0,Ho,Ho]),new ls([0,0,jo],[Ho,Ho,Ho])];class Ak{constructor(e,o,l){this.a=Qh([],e,l),this.b=Qh([],o,l),this.center=l;const u=gd([],this.a),d=gd([],this.b);this.angle=Math.acos(yd(u,d))}}function ly(r,e){if(r.angle===0)return null;let o;return o=r.a[e]===0?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[e]/r.a[e]/Math.sin(r.angle)-1/Math.tan(r.angle)),o<0||o>1?null:function(l,u,d,_){const y=Math.sin(d);return l*(Math.sin((1-_)*d)/y)+u*(Math.sin(_*d)/y)}(r.a[e],r.b[e],r.angle,Le(o,0,1))+r.center[e]}function Dd(r){if(r.z<=1)return Tk[r.z+2*r.y+r.x];const[e,o]=cy(r),l=[gl(e[0],e[1]),gl(e[0],o[1]),gl(o[0],e[1]),gl(o[0],o[1])],u=[Ho,Ho,Ho],d=[jo,jo,jo];for(const _ of l)u[0]=Math.min(u[0],_[0]),u[1]=Math.min(u[1],_[1]),u[2]=Math.min(u[2],_[2]),d[0]=Math.max(d[0],_[0]),d[1]=Math.max(d[1],_[1]),d[2]=Math.max(d[2],_[2]);return new ls(u,d)}function Sk(r,e,o){const l=e/r.worldSize,u=(dt,Tt)=>{_d(dt,dt,l),_d(Tt,Tt,l)},d=Number.MAX_VALUE,_=[-d,-d,-d],y=[d,d,d],w=pb(r);if(o.z<=1){const dt=Dd(o).getCorners();for(let Tt=0;Tt<dt.length;Tt++)Cu(dt[Tt],dt[Tt],w),Og(y,y,dt[Tt]),Dg(_,_,dt[Tt]);return u(y,_),new ls(y,_)}const[T,I]=cy(o),k=new dc;k.setSouthWest([T[1],I[0]]),k.setNorthEast([I[1],T[0]]);const O=[gl(k.getSouth(),k.getWest()),gl(k.getSouth(),k.getEast()),gl(k.getNorth(),k.getEast()),gl(k.getNorth(),k.getWest())];for(let dt=0;dt<O.length;dt++)Cu(O[dt],O[dt],w),Og(y,y,O[dt]),Dg(_,_,O[dt]);if(k.contains(r.center))return _[2]=0,u(y,_),new ls(y,_);const B=[w[12],w[13],w[14]],V=r.center.lng,q=Le(r.center.lat,-85.051129,Ia),ee=[pd(V),Xh(q)],le=k.getCenter().lng,be=Le(k.getCenter().lat,-85.051129,Ia),ke=[pd(le),Xh(be)];let Oe=new Array(3),ze=0;const Ne=ee[0]-ke[0],rt=ee[1]-ke[1];if(Math.abs(Ne)>Math.abs(rt))ze=Ne>=0?1:3,Oe=B;else{ze=rt>=0?0:2;const dt=[w[4],w[5],w[6]];let Tt;Tt=rt>=0?-Math.sin(K(k.getSouth()))*uf:-Math.sin(K(k.getNorth()))*uf,Oe=Rg(Oe,B,dt,Tt)}const at=O[ze],xt=O[(ze+1)%4],bt=new Ak(at,xt,Oe),nt=[ly(bt,0)||at[0],ly(bt,1)||at[1],ly(bt,2)||at[2]];return y[2]=Math.min(at[2],xt[2]),Og(y,y,nt),Dg(_,_,nt),u(y,_),new ls(y,_)}function cy(r){const e=1<<r.z,o=r.x/e,l=(r.x+1)/e,u=(r.y+1)/e;return[[$r(r.y/e),ks(o)],[$r(u),ks(l)]]}function ub(r,e,o,l=uf){return o=K(o),[r*Math.sin(o)*l,-e*l,r*Math.cos(o)*l]}function gl(r,e,o){return ub(Math.cos(K(r)),Math.sin(K(r)),e,o)}function hb(r,e,o){const l=Math.pow(2,o.z),u=(r/Rn+o.x)/l;return gl($r((e/Rn+o.y)/l),ks(u))}function uy(r){return 16383/Math.max(...Qh([],r.max,r.min))}function fb(r){const e=Ma(new Float64Array(16)),o=uy(r);var l,u;return pc(e,e,[o,o,o]),Su(e,e,((l=[])[0]=-(u=r.min)[0],l[1]=-u[1],l[2]=-u[2],l)),e}function db(r,e,o,l,u){const d=function(w){const T=Rn/(2*Math.PI);return w/(2*Math.PI)/T}(o),_=[r,e,-o/(2*Math.PI)],y=Ma(new Float64Array(16));return Su(y,y,_),pc(y,y,[d,d,d]),kg(y,y,K(-u)),Lg(y,y,K(-l)),y}function pb(r){const{x:e,y:o}=r.point,{lng:l,lat:u}=r._center;return db(e,o,r.worldSize,l,u)}const mb=K(85),Ck=Math.cos(mb),Ik=Math.sin(mb);function _b(r,e,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[r*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class xm{constructor(e,o,l){this.z=e,this.x=o,this.y=l,this.key=Rd(0,e,e,o,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o){const l=function(d,_,y){var w=_b(256*d,256*(_=Math.pow(2,y)-_-1),y),T=_b(256*(d+1),256*(_+1),y);return w[0]+","+w[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),u=function(d,_,y){let w,T="";for(let I=d;I>0;I--)w=1<<I-1,T+=(_&w?1:0)+(y&w?2:0);return T}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",l)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gb{constructor(e,o){this.wrap=e,this.canonical=o,this.key=Rd(e,o.z,o.z,o.x,o.y)}}class lo{constructor(e,o,l,u,d){this.overscaledZ=e,this.wrap=o,this.canonical=new xm(l,+u,+d),this.key=o===0&&e===l?this.canonical.key:Rd(o,e,l,u,d)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new lo(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o=!0){if(this.overscaledZ===e&&o)return this.key;if(e>this.canonical.z)return Rd(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-e;return Rd(this.wrap*+o,e,e,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,u=2*this.canonical.y;return[new lo(o,this.wrap,o,l,u),new lo(o,this.wrap,o,l+1,u),new lo(o,this.wrap,o,l,u+1),new lo(o,this.wrap,o,l+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new lo(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Rd(r,e,o,l,u){const d=1<<Math.min(o,22);let _=d*(u%d)+l%d;return r&&o<22&&(_+=d*d*((r<0?-2*r-1:2*r)%(1<<2*(22-o)))),16*(32*_+o)+(e-o)}function Mu(r,e){if(!e.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:e};const o=Math.pow(2,-r.z),l=r.x*o,u=(r.x+1)*o,d=r.y*o,_=(r.y+1)*o,y=ks(l),w=ks(u),T=$r(d),I=$r(_),k=e.project(y,T),O=e.project(w,T),B=e.project(w,I),V=e.project(y,I);let q=Math.min(k.x,O.x,B.x,V.x),ee=Math.min(k.y,O.y,B.y,V.y),le=Math.max(k.x,O.x,B.x,V.x),be=Math.max(k.y,O.y,B.y,V.y);const ke=o/16;function Oe(Ne,rt,at,xt,bt,nt){const dt=(at+bt)/2,Tt=(xt+nt)/2,Nt=e.project(ks(dt),$r(Tt)),Lt=Math.max(0,q-Nt.x,ee-Nt.y,Nt.x-le,Nt.y-be);q=Math.min(q,Nt.x),le=Math.max(le,Nt.x),ee=Math.min(ee,Nt.y),be=Math.max(be,Nt.y),Lt>ke&&(Oe(Ne,Nt,at,xt,dt,Tt),Oe(Nt,rt,dt,Tt,bt,nt))}Oe(k,O,l,d,u,d),Oe(O,B,u,d,u,_),Oe(B,V,u,_,l,_),Oe(V,k,l,_,l,d),q-=ke,ee-=ke,le+=ke,be+=ke;const ze=1/Math.max(le-q,be-ee);return{scale:ze,x:q*ze,y:ee*ze,x2:le*ze,y2:be*ze,projection:e}}Ft(xm,"CanonicalTileID"),Ft(lo,"OverscaledTileID",{omit:["projMatrix"]});class yb{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const l=e[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Mk=["tile","layer","source","sourceLayer","state"];class vb{constructor(e,o,l,u,d){this.type="Feature",this._vectorTileFeature=e,this._z=o,this._x=l,this._y=u,this.properties=e.properties,this.id=d}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const o of Mk)this[o]!==void 0&&(e[o]=this[o]);return e}}const Ls=32,La=33,yc=new Uint16Array(8184);for(let r=0;r<2046;r++){let e=r+2,o=0,l=0,u=0,d=0,_=0,y=0;for(1&e?u=d=_=Ls:o=l=y=Ls;(e>>=1)>1;){const T=o+u>>1,I=l+d>>1;1&e?(u=o,d=l,o=_,l=y):(o=u,l=d,u=_,d=y),_=T,y=I}const w=4*r;yc[w+0]=o,yc[w+1]=l,yc[w+2]=u,yc[w+3]=d}const Pa=new Uint16Array(2178),vc=new Uint8Array(1089),bm=new Uint16Array(1089);function xb(r){return r===0?-.03125:r===32?.03125:0}var bb=de([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const wb={type:2,extent:Rn,loadGeometry:()=>[[new L(0,0),new L(8193,0),new L(8193,8193),new L(0,8193),new L(0,0)]]};class hy{constructor(e,o,l,u,d){this.tileID=e,this.uid=Pe(),this.uses=0,this.tileSize=o,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=d,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const o=e+this.timeAdded;o<ge.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Mu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,o,l){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,d){const _={};if(!d)return _;for(const y of u){const w=y.layerIds.map(T=>d.getLayer(T)).filter(Boolean);if(w.length!==0){y.layers=w,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map(T=>w.filter(I=>I.id===T)[0]));for(const T of w)_[T.id]=y}}return _}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const d=this.buckets[u];if(d instanceof gc){if(this.hasSymbolBuckets=!0,!l)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const d=this.buckets[u];if(d instanceof gc&&d.hasRTLText){this.hasRTLText=!0,Bo.isLoading()||Bo.isLoaded()||qh()!=="deferred"||lc();break}}this.queryPadding=0;for(const u in this.buckets){const d=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(u).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Xs}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const l in this.buckets){const u=this.buckets[l];u.uploadPending()&&u.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pd(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pd(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Pd(e,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,l,u,d,_,y,w){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:y,transform:_,params:d,tileTransform:this.tileTransform},e,o,l):{}}querySourceFeatures(e,o){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const u=l.loadVTLayers(),d=o?o.sourceLayer:"",_=u._geojsonTileLayer||u[d];if(!_)return;const y=ss(o&&o.filter),{z:w,x:T,y:I}=this.tileID.canonical,k={z:w,x:T,y:I};for(let O=0;O<_.length;O++){const B=_.feature(O);if(y.needGeometry){const ee=Au(B,!0);if(!y.filter(new Ii(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!y.filter(new Ii(this.tileID.overscaledZ),B))continue;const V=l.getId(B,d),q=new vb(B,w,T,I,V);q.tile=k,e.push(q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const l=kt(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const l=Date.now();let u=!1;if(this.expirationTime>l)u=!1;else if(o)if(this.expirationTime<o)u=!0;else{const d=this.expirationTime-o;d?this.expirationTime=l+Math.max(d,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!o)return;const l=this.latestFeatureIndex.loadVTLayers(),u=o.style.listImages();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const _=this.buckets[d],y=_.layers[0].sourceLayer||"_geojsonTileLayer",w=l[y],T=e[y];if(!w||!T||Object.keys(T).length===0)continue;if(_.update(T,w,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof um||_ instanceof lm){const k=o.style._getSourceCache(_.layers[0].source);o._terrain&&o._terrain.enabled&&k&&_.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(k.id,this.tileID)}const I=o&&o.style&&o.style.getLayer(d);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ge.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=ge.now()+e}setTexture(e,o){const l=o.context,u=l.gl;this.texture=o.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Pd(l,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax))}setDependencies(e,o){const l={};for(const u of o)l[u]=!0;this.dependencies[e]=l}hasDependency(e,o){for(const l of e){const u=this.dependencies[l];if(u){for(const d of o)if(u[d])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const l=dl(wb,this.tileID.canonical,this.tileTransform)[0],u=new he,d=new ii;for(let _=0;_<l.length;_++){const{x:y,y:w}=l[_];u.emplaceBack(y,w),d.emplaceBack(_)}d.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,Od.members),this._tileDebugSegments=Yi.simpleSegment(0,0,u.length,d.length)}_makeTileBoundsBuffers(e,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const l=dl(wb,this.tileID.canonical,this.tileTransform)[0];let u,d;if(this.isRaster){const _=function(y,w){const T=Mu(y,w),I=Math.pow(2,y.z);for(let ee=0;ee<La;ee++)for(let le=0;le<La;le++){const be=ks((y.x+(le+xb(le))/Ls)/I),ke=$r((y.y+(ee+xb(ee))/Ls)/I),Oe=w.project(be,ke),ze=ee*La+le;Pa[2*ze+0]=Math.round((Oe.x*T.scale-T.x)*Rn),Pa[2*ze+1]=Math.round((Oe.y*T.scale-T.y)*Rn)}vc.fill(0),bm.fill(0);for(let ee=2045;ee>=0;ee--){const le=4*ee,be=yc[le+0],ke=yc[le+1],Oe=yc[le+2],ze=yc[le+3],Ne=be+Oe>>1,rt=ke+ze>>1,at=Ne+rt-ke,xt=rt+be-Ne,bt=ke*La+be,nt=ze*La+Oe,dt=rt*La+Ne,Tt=Math.hypot((Pa[2*bt+0]+Pa[2*nt+0])/2-Pa[2*dt+0],(Pa[2*bt+1]+Pa[2*nt+1])/2-Pa[2*dt+1])>=16;if(vc[dt]=vc[dt]||(Tt?1:0),ee<1022){const Nt=(ke+xt>>1)*La+(be+at>>1),Lt=(ze+xt>>1)*La+(Oe+at>>1);vc[dt]=vc[dt]||vc[Nt]||vc[Lt]}}const k=new ye,O=new Qt;let B=0;function V(ee,le){const be=le*La+ee;return bm[be]===0&&(k.emplaceBack(Pa[2*be+0],Pa[2*be+1],ee*Rn/Ls,le*Rn/Ls),bm[be]=++B),bm[be]-1}function q(ee,le,be,ke,Oe,ze){const Ne=ee+be>>1,rt=le+ke>>1;if(Math.abs(ee-Oe)+Math.abs(le-ze)>1&&vc[rt*La+Ne])q(Oe,ze,ee,le,Ne,rt),q(be,ke,Oe,ze,Ne,rt);else{const at=V(ee,le),xt=V(be,ke),bt=V(Oe,ze);O.emplaceBack(at,xt,bt)}}return q(0,0,Ls,Ls,Ls,0),q(Ls,Ls,0,0,0,Ls),{vertices:k,indices:O}}(this.tileID.canonical,o);u=_.vertices,d=_.indices}else{u=new ye,d=new Qt;for(const{x:y,y:w}of l)u.emplaceBack(y,w,0,0);const _=im(u.int16,void 0,4);for(let y=0;y<_.length;y+=3)d.emplaceBack(_[y],_[y+1],_[y+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,bb.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(d),this._tileBoundsSegments=Yi.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugBuffers(e,o){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!o||o.name!=="globe")return;const l=this.tileID.canonical,u=fb(Dd(l));this._makeGlobeTileDebugBorderBuffer(e,l,u),this._makeGlobeTileDebugTextBuffer(e,l,u)}_makeGlobeTileDebugBorderBuffer(e,o,l){const u=new he,d=new ii,_=new fe,y=(T,I,k,O,B)=>{const V=(k-T)/(B-1),q=(O-I)/(B-1),ee=u.length;for(let le=0;le<B;le++){const be=T+le*V,ke=I+le*q;u.emplaceBack(be,ke);const Oe=hb(be,ke,o),ze=Cu(Oe,Oe,l);_.emplaceBack(ze[0],ze[1],ze[2]),d.emplaceBack(ee+le)}},w=Rn;y(0,0,w,0,16),y(w,0,w,w,16),y(w,w,0,w,16),y(0,w,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,Od.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(_,cb.members),this._tileDebugSegments=Yi.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugTextBuffer(e,o,l){const u=new he,d=new Qt,_=new fe,y=25;d.reserve(32),u.reserve(y),_.reserve(y);const w=(T,I)=>y*T+I;for(let T=0;T<y;T++){const I=2048*T;for(let k=0;k<y;k++){const O=2048*k;u.emplaceBack(O,I);const B=hb(O,I,o),V=Cu(B,B,l);_.emplaceBack(V[0],V[1],V[2])}}for(let T=0;T<4;T++)for(let I=0;I<4;I++){const k=w(T,I),O=w(T,I+1),B=w(T+1,I),V=w(T+1,I+1);d.emplaceBack(k,O,B),d.emplaceBack(B,O,V)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(d),this._tileDebugTextBuffer=e.createVertexBuffer(u,Od.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(_,cb.members),this._tileDebugTextSegments=Yi.simpleSegment(0,0,y,32)}}class kk{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,l){const u=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Ye(this.stateChanges[e][u],l),this.deletedStates[e]===null){this.deletedStates[e]={};for(const d in this.state[e])d!==u&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const d in this.state[e][u])l[d]||(this.deletedStates[e][u][d]=null)}else for(const d in l)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][d]===null&&delete this.deletedStates[e][u][d]}removeFeatureState(e,o,l){if(this.deletedStates[e]===null)return;const u=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&o!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][l]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(l in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][l]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,o){const l=String(o),u=Ye({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const d=this.deletedStates[e][o];if(d===null)return{};for(const _ in d)delete u[_]}return u}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const l={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const d={};for(const _ in this.stateChanges[u])this.state[u][_]||(this.state[u][_]={}),Ye(this.state[u][_],this.stateChanges[u][_]),d[_]=this.state[u][_];l[u]=d}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const d={};if(this.deletedStates[u]===null)for(const _ in this.state[u])d[_]={},this.state[u][_]={};else for(const _ in this.deletedStates[u]){if(this.deletedStates[u][_]===null)this.state[u][_]={};else for(const y of Object.keys(this.deletedStates[u][_]))delete this.state[u][_][y];d[_]=this.state[u][_]}l[u]=l[u]||{},Ye(l[u],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const u in e)e[u].setFeatureState(l,o)}}class Eb{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,o){const l=this.toIdx(e,o);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(e,o){return this.leaves[this.toIdx(e,o)]}toIdx(e,o){return o*this.size+e}}function Tb(r,e,o,l){let u=0,d=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(l[_])<1e-15){if(o[_]<r[_]||o[_]>e[_])return null}else{const y=1/l[_];let w=(r[_]-o[_])*y,T=(e[_]-o[_])*y;if(w>T){const I=w;w=T,T=I}if(w>u&&(u=w),T<d&&(d=T),u>d)return null}return u}function Ab(r,e,o,l,u,d,_,y,w,T,I){const k=l-r,O=u-e,B=d-o,V=_-r,q=y-e,ee=w-o,le=I[1]*ee-I[2]*q,be=I[2]*V-I[0]*ee,ke=I[0]*q-I[1]*V,Oe=k*le+O*be+B*ke;if(Math.abs(Oe)<1e-15)return null;const ze=1/Oe,Ne=T[0]-r,rt=T[1]-e,at=T[2]-o,xt=(Ne*le+rt*be+at*ke)*ze;if(xt<0||xt>1)return null;const bt=rt*B-at*O,nt=at*k-Ne*B,dt=Ne*O-rt*k,Tt=(I[0]*bt+I[1]*nt+I[2]*dt)*ze;return Tt<0||xt+Tt>1?null:(V*bt+q*nt+ee*dt)*ze}function Sb(r,e,o){return(r-e)/(o-e)}function Cb(r,e,o,l,u,d,_,y,w){const T=1<<o,I=d-l,k=_-u,O=(r+1)/T*I+l,B=(e+0)/T*k+u,V=(e+1)/T*k+u;y[0]=(r+0)/T*I+l,y[1]=B,w[0]=O,w[1]=V}class Ib{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(d){const _=Math.ceil(Math.log2(d.dim/8)),y=[];let w=Math.ceil(Math.pow(2,_));const T=1/w,I=(B,V,q,ee,le)=>{const be=ee?1:0,ke=(B+1)*q-be,Oe=V*q,ze=(V+1)*q-be;le[0]=B*q,le[1]=Oe,le[2]=ke,le[3]=ze};let k=new Eb(w);const O=[];for(let B=0;B<w*w;B++){I(B%w,Math.floor(B/w),T,!1,O);const V=xc(O[0],O[1],d),q=xc(O[2],O[1],d),ee=xc(O[2],O[3],d),le=xc(O[0],O[3],d);k.minimums.push(Math.min(V,q,ee,le)),k.maximums.push(Math.max(V,q,ee,le)),k.leaves.push(1)}for(y.push(k),w/=2;w>=1;w/=2){const B=y[y.length-1];k=new Eb(w);for(let V=0;V<w*w;V++){I(V%w,Math.floor(V/w),2,!0,O);const q=B.getElevation(O[0],O[1]),ee=B.getElevation(O[2],O[1]),le=B.getElevation(O[2],O[3]),be=B.getElevation(O[0],O[3]),ke=B.isLeaf(O[0],O[1]),Oe=B.isLeaf(O[2],O[1]),ze=B.isLeaf(O[2],O[3]),Ne=B.isLeaf(O[0],O[3]),rt=Math.min(q.min,ee.min,le.min,be.min),at=Math.max(q.max,ee.max,le.max,be.max),xt=ke&&Oe&&ze&&Ne;k.maximums.push(at),k.minimums.push(rt),k.leaves.push(at-rt<=5&&xt?1:0)}y.push(k)}return y}(this.dem),l=o.length-1,u=o[l];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(o,0,0,l,0)}raycastRoot(e,o,l,u,d,_,y=1){return Tb([e,o,-100],[l,u,this.maximums[0]*y],d,_)}raycast(e,o,l,u,d,_,y=1){if(!this.nodeCount)return null;const w=this.raycastRoot(e,o,l,u,d,_,y);if(w==null)return null;const T=[],I=[],k=[],O=[],B=[{idx:0,t:w,nodex:0,nodey:0,depth:0}];for(;B.length>0;){const{idx:V,t:q,nodex:ee,nodey:le,depth:be}=B.pop();if(this.leaves[V]){Cb(ee,le,be,e,o,l,u,k,O);const Oe=1<<be,ze=(ee+0)/Oe,Ne=(ee+1)/Oe,rt=(le+0)/Oe,at=(le+1)/Oe,xt=xc(ze,rt,this.dem)*y,bt=xc(Ne,rt,this.dem)*y,nt=xc(Ne,at,this.dem)*y,dt=xc(ze,at,this.dem)*y,Tt=Ab(k[0],k[1],xt,O[0],k[1],bt,O[0],O[1],nt,d,_),Nt=Ab(O[0],O[1],nt,k[0],O[1],dt,k[0],k[1],xt,d,_),Lt=Math.min(Tt!==null?Tt:Number.MAX_VALUE,Nt!==null?Nt:Number.MAX_VALUE);if(Lt!==Number.MAX_VALUE)return Lt;{const zt=Rg([],d,_,q);if(Mb(xt,bt,dt,nt,Sb(zt[0],k[0],O[0]),Sb(zt[1],k[1],O[1]))>=zt[2])return q}continue}let ke=0;for(let Oe=0;Oe<this._siblingOffset.length;Oe++){Cb((ee<<1)+this._siblingOffset[Oe][0],(le<<1)+this._siblingOffset[Oe][1],be+1,e,o,l,u,k,O),k[2]=-100,O[2]=this.maximums[this.childOffsets[V]+Oe]*y;const ze=Tb(k,O,d,_);if(ze!=null){const Ne=ze;T[Oe]=Ne;let rt=!1;for(let at=0;at<ke&&!rt;at++)Ne>=T[I[at]]&&(I.splice(at,0,Oe),rt=!0);rt||(I[ke]=Oe),ke++}}for(let Oe=0;Oe<ke;Oe++){const ze=I[Oe];B.push({idx:this.childOffsets[V]+ze,t:T[ze],nodex:(ee<<1)+this._siblingOffset[ze][0],nodey:(le<<1)+this._siblingOffset[ze][1],depth:be+1})}}return null}_addNode(e,o,l){return this.minimums.push(e),this.maximums.push(o),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(e,o,l,u,d){if(e[u].isLeaf(o,l)===1)return;this.childOffsets[d]||(this.childOffsets[d]=this.nodeCount);const _=u-1,y=e[_];let w=0,T=0;for(let I=0;I<this._siblingOffset.length;I++){const k=2*o+this._siblingOffset[I][0],O=2*l+this._siblingOffset[I][1],B=y.getElevation(k,O),V=y.isLeaf(k,O),q=this._addNode(B.min,B.max,V);V&&(w|=1<<I),T||(T=q)}for(let I=0;I<this._siblingOffset.length;I++)w&1<<I||this._construct(e,2*o+this._siblingOffset[I][0],2*l+this._siblingOffset[I][1],_,T+I)}}function Mb(r,e,o,l,u,d){return mn(mn(r,o,d),mn(e,l,d),u)}function xc(r,e,o){const l=o.dim,u=Le(r*l-.5,0,l-1),d=Le(e*l-.5,0,l-1),_=Math.floor(u),y=Math.floor(d),w=Math.min(_+1,l-1),T=Math.min(y+1,l-1);return Mb(o.get(_,y),o.get(w,y),o.get(_,T),o.get(w,T),u-_,d-y)}const kb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class wm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,o,l,u=!1,d=!1){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return Ht(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const _=this.dim=o.height-2,y=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=l||"mapbox",this.borderReady=u,!u){for(let w=0;w<_;w++)y[this._idx(-1,w)]=y[this._idx(0,w)],y[this._idx(_,w)]=y[this._idx(_-1,w)],y[this._idx(w,-1)]=y[this._idx(w,0)],y[this._idx(w,_)]=y[this._idx(w,_-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(_,-1)]=y[this._idx(_-1,0)],y[this._idx(-1,_)]=y[this._idx(0,_-1)],y[this._idx(_,_)]=y[this._idx(_-1,_-1)],d&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Ib(this)}get(e,o,l=!1){l&&(e=Le(e,-1,this.dim),o=Le(o,-1,this.dim));const u=4*this._idx(e,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return kb[e]}get unpackVector(){return kb[this.encoding]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,l){return(256*e*256+256*o+l)/10-1e4}_unpackTerrarium(e,o,l){return 256*e+o+l/256-32768}static pack(e,o){const l=[0,0,0,0],u=wm.getUnpackVector(o);let d=Math.floor((e+u[3])/u[2]);return l[2]=d%256,d=Math.floor(d/256),l[1]=d%256,d=Math.floor(d/256),l[0]=d,l}getPixels(){return new Vo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,o,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=o*this.dim,d=o*this.dim+this.dim,_=l*this.dim,y=l*this.dim+this.dim;switch(o){case-1:u=d-1;break;case 1:d=u+1}switch(l){case-1:_=y-1;break;case 1:y=_+1}const w=-o*this.dim,T=-l*this.dim;for(let I=_;I<y;I++)for(let k=u;k<d;k++){const O=4*this._idx(k,I),B=4*this._idx(k+w,I+T);this.pixels[O+0]=e.pixels[B+0],this.pixels[O+1]=e.pixels[B+1],this.pixels[O+2]=e.pixels[B+2],this.pixels[O+3]=e.pixels[B+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ft(wm,"DEMData"),Ft(Ib,"DemMinMaxQuadTree",{omit:["dem"]});class Lk{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,l){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const d={value:o,timeout:void 0};if(l!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},l)),this.data[u].push(d),this.order.push(u),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const l=e.wrapped().key,u=o===void 0?0:this.data[l].indexOf(o),d=this.data[l][u];return this.data[l].splice(u,1),d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(d.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const l in this.data)for(const u of this.data[l])e(u.value)||o.push(u);for(const l of o)this.remove(l.value.tileID,l)}}class hf{constructor(e,o,l){this.func=e,this.mask=o,this.range=l}}hf.ReadOnly=!1,hf.ReadWrite=!0,hf.disabled=new hf(519,hf.ReadOnly,[0,1]);const fy=7680;class dy{constructor(e,o,l,u,d,_){this.test=e,this.ref=o,this.mask=l,this.fail=u,this.depthFail=d,this.pass=_}}dy.disabled=new dy({func:519,mask:0},0,0,fy,fy,fy);class Oa{constructor(e,o,l){this.blendFunction=e,this.blendColor=o,this.mask=l}}Oa.Replace=[1,0],Oa.disabled=new Oa(Oa.Replace,Nn.transparent,[!1,!1,!1,!1]),Oa.unblended=new Oa(Oa.Replace,Nn.transparent,[!0,!0,!0,!0]),Oa.alphaBlended=new Oa([1,771],Nn.transparent,[!0,!0,!0,!0]);const py=1029,my=2305;class Qs{constructor(e,o,l){this.enable=e,this.mode=o,this.frontFace=l}}Qs.disabled=new Qs(!1,py,my),Qs.backCCW=new Qs(!0,py,my),Qs.backCW=new Qs(!0,py,2304),Qs.frontCW=new Qs(!0,1028,2304),Qs.frontCCW=new Qs(!0,1028,my);class ku extends gn{constructor(e,o,l){super(),this.id=e,this._onlySymbols=l,o.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Lk(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new kk,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,o){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,o)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const o in this._tiles){const l=this._tiles[o];this._source.prepareTile(l)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,l.tileID),l.upload(e),l.prepare(this.map.style.imageManager)}else for(const o in this._tiles){const l=this._tiles[o];l.upload(e),l.prepare(this.map.style.imageManager)}}getIds(){return ve(this._tiles).map(e=>e.tileID).sort(Lb).map(e=>e.key)}getRenderableIds(e){const o=[];for(const l in this._tiles)this._isIdRenderable(+l,e)&&o.push(this._tiles[l]);return e?o.sort((l,u)=>{const d=l.tileID,_=u.tileID,y=new L(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),w=new L(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-_.overscaledZ||w.y-y.y||w.x-y.x}).map(l=>l.tileID.key):o.map(l=>l.tileID).sort(Lb).map(l=>l.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,o){const l=this._tiles[e];l&&(l.state!=="loading"&&(l.state=o),this._loadTile(l,this._tileLoaded.bind(this,l,e,o)))}_tileLoaded(e,o,l,u){if(u)if(e.state="errored",u.status!==404)this._source.fire(new an(u,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const d=this.map.painter.terrain;this.update(this.transform,d.getScaledDemTileSize(),!0),d.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=ge.now(),l==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Yt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const o=this.getRenderableIds();for(let u=0;u<o.length;u++){const d=o[u];if(e.neighboringTiles&&e.neighboringTiles[d]){const _=this.getTileByID(d);l(e,_),l(_,e)}}function l(u,d){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let _=d.tileID.canonical.x-u.tileID.canonical.x;const y=d.tileID.canonical.y-u.tileID.canonical.y,w=Math.pow(2,u.tileID.canonical.z),T=d.tileID.key;_===0&&y===0||Math.abs(y)>1||(Math.abs(_)>1&&(Math.abs(_+w)===1?_+=w:Math.abs(_-w)===1&&(_-=w)),d.dem&&u.dem&&(u.dem.backfillBorder(d.dem,_,y),u.neighboringTiles&&u.neighboringTiles[T]&&(u.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,l,u){for(const d in this._tiles){let _=this._tiles[d];if(u[d]||!_.hasData()||_.tileID.overscaledZ<=o||_.tileID.overscaledZ>l)continue;let y=_.tileID;for(;_&&_.tileID.overscaledZ>o+1;){const T=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[T.key],_&&_.hasData()&&(y=T)}let w=y;for(;w.overscaledZ>o;)if(w=w.scaledTo(w.overscaledZ-1),e[w.key]){u[y.key]=y;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const l=this._loadedParentTiles[e.key];return l&&l.tileID.overscaledZ>=o?l:null}for(let l=e.overscaledZ-1;l>=o;l--){const u=e.scaledTo(l),d=this._getLoadedTile(u);if(d)return d}}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,o){o=o||this._source.tileSize;const l=Math.ceil(e.width/o)+1,u=Math.ceil(e.height/o)+1,d=Math.floor(l*u*5),_=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,d):d,y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(y)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const l={};for(const u in this._tiles){const d=this._tiles[u];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+o),l[d.tileID.key]=d}this._tiles=l;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,o,l){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let u;this.updateCacheSize(e,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new lo(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(u=e.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(y=>this._source.hasTile(y)))):u=[];const d=this._updateRetainedTiles(u);if(Pb(this._source.type)&&u.length!==0){const y={},w={},T=Object.keys(d);for(const k of T){const O=d[k],B=this._tiles[k];if(!B||B.fadeEndTime&&B.fadeEndTime<=ge.now())continue;const V=this.findLoadedParent(O,Math.max(O.overscaledZ-ku.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),y[V.tileID.key]=V.tileID),w[k]=O}const I=u[u.length-1].overscaledZ;for(const k in this._tiles){const O=this._tiles[k];if(d[k]||!O.hasData())continue;let B=O.tileID;for(;B.overscaledZ>I;){B=B.scaledTo(B.overscaledZ-1);const V=this._tiles[B.key];if(V&&V.hasData()&&w[B.key]){d[k]=O.tileID;break}}}for(const k in y)d[k]||(this._coveredTiles[k]=!0,d[k]=y[k])}for(const y in d)this._tiles[y].clearFadeHold();const _=function(y,w){const T=[];for(const I in y)I in w||T.push(I);return T}(this._tiles,d);for(const y of _){const w=this._tiles[y];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const o={};if(e.length===0)return o;const l={},u=e.reduce((T,I)=>Math.min(T,I.overscaledZ),1/0),d=e[0].overscaledZ,_=Math.max(d-ku.maxOverzooming,this._source.minzoom),y=Math.max(d+ku.maxUnderzooming,this._source.minzoom),w={};for(const T of e){const I=this._addTile(T);o[T.key]=T,I.hasData()||u<this._source.maxzoom&&(w[T.key]=T)}this._retainLoadedChildren(w,u,y,o);for(const T of e){let I=this._tiles[T.key];if(I.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const O=T.children(this._source.maxzoom)[0],B=this.getTile(O);if(B&&B.hasData()){o[O.key]=O;continue}}else{const O=T.children(this._source.maxzoom);if(o[O[0].key]&&o[O[1].key]&&o[O[2].key]&&o[O[3].key])continue}let k=I.wasRequested();for(let O=T.overscaledZ-1;O>=_;--O){const B=T.scaledTo(O);if(l[B.key]||(l[B.key]=!0,I=this.getTile(B),!I&&k&&(I=this._addTile(B)),I&&(o[B.key]=B,k=I.wasRequested(),I.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let l,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){l=this._loadedParentTiles[u.key];break}o.push(u.key);const d=u.scaledTo(u.overscaledZ-1);if(l=this._getLoadedTile(d),l)break;u=d}for(const d of o)this._loadedParentTiles[d]=l}}_addTile(e){let o=this._tiles[e.key];if(o)return this._source.prepareTile&&this._source.prepareTile(o),o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const l=Boolean(o);if(!l){const u=this.map?this.map.painter:null;o=new hy(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._source.prepareTile&&this._source.prepareTile(o)||this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))}return o?(o.uses++,this._tiles[e.key]=o,l||this._source.fire(new Yt("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const l=o.getExpiryTimeout();l&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},l))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,o,l){const u=[],d=this.transform;if(!d)return u;for(const _ in this._tiles){const y=this._tiles[_];if(l&&y.clearQueryDebugViz(),y.holdingForFade())continue;const w=e.containsTile(y,d,o);w&&u.push(w)}return u}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(l=>this._tiles[l].tileID);for(const l of o)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Pb(this._source.type))for(const e in this._tiles){const o=this._tiles[e];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=ge.now())return!0}return!1}setFeatureState(e,o,l){this._state.updateState(e=e||"_geojsonTileLayer",o,l)}removeFeatureState(e,o,l){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,l)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,l){const u=this._tiles[e];u&&u.setDependencies(o,l)}reloadTilesForDependencies(e,o){for(const l in this._tiles)this._tiles[l].hasDependency(e,o)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(e,o))}_preloadTiles(e,o){const l=new Map,u=Array.isArray(e)?e:[e],d=this.map.painter.terrain,_=this.usedForTerrain&&d?d.getScaledDemTileSize():this._source.tileSize;for(const y of u){const w=y.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of w)l.set(T.key,T);this.usedForTerrain&&y.updateElevation(!1)}Xe(Array.from(l.values()),(y,w)=>{const T=new hy(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,I=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),w(I,T)})},o)}}function Lb(r,e){const o=Math.abs(2*r.wrap)-+(r.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||l-o||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x}function Pb(r){return r==="raster"||r==="image"||r==="video"}ku.maxOverzooming=10,ku.maxUnderzooming=3;class Em{constructor(e,o,l){this._demTile=e,this._dem=this._demTile.dem,this._scale=o,this._offset=l}static create(e,o,l){const u=l||e.findDEMTileFor(o);if(!u||!u.dem)return;const d=u.dem,_=u.tileID,y=1<<o.canonical.z-_.canonical.z;return new Em(u,u.tileSize/Rn/y,[(o.canonical.x/y-_.canonical.x)*d.dim,(o.canonical.y/y-_.canonical.y)*d.dim])}tileCoordToPixel(e,o){const l=o*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),d=Math.floor(l);return new L(u,d)}getElevationAt(e,o,l,u){const d=e*this._scale+this._offset[0],_=o*this._scale+this._offset[1],y=Math.floor(d),w=Math.floor(_),T=this._dem;return u=!!u,l?mn(mn(T.get(y,w,u),T.get(y,w+1,u),_-w),mn(T.get(y+1,w,u),T.get(y+1,w+1,u),_-w),d-y):T.get(y,w,u)}getElevationAtPixel(e,o,l){return this._dem.get(e,o,!!l)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Yh(1,e)*this._dem.stride}}class Ob{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new pi(Rn,16,0),this.featureIndexArray=new Bi,this.promoteId=o}insert(e,o,l,u,d,_=0){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,u,d,_);const w=this.grid;for(let T=0;T<o.length;T++){const I=o[T],k=[1/0,1/0,-1/0,-1/0];for(let O=0;O<I.length;O++){const B=I[O];k[0]=Math.min(k[0],B.x),k[1]=Math.min(k[1],B.y),k[2]=Math.max(k[2],B.x),k[3]=Math.max(k[3],B.y)}k[0]<Rn&&k[1]<Rn&&k[2]>=0&&k[3]>=0&&w.insert(y,k[0],k[1],k[2],k[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Iu.VectorTile(new Md(this.rawTileData)).layers,this.sourceLayerCoder=new yb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,o,l,u){this.loadVTLayers();const d=e.params||{},_=ss(d.filter),y=e.tileResult,w=e.transform,T=y.bufferedTilespaceBounds,I=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(V,q,ee,le)=>e1(y.bufferedTilespaceGeometry,V,q,ee,le));I.sort(Pk);let k=null;w.elevation&&I.length>0&&(k=Em.create(w.elevation,this.tileID));const O={};let B;for(let V=0;V<I.length;V++){const q=I[V];if(q===B)continue;B=q;const ee=this.featureIndexArray.get(q);let le=null;this.loadMatchingFeature(O,ee,_,d.layers,d.availableImages,o,l,u,(be,ke,Oe,ze=0)=>(le||(le=dl(be,this.tileID.canonical,e.tileTransform)),ke.queryIntersectsFeature(y,be,Oe,le,this.z,e.transform,e.pixelPosMatrix,k,ze)))}return O}loadMatchingFeature(e,o,l,u,d,_,y,w,T){const{featureIndex:I,bucketIndex:k,sourceLayerIndex:O,layoutVertexArrayOffset:B}=o,V=this.bucketLayerIDs[k];if(u&&!function(be,ke){for(let Oe=0;Oe<be.length;Oe++)if(ke.indexOf(be[Oe])>=0)return!0;return!1}(u,V))return;const q=this.sourceLayerCoder.decode(O),ee=this.vtLayers[q].feature(I);if(l.needGeometry){const be=Au(ee,!0);if(!l.filter(new Ii(this.tileID.overscaledZ),be,this.tileID.canonical))return}else if(!l.filter(new Ii(this.tileID.overscaledZ),ee))return;const le=this.getId(ee,q);for(let be=0;be<V.length;be++){const ke=V[be];if(u&&u.indexOf(ke)<0)continue;const Oe=_[ke];if(!Oe)continue;let ze={};le!==void 0&&w&&(ze=w.getState(Oe.sourceLayer||"_geojsonTileLayer",le));const Ne=Ye({},y[ke]);Ne.paint=Db(Ne.paint,Oe.paint,ee,ze,d),Ne.layout=Db(Ne.layout,Oe.layout,ee,ze,d);const rt=!T||T(ee,Oe,ze,B);if(!rt)continue;const at=new vb(ee,this.z,this.x,this.y,le);at.layer=Ne;let xt=e[ke];xt===void 0&&(xt=e[ke]=[]),xt.push({featureIndex:I,feature:at,intersectionZ:rt})}}lookupSymbolFeatures(e,o,l,u,d,_,y,w){const T={};this.loadVTLayers();const I=ss(d);for(const k of e)this.loadMatchingFeature(T,{bucketIndex:l,sourceLayerIndex:u,featureIndex:k,layoutVertexArrayOffset:0},I,_,y,w,o);return T}loadFeature(e){const{featureIndex:o,sourceLayerIndex:l}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(l),d=this.vtFeatures[u];if(d[o])return d[o];const _=this.vtLayers[u].feature(o);return d[o]=_,_}hasLayer(e){for(const o of this.bucketLayerIDs)for(const l of o)if(e===l)return!0;return!1}getId(e,o){let l=e.id;return this.promoteId&&(l=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function Db(r,e,o,l,u){return ct(r,(d,_)=>{const y=e instanceof x?e.get(_):null;return y&&y.evaluate?y.evaluate(o,l,u):y})}function Pk(r,e){return e-r}Ft(Ob,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Rb{constructor(e){const o={},l=[];for(const y in e){const w=e[y],T=o[y]={};for(const I in w.glyphs){const k=w.glyphs[+I];if(!k||k.bitmap.width===0||k.bitmap.height===0)continue;const O=k.metrics.localGlyph?2:1,B={x:0,y:0,w:k.bitmap.width+2*O,h:k.bitmap.height+2*O};l.push(B),T[I]=B}}const{w:u,h:d}=qg(l),_=new pl({width:u||1,height:d||1});for(const y in e){const w=e[y];for(const T in w.glyphs){const I=w.glyphs[+T];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const k=o[y][T],O=I.metrics.localGlyph?2:1;pl.copy(I.bitmap,_,{x:0,y:0},{x:k.x+O,y:k.y+O},I.bitmap)}}this.image=_,this.positions=o}}Ft(Rb,"GlyphAtlas");class Ok{constructor(e){this.tileID=new lo(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Mu(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,o,l,u,d){this.status="parsing",this.data=e,this.collisionBoxArray=new Xs;const _=new yb(Object.keys(e.layers).sort()),y=new Ob(this.tileID,this.promoteId);y.bucketLayerIDs=[];const w={},T=new ay(256,256),I={featureIndex:y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:l},k=o.familiesBySource[this.source];for(const ze in k){const Ne=e.layers[ze];if(!Ne)continue;let rt=!1,at=!1;for(const nt of k[ze])nt[0].type==="symbol"?rt=!0:at=!0;if(this.isSymbolTile===!0&&!rt||this.isSymbolTile===!1&&!at)continue;Ne.version===1&&Ht(`Vector tile source "${this.source}" layer "${ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xt=_.encode(ze),bt=[];for(let nt=0;nt<Ne.length;nt++){const dt=Ne.feature(nt),Tt=y.getId(dt,ze);bt.push({feature:dt,id:Tt,index:nt,sourceLayerIndex:xt})}for(const nt of k[ze]){const dt=nt[0];this.isSymbolTile!==void 0&&dt.type==="symbol"!==this.isSymbolTile||dt.minzoom&&this.zoom<Math.floor(dt.minzoom)||dt.maxzoom&&this.zoom>=dt.maxzoom||dt.visibility!=="none"&&(_y(nt,this.zoom,l),(w[dt.id]=dt.createBucket({index:y.bucketLayerIDs.length,layers:nt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.name,availableImages:l})).populate(bt,I,this.tileID.canonical,this.tileTransform),y.bucketLayerIDs.push(nt.map(Tt=>Tt.id)))}}let O,B,V,q;T.trim();const ee={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},le=ct(I.glyphDependencies,ze=>Object.keys(ze).map(Number));Object.keys(le).length?u.send("getGlyphs",{uid:this.uid,stacks:le},(ze,Ne)=>{O||(O=ze,B=Ne,Oe.call(this))},void 0,!1,ee):B={};const be=Object.keys(I.iconDependencies);be.length?u.send("getImages",{icons:be,source:this.source,tileID:this.tileID,type:"icons"},(ze,Ne)=>{O||(O=ze,V=Ne,Oe.call(this))},void 0,!1,ee):V={};const ke=Object.keys(I.patternDependencies);function Oe(){if(O)return d(O);if(B&&V&&q){const ze=new Rb(B),Ne=new $1(V,q);for(const rt in w){const at=w[rt];at instanceof gc?(_y(at.layers,this.zoom,l),ak(at,B,ze.positions,V,Ne.iconPositions,this.showCollisionBoxes,l,this.tileID.canonical,this.tileZoom,this.projection)):at.hasPattern&&(at instanceof um||at instanceof lm||at instanceof Sd)&&(_y(at.layers,this.zoom,l),at.addFeatures(I,this.tileID.canonical,Ne.patternPositions,l,this.tileTransform))}this.status="done",d(null,{buckets:ve(w).filter(rt=>!rt.isEmpty()),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ze.image,lineAtlas:T,imageAtlas:Ne,glyphMap:this.returnDependencies?B:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?ze.positions:null})}}ke.length?u.send("getImages",{icons:ke,source:this.source,tileID:this.tileID,type:"patterns"},(ze,Ne)=>{O||(O=ze,q=Ne,Oe.call(this))},void 0,!1,ee):q={},Oe.call(this)}}function _y(r,e,o){const l=new Ii(e);for(const u of r)u.recalculate(l,o)}class zb{constructor(e){this.entries={},this.scheduler=e}request(e,o,l,u){const d=this.entries[e]=this.entries[e]||{callbacks:[]};if(d.result){const[_,y]=d.result;return this.scheduler?this.scheduler.add(()=>{u(_,y)},o):u(_,y),()=>{}}return d.callbacks.push(u),d.cancel||(d.cancel=l((_,y)=>{d.result=[_,y];for(const w of d.callbacks)this.scheduler?this.scheduler.add(()=>{w(_,y)},o):w(_,y);setTimeout(()=>delete this.entries[e],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(_=>_!==u),d.callbacks.length||(d.cancel(),delete this.entries[e]))}}}function Nb(r,e,o){const l=JSON.stringify(r.request);return r.data&&(this.deduped.entries[l]={result:[null,r.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},u=>{const d=pe(r.request,(_,y,w,T)=>{_?u(_):y&&u(null,{vectorTile:o?void 0:new Iu.VectorTile(new Md(y)),rawData:y,cacheControl:w,expires:T})});return()=>{d.cancel(),u()}},e)}const Dk=Ma(new Float32Array(16));class bc{constructor(e){this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,o){return{x:0,y:0,z:0}}unproject(e,o){return new xi(0,0)}projectTilePoint(e,o,l){return{x:e,y:o,z:0}}locationPoint(e,o){return e._coordinatePoint(e.locationCoordinate(o),!1)}pixelsPerMeter(e,o){return Yh(1,e)*o}farthestPixelDistance(e){return function(o,l){const u=o.fovAboveCenter,d=o.elevation?o.elevation.getMinElevationBelowMSL()*l:0,_=(o._camera.position[2]*o.worldSize-d)/Math.cos(o._pitch),y=Math.sin(u)*_/Math.sin(Math.max(Math.PI/2-o._pitch-u,.01)),w=Math.sin(o._pitch)*y+_;return Math.min(1.01*w,_*(1/o._horizonShift))}(e,e.pixelsPerMeter)}pointCoordinate(e,o,l,u){const d=e.horizonLineFromTop(!1),_=new L(o,Math.max(d,l));return e.rayIntersectionCoordinate(e.pointRayIntersection(_,u))}createInversionMatrix(e,o){return Dk}createTileMatrix(e,o,l){let u,d,_;const y=l.canonical,w=Ma(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Mu(y,this);u=1,d=T.x+l.wrap*T.scale,_=T.y,pc(w,w,[u/T.scale,u/T.scale,e.pixelsPerMeter/o])}else u=o/e.zoomScale(y.z),d=(y.x+Math.pow(2,y.z)*l.wrap)*u,_=y.y*u;return Su(w,w,[d,_,0]),pc(w,w,[u/Rn,u/Rn,1]),w}upVector(e,o,l){return[0,0,1]}upVectorScale(e,o,l){return{metersToTile:1,metersToLabelSpace:1}}}class Rk extends bc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,o){return{x:pd(e),y:Xh(o),z:0}}unproject(e,o){const l=ks(e),u=$r(o);return new xi(l,u)}}class zk extends bc{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[o,l]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(K(o));this.n=(u+Math.sin(K(l)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,o){const{n:l,c:u,r0:d}=this,_=K(e-this.center[0]),y=K(o),w=Math.sqrt(u-2*l*Math.sin(y))/l;return{x:w*Math.sin(_*l),y:w*Math.cos(_*l)-d,z:0}}unproject(e,o){const{n:l,c:u,r0:d}=this,_=d+o;let y=Math.atan2(e,Math.abs(_))*Math.sign(_);_*l<0&&(y-=Math.PI*Math.sign(e)*Math.sign(_));const w=K(this.center[0])*l;y=pt(y,-Math.PI-w,Math.PI-w);const T=G(y/l)+this.center[0],I=Math.asin(Le((u-(e*e+_*_)*l*l)/(2*l),-1,1)),k=Le(G(I),-85.051129,Ia);return new xi(T,k)}}const zd=1.340264,Nd=-.081106,Fd=893e-6,Bd=.003796,Tm=Math.sqrt(3)/2;class Nk extends bc{project(e,o){o=o/180*Math.PI,e=e/180*Math.PI;const l=Math.asin(Tm*Math.sin(o)),u=l*l,d=u*u*u;return{x:.5*(e*Math.cos(l)/(Tm*(zd+3*Nd*u+d*(7*Fd+9*Bd*u)))/Math.PI+.5),y:1-.5*(l*(zd+Nd*u+d*(Fd+Bd*u))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let l=o=(2*(1-o)-1)*Math.PI,u=l*l,d=u*u*u;for(let I,k,O,B=0;B<12&&(k=l*(zd+Nd*u+d*(Fd+Bd*u))-o,O=zd+3*Nd*u+d*(7*Fd+9*Bd*u),I=k/O,l=Le(l-I,-Math.PI/3,Math.PI/3),u=l*l,d=u*u*u,!(Math.abs(I)<1e-12));++B);const _=Tm*e*(zd+3*Nd*u+d*(7*Fd+9*Bd*u))/Math.cos(l),y=Math.asin(Math.sin(l)/Tm),w=Le(180*_/Math.PI,-180,180),T=Le(180*y/Math.PI,-85.051129,Ia);return new xi(w,T)}}class Fk extends bc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){return{x:.5+e/360,y:.5-o/360,z:0}}unproject(e,o){const l=360*(e-.5),u=Le(360*(.5-o),-85.051129,Ia);return new xi(l,u)}}const ff=Math.PI/2;function Am(r){return Math.tan((ff+r)/2)}class Bk extends bc{constructor(e){super(e),this.center=e.center||[0,30];const[o,l]=this.parallels=e.parallels||[30,30],u=K(o),d=K(l),_=Math.cos(u);this.n=u===d?Math.sin(u):Math.log(_/Math.cos(d))/Math.log(Am(d)/Am(u)),this.f=_*Math.pow(Am(u),this.n)/this.n}project(e,o){o=K(o),e=K(e-this.center[0]);const l=1e-6,{n:u,f:d}=this;d>0?o<-ff+l&&(o=-ff+l):o>ff-l&&(o=ff-l);const _=d/Math.pow(Am(o),u),y=_*Math.sin(u*e),w=d-_*Math.cos(u*e);return{x:.5*(y/Math.PI+.5),y:1-.5*(w/Math.PI+.5),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI,o=(2*(1-o)-.5)*Math.PI;const{n:l,f:u}=this,d=u-o,_=Math.sign(d),y=Math.sign(l)*Math.sqrt(e*e+d*d);let w=Math.atan2(e,Math.abs(d))*_;d*l<0&&(w-=Math.PI*Math.sign(e)*_);const T=Le(G(w/l)+this.center[0],-180,180),I=Le(G(2*Math.atan(Math.pow(u/y,1/l))-ff),-85.051129,Ia);return new xi(T,I)}}const Fb=K(Ia);class $k extends bc{project(e,o){const l=(o=K(o))*o,u=l*l;return{x:.5*((e=K(e))*(.8707-.131979*l+u*(u*(.003971*l-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+l*(.015085+u*(.028874*l-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let l=o=(2*(1-o)-1)*Math.PI,u=25,d=0,_=l*l;do{_=l*l;const T=_*_;d=(l*(1.007226+_*(.015085+T*(.028874*_-.044475-.005916*T)))-o)/(1.007226+_*(.045255+T*(.259866*_-.311325-.005916*11*T))),l=Le(l-d,-Fb,Fb)}while(Math.abs(d)>1e-6&&--u>0);_=l*l;const y=Le(G(e/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),w=G(l);return new xi(y,w)}}const Bb=K(Ia);class Uk extends bc{project(e,o){o=K(o),e=K(e);const l=Math.cos(o),u=2/Math.PI,d=Math.acos(l*Math.cos(e/2)),_=Math.sin(d)/d,y=.5*(e*u+2*l*Math.sin(e/2)/_)||0,w=.5*(o+Math.sin(o)/_)||0;return{x:.5*(y/Math.PI+.5),y:1-.5*(w/Math.PI+1),z:0}}unproject(e,o){let l=e=(2*e-.5)*Math.PI,u=o=(2*(1-o)-1)*Math.PI,d=25;const _=1e-6;let y=0,w=0;do{const T=Math.cos(u),I=Math.sin(u),k=2*I*T,O=I*I,B=T*T,V=Math.cos(l/2),q=Math.sin(l/2),ee=2*V*q,le=q*q,be=1-B*V*V,ke=be?1/be:0,Oe=be?Math.acos(T*V)*Math.sqrt(1/be):0,ze=.5*(2*Oe*T*q+2*l/Math.PI)-e,Ne=.5*(Oe*I+u)-o,rt=.5*ke*(B*le+Oe*T*V*O)+1/Math.PI,at=ke*(ee*k/4-Oe*I*q),xt=.125*ke*(k*q-Oe*I*B*ee),bt=.5*ke*(O*V+Oe*le*T)+.5,nt=at*xt-bt*rt;y=(Ne*at-ze*bt)/nt,w=(ze*xt-Ne*rt)/nt,l=Le(l-y,-Math.PI,Math.PI),u=Le(u-w,-Bb,Bb)}while((Math.abs(y)>_||Math.abs(w)>_)&&--d>0);return new xi(G(l),G(u))}}class $b extends bc{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(K(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){const{scale:l,cosPhi:u}=this;return{x:K(e)*u*l+.5,y:-Math.sin(K(o))/u*l+.5,z:0}}unproject(e,o){const{scale:l,cosPhi:u}=this,d=-(o-.5)/l,_=Le(G((e-.5)/l)/u,-180,180),y=Math.asin(Le(d*u,-1,1)),w=Le(G(y),-85.051129,Ia);return new xi(_,w)}}s.ARRAY_TYPE=Uo,s.AUTH_ERR_MSG=jt,s.Aabb=ls,s.Actor=class{constructor(r,e,o){this.target=r,this.parent=e,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Qe(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=wt()?r:Y,this.scheduler=new bk}send(r,e,o,l,u=!1,d){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=d,this.callbacks[_]=o);const y=ot(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!o,targetMapId:l,mustQueue:u,sourceMapId:this.mapId,data:Yr(e,y)},y),{cancel:()=>{o&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(r){const e=r.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l.cancel()}else if(e.mustQueue||wt()){const l=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,e),l&&l.metadata||{type:"message"})}else this.processTask(o,e)}processTask(r,e){if(e.type==="<response>"){const o=this.callbacks[r];delete this.callbacks[r],o&&(e.error?o(Nr(e.error)):o(null,Nr(e.data)))}else{const o=ot(this.globalScope)?void 0:[],l=e.hasCallback?(d,_)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:d?Yr(d):null,data:Yr(_,o)},o)}:d=>{},u=Nr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,l);else if(this.parent.getWorkerSource){const d=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,d[0],u.source)[d[1]](u,l)}else l(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=xm,s.Color=Nn,s.ColorMode=Oa,s.CullFaceMode=Qs,s.DEMData=wm,s.DataConstantProperty=E,s.DedupedRequest=zb,s.DepthMode=hf,s.EXTENT=Rn,s.Elevation=class{isDataAvailableAtPoint(r){const e=this._source();if(!e||r.y<0||r.y>1)return!1;const o=e.getSource().maxzoom,l=1<<o,u=Math.floor(r.x),d=Math.floor((r.x-u)*l),_=Math.floor(r.y*l),y=this.findDEMTileFor(new lo(o,u,o,d,_));return!(!y||!y.dem)}getAtPointOrZero(r,e=0){return this.getAtPoint(r,e)||0}getAtPoint(r,e,o=!0){e==null&&(e=null);const l=this._source();if(!l||r.y<0||r.y>1)return e;const u=l.getSource().maxzoom,d=1<<u,_=Math.floor(r.x),y=r.x-_,w=new lo(u,_,u,Math.floor(y*d),Math.floor(r.y*d)),T=this.findDEMTileFor(w);if(!T||!T.dem)return e;const I=T.dem,k=1<<T.tileID.canonical.z,O=(y*k-T.tileID.canonical.x)*I.dim,B=(r.y*k-T.tileID.canonical.y)*I.dim,V=Math.floor(O),q=Math.floor(B);return(o?this.exaggeration():1)*mn(mn(I.get(V,q),I.get(V,q+1),B-q),mn(I.get(V+1,q),I.get(V+1,q+1),B-q),O-V)}getAtTileOffset(r,e,o){const l=1<<r.canonical.z;return this.getAtPointOrZero(new Qp(r.wrap+(r.canonical.x+e/Rn)/l,(r.canonical.y+o/Rn)/l))}getAtTileOffsetFunc(r,e,o,l){return u=>{const d=this.getAtTileOffset(r,u.x,u.y),_=l.upVector(r.canonical,u.x,u.y);return _d(_,_,d*l.upVectorScale(r.canonical,e,o).metersToTile),_}}getForTilePoints(r,e,o,l){const u=Em.create(this,r,l);return!!u&&(e.forEach(d=>{d[2]=this.exaggeration()*u.getElevationAt(d[0],d[1],o)}),!0)}getMinMaxForTile(r){const e=this.findDEMTileFor(r);if(!e||!e.dem)return null;const o=e.dem.tree,l=e.tileID,u=1<<r.canonical.z-l.canonical.z;let d=r.canonical.x/u-l.canonical.x,_=r.canonical.y/u-l.canonical.y,y=0;for(let w=0;w<r.canonical.z-l.canonical.z&&!o.leaves[y];w++){d*=2,_*=2;const T=2*Math.floor(_)+Math.floor(d);y=o.childOffsets[y]+T,d%=1,_%=1}return{min:this.exaggeration()*o.minimums[y],max:this.exaggeration()*o.maximums[y]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,e,o){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=an,s.EvaluationParameters=Ii,s.Event=Yt,s.Evented=gn,s.FillExtrusionBucket=Sd,s.Frustum=zg,s.GLOBE_RADIUS=uf,s.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r),this._createAtmosphere(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();this._gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this._wireframeIndexBuffer&&(this._wireframeIndexBuffer.destroy(),this._wireframeSegments.destroy())}_createGrid(r){const e=new he,o=new Qt,l=65;for(let u=0;u<l;u++)for(let d=0;d<l;d++)e.emplaceBack(d,u);for(let u=0;u<64;u++)for(let d=0;d<64;d++){const _=u*l+d;o.emplaceBack(_+1,_,_+l),o.emplaceBack(_+l,_+l+1,_+1)}this._gridBuffer=r.createVertexBuffer(e,Od.members),this._gridIndexBuffer=r.createIndexBuffer(o,!0),this._gridSegments=Yi.simpleSegment(0,0,4225,8192)}_createPoles(r){const e=new Qt;for(let u=0;u<=64;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=r.createIndexBuffer(e,!0);const o=new xn,l=new xn;this._poleSegments=[];for(let u=0,d=0;u<5;u++){const _=1<<u,y=512*_/Math.PI/2,w=360/_;o.emplaceBack(0,-y,0,0,0,.5,0),l.emplaceBack(0,-y,0,0,0,.5,1);for(let T=0;T<=64;T++){const I=T/64,k=mn(0,w,I),[O,B,V]=ub(Ck,Ik,k,y);o.emplaceBack(O,B,V,0,0,I,0),l.emplaceBack(O,B,V,0,0,I,1)}this._poleSegments.push(Yi.simpleSegment(d,0,66,64)),d+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(o,lb,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(l,lb,!1)}_createAtmosphere(r){const e=new Bn;e.emplaceBack(-1,1,1,0,0),e.emplaceBack(1,1,1,1,0),e.emplaceBack(1,-1,1,1,1),e.emplaceBack(-1,-1,1,0,1);const o=new Qt;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.atmosphereVertexBuffer=r.createVertexBuffer(e,Ek.members),this.atmosphereIndexBuffer=r.createIndexBuffer(o),this.atmosphereSegments=Yi.simpleSegment(0,0,4,2)}getGridBuffers(){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r){if(!this._wireframeSegments){const e=new wn,o=64,l=o+1;for(let u=0;u<o;u++)for(let d=0;d<o;d++){const _=u*l+d;e.emplaceBack(_,_+1),e.emplaceBack(_,_+l),e.emplaceBack(_,_+l+1)}this._wireframeIndexBuffer=r.createIndexBuffer(e),this._wireframeSegments=Yi.simpleSegment(0,0,o*o,e.length)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments]}},s.GlyphManager=lf,s.ImagePosition=Zg,s.LineAtlas=ay,s.LngLat=xi,s.LngLatBounds=dc,s.LocalGlyphMode=Jg,s.MAX_MERCATOR_LATITUDE=Ia,s.MercatorCoordinate=Qp,s.ONE_EM=Ur,s.OverscaledTileID=lo,s.Properties=U,s.RGBAImage=Vo,s.Ray=class{constructor(r,e){this.pos=r,this.dir=e}intersectsPlane(r,e,o){const l=yd(e,this.dir);if(Math.abs(l)<1e-6)return!1;const u=((r[0]-this.pos[0])*e[0]+(r[1]-this.pos[1])*e[1]+(r[2]-this.pos[2])*e[2])/l;return o[0]=this.pos[0]+this.dir[0]*u,o[1]=this.pos[1]+this.dir[1]*u,o[2]=this.pos[2]+this.dir[2]*u,!0}closestPointOnSphere(r,e,o){if(function(O,B){var V=O[0],q=O[1],ee=O[2],le=B[0],be=B[1],ke=B[2];return Math.abs(V-le)<=Ig*Math.max(1,Math.abs(V),Math.abs(le))&&Math.abs(q-be)<=Ig*Math.max(1,Math.abs(q),Math.abs(be))&&Math.abs(ee-ke)<=Ig*Math.max(1,Math.abs(ee),Math.abs(ke))}(this.pos,r)||e===0)return o[0]=o[1]=o[2]=0,!1;const[l,u,d]=this.dir,_=this.pos[0]-r[0],y=this.pos[1]-r[1],w=this.pos[2]-r[2],T=l*l+u*u+d*d,I=2*(_*l+y*u+w*d),k=I*I-4*T*(_*_+y*y+w*w-e*e);if(k<0){const O=Math.max(-I/2,0),B=_+l*O,V=y+u*O,q=w+d*O,ee=Math.hypot(B,V,q);return o[0]=B*e/ee,o[1]=V*e/ee,o[2]=q*e/ee,!1}{const O=(-I-Math.sqrt(k))/(2*T);if(O<0){const B=Math.hypot(_,y,w);return o[0]=_*e/B,o[1]=y*e/B,o[2]=w*e/B,!1}return o[0]=_+l*O,o[1]=y+u*O,o[2]=w+d*O,!0}}},s.RequestManager=class{constructor(r,e,o){this._transformRequestFn=r,this._customAccessToken=e,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const r=function(){let e="";for(let o=0;o<10;o++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",et,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,e){return this._transformRequestFn&&this._transformRequestFn(r,e)||{url:r}}normalizeStyleURL(r,e){if(!Zt(r))return r;const o=An(r);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeGlyphsURL(r,e){if(!Zt(r))return r;const o=An(r);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeSourceURL(r,e){if(!Zt(r))return r;const o=An(r);return o.path=`/v4/${o.authority}.json`,o.params.push("secure"),this._makeAPIURL(o,this._customAccessToken||e)}normalizeSpriteURL(r,e,o,l){const u=An(r);return Zt(r)?(u.path=`/styles/v1${u.path}/sprite${e}${o}`,this._makeAPIURL(u,this._customAccessToken||l)):(u.path+=`${e}${o}`,Sn(u))}normalizeTileURL(r,e,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Zt(r))return r;const l=An(r);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||o&&l.authority!=="raster"&&o===512?"@2x":""}${mt.supported?".webp":"$1"}`),l.authority==="raster"?l.path=`/${Je.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${Je.TILE_URL_VERSION}${l.path}`);const u=this._customAccessToken||function(d){for(const _ of d){const y=_.match(/^access_token=(.*)$/);if(y)return y[1]}return null}(l.params)||Je.ACCESS_TOKEN;return Je.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,u)}canonicalizeTileURL(r,e){const o=An(r);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return r;let l="mapbox://";o.path.match(/^\/raster\/v1\//)?l+=`raster/${o.path.replace(`/${Je.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${o.path.replace(`/${Je.TILE_URL_VERSION}/`,"")}`;let u=o.params;return e&&(u=u.filter(d=>!d.match(/^access_token=/))),u.length&&(l+=`?${u.join("&")}`),l}canonicalizeTileset(r,e){const o=!!e&&Zt(e),l=[];for(const u of r.tiles||[])bn(u)?l.push(this.canonicalizeTileURL(u,o)):l.push(u);return l}_makeAPIURL(r,e){const o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=An(Je.API_URL);if(r.protocol=l.protocol,r.authority=l.authority,r.protocol==="http"){const u=r.params.indexOf("secure");u>=0&&r.params.splice(u,1)}if(l.path!=="/"&&(r.path=`${l.path}${r.path}`),!Je.REQUIRE_ACCESS_TOKEN)return Sn(r);if(e=e||Je.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return r.params=r.params.filter(u=>u.indexOf("access_token")===-1),r.params.push(`access_token=${e||""}`),Sn(r)}},s.ResourceType=se,s.SegmentVector=Yi,s.SourceCache=ku,s.StencilMode=dy,s.StructArrayLayout1ui2=ii,s.StructArrayLayout2f1f2i16=rn,s.StructArrayLayout2i4=he,s.StructArrayLayout2ui4=wn,s.StructArrayLayout3f12=Ot,s.StructArrayLayout3ui6=Qt,s.StructArrayLayout4i8=ye,s.Texture=Pd,s.Tile=hy,s.Transitionable=f,s.Uniform1f=Kp,s.Uniform1i=class extends hl{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends hl{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},s.Uniform3f=class extends hl{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},s.Uniform4f=Hx,s.UniformColor=Gx,s.UniformMatrix2f=class extends hl{constructor(r,e){super(r,e),this.current=EI}set(r){for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},s.UniformMatrix3f=class extends hl{constructor(r,e){super(r,e),this.current=wI}set(r){for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},s.UniformMatrix4f=class extends hl{constructor(r,e){super(r,e),this.current=bI}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},s.UnwrappedTileID=gb,s.ValidationError=Wt,s.VectorTileWorkerSource=class extends gn{constructor(r,e,o,l,u){super(),this.actor=r,this.layerIndex=e,this.availableImages=o,this.loadVectorData=u||Nb,this.loading={},this.loaded={},this.deduped=new zb(r.scheduler),this.isSpriteLoaded=l,this.scheduler=r.scheduler}loadTile(r,e){const o=r.uid,l=r&&r.request,u=l&&l.collectResourceTiming,d=this.loading[o]=new Ok(r);d.abort=this.loadVectorData(r,(_,y)=>{const w=!this.loading[o];if(delete this.loading[o],w||_||!y)return d.status="done",w||(this.loaded[o]=d),e(_);const T=y.rawData,I={};y.expires&&(I.expires=y.expires),y.cacheControl&&(I.cacheControl=y.cacheControl),d.vectorTile=y.vectorTile||new Iu.VectorTile(new Md(T));const k=()=>{d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,(O,B)=>{if(O||!B)return e(O);const V={};if(u){const q=ab(l);q.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(q)))}e(null,Ye({rawTileData:T.slice(0)},B,I,V))})};this.isSpriteLoaded?k():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(k,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):k()}),this.loaded=this.loaded||{},this.loaded[o]=d})}reloadTile(r,e){const o=this.loaded,l=r.uid,u=this;if(o&&o[l]){const d=o[l];d.showCollisionBoxes=r.showCollisionBoxes,d.enableTerrain=!!r.enableTerrain,d.projection=r.projection,d.tileTransform=Mu(r.tileID.canonical,r.projection);const _=(y,w)=>{const T=d.reloadCallback;T&&(delete d.reloadCallback,d.parse(d.vectorTile,u.layerIndex,this.availableImages,u.actor,T)),e(y,w)};d.status==="parsing"?d.reloadCallback=_:d.status==="done"&&(d.vectorTile?d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(r,e){const o=r.uid,l=this.loading[o];l&&(l.abort&&l.abort(),delete this.loading[o]),e()}removeTile(r,e){const o=this.loaded,l=r.uid;o&&o[l]&&delete o[l],e()}},s.WritingMode=cs,s.ZoomHistory=hr,s.add=s1,s.addDynamicAttributes=ny,s.adjoint=function(r,e){var o=e[0],l=e[1],u=e[2],d=e[3],_=e[4],y=e[5],w=e[6],T=e[7],I=e[8];return r[0]=_*I-y*T,r[1]=u*T-l*I,r[2]=l*y-u*_,r[3]=y*w-d*I,r[4]=o*I-u*w,r[5]=u*d-o*y,r[6]=d*T-_*w,r[7]=l*w-o*T,r[8]=o*_-l*d,r},s.asyncAll=Xe,s.bezier=Ce,s.bindAll=Qe,s.boundsAttributes=bb,s.bufferConvexPolygon=function(r,e){const o=[];for(let l=0;l<r.length;l++){const u=pt(l-1,-1,r.length-1),d=pt(l+1,-1,r.length-1),_=r[l],y=r[d],w=r[u].sub(_).unit(),T=y.sub(_).unit(),I=T.angleWithSep(w.x,w.y),k=w.add(T).unit().mult(-1*e/Math.sin(I/2));o.push(_.add(k))}return o},s.cacheEntryPossiblyAdded=function(r){Wr++,Wr>Or&&(r.getActor().send("enforceCacheSizeLimit",Gr),Wr=0)},s.calculateGlobeLabelMatrix=function(r,e){const{lng:o,lat:l}=r._center,u=db(0,0,r.worldSize/r._projectionScaler,o,l);return Mg(u,u,function(d){const _=Ma(new Float64Array(16)),y=1/uy(d);return Su(_,_,d.min),pc(_,_,[y,y,y]),_}(Dd(e)))},s.calculateGlobeMatrix=pb,s.calculateGlobeMercatorMatrix=function(r){const e=r.worldSize,o=r.point,l=Yh(1,r.center.lat)*e,u=r.pixelsPerMeter,d=e/(l/r.pixelsPerMeter),_=Ma(new Float64Array(16));return Su(_,_,[o.x,o.y,0]),pc(_,_,[d,d,u]),Float32Array.from(_)},s.circumferenceAtLatitude=wg,s.clamp=Le,s.clearTileCache=function(r){const e=Y.caches.delete(yr);r&&e.catch(r).then(()=>r())},s.clipLine=J1,s.clone=function(r){var e=new Uo(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},s.clone$1=Ke,s.collisionCircleLayout=OM,s.config=Je,s.conjugate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r},s.create=function(){var r=new Uo(16);return Uo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},s.create$1=i1,s.createExpression=al,s.createLayout=de,s.createStyleLayer=function(r){return r.type==="custom"?new _k(r):new yk[r.type](r)},s.cross=c1,s.degToRad=K,s.div=function(r,e,o){return r[0]=e[0]/o[0],r[1]=e[1]/o[1],r[2]=e[2]/o[2],r},s.dot=yd,s.earthRadius=bg,s.ease=Ae,s.easeCubicInOut=_e,s.emitValidationErrors=_i,s.endsWith=ht,s.enforceCacheSizeLimit=function(r){Ji(),qi&&qi.then(e=>{e.keys().then(o=>{for(let l=0;l<o.length-r;l++)e.delete(o[l])})})},s.evaluateSizeForFeature=hm,s.evaluateSizeForZoom=rf,s.evaluateVariableOffset=ib,s.evented=ud,s.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]},s.exactEquals$1=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]},s.exported=ge,s.exported$1=mt,s.extend=Ye,s.extend$1=jn,s.filterObject=Ut,s.fromMat4=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},s.fromQuat=function(r,e){var o=e[0],l=e[1],u=e[2],d=e[3],_=o+o,y=l+l,w=u+u,T=o*_,I=l*_,k=l*y,O=u*_,B=u*y,V=u*w,q=d*_,ee=d*y,le=d*w;return r[0]=1-k-V,r[1]=I+le,r[2]=O-ee,r[3]=0,r[4]=I-le,r[5]=1-T-V,r[6]=B+q,r[7]=0,r[8]=O+ee,r[9]=B-q,r[10]=1-T-k,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.fromRotation=function(r,e){var o=Math.sin(e),l=Math.cos(e);return r[0]=l,r[1]=o,r[2]=0,r[3]=-o,r[4]=l,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},s.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.furthestTileCorner=function(r){const e=Math.round((r+45+360)%360/90)%4;return Q[e]},s.getAABBPointSquareDist=function(r,e,o){let l=0;for(let u=0;u<2;++u){const d=o?o[u]:0;r[u]>d&&(l+=(r[u]-d)*(r[u]-d)),e[u]<d&&(l+=(d-e[u])*(d-e[u]))}return l},s.getAnchorAlignment=Kg,s.getAnchorJustification=ey,s.getBounds=function(r){let e=1/0,o=1/0,l=-1/0,u=-1/0;for(const d of r)e=Math.min(e,d.x),o=Math.min(o,d.y),l=Math.max(l,d.x),u=Math.max(u,d.y);return{min:new L(e,o),max:new L(l,u)}},s.getColumn=function(r,e){return[r[4*e],r[4*e+1],r[4*e+2],r[4*e+3]]},s.getGridMatrix=function(r,e){const[o,l]=e,u=.015625;return[0,(l[1]-o[1])*u,1<<r.z,(l[0]-o[0])*u,0,r.y,o[0],o[1],u]},s.getImage=Pt,s.getJSON=function(r,e){return re(Ye(r,{type:"json"}),e)},s.getMapSessionAPI=gi,s.getPerformanceMeasurement=ab,s.getProjection=function(r){const e=r.parallels,o=!!e&&Math.abs(e[0]+e[1])<.01;switch(r.name){case"mercator":return new Rk(r);case"equirectangular":return new Fk(r);case"naturalEarth":return new $k(r);case"equalEarth":return new Nk(r);case"winkelTripel":return new Uk(r);case"albers":return o?new $b(r):new zk(r);case"lambertConformalConic":return o?new $b(r):new Bk(r)}throw new Error(`Invalid projection name: ${r.name}`)},s.getRTLTextPluginStatus=qh,s.getReferrer=j,s.getTilePoint=function(r,{x:e,y:o},l=0){return new L(((e-l)*r.scale-r.x)*Rn,(o*r.scale-r.y)*Rn)},s.getTileVec3=function(r,e,o=0){return md(((e.x-o)*r.scale-r.x)*Rn,(e.y*r.scale-r.y)*Rn,Zx(e.z,e.y))},s.getVideo=function(r,e){const o=Y.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let l=0;l<r.length;l++){const u=Y.document.createElement("source");Fe(r[l])||(o.crossOrigin="Anonymous"),u.src=r[l],o.appendChild(u)}return{cancel:()=>{}}},s.globeECEFOrigin=function(r,e){const o=[0,0,0];return Cu(o,o,fb(Dd(e.canonical))),Cu(o,o,r),o},s.globePixelsToTileUnits=function(r,e){return Rn/(512*Math.pow(2,r))*uy(Dd(e))},s.globePoleMatrixForTile=function(r,e,o){const l=Ma(new Float64Array(16)),u=1<<r,d=360*(e/u-.5),_=o.point,y=o.worldSize/(o.tileSize*u);return Su(l,l,[_.x,_.y,-o.worldSize/Math.PI/2]),pc(l,l,[y,y,y]),kg(l,l,K(-o._center.lat)),Lg(l,l,K(-o._center.lng+d)),Float32Array.from(l)},s.globeTileLatLngCorners=cy,s.globeToMercatorTransition=function(r){return $e(5,6,r)},s.identity=Ma,s.identity$1=f1,s.invert=function(r,e){var o=e[0],l=e[1],u=e[2],d=e[3],_=e[4],y=e[5],w=e[6],T=e[7],I=e[8],k=e[9],O=e[10],B=e[11],V=e[12],q=e[13],ee=e[14],le=e[15],be=o*y-l*_,ke=o*w-u*_,Oe=o*T-d*_,ze=l*w-u*y,Ne=l*T-d*y,rt=u*T-d*w,at=I*q-k*V,xt=I*ee-O*V,bt=I*le-B*V,nt=k*ee-O*q,dt=k*le-B*q,Tt=O*le-B*ee,Nt=be*Tt-ke*dt+Oe*nt+ze*bt-Ne*xt+rt*at;return Nt?(r[0]=(y*Tt-w*dt+T*nt)*(Nt=1/Nt),r[1]=(u*dt-l*Tt-d*nt)*Nt,r[2]=(q*rt-ee*Ne+le*ze)*Nt,r[3]=(O*Ne-k*rt-B*ze)*Nt,r[4]=(w*bt-_*Tt-T*xt)*Nt,r[5]=(o*Tt-u*bt+d*xt)*Nt,r[6]=(ee*Oe-V*rt-le*ke)*Nt,r[7]=(I*rt-O*Oe+B*ke)*Nt,r[8]=(_*dt-y*bt+T*at)*Nt,r[9]=(l*bt-o*dt-d*at)*Nt,r[10]=(V*Ne-q*Oe+le*be)*Nt,r[11]=(k*Oe-I*Ne-B*be)*Nt,r[12]=(y*xt-_*nt-w*at)*Nt,r[13]=(o*nt-l*xt+u*at)*Nt,r[14]=(q*ke-V*ze-ee*be)*Nt,r[15]=(I*ze-k*ke+O*be)*Nt,r):null},s.isMapAuthenticated=function(r){return Cr.has(r)},s.isMapboxURL=Zt,s.isSafariWithAntialiasingBug=function(r){const e=r.navigator?r.navigator.userAgent:null;return!!ot(r)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=$r,s.len=$I,s.length=o1,s.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},s.loadVectorTile=Nb,s.makeRequest=re,s.mercatorXfromLng=pd,s.mercatorYfromLat=Xh,s.mercatorZfromAltitude=Yh,s.mul=FI,s.mul$1=BI,s.multiply=function(r,e,o){var l=e[0],u=e[1],d=e[2],_=e[3],y=e[4],w=e[5],T=e[6],I=e[7],k=e[8],O=o[0],B=o[1],V=o[2],q=o[3],ee=o[4],le=o[5],be=o[6],ke=o[7],Oe=o[8];return r[0]=O*l+B*_+V*T,r[1]=O*u+B*y+V*I,r[2]=O*d+B*w+V*k,r[3]=q*l+ee*_+le*T,r[4]=q*u+ee*y+le*I,r[5]=q*d+ee*w+le*k,r[6]=be*l+ke*_+Oe*T,r[7]=be*u+ke*y+Oe*I,r[8]=be*d+ke*w+Oe*k,r},s.multiply$1=Mg,s.multiply$2=l1,s.nextPowerOfTwo=je,s.normalize=gd,s.normalize$1=function(r,e){var o=e[0],l=e[1],u=e[2],d=e[3],_=o*o+l*l+u*u+d*d;return _>0&&(_=1/Math.sqrt(_)),r[0]=o*_,r[1]=l*_,r[2]=u*_,r[3]=d*_,r},s.number=mn,s.ortho=function(r,e,o,l,u,d,_){var y=1/(e-o),w=1/(l-u),T=1/(d-_);return r[0]=-2*y,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*w,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(e+o)*y,r[13]=(u+l)*w,r[14]=(_+d)*T,r[15]=1,r},s.pbf=Md,s.perspective=function(r,e,o,l,u){var d,_=1/Math.tan(e/2);return r[0]=_/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,u!=null&&u!==1/0?(r[10]=(u+l)*(d=1/(l-u)),r[14]=2*u*l*d):(r[10]=-1,r[14]=-2*l),r},s.pick=function(r,e){const o={};for(let l=0;l<e.length;l++){const u=e[l];u in r&&(o[u]=r[u])}return o},s.plugin=Bo,s.pointGeometry=L,s.polygonIntersectsBox=e1,s.polygonIntersectsPolygon=Yx,s.polygonizeBounds=function(r,e,o=0,l=!0){const u=new L(o,o),d=r.sub(u),_=e.add(u),y=[d,new L(_.x,d.y),_,new L(d.x,_.y)];return l&&y.push(d),y},s.posAttributes=Od,s.postMapLoadEvent=Ui,s.postTurnstileEvent=xr,s.potpack=qg,s.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},s.radToDeg=G,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(r){return r({pluginStatus:ao,pluginURL:bo}),ud.on("pluginStateChange",r),r},s.removeAuthState=function(r){Cr.delete(r)},s.renderColorRamp=Fg,s.rotateX=kg,s.rotateX$1=d1,s.rotateY=Lg,s.rotateZ=function(r,e,o){var l=Math.sin(o),u=Math.cos(o),d=e[0],_=e[1],y=e[2],w=e[3],T=e[4],I=e[5],k=e[6],O=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=d*u+T*l,r[1]=_*u+I*l,r[2]=y*u+k*l,r[3]=w*u+O*l,r[4]=T*u-d*l,r[5]=I*u-_*l,r[6]=k*u-y*l,r[7]=O*u-w*l,r},s.rotateZ$1=function(r,e,o){o*=.5;var l=e[0],u=e[1],d=e[2],_=e[3],y=Math.sin(o),w=Math.cos(o);return r[0]=l*w+u*y,r[1]=u*w-l*y,r[2]=d*w+_*y,r[3]=_*w-d*y,r},s.scale=pc,s.scale$1=function(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r},s.scale$2=_d,s.scaleAndAdd=Rg,s.setCacheLimits=function(r,e){Gr=r,Or=e},s.setColumn=function(r,e,o){r[4*e+0]=o[0],r[4*e+1]=o[1],r[4*e+2]=o[2],r[4*e+3]=o[3]},s.setRTLTextPlugin=function(r,e,o=!1){if(ao===ad||ao===xu||ao===ld)throw new Error("setRTLTextPlugin cannot be called multiple times.");bo=ge.resolveURL(r),ao=ad,cd=e,cl(),o||lc()},s.smoothstep=$e,s.spec=He,s.storeAuthState=function(r,e){e?Cr.add(r):Cr.delete(r)},s.sub=Qh,s.subtract=a1,s.symbolSize=DM,s.tileAABB=function(r,e,o,l,u,d,_,y,w){if(w.name==="globe")return Sk(r,e,new xm(o,l,u));const T=Mu({z:o,x:l,y:u},w);return new ls([(d+T.x/T.scale)*e,e*(T.y/T.scale),_],[(d+T.x2/T.scale)*e,e*(T.y2/T.scale),y])},s.tileTransform=Mu,s.transformMat3=function(r,e,o){var l=e[0],u=e[1],d=e[2];return r[0]=l*o[0]+u*o[3]+d*o[6],r[1]=l*o[1]+u*o[4]+d*o[7],r[2]=l*o[2]+u*o[5]+d*o[8],r},s.transformMat4=Cu,s.transformMat4$1=ef,s.transformQuat=u1,s.translate=Su,s.transpose=function(r,e){if(r===e){var o=e[1],l=e[2],u=e[5];r[1]=e[3],r[2]=e[6],r[3]=o,r[5]=e[7],r[6]=l,r[7]=u}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r},s.triggerPluginCompletionEvent=bu,s.uniqueId=Pe,s.validateCustomStyleLayer=function(r){const e=[],o=r.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=r=>Qn(De(r)),s.validateFog=r=>Qn(Fn(r)),s.validateLayer=r=>Qn(pn(r)),s.validateLight=r=>Qn(On(r)),s.validateSource=r=>Qn(Pn(r)),s.validateStyle=ni,s.validateTerrain=r=>Qn(Un(r)),s.values=ve,s.vectorTile=Iu,s.version=C,s.warnOnce=Ht,s.window=Y,s.wrap=pt}),g(["./shared"],function(s){function C(se){if(typeof se=="number"||typeof se=="boolean"||typeof se=="string"||se==null)return JSON.stringify(se);if(Array.isArray(se)){let j="[";for(const re of se)j+=`${C(re)},`;return`${j}]`}let $="{";for(const j of Object.keys(se).sort())$+=`${j}:${C(se[j])},`;return`${$}}`}function D(se){let $="";for(const j of s.refProperties)$+=`/${C(se[j])}`;return $}class M{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,j){for(const pe of $)this._layerConfigs[pe.id]=pe,(this._layers[pe.id]=s.createStyleLayer(pe)).compileFilter(),this.keyCache[pe.id]&&delete this.keyCache[pe.id];for(const pe of j)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const re=function(pe,Se){const Ve={};for(let Ie=0;Ie<pe.length;Ie++){const Ge=Se&&Se[pe[Ie].id]||D(pe[Ie]);Se&&(Se[pe[Ie].id]=Ge);let gt=Ve[Ge];gt||(gt=Ve[Ge]=[]),gt.push(pe[Ie])}const Fe=[];for(const Ie in Ve)Fe.push(Ve[Ie]);return Fe}(s.values(this._layerConfigs),this.keyCache);for(const pe of re){const Se=pe.map(Pt=>this._layers[Pt.id]),Ve=Se[0];if(Ve.visibility==="none")continue;const Fe=Ve.source||"";let Ie=this.familiesBySource[Fe];Ie||(Ie=this.familiesBySource[Fe]={});const Ge=Ve.sourceLayer||"_geojsonTileLayer";let gt=Ie[Ge];gt||(gt=Ie[Ge]=[]),gt.push(Se)}}}class L{loadTile($,j){const{uid:re,encoding:pe,rawImageData:Se,padding:Ve,buildQuadTree:Fe}=$,Ie=s.window.ImageBitmap&&Se instanceof s.window.ImageBitmap?this.getImageData(Se,Ve):Se;j(null,new s.DEMData(re,Ie,pe,Ve<1,Fe))}getImageData($,j){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas($.width,$.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=$.width,this.offscreenCanvas.height=$.height,this.offscreenCanvasContext.drawImage($,0,0,$.width,$.height);const re=this.offscreenCanvasContext.getImageData(-j,-j,$.width+2*j,$.height+2*j);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),re}}var F=function se($,j){var re,pe=$&&$.type;if(pe==="FeatureCollection")for(re=0;re<$.features.length;re++)se($.features[re],j);else if(pe==="GeometryCollection")for(re=0;re<$.geometries.length;re++)se($.geometries[re],j);else if(pe==="Feature")se($.geometry,j);else if(pe==="Polygon")Y($.coordinates,j);else if(pe==="MultiPolygon")for(re=0;re<$.coordinates.length;re++)Y($.coordinates[re],j);return $};function Y(se,$){if(se.length!==0){Te(se[0],$);for(var j=1;j<se.length;j++)Te(se[j],!$)}}function Te(se,$){for(var j=0,re=0,pe=0,Se=se.length,Ve=Se-1;pe<Se;Ve=pe++){var Fe=(se[pe][0]-se[Ve][0])*(se[Ve][1]+se[pe][1]),Ie=j+Fe;re+=Math.abs(j)>=Math.abs(Fe)?j-Ie+Fe:Fe-Ie+j,j=Ie}j+re>=0!=!!$&&se.reverse()}const ue=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class K{constructor($){this._feature=$,this.extent=s.EXTENT,this.type=$.type,this.properties=$.tags,"id"in $&&!isNaN($.id)&&(this.id=parseInt($.id,10))}loadGeometry(){if(this._feature.type===1){const $=[];for(const j of this._feature.geometry)$.push([new s.pointGeometry(j[0],j[1])]);return $}{const $=[];for(const j of this._feature.geometry){const re=[];for(const pe of j)re.push(new s.pointGeometry(pe[0],pe[1]));$.push(re)}return $}}toGeoJSON($,j,re){return ue.call(this,$,j,re)}}class G{constructor($){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=$.length,this._features=$}feature($){return new K(this._features[$])}}var Q=s.vectorTile.VectorTileFeature,_e=Ce;function Ce(se,$){this.options=$||{},this.features=se,this.length=se.length}function Ae(se,$){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=$||4096}Ce.prototype.feature=function(se){return new Ae(this.features[se],this.options.extent)},Ae.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var $=0;$<se.length;$++){for(var j=se[$],re=[],pe=0;pe<j.length;pe++)re.push(new s.pointGeometry(j[pe][0],j[pe][1]));this.geometry.push(re)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,$=1/0,j=-1/0,re=1/0,pe=-1/0,Se=0;Se<se.length;Se++)for(var Ve=se[Se],Fe=0;Fe<Ve.length;Fe++){var Ie=Ve[Fe];$=Math.min($,Ie.x),j=Math.max(j,Ie.x),re=Math.min(re,Ie.y),pe=Math.max(pe,Ie.y)}return[$,re,j,pe]},Ae.prototype.toGeoJSON=Q.prototype.toGeoJSON;var Le=pt,$e=_e;function pt(se){var $=new s.pbf;return function(j,re){for(var pe in j.layers)re.writeMessage(3,Xe,j.layers[pe])}(se,$),$.finish()}function Xe(se,$){var j;$.writeVarintField(15,se.version||1),$.writeStringField(1,se.name||""),$.writeVarintField(5,se.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<se.length;j++)re.feature=se.feature(j),$.writeMessage(2,ve,re);var pe=re.keys;for(j=0;j<pe.length;j++)$.writeStringField(3,pe[j]);var Se=re.values;for(j=0;j<Se.length;j++)$.writeMessage(4,je,Se[j])}function ve(se,$){var j=se.feature;j.id!==void 0&&$.writeVarintField(1,j.id),$.writeMessage(2,Ye,se),$.writeVarintField(3,j.type),$.writeMessage(4,xe,j)}function Ye(se,$){var j=se.feature,re=se.keys,pe=se.values,Se=se.keycache,Ve=se.valuecache;for(var Fe in j.properties){var Ie=j.properties[Fe],Ge=Se[Fe];if(Ie!==null){Ge===void 0&&(re.push(Fe),Se[Fe]=Ge=re.length-1),$.writeVarint(Ge);var gt=typeof Ie;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&(Ie=JSON.stringify(Ie));var Pt=gt+":"+Ie,yt=Ve[Pt];yt===void 0&&(pe.push(Ie),Ve[Pt]=yt=pe.length-1),$.writeVarint(yt)}}}function Be(se,$){return($<<3)+(7&se)}function Pe(se){return se<<1^se>>31}function xe(se,$){for(var j=se.loadGeometry(),re=se.type,pe=0,Se=0,Ve=j.length,Fe=0;Fe<Ve;Fe++){var Ie=j[Fe],Ge=1;re===1&&(Ge=Ie.length),$.writeVarint(Be(1,Ge));for(var gt=re===3?Ie.length-1:Ie.length,Pt=0;Pt<gt;Pt++){Pt===1&&re!==1&&$.writeVarint(Be(2,gt-1));var yt=Ie[Pt].x-pe,un=Ie[Pt].y-Se;$.writeVarint(Pe(yt)),$.writeVarint(Pe(un)),pe+=yt,Se+=un}re===3&&$.writeVarint(Be(7,1))}}function je(se,$){var j=typeof se;j==="string"?$.writeStringField(1,se):j==="boolean"?$.writeBooleanField(7,se):j==="number"&&(se%1!=0?$.writeDoubleField(3,se):se<0?$.writeSVarintField(6,se):$.writeVarintField(5,se))}function lt(se,$,j,re,pe,Se){if(pe-re<=j)return;const Ve=re+pe>>1;Qe(se,$,Ve,re,pe,Se%2),lt(se,$,j,re,Ve-1,Se+1),lt(se,$,j,Ve+1,pe,Se+1)}function Qe(se,$,j,re,pe,Se){for(;pe>re;){if(pe-re>600){const Ge=pe-re+1,gt=j-re+1,Pt=Math.log(Ge),yt=.5*Math.exp(2*Pt/3),un=.5*Math.sqrt(Pt*yt*(Ge-yt)/Ge)*(gt-Ge/2<0?-1:1);Qe(se,$,j,Math.max(re,Math.floor(j-gt*yt/Ge+un)),Math.min(pe,Math.floor(j+(Ge-gt)*yt/Ge+un)),Se)}const Ve=$[2*j+Se];let Fe=re,Ie=pe;for(ht(se,$,re,j),$[2*pe+Se]>Ve&&ht(se,$,re,pe);Fe<Ie;){for(ht(se,$,Fe,Ie),Fe++,Ie--;$[2*Fe+Se]<Ve;)Fe++;for(;$[2*Ie+Se]>Ve;)Ie--}$[2*re+Se]===Ve?ht(se,$,re,Ie):(Ie++,ht(se,$,Ie,pe)),Ie<=j&&(re=Ie+1),j<=Ie&&(pe=Ie-1)}}function ht(se,$,j,re){ct(se,j,re),ct($,2*j,2*re),ct($,2*j+1,2*re+1)}function ct(se,$,j){const re=se[$];se[$]=se[j],se[j]=re}function Ut(se,$,j,re){const pe=se-j,Se=$-re;return pe*pe+Se*Se}Le.fromVectorTileJs=pt,Le.fromGeojsonVt=function(se,$){$=$||{};var j={};for(var re in se)j[re]=new _e(se[re].features,$),j[re].name=re,j[re].version=$.version,j[re].extent=$.extent;return pt({layers:j})},Le.GeoJSONWrapper=$e;const Ke=se=>se[0],hn=se=>se[1];class Ht{constructor($,j=Ke,re=hn,pe=64,Se=Float64Array){this.nodeSize=pe,this.points=$;const Ve=$.length<65536?Uint16Array:Uint32Array,Fe=this.ids=new Ve($.length),Ie=this.coords=new Se(2*$.length);for(let Ge=0;Ge<$.length;Ge++)Fe[Ge]=Ge,Ie[2*Ge]=j($[Ge]),Ie[2*Ge+1]=re($[Ge]);lt(Fe,Ie,pe,0,Fe.length-1,0)}range($,j,re,pe){return function(Se,Ve,Fe,Ie,Ge,gt,Pt){const yt=[0,Se.length-1,0],un=[];let Yt,an;for(;yt.length;){const gn=yt.pop(),He=yt.pop(),jn=yt.pop();if(He-jn<=Pt){for(let zn=jn;zn<=He;zn++)Yt=Ve[2*zn],an=Ve[2*zn+1],Yt>=Fe&&Yt<=Ge&&an>=Ie&&an<=gt&&un.push(Se[zn]);continue}const Jt=Math.floor((jn+He)/2);Yt=Ve[2*Jt],an=Ve[2*Jt+1],Yt>=Fe&&Yt<=Ge&&an>=Ie&&an<=gt&&un.push(Se[Jt]);const Yn=(gn+1)%2;(gn===0?Fe<=Yt:Ie<=an)&&(yt.push(jn),yt.push(Jt-1),yt.push(Yn)),(gn===0?Ge>=Yt:gt>=an)&&(yt.push(Jt+1),yt.push(He),yt.push(Yn))}return un}(this.ids,this.coords,$,j,re,pe,this.nodeSize)}within($,j,re){return function(pe,Se,Ve,Fe,Ie,Ge){const gt=[0,pe.length-1,0],Pt=[],yt=Ie*Ie;for(;gt.length;){const un=gt.pop(),Yt=gt.pop(),an=gt.pop();if(Yt-an<=Ge){for(let Yn=an;Yn<=Yt;Yn++)Ut(Se[2*Yn],Se[2*Yn+1],Ve,Fe)<=yt&&Pt.push(pe[Yn]);continue}const gn=Math.floor((an+Yt)/2),He=Se[2*gn],jn=Se[2*gn+1];Ut(He,jn,Ve,Fe)<=yt&&Pt.push(pe[gn]);const Jt=(un+1)%2;(un===0?Ve-Ie<=He:Fe-Ie<=jn)&&(gt.push(an),gt.push(gn-1),gt.push(Jt)),(un===0?Ve+Ie>=He:Fe+Ie>=jn)&&(gt.push(gn+1),gt.push(Yt),gt.push(Jt))}return Pt}(this.ids,this.coords,$,j,re,this.nodeSize)}}const dn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},Ue=Math.fround||(wt=new Float32Array(1),se=>(wt[0]=+se,wt[0]));var wt;class kt{constructor($){this.options=ge(Object.create(dn),$),this.trees=new Array(this.options.maxZoom+1)}load($){const{log:j,minZoom:re,maxZoom:pe,nodeSize:Se}=this.options;j&&console.time("total time");const Ve=`prepare ${$.length} points`;j&&console.time(Ve),this.points=$;let Fe=[];for(let Ie=0;Ie<$.length;Ie++)$[Ie].geometry&&Fe.push(sn($[Ie],Ie));this.trees[pe+1]=new Ht(Fe,Ze,Je,Se,Float32Array),j&&console.timeEnd(Ve);for(let Ie=pe;Ie>=re;Ie--){const Ge=+Date.now();Fe=this._cluster(Fe,Ie),this.trees[Ie]=new Ht(Fe,Ze,Je,Se,Float32Array),j&&console.log("z%d: %d clusters in %dms",Ie,Fe.length,+Date.now()-Ge)}return j&&console.timeEnd("total time"),this}getClusters($,j){let re=(($[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,$[1]));let Se=$[2]===180?180:(($[2]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)re=-180,Se=180;else if(re>Se){const gt=this.getClusters([re,pe,180,Ve],j),Pt=this.getClusters([-180,pe,Se,Ve],j);return gt.concat(Pt)}const Fe=this.trees[this._limitZoom(j)],Ie=Fe.range(oe(re),ot(Ve),oe(Se),ot(pe)),Ge=[];for(const gt of Ie){const Pt=Fe.points[gt];Ge.push(Pt.numPoints?En(Pt):this.points[Pt.index])}return Ge}getChildren($){const j=this._getOriginId($),re=this._getOriginZoom($),pe="No cluster with the specified id.",Se=this.trees[re];if(!Se)throw new Error(pe);const Ve=Se.points[j];if(!Ve)throw new Error(pe);const Fe=this.options.radius/(this.options.extent*Math.pow(2,re-1)),Ie=Se.within(Ve.x,Ve.y,Fe),Ge=[];for(const gt of Ie){const Pt=Se.points[gt];Pt.parentId===$&&Ge.push(Pt.numPoints?En(Pt):this.points[Pt.index])}if(Ge.length===0)throw new Error(pe);return Ge}getLeaves($,j,re){const pe=[];return this._appendLeaves(pe,$,j=j||10,re=re||0,0),pe}getTile($,j,re){const pe=this.trees[this._limitZoom($)],Se=Math.pow(2,$),{extent:Ve,radius:Fe}=this.options,Ie=Fe/Ve,Ge=(re-Ie)/Se,gt=(re+1+Ie)/Se,Pt={features:[]};return this._addTileFeatures(pe.range((j-Ie)/Se,Ge,(j+1+Ie)/Se,gt),pe.points,j,re,Se,Pt),j===0&&this._addTileFeatures(pe.range(1-Ie/Se,Ge,1,gt),pe.points,Se,re,Se,Pt),j===Se-1&&this._addTileFeatures(pe.range(0,Ge,Ie/Se,gt),pe.points,-1,re,Se,Pt),Pt.features.length?Pt:null}getClusterExpansionZoom($){let j=this._getOriginZoom($)-1;for(;j<=this.options.maxZoom;){const re=this.getChildren($);if(j++,re.length!==1)break;$=re[0].properties.cluster_id}return j}_appendLeaves($,j,re,pe,Se){const Ve=this.getChildren(j);for(const Fe of Ve){const Ie=Fe.properties;if(Ie&&Ie.cluster?Se+Ie.point_count<=pe?Se+=Ie.point_count:Se=this._appendLeaves($,Ie.cluster_id,re,pe,Se):Se<pe?Se++:$.push(Fe),$.length===re)break}return Se}_addTileFeatures($,j,re,pe,Se,Ve){for(const Fe of $){const Ie=j[Fe],Ge=Ie.numPoints;let gt,Pt,yt;if(Ge)gt=me(Ie),Pt=Ie.x,yt=Ie.y;else{const an=this.points[Ie.index];gt=an.properties,Pt=oe(an.geometry.coordinates[0]),yt=ot(an.geometry.coordinates[1])}const un={type:1,geometry:[[Math.round(this.options.extent*(Pt*Se-re)),Math.round(this.options.extent*(yt*Se-pe))]],tags:gt};let Yt;Ge?Yt=Ie.id:this.options.generateId?Yt=Ie.index:this.points[Ie.index].id&&(Yt=this.points[Ie.index].id),Yt!==void 0&&(un.id=Yt),Ve.features.push(un)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(+$,this.options.maxZoom+1))}_cluster($,j){const re=[],{radius:pe,extent:Se,reduce:Ve,minPoints:Fe}=this.options,Ie=pe/(Se*Math.pow(2,j));for(let Ge=0;Ge<$.length;Ge++){const gt=$[Ge];if(gt.zoom<=j)continue;gt.zoom=j;const Pt=this.trees[j+1],yt=Pt.within(gt.x,gt.y,Ie),un=gt.numPoints||1;let Yt=un;for(const an of yt){const gn=Pt.points[an];gn.zoom>j&&(Yt+=gn.numPoints||1)}if(Yt>un&&Yt>=Fe){let an=gt.x*un,gn=gt.y*un,He=Ve&&un>1?this._map(gt,!0):null;const jn=(Ge<<5)+(j+1)+this.points.length;for(const Jt of yt){const Yn=Pt.points[Jt];if(Yn.zoom<=j)continue;Yn.zoom=j;const zn=Yn.numPoints||1;an+=Yn.x*zn,gn+=Yn.y*zn,Yn.parentId=jn,Ve&&(He||(He=this._map(gt,!0)),Ve(He,this._map(Yn)))}gt.parentId=jn,re.push(Et(an/Yt,gn/Yt,jn,Yt,He))}else if(re.push(gt),Yt>1)for(const an of yt){const gn=Pt.points[an];gn.zoom<=j||(gn.zoom=j,re.push(gn))}}return re}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,j){if($.numPoints)return j?ge({},$.properties):$.properties;const re=this.points[$.index].properties,pe=this.options.map(re);return j&&pe===re?ge({},pe):pe}}function Et(se,$,j,re,pe){return{x:Ue(se),y:Ue($),zoom:1/0,id:j,parentId:-1,numPoints:re,properties:pe}}function sn(se,$){const[j,re]=se.geometry.coordinates;return{x:Ue(oe(j)),y:Ue(ot(re)),zoom:1/0,index:$,parentId:-1}}function En(se){return{type:"Feature",id:se.id,properties:me(se),geometry:{type:"Point",coordinates:[($=se.x,360*($-.5)),te(se.y)]}};var $}function me(se){const $=se.numPoints,j=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$;return ge(ge({},se.properties),{cluster:!0,cluster_id:se.id,point_count:$,point_count_abbreviated:j})}function oe(se){return se/360+.5}function ot(se){const $=Math.sin(se*Math.PI/180),j=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return j<0?0:j>1?1:j}function te(se){const $=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function ge(se,$){for(const j in $)se[j]=$[j];return se}function Ze(se){return se.x}function Je(se){return se.y}function mt(se,$,j,re){for(var pe,Se=re,Ve=j-$>>1,Fe=j-$,Ie=se[$],Ge=se[$+1],gt=se[j],Pt=se[j+1],yt=$+3;yt<j;yt+=3){var un=St(se[yt],se[yt+1],Ie,Ge,gt,Pt);if(un>Se)pe=yt,Se=un;else if(un===Se){var Yt=Math.abs(yt-Ve);Yt<Fe&&(pe=yt,Fe=Yt)}}Se>re&&(pe-$>3&&mt(se,$,pe,re),se[pe+2]=Se,j-pe>3&&mt(se,pe,j,re))}function St(se,$,j,re,pe,Se){var Ve=pe-j,Fe=Se-re;if(Ve!==0||Fe!==0){var Ie=((se-j)*Ve+($-re)*Fe)/(Ve*Ve+Fe*Fe);Ie>1?(j=pe,re=Se):Ie>0&&(j+=Ve*Ie,re+=Fe*Ie)}return(Ve=se-j)*Ve+(Fe=$-re)*Fe}function Vt(se,$,j,re){var pe={id:se===void 0?null:se,type:$,geometry:j,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var Ve=Se.geometry,Fe=Se.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Ct(Se,Ve);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var Ie=0;Ie<Ve.length;Ie++)Ct(Se,Ve[Ie]);else if(Fe==="MultiPolygon")for(Ie=0;Ie<Ve.length;Ie++)for(var Ge=0;Ge<Ve[Ie].length;Ge++)Ct(Se,Ve[Ie][Ge])}(pe),pe}function Ct(se,$){for(var j=0;j<$.length;j+=3)se.minX=Math.min(se.minX,$[j]),se.minY=Math.min(se.minY,$[j+1]),se.maxX=Math.max(se.maxX,$[j]),se.maxY=Math.max(se.maxY,$[j+1])}function vt(se,$,j,re){if($.geometry){var pe=$.geometry.coordinates,Se=$.geometry.type,Ve=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),Fe=[],Ie=$.id;if(j.promoteId?Ie=$.properties[j.promoteId]:j.generateId&&(Ie=re||0),Se==="Point")Me(pe,Fe);else if(Se==="MultiPoint")for(var Ge=0;Ge<pe.length;Ge++)Me(pe[Ge],Fe);else if(Se==="LineString")et(pe,Fe,Ve,!1);else if(Se==="MultiLineString"){if(j.lineMetrics){for(Ge=0;Ge<pe.length;Ge++)et(pe[Ge],Fe=[],Ve,!1),se.push(Vt(Ie,"LineString",Fe,$.properties));return}jt(pe,Fe,Ve,!1)}else if(Se==="Polygon")jt(pe,Fe,Ve,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(Ge=0;Ge<$.geometry.geometries.length;Ge++)vt(se,{id:Ie,geometry:$.geometry.geometries[Ge],properties:$.properties},j,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<pe.length;Ge++){var gt=[];jt(pe[Ge],gt,Ve,!0),Fe.push(gt)}}se.push(Vt(Ie,Se,Fe,$.properties))}}function Me(se,$){$.push(Zt(se[0])),$.push(bn(se[1])),$.push(0)}function et(se,$,j,re){for(var pe,Se,Ve=0,Fe=0;Fe<se.length;Fe++){var Ie=Zt(se[Fe][0]),Ge=bn(se[Fe][1]);$.push(Ie),$.push(Ge),$.push(0),Fe>0&&(Ve+=re?(pe*Ge-Ie*Se)/2:Math.sqrt(Math.pow(Ie-pe,2)+Math.pow(Ge-Se,2))),pe=Ie,Se=Ge}var gt=$.length-3;$[2]=1,mt($,0,gt,j),$[gt+2]=1,$.size=Math.abs(Ve),$.start=0,$.end=$.size}function jt(se,$,j,re){for(var pe=0;pe<se.length;pe++){var Se=[];et(se[pe],Se,j,re),$.push(Se)}}function Zt(se){return se/360+.5}function bn(se){var $=Math.sin(se*Math.PI/180),j=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return j<0?0:j>1?1:j}function Tn(se,$,j,re,pe,Se,Ve,Fe){if(re/=$,Se>=(j/=$)&&Ve<re)return se;if(Ve<j||Se>=re)return null;for(var Ie=[],Ge=0;Ge<se.length;Ge++){var gt=se[Ge],Pt=gt.geometry,yt=gt.type,un=pe===0?gt.minX:gt.minY,Yt=pe===0?gt.maxX:gt.maxY;if(un>=j&&Yt<re)Ie.push(gt);else if(!(Yt<j||un>=re)){var an=[];if(yt==="Point"||yt==="MultiPoint")An(Pt,an,j,re,pe);else if(yt==="LineString")Sn(Pt,an,j,re,pe,!1,Fe.lineMetrics);else if(yt==="MultiLineString")Ci(Pt,an,j,re,pe,!1);else if(yt==="Polygon")Ci(Pt,an,j,re,pe,!0);else if(yt==="MultiPolygon")for(var gn=0;gn<Pt.length;gn++){var He=[];Ci(Pt[gn],He,j,re,pe,!0),He.length&&an.push(He)}if(an.length){if(Fe.lineMetrics&&yt==="LineString"){for(gn=0;gn<an.length;gn++)Ie.push(Vt(gt.id,yt,an[gn],gt.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(an.length===1?(yt="LineString",an=an[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=an.length===3?"Point":"MultiPoint"),Ie.push(Vt(gt.id,yt,an,gt.tags))}}}return Ie.length?Ie:null}function An(se,$,j,re,pe){for(var Se=0;Se<se.length;Se+=3){var Ve=se[Se+pe];Ve>=j&&Ve<=re&&($.push(se[Se]),$.push(se[Se+1]),$.push(se[Se+2]))}}function Sn(se,$,j,re,pe,Se,Ve){for(var Fe,Ie,Ge=si(se),gt=pe===0?xr:Ti,Pt=se.start,yt=0;yt<se.length-3;yt+=3){var un=se[yt],Yt=se[yt+1],an=se[yt+2],gn=se[yt+3],He=se[yt+4],jn=pe===0?un:Yt,Jt=pe===0?gn:He,Yn=!1;Ve&&(Fe=Math.sqrt(Math.pow(un-gn,2)+Math.pow(Yt-He,2))),jn<j?Jt>j&&(Ie=gt(Ge,un,Yt,gn,He,j),Ve&&(Ge.start=Pt+Fe*Ie)):jn>re?Jt<re&&(Ie=gt(Ge,un,Yt,gn,He,re),Ve&&(Ge.start=Pt+Fe*Ie)):lr(Ge,un,Yt,an),Jt<j&&jn>=j&&(Ie=gt(Ge,un,Yt,gn,He,j),Yn=!0),Jt>re&&jn<=re&&(Ie=gt(Ge,un,Yt,gn,He,re),Yn=!0),!Se&&Yn&&(Ve&&(Ge.end=Pt+Fe*Ie),$.push(Ge),Ge=si(se)),Ve&&(Pt+=Fe)}var zn=se.length-3;un=se[zn],Yt=se[zn+1],an=se[zn+2],(jn=pe===0?un:Yt)>=j&&jn<=re&&lr(Ge,un,Yt,an),zn=Ge.length-3,Se&&zn>=3&&(Ge[zn]!==Ge[0]||Ge[zn+1]!==Ge[1])&&lr(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&$.push(Ge)}function si(se){var $=[];return $.size=se.size,$.start=se.start,$.end=se.end,$}function Ci(se,$,j,re,pe,Se){for(var Ve=0;Ve<se.length;Ve++)Sn(se[Ve],$,j,re,pe,Se,!1)}function lr(se,$,j,re){se.push($),se.push(j),se.push(re)}function xr(se,$,j,re,pe,Se){var Ve=(Se-$)/(re-$);return se.push(Se),se.push(j+(pe-j)*Ve),se.push(1),Ve}function Ti(se,$,j,re,pe,Se){var Ve=(Se-j)/(pe-j);return se.push($+(re-$)*Ve),se.push(Se),se.push(1),Ve}function Ui(se,$){for(var j=[],re=0;re<se.length;re++){var pe,Se=se[re],Ve=Se.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")pe=ti(Se.geometry,$);else if(Ve==="MultiLineString"||Ve==="Polygon"){pe=[];for(var Fe=0;Fe<Se.geometry.length;Fe++)pe.push(ti(Se.geometry[Fe],$))}else if(Ve==="MultiPolygon")for(pe=[],Fe=0;Fe<Se.geometry.length;Fe++){for(var Ie=[],Ge=0;Ge<Se.geometry[Fe].length;Ge++)Ie.push(ti(Se.geometry[Fe][Ge],$));pe.push(Ie)}j.push(Vt(Se.id,Ve,pe,Se.tags))}return j}function ti(se,$){var j=[];j.size=se.size,se.start!==void 0&&(j.start=se.start,j.end=se.end);for(var re=0;re<se.length;re+=3)j.push(se[re]+$,se[re+1],se[re+2]);return j}function gi(se,$){if(se.transformed)return se;var j,re,pe,Se=1<<se.z,Ve=se.x,Fe=se.y;for(j=0;j<se.features.length;j++){var Ie=se.features[j],Ge=Ie.geometry,gt=Ie.type;if(Ie.geometry=[],gt===1)for(re=0;re<Ge.length;re+=2)Ie.geometry.push(Cr(Ge[re],Ge[re+1],$,Se,Ve,Fe));else for(re=0;re<Ge.length;re++){var Pt=[];for(pe=0;pe<Ge[re].length;pe+=2)Pt.push(Cr(Ge[re][pe],Ge[re][pe+1],$,Se,Ve,Fe));Ie.geometry.push(Pt)}}return se.transformed=!0,se}function Cr(se,$,j,re,pe,Se){return[Math.round(j*(se*re-pe)),Math.round(j*($*re-Se))]}function yr(se,$,j,re,pe){for(var Se=$===pe.maxZoom?0:pe.tolerance/((1<<$)*pe.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:re,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<se.length;Fe++){Ve.numFeatures++,qi(Ve,se[Fe],Se,pe);var Ie=se[Fe].minX,Ge=se[Fe].minY,gt=se[Fe].maxX,Pt=se[Fe].maxY;Ie<Ve.minX&&(Ve.minX=Ie),Ge<Ve.minY&&(Ve.minY=Ge),gt>Ve.maxX&&(Ve.maxX=gt),Pt>Ve.maxY&&(Ve.maxY=Pt)}return Ve}function qi(se,$,j,re){var pe=$.geometry,Se=$.type,Ve=[];if(Se==="Point"||Se==="MultiPoint")for(var Fe=0;Fe<pe.length;Fe+=3)Ve.push(pe[Fe]),Ve.push(pe[Fe+1]),se.numPoints++,se.numSimplified++;else if(Se==="LineString")tr(Ve,pe,se,j,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Fe=0;Fe<pe.length;Fe++)tr(Ve,pe[Fe],se,j,Se==="Polygon",Fe===0);else if(Se==="MultiPolygon")for(var Ie=0;Ie<pe.length;Ie++){var Ge=pe[Ie];for(Fe=0;Fe<Ge.length;Fe++)tr(Ve,Ge[Fe],se,j,!0,Fe===0)}if(Ve.length){var gt=$.tags||null;if(Se==="LineString"&&re.lineMetrics){for(var Pt in gt={},$.tags)gt[Pt]=$.tags[Pt];gt.mapbox_clip_start=pe.start/pe.size,gt.mapbox_clip_end=pe.end/pe.size}var yt={geometry:Ve,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:gt};$.id!==null&&(yt.id=$.id),se.features.push(yt)}}function tr(se,$,j,re,pe,Se){var Ve=re*re;if(re>0&&$.size<(pe?Ve:re))j.numPoints+=$.length/3;else{for(var Fe=[],Ie=0;Ie<$.length;Ie+=3)(re===0||$[Ie+2]>Ve)&&(j.numSimplified++,Fe.push($[Ie]),Fe.push($[Ie+1])),j.numPoints++;pe&&function(Ge,gt){for(var Pt=0,yt=0,un=Ge.length,Yt=un-2;yt<un;Yt=yt,yt+=2)Pt+=(Ge[yt]-Ge[Yt])*(Ge[yt+1]+Ge[Yt+1]);if(Pt>0===gt)for(yt=0,un=Ge.length;yt<un/2;yt+=2){var an=Ge[yt],gn=Ge[yt+1];Ge[yt]=Ge[un-2-yt],Ge[yt+1]=Ge[un-1-yt],Ge[un-2-yt]=an,Ge[un-1-yt]=gn}}(Fe,Se),se.push(Fe)}}function Gr(se,$){var j=($=this.options=function(pe,Se){for(var Ve in Se)pe[Ve]=Se[Ve];return pe}(Object.create(this.options),$)).debug;if(j&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(pe,Se){var Ve=[];if(pe.type==="FeatureCollection")for(var Fe=0;Fe<pe.features.length;Fe++)vt(Ve,pe.features[Fe],Se,Fe);else vt(Ve,pe.type==="Feature"?pe:{geometry:pe},Se);return Ve}(se,$);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(re=function(pe,Se){var Ve=Se.buffer/Se.extent,Fe=pe,Ie=Tn(pe,1,-1-Ve,Ve,0,-1,2,Se),Ge=Tn(pe,1,1-Ve,2+Ve,0,-1,2,Se);return(Ie||Ge)&&(Fe=Tn(pe,1,-Ve,1+Ve,0,-1,2,Se)||[],Ie&&(Fe=Ui(Ie,1).concat(Fe)),Ge&&(Fe=Fe.concat(Ui(Ge,-1)))),Fe}(re,$)).length&&this.splitTile(re,0,0,0),j&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Or(se,$,j){return 32*((1<<se)*j+$)+se}function Ji(se,$){const j=se.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const re=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!re)return $(null,null);const pe=new G(re.features);let Se=Le(pe);Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),$(null,{vectorTile:pe,rawData:Se.buffer})}Gr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gr.prototype.splitTile=function(se,$,j,re,pe,Se,Ve){for(var Fe=[se,$,j,re],Ie=this.options,Ge=Ie.debug;Fe.length;){re=Fe.pop(),j=Fe.pop(),$=Fe.pop(),se=Fe.pop();var gt=1<<$,Pt=Or($,j,re),yt=this.tiles[Pt];if(!yt&&(Ge>1&&console.time("creation"),yt=this.tiles[Pt]=yr(se,$,j,re,Ie),this.tileCoords.push({z:$,x:j,y:re}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,j,re,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var un="z"+$;this.stats[un]=(this.stats[un]||0)+1,this.total++}if(yt.source=se,pe){if($===Ie.maxZoom||$===pe)continue;var Yt=1<<pe-$;if(j!==Math.floor(Se/Yt)||re!==Math.floor(Ve/Yt))continue}else if($===Ie.indexMaxZoom||yt.numPoints<=Ie.indexMaxPoints)continue;if(yt.source=null,se.length!==0){Ge>1&&console.time("clipping");var an,gn,He,jn,Jt,Yn,zn=.5*Ie.buffer/Ie.extent,Oo=.5-zn,nr=.5+zn,Rt=1+zn;an=gn=He=jn=null,Jt=Tn(se,gt,j-zn,j+nr,0,yt.minX,yt.maxX,Ie),Yn=Tn(se,gt,j+Oo,j+Rt,0,yt.minX,yt.maxX,Ie),se=null,Jt&&(an=Tn(Jt,gt,re-zn,re+nr,1,yt.minY,yt.maxY,Ie),gn=Tn(Jt,gt,re+Oo,re+Rt,1,yt.minY,yt.maxY,Ie),Jt=null),Yn&&(He=Tn(Yn,gt,re-zn,re+nr,1,yt.minY,yt.maxY,Ie),jn=Tn(Yn,gt,re+Oo,re+Rt,1,yt.minY,yt.maxY,Ie),Yn=null),Ge>1&&console.timeEnd("clipping"),Fe.push(an||[],$+1,2*j,2*re),Fe.push(gn||[],$+1,2*j,2*re+1),Fe.push(He||[],$+1,2*j+1,2*re),Fe.push(jn||[],$+1,2*j+1,2*re+1)}}},Gr.prototype.getTile=function(se,$,j){var re=this.options,pe=re.extent,Se=re.debug;if(se<0||se>24)return null;var Ve=1<<se,Fe=Or(se,$=($%Ve+Ve)%Ve,j);if(this.tiles[Fe])return gi(this.tiles[Fe],pe);Se>1&&console.log("drilling down to z%d-%d-%d",se,$,j);for(var Ie,Ge=se,gt=$,Pt=j;!Ie&&Ge>0;)Ge--,gt=Math.floor(gt/2),Pt=Math.floor(Pt/2),Ie=this.tiles[Or(Ge,gt,Pt)];return Ie&&Ie.source?(Se>1&&console.log("found parent tile z%d-%d-%d",Ge,gt,Pt),Se>1&&console.time("drilling down"),this.splitTile(Ie.source,Ge,gt,Pt,se,$,j),Se>1&&console.timeEnd("drilling down"),this.tiles[Fe]?gi(this.tiles[Fe],pe):null):null};class go extends s.VectorTileWorkerSource{constructor($,j,re,pe,Se){super($,j,re,pe,Ji),Se&&(this.loadGeoJSON=Se)}loadData($,j){const re=$&&$.request,pe=re&&re.collectResourceTiming;this.loadGeoJSON($,(Se,Ve)=>{if(Se||!Ve)return j(Se);if(typeof Ve!="object")return j(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{F(Ve,!0);try{if($.filter){const Ie=s.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(gt=>`${gt.key}: ${gt.message}`).join(", "));const Ge=Ve.features.filter(gt=>Ie.value.evaluate({zoom:0},gt));Ve={type:"FeatureCollection",features:Ge}}this._geoJSONIndex=$.cluster?new kt(function({superclusterOptions:Ie,clusterProperties:Ge}){if(!Ge||!Ie)return Ie;const gt={},Pt={},yt={accumulated:null,zoom:0},un={properties:null},Yt=Object.keys(Ge);for(const an of Yt){const[gn,He]=Ge[an],jn=s.createExpression(He),Jt=s.createExpression(typeof gn=="string"?[gn,["accumulated"],["get",an]]:gn);gt[an]=jn.value,Pt[an]=Jt.value}return Ie.map=an=>{un.properties=an;const gn={};for(const He of Yt)gn[He]=gt[He].evaluate(yt,un);return gn},Ie.reduce=(an,gn)=>{un.properties=gn;for(const He of Yt)yt.accumulated=an[He],an[He]=Pt[He].evaluate(yt,un)},Ie}($)).load(Ve.features):function(Ie,Ge){return new Gr(Ie,Ge)}(Ve,$.geojsonVtOptions)}catch(Ie){return j(Ie)}this.loaded={};const Fe={};if(pe){const Ie=s.getPerformanceMeasurement(re);Ie&&(Fe.resourceTiming={},Fe.resourceTiming[$.source]=JSON.parse(JSON.stringify(Ie)))}j(null,Fe)}})}reloadTile($,j){const re=this.loaded;return re&&re[$.uid]?super.reloadTile($,j):this.loadTile($,j)}loadGeoJSON($,j){if($.request)s.getJSON($.request,j);else{if(typeof $.data!="string")return j(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));try{return j(null,JSON.parse($.data))}catch{return j(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom($,j){try{j(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(re){j(re)}}getClusterChildren($,j){try{j(null,this._geoJSONIndex.getChildren($.clusterId))}catch(re){j(re)}}getClusterLeaves($,j){try{j(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(re){j(re)}}}class Wr{constructor($){this.self=$,this.actor=new s.Actor($,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:go},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(j,re)=>{if(this.workerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.workerSourceTypes[j]=re},this.self.registerRTLTextPlugin=j=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=j.applyArabicShaping,s.plugin.processBidirectionalText=j.processBidirectionalText,s.plugin.processStyledBidirectionalText=j.processStyledBidirectionalText}}clearCaches($,j,re){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$],re()}checkIfReady($,j,re){re()}setReferrer($,j){this.referrer=j}spriteLoaded($,j){this.isSpriteLoaded[$]=j;for(const re in this.workerSources[$]){const pe=this.workerSources[$][re];for(const Se in pe)pe[Se]instanceof s.VectorTileWorkerSource&&(pe[Se].isSpriteLoaded=j,pe[Se].fire(new s.Event("isSpriteLoaded")))}}setImages($,j,re){this.availableImages[$]=j;for(const pe in this.workerSources[$]){const Se=this.workerSources[$][pe];for(const Ve in Se)Se[Ve].availableImages=j}re()}enableTerrain($,j,re){this.terrain=j,re()}setProjection($,j){this.projections[$]=s.getProjection(j)}setLayers($,j,re){this.getLayerIndex($).replace(j),re()}updateLayers($,j,re){this.getLayerIndex($).update(j.layers,j.removedIds),re()}loadTile($,j,re){const pe=this.enableTerrain?s.extend({enableTerrain:this.terrain},j):j;pe.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,j.type,j.source).loadTile(pe,re)}loadDEMTile($,j,re){const pe=this.enableTerrain?s.extend({buildQuadTree:this.terrain},j):j;this.getDEMWorkerSource($,j.source).loadTile(pe,re)}reloadTile($,j,re){const pe=this.enableTerrain?s.extend({enableTerrain:this.terrain},j):j;pe.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,j.type,j.source).reloadTile(pe,re)}abortTile($,j,re){this.getWorkerSource($,j.type,j.source).abortTile(j,re)}removeTile($,j,re){this.getWorkerSource($,j.type,j.source).removeTile(j,re)}removeSource($,j,re){if(!this.workerSources[$]||!this.workerSources[$][j.type]||!this.workerSources[$][j.type][j.source])return;const pe=this.workerSources[$][j.type][j.source];delete this.workerSources[$][j.type][j.source],pe.removeSource!==void 0?pe.removeSource(j,re):re()}loadWorkerSource($,j,re){try{this.self.importScripts(j.url),re()}catch(pe){re(pe.toString())}}syncRTLPluginState($,j,re){try{s.plugin.setState(j);const pe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&pe!=null){this.self.importScripts(pe);const Se=s.plugin.isParsed();re(Se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${pe}`),Se)}}catch(pe){re(pe.toString())}}getAvailableImages($){let j=this.availableImages[$];return j||(j=[]),j}getLayerIndex($){let j=this.layerIndexes[$];return j||(j=this.layerIndexes[$]=new M),j}getWorkerSource($,j,re){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][j]||(this.workerSources[$][j]={}),this.workerSources[$][j][re]||(this.workerSources[$][j][re]=new this.workerSourceTypes[j]({send:(pe,Se,Ve,Fe,Ie,Ge)=>{this.actor.send(pe,Se,Ve,$,Ie,Ge)},scheduler:this.actor.scheduler},this.getLayerIndex($),this.getAvailableImages($),this.isSpriteLoaded[$])),this.workerSources[$][j][re]}getDEMWorkerSource($,j){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][j]||(this.demWorkerSources[$][j]=new L),this.demWorkerSources[$][j]}enforceCacheSizeLimit($,j){s.enforceCacheSizeLimit(j)}getWorkerPerformanceMetrics($,j,re){re(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Wr(self)),Wr}),g(["./shared"],function(s){var C=D;function D(f){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,v,x=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(x);try{v=new Worker(E),p=!0}catch{p=!1}return v&&v.terminate(),URL.revokeObjectURL(E),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var v=p.getContext("2d");if(!v)return!1;var x=v.getImageData(0,0,1,1);return x&&x.width===p.width}()?(M[c=i&&i.failIfMajorPerformanceCaveat]===void 0&&(M[c]=function(p){var v,x=function(E){var A=document.createElement("canvas"),P=Object.create(D.webGLContextAttributes);return P.failIfMajorPerformanceCaveat=E,A.getContext("webgl",P)||A.getContext("experimental-webgl",P)}(p);if(!x)return!1;try{v=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!v||x.isContextLost())&&(x.shaderSource(v,"void main() {}"),x.compileShader(v),x.getShaderParameter(v,x.COMPILE_STATUS)===!0)}(c)),M[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(f)}var M={};function L(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let c=0;c<f.length;c++)if(!L(f[c],i[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&i!==null){if(typeof i!="object"||Object.keys(f).length!==Object.keys(i).length)return!1;for(const c in f)if(!L(f[c],i[c]))return!1;return!0}return f===i}function F(f,i,c){const p=s.window.document.createElement(f);return i!==void 0&&(p.className=i),c&&c.appendChild(p),p}function Y(f,i,c){const p=s.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(i))p.setAttributeNS(null,v,i[v]);return c&&c.appendChild(p),p}D.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Te=s.window.document&&s.window.document.documentElement.style,ue=Te&&Te.userSelect!==void 0?"userSelect":"WebkitUserSelect";let K;function G(){Te&&ue&&(K=Te[ue],Te[ue]="none")}function Q(){Te&&ue&&(Te[ue]=K)}function _e(f){f.preventDefault(),f.stopPropagation(),s.window.removeEventListener("click",_e,!0)}function Ce(){s.window.addEventListener("click",_e,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",_e,!0)},0)}function Ae(f,i){const c=f.getBoundingClientRect();return pt(f,c,i)}function Le(f,i){const c=f.getBoundingClientRect(),p=[];for(let v=0;v<i.length;v++)p.push(pt(f,c,i[v]));return p}function $e(f){return s.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function pt(f,i,c){const p=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new s.pointGeometry((c.clientX-i.left)*p,(c.clientY-i.top)*p)}function Xe(f,i){var c=i[0],p=i[1],v=i[2],x=i[3],E=c*x-v*p;return E?(f[0]=x*(E=1/E),f[1]=-p*E,f[2]=-v*E,f[3]=c*E,f):null}function ve(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ye extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const v of i){if(v[0]<p||v[1]<v[0]||c<v[1])return!1;p=v[1]}return!0}_validateContent(i,c){return!(i&&(i.length!==4||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let p=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(p=!1);this.isLoaded()||p?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const p={};for(const v of i){this.images[v]||this.fire(new s.Event("styleimagemissing",{id:v}));const x=this.images[v];x?p[v]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:s.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new s.ImagePosition(v,p);this.patterns[i]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:p}=s.potpack(i),v=this.atlasImage;v.resize({width:c||1,height:p||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],A=E.x+1,P=E.y+1,R=this.images[x].data,N=R.width,U=R.height;s.RGBAImage.copy(R,v,{x:0,y:0},{x:A,y:P},{width:N,height:U}),s.RGBAImage.copy(R,v,{x:0,y:U-1},{x:A,y:P-1},{width:N,height:1}),s.RGBAImage.copy(R,v,{x:0,y:0},{x:A,y:P+U},{width:N,height:1}),s.RGBAImage.copy(R,v,{x:N-1,y:0},{x:A-1,y:P},{width:1,height:U}),s.RGBAImage.copy(R,v,{x:0,y:0},{x:A+N,y:P},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.images[c];ve(p)&&this.updateImage(c,p)}}}const Be=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(f,i){return function([c,p,v]){const x=s.degToRad(p+90),E=s.degToRad(v);return{x:c*Math.cos(x)*Math.sin(E),y:c*Math.sin(x)*Math.sin(E),z:c*Math.cos(E),azimuthal:p,polar:v}}(f.expression.evaluate(i))}interpolate(f,i,c){return{x:s.number(f.x,i.x,c),y:s.number(f.y,i.y,c),z:s.number(f.z,i.z,c),azimuthal:s.number(f.azimuthal,i.azimuthal,c),polar:s.number(f.polar,i.polar,c)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Pe="-transition";class xe extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(Be),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(s.validateLight,i,c))for(const p in i){const v=i[p];s.endsWith(p,Pe)?this._transitionable.setTransition(p.slice(0,-Pe.length),v):this._transitionable.setValue(p,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const je=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),lt="-transition";class Qe extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(je),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(i){for(const c in i){const p=i[c];s.endsWith(c,lt)?this._transitionable.setTransition(c.slice(0,-lt.length),p):this._transitionable.setValue(c,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function ht(f,i,c,p){const v=s.smoothstep(45,65,c),[x,E]=ct(f,p),A=s.length(i);let P=1-Math.min(1,Math.exp((A-x)/(E-x)*-6));return P*=P*P,P=Math.min(1,1.00747*P),P*v*f.alpha}function ct(f,i){const c=.5/Math.tan(.5*i);return[f.range[0]+c,f.range[1]+c]}const Ut=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"])}),Ke="-transition";class hn extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(Ut),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,c={}){if(!this._validate(s.validateFog,i,c))for(const p in i){const v=i[p];s.endsWith(p,Ke)?this._transitionable.setTransition(p.slice(0,-Ke.length),v):this._transitionable.setValue(p,v)}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return s.smoothstep(45,65,i)*c.a}getOpacityAtLatLng(i,c){return this._transform.projection.supportsFog?function(p,v,x){const E=s.MercatorCoordinate.fromLngLat(v),A=x.elevation?x.elevation.getAtPointOrZero(E):0,P=[E.x,E.y,A];return s.transformMat4(P,P,x.mercatorFogMatrix),ht(p,P,x.pitch,x._fov)}(this.state,i,c):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?ct(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ht{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const p=this.workerPool.acquire(this.id);for(let v=0;v<p.length;v++){const x=new Ht.Actor(p[v],c,this.id);x.name=`Worker ${v}`,this.actors.push(x)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,c,p){s.asyncAll(this.actors,(v,x)=>{v.send(i,c,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function dn(f,i,c){return i*(s.EXTENT/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}Ht.Actor=s.Actor;class Ue{constructor(i,c,p,v){this.screenBounds=i,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(x=>v.pointCoordinate3D(x)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(i,c){let p,v;if(i instanceof s.pointGeometry||typeof i[0]=="number"){const x=s.pointGeometry.convert(i);p=[s.pointGeometry.convert(i)],v=c.isPointAboveHorizon(x)}else{const x=s.pointGeometry.convert(i[0]),E=s.pointGeometry.convert(i[1]);p=[x,E],v=s.polygonizeBounds(x,E).every(A=>c.isPointAboveHorizon(A))}return new Ue(p,c.getCameraPoint(),v,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const c=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],v=s.polygonizeBounds(c,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<p.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?v[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(v[3]=this.cameraPoint)),s.bufferConvexPolygon(v,i)}containsTile(i,c,p){const v=i.queryPadding+1,x=i.tileID.wrap,E=p?this._bufferedCameraMercator(v,c).map(J=>s.getTilePoint(i.tileTransform,J,x)):this._bufferedScreenMercator(v,c).map(J=>s.getTilePoint(i.tileTransform,J,x)),A=this.screenGeometryMercator.map(J=>s.getTileVec3(i.tileTransform,J,x)),P=A.map(J=>new s.pointGeometry(J[0],J[1])),R=c.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),N=s.getTileVec3(i.tileTransform,R,x),U=A.map(J=>{const W=s.sub(J,J,N);return s.normalize(W,W),new s.Ray(N,W)}),X=dn(i,1,c.zoom);if(s.polygonIntersectsBox(E,0,0,s.EXTENT,s.EXTENT))return{queryGeometry:this,tilespaceGeometry:P,tilespaceRays:U,bufferedTilespaceGeometry:E,bufferedTilespaceBounds:(ne=s.getBounds(E),ne.min.x=s.clamp(ne.min.x,0,s.EXTENT),ne.min.y=s.clamp(ne.min.y,0,s.EXTENT),ne.max.x=s.clamp(ne.max.x,0,s.EXTENT),ne.max.y=s.clamp(ne.max.y,0,s.EXTENT),ne),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:X};var ne}_bufferedScreenMercator(i,c){const p=wt(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{const v=this.bufferedScreenGeometry(i).map(x=>c.pointCoordinate3D(x));return this._screenRaycastCache[p]=v,v}}_bufferedCameraMercator(i,c){const p=wt(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{const v=this.bufferedCameraGeometry(i).map(x=>c.pointCoordinate3D(x));return this._cameraRaycastCache[p]=v,v}}}function wt(f){return 100*f|0}function kt(f,i,c){const p=function(v,x){if(v)return c(v);if(x){const E=s.pick(s.extend(x,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(E.vectorLayers=x.vector_layers,E.vectorLayerIds=E.vectorLayers.map(A=>A.id)),E.tiles=i.canonicalizeTileset(E,f.url),c(null,E)}};return f.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(f.url),s.ResourceType.Source),p):s.exported.frame(()=>p(null,f))}class Et{constructor(i,c,p){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*c),v=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*c),E=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=p&&i.x<x&&i.y>=v&&i.y<E}}class sn{constructor(i,c,p){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const En={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class me{constructor(i,c,p,v){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const v=c.attributes[this.attributes[p].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,p){for(let v=0;v<this.attributes.length;v++){const x=this.attributes[v],E=c.attributes[x.name];E!==void 0&&i.vertexAttribPointer(E,x.components,i[En[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class oe{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ot extends oe{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class te extends oe{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ge extends oe{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ze extends oe{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Je extends oe{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class mt extends oe{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class St extends oe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Vt extends oe{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Ct extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class vt extends oe{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Me extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class et extends oe{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class jt extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Zt extends oe{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class bn extends oe{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Tn extends oe{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class An extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Sn extends oe{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class si extends oe{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ci extends oe{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class lr extends oe{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class xr extends oe{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ti extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ui extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ti extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class gi extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Cr extends oe{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class yr extends oe{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class qi extends oe{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class tr extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Gr extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Or extends oe{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Ji extends Or{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class go extends Or{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wr extends go{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class se{constructor(i,c,p,v){this.context=i,this.width=c,this.height=p;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Ji(i,x),v&&(this.depthAttachment=new go(i,x))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class ${constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ot(this),this.clearDepth=new te(this),this.clearStencil=new ge(this),this.colorMask=new Ze(this),this.depthMask=new Je(this),this.stencilMask=new mt(this),this.stencilFunc=new St(this),this.stencilOp=new Vt(this),this.stencilTest=new Ct(this),this.depthRange=new vt(this),this.depthTest=new Me(this),this.depthFunc=new et(this),this.blend=new jt(this),this.blendFunc=new Zt(this),this.blendColor=new bn(this),this.blendEquation=new Tn(this),this.cullFace=new An(this),this.cullFaceSide=new Sn(this),this.frontFace=new si(this),this.program=new Ci(this),this.activeTexture=new lr(this),this.viewport=new xr(this),this.bindFramebuffer=new Ti(this),this.bindRenderbuffer=new Ui(this),this.bindTexture=new ti(this),this.bindVertexBuffer=new gi(this),this.bindElementBuffer=new Cr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yr(this),this.pixelStoreUnpack=new qi(this),this.pixelStoreUnpackPremultiplyAlpha=new tr(this),this.pixelStoreUnpackFlipY=new Gr(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new sn(this,i,c)}createVertexBuffer(i,c,p){return new me(this,i,c,p)}createRenderbuffer(i,c,p){const v=this.gl,x=v.createRenderbuffer();return this.bindRenderbuffer.set(x),v.renderbufferStorage(v.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,p){return new se(this,i,c,p)}clear({color:i,depth:c,stencil:p}){const v=this.gl;let x=0;i&&(x|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(x|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){L(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class j extends s.Evented{constructor(i,c,p,v){super(),this.id=i,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},c),s.extend(this,s.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(s.extend(this,c),c.bounds&&(this.tileBounds=new Et(c.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(c.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const p=s.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(v,s.ResourceType.Tile),(x,E,A,P)=>(delete i.request,i.aborted?(i.state="unloaded",c(null)):x?(i.state="errored",c(x)):E?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:A,expires:P}),i.setTexture(E,this.map.painter),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void c(null)):c(null)))}static loadTileData(i,c,p){i.setTexture(c,p)}static unloadTileData(i,c){i.texture&&c.saveTileTexture(i.texture)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let re;function pe(f,i,c,p,v,x,E,A){const P=[f,c,v,i,p,x,1,1,1],R=[E,A,1],N=s.adjoint([],P),[U,X,ne]=s.transformMat3(R,R,s.transpose(N,N));return s.multiply(P,[U,0,0,0,X,0,0,0,ne],P)}class Se extends s.Evented{constructor(i,c,p,v){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(c,p)=>{if(this._loaded=!0,c)this.fire(new s.ErrorEvent(c));else if(p){const{HTMLImageElement:v}=s.window;this.image=p instanceof v?s.exported.getImageData(p):p,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const c=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(p){let v=1/0,x=1/0,E=-1/0,A=-1/0;for(const U of p)v=Math.min(v,U.x),x=Math.min(x,U.y),E=Math.max(E,U.x),A=Math.max(A,U.y);const P=Math.max(E-v,A-x),R=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),N=Math.pow(2,R);return new s.CanonicalTileID(R,Math.floor((v+E)/2*N),Math.floor((x+A)/2*N))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const P in this.tiles){const R=this.tiles[P];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}if(this._boundsArray)return;const c=s.tileTransform(this.tileID,this.map.transform.projection),[p,v,x,E]=this.coordinates.map(P=>{const R=c.projection.project(P[0],P[1]);return s.getTilePoint(c,R)._round()});this.perspectiveTransform=function(P,R,N,U,X,ne,J,W,de,ae){const he=pe(0,0,P,0,0,R,P,R),fe=pe(N,U,X,ne,J,W,de,ae);return s.multiply(fe,s.adjoint(he,he),fe),[fe[6]/fe[8]*P/s.EXTENT,fe[7]/fe[8]*R/s.EXTENT]}(this.width,this.height,p.x,p.y,v.x,v.y,E.x,E.y,x.x,x.y);const A=this._boundsArray=new s.StructArrayLayout4i8;A.emplaceBack(p.x,p.y,0,0),A.emplaceBack(v.x,v.y,s.EXTENT,0),A.emplaceBack(E.x,E.y,0,s.EXTENT),A.emplaceBack(x.x,x.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(A,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.texture?this.texture.update(this.image):(this.texture=new s.Texture(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._prepareData(i)}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ve={vector:class extends s.Evented{constructor(f,i,c,p){if(super(),this.id=f,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(i,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kt(this._options,this.map._requestManager,(f,i)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new s.ErrorEvent(f)):i&&(s.extend(this,i),i.bounds&&(this.tileBounds=new Et(i.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f();const i=this.map.style._getSourceCaches(this.id);for(const c of i)c.clearTiles();this.load()}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(f,i){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(c,s.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(p.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired")f.state==="loading"?f.reloadCallback=i:f.request=f.actor.send("reloadTile",p,v.bind(this));else if(f.actor=this._tileWorkers[c]=this._tileWorkers[c]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",p,v.bind(this),void 0,!0);else{const x=s.loadVectorTile.call({deduped:this._deduped},p,(E,A)=>{E||!A?v.call(this,E):(p.data={cacheControl:A.cacheControl,expires:A.expires,rawData:A.rawData.slice(0)},f.actor&&f.actor.send("loadTile",p,v.bind(this),void 0,!0))},!0);f.request={cancel:x}}function v(x,E){return delete f.request,f.aborted?i(null):x&&x.status!==404?i(x):(E&&E.resourceTiming&&(f.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&f.setExpiryData(E),f.loadVectorData(E,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:j,"raster-dem":class extends j{constructor(f,i,c,p){super(f,i,c,p),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(v,x){v&&(f.state="errored",i(v)),x&&(f.dem=x,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=s.getImage(this.map._requestManager.transformRequest(c,s.ResourceType.Tile),function(v,x,E,A){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(v)f.state="errored",i(v);else if(x){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:E,expires:A});const P=s.window.ImageBitmap&&x instanceof s.window.ImageBitmap&&(re==null&&(re=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),re),R=1-(x.width-s.prevPowerOfTwo(x.width))/2;R<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const N=P?x:s.exported.getImageData(x,R),U={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:N,encoding:this.encoding,padding:R};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",U,p.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const i=f.canonical,c=Math.pow(2,i.z),p=(i.x-1+c)%c,v=i.x===0?f.wrap-1:f.wrap,x=(i.x+1+c)%c,E=i.x+1===c?f.wrap+1:f.wrap,A={};return A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y).key]={backfilled:!1},i.y>0&&(A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y-1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y-1).key]={backfilled:!1}),i.y+1<c&&(A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y+1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y+1).key]={backfilled:!1}),A}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends s.Evented{constructor(f,i,c,p){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(p),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*v,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*v,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,c,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:c},p),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(f.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(c,p)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new s.ErrorEvent(c));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&p&&p.resourceTiming&&p.resourceTiming[this.id]&&(v.resourceTiming=p.resourceTiming[this.id]),this.fire(new s.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,i){const c=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(c,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(p,v)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):p?i(p):(f.loadVectorData(v,this.map.painter,c==="reloadTile"),i(null))),void 0,c==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Se{constructor(f,i,c,p){super(f,i,c,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Se,canvas:class extends Se{constructor(f,i,c,p){super(f,i,c,p),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(x=>typeof x!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends s.Evented{constructor(f,i,c,p){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Et(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:i,y:c,z:p}=f.canonical;return this._implementation.hasTile({x:i,y:c,z:p})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,i){const{x:c,y:p,z:v}=f.tileID.canonical,x=new s.window.AbortController,E=this._implementation.loadTile({x:c,y:p,z:v},{signal:x.signal});if(!E)return this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null);E.cancel=()=>x.abort(),f.request=E.then(function(A){return delete f.request,f.aborted?(f.state="unloaded",i(null)):A?function(P){return P instanceof s.window.ImageData||P instanceof s.window.ImageBitmap||P instanceof s.window.HTMLCanvasElement}(A)?(this.loadTileData(f,A),f.state="loaded",void i(null)):(f.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null))}.bind(this)).catch(A=>{A.code!==20&&(f.state="errored",i(A))})}loadTileData(f,i){j.loadTileData(f,i,this._map.painter)}unloadTileData(f){j.unloadTileData(f,this._map.painter)}prepareTile(f){if(!this._implementation.prepareTile)return null;const{x:i,y:c,z:p}=f.tileID.canonical,v=this._implementation.prepareTile({x:i,y:c,z:p});return v?(this.loadTileData(f,v),f.state="loaded",v):null}unloadTile(f,i){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:c,y:p,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:c,y:p,z:v})}i()}abortTile(f,i){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Fe=function(f,i,c,p){const v=new Ve[i.type](f,i,c,p);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Ie(f,i){const c=s.identity([]);return s.scale(c,c,[.5*f.width,.5*-f.height,1]),s.translate(c,c,[1,-1,0]),s.multiply$1(c,c,f.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(c)}function Ge(f,i,c,p,v,x,E,A=!1){const P=f.tilesIn(p,E,A);P.sort(Pt);const R=[];for(const U of P)R.push({wrappedTileID:U.tile.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(i,c,f._state,U,v,x,Ie(f.transform,U.tile.tileID),A)});const N=function(U){const X={},ne={};for(const J of U){const W=J.queryResults,de=J.wrappedTileID,ae=ne[de]=ne[de]||{};for(const he in W){const fe=W[he],ye=ae[he]=ae[he]||{},ce=X[he]=X[he]||[];for(const Ee of fe)ye[Ee.featureIndex]||(ye[Ee.featureIndex]=!0,ce.push(Ee))}}return X}(R);for(const U in N)N[U].forEach(X=>{const ne=X.feature,J=ne.layer;J&&J.type!=="background"&&J.type!=="sky"&&(ne.source=J.source,J["source-layer"]&&(ne.sourceLayer=J["source-layer"]),ne.state=ne.id!==void 0?f.getFeatureState(J["source-layer"],ne.id):{})});return N}function gt(f,i){const c=f.getRenderableIds().map(x=>f.getTileByID(x)),p=[],v={};for(let x=0;x<c.length;x++){const E=c[x],A=E.tileID.canonical.key;v[A]||(v[A]=!0,E.querySourceFeatures(p,i))}return p}function Pt(f,i){const c=f.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function yt(){return cc.workerClass!=null?new cc.workerClass:new s.window.Worker(cc.workerUrl)}const un="mapboxgl_preloaded_worker_pool";class Yt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Yt.workerCount;)this.workers.push(new yt);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[un]}numActive(){return Object.keys(this.active).length}}let an;function gn(){return an||(an=new Yt),an}function He(f,i){const c={};for(const p in f)p!=="ref"&&(c[p]=f[p]);return s.refProperties.forEach(p=>{p in i&&(c[p]=i[p])}),c}function jn(f){f=f.slice();const i=Object.create(null);for(let c=0;c<f.length;c++)i[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=He(f[c],i[f[c].ref]));return f}Yt.workerCount=2;const Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Yn(f,i,c){c.push({command:Jt.addSource,args:[f,i[f]]})}function zn(f,i,c){i.push({command:Jt.removeSource,args:[f]}),c[f]=!0}function Oo(f,i,c,p){zn(f,c,p),Yn(f,i,c)}function nr(f,i,c){let p;for(p in f[c])if(f[c].hasOwnProperty(p)&&p!=="data"&&!L(f[c][p],i[c][p]))return!1;for(p in i[c])if(i[c].hasOwnProperty(p)&&p!=="data"&&!L(f[c][p],i[c][p]))return!1;return!0}function Rt(f,i,c,p,v,x){let E;for(E in i=i||{},f=f||{})f.hasOwnProperty(E)&&(L(f[E],i[E])||c.push({command:x,args:[p,E,i[E],v]}));for(E in i)i.hasOwnProperty(E)&&!f.hasOwnProperty(E)&&(L(f[E],i[E])||c.push({command:x,args:[p,E,i[E],v]}))}function Vn(f){return f.id}function Ln(f,i){return f[i.id]=i,f}class Dr{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let c=1,p=this._distances[c];const v=i*this.paddedLength+this.padding;for(;p<v&&c<this._distances.length;)p=this._distances[++c];const x=c-1,E=this._distances[x],A=p-E,P=A>0?(v-E)/A:0;return this.points[x].mult(1-P).add(this.points[c].mult(P))}}class br{constructor(i,c,p){const v=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let E=0;E<this.xCellCount*this.yCellCount;E++)v.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,v,x){this._forEachCell(c,p,v,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(x)}insertCircle(i,c,p,v){this._forEachCell(c-v,p-v,c+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(v)}_insertBoxCell(i,c,p,v,x,E){this.boxCells[x].push(E)}_insertCircleCell(i,c,p,v,x,E){this.circleCells[x].push(E)}_query(i,c,p,v,x,E){if(p<0||i>this.width||v<0||c>this.height)return!x&&[];const A=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=v){if(x)return!0;for(let P=0;P<this.boxKeys.length;P++)A.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const R=this.circles[3*P],N=this.circles[3*P+1],U=this.circles[3*P+2];A.push({key:this.circleKeys[P],x1:R-U,y1:N-U,x2:R+U,y2:N+U})}return E?A.filter(E):A}return this._forEachCell(i,c,p,v,this._queryCell,A,{hitTest:x,seenUids:{box:{},circle:{}}},E),x?A.length>0:A}_queryCircle(i,c,p,v,x){const E=i-p,A=i+p,P=c-p,R=c+p;if(A<0||E>this.width||R<0||P>this.height)return!v&&[];const N=[];return this._forEachCell(E,P,A,R,this._queryCellCircle,N,{hitTest:v,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},x),v?N.length>0:N}query(i,c,p,v,x){return this._query(i,c,p,v,!1,x)}hitTest(i,c,p,v,x){return this._query(i,c,p,v,!0,x)}hitTestCircle(i,c,p,v){return this._queryCircle(i,c,p,!0,v)}_queryCell(i,c,p,v,x,E,A,P){const R=A.seenUids,N=this.boxCells[x];if(N!==null){const X=this.bboxes;for(const ne of N)if(!R.box[ne]){R.box[ne]=!0;const J=4*ne;if(i<=X[J+2]&&c<=X[J+3]&&p>=X[J+0]&&v>=X[J+1]&&(!P||P(this.boxKeys[ne]))){if(A.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ne],x1:X[J],y1:X[J+1],x2:X[J+2],y2:X[J+3]})}}}const U=this.circleCells[x];if(U!==null){const X=this.circles;for(const ne of U)if(!R.circle[ne]){R.circle[ne]=!0;const J=3*ne;if(this._circleAndRectCollide(X[J],X[J+1],X[J+2],i,c,p,v)&&(!P||P(this.circleKeys[ne]))){if(A.hitTest)return E.push(!0),!0;{const W=X[J],de=X[J+1],ae=X[J+2];E.push({key:this.circleKeys[ne],x1:W-ae,y1:de-ae,x2:W+ae,y2:de+ae})}}}}}_queryCellCircle(i,c,p,v,x,E,A,P){const R=A.circle,N=A.seenUids,U=this.boxCells[x];if(U!==null){const ne=this.bboxes;for(const J of U)if(!N.box[J]){N.box[J]=!0;const W=4*J;if(this._circleAndRectCollide(R.x,R.y,R.radius,ne[W+0],ne[W+1],ne[W+2],ne[W+3])&&(!P||P(this.boxKeys[J])))return E.push(!0),!0}}const X=this.circleCells[x];if(X!==null){const ne=this.circles;for(const J of X)if(!N.circle[J]){N.circle[J]=!0;const W=3*J;if(this._circlesCollide(ne[W],ne[W+1],ne[W+2],R.x,R.y,R.radius)&&(!P||P(this.circleKeys[J])))return E.push(!0),!0}}}_forEachCell(i,c,p,v,x,E,A,P){const R=this._convertToXCellCoord(i),N=this._convertToYCellCoord(c),U=this._convertToXCellCoord(p),X=this._convertToYCellCoord(v);for(let ne=R;ne<=U;ne++)for(let J=N;J<=X;J++)if(x.call(this,i,c,p,v,this.xCellCount*J+ne,E,A,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,v,x,E){const A=v-i,P=x-c,R=p+E;return R*R>A*A+P*P}_circleAndRectCollide(i,c,p,v,x,E,A){const P=(E-v)/2,R=Math.abs(i-(v+P));if(R>P+p)return!1;const N=(A-x)/2,U=Math.abs(c-(x+N));if(U>N+p)return!1;if(R<=P||U<=N)return!0;const X=R-P,ne=U-N;return X*X+ne*ne<=p*p}}const H=Math.tan(85*Math.PI/180);function Re(f,i,c,p,v,x){const E=s.create();if(c){if(v.projection.name==="globe")s.multiply$1(E,E,s.calculateGlobeLabelMatrix(v,i));else{const A=Xe([],x);E[0]=A[0],E[1]=A[1],E[4]=A[2],E[5]=A[3]}p||s.rotateZ(E,E,v.angle)}else s.multiply$1(E,v.labelPlaneMatrix,f);return E}function It(f,i,c,p,v,x){if(c){if(v.projection.name==="globe"){const E=Re(f,i,c,p,v,x);return s.invert(E,E),s.multiply$1(E,f,E),E}{const E=s.clone(f),A=s.identity([]);return A[0]=x[0],A[1]=x[1],A[4]=x[2],A[5]=x[3],s.multiply$1(E,E,A),p||s.rotateZ(E,E,-v.angle),E}}return v.glCoordMatrix}function _t(f,i,c=0){const p=[f.x,f.y,c,1];c?s.transformMat4$1(p,p,i):Ir(p,p,i);const v=p[3];return{point:new s.pointGeometry(p[0]/v,p[1]/v),signedDistanceFromCamera:v}}function vn(f,i){const c=[f[0],f[1],f[2],1];s.transformMat4$1(c,c,i);const p=c[3];return{point:new s.pointGeometry(c[0]/p,c[1]/p),signedDistanceFromCamera:p}}function on(f,i){return Math.min(.5+f/i*.5,1.5)}function ai(f,i){const c=f[0]/f[3],p=f[1]/f[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function Hn(f,i,c,p,v,x,E,A,P,R){const N=c.transform,U=p?f.textSizeData:f.iconSizeData,X=s.evaluateSizeForZoom(U,c.transform.zoom),ne=[256/c.width*2+1,256/c.height*2+1],J=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;J.clear();const W=f.lineVertexArray,de=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,ae=c.transform.width/c.transform.height;let he=!1;for(let fe=0;fe<de.length;fe++){const ye=de.get(fe);if(ye.writingMode!==s.WritingMode.vertical||he||fe!==0&&de.get(fe-1).writingMode===s.WritingMode.horizontal||(he=!0),(ye.hidden||ye.writingMode===s.WritingMode.vertical)&&!he){Zi(ye.numGlyphs,J);continue}he=!1;const ce=new s.pointGeometry(ye.tileAnchorX,ye.tileAnchorY),Ee=P?P(ce):[0,0,0],We=N.projection.projectTilePoint(ce.x,ce.y,R.canonical),it=[We.x+Ee[0],We.y+Ee[1],We.z+Ee[2]],ut=[...it,1];if(s.transformMat4$1(ut,ut,i),!ai(ut,ne)){Zi(ye.numGlyphs,J);continue}const st=on(c.transform.cameraToCenterDistance,ut[3]),Ot=s.evaluateSizeForFeature(U,X,ye),qe=E?Ot/st:Ot*st,Dt=_t(new s.pointGeometry(it[0],it[1]),v,it[2]);if(Dt.signedDistanceFromCamera<=0){Zi(ye.numGlyphs,J);continue}let Mt={};const rn=E?null:P,ft=Di(ye,qe,!1,A,i,v,x,f.glyphOffsetArray,W,J,Dt.point,ce,Mt,ae,rn,N.projection,R);he=ft.useVertical,rn&&ft.needsFlipping&&(Mt={}),(ft.notEnoughRoom||he||ft.needsFlipping&&Di(ye,qe,!0,A,i,v,x,f.glyphOffsetArray,W,J,Dt.point,ce,Mt,ae,rn,N.projection,R).notEnoughRoom)&&Zi(ye.numGlyphs,J)}p?f.text.dynamicLayoutVertexBuffer.updateData(J):f.icon.dynamicLayoutVertexBuffer.updateData(J)}function Xt(f,i,c,p,v,x,E,A,P,R,N,U,X,ne,J){const W=A.glyphStartIndex+A.numGlyphs,de=A.lineStartIndex,ae=A.lineStartIndex+A.lineLength,he=i.getoffsetX(A.glyphStartIndex),fe=i.getoffsetX(W-1),ye=ts(f*he,c,p,v,x,E,A.segment,de,ae,P,R,N,U,X,!0,ne,J);if(!ye)return null;const ce=ts(f*fe,c,p,v,x,E,A.segment,de,ae,P,R,N,U,X,!0,ne,J);return ce?{first:ye,last:ce}:null}function cr(f,i,c,p){return f.writingMode===s.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:f.writingMode===s.WritingMode.vertical?i.y<c.y?{needsFlipping:!0}:null:f.flipState!==0&&function(v,x,E){const A=(x.x-v.x)*E;return A===0||Math.abs((x.y-v.y)/A)>H}(i,c,p)?f.flipState===1?{needsFlipping:!0}:null:i.x>c.x?{needsFlipping:!0}:null}function Di(f,i,c,p,v,x,E,A,P,R,N,U,X,ne,J,W,de){const ae=i/24,he=f.lineOffsetX*ae,fe=f.lineOffsetY*ae;let ye;if(f.numGlyphs>1){const ce=f.glyphStartIndex+f.numGlyphs,Ee=f.lineStartIndex,We=f.lineStartIndex+f.lineLength,it=Xt(ae,A,he,fe,c,N,U,f,P,x,X,J,!1,W,de);if(!it)return{notEnoughRoom:!0};const ut=_t(it.first.point,E).point,st=_t(it.last.point,E).point;if(p&&!c){const Ot=cr(f,ut,st,ne);if(f.flipState=Ot&&Ot.needsFlipping?1:2,Ot)return Ot}ye=[it.first];for(let Ot=f.glyphStartIndex+1;Ot<ce-1;Ot++)ye.push(ts(ae*A.getoffsetX(Ot),he,fe,c,N,U,f.segment,Ee,We,P,x,X,J,!1,!1,W,de));ye.push(it.last)}else{if(p&&!c){const Ee=_t(U,v).point,We=f.lineStartIndex+f.segment+1,it=new s.pointGeometry(P.getx(We),P.gety(We)),ut=_t(it,v),st=cr(f,Ee,ut.signedDistanceFromCamera>0?ut.point:Nn(U,it,Ee,1,v,void 0,W,de.canonical),ne);if(f.flipState=st&&st.needsFlipping?1:2,st)return st}const ce=ts(ae*A.getoffsetX(f.glyphStartIndex),he,fe,c,N,U,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,P,x,X,J,!1,!1,W,de);if(!ce)return{notEnoughRoom:!0};ye=[ce]}for(const ce of ye)s.addDynamicAttributes(R,ce.point,ce.angle);return{}}function Do(f,i,c,p,v){const x=p.projectTilePoint(f.x,f.y,i);if(!v)return _t(x,c,x.z);const E=v(f);return _t(new s.pointGeometry(x.x+E[0],x.y+E[1]),c,x.z+E[2])}function Nn(f,i,c,p,v,x,E,A){const P=Do(f.add(f.sub(i)._unit()),A,v,E,x).point,R=c.sub(P);return c.add(R._mult(p/R.mag()))}function ts(f,i,c,p,v,x,E,A,P,R,N,U,X,ne,J,W,de){const ae=p?f-i:f+i;let he=ae>0?1:-1,fe=0;p&&(he*=-1,fe=Math.PI),he<0&&(fe+=Math.PI);let ye=he>0?A+E:A+E+1,ce=v,Ee=v,We=0,it=0;const ut=Math.abs(ae),st=[],Ot=[];let qe=x;const Dt=()=>{const tn=ye-he;return We===0?x:new s.pointGeometry(R.getx(tn),R.gety(tn))},Mt=()=>Nn(Dt(),qe,Ee,ut-We+1,N,X,W,de.canonical);for(;We+it<=ut;){if(ye+=he,ye<A||ye>=P)return null;if(Ee=ce,st.push(ce),ne&&Ot.push(qe||Dt()),ce=U[ye],ce===void 0){qe=new s.pointGeometry(R.getx(ye),R.gety(ye));const tn=Do(qe,de.canonical,N,W,X);ce=tn.signedDistanceFromCamera>0?U[ye]=tn.point:Mt()}else qe=null;We+=it,it=Ee.dist(ce)}J&&X&&(qe=qe||new s.pointGeometry(R.getx(ye),R.gety(ye)),U[ye]=ce=U[ye]===void 0?ce:Mt(),it=Ee.dist(ce));const rn=(ut-We)/it,ft=ce.sub(Ee),Qt=ft.mult(rn)._add(Ee);c&&Qt._add(ft._unit()._perp()._mult(c*he));const yn=fe+Math.atan2(ce.y-Ee.y,ce.x-Ee.x);return st.push(Qt),ne&&(qe=qe||new s.pointGeometry(R.getx(ye),R.gety(ye)),Ot.push(function(tn,nn,xn){const Bn=1-xn;return new s.pointGeometry(tn.x*Bn+nn.x*xn,tn.y*Bn+nn.y*xn)}(Ot.length>0?Ot[Ot.length-1]:qe,qe,rn))),{point:Qt,angle:yn,path:st,tilePath:Ot}}const eu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zi(f,i){for(let c=0;c<f;c++){const p=i.length;i.resize(p+4),i.float32.set(eu,3*p)}}function Ir(f,i,c){const p=i[0],v=i[1];return f[0]=c[0]*p+c[4]*v+c[12],f[1]=c[1]*p+c[5]*v+c[13],f[3]=c[3]*p+c[7]*v+c[15],f}const qr=100;class ca{constructor(i,c,p=new br(i.width+200,i.height+200,25),v=new br(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=v,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+qr,this.screenBottomBoundary=i.height+qr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=c}placeCollisionBox(i,c,p,v,x,E,A){let P=c.projectedAnchorX,R=c.projectedAnchorY,N=c.projectedAnchorZ;const U=c.elevation,X=c.tileID;if(U&&X){const ye=this.transform.projection.upVector(X.canonical,c.tileAnchorX,c.tileAnchorY),ce=this.transform.projection.upVectorScale(X.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;P+=ye[0]*U*ce,R+=ye[1]*U*ce,N+=ye[2]*U*ce}const ne=this.projectAndGetPerspectiveRatio(E,[P,R,N],c.tileID,this.transform.projection.name==="globe"||!!U||this.transform.pitch>0),J=x*ne.perspectiveRatio,W=(c.x1*i+p.x-c.padding)*J+ne.point.x,de=(c.y1*i+p.y-c.padding)*J+ne.point.y,ae=(c.x2*i+p.x+c.padding)*J+ne.point.x,he=(c.y2*i+p.y+c.padding)*J+ne.point.y,fe=ne.perspectiveRatio<=.55||ne.occluded;return!this.isInsideGrid(W,de,ae,he)||!v&&this.grid.hitTest(W,de,ae,he,A)||fe?{box:[],offscreen:!1,occluded:ne.occluded}:{box:[W,de,ae,he],offscreen:this.isOffscreen(W,de,ae,he),occluded:!1}}placeCollisionCircles(i,c,p,v,x,E,A,P,R,N,U,X,ne,J){const W=[],de=this.transform.elevation,ae=de?de.getAtTileOffsetFunc(J,this.transform.center.lat,this.transform.worldSize,this.transform.projection):Mt=>[0,0,0],he=new s.pointGeometry(c.tileAnchorX,c.tileAnchorY),fe=this.transform.projection.projectTilePoint(c.tileAnchorX,c.tileAnchorY,J.canonical),ye=ae(he),ce=[fe.x+ye[0],fe.y+ye[1],fe.z+ye[2]],Ee=this.projectAndGetPerspectiveRatio(E,[ce[0],ce[1],ce[2]],J,this.transform.projection.name==="globe"||!!de||this.transform.pitch>0),{perspectiveRatio:We}=Ee,it=(N?x/We:x*We)/s.ONE_EM,ut=_t(new s.pointGeometry(ce[0],ce[1]),A,ce[2]).point,st=Ee.signedDistanceFromCamera>0?Xt(it,v,c.lineOffsetX*it,c.lineOffsetY*it,!1,ut,he,c,p,A,{},de&&!N?ae:null,N&&!!de,this.transform.projection,J):null;let Ot=!1,qe=!1,Dt=!0;if(st&&!Ee.occluded){const Mt=.5*X*We+ne,rn=new s.pointGeometry(-100,-100),ft=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Qt=new Dr,yn=st.first,tn=st.last;let nn=[];for(let _n=yn.path.length-1;_n>=1;_n--)nn.push(yn.path[_n]);for(let _n=1;_n<tn.path.length;_n++)nn.push(tn.path[_n]);const xn=2.5*Mt;if(P){const _n=nn.map(de?(wn,ii)=>{const Fi=ae(ii<yn.path.length-1?yn.tilePath[yn.path.length-1-ii]:tn.tilePath[ii-yn.path.length+2]);return _t(wn,P,Fi[2])}:wn=>_t(wn,P));nn=_n.some(wn=>wn.signedDistanceFromCamera<=0)?[]:_n.map(wn=>wn.point)}let Bn=[];if(nn.length>0){const _n=nn[0].clone(),wn=nn[0].clone();for(let ii=1;ii<nn.length;ii++)_n.x=Math.min(_n.x,nn[ii].x),_n.y=Math.min(_n.y,nn[ii].y),wn.x=Math.max(wn.x,nn[ii].x),wn.y=Math.max(wn.y,nn[ii].y);Bn=_n.x>=rn.x&&wn.x<=ft.x&&_n.y>=rn.y&&wn.y<=ft.y?[nn]:wn.x<rn.x||_n.x>ft.x||wn.y<rn.y||_n.y>ft.y?[]:s.clipLine([nn],rn.x,rn.y,ft.x,ft.y)}for(const _n of Bn){Qt.reset(_n,.25*Mt);let wn=0;wn=Qt.length<=.5*Mt?1:Math.ceil(Qt.paddedLength/xn)+1;for(let ii=0;ii<wn;ii++){const Fi=ii/Math.max(wn-1,1),Fr=Qt.lerp(Fi),Br=Fr.x+qr,wo=Fr.y+qr;W.push(Br,wo,Mt,0);const as=Br-Mt,Xs=wo-Mt,Sa=Br+Mt,Ys=wo+Mt;if(Dt=Dt&&this.isOffscreen(as,Xs,Sa,Ys),qe=qe||this.isInsideGrid(as,Xs,Sa,Ys),!i&&this.grid.hitTestCircle(Br,wo,Mt,U)&&(Ot=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ot,occluded:!1}}}}return{circles:!R&&Ot||!qe?[]:W,offscreen:Dt,collisionDetected:Ot,occluded:Ee.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,v=1/0,x=-1/0,E=-1/0;for(const N of i){const U=new s.pointGeometry(N.x+qr,N.y+qr);p=Math.min(p,U.x),v=Math.min(v,U.y),x=Math.max(x,U.x),E=Math.max(E,U.y),c.push(U)}const A=this.grid.query(p,v,x,E).concat(this.ignoredGrid.query(p,v,x,E)),P={},R={};for(const N of A){const U=N.key;if(P[U.bucketInstanceId]===void 0&&(P[U.bucketInstanceId]={}),P[U.bucketInstanceId][U.featureIndex])continue;const X=[new s.pointGeometry(N.x1,N.y1),new s.pointGeometry(N.x2,N.y1),new s.pointGeometry(N.x2,N.y2),new s.pointGeometry(N.x1,N.y2)];s.polygonIntersectsPolygon(c,X)&&(P[U.bucketInstanceId][U.featureIndex]=!0,R[U.bucketInstanceId]===void 0&&(R[U.bucketInstanceId]=[]),R[U.bucketInstanceId].push(U.featureIndex))}return R}insertCollisionBox(i,c,p,v,x){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:x},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,v,x){const E=c?this.ignoredGrid:this.grid,A={bucketInstanceId:p,featureIndex:v,collisionGroupID:x};for(let P=0;P<i.length;P+=4)E.insertCircle(A,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,c,p,v){const x=[c[0],c[1],c[2],1];let E=!1;return c[2]||this.transform.pitch>0?(s.transformMat4$1(x,x,i),this.fogState&&p&&(E=function(A,P,R,N,U,X){const ne=X.calculateFogTileMatrix(U),J=[P,R,N];return s.transformMat4(J,J,ne),ht(A,J,X.pitch,X._fov)}(this.fogState,c[0],c[1],c[2],p.toUnwrapped(),this.transform)>.9)):Ir(x,x,i),{point:new s.pointGeometry((x[0]/x[3]+1)/2*this.transform.width+qr,(-x[1]/x[3]+1)/2*this.transform.height+qr),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/x[3]*.5,1.5),signedDistanceFromCamera:x[3],occluded:v&&x[2]>x[3]||E}}isOffscreen(i,c,p,v){return p<qr||i>=this.screenRightBoundary||v<qr||c>this.screenBottomBoundary}isInsideGrid(i,c,p,v){return p>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}class Vi{constructor(i,c,p,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Zr{constructor(i,c,p,v,x,E=!1){this.text=new Vi(i?i.text:null,c,p,x),this.icon=new Vi(i?i.icon:null,c,v,x),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yo{constructor(i,c,p,v=!1){this.text=i,this.icon=c,this.skipFade=p,this.clipped=v}}class ur{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Pl{constructor(i,c,p,v,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=x}}class wr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function ua(f,i,c,p,v){const{horizontalAlign:x,verticalAlign:E}=s.getAnchorAlignment(f),A=-(x-.5)*i,P=-(E-.5)*c,R=s.evaluateVariableOffset(f,p);return new s.pointGeometry(A+R[0]*v,P+R[1]*v)}function $s(f,i,c,p,v){const x=new s.pointGeometry(f,i);return c&&x._rotate(p?v:-v),x}class Ah{constructor(i,c,p,v,x){this.transform=i.clone(),this.collisionIndex=new ca(this.transform,x),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new wr(p),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,v){const x=p.getBucket(c),E=p.latestFeatureIndex;if(!x||!E||c.id!==x.layerIds[0])return;const A=x.layers[0].layout,P=p.collisionBoxArray,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),N=p.tileSize/s.EXTENT,U=p.tileID.toUnwrapped(),X=this.transform.calculateProjMatrix(U),ne=A.get("text-pitch-alignment")==="map",J=A.get("text-rotation-alignment")==="map";c.compileFilter();const W=c.dynamicFilter(),de=c.dynamicFilterNeedsFeature(),ae=this.transform.calculatePixelsToTileUnitsMatrix(p),he=Re(X,p.tileID.canonical,ne,J,this.transform,ae);let fe=null;if(ne){const Ee=It(X,p.tileID.canonical,ne,J,this.transform,ae);fe=s.multiply$1([],this.transform.labelPlaneMatrix,Ee)}let ye=null;W&&p.latestFeatureIndex&&(ye={unwrappedTileID:U,dynamicFilter:W,dynamicFilterNeedsFeature:de,featureIndex:p.latestFeatureIndex}),this.retainedQueryData[x.bucketInstanceId]=new Pl(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,p.tileID);const ce={bucket:x,layout:A,posMatrix:X,textLabelPlaneMatrix:he,labelToScreenMatrix:fe,clippingData:ye,scale:R,textPixelRatio:N,holdingForFade:p.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(v)for(const Ee of x.sortKeyRanges){const{sortKey:We,symbolInstanceStart:it,symbolInstanceEnd:ut}=Ee;i.push({sortKey:We,symbolInstanceStart:it,symbolInstanceEnd:ut,parameters:ce})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ce})}attemptAnchorPlacement(i,c,p,v,x,E,A,P,R,N,U,X,ne,J,W,de,ae,he){const fe=[X.textOffset0,X.textOffset1],ye=ua(i,p,v,fe,x),ce=this.collisionIndex.placeCollisionBox(x,c,$s(ye.x,ye.y,E,A,this.transform.angle),U,P,R,N.predicate);if((!de||this.collisionIndex.placeCollisionBox(J.getSymbolInstanceIconSize(he,this.transform.zoom,ne),de,$s(ye.x,ye.y,E,A,this.transform.angle),U,P,R,N.predicate).box.length!==0)&&ce.box.length>0){let Ee;return this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(Ee=this.prevPlacement.variableOffsets[X.crossTileID].anchor),this.variableOffsets[X.crossTileID]={textOffset:fe,width:p,height:v,anchor:i,textScale:x,prevAnchor:Ee},this.markUsedJustification(J,i,X,W),J.allowVerticalPlacement&&(this.markUsedOrientation(J,W,X),this.placedOrientations[X.crossTileID]=W),{shift:ye,placedGlyphBoxes:ce}}}placeLayerBucketPart(i,c,p,v){const{bucket:x,layout:E,posMatrix:A,textLabelPlaneMatrix:P,labelToScreenMatrix:R,clippingData:N,textPixelRatio:U,holdingForFade:X,collisionBoxArray:ne,partiallyEvaluatedTextSize:J,partiallyEvaluatedIconSize:W,collisionGroup:de}=i.parameters,ae=E.get("text-optional"),he=E.get("icon-optional"),fe=E.get("text-allow-overlap"),ye=E.get("icon-allow-overlap"),ce=E.get("text-rotation-alignment")==="map",Ee=E.get("text-pitch-alignment")==="map",We=E.get("icon-text-fit")!=="none",it=E.get("symbol-z-order")==="viewport-y";let ut=fe&&(ye||!x.hasIconData()||he),st=ye&&(fe||!x.hasTextData()||ae);!x.collisionArrays&&ne&&x.deserializeCollisionBoxes(ne),p&&v&&x.updateCollisionDebugBuffers(this.transform.zoom,ne);const Ot=(qe,Dt,Mt)=>{if(N){const Hi={zoom:this.transform.zoom,pitch:this.transform.pitch};let Xi=null;if(N.dynamicFilterNeedsFeature){const ui=this.retainedQueryData[x.bucketInstanceId];Xi=N.featureIndex.loadFeature({featureIndex:qe.featureIndex,bucketIndex:ui.bucketIndex,sourceLayerIndex:ui.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,N.dynamicFilter)(Hi,Xi,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new s.pointGeometry(qe.tileAnchorX,qe.tileAnchorY),this.transform.calculateDistanceTileData(N.unwrappedTileID)))return this.placements[qe.crossTileID]=new yo(!1,!1,!1,!0),void(c[qe.crossTileID]=!0)}if(c[qe.crossTileID])return;if(X)return void(this.placements[qe.crossTileID]=new yo(!1,!1,!1));let rn=!1,ft=!1,Qt=!0,yn=!1,tn=!1,nn=null,xn={box:null,offscreen:null,occluded:null},Bn={box:null,offscreen:null,occluded:null},_n=null,wn=null,ii=null,Fi=0,Fr=0,Br=0;Mt.textFeatureIndex?Fi=Mt.textFeatureIndex:qe.useRuntimeCollisionCircles&&(Fi=qe.featureIndex),Mt.verticalTextFeatureIndex&&(Fr=Mt.verticalTextFeatureIndex);const wo=Hi=>{Hi.tileID=this.retainedQueryData[x.bucketInstanceId].tileID,(this.transform.elevation||Hi.elevation)&&(Hi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[x.bucketInstanceId].tileID,Hi.tileAnchorX,Hi.tileAnchorY):0)},as=Mt.textBox;if(as){wo(as);const Hi=ui=>{let rr=s.WritingMode.horizontal;if(x.allowVerticalPlacement&&!ui&&this.prevPlacement){const Eo=this.prevPlacement.placedOrientations[qe.crossTileID];Eo&&(this.placedOrientations[qe.crossTileID]=Eo,rr=Eo,this.markUsedOrientation(x,rr,qe))}return rr},Xi=(ui,rr)=>{if(x.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const Eo of x.writingModes)if(Eo===s.WritingMode.vertical?(xn=rr(),Bn=xn):xn=ui(),xn&&xn.box&&xn.box.length)break}else xn=ui()};if(E.get("text-variable-anchor")){let ui=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]){const Bi=this.prevPlacement.variableOffsets[qe.crossTileID];ui.indexOf(Bi.anchor)>0&&(ui=ui.filter($o=>$o!==Bi.anchor),ui.unshift(Bi.anchor))}const rr=(Bi,$o,Eu)=>{const To=x.getSymbolInstanceTextSize(J,qe,this.transform.zoom,Dt),ul=(Bi.x2-Bi.x1)*To+2*Bi.padding,Zp=(Bi.y2-Bi.y1)*To+2*Bi.padding,hd=We&&!ye?$o:null;hd&&wo(hd);let uc={box:[],offscreen:!1,occluded:!1};const yg=fe?2*ui.length:ui.length;for(let Ca=0;Ca<yg;++Ca){const fd=this.attemptAnchorPlacement(ui[Ca%ui.length],Bi,ul,Zp,To,ce,Ee,U,A,de,Ca>=ui.length,qe,Dt,x,Eu,hd,J,W);if(fd&&(uc=fd.placedGlyphBoxes,uc&&uc.box&&uc.box.length)){rn=!0,nn=fd.shift;break}}return uc};Xi(()=>rr(as,Mt.iconBox,s.WritingMode.horizontal),()=>{const Bi=Mt.verticalTextBox;return Bi&&wo(Bi),x.allowVerticalPlacement&&!(xn&&xn.box&&xn.box.length)&&qe.numVerticalGlyphVertices>0&&Bi?rr(Bi,Mt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),xn&&(rn=xn.box,Qt=xn.offscreen,yn=xn.occluded);const Eo=Hi(xn&&xn.box);if(!rn&&this.prevPlacement){const Bi=this.prevPlacement.variableOffsets[qe.crossTileID];Bi&&(this.variableOffsets[qe.crossTileID]=Bi,this.markUsedJustification(x,Bi.anchor,qe,Eo))}}else{const ui=(rr,Eo)=>{const Bi=x.getSymbolInstanceTextSize(J,qe,this.transform.zoom,Dt),$o=this.collisionIndex.placeCollisionBox(Bi,rr,new s.pointGeometry(0,0),fe,U,A,de.predicate);return $o&&$o.box&&$o.box.length&&(this.markUsedOrientation(x,Eo,qe),this.placedOrientations[qe.crossTileID]=Eo),$o};Xi(()=>ui(as,s.WritingMode.horizontal),()=>{const rr=Mt.verticalTextBox;return x.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&rr?(wo(rr),ui(rr,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Hi(xn&&xn.box&&xn.box.length)}}if(_n=xn,rn=_n&&_n.box&&_n.box.length>0,Qt=_n&&_n.offscreen,yn=_n&&_n.occluded,qe.useRuntimeCollisionCircles){const Hi=x.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex>=0?qe.centerJustifiedTextSymbolIndex:qe.verticalPlacedTextSymbolIndex),Xi=s.evaluateSizeForFeature(x.textSizeData,J,Hi),ui=E.get("text-padding");wn=this.collisionIndex.placeCollisionCircles(fe,Hi,x.lineVertexArray,x.glyphOffsetArray,Xi,A,P,R,p,Ee,de.predicate,qe.collisionCircleDiameter*Xi/s.ONE_EM,ui,this.retainedQueryData[x.bucketInstanceId].tileID),rn=fe||wn.circles.length>0&&!wn.collisionDetected,Qt=Qt&&wn.offscreen,yn=wn.occluded}if(Mt.iconFeatureIndex&&(Br=Mt.iconFeatureIndex),Mt.iconBox){const Hi=Xi=>{wo(Xi);const ui=We&&nn?$s(nn.x,nn.y,ce,Ee,this.transform.angle):new s.pointGeometry(0,0),rr=x.getSymbolInstanceIconSize(W,this.transform.zoom,Dt);return this.collisionIndex.placeCollisionBox(rr,Xi,ui,ye,U,A,de.predicate)};Bn&&Bn.box&&Bn.box.length&&Mt.verticalIconBox?(ii=Hi(Mt.verticalIconBox),ft=ii.box.length>0):(ii=Hi(Mt.iconBox),ft=ii.box.length>0),Qt=Qt&&ii.offscreen,tn=ii.occluded}const Xs=ae||qe.numHorizontalGlyphVertices===0&&qe.numVerticalGlyphVertices===0,Sa=he||qe.numIconVertices===0;if(Xs||Sa?Sa?Xs||(ft=ft&&rn):rn=ft&&rn:ft=rn=ft&&rn,rn&&_n&&_n.box&&this.collisionIndex.insertCollisionBox(_n.box,E.get("text-ignore-placement"),x.bucketInstanceId,Bn&&Bn.box&&Fr?Fr:Fi,de.ID),ft&&ii&&this.collisionIndex.insertCollisionBox(ii.box,E.get("icon-ignore-placement"),x.bucketInstanceId,Br,de.ID),wn&&(rn&&this.collisionIndex.insertCollisionCircles(wn.circles,E.get("text-ignore-placement"),x.bucketInstanceId,Fi,de.ID),p)){const Hi=x.bucketInstanceId;let Xi=this.collisionCircleArrays[Hi];Xi===void 0&&(Xi=this.collisionCircleArrays[Hi]=new ur);for(let ui=0;ui<wn.circles.length;ui+=4)Xi.circles.push(wn.circles[ui+0]),Xi.circles.push(wn.circles[ui+1]),Xi.circles.push(wn.circles[ui+2]),Xi.circles.push(wn.collisionDetected?1:0)}const Ys=this.transform.projection.name!=="globe";ut=ut&&(Ys||!yn),st=st&&(Ys||!tn),this.placements[qe.crossTileID]=new yo(rn||ut,ft||st,Qt||x.justReloaded),c[qe.crossTileID]=!0};if(it){const qe=x.getSortedSymbolIndexes(this.transform.angle);for(let Dt=qe.length-1;Dt>=0;--Dt){const Mt=qe[Dt];Ot(x.symbolInstances.get(Mt),Mt,x.collisionArrays[Mt])}}else for(let qe=i.symbolInstanceStart;qe<i.symbolInstanceEnd;qe++)Ot(x.symbolInstances.get(qe),qe,x.collisionArrays[qe]);if(p&&x.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[x.bucketInstanceId];s.invert(qe.invProjMatrix,A),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(i,c,p,v){let x;x=v===s.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(c)];const E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const A of E)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=x>=0&&A!==x?0:p.crossTileID)}markUsedOrientation(i,c,p){const v=c===s.WritingMode.horizontal||c===s.WritingMode.horizontalOnly?c:0,x=c===s.WritingMode.vertical?c:0,E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const A of E)i.text.placedSymbolArray.get(A).placedOrientation=v;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},E=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(const P in this.placements){const R=this.placements[P],N=x[P];N?(this.opacities[P]=new Zr(N,v,R.text,R.icon,null,R.clipped),p=p||R.text!==N.text.placed||R.icon!==N.icon.placed):(this.opacities[P]=new Zr(null,v,R.text,R.icon,R.skipFade,R.clipped),p=p||R.text||R.icon)}for(const P in x){const R=x[P];if(!this.opacities[P]){const N=new Zr(R,v,!1,!1);N.isHidden()||(this.opacities[P]=N,p=p||R.text.placed||R.icon.placed)}}for(const P in E)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=E[P]);for(const P in A)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=A[P]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const v of c){const x=v.getBucket(i);x&&v.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,v.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,x=!!i.layers[0].dynamicFilter(),E=new Zr(null,0,!1,!1,!0),A=v.get("text-allow-overlap"),P=v.get("icon-allow-overlap"),R=v.get("text-variable-anchor"),N=v.get("text-rotation-alignment")==="map",U=v.get("text-pitch-alignment")==="map",X=v.get("icon-text-fit")!=="none",ne=new Zr(null,0,A&&(P||!i.hasIconData()||v.get("icon-optional")),P&&(A||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const J=(de,ae,he)=>{for(let fe=0;fe<ae/4;fe++)de.opacityVertexArray.emplaceBack(he)};let W=0;for(let de=0;de<i.symbolInstances.length;de++){const ae=i.symbolInstances.get(de),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:fe,crossTileID:ye}=ae;let ce=this.opacities[ye];c[ye]?ce=E:ce||(ce=ne,this.opacities[ye]=ce),c[ye]=!0;const Ee=he>0||fe>0,We=ae.numIconVertices>0,it=this.placedOrientations[ae.crossTileID],ut=it===s.WritingMode.vertical,st=it===s.WritingMode.horizontal||it===s.WritingMode.horizontalOnly;if(!Ee&&!We||ce.isHidden()||W++,Ee){const Ot=iu(ce.text);J(i.text,he,ut?Us:Ot),J(i.text,fe,st?Us:Ot);const qe=ce.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(rn=>{rn>=0&&(i.text.placedSymbolArray.get(rn).hidden=qe||ut?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=qe||st?1:0);const Dt=this.variableOffsets[ae.crossTileID];Dt&&this.markUsedJustification(i,Dt.anchor,ae,it);const Mt=this.placedOrientations[ae.crossTileID];Mt&&(this.markUsedJustification(i,"left",ae,Mt),this.markUsedOrientation(i,Mt,ae))}if(We){const Ot=iu(ce.icon);ae.placedIconSymbolIndex>=0&&(J(i.icon,ae.numIconVertices,ut?Us:Ot),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=ce.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(J(i.icon,ae.numVerticalIconVertices,st?Us:Ot),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ot=i.collisionArrays[de];if(Ot){let qe=new s.pointGeometry(0,0),Dt=!0;if(Ot.textBox||Ot.verticalTextBox){if(R){const rn=this.variableOffsets[ye];rn?(qe=ua(rn.anchor,rn.width,rn.height,rn.textOffset,rn.textScale),N&&qe._rotate(U?this.transform.angle:-this.transform.angle)):Dt=!1}x&&(Dt=!ce.clipped),Ot.textBox&&oo(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Dt||ut,qe.x,qe.y),Ot.verticalTextBox&&oo(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Dt||st,qe.x,qe.y)}const Mt=Dt&&Boolean(!st&&Ot.verticalIconBox);Ot.iconBox&&oo(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,Mt,X?qe.x:0,X?qe.y:0),Ot.verticalIconBox&&oo(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Mt,X?qe.x:0,X?qe.y:0)}}}if(i.fullyClipped=W===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=de.invProjMatrix,i.placementViewportMatrix=de.viewportMatrix,i.collisionCircleArray=de.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function oo(f,i,c,p,v){f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0)}const Sh=Math.pow(2,25),tu=Math.pow(2,24),Mr=Math.pow(2,17),Xa=Math.pow(2,16),bs=Math.pow(2,9),nu=Math.pow(2,8),Ya=Math.pow(2,1);function iu(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,c=Math.floor(127*f.opacity);return c*Sh+i*tu+c*Mr+i*Xa+c*bs+i*nu+c*Ya+i}const Us=0;class ru{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,v,x){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((A,P)=>A.sortKey-P.sortKey));this._currentPartIndex<E.length;){const A=E[this._currentPartIndex];if(c.placeLayerBucketPart(A,this._seenCrossTileIDs,p,A.symbolInstanceStart===0),this._currentPartIndex++,x())return!0}return!1}}class rd{constructor(i,c,p,v,x,E,A,P){this.placement=new Ah(i,x,E,A,P),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const v=s.exported.now(),x=()=>{const E=s.exported.now()-v;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=A)&&(!E.maxzoom||E.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new ru(E)),this._inProgressLayer.continuePlacement(p[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ol=512/s.EXTENT/2;class Ch{constructor(i,c,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let v=0;v<c.length;v++){const x=c.get(v),E=x.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,c){const p=Ol/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*s.EXTENT+i.tileAnchorX)*p),y:Math.floor((c.canonical.y*s.EXTENT+i.tileAnchorY)*p)}}findMatches(i,c,p){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const E=i.get(x);if(E.crossTileID)continue;const A=this.indexedSymbolInstances[E.key];if(!A)continue;const P=this.getScaledCoordinates(E,c);for(const R of A)if(Math.abs(R.coord.x-P.x)<=v&&Math.abs(R.coord.y-P.y)<=v&&!p[R.crossTileID]){p[R.crossTileID]=!0,E.crossTileID=R.crossTileID;break}}}}class Dl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ou{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const v=this.indexes[p],x={};for(const E in v){const A=v[E];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),x[A.tileID.key]=A}this.indexes[p]=x}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>i.overscaledZ)for(const A in E){const P=E[A];P.tileID.isChildOf(i)&&P.findMatches(c.symbolInstances,i,v)}else{const A=E[i.scaledTo(Number(x)).key];A&&A.findMatches(c.symbolInstances,i,v)}}for(let x=0;x<c.symbolInstances.length;x++){const E=c.symbolInstances.get(x);E.crossTileID||(E.crossTileID=p.generate(),v[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ch(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p in c.indexedSymbolInstances)for(const v of c.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const v=this.indexes[p];for(const x in v)i[v[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[x]),delete v[x],c=!0)}return c}}class Ka{constructor(){this.layerIndexes={},this.crossTileIDs=new Dl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p,v){let x=this.layerIndexes[i.id];x===void 0&&(x=this.layerIndexes[i.id]=new ou);let E=!1;const A={};v.name!=="globe"&&x.handleWrapJump(p);for(const P of c){const R=P.getBucket(i);R&&i.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(P.tileID,R,this.crossTileIDs)&&(E=!0),A[R.bucketInstanceId]=!0)}return x.removeStaleBuckets(A)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const ha=(f,i)=>s.emitValidationErrors(f,i&&i.filter(c=>c.identifier!=="source.canvas")),Rl=s.pick(Jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ih=s.pick(Jt,["setCenter","setZoom","setBearing","setPitch"]),su={version:8,layers:[],sources:{}},ws={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ir extends s.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new Ht(gn(),this),this.imageManager=new Ye,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,c.localFontFamily?s.LocalGlyphMode.all:c.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.lineAtlas=new s.LineAtlas(256,512),this.crossTileSymbolIndex=new Ka,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const p=this;this._rtlTextPluginCallback=ir.registerForPluginStateChange(v=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(x,E)=>{if(s.triggerPluginCompletionEvent(x),E&&E.every(A=>A))for(const A in p._sourceCaches){const P=p._sourceCaches[A],R=P.getSource().type;R!=="vector"&&R!=="geojson"||P.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const x=this.getSource(v.sourceId);if(x&&x.vectorLayerIds)for(const E in this._layers){const A=this._layers[E];A.source===x.id&&this._validateLayer(A)}})}loadURL(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const p=typeof c.validate=="boolean"?c.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,c.accessToken);const v=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(v,(x,E)=>{this._request=null,x?this.fire(new s.ErrorEvent(x)):E&&this._load(E,p)})}loadJSON(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(su,!1)}_updateLayerCount(i,c){const p=c?1:-1;i.is3D()&&(this._num3DLayers+=p),i.type==="circle"&&(this._numCircleLayers+=p),i.type==="symbol"&&(this._numSymbolLayers+=p)}_load(i,c){if(c&&ha(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i,this._updateMapProjection();for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const p=jn(this.stylesheet.layers);this._order=p.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of p)v=s.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new xe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(i){this._spriteRequest=function(c,p,v){let x,E,A;const P=s.exported.devicePixelRatio>1?"@2x":"";let R=s.getJSON(p.transformRequest(p.normalizeSpriteURL(c,P,".json"),s.ResourceType.SpriteJSON),(X,ne)=>{R=null,A||(A=X,x=ne,U())}),N=s.getImage(p.transformRequest(p.normalizeSpriteURL(c,P,".png"),s.ResourceType.SpriteImage),(X,ne)=>{N=null,A||(A=X,E=ne,U())});function U(){if(A)v(A);else if(x&&E){const X=s.exported.getImageData(E),ne={};for(const J in x){const{width:W,height:de,x:ae,y:he,sdf:fe,pixelRatio:ye,stretchX:ce,stretchY:Ee,content:We}=x[J],it=new s.RGBAImage({width:W,height:de});s.RGBAImage.copy(X,it,{x:ae,y:he},{x:0,y:0},{width:W,height:de}),ne[J]={data:it,pixelRatio:ye,sdf:fe,stretchX:ce,stretchY:Ee,content:We}}v(null,ne)}}return{cancel(){R&&(R.cancel(),R=null),N&&(N.cancel(),N=null)}}}(i,this.map._requestManager,(c,p)=>{if(this._spriteRequest=null,c)this.fire(new s.ErrorEvent(c));else if(p)for(const v in p)this.imageManager.addImage(v,p[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.getSource(i.source);if(!c)return;const p=i.sourceLayer;p&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${c.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const p of i){const v=this._layers[p];v.type!=="custom"&&c.push(v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&ws[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(v.length||x.length)&&this._updateWorkerLayers(v,x);for(const E in this._updatedSources){const A=this._updatedSources[E];A==="reload"?this._reloadSource(E):A==="clear"&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const p={};for(const v in this._sourceCaches){const x=this._sourceCaches[v];p[v]=x.used,x.used=!1}for(const v of this._order){const x=this._layers[v];if(x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)){const A=this._getLayerSourceCache(x);A&&(A.used=!0)}const E=this.map.painter;if(E){const A=x.getProgramIds();if(!A)continue;const P=x.getProgramConfiguration(i.zoom);for(const R of A)E.useProgram(R,P)}}for(const v in p){const x=this._sourceCaches[v];p[v]!==x.used&&x.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:x.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),ha(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=jn(i.layers);const c=function(v,x){if(!v)return[{command:Jt.setStyle,args:[x]}];let E=[];try{if(!L(v.version,x.version))return[{command:Jt.setStyle,args:[x]}];L(v.center,x.center)||E.push({command:Jt.setCenter,args:[x.center]}),L(v.zoom,x.zoom)||E.push({command:Jt.setZoom,args:[x.zoom]}),L(v.bearing,x.bearing)||E.push({command:Jt.setBearing,args:[x.bearing]}),L(v.pitch,x.pitch)||E.push({command:Jt.setPitch,args:[x.pitch]}),L(v.sprite,x.sprite)||E.push({command:Jt.setSprite,args:[x.sprite]}),L(v.glyphs,x.glyphs)||E.push({command:Jt.setGlyphs,args:[x.glyphs]}),L(v.transition,x.transition)||E.push({command:Jt.setTransition,args:[x.transition]}),L(v.light,x.light)||E.push({command:Jt.setLight,args:[x.light]}),L(v.fog,x.fog)||E.push({command:Jt.setFog,args:[x.fog]}),L(v.projection,x.projection)||E.push({command:Jt.setProjection,args:[x.projection]});const A={},P=[];(function(U,X,ne,J){let W;for(W in X=X||{},U=U||{})U.hasOwnProperty(W)&&(X.hasOwnProperty(W)||zn(W,ne,J));for(W in X)X.hasOwnProperty(W)&&(U.hasOwnProperty(W)?L(U[W],X[W])||(U[W].type==="geojson"&&X[W].type==="geojson"&&nr(U,X,W)?ne.push({command:Jt.setGeoJSONSourceData,args:[W,X[W].data]}):Oo(W,X,ne,J)):Yn(W,X,ne))})(v.sources,x.sources,P,A);const R=[];v.layers&&v.layers.forEach(U=>{U.source&&A[U.source]?E.push({command:Jt.removeLayer,args:[U.id]}):R.push(U)});let N=v.terrain;N&&A[N.source]&&(E.push({command:Jt.setTerrain,args:[void 0]}),N=void 0),E=E.concat(P),L(N,x.terrain)||E.push({command:Jt.setTerrain,args:[x.terrain]}),function(U,X,ne){X=X||[];const J=(U=U||[]).map(Vn),W=X.map(Vn),de=U.reduce(Ln,{}),ae=X.reduce(Ln,{}),he=J.slice(),fe=Object.create(null);let ye,ce,Ee,We,it,ut,st;for(ye=0,ce=0;ye<J.length;ye++)Ee=J[ye],ae.hasOwnProperty(Ee)?ce++:(ne.push({command:Jt.removeLayer,args:[Ee]}),he.splice(he.indexOf(Ee,ce),1));for(ye=0,ce=0;ye<W.length;ye++)Ee=W[W.length-1-ye],he[he.length-1-ye]!==Ee&&(de.hasOwnProperty(Ee)?(ne.push({command:Jt.removeLayer,args:[Ee]}),he.splice(he.lastIndexOf(Ee,he.length-ce),1)):ce++,ut=he[he.length-ye],ne.push({command:Jt.addLayer,args:[ae[Ee],ut]}),he.splice(he.length-ye,0,Ee),fe[Ee]=!0);for(ye=0;ye<W.length;ye++)if(Ee=W[ye],We=de[Ee],it=ae[Ee],!fe[Ee]&&!L(We,it))if(L(We.source,it.source)&&L(We["source-layer"],it["source-layer"])&&L(We.type,it.type)){for(st in Rt(We.layout,it.layout,ne,Ee,null,Jt.setLayoutProperty),Rt(We.paint,it.paint,ne,Ee,null,Jt.setPaintProperty),L(We.filter,it.filter)||ne.push({command:Jt.setFilter,args:[Ee,it.filter]}),L(We.minzoom,it.minzoom)&&L(We.maxzoom,it.maxzoom)||ne.push({command:Jt.setLayerZoomRange,args:[Ee,it.minzoom,it.maxzoom]}),We)We.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?Rt(We[st],it[st],ne,Ee,st.slice(6),Jt.setPaintProperty):L(We[st],it[st])||ne.push({command:Jt.setLayerProperty,args:[Ee,st,it[st]]}));for(st in it)it.hasOwnProperty(st)&&!We.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?Rt(We[st],it[st],ne,Ee,st.slice(6),Jt.setPaintProperty):L(We[st],it[st])||ne.push({command:Jt.setLayerProperty,args:[Ee,st,it[st]]}))}else ne.push({command:Jt.removeLayer,args:[Ee]}),ut=he[he.lastIndexOf(Ee)+1],ne.push({command:Jt.addLayer,args:[it,ut]})}(R,x.layers,E)}catch(A){console.warn("Unable to compute style diff:",A),E=[{command:Jt.setStyle,args:[x]}]}return E}(this.serialize(),i).filter(v=>!(v.command in Ih));if(c.length===0)return!1;const p=c.filter(v=>!(v.command in Rl));if(p.length>0)throw new Error(`Unimplemented: ${p.map(v=>v.command).join(", ")}.`);return c.forEach(v=>{v.command!=="setTransition"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,c){return this.getImage(i)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,c),this._afterImageUpdated(i),this)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,c,p={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.validateSource,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=Fe(i,c,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:v.serialize(),sourceId:i}));const x=E=>{const A=(E?"symbol:":"other:")+i,P=this._sourceCaches[A]=new s.SourceCache(A,v,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[i]=P,P.style=this,P.onAdd(this.map)};x(!1),c.type!=="vector"&&c.type!=="geojson"||x(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const c=this.getSource(i);if(!c)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this._getSourceCaches(i);for(const v of p)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,c){this._checkLoaded(),this.getSource(i).setData(c),this._changed=!0}getSource(i){const c=this._getSourceCache(i);return c&&c.getSource()}addLayer(i,c,p={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let x;if(i.type==="custom"){if(ha(this,s.validateCustomStyleLayer(i)))return;x=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=s.clone$1(i),i=s.extend(i,{source:v})),this._validate(s.validateLayer,`layers.${v}`,i,{arrayIndex:-1},p))return;x=s.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize(),this._updateLayerCount(x,!0)}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=x;const A=this._getLayerSourceCache(x);if(this._removedLayers[v]&&x.source&&A&&x.type!=="custom"){const P=this._removedLayers[v];delete this._removedLayers[v],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",A.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const c in this._layers)if(this._layers[c].type===i)return!0;return!1}setLayerZoomRange(i,c,p){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===p||(c!=null&&(v.minzoom=c),p!=null&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,c,p={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!L(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.validateFilter,`layers.${v.id}.filter`,c,{layerType:v.type},p)||(v.filter=s.clone$1(c),this._updateLayer(v)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const c=this.getLayer(i);return c&&s.clone$1(c.filter)}setLayoutProperty(i,c,p,v={}){this._checkLoaded();const x=this.getLayer(i);x?L(x.getLayoutProperty(c),p)||(x.setLayoutProperty(c,p,v),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,c,p,v={}){this._checkLoaded();const x=this.getLayer(i);x?L(x.getPaintProperty(c),p)||(x.setPaintProperty(c,p,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,c){const p=this.getLayer(i);return p&&p.getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,v=i.sourceLayer,x=this.getSource(p);if(!x)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const E=x.type;if(E==="geojson"&&v)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!v)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(p);for(const P of A)P.setFeatureState(v,i.id,c)}removeFeatureState(i,c){this._checkLoaded();const p=i.source,v=this.getSource(p);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const x=v.type,E=x==="vector"?i.sourceLayer:void 0;if(x==="vector"&&!E)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(p);for(const P of A)P.removeFeatureState(E,i.id,c)}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,v=this.getSource(c);if(v){if(v.type!=="vector"||p)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(p,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const c in this._sourceCaches){const p=this._sourceCaches[c].getSource();i[p.id]||(i[p.id]=p.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const c=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&c&&c.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",c.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",p={},v=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(c(A)){p[A]=E;for(const P of i){const R=P[A];if(R)for(const N of R)v.push(N)}}}v.sort((E,A)=>A.intersectionZ-E.intersectionZ);const x=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(c(A))for(let P=v.length-1;P>=0;P--){const R=v[P].feature;if(p[R.layer.id]<E)break;x.push(R),v.pop()}else for(const P of i){const R=P[A];if(R)for(const N of R)x.push(N.feature)}}return x}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const R=this._layers[P];if(!R)return this.fire(new s.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];v[R.source]=!0}}const x=[];c.availableImages=this._availableImages;const E=c&&c.layers?c.layers.some(P=>{const R=this.getLayer(P);return R&&R.is3D()}):this.has3DLayers(),A=Ue.createFromScreenPoints(i,p);for(const P in this._sourceCaches){const R=this._sourceCaches[P].getSource().id;c.layers&&!v[R]||x.push(Ge(this._sourceCaches[P],this._layers,this._serializedLayers,A,c,p,E,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(P,R,N,U,X,ne,J){const W={},de=ne.queryRenderedSymbols(U),ae=[];for(const he of Object.keys(de).map(Number))ae.push(J[he]);ae.sort(Pt);for(const he of ae){const fe=he.featureIndex.lookupSymbolFeatures(de[he.bucketInstanceId],R,he.bucketIndex,he.sourceLayerIndex,X.filter,X.layers,X.availableImages,P);for(const ye in fe){const ce=W[ye]=W[ye]||[],Ee=fe[ye];Ee.sort((We,it)=>{const ut=he.featureSortOrder;if(ut){const st=ut.indexOf(We.featureIndex);return ut.indexOf(it.featureIndex)-st}return it.featureIndex-We.featureIndex});for(const We of Ee)ce.push(We)}}for(const he in W)W[he].forEach(fe=>{const ye=fe.feature,ce=N(P[he]).getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=ce});return W}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",c.filter,null,c);const p=this._getSourceCaches(i);let v=[];for(const x of p)v=v.concat(gt(x,c));return v}addSourceType(i,c,p){return ir.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(ir.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const E in i)if(!L(i[E],p[E])){v=!0;break}if(!v)return;const x={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,c=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(c===1){if(typeof i.source=="object"){const p="terrain-dem-src";this.addSource(p,i.source),i=s.clone$1(i),i=s.extend(i,{source:p})}if(this._validate(s.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode)this._createTerrain(i,c);else{const p=this.terrain,v=p.get();for(const x in i)if(!L(i[x],v[x])){p.set(i),this.stylesheet.terrain=i;const E={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};p.updateTransitions(E);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const c=this.fog=new hn(i,this.map.transform);this.stylesheet.fog=i;const p={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(p)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,p=c.get();for(const v in i)if(!L(i[v],p[v])){c.set(i),this.stylesheet.fog=i;const x={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(x);break}}else this._createFog(i);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(p=>this.isLayerDraped(this._layers[p])),c=this._order.filter(p=>!this.isLayerDraped(this._layers[p]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...c)}_createTerrain(i,c){const p=this.terrain=new Qe(i,c);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};p.updateTransitions(v)}_force3DLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="symbol"&&this._updateLayer(c)}}_validate(i,c,p,v,x={}){return(!x||x.validate!==!1)&&ha(this,i.call(s.validateStyle,s.extend({key:c,style:this.serialize(),value:p,styleSpec:s.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const c=this._getSourceCaches(i);for(const p of c)p.clearTiles()}_reloadSource(i){const c=this._getSourceCaches(i);for(const p of c)p.resume(),p.reload()}_updateSources(i){for(const c in this._sourceCaches)this._sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const c=this._sourceCaches[i];c.resume(),c.reload()}}_updatePlacement(i,c,p,v,x=!1){let E=!1,A=!1;const P={};for(const R of this._order){const N=this._layers[R];if(N.type!=="symbol")continue;if(!P[N.source]){const X=this._getLayerSourceCache(N);if(!X)continue;P[N.source]=X.getRenderableIds(!0).map(ne=>X.getTileByID(ne)).sort((ne,J)=>J.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(J.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(N,P[N.source],i.center.lng,i.projection);E=E||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),x=x||this._layerOrderChanged||p===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(x||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new rd(i,this._order,x,c,p,v,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),A=!0),E&&this.pauseablePlacement.placement.setStale()),A||E)for(const R of this._order){const N=this._layers[R];N.type==="symbol"&&this.placement.updateLayerOpacities(N,P[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const v=x=>{x&&x.setDependencies(c.tileID.key,c.type,c.icons)};v(this._otherSourceCaches[c.source]),v(this._symbolSourceCaches[c.source])}getGlyphs(i,c,p){this.glyphManager.getGlyphs(c.stacks,p)}getResource(i,c,p){return s.makeRequest(c,p)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const c=[];return this._otherSourceCaches[i]&&c.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&c.push(this._symbolSourceCaches[i]),c}_isSourceCacheLoaded(i){const c=this._getSourceCaches(i);return c.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):c.every(p=>p.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ir.getSourceType=function(f){return Ve[f]},ir.setSourceType=function(f,i){Ve[f]=i},ir.registerForPluginStateChange=s.registerForPluginStateChange;var ns=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}
#endif`,Vs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let js={},Es={};js=mn("",`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
float unpack_depth(vec4 rgba_depth)
{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,!0),Es=mn(`#ifdef FOG
uniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,`#ifdef FOG
uniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,!0);const zl=mn(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef TERRAIN
highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#endif`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ja=ns;var Qa={background:mn(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:mn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:mn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)
view_scale*=a_scale;
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
extrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:mn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:mn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:mn(`varying vec4 v_color;void main() {vec4 color=v_color;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
vec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:mn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
vec4 out_color=texture2D(u_gradient_image,v_uv);
#else
vec4 out_color=color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#ifdef RENDER_LINE_GRADIENT
attribute vec3 a_packed;
#else
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_GRADIENT
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:mn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:mn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
}`),terrainDepth:mn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:mn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs),skyboxGradient:mn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs),skyboxCapture:mn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:mn(`uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
vec4 globe=u_globe_matrix*vec4(globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}`),globeAtmosphere:mn(`uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;varying highp vec3 v_ray_dir;void main() {highp vec3 dir=normalize(v_ray_dir);highp vec3 closest_point=abs(dot(u_globe_pos,dir))*dir;float norm_dist_from_center=length(closest_point-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 1.0)
discard;float t=clamp(1.0-sqrt(norm_dist_from_center-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}`,"attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;varying highp vec3 v_ray_dir;void main() {v_ray_dir=mix(mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);gl_Position=vec4(a_pos,1.0);}")};function mn(f,i,c){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,x=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E=f.match(v),A=i.match(v),P=ns.match(v);let R=A?A.concat(E):E;c||(js.staticUniforms&&(R=js.staticUniforms.concat(R)),Es.staticUniforms&&(R=Es.staticUniforms.concat(R))),R&&(R=R.concat(P));const N={};return{fragmentSource:f=f.replace(p,(U,X,ne,J,W)=>(N[W]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${ne} ${J} ${W};
#else
uniform ${ne} ${J} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${ne} ${J} ${W} = u_${W};
#endif
`)),vertexSource:i=i.replace(p,(U,X,ne,J,W)=>{const de=J==="float"?"vec2":"vec4",ae=W.match(/color/)?"color":de;return N[W]?X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${ne} ${de} a_${W};
varying ${ne} ${J} ${W};
#else
uniform ${ne} ${J} u_${W};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${ne} ${J} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ae}(a_${W}, u_${W}_t);
#else
    ${ne} ${J} ${W} = u_${W};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${ne} ${de} a_${W};
#else
uniform ${ne} ${J} u_${W};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${ne} ${J} ${W} = a_${W};
#else
    ${ne} ${J} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${ne} ${J} ${W} = unpack_mix_${ae}(a_${W}, u_${W}_t);
#else
    ${ne} ${J} ${W} = u_${W};
#endif
`}),staticAttributes:x,staticUniforms:R}}class Nl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,v,x,E,A,P){this.context=i;let R=this.boundPaintVertexBuffers.length!==v.length;for(let N=0;!R&&N<v.length;N++)this.boundPaintVertexBuffers[N]!==v[N]&&(R=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===p&&!R&&this.boundIndexBuffer===x&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===A&&this.boundDynamicVertexBuffer2===P?(i.bindVertexArrayOES.set(this.vao),A&&A.bind(),x&&x.dynamicDraw&&x.bind(),P&&P.bind()):this.freshBind(c,p,v,x,E,A,P)}freshBind(i,c,p,v,x,E,A){let P;const R=i.numAttributes,N=this.context,U=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=A;else{P=N.currentNumAttributes||0;for(let X=R;X<P;X++)U.disableVertexAttribArray(X)}c.enableAttributes(U,i);for(const X of p)X.enableAttributes(U,i);E&&E.enableAttributes(U,i),A&&A.enableAttributes(U,i),c.bind(),c.setVertexAttribPointers(U,i,x);for(const X of p)X.bind(),X.setVertexAttribPointers(U,i,x);E&&(E.bind(),E.setVertexAttribPointers(U,i,x)),v&&v.bind(),A&&(A.bind(),A.setVertexAttribPointers(U,i,x)),N.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Mh(f,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new s.MercatorCoordinate(0,p/c).toLngLat().lat,new s.MercatorCoordinate(0,(p+1)/c).toLngLat().lat]}function Rr(f,i,c,p,v,x,E){const A=f.context,P=A.gl,R=c.fbo;if(!R)return;f.prepareDrawTile();const N=f.useProgram("hillshade");A.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,R.colorAttachment.get());const U=((W,de,ae,he)=>{const fe=ae.paint.get("hillshade-shadow-color"),ye=ae.paint.get("hillshade-highlight-color"),ce=ae.paint.get("hillshade-accent-color");let Ee=ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ee-=W.transform.angle);const We=!W.options.moving;return{u_matrix:he||W.transform.calculateProjMatrix(de.tileID.toUnwrapped(),We),u_image:0,u_latrange:Mh(0,de.tileID),u_light:[ae.paint.get("hillshade-exaggeration"),Ee],u_shadow:fe,u_highlight:ye,u_accent:ce}})(f,c,p,f.terrain?i.projMatrix:null);f.prepareDrawProgram(A,N,i.toUnwrapped());const{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:J}=f.getTileBoundsBuffers(c);N.draw(A,P.TRIANGLES,v,x,E,s.CullFaceMode.disabled,U,p.id,X,ne,J)}function Fl(f,i,c){if(!i.needsDEMTextureUpload)return;const p=f.context,v=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(c.stride);const x=c.getPixels();i.demTexture?i.demTexture.update(x,{premultiply:!1}):i.demTexture=new s.Texture(p,x,v.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Bl(f,i,c,p,v,x){const E=f.context,A=E.gl;if(!i.dem)return;const P=i.dem;if(E.activeTexture.set(A.TEXTURE1),Fl(f,i,P),!i.demTexture)return;i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const R=P.dim;E.activeTexture.set(A.TEXTURE0);let N=i.fbo;if(!N){const J=new s.Texture(E,{width:R,height:R,data:null},A.RGBA);J.bind(A.LINEAR,A.CLAMP_TO_EDGE),N=i.fbo=E.createFramebuffer(R,R,!0),N.colorAttachment.set(J.texture)}E.bindFramebuffer.set(N.framebuffer),E.viewport.set([0,0,R,R]);const{tileBoundsBuffer:U,tileBoundsIndexBuffer:X,tileBoundsSegments:ne}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(E,A.TRIANGLES,p,v,x,s.CullFaceMode.disabled,((J,W)=>{const de=W.stride,ae=s.create();return s.ortho(ae,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ae,ae,[0,-s.EXTENT,0]),{u_matrix:ae,u_image:1,u_dimension:[de,de],u_zoom:J.overscaledZ,u_unpack:W.unpackVector}})(i.tileID,P),c.id,U,X,ne),i.needsHillshadePrepare=!1}const el=(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image0:new s.Uniform1i(f,i.u_image0),u_skirt_height:new s.Uniform1f(f,i.u_skirt_height)}),kh=(f,i)=>({u_matrix:f,u_image0:0,u_skirt_height:i}),Lh=(f,i,c,p,v,x)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:i,u_merc_matrix:c,u_zoom_transition:p,u_merc_center:v,u_image0:0,u_grid_matrix:x?Float32Array.from(x):new Float32Array(9)});function tl(f,i){return f!=null&&i!=null&&!(!f.hasData()||!i.hasData())&&f.demTexture!=null&&i.demTexture!=null&&f.tileID.key!==i.tileID.key}const is=new class{constructor(){this.operations={}}newMorphing(f,i,c,p,v){if(f in this.operations){const x=this.operations[f];x.to.tileID.key!==c.tileID.key&&(x.queued=c)}else this.operations[f]={startTime:p,phase:0,duration:v,from:i,to:c,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const c=this.operations[i];for(c.phase=(f-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},Hs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function au(f,i){const c=1<<f.z;return!i&&(f.x===0||f.x===c-1)||f.y===0||f.y===c-1}const $l=f=>({u_matrix:f});function Ul(f,i,c,p,v){if(v>0){const x=s.exported.now(),E=(x-f.timeAdded)/v,A=i?(x-i.timeAdded)/v:-1,P=c.getSource(),R=p.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),N=!i||Math.abs(i.tileID.overscaledZ-R)>Math.abs(f.tileID.overscaledZ-R),U=N&&f.refreshedUponExpiration?1:s.clamp(N?E:1-A,0,1);return f.refreshedUponExpiration&&E>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}const Ph=2*s.mercatorZfromAltitude(1,0)*s.GLOBE_RADIUS*Math.PI;class fa extends s.SourceCache{constructor(i){const c={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new Ht(gn(),null),v=Fe("mock-dem",c,p,i.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,c){i.state="loaded",c(null)}}class da extends s.SourceCache{constructor(i){const c=Fe("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new Ht(gn(),null),i.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,c,p){if(i.freezeTileCoverage)return;this.transform=i;const v=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,E)=>{if(x[E.key]="",!this._tiles[E.key]){const A=new s.Tile(E,this._source.tileSize*E.overscaleFactor(),i.tileZoom);A.state="loaded",this._tiles[E.key]=A}return x},{});for(const x in this._tiles)x in v||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(i){const c=this.proxyCachedFBO[i];if(c!==void 0){const p=Object.values(c);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Vl extends s.OverscaledTileID{constructor(i,c,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=c,this.projMatrix=p}}class zr extends s.Elevation{constructor(i,c){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,v,x]=function(P){const R=new s.StructArrayLayout4i8,N=new s.StructArrayLayout3ui6,U=131;R.reserve(17161),N.reserve(33800);const X=s.EXTENT/128,ne=s.EXTENT+X/2,J=ne+X;for(let de=-X;de<J;de+=X)for(let ae=-X;ae<J;ae+=X){const he=ae<0||ae>ne||de<0||de>ne?24575:0,fe=s.clamp(Math.round(ae),0,s.EXTENT),ye=s.clamp(Math.round(de),0,s.EXTENT);R.emplaceBack(fe+he,ye,fe,ye)}const W=(de,ae)=>{const he=ae*U+de;N.emplaceBack(he+1,he,he+U),N.emplaceBack(he+U,he+U+1,he+1)};for(let de=1;de<129;de++)for(let ae=1;ae<129;ae++)W(ae,de);return[0,129].forEach(de=>{for(let ae=0;ae<130;ae++)W(ae,de),W(de,ae)}),[R,N,32768]}(),E=i.context;this.gridBuffer=E.createVertexBuffer(p,s.boundsAttributes.members),this.gridIndexBuffer=E.createIndexBuffer(v),this.gridSegments=s.SegmentVector.simpleSegment(0,0,p.length,v.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,p.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new da(c.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,0,s.EXTENT,0,s.EXTENT,0,1);const A=E.gl;this._overlapStencilMode=new s.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new fa(c.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,c,p){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const v=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const x=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const E=this.getScaledDemTileSize();this.sourceCache.update(c,E,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,x(),this._initializing=!0),x(),c.updateElevation(!p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=p._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(p.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=c.getIds().map(P=>{const R=c.getTileByID(P).tileID;return R.projMatrix=p.calculateProjMatrix(R.toUnwrapped()),R});(function(P,R){const N=R.transform.pointCoordinate(R.transform.getCameraPoint()),U=new s.pointGeometry(N.x,N.y);P.sort((X,ne)=>{if(ne.overscaledZ-X.overscaledZ)return ne.overscaledZ-X.overscaledZ;const J=new s.pointGeometry(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),W=new s.pointGeometry(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),de=U.mult(1<<X.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(J)-de.distSqr(W)})})(v,this.painter),this._previousZoom=p.zoom;const x=this.proxyToSource||{};this.proxyToSource={},v.forEach(P=>{this.proxyToSource[P.key]={}}),this.terrainTileForTile={};const E=this._style._sourceCaches;for(const P in E){const R=E[P];if(!R.used||(R!==this.sourceCache&&this.resetTileLookupCache(R.id),this._setupProxiedCoordsForOrtho(R,i[P],x),R.usedForTerrain))continue;const N=i[P];R.getSource().reparseOverscaled&&this._assignTerrainTiles(N)}this.proxiedCoords[c.id]=v.map(P=>new Vl(P,P.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const A={};this._visibleDemTiles=[];for(const P of this.proxyCoords){const R=this.terrainTileForTile[P.key];if(!R)continue;const N=R.tileID.key;N in A||(this._visibleDemTiles.push(R),A[N]=N)}}_assignTerrainTiles(i){this._initializing||i.forEach(c=>{if(this.terrainTileForTile[c.key])return;const p=this._findTileCoveringTileID(c,this.sourceCache);p&&(this.terrainTileForTile[c.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,c=i.gl;for(const p in this.terrainTileForTile){const v=this.terrainTileForTile[p],x=v.dem;!x||v.demTexture&&!v.needsDEMTextureUpload||(i.activeTexture.set(c.TEXTURE1),Fl(this.painter,v,x))}}_prepareDemTileUniforms(i,c,p,v){if(!c||c.demTexture==null)return!1;const x=i.tileID.canonical,E=Math.pow(2,c.tileID.canonical.z-x.z),A=v||"";return p[`u_dem_tl${A}`]=[x.x*E%1,x.y*E%1],p[`u_dem_scale${A}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,c=i.gl;if(!this._emptyDepthBufferTexture){const p=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(i,p,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const c=this._visibleDemTiles.reduce((p,v)=>{if(!v.dem)return p;const x=v.dem.tree.minimums[0];return x>0&&i++,p+x},0);return i?c/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,c=i.gl;i.activeTexture.set(c.TEXTURE2);const p=this._getLoadedAreaMinimum(),v=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(p,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(v,{premultiply:!1}):x=this._emptyDEMTexture=new s.Texture(i,v,c.RGBA,{premultiply:!1}),x}setupElevationDraw(i,c,p){const v=this.painter.context,x=v.gl,E=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var A;E.u_dem_size=this.sourceCache.getSource().tileSize,E.u_exaggeration=this.exaggeration();const P=this.painter.transform,R=P.projection,N=i.tileID.canonical;E.u_tile_tl_up=R.upVector(N,0,0),E.u_tile_tr_up=R.upVector(N,s.EXTENT,0),E.u_tile_br_up=R.upVector(N,s.EXTENT,s.EXTENT),E.u_tile_bl_up=R.upVector(N,0,s.EXTENT),E.u_tile_up_scale=p&&p.useDenormalizedUpVectorScale?Ph:R.upVectorScale(N,P.center.lat,P.worldSize).metersToTile;let U=null,X=null,ne=1;if(p&&p.morphing&&this._useVertexMorphing){const J=p.morphing.srcDemTile,W=p.morphing.dstDemTile;ne=p.morphing.phase,J&&W&&(this._prepareDemTileUniforms(i,J,E,"_prev")&&(X=J),this._prepareDemTileUniforms(i,W,E)&&(U=W))}if(X&&U?(v.activeTexture.set(x.TEXTURE2),U.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),v.activeTexture.set(x.TEXTURE4),X.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),E.u_dem_lerp=ne):(U=this.terrainTileForTile[i.tileID.key],v.activeTexture.set(x.TEXTURE2),(this._prepareDemTileUniforms(i,U,E)?U.demTexture:this.emptyDEMTexture).bind(x.NEAREST,x.CLAMP_TO_EDGE)),v.activeTexture.set(x.TEXTURE3),p&&p.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),p&&p.useMeterToDem&&U){const J=(1<<U.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=J}p&&p.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),c.setTerrainUniformValues(v,E)}renderToBackBuffer(i){const c=this.painter,p=this.painter.context;i.length!==0&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),this.renderingToTexture=!1,function(v,x,E,A,P){if(v.transform.projection.name==="globe")(function(R,N,U,X,ne){const J=R.context,W=J.gl;let de,ae;const he=R.options.showTerrainWireframe?2:0,fe=(st,Ot)=>{if(ae===st)return;const qe=[Hs[st],"PROJECTION_GLOBE_VIEW"];Ot&&qe.push(Hs[he]),de=R.useProgram("globeRaster",null,qe),ae=st},ye=R.colorModeForRenderPass(),ce=new s.DepthMode(W.LEQUAL,s.DepthMode.ReadWrite,R.depthRangeFor3D);is.update(ne);const Ee=R.transform,We=s.calculateGlobeMercatorMatrix(Ee),it=[s.mercatorXfromLng(Ee.center.lng),s.mercatorYfromLat(Ee.center.lat)],ut=R.globeSharedBuffers;if((he?[!1,!0]:[!1]).forEach(st=>{ae=-1;const Ot=st?W.LINES:W.TRIANGLES;for(const qe of X){const Dt=U.getTile(qe),Mt=s.StencilMode.disabled,rn=N.prevTerrainTileForTile[qe.key],ft=N.terrainTileForTile[qe.key];tl(rn,ft)&&is.newMorphing(qe.key,rn,ft,ne,250),J.activeTexture.set(W.TEXTURE0),Dt.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const Qt=is.getMorphValuesForProxy(qe.key),yn=Qt?1:0,tn={useDenormalizedUpVectorScale:!0};Qt&&s.extend$1(tn,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:s.easeCubicInOut(Qt.phase)}});const nn=Float32Array.from(Ee.globeMatrix),xn=s.globeTileLatLngCorners(qe.canonical),Bn=s.getGridMatrix(qe.canonical,xn),_n=Lh(Ee.projMatrix,nn,We,s.globeToMercatorTransition(Ee.zoom),it,Bn);if(fe(yn,st),N.setupElevationDraw(Dt,de,tn),R.prepareDrawProgram(J,de,qe.toUnwrapped()),ut){const[wn,ii,Fi]=st?ut.getWirefameBuffers(R.context):ut.getGridBuffers();de.draw(J,Ot,ce,Mt,ye,s.CullFaceMode.backCCW,_n,"globe_raster",wn,ii,Fi)}}}),ut){de=R.useProgram("globeRaster",null,["GLOBE_POLES","PROJECTION_GLOBE_VIEW"]);for(const st of X){const{x:Ot,y:qe,z:Dt}=st.canonical,Mt=qe===0,rn=qe===(1<<Dt)-1,[ft,Qt,yn,tn]=ut.getPoleBuffers(Dt);if(tn&&(Mt||rn)){const nn=U.getTile(st);J.activeTexture.set(W.TEXTURE0),nn.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);let xn=s.globePoleMatrixForTile(Dt,Ot,Ee);const Bn=(_n,wn)=>_n.draw(J,W.TRIANGLES,ce,s.StencilMode.disabled,ye,s.CullFaceMode.disabled,Lh(Ee.projMatrix,xn,xn,0,it),"globe_pole_raster",wn,yn,tn);N.setupElevationDraw(nn,de,{}),R.prepareDrawProgram(J,de,st.toUnwrapped()),Mt&&Bn(de,ft),rn&&(xn=s.scale(s.create(),xn,[1,-1,1]),Bn(de,Qt))}}}})(v,x,E,A,P);else{const R=v.context,N=R.gl;let U,X;const ne=v.options.showTerrainWireframe?2:0,J=(fe,ye)=>{if(X===fe)return;const ce=[Hs[fe]];ye&&ce.push(Hs[ne]),U=v.useProgram("terrainRaster",null,ce),X=fe},W=v.colorModeForRenderPass(),de=new s.DepthMode(N.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D);is.update(P);const ae=v.transform,he=6*Math.pow(1.5,22-ae.zoom)*x.exaggeration();(ne?[!1,!0]:[!1]).forEach(fe=>{X=-1;const ye=fe?N.LINES:N.TRIANGLES,[ce,Ee]=fe?x.getWirefameBuffer():[x.gridIndexBuffer,x.gridSegments];for(const We of A){const it=E.getTile(We),ut=s.StencilMode.disabled,st=x.prevTerrainTileForTile[We.key],Ot=x.terrainTileForTile[We.key];tl(st,Ot)&&is.newMorphing(We.key,st,Ot,P,250),R.activeTexture.set(N.TEXTURE0),it.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);const qe=is.getMorphValuesForProxy(We.key),Dt=qe?1:0;let Mt;qe&&(Mt={morphing:{srcDemTile:qe.from,dstDemTile:qe.to,phase:s.easeCubicInOut(qe.phase)}});const rn=kh(We.projMatrix,au(We.canonical,ae.renderWorldCopies)?he/10:he);J(Dt,fe),x.setupElevationDraw(it,U,Mt),v.prepareDrawProgram(R,U,We.toUnwrapped()),U.draw(R,ye,de,ut,W,s.CullFaceMode.backCCW,rn,"terrain_raster",x.gridBuffer,ce,Ee)}})}}(c,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const c=this.painter,p=this.painter.context,v=this.proxySourceCache,x=this.proxiedCoords[v.id],E=this._drapedRenderBatches.shift(),A=[],P=c.style.order;let R=0;for(const N of x){const U=v.getTileByID(N.proxyTileKey),X=v.proxyCachedFBO[N.key]?v.proxyCachedFBO[N.key][i]:void 0,ne=X!==void 0?v.renderCache[X]:this.pool[R++],J=X!==void 0;if(U.texture=ne.tex,J&&!ne.dirty){A.push(U.tileID);continue}let W;p.bindFramebuffer.set(ne.fb.framebuffer),this.renderedToTile=!1,ne.dirty&&(p.clear({color:s.Color.transparent,stencil:0}),ne.dirty=!1);for(let de=E.start;de<=E.end;++de){const ae=c.style._layers[P[de]];if(ae.isHidden(c.transform.zoom))continue;const he=c.style._getLayerSourceCache(ae),fe=he?this.proxyToSource[N.key][he.id]:[N];if(!fe)continue;const ye=fe;p.viewport.set([0,0,ne.fb.width,ne.fb.height]),W!==(he?he.id:null)&&(this._setupStencil(ne,fe,ae,he),W=he?he.id:null),c.renderLayer(c,he,ae,ye)}this.renderedToTile?(ne.dirty=!0,A.push(U.tileID)):J||--R,R===5&&(R=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),E.end+1}postRender(){}renderCacheEfficiency(i){const c=i.order.length;if(c===0)return{efficiency:100};let p,v=0,x=0,E=!1;for(let A=0;A<c;++A){const P=i._layers[i.order[A]];this._style.isLayerDraped(P)?(E&&++v,++x):E||(E=!0,p=P.id)}return x===0?{efficiency:100}:{efficiency:100*(1-v/x),firstUndrapedLayer:p}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{i=Math.min(i,c.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,c,p){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const E=x.tileID,A=Math.pow(2,E.overscaledZ),{x:P,y:R}=E.canonical,N=P/A,U=(P+1)/A,X=R/A,ne=(R+1)/A;return{minx:N,miny:X,maxx:U,maxy:ne,t:x.dem.tree.raycastRoot(N,X,U,ne,i,c,p),tile:x}});v.sort((x,E)=>(x.t!==null?x.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const x of v){if(x.t==null)return null;const E=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,i,c,p);if(E!=null)return E}return null}_createFBO(){const i=this.painter.context,c=i.gl,p=this.drapeBufferSize;i.activeTexture.set(c.TEXTURE0);const v=new s.Texture(i,{width:p[0],height:p[1],data:null},c.RGBA);v.bind(c.LINEAR,c.CLAMP_TO_EDGE);const x=i.createFramebuffer(p[0],p[1],!1);return x.colorAttachment.set(v.texture),x.depthAttachment=new Wr(i,x.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:x,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const c=this._style._layers[i],p=c.isHidden(this.painter.transform.zoom),v=c.getCrossfadeParameters(),x=!!v&&v.t!==1,E=c.hasTransition();return c.type!=="custom"&&!p&&(x||E)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c]._source instanceof j){i=!0;break}if(i)for(let c=0;c<this._style.order.length;++c){const p=this._style._layers[this._style.order[c]],v=p.isHidden(this.painter.transform.zoom),x=this._style._getLayerSourceCache(p);if(p.type!=="raster"||v||!x)continue;const E=p.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const P=this.proxyToSource[A.key][x.id];if(P)for(const R of P){const N=Ul(x.getTile(R),x.findLoadedParent(R,0),x,this.painter.transform,E);(N.opacity!==1||N.mix!==0)&&this._clearRenderCacheForTile(x.id,R)}}}}_setupDrapedRenderBatches(){const i=this._style.order,c=i.length;if(c===0)return;const p=[];let v,x=0,E=this._style._layers[i[x]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++x<c;)E=this._style._layers[i[x]];for(;x<c;++x){const A=this._style._layers[i[x]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?v===void 0&&(v=x):v!==void 0&&(p.push({start:v,end:x-1}),v=void 0))}v!==void 0&&p.push({start:v,end:x-1}),this._drapedRenderBatches=p}_setupRenderCache(i){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const E=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let A=0;A<E.length;++A){const P=Object.values(E[A]);c.renderCachePool.push(...P)}}return}this._clearRasterFadeFromRenderCache();const p=this.proxyCoords,v=this._tilesDirty;for(let E=p.length-1;E>=0;E--){const A=p[E];if(c.getTileByID(A.key),c.proxyCachedFBO[A.key]!==void 0){const P=i[A.key],R=this.proxyToSource[A.key];let N=0;for(const U in R){const X=R[U],ne=P[U];if(!ne||ne.length!==X.length||X.some((J,W)=>J!==ne[W]||v[U]&&v[U].hasOwnProperty(J.key))){N=-1;break}++N}for(const U in c.proxyCachedFBO[A.key])c.renderCache[c.proxyCachedFBO[A.key][U]].dirty=N<0||N!==Object.values(P).length}}const x=[...this._drapedRenderBatches];x.sort((E,A)=>A.end-A.start-(E.end-E.start));for(const E of x)for(const A of p){if(c.proxyCachedFBO[A.key])continue;let P=c.renderCachePool.pop();P===void 0&&c.renderCache.length<50&&(P=c.renderCache.length,c.renderCache.push(this._createFBO())),P!==void 0&&(c.proxyCachedFBO[A.key]={},c.proxyCachedFBO[A.key][E.start]=P,c.renderCache[P].dirty=!0)}this._tilesDirty={}}_setupStencil(i,c,p,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,E=x.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let A;if(p.isTileClipped())A=c.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs.get(i.key)||0),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,c){const p=this.painter,v=this.painter.context,x=v.gl;p._tileClippingMaskIDs.clear(),v.setColorMode(s.ColorMode.disabled),v.setDepthMode(s.DepthMode.disabled);const E=p.useProgram("clippingMask");for(const A of i){const P=--c;p._tileClippingMaskIDs.set(A.key,P),E.draw(v,x.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:x.ALWAYS,mask:0},P,255,x.KEEP,x.KEEP,x.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,$l(A.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const c=this.painter.transform;if(i.x<0||i.x>c.width||i.y<0||i.y>c.height)return null;const p=[i.x,i.y,1,1];s.transformMat4$1(p,p,c.pixelMatrixInverse),s.scale$1(p,p,1/p[3]),p[0]/=c.worldSize,p[1]/=c.worldSize;const v=c._camera.position,x=s.mercatorZfromAltitude(1,c.center.lat),E=[v[0],v[1],v[2]/x,0],A=s.subtract([],p.slice(0,3),E);s.normalize(A,A);const P=this.raycast(E,A,this._exaggeration);return P!==null&&P?(s.scaleAndAdd(E,E,A,P),E[3]=E[2],E[2]*=x,E):null}drawDepth(){const i=this.painter,c=i.context,p=this.proxySourceCache,v=Math.ceil(i.width),x=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===x||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=c.gl,A=c.createFramebuffer(v,x,!0);c.activeTexture.set(E.TEXTURE0);const P=new s.Texture(c,{width:v,height:x,data:null},E.RGBA);P.bind(E.NEAREST,E.CLAMP_TO_EDGE),A.colorAttachment.set(P.texture);const R=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,v,x);A.depthAttachment.set(R),this._depthFBO=A,this._depthTexture=P}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,v,x]),function(E,A,P,R){if(E.transform.projection.name==="globe")return;const N=E.context,U=N.gl;N.clear({depth:1});const X=E.useProgram("terrainDepth"),ne=new s.DepthMode(U.LESS,s.DepthMode.ReadWrite,E.depthRangeFor3D);for(const J of R){const W=P.getTile(J),de=kh(J.projMatrix,0);A.setupElevationDraw(W,X),X.draw(N,U.TRIANGLES,ne,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,de,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(i,this,p,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,c,p){if(i.getSource()instanceof Se)return this._setupProxiedCoordsForImageSource(i,c,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const v=this.proxiedCoords[i.id]=[],x=this.proxyCoords;for(let A=0;A<x.length;A++){const P=x[A],R=this._findTileCoveringTileID(P,i);if(R){const N=this._createProxiedId(P,R,p[P.key]&&p[P.key][i.id]);v.push(N),this.proxyToSource[P.key][i.id]=[N]}}let E=!1;for(let A=0;A<c.length;A++){const P=i.getTile(c[A]);if(!P||!P.hasData())continue;const R=this._findTileCoveringTileID(P.tileID,this.proxySourceCache);if(R&&R.tileID.canonical.z!==P.tileID.canonical.z){const N=this.proxyToSource[R.tileID.key][i.id],U=this._createProxiedId(R.tileID,P,p[R.tileID.key]&&p[R.tileID.key][i.id]);N?N.splice(N.length-1,0,U):this.proxyToSource[R.tileID.key][i.id]=[U],v.push(U),E=!0}}this._sourceTilesOverlap[i.id]=E}_setupProxiedCoordsForImageSource(i,c,p){if(!i.getSource().loaded())return;const v=this.proxiedCoords[i.id]=[],x=this.proxyCoords,E=i.getSource(),A=new s.pointGeometry(E.tileID.x,E.tileID.y)._div(1<<E.tileID.z),P=E.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((N,U)=>(N.min.x=Math.min(N.min.x,U.x-A.x),N.min.y=Math.min(N.min.y,U.y-A.y),N.max.x=Math.max(N.max.x,U.x-A.x),N.max.y=Math.max(N.max.y,U.y-A.y),N),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),R=(N,U)=>{const X=N.wrap+N.canonical.x/(1<<N.canonical.z),ne=N.canonical.y/(1<<N.canonical.z),J=s.EXTENT/(1<<N.canonical.z),W=U.wrap+U.canonical.x/(1<<U.canonical.z),de=U.canonical.y/(1<<U.canonical.z);return X+J<W+P.min.x||X>W+P.max.x||ne+J<de+P.min.y||ne>de+P.max.y};for(let N=0;N<x.length;N++){const U=x[N];for(let X=0;X<c.length;X++){const ne=i.getTile(c[X]);if(!ne||!ne.hasData()||R(U,ne.tileID))continue;const J=this._createProxiedId(U,ne,p[U.key]&&p[U.key][i.id]),W=this.proxyToSource[U.key][i.id];W?W.push(J):this.proxyToSource[U.key][i.id]=[J],v.push(J)}}}_createProxiedId(i,c,p){let v=this.orthoMatrix;if(p){const x=p.find(E=>E.key===c.tileID.key);if(x)return x}if(c.tileID.key!==i.key){const x=i.canonical.z-c.tileID.canonical.z;let E,A,P;v=s.create();const R=c.tileID.wrap-i.wrap<<i.overscaledZ;x>0?(E=s.EXTENT>>x,A=E*((c.tileID.canonical.x<<x)-i.canonical.x+R),P=E*((c.tileID.canonical.y<<x)-i.canonical.y)):(E=s.EXTENT<<-x,A=s.EXTENT*(c.tileID.canonical.x-(i.canonical.x+R<<-x)),P=s.EXTENT*(c.tileID.canonical.y-(i.canonical.y<<-x))),s.ortho(v,0,E,0,E,0,1),s.translate(v,v,[A,P,0])}return new Vl(c.tileID,i.key,v)}_findTileCoveringTileID(i,c){let p=c.getTile(i);if(p&&p.hasData())return p;const v=this._findCoveringTileCache[c.id],x=v[i.key];if(p=x?c.getTileByID(x):null,p&&p.hasData()||x===null)return p;let E=p?p.tileID:i,A=E.overscaledZ;const P=c.getSource().minzoom,R=[];if(!x){const U=c.getSource().maxzoom;if(i.canonical.z>=U){const X=i.canonical.z-U;c.getSource().reparseOverscaled?(A=Math.max(i.canonical.z+2,c.transform.tileZoom),E=new s.OverscaledTileID(A,i.wrap,U,i.canonical.x>>X,i.canonical.y>>X)):X!==0&&(A=U,E=new s.OverscaledTileID(A,i.wrap,U,i.canonical.x>>X,i.canonical.y>>X))}E.key!==i.key&&(R.push(E.key),p=c.getTile(E))}const N=U=>{R.forEach(X=>{v[X]=U}),R.length=0};for(A-=1;A>=P&&(!p||!p.hasData());A--){p&&N(p.tileID.key);const U=E.calculateScaledKey(A);if(p=c.getTileByID(U),p&&p.hasData())break;const X=v[U];if(X===null)break;X===void 0?R.push(U):p=c.getTileByID(X)}return N(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,c){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(c){let p=0;const v=new s.StructArrayLayout2ui4,x=131;for(let E=1;E<129;E++){for(let A=1;A<129;A++)p=E*x+A,v.emplaceBack(p,p+1),v.emplaceBack(p,p+x),v.emplaceBack(p+1,p+x),E===128&&v.emplaceBack(p+x,p+x+1);v.emplaceBack(p+1,p+1+x)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function jl(f){const i=[];for(let c=0;c<f.length;c++){if(f[c]===null)continue;const p=f[c].split(" ");i.push(p.pop())}return i}class pa{static cacheKey(i,c,p){let v=`${i}${p?p.cacheKey:""}`;for(const x of c)v+=`/${x}`;return v}constructor(i,c,p,v,x,E){const A=i.gl;this.program=A.createProgram();const P=jl(p.staticAttributes),R=v?v.getBinderAttributes():[],N=P.concat(R),U=p.staticUniforms?jl(p.staticUniforms):[],X=v?v.getBinderUniforms():[],ne=U.concat(X),J=[];for(const ce of ne)J.indexOf(ce)<0&&J.push(ce);let W=v?v.defines():[];W=W.concat(E.map(ce=>`#define ${ce}`));const de=W.concat(`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ja,zl.fragmentSource,Es.fragmentSource,p.fragmentSource).join(`
`),ae=W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ja,zl.vertexSource,Es.vertexSource,js.vertexSource,p.vertexSource).join(`
`),he=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(he,de),A.compileShader(he),A.attachShader(this.program,he);const fe=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(fe,ae),A.compileShader(fe),A.attachShader(this.program,fe),this.attributes={};const ye={};this.numAttributes=N.length;for(let ce=0;ce<this.numAttributes;ce++)N[ce]&&(A.bindAttribLocation(this.program,ce,N[ce]),this.attributes[N[ce]]=ce);A.linkProgram(this.program),A.deleteShader(fe),A.deleteShader(he);for(let ce=0;ce<J.length;ce++){const Ee=J[ce];if(Ee&&!ye[Ee]){const We=A.getUniformLocation(this.program,Ee);We&&(ye[Ee]=We)}}this.fixedUniforms=x(i,ye),this.binderUniforms=v?v.getUniforms(i,ye):[],E.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=((ce,Ee)=>({u_dem:new s.Uniform1i(ce,Ee.u_dem),u_dem_prev:new s.Uniform1i(ce,Ee.u_dem_prev),u_dem_unpack:new s.Uniform4f(ce,Ee.u_dem_unpack),u_dem_tl:new s.Uniform2f(ce,Ee.u_dem_tl),u_dem_scale:new s.Uniform1f(ce,Ee.u_dem_scale),u_dem_tl_prev:new s.Uniform2f(ce,Ee.u_dem_tl_prev),u_dem_scale_prev:new s.Uniform1f(ce,Ee.u_dem_scale_prev),u_dem_size:new s.Uniform1f(ce,Ee.u_dem_size),u_dem_lerp:new s.Uniform1f(ce,Ee.u_dem_lerp),u_exaggeration:new s.Uniform1f(ce,Ee.u_exaggeration),u_depth:new s.Uniform1i(ce,Ee.u_depth),u_depth_size_inv:new s.Uniform2f(ce,Ee.u_depth_size_inv),u_meter_to_dem:new s.Uniform1f(ce,Ee.u_meter_to_dem),u_label_plane_matrix_inv:new s.UniformMatrix4f(ce,Ee.u_label_plane_matrix_inv),u_tile_tl_up:new s.Uniform3f(ce,Ee.u_tile_tl_up),u_tile_tr_up:new s.Uniform3f(ce,Ee.u_tile_tr_up),u_tile_br_up:new s.Uniform3f(ce,Ee.u_tile_br_up),u_tile_bl_up:new s.Uniform3f(ce,Ee.u_tile_bl_up),u_tile_up_scale:new s.Uniform1f(ce,Ee.u_tile_up_scale)}))(i,ye)),E.indexOf("FOG")!==-1&&(this.fogUniforms=((ce,Ee)=>({u_fog_matrix:new s.UniformMatrix4f(ce,Ee.u_fog_matrix),u_fog_range:new s.Uniform2f(ce,Ee.u_fog_range),u_fog_color:new s.Uniform4f(ce,Ee.u_fog_color),u_fog_horizon_blend:new s.Uniform1f(ce,Ee.u_fog_horizon_blend),u_fog_temporal_offset:new s.Uniform1f(ce,Ee.u_fog_temporal_offset)}))(i,ye))}setTerrainUniformValues(i,c){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)p[v].set(c[v])}}setFogUniformValues(i,c){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)p[v].location&&p[v].set(c[v])}}draw(i,c,p,v,x,E,A,P,R,N,U,X,ne,J,W,de){const ae=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(v),i.setColorMode(x),i.setCullFace(E);for(const fe of Object.keys(this.fixedUniforms))this.fixedUniforms[fe].set(A[fe]);J&&J.setUniforms(i,this.binderUniforms,X,{zoom:ne});const he={[ae.LINES]:2,[ae.TRIANGLES]:3,[ae.LINE_STRIP]:1}[c];for(const fe of U.get()){const ye=fe.vaos||(fe.vaos={});(ye[P]||(ye[P]=new Nl)).bind(i,this,R,J?J.getPaintVertexBuffers():[],N,fe.vertexOffset,W,de),ae.drawElements(c,fe.primitiveLength*he,ae.UNSIGNED_SHORT,fe.primitiveOffset*he*2)}}}function ma(f,i,c){const p=1/dn(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,E=x*(c.tileID.canonical.x+c.tileID.wrap*v),A=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[E>>16,A>>16],u_pixel_coord_lower:[65535&E,65535&A]}}const Hl=s.create(),nl=(f,i,c,p,v,x,E,A,P)=>{const R=i.style.light,N=R.properties.get("position"),U=[N.x,N.y,N.z],X=s.create$1();R.properties.get("anchor")==="viewport"&&(s.fromRotation(X,-i.transform.angle),s.transformMat3(U,U,X));const ne=R.properties.get("color"),J=i.transform,W={u_matrix:f,u_lightpos:U,u_lightintensity:R.properties.get("intensity"),u_lightcolor:[ne.r,ne.g,ne.b],u_vertical_gradient:+c,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Hl,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return J.projection.name==="globe"&&(W.u_tile_id=[v.canonical.x,v.canonical.y,1<<v.canonical.z],W.u_zoom_transition=E,W.u_inv_rot_matrix=P,W.u_merc_center=A,W.u_up_dir=J.projection.upVector(new s.CanonicalTileID(0,0,0),A[0]*s.EXTENT,A[1]*s.EXTENT),W.u_height_lift=x),W},il=(f,i,c,p,v,x,E,A,P,R,N)=>{const U=nl(f,i,c,p,v,A,P,R,N),X={u_height_factor:-Math.pow(2,v.overscaledZ)/E.tileSize/8};return s.extend(U,ma(x,i,E),X)},rl=f=>({u_matrix:f}),ol=(f,i,c,p)=>s.extend(rl(f),ma(c,i,p)),sl=(f,i)=>({u_matrix:f,u_world:i}),Gl=(f,i,c,p,v)=>s.extend(ol(f,i,c,p),{u_world:v}),Ts=s.create(),Gs=(f,i,c,p,v,x)=>{const E=f.transform,A=E.projection.name==="globe";let P;if(x.paint.get("circle-pitch-alignment")==="map")if(A){const N=s.globePixelsToTileUnits(E.zoom,i.canonical);P=Float32Array.from([N,0,0,N])}else P=E.calculatePixelsToTileUnitsMatrix(c);else P=new Float32Array([E.pixelsToGLUnits[0],0,0,E.pixelsToGLUnits[1]]);const R={u_camera_to_center_distance:E.cameraToCenterDistance,u_matrix:f.translatePosMatrix(i.projMatrix,c,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:Ts,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return A&&(R.u_inv_rot_matrix=p,R.u_merc_center=v,R.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],R.u_zoom_transition=s.globeToMercatorTransition(E.zoom),R.u_up_dir=E.projection.upVector(i.canonical,v[0],v[1])),R},Oh=f=>{const i=[];return f.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},od=(f,i,c)=>{const p=s.EXTENT/c.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/p,i.pixelsToGLUnits[1]/p]}},lu=(f,i,c=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:c}),Dh=s.create(),Rh=(f,i,c,p,v,x,E)=>{const A=f.transform,P=A.projection.name==="globe",R=P?s.globePixelsToTileUnits(A.zoom,i.canonical):dn(c,1,x),N={u_matrix:i.projMatrix,u_extrude_scale:R,u_intensity:E,u_inv_rot_matrix:Dh,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return P&&(N.u_inv_rot_matrix=p,N.u_merc_center=v,N.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],N.u_zoom_transition=s.globeToMercatorTransition(A.zoom),N.u_up_dir=A.projection.upVector(i.canonical,v[0],v[1])),N},As=(f,i,c,p,v,x,E)=>{const A=f.transform,P=A.calculatePixelsToTileUnitsMatrix(i),R={u_matrix:Ws(f,i,c,v),u_pixels_to_tile_units:P,u_device_pixel_ratio:E,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(uu(c)){const N=Wl(i,f.transform);R.u_texsize=i.lineAtlasTexture.size,R.u_scale=[N,p.fromScale,p.toScale],R.u_mix=p.t}return R},cu=(f,i,c,p,v,x)=>{const E=f.transform,A=Wl(i,E);return{u_matrix:Ws(f,i,c,v),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:E.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:x,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Wl(f,i){return 1/dn(f,1,i.tileZoom)}function Ws(f,i,c,p){return f.translatePosMatrix(p||i.tileID.projMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function uu(f){const i=f.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const hu=(f,i,c,p,v,x)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:c,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(A=v.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(E=v.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:ql(v.paint.get("raster-hue-rotate")),u_perspective_transform:x};var E,A};function ql(f){f*=Math.PI/180;const i=Math.sin(f),c=Math.cos(f);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ss=s.create(),fu=(f,i,c,p,v,x,E,A,P,R,N,U,X,ne)=>{const J=v.transform,W={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_rotate_symbol:+c,u_aspect_ratio:J.width/J.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:A,u_is_text:+P,u_pitch_with_map:+p,u_texsize:R,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ss,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ss};return J.projection.name==="globe"&&(W.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],W.u_zoom_transition=U,W.u_inv_rot_matrix=ne,W.u_merc_center=X,W.u_camera_forward=J._camera.forward(),W.u_ecef_origin=s.globeECEFOrigin(J.globeMatrix,N.toUnwrapped()),W.u_tile_matrix=Float32Array.from(J.globeMatrix)),W},qs=(f,i,c,p,v,x,E,A,P,R,N,U,X,ne,J)=>{const{cameraToCenterDistance:W,_pitch:de}=v.transform;return s.extend(fu(f,i,c,p,v,x,E,A,P,R,U,X,ne,J),{u_gamma_scale:p?W*Math.cos(v.terrain?0:de):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+N})},_a=(f,i,c,p,v,x,E,A,P,R,N,U,X,ne)=>s.extend(qs(f,i,c,p,v,x,E,A,!0,P,!0,N,U,X,ne),{u_texsize_icon:R,u_texture_icon:1}),zh=(f,i,c)=>({u_matrix:f,u_opacity:i,u_color:c}),ga=(f,i,c,p,v,x)=>s.extend(function(E,A,P,R){const N=P.imageManager.getPattern(E.from.toString()),U=P.imageManager.getPattern(E.to.toString()),{width:X,height:ne}=P.imageManager.getPixelSize(),J=Math.pow(2,R.tileID.overscaledZ),W=R.tileSize*Math.pow(2,P.transform.tileZoom)/J,de=W*(R.tileID.canonical.x+R.tileID.wrap*J),ae=W*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,ne],u_mix:A.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/dn(R,1,P.transform.tileZoom),u_pixel_coord_upper:[de>>16,ae>>16],u_pixel_coord_lower:[65535&de,65535&ae]}}(p,x,c,v),{u_matrix:f,u_opacity:i}),Jn={fillExtrusion:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_lightpos:new s.Uniform3f(f,i.u_lightpos),u_lightintensity:new s.Uniform1f(f,i.u_lightintensity),u_lightcolor:new s.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(f,i.u_vertical_gradient),u_opacity:new s.Uniform1f(f,i.u_opacity),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_up_dir:new s.Uniform3f(f,i.u_up_dir),u_height_lift:new s.Uniform1f(f,i.u_height_lift)}),fillExtrusionPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_lightpos:new s.Uniform3f(f,i.u_lightpos),u_lightintensity:new s.Uniform1f(f,i.u_lightintensity),u_lightcolor:new s.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(f,i.u_height_factor),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_up_dir:new s.Uniform3f(f,i.u_up_dir),u_height_lift:new s.Uniform1f(f,i.u_height_lift),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade),u_opacity:new s.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_world:new s.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_world:new s.Uniform2f(f,i.u_world),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new s.UniformMatrix2f(f,i.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_up_dir:new s.Uniform3f(f,i.u_up_dir)}),collisionBox:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new s.Uniform2f(f,i.u_extrude_scale)}),collisionCircle:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new s.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new s.UniformColor(f,i.u_color),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_overlay:new s.Uniform1i(f,i.u_overlay),u_overlay_scale:new s.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new s.Uniform1f(f,i.u_extrude_scale),u_intensity:new s.Uniform1f(f,i.u_intensity),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_up_dir:new s.Uniform3f(f,i.u_up_dir)}),heatmapTexture:(f,i)=>({u_image:new s.Uniform1i(f,i.u_image),u_color_ramp:new s.Uniform1i(f,i.u_color_ramp),u_opacity:new s.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_latrange:new s.Uniform2f(f,i.u_latrange),u_light:new s.Uniform2f(f,i.u_light),u_shadow:new s.UniformColor(f,i.u_shadow),u_highlight:new s.UniformColor(f,i.u_highlight),u_accent:new s.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_dimension:new s.Uniform2f(f,i.u_dimension),u_zoom:new s.Uniform1f(f,i.u_zoom),u_unpack:new s.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_pixels_to_tile_units:new s.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(f,i.u_units_to_pixels),u_dash_image:new s.Uniform1i(f,i.u_dash_image),u_gradient_image:new s.Uniform1i(f,i.u_gradient_image),u_image_height:new s.Uniform1f(f,i.u_image_height),u_texsize:new s.Uniform2f(f,i.u_texsize),u_scale:new s.Uniform3f(f,i.u_scale),u_mix:new s.Uniform1f(f,i.u_mix),u_alpha_discard_threshold:new s.Uniform1f(f,i.u_alpha_discard_threshold)}),linePattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixels_to_tile_units:new s.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_image:new s.Uniform1i(f,i.u_image),u_units_to_pixels:new s.Uniform2f(f,i.u_units_to_pixels),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade),u_alpha_discard_threshold:new s.Uniform1f(f,i.u_alpha_discard_threshold)}),raster:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new s.Uniform2f(f,i.u_tl_parent),u_scale_parent:new s.Uniform1f(f,i.u_scale_parent),u_fade_t:new s.Uniform1f(f,i.u_fade_t),u_opacity:new s.Uniform1f(f,i.u_opacity),u_image0:new s.Uniform1i(f,i.u_image0),u_image1:new s.Uniform1i(f,i.u_image1),u_brightness_low:new s.Uniform1f(f,i.u_brightness_low),u_brightness_high:new s.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(f,i.u_spin_weights),u_perspective_transform:new s.Uniform2f(f,i.u_perspective_transform)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_camera_forward:new s.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(f,i.u_tile_matrix),u_ecef_origin:new s.Uniform3f(f,i.u_ecef_origin),u_texture:new s.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_texture:new s.Uniform1i(f,i.u_texture),u_gamma_scale:new s.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_camera_forward:new s.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(f,i.u_tile_matrix),u_ecef_origin:new s.Uniform3f(f,i.u_ecef_origin),u_is_halo:new s.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_texsize_icon:new s.Uniform2f(f,i.u_texsize_icon),u_texture:new s.Uniform1i(f,i.u_texture),u_texture_icon:new s.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new s.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_opacity:new s.Uniform1f(f,i.u_opacity),u_color:new s.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_opacity:new s.Uniform1f(f,i.u_opacity),u_image:new s.Uniform1i(f,i.u_image),u_pattern_tl_a:new s.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(f,i.u_pattern_br_b),u_texsize:new s.Uniform2f(f,i.u_texsize),u_mix:new s.Uniform1f(f,i.u_mix),u_pattern_size_a:new s.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(f,i.u_scale_a),u_scale_b:new s.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(f,i.u_tile_units_to_pixels)}),terrainRaster:el,terrainDepth:el,skybox:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_sun_direction:new s.Uniform3f(f,i.u_sun_direction),u_cubemap:new s.Uniform1i(f,i.u_cubemap),u_opacity:new s.Uniform1f(f,i.u_opacity),u_temporal_offset:new s.Uniform1f(f,i.u_temporal_offset)}),skyboxGradient:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_color_ramp:new s.Uniform1i(f,i.u_color_ramp),u_center_direction:new s.Uniform3f(f,i.u_center_direction),u_radius:new s.Uniform1f(f,i.u_radius),u_opacity:new s.Uniform1f(f,i.u_opacity),u_temporal_offset:new s.Uniform1f(f,i.u_temporal_offset)}),skyboxCapture:(f,i)=>({u_matrix_3f:new s.UniformMatrix3f(f,i.u_matrix_3f),u_sun_direction:new s.Uniform3f(f,i.u_sun_direction),u_sun_intensity:new s.Uniform1f(f,i.u_sun_intensity),u_color_tint_r:new s.Uniform4f(f,i.u_color_tint_r),u_color_tint_m:new s.Uniform4f(f,i.u_color_tint_m),u_luminance:new s.Uniform1f(f,i.u_luminance)}),globeRaster:(f,i)=>({u_proj_matrix:new s.UniformMatrix4f(f,i.u_proj_matrix),u_globe_matrix:new s.UniformMatrix4f(f,i.u_globe_matrix),u_merc_matrix:new s.UniformMatrix4f(f,i.u_merc_matrix),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_image0:new s.Uniform1i(f,i.u_image0),u_grid_matrix:new s.UniformMatrix3f(f,i.u_grid_matrix)}),globeAtmosphere:(f,i)=>({u_frustum_tl:new s.Uniform3f(f,i.u_frustum_tl),u_frustum_tr:new s.Uniform3f(f,i.u_frustum_tr),u_frustum_br:new s.Uniform3f(f,i.u_frustum_br),u_frustum_bl:new s.Uniform3f(f,i.u_frustum_bl),u_globe_pos:new s.Uniform3f(f,i.u_globe_pos),u_globe_radius:new s.Uniform1f(f,i.u_globe_radius),u_opacity:new s.Uniform1f(f,i.u_opacity),u_fadeout_range:new s.Uniform1f(f,i.u_fadeout_range),u_start_color:new s.Uniform3f(f,i.u_start_color),u_end_color:new s.Uniform3f(f,i.u_end_color)})};let vo;function Zl(f,i,c,p,v,x,E){const A=f.context,P=A.gl,R=f.useProgram("collisionBox"),N=[];let U=0,X=0;for(let fe=0;fe<p.length;fe++){const ye=p[fe],ce=i.getTile(ye),Ee=ce.getBucket(c);if(!Ee)continue;let We=ye.projMatrix;v[0]===0&&v[1]===0||(We=f.translatePosMatrix(ye.projMatrix,ce,v,x));const it=E?Ee.textCollisionBox:Ee.iconCollisionBox,ut=Ee.collisionCircleArray;if(ut.length>0){const st=s.create(),Ot=We;s.mul(st,Ee.placementInvProjMatrix,f.transform.glCoordMatrix),s.mul(st,st,Ee.placementViewportMatrix),N.push({circleArray:ut,circleOffset:X,transform:Ot,invTransform:st}),U+=ut.length/4,X=U}it&&(f.terrain&&f.terrain.setupElevationDraw(ce,R),R.draw(A,P.LINES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,od(We,f.transform,ce),c.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,f.transform.zoom,null,it.collisionVertexBuffer,it.collisionVertexBufferExt))}if(!E||!N.length)return;const ne=f.useProgram("collisionCircle"),J=new s.StructArrayLayout2f1f2i16;J.resize(4*U),J._trim();let W=0;for(const fe of N)for(let ye=0;ye<fe.circleArray.length/4;ye++){const ce=4*ye,Ee=fe.circleArray[ce+0],We=fe.circleArray[ce+1],it=fe.circleArray[ce+2],ut=fe.circleArray[ce+3];J.emplace(W++,Ee,We,it,ut,0),J.emplace(W++,Ee,We,it,ut,1),J.emplace(W++,Ee,We,it,ut,2),J.emplace(W++,Ee,We,it,ut,3)}(!vo||vo.length<2*U)&&(vo=function(fe){const ye=2*fe,ce=new s.StructArrayLayout3ui6;ce.resize(ye),ce._trim();for(let Ee=0;Ee<ye;Ee++){const We=6*Ee;ce.uint16[We+0]=4*Ee+0,ce.uint16[We+1]=4*Ee+1,ce.uint16[We+2]=4*Ee+2,ce.uint16[We+3]=4*Ee+2,ce.uint16[We+4]=4*Ee+3,ce.uint16[We+5]=4*Ee+0}return ce}(U));const de=A.createIndexBuffer(vo,!0),ae=A.createVertexBuffer(J,s.collisionCircleLayout.members,!0);for(const fe of N){const ye={u_matrix:fe.transform,u_inv_matrix:fe.invTransform,u_camera_to_center_distance:(he=f.transform).cameraToCenterDistance,u_viewport_size:[he.width,he.height]};ne.draw(A,P.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,ye,c.id,ae,de,s.SegmentVector.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,f.transform.zoom,null,null,null)}var he;ae.destroy(),de.destroy()}const Xl=s.create();function ya(f,i,c,p,v,x){const{horizontalAlign:E,verticalAlign:A}=s.getAnchorAlignment(f),P=-(E-.5)*i,R=-(A-.5)*c,N=s.evaluateVariableOffset(f,p);return new s.pointGeometry((P/v+N[0])*x,(R/v+N[1])*x)}function Nh(f,i,c,p,v,x,E,A,P,R,N,U){const X=f.text.placedSymbolArray,ne=f.text.dynamicLayoutVertexArray,J=f.icon.dynamicLayoutVertexArray,W={},de=A.projMatrix,ae=x.elevation,he=U.upVectorScale(A.canonical,x.center.lat,x.worldSize);ne.clear();for(let fe=0;fe<X.length;fe++){const ye=X.get(fe),ce=f.allowVerticalPlacement&&!ye.placedOrientation,Ee=ye.hidden||!ye.crossTileID||ce?null:p[ye.crossTileID];if(Ee){const We=new s.pointGeometry(ye.tileAnchorX,ye.tileAnchorY),it=U.upVector(A.canonical,We.x,We.y),ut=ae?ae.getAtTileOffset(A,We.x,We.y):0,st=vn([ye.projectedAnchorX+ut*it[0]*he.metersToTile,ye.projectedAnchorY+ut*it[1]*he.metersToTile,ye.projectedAnchorZ+ut*it[2]*he.metersToTile],c?de:E),Ot=on(x.cameraToCenterDistance,st.signedDistanceFromCamera);let qe=v.evaluateSizeForFeature(f.textSizeData,R,ye)*Ot/s.ONE_EM;c&&(qe*=f.tilePixelRatio/P);const{width:Dt,height:Mt,anchor:rn,textOffset:ft,textScale:Qt}=Ee,yn=ya(rn,Dt,Mt,ft,Qt,qe),tn=c?_t(We.add(yn),E,ut*he.metersToLabelSpace).point:st.point.add(i?yn.rotate(-x.angle):yn),nn=f.allowVerticalPlacement&&ye.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let xn=0;xn<ye.numGlyphs;xn++)s.addDynamicAttributes(ne,tn,nn);N&&ye.associatedIconIndex>=0&&(W[ye.associatedIconIndex]={shiftedAnchor:tn,angle:nn})}else Zi(ye.numGlyphs,ne)}if(N){J.clear();const fe=f.icon.placedSymbolArray;for(let ye=0;ye<fe.length;ye++){const ce=fe.get(ye);if(ce.hidden)Zi(ce.numGlyphs,J);else{const Ee=W[ye];if(Ee)for(let We=0;We<ce.numGlyphs;We++)s.addDynamicAttributes(J,Ee.shiftedAnchor,Ee.angle);else Zi(ce.numGlyphs,J)}}f.icon.dynamicLayoutVertexBuffer.updateData(J)}f.text.dynamicLayoutVertexBuffer.updateData(ne)}function Yl(f,i,c){return c.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Kl(f,i,c,p,v,x,E,A,P,R,N,U){const X=f.context,ne=X.gl,J=f.transform,W=A==="map",de=P==="map",ae=W&&c.layout.get("symbol-placement")!=="point",he=W&&!de&&!ae,fe=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ye=!1;const ce=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),Ee=[s.mercatorXfromLng(J.center.lng),s.mercatorYfromLat(J.center.lat)],We=c.layout.get("text-variable-anchor"),it=J.projection.name==="globe",ut=it?s.globeToMercatorTransition(J.zoom):0,st=[],Ot=[];f.terrain&&de&&Ot.push("PITCH_WITH_MAP_TERRAIN"),it&&Ot.push("PROJECTION_GLOBE_VIEW");for(const qe of p){const Dt=i.getTile(qe),Mt=Dt.getBucket(c);if(!Mt||Mt.projection!==J.projection.name)continue;const rn=v?Mt.text:Mt.icon;if(!rn||Mt.fullyClipped||!rn.segments.get().length)continue;const ft=rn.programConfigurations.get(c.id),Qt=v||Mt.sdfIcons,yn=v?Mt.textSizeData:Mt.iconSizeData,tn=de||J.pitch!==0,nn=s.evaluateSizeForZoom(yn,J.zoom);let xn,Bn,_n,wn,ii=[0,0],Fi=null;if(v){if(Bn=Dt.glyphAtlasTexture,_n=ne.LINEAR,xn=Dt.glyphAtlasTexture.size,Mt.iconsInText){ii=Dt.imageAtlasTexture.size,Fi=Dt.imageAtlasTexture;const To=yn.kind==="composite"||yn.kind==="camera";wn=tn||f.options.rotating||f.options.zooming||To?ne.LINEAR:ne.NEAREST}}else{const To=c.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;Bn=Dt.imageAtlasTexture,_n=Qt||f.options.rotating||f.options.zooming||To||tn?ne.LINEAR:ne.NEAREST,xn=Dt.imageAtlasTexture.size}const Fr=f.transform.calculatePixelsToTileUnitsMatrix(Dt),Br=Re(qe.projMatrix,Dt.tileID.canonical,de,W,f.transform,Fr),wo=f.terrain&&de&&ae?s.invert(s.create(),Br):Xl,as=It(qe.projMatrix,Dt.tileID.canonical,de,W,f.transform,Fr),Xs=We&&Mt.hasTextData(),Sa=c.layout.get("icon-text-fit")!=="none"&&Xs&&Mt.hasIconData();if(ae){const To=J.elevation,ul=To?To.getAtTileOffsetFunc(qe,J.center.lat,J.worldSize,J.projection):Zp=>[0,0,0];Hn(Mt,qe.projMatrix,f,v,Br,as,de,R,ul,qe)}const Ys=ae||v&&We||Sa,Hi=f.translatePosMatrix(qe.projMatrix,Dt,x,E),Xi=Ys?Xl:Br,ui=f.translatePosMatrix(as,Dt,x,E,!0),rr=J.projection.createInversionMatrix(J,qe.canonical),Eo=Ys?Ot.concat(["PROJECTED_POS_ON_VIEWPORT"]):Ot,Bi=Qt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $o;$o=Qt?Mt.iconsInText?_a(yn.kind,nn,he,de,f,Hi,Xi,ui,xn,ii,qe,ut,Ee,rr):qs(yn.kind,nn,he,de,f,Hi,Xi,ui,v,xn,!0,qe,ut,Ee,rr):fu(yn.kind,nn,he,de,f,Hi,Xi,ui,v,xn,qe,ut,Ee,rr);const Eu={program:f.useProgram(Yl(Qt,v,Mt),ft,Eo),buffers:rn,uniformValues:$o,atlasTexture:Bn,atlasTextureIcon:Fi,atlasInterpolation:_n,atlasInterpolationIcon:wn,isSDF:Qt,hasHalo:Bi,tile:Dt,labelPlaneMatrixInv:wo};if(fe&&Mt.canOverlap){ye=!0;const To=rn.segments.get();for(const ul of To)st.push({segments:new s.SegmentVector([ul]),sortKey:ul.sortKey,state:Eu})}else st.push({segments:rn.segments,sortKey:0,state:Eu})}ye&&st.sort((qe,Dt)=>qe.sortKey-Dt.sortKey);for(const qe of st){const Dt=qe.state;if(f.terrain&&f.terrain.setupElevationDraw(Dt.tile,Dt.program,{useDepthForOcclusion:!it,labelPlaneMatrixInv:Dt.labelPlaneMatrixInv}),X.activeTexture.set(ne.TEXTURE0),Dt.atlasTexture.bind(Dt.atlasInterpolation,ne.CLAMP_TO_EDGE),Dt.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),Dt.isSDF){const Mt=Dt.uniformValues;Dt.hasHalo&&(Mt.u_is_halo=1,Cs(Dt.buffers,qe.segments,c,f,Dt.program,ce,N,U,Mt)),Mt.u_is_halo=0}Cs(Dt.buffers,qe.segments,c,f,Dt.program,ce,N,U,Dt.uniformValues)}}function Cs(f,i,c,p,v,x,E,A,P){const R=p.context;v.draw(R,R.gl.TRIANGLES,x,E,A,s.CullFaceMode.disabled,P,c.id,f.layoutVertexBuffer,f.indexBuffer,i,c.paint,p.transform.zoom,f.programConfigurations.get(c.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Jl(f,i,c,p,v,x,E){const A=f.context.gl,P=c.paint.get("fill-pattern"),R=P&&P.constantOr(1),N=c.getCrossfadeParameters();let U,X,ne,J,W;E?(X=R&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=A.LINES):(X=R?"fillPattern":"fill",U=A.TRIANGLES);for(const de of p){const ae=i.getTile(de);if(R&&!ae.patternsLoaded())continue;const he=ae.getBucket(c);if(!he)continue;f.prepareDrawTile();const fe=he.programConfigurations.get(c.id),ye=f.useProgram(X,fe);R&&(f.context.activeTexture.set(A.TEXTURE0),ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(N));const ce=P.constantOr(null);if(ce&&ae.imageAtlas){const We=ae.imageAtlas,it=We.patternPositions[ce.to.toString()],ut=We.patternPositions[ce.from.toString()];it&&ut&&fe.setConstantPatternPositions(it,ut)}const Ee=f.translatePosMatrix(de.projMatrix,ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){J=he.indexBuffer2,W=he.segments2;const We=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];ne=X==="fillOutlinePattern"&&R?Gl(Ee,f,N,ae,We):sl(Ee,We)}else J=he.indexBuffer,W=he.segments,ne=R?ol(Ee,f,N,ae):rl(Ee);f.prepareDrawProgram(f.context,ye,de.toUnwrapped()),ye.draw(f.context,U,v,f.stencilModeForClipping(de),x,s.CullFaceMode.disabled,ne,c.id,he.layoutVertexBuffer,J,W,c.paint,f.transform.zoom,fe)}}function va(f,i,c,p,v,x,E){const A=f.context,P=A.gl,R=f.transform,N=c.paint.get("fill-extrusion-pattern"),U=N.constantOr(1),X=c.getCrossfadeParameters(),ne=c.paint.get("fill-extrusion-opacity"),J=function(fe){if(fe.projection.name!=="globe")return 0;const ye=Math.PI/32,ce=Math.tan(ye),Ee=s.earthRadius;return Ee*Math.sqrt(1+2*ce*ce)-Ee}(R),W=R.projection.name==="globe",de=W?s.globeToMercatorTransition(R.zoom):0,ae=[s.mercatorXfromLng(R.center.lng),s.mercatorYfromLat(R.center.lat)],he=[];W&&he.push("PROJECTION_GLOBE_VIEW");for(const fe of p){const ye=i.getTile(fe),ce=ye.getBucket(c);if(!ce||ce.projection!==R.projection.name)continue;const Ee=ce.programConfigurations.get(c.id),We=f.useProgram(U?"fillExtrusionPattern":"fillExtrusion",Ee,he);if(f.terrain){const Dt=f.terrain;if(f.style.terrainSetForDrapingOnly())Dt.setupElevationDraw(ye,We,{useMeterToDem:!0});else{if(!ce.enableTerrain)continue;if(Dt.setupElevationDraw(ye,We,{useMeterToDem:!0}),al(A,i,fe,ce,c,Dt),!ce.centroidVertexBuffer){const Mt=We.attributes.a_centroid_pos;Mt!==void 0&&P.vertexAttrib2f(Mt,0,0)}}}U&&(f.context.activeTexture.set(P.TEXTURE0),ye.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Ee.updatePaintBuffers(X));const it=N.constantOr(null);if(it&&ye.imageAtlas){const Dt=ye.imageAtlas,Mt=Dt.patternPositions[it.to.toString()],rn=Dt.patternPositions[it.from.toString()];Mt&&rn&&Ee.setConstantPatternPositions(Mt,rn)}const ut=f.translatePosMatrix(fe.projMatrix,ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),st=R.projection.createInversionMatrix(R,fe.canonical),Ot=c.paint.get("fill-extrusion-vertical-gradient"),qe=U?il(ut,f,Ot,ne,fe,X,ye,J,de,ae,st):nl(ut,f,Ot,ne,fe,J,de,ae,st);f.prepareDrawProgram(A,We,fe.toUnwrapped()),We.draw(A,A.gl.TRIANGLES,v,x,E,s.CullFaceMode.backCCW,qe,c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,f.transform.zoom,Ee,f.terrain?ce.centroidVertexBuffer:null,W?ce.layoutVertexExtBuffer:null)}}function al(f,i,c,p,v,x){const E=[ae=>{let he=ae.canonical.x-1,fe=ae.wrap;return he<0&&(he=(1<<ae.canonical.z)-1,fe--),new s.OverscaledTileID(ae.overscaledZ,fe,ae.canonical.z,he,ae.canonical.y)},ae=>{let he=ae.canonical.x+1,fe=ae.wrap;return he===1<<ae.canonical.z&&(he=0,fe++),new s.OverscaledTileID(ae.overscaledZ,fe,ae.canonical.z,he,ae.canonical.y)},ae=>new s.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,(ae.canonical.y===0?1<<ae.canonical.z:ae.canonical.y)-1),ae=>new s.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y===(1<<ae.canonical.z)-1?0:ae.canonical.y+1)],A=ae=>{const he=i.getSource().minzoom,fe=ce=>{const Ee=i.getTileByID(ce);if(Ee&&Ee.hasData())return Ee.getBucket(v)},ye=[0,-1,1];for(const ce of ye){if(ae.overscaledZ+ce<he)continue;const Ee=fe(ae.calculateScaledKey(ae.overscaledZ+ce));if(Ee)return Ee}},P=[0,0,0],R=(ae,he)=>(P[0]=Math.min(ae.min.y,he.min.y),P[1]=Math.max(ae.max.y,he.max.y),P[2]=s.EXTENT-he.min.x>ae.max.x?he.min.x-s.EXTENT:ae.max.x,P),N=(ae,he)=>(P[0]=Math.min(ae.min.x,he.min.x),P[1]=Math.max(ae.max.x,he.max.x),P[2]=s.EXTENT-he.min.y>ae.max.y?he.min.y-s.EXTENT:ae.max.y,P),U=[(ae,he)=>R(ae,he),(ae,he)=>R(he,ae),(ae,he)=>N(ae,he),(ae,he)=>N(he,ae)],X=new s.pointGeometry(0,0);let ne,J,W;const de=(ae,he,fe,ye,ce)=>{const Ee=[[ye?fe:ae,ye?ae:fe,0],[ye?fe:he,ye?he:fe,0]],We=ce<0?s.EXTENT+ce:ce,it=[ye?We:(ae+he)/2,ye?(ae+he)/2:We,0];return fe===0&&ce<0||fe!==0&&ce>0?x.getForTilePoints(W,[it],!0,J):Ee.push(it),x.getForTilePoints(c,Ee,!0,ne),Math.max(Ee[0][2],Ee[1][2],it[2])/x.exaggeration()};for(let ae=0;ae<4;ae++){const he=(ae<2?1:5)-ae,fe=p.borders[ae];if(fe.length===0)continue;const ye=W=E[ae](c),ce=A(ye);if(!(ce&&ce instanceof s.FillExtrusionBucket&&ce.enableTerrain)||p.borderDoneWithNeighborZ[ae]===ce.canonical.z&&ce.borderDoneWithNeighborZ[he]===p.canonical.z||(J=x.findDEMTileFor(ye),!J||!J.dem))continue;if(!ne){const ut=x.findDEMTileFor(c);if(!ut||!ut.dem)return;ne=ut}const Ee=ce.borders[he];let We=0;const it=ce.borderDoneWithNeighborZ[he]!==p.canonical.z;if(p.canonical.z===ce.canonical.z){for(let ut=0;ut<fe.length;ut++){const st=p.featuresOnBorder[fe[ut]],Ot=st.borders[ae];let qe;for(;We<Ee.length&&(qe=ce.featuresOnBorder[Ee[We]],!(qe.borders[he][1]>Ot[0]+3));)it&&ce.encodeCentroid(void 0,qe,!1),We++;if(qe&&We<Ee.length){const Dt=We;let Mt=0;for(;!(qe.borders[he][0]>Ot[1]-3)&&(Mt++,++We!==Ee.length);)qe=ce.featuresOnBorder[Ee[We]];if(qe=ce.featuresOnBorder[Ee[Dt]],st.intersectsCount()>1||qe.intersectsCount()>1||Mt!==1){Mt!==1&&(We=Dt),p.encodeCentroid(void 0,st,!1),it&&ce.encodeCentroid(void 0,qe,!1);continue}const rn=U[ae](st,qe),ft=ae%2?s.EXTENT-1:0;X.x=de(rn[0],Math.min(s.EXTENT-1,rn[1]),ft,ae<2,rn[2]),X.y=0,p.encodeCentroid(X,st,!1),it&&ce.encodeCentroid(X,qe,!1)}else p.encodeCentroid(void 0,st,!1)}p.borderDoneWithNeighborZ[ae]=ce.canonical.z,p.needsCentroidUpdate=!0,it&&(ce.borderDoneWithNeighborZ[he]=p.canonical.z,ce.needsCentroidUpdate=!0)}else{for(const ut of fe)p.encodeCentroid(void 0,p.featuresOnBorder[ut],!1);if(it){for(const ut of Ee)ce.encodeCentroid(void 0,ce.featuresOnBorder[ut],!1);ce.borderDoneWithNeighborZ[he]=p.canonical.z,ce.needsCentroidUpdate=!0}p.borderDoneWithNeighborZ[ae]=ce.canonical.z,p.needsCentroidUpdate=!0}}(p.needsCentroidUpdate||!p.centroidVertexBuffer&&p.centroidVertexArray.length!==0)&&p.uploadCentroid(f)}const xa=new s.Color(1,0,0,1),Ql=new s.Color(0,1,0,1),du=new s.Color(0,0,1,1),ec=new s.Color(1,0,1,1),rs=new s.Color(0,1,1,1);function Wt(f,i,c,p){os(f,0,i+c/2,f.transform.width,c,p)}function Xr(f,i,c,p){os(f,i-c/2,0,c,f.transform.height,p)}function os(f,i,c,p,v,x){const E=f.context,A=E.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*s.exported.devicePixelRatio,c*s.exported.devicePixelRatio,p*s.exported.devicePixelRatio,v*s.exported.devicePixelRatio),E.clear({color:x}),A.disable(A.SCISSOR_TEST)}function ba(f,i,c){const p=f.context,v=p.gl,x=f.transform.projection.name==="globe",E=c.projMatrix,A=f.useProgram("debug",null,x?["PROJECTION_GLOBE_VIEW"]:null),P=i.getTileByID(c.key);f.terrain&&f.terrain.setupElevationDraw(P,A);const R=s.DepthMode.disabled,N=s.StencilMode.disabled,U=f.colorModeForRenderPass(),X="$debug";p.activeTexture.set(v.TEXTURE0),f.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),x?P._makeGlobeTileDebugBuffers(f.context,f.transform.projection):P._makeDebugTileBoundsBuffers(f.context,f.transform.projection);const ne=P._tileDebugBuffer||f.debugBuffer,J=P._tileDebugIndexBuffer||f.debugIndexBuffer,W=P._tileDebugSegments||f.debugSegments;A.draw(p,v.LINE_STRIP,R,N,U,s.CullFaceMode.disabled,lu(E,s.Color.red),X,ne,J,W,null,null,null,P._globeTileDebugBorderBuffer);const de=P.latestRawTileData,ae=Math.floor((de&&de.byteLength||0)/1024),he=i.getTile(c).tileSize,fe=512/Math.min(he,512)*(c.overscaledZ/f.transform.zoom)*.5;let ye=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ye+=` => ${c.overscaledZ}`),function(it,ut){it.initDebugOverlayCanvas();const st=it.debugOverlayCanvas,Ot=it.context.gl,qe=it.debugOverlayCanvas.getContext("2d");qe.clearRect(0,0,st.width,st.height),qe.shadowColor="white",qe.shadowBlur=2,qe.lineWidth=1.5,qe.strokeStyle="white",qe.textBaseline="top",qe.font="bold 36px Open Sans, sans-serif",qe.fillText(ut,5,5),qe.strokeText(ut,5,5),it.debugOverlayTexture.update(st),it.debugOverlayTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE)}(f,`${ye} ${ae}kb`);const ce=P._tileDebugTextBuffer||f.debugBuffer,Ee=P._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,We=P._tileDebugTextSegments||f.debugSegments;A.draw(p,v.TRIANGLES,R,N,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,lu(E,s.Color.transparent,fe),X,ce,Ee,We,null,null,null,P._globeTileDebugTextBuffer)}const pu=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Zs}=pu;function Ro(f,i,c,p){f.emplaceBack(i,c,p)}class wa{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Ro(this.vertexArray,-1,-1,1),Ro(this.vertexArray,1,-1,1),Ro(this.vertexArray,-1,1,1),Ro(this.vertexArray,1,1,1),Ro(this.vertexArray,-1,-1,-1),Ro(this.vertexArray,1,-1,-1),Ro(this.vertexArray,-1,1,-1),Ro(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Zs),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function so(f,i,c,p,v,x){const E=f.gl,A=i.paint.get("sky-atmosphere-color"),P=i.paint.get("sky-atmosphere-halo-color"),R=i.paint.get("sky-atmosphere-sun-intensity"),N=((U,X,ne,J,W)=>({u_matrix_3f:U,u_sun_direction:X,u_sun_intensity:ne,u_color_tint_r:[J.r,J.g,J.b,J.a],u_color_tint_m:[W.r,W.g,W.b,W.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),p),v,R,A,P);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+x,i.skyboxTexture,0),c.draw(f,E.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,N,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}function ss(f,i){return s.transformMat4(f,f,i)}const tc={symbol:function(f,i,c,p,v){if(f.renderPass!=="translucent")return;const x=s.StencilMode.disabled,E=f.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(A,P,R,N,U,X,ne){const J=P.transform,W=U==="map",de=X==="map";for(const ae of A){const he=N.getTile(ae),fe=he.getBucket(R);if(!fe||fe.projection!==J.projection.name||!fe.text||!fe.text.segments.get().length)continue;const ye=s.evaluateSizeForZoom(fe.textSizeData,J.zoom),ce=P.transform.calculatePixelsToTileUnitsMatrix(he),Ee=Re(ae.projMatrix,he.tileID.canonical,de,W,P.transform,ce),We=R.layout.get("icon-text-fit")!=="none"&&fe.hasIconData();if(ye){const it=Math.pow(2,J.zoom-he.tileID.overscaledZ);Nh(fe,W,de,ne,s.symbolSize,J,Ee,ae,it,ye,We,J.projection)}}}(p,f,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v),c.paint.get("icon-opacity").constantOr(1)!==0&&Kl(f,i,c,p,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,E),c.paint.get("text-opacity").constantOr(1)!==0&&Kl(f,i,c,p,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,E),i.map.showCollisionBoxes&&(Zl(f,i,c,p,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Zl(f,i,c,p,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,c,p){if(f.renderPass!=="translucent")return;const v=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),A=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(x.constantOr(1)===0||E.constantOr(1)===0))return;const P=f.context,R=P.gl,N=f.transform,U=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),X=s.StencilMode.disabled,ne=f.colorModeForRenderPass(),J=N.projection.name==="globe",W=[s.mercatorXfromLng(N.center.lng),s.mercatorYfromLat(N.center.lat)],de=[];for(let he=0;he<p.length;he++){const fe=p[he],ye=i.getTile(fe),ce=ye.getBucket(c);if(!ce)continue;const Ee=ce.programConfigurations.get(c.id),We=Oh(c);J&&We.push("PROJECTION_GLOBE_VIEW");const it=f.useProgram("circle",Ee,We),ut=ce.layoutVertexBuffer,st=ce.globeExtVertexBuffer,Ot=ce.indexBuffer,qe=N.projection.createInversionMatrix(N,fe.canonical),Dt={programConfiguration:Ee,program:it,layoutVertexBuffer:ut,globeExtVertexBuffer:st,indexBuffer:Ot,uniformValues:Gs(f,fe,ye,qe,W,c),tile:ye};if(A){const Mt=ce.segments.get();for(const rn of Mt)de.push({segments:new s.SegmentVector([rn]),sortKey:rn.sortKey,state:Dt})}else de.push({segments:ce.segments,sortKey:0,state:Dt})}A&&de.sort((he,fe)=>he.sortKey-fe.sortKey);const ae={useDepthForOcclusion:!J};for(const he of de){const{programConfiguration:fe,program:ye,layoutVertexBuffer:ce,globeExtVertexBuffer:Ee,indexBuffer:We,uniformValues:it,tile:ut}=he.state,st=he.segments;f.terrain&&f.terrain.setupElevationDraw(ut,ye,ae),f.prepareDrawProgram(P,ye,ut.tileID.toUnwrapped()),ye.draw(P,R.TRIANGLES,U,X,ne,s.CullFaceMode.disabled,it,c.id,ce,We,st,c.paint,N.zoom,fe,J?Ee:null)}},heatmap:function(f,i,c,p){if(c.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,x=v.gl,E=s.StencilMode.disabled,A=new s.ColorMode([x.ONE,x.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(X,ne,J){const W=X.gl;X.activeTexture.set(W.TEXTURE1),X.viewport.set([0,0,ne.width/4,ne.height/4]);let de=J.heatmapFbo;if(de)W.bindTexture(W.TEXTURE_2D,de.colorAttachment.get()),X.bindFramebuffer.set(de.framebuffer);else{const ae=W.createTexture();W.bindTexture(W.TEXTURE_2D,ae),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),de=J.heatmapFbo=X.createFramebuffer(ne.width/4,ne.height/4,!1),function(he,fe,ye,ce){const Ee=he.gl;Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,fe.width/4,fe.height/4,0,Ee.RGBA,he.extRenderToTextureHalfFloat?he.extTextureHalfFloat.HALF_FLOAT_OES:Ee.UNSIGNED_BYTE,null),ce.colorAttachment.set(ye)}(X,ne,ae,de)}})(v,f,c),v.clear({color:s.Color.transparent});const P=f.transform,R=P.projection.name==="globe",N=R?["PROJECTION_GLOBE_VIEW"]:null,U=[s.mercatorXfromLng(P.center.lng),s.mercatorYfromLat(P.center.lat)];for(let X=0;X<p.length;X++){const ne=p[X];if(i.hasRenderableParent(ne))continue;const J=i.getTile(ne),W=J.getBucket(c);if(!W)continue;const de=W.programConfigurations.get(c.id),ae=f.useProgram("heatmap",de,N),{zoom:he}=f.transform;f.terrain&&f.terrain.setupElevationDraw(J,ae),f.prepareDrawProgram(v,ae,ne.toUnwrapped());const fe=P.projection.createInversionMatrix(P,ne.canonical);ae.draw(v,x.TRIANGLES,s.DepthMode.disabled,E,A,s.CullFaceMode.disabled,Rh(f,ne,J,fe,U,he,c.paint.get("heatmap-intensity")),c.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,c.paint,f.transform.zoom,de,R?W.globeExtVertexBuffer:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,x){const E=v.context,A=E.gl,P=x.heatmapFbo;if(!P)return;E.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,P.colorAttachment.get()),E.activeTexture.set(A.TEXTURE1);let R=x.colorRampTexture;R||(R=x.colorRampTexture=new s.Texture(E,x.colorRamp,A.RGBA)),R.bind(A.LINEAR,A.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(E,A.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,((N,U,X,ne)=>({u_image:0,u_color_ramp:1,u_opacity:U.paint.get("heatmap-opacity")}))(0,x),x.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,x.paint,v.transform.zoom)}(f,c))},line:function(f,i,c,p){if(f.renderPass!=="translucent")return;const v=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(v.constantOr(1)===0||x.constantOr(1)===0)return;const E=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),A=f.colorModeForRenderPass(),P=f.terrain&&f.terrain.renderingToTexture?1:s.exported.devicePixelRatio,R=c.paint.get("line-dasharray"),N=R.constantOr(1),U=c.layout.get("line-cap"),X=c.paint.get("line-pattern"),ne=X.constantOr(1),J=c.paint.get("line-gradient"),W=c.getCrossfadeParameters(),de=ne?"linePattern":"line",ae=f.context,he=ae.gl,fe=(ce=>{const Ee=[];uu(ce)&&Ee.push("RENDER_LINE_DASH"),ce.paint.get("line-gradient")&&Ee.push("RENDER_LINE_GRADIENT");const We=ce.paint.get("line-pattern").constantOr(1),it=ce.paint.get("line-opacity").constantOr(1)!==1;return!We&&it&&Ee.push("RENDER_LINE_ALPHA_DISCARD"),Ee})(c);let ye=fe.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ye=!1);for(const ce of p){const Ee=i.getTile(ce);if(ne&&!Ee.patternsLoaded())continue;const We=Ee.getBucket(c);if(!We)continue;f.prepareDrawTile();const it=We.programConfigurations.get(c.id),ut=f.useProgram(de,it,fe),st=X.constantOr(null);if(st&&Ee.imageAtlas){const ft=Ee.imageAtlas,Qt=ft.patternPositions[st.to.toString()],yn=ft.patternPositions[st.from.toString()];Qt&&yn&&it.setConstantPatternPositions(Qt,yn)}const Ot=R.constantOr(null),qe=U.constantOr(null);if(!ne&&Ot&&qe&&Ee.lineAtlas){const ft=Ee.lineAtlas,Qt=ft.getDash(Ot.to,qe),yn=ft.getDash(Ot.from,qe);Qt&&yn&&it.setConstantPatternPositions(Qt,yn)}const Dt=f.terrain?ce.projMatrix:null,Mt=ne?cu(f,Ee,c,W,Dt,P):As(f,Ee,c,W,Dt,We.lineClipsArray.length,P);if(J){const ft=We.gradients[c.id];let Qt=ft.texture;if(c.gradientVersion!==ft.version){let yn=256;if(c.stepInterpolant){const tn=i.getSource().maxzoom,nn=ce.canonical.z===tn?Math.ceil(1<<f.transform.maxZoom-ce.canonical.z):1;yn=s.clamp(s.nextPowerOfTwo(We.maxLineLength/s.EXTENT*1024*nn),256,ae.maxTextureSize)}ft.gradient=s.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:yn,image:ft.gradient||void 0,clips:We.lineClipsArray}),ft.texture?ft.texture.update(ft.gradient):ft.texture=new s.Texture(ae,ft.gradient,he.RGBA),ft.version=c.gradientVersion,Qt=ft.texture}ae.activeTexture.set(he.TEXTURE1),Qt.bind(c.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}N&&(ae.activeTexture.set(he.TEXTURE0),Ee.lineAtlasTexture.bind(he.LINEAR,he.REPEAT),it.updatePaintBuffers(W)),ne&&(ae.activeTexture.set(he.TEXTURE0),Ee.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),it.updatePaintBuffers(W)),f.prepareDrawProgram(ae,ut,ce.toUnwrapped());const rn=ft=>{ut.draw(ae,he.TRIANGLES,E,ft,A,s.CullFaceMode.disabled,Mt,c.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,c.paint,f.transform.zoom,it,We.layoutVertexBuffer2)};if(ye){const ft=f.stencilModeForClipping(ce).ref;ft===0&&f.terrain&&ae.clear({stencil:0});const Qt={func:he.EQUAL,mask:255};Mt.u_alpha_discard_threshold=.8,rn(new s.StencilMode(Qt,ft,255,he.KEEP,he.KEEP,he.INVERT)),Mt.u_alpha_discard_threshold=0,rn(new s.StencilMode(Qt,ft,255,he.KEEP,he.KEEP,he.KEEP))}else rn(f.stencilModeForClipping(ce))}ye&&(f.resetStencilClippingMasks(),f.terrain&&ae.clear({stencil:0}))},fill:function(f,i,c,p){const v=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const E=f.colorModeForRenderPass(),A=c.paint.get("fill-pattern"),P=f.opaquePassEnabledForLayer()&&!A.constantOr(1)&&v.constantOr(s.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===P){const R=f.depthModeForSublayer(1,f.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Jl(f,i,c,p,R,E,!1)}if(f.renderPass==="translucent"&&c.paint.get("fill-antialias")){const R=f.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Jl(f,i,c,p,R,E,!0)}},"fill-extrusion":function(f,i,c,p){const v=c.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const x=new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))va(f,i,c,p,x,s.StencilMode.disabled,s.ColorMode.disabled),va(f,i,c,p,x,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const E=f.colorModeForRenderPass();va(f,i,c,p,x,s.StencilMode.disabled,E)}}},hillshade:function(f,i,c,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,x=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),E=f.colorModeForRenderPass(),A=f.terrain&&f.terrain.renderingToTexture,[P,R]=f.renderPass!=="translucent"||A?[{},p]:f.stencilConfigForOverlap(p);for(const N of R){const U=i.getTile(N);if(U.needsHillshadePrepare&&f.renderPass==="offscreen")Bl(f,U,c,x,s.StencilMode.disabled,E);else if(f.renderPass==="translucent"){const X=A&&f.terrain?f.terrain.stencilModeForRTTOverlap(N):P[N.overscaledZ];Rr(f,N,U,c,x,X,E)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,i,c,p,v,x){if(f.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!p.length)return;const E=f.context,A=E.gl,P=i.getSource(),R=f.useProgram("raster"),N=f.colorModeForRenderPass(),U=f.terrain&&f.terrain.renderingToTexture,[X,ne]=P instanceof Se||U?[{},p]:f.stencilConfigForOverlap(p),J=ne[ne.length-1].overscaledZ,W=!f.options.moving;for(const de of ne){const ae=U?s.DepthMode.disabled:f.depthModeForSublayer(de.overscaledZ-J,c.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,A.LESS),he=de.toUnwrapped(),fe=i.getTile(de);if(U&&(!fe||!fe.hasData()))continue;const ye=U?de.projMatrix:f.transform.calculateProjMatrix(he,W),ce=f.terrain&&U?f.terrain.stencilModeForRTTOverlap(de):X[de.overscaledZ],Ee=x?0:c.paint.get("raster-fade-duration");fe.registerFadeDuration(Ee);const We=i.findLoadedParent(de,0),it=Ul(fe,We,i,f.transform,Ee);let ut,st;f.terrain&&f.terrain.prepareDrawTile();const Ot=c.paint.get("raster-resampling")==="nearest"?A.NEAREST:A.LINEAR;E.activeTexture.set(A.TEXTURE0),fe.texture.bind(Ot,A.CLAMP_TO_EDGE),E.activeTexture.set(A.TEXTURE1),We?(We.texture.bind(Ot,A.CLAMP_TO_EDGE),ut=Math.pow(2,We.tileID.overscaledZ-fe.tileID.overscaledZ),st=[fe.tileID.canonical.x*ut%1,fe.tileID.canonical.y*ut%1]):fe.texture.bind(Ot,A.CLAMP_TO_EDGE);const qe=hu(ye,st||[0,0],ut||1,it,c,P instanceof Se?P.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(E,R,he),P instanceof Se)P.boundsBuffer&&P.boundsSegments&&R.draw(E,A.TRIANGLES,ae,s.StencilMode.disabled,N,s.CullFaceMode.disabled,qe,c.id,P.boundsBuffer,f.quadTriangleIndexBuffer,P.boundsSegments);else{const{tileBoundsBuffer:Dt,tileBoundsIndexBuffer:Mt,tileBoundsSegments:rn}=f.getTileBoundsBuffers(fe);R.draw(E,A.TRIANGLES,ae,ce,N,s.CullFaceMode.disabled,qe,c.id,Dt,Mt,rn)}}f.resetStencilClippingMasks()},background:function(f,i,c,p){const v=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(x===0)return;const E=f.context,A=E.gl,P=f.transform,R=P.tileSize,N=c.paint.get("background-pattern");if(f.isPatternMissing(N))return;const U=!N&&v.a===1&&x===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==U)return;const X=s.StencilMode.disabled,ne=f.depthModeForSublayer(0,U==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),J=f.colorModeForRenderPass(),W=f.useProgram(N?"backgroundPattern":"background");let de,ae=p;ae||(de=f.getBackgroundTiles(),ae=Object.values(de).map(fe=>fe.tileID)),N&&(E.activeTexture.set(A.TEXTURE0),f.imageManager.bind(f.context));const he=c.getCrossfadeParameters();for(const fe of ae){const ye=fe.toUnwrapped(),ce=p?fe.projMatrix:f.transform.calculateProjMatrix(ye);f.prepareDrawTile();const Ee=i?i.getTile(fe):de?de[fe.key]:new s.Tile(fe,R,P.zoom,f),We=N?ga(ce,x,f,N,{tileID:fe,tileSize:R},he):zh(ce,x,v);f.prepareDrawProgram(E,W,ye);const{tileBoundsBuffer:it,tileBoundsIndexBuffer:ut,tileBoundsSegments:st}=f.getTileBoundsBuffers(Ee);W.draw(E,A.TRIANGLES,ne,X,J,s.CullFaceMode.disabled,We,c.id,it,ut,st)}},sky:function(f,i,c){const p=f.transform,v=p.projection.name==="mercator"||p.projection.name==="globe"?1:s.smoothstep(7,8,p.zoom),x=c.paint.get("sky-opacity")*v;if(x===0)return;const E=f.context,A=c.paint.get("sky-type"),P=new s.DepthMode(E.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),R=f.frameCounter/1e3%1;A==="atmosphere"?f.renderPass==="offscreen"?c.needsSkyboxCapture(f)&&(function(N,U,X,ne){const J=N.context,W=J.gl;let de=U.skyboxFbo;if(!de){de=U.skyboxFbo=J.createFramebuffer(32,32,!1),U.skyboxGeometry=new wa(J),U.skyboxTexture=J.gl.createTexture(),W.bindTexture(W.TEXTURE_CUBE_MAP,U.skyboxTexture),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_MAG_FILTER,W.LINEAR);for(let ye=0;ye<6;++ye)W.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,W.RGBA,32,32,0,W.RGBA,W.UNSIGNED_BYTE,null)}J.bindFramebuffer.set(de.framebuffer),J.viewport.set([0,0,32,32]);const ae=U.getCenter(N,!0),he=N.useProgram("skyboxCapture"),fe=new Float64Array(16);s.identity(fe),s.rotateY(fe,fe,.5*-Math.PI),so(J,U,he,fe,ae,0),s.identity(fe),s.rotateY(fe,fe,.5*Math.PI),so(J,U,he,fe,ae,1),s.identity(fe),s.rotateX(fe,fe,.5*-Math.PI),so(J,U,he,fe,ae,2),s.identity(fe),s.rotateX(fe,fe,.5*Math.PI),so(J,U,he,fe,ae,3),s.identity(fe),so(J,U,he,fe,ae,4),s.identity(fe),s.rotateY(fe,fe,Math.PI),so(J,U,he,fe,ae,5),J.viewport.set([0,0,N.width,N.height])}(f,c),c.markSkyboxValid(f)):f.renderPass==="sky"&&function(N,U,X,ne,J){const W=N.context,de=W.gl,ae=N.transform,he=N.useProgram("skybox");W.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_CUBE_MAP,U.skyboxTexture);const fe=((ye,ce,Ee,We,it)=>({u_matrix:ye,u_sun_direction:ce,u_cubemap:0,u_opacity:We,u_temporal_offset:it}))(ae.skyboxMatrix,U.getCenter(N,!1),0,ne,J);N.prepareDrawProgram(W,he),he.draw(W,de.TRIANGLES,X,s.StencilMode.disabled,N.colorModeForRenderPass(),s.CullFaceMode.backCW,fe,"skybox",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(f,c,P,x,R):A==="gradient"&&f.renderPass==="sky"&&function(N,U,X,ne,J){const W=N.context,de=W.gl,ae=N.transform,he=N.useProgram("skyboxGradient");U.skyboxGeometry||(U.skyboxGeometry=new wa(W)),W.activeTexture.set(de.TEXTURE0);let fe=U.colorRampTexture;fe||(fe=U.colorRampTexture=new s.Texture(W,U.colorRamp,de.RGBA)),fe.bind(de.LINEAR,de.CLAMP_TO_EDGE);const ye=((ce,Ee,We,it,ut)=>({u_matrix:ce,u_color_ramp:0,u_center_direction:Ee,u_radius:s.degToRad(We),u_opacity:it,u_temporal_offset:ut}))(ae.skyboxMatrix,U.getCenter(N,!1),U.paint.get("sky-gradient-radius"),ne,J);N.prepareDrawProgram(W,he),he.draw(W,de.TRIANGLES,X,s.StencilMode.disabled,N.colorModeForRenderPass(),s.CullFaceMode.backCW,ye,"skyboxGradient",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(f,c,P,x,R)},debug:function(f,i,c){for(let p=0;p<c.length;p++)ba(f,i,c[p])},custom:function(f,i,c){const p=f.context,v=c.implementation;if(f.transform.projection.unsupportedLayers&&f.transform.projection.unsupportedLayers.includes("custom"))s.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(f.renderPass==="offscreen"){const x=v.prerender;x&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),x.call(v,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(s.StencilMode.disabled);const x=v.renderingMode==="3d"?new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,s.DepthMode.ReadOnly);p.setDepthMode(x),v.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class Ea{constructor(i,c){this.context=new $(i),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ka,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this._tileClippingMaskIDs=new Map,this._skippedStencilTileIDs=new Set}updateTerrain(i,c){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new zr(this,i));const v=this._terrain;this.transform.elevation=p?v:null,v.update(i,this.transform,c)}_updateFog(i){const c=i.fog;if(!c||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,v]=c.getFovAdjustedRange(this.transform._fov);if(p>v)return void(this.transform.fogCullDistSq=null);const x=p+.78*(v-p);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,c){if(this.width=i*s.exported.devicePixelRatio,this.height=c*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._layers[p].resize()}setup(){const i=this.context,c=new s.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const p=new s.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(s.EXTENT,0),p.emplaceBack(0,s.EXTENT),p.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(p,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const v=new s.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const x=new s.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(s.EXTENT,0,s.EXTENT,0),x.emplaceBack(0,s.EXTENT,0,s.EXTENT),x.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(x,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const E=new s.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);const A=new s.StructArrayLayout1ui2;for(const R of[0,1,3,2,0])A.emplaceBack(R);this.debugIndexBuffer=i.createIndexBuffer(A),this.emptyTexture=new s.Texture(i,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.create();const P=this.context.gl;this.stencilClearMode=new s.StencilMode({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.loadTimeStamps.push(s.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear(),this.useProgram("clippingMask").draw(i,c.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,$l(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear())}_renderTileClippingMasks(i,c,p){if(!c||this.currentStencilSource===c.id||!i.isTileClipped()||!p||p.length===0)return;const v=[];let x=!1;if(this._tileClippingMaskIDs&&!this.terrain){for(const N of p)if(this._tileClippingMaskIDs.has(N.key)||(x=!0),this._skippedStencilTileIDs.has(N.key)){if(!c.getTile(N).getBucket(i))continue;this._skippedStencilTileIDs.delete(N.key),v.push(N)}if(!x&&v.length===0)return}const E=this.context,A=E.gl;E.setColorMode(s.ColorMode.disabled),E.setDepthMode(s.DepthMode.disabled);const P=this.useProgram("clippingMask"),R=N=>{const U=c.getTile(N),{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:J}=this.getTileBoundsBuffers(U);P.draw(E,A.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:A.GREATER,mask:255},this._tileClippingMaskIDs.get(N.key)||0,255,A.KEEP,A.KEEP,A.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,$l(N.projMatrix),"$clipping",X,ne,J)};if(!x&&v.length>0)for(const N of v)R(N);else{(this._tileClippingMaskIDs.size===0||this.nextStencilID+p.length>256)&&this.clearStencil(),this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear();for(const N of p)this._tileClippingMaskIDs.set(N.key,this.nextStencilID++),c.getTile(N).getBucket(i)?R(N):this._skippedStencilTileIDs.add(N.key)}this._skippedStencilTileIDs.size===0&&(this.currentStencilSource=c.id)}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new s.StencilMode({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const c=this.context.gl;return new s.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs.get(i.key)||0,0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((E,A)=>A.overscaledZ-E.overscaledZ),v=p[p.length-1].overscaledZ,x=p[0].overscaledZ-v+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let A=0;A<x;A++)E[A+v]=new s.StencilMode({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[E,p]}return[{[v]:s.StencilMode.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;if(this._showOverdrawInspector){const c=1/8;return new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(c,c,c,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(p||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const p=this.style.order,v=this.style._sourceCaches;for(const R in v){const N=v[R];N.used&&N.prepare(this.context)}const x={},E={},A={};for(const R in v){const N=v[R];x[R]=N.getVisibleCoordinates(),E[R]=x[R].slice().reverse(),A[R]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<p.length;R++)if(this.style._layers[p[R]].is3D()){this.opaquePassCutoff=R;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const R of p){const N=this.style._layers[R],U=i._getLayerSourceCache(N);if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const X=U?E[U.id]:void 0;(N.type==="custom"||N.isSky()||X&&X.length)&&this.renderLayer(this,U,N,X)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let P=s.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(P=this.style.fog.properties.get("color")),this.context.clear({color:c.showOverdrawInspector?s.Color.black:P,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(R);if(R.isSky())continue;const U=N?E[N.id]:void 0;this._renderTileClippingMasks(R,N,U),this.renderLayer(this,N,R,U)}if(this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const R=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(R);R.isSky()&&this.renderLayer(this,N,R,N?E[N.id]:void 0)}for(this.transform.projection.name==="globe"&&function(R){const N=R.context,U=N.gl,X=R.transform,ne=new s.DepthMode(U.LEQUAL,s.DepthMode.ReadOnly,[0,1]),J=R.useProgram("globeAtmosphere"),W=X.centerOffset,de=X._camera.getCameraToClipPerspective(X._fov,X.width/X.height,X._nearZ,X._farZ);de[8]=2*-W.x/X.width,de[9]=2*W.y/X.height;const ae=s.invert([],de),he=s.mul([],ae,X.projMatrix),fe={u_frustum_tl:ss([-1,1,1],ae),u_frustum_tr:ss([1,1,1],ae),u_frustum_br:ss([1,-1,1],ae),u_frustum_bl:ss([-1,-1,1],ae),u_globe_pos:ss([X.globeMatrix[12],X.globeMatrix[13],X.globeMatrix[14]],he),u_globe_radius:X.worldSize/2/Math.PI-1,u_opacity:1-s.globeToMercatorTransition(X.zoom),u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};R.prepareDrawProgram(N,J);const ye=R.globeSharedBuffers;ye&&J.draw(N,U.TRIANGLES,ne,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,fe,"skybox",ye.atmosphereVertexBuffer,ye.atmosphereIndexBuffer,ye.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;){const R=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(R);if(R.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(R)){if(R.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const U=N?(R.type==="symbol"?A:E)[N.id]:void 0;this._renderTileClippingMasks(R,N,N?x[N.id]:void 0),this.renderLayer(this,N,R,U),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let R=null;s.values(this.style._layers).forEach(N=>{const U=i._getLayerSourceCache(N);U&&!N.isHidden(this.transform.zoom)&&(!R||R.getSource().maxzoom<U.getSource().maxzoom)&&(R=U)}),R&&this.options.showTileBoundaries&&tc.debug(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const N=R.transform.padding;Wt(R,R.transform.height-(N.top||0),3,xa),Wt(R,N.bottom||0,3,Ql),Xr(R,N.left||0,3,du),Xr(R,R.transform.width-(N.right||0),3,ec);const U=R.transform.centerPoint;(function(X,ne,J,W){os(X,ne-1,J-10,2,20,W),os(X,ne-10,J-1,20,2,W)})(R,U.x,R.transform.height-U.y,rs)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,c,p,v){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="sky"||p.type==="custom"||v&&v.length)&&(this.id=p.id,this.gpuTimingStart(p),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(p.type)||tc[p.type](i,c,p,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),p.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const p in i){const v=i[p],x=this.context.extTimerQuery,E=x.getQueryObjectEXT(v.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(v.query),c[p]=E}return c}translatePosMatrix(i,c,p,v,x){if(!p[0]&&!p[1])return i;const E=x?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(E){const R=Math.sin(E),N=Math.cos(E);p=[p[0]*N-p[1]*R,p[0]*R+p[1]*N]}const A=[x?p[0]:dn(c,p[0],this.transform.zoom),x?p[1]:dn(c,p[1],this.transform.zoom),0],P=new Float32Array(16);return s.translate(P,i,A),P}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,c=this.style&&this.style.fog,p=[];return this.terrain&&!this.terrain.renderingToTexture&&p.push("TERRAIN"),c&&!i&&c.getOpacity(this.transform.pitch)!==0&&p.push("FOG"),i&&p.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&p.push("OVERDRAW_INSPECTOR"),p}useProgram(i,c,p){this.cache=this.cache||{};const v=p||[],x=this.currentGlobalDefines().concat(v),E=pa.cacheKey(i,x,c);return this.cache[E]||(this.cache[E]=new pa(this.context,i,Qa[i],c,Jn[i],x)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,c,p){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const x=v.getOpacity(this.transform.pitch);x!==0&&c.setFogUniformValues(i,((E,A,P,R)=>{const N=A.properties.get("color"),U=E.frameCounter/1e3%1,X=[N.r/N.a,N.g/N.a,N.b/N.a,R];return{u_fog_matrix:P?E.transform.calculateFogTileMatrix(P):E.identityMat,u_fog_range:A.getFovAdjustedRange(E.transform._fov),u_fog_color:X,u_fog_horizon_blend:A.properties.get("horizon-blend"),u_fog_temporal_offset:U}})(this,v,p,x))}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,c=i.createTexture();return i.bindTexture(i.TEXTURE_2D,c),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,c=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const v of p)c[v.key]=i[v.key]||new s.Tile(v,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class xo{constructor(i=0,c=0,p=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=v}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=s.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=s.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=s.number(i.right,c.right,p)),this}getCenter(i,c){const p=s.clamp((this.left+i-this.right)/2,0,i),v=s.clamp((this.top+c-this.bottom)/2,0,c);return new s.pointGeometry(p,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new xo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fh(f,i){const c=s.getColumn(f,3);s.fromQuat(f,i),s.setColumn(f,3,c)}function nc(f,i){const c=s.identity$1([]);return s.rotateZ$1(c,c,-i),s.rotateX$1(c,c,-f),c}function Is(f,i){const c=[f[0],f[1],0],p=[i[0],i[1],0];if(s.length(c)>=1e-15){const E=s.normalize([],c);s.scale$2(p,E,s.dot(p,E)),i[0]=p[0],i[1]=p[1]}const v=s.cross([],i,f);if(s.len(v)<1e-15)return null;const x=Math.atan2(-v[1],v[0]);return nc(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),x)}class Z{constructor(i,c){this.position=i,this.orientation=c}get position(){return this._position}set position(i){if(i){const c=i instanceof s.MercatorCoordinate?i:new s.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(c.x=s.wrap(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(i,c){if(this.orientation=null,!this.position)return;const p=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,v=this.position,x=s.MercatorCoordinate.fromLngLat(i,p),E=[x.x-v.x,x.y-v.y,x.z-v.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=Is(E,c)}setPitchBearing(i,c){this.orientation=nc(s.degToRad(i),s.degToRad(-c))}}class S{constructor(i,c){this._transform=s.identity([]),this.orientation=c,this.position=i}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var c;i&&s.setColumn(this._transform,3,[(c=i)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.identity$1([]),i&&Fh(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,c){this._orientation=nc(i,c),Fh(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,c){const p=new Float64Array(16);return s.invert(p,this.getWorldToCamera(i,c)),p}getWorldToCameraPosition(i,c,p){const v=this.position;s.scale$2(v,v,-i);const x=new Float64Array(16);return s.fromScaling(x,[p,p,p]),s.translate(x,x,v),x[10]*=c,x}getWorldToCamera(i,c){const p=new Float64Array(16),v=new Float64Array(4),x=this.position;return s.conjugate(v,this._orientation),s.scale$2(x,x,-i),s.fromQuat(p,v),s.translate(p,p,x),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=c,p[9]*=c,p[10]*=c,p[11]*=c,p}getCameraToClipPerspective(i,c,p,v){const x=new Float64Array(16);return s.perspective(x,i,c,p,v),x}getDistanceToElevation(i){const c=i===0?0:s.mercatorZfromAltitude(i,this.position[1]),p=this.forward();return(c-this.position[2])/p[2]}clone(){return new S([...this.position],[...this.orientation])}}function z(f,i){const c=we(f),p=function(x,E,A,P,R){const N=new s.LngLat(A.lng-180*De,A.lat),U=new s.LngLat(A.lng+180*De,A.lat),X=x.project(N.lng,N.lat),ne=x.project(U.lng,U.lat),J=-Math.atan2(ne.y-X.y,ne.x-X.x),W=s.MercatorCoordinate.fromLngLat(A);W.y=s.clamp(W.y,-.999975,.999975);const de=W.toLngLat(),ae=x.project(de.lng,de.lat),he=s.MercatorCoordinate.fromLngLat(de);he.x+=De;const fe=he.toLngLat(),ye=x.project(fe.lng,fe.lat),ce=At(ye.x-ae.x,ye.y-ae.y,J),Ee=s.MercatorCoordinate.fromLngLat(de);Ee.y+=De;const We=Ee.toLngLat(),it=x.project(We.lng,We.lat),ut=At(it.x-ae.x,it.y-ae.y,J),st=Math.abs(ce.x)/Math.abs(ut.y),Ot=s.identity([]);s.rotateZ(Ot,Ot,-J*(1-(R?0:P)));const qe=s.identity([]);return s.scale(qe,qe,[1,1-(1-st)*P,1]),qe[4]=-ut.x/ut.y*P,s.rotateZ(qe,qe,J),s.multiply$1(qe,Ot,qe),qe}(f.projection,0,f.center,c,i),v=ie(f);return s.scale(p,p,[v,v,1]),p}function ie(f){const i=f.projection,c=we(f),p=tt(i,f.center),v=tt(i,s.LngLat.convert(i.center));return Math.pow(2,p*c+(1-c)*v)}function we(f){const i=f.projection.range;if(!i)return 0;const c=Math.max(f.width,f.height),p=Math.log(c/1024)/Math.LN2;return s.smoothstep(i[0]+p,i[1]+p,f.zoom)}const De=1/4e4;function tt(f,i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=new s.LngLat(i.lng-180*De,c),v=new s.LngLat(i.lng+180*De,c),x=f.project(p.lng,c),E=f.project(v.lng,c),A=s.MercatorCoordinate.fromLngLat(p),P=s.MercatorCoordinate.fromLngLat(v),R=E.x-x.x,N=E.y-x.y,U=P.x-A.x,X=P.y-A.y,ne=Math.sqrt((U*U+X*X)/(R*R+N*N));return Math.log(ne)/Math.LN2}function At(f,i,c){const p=Math.cos(c),v=Math.sin(c);return{x:f*p-i*v,y:f*v+i*p}}class Gt{constructor(i,c,p,v,x,E,A){this.tileSize=512,this._renderWorldCopies=x===void 0||x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p==null?0:p,this._maxPitch=v==null?60:v,this.setProjection(E),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new xo,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new S,this._centerAltitude=0,this._centerAltitudeValidForExaggeration=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const i=new Gt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i){const c=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||c)&&this._updateCameraOnTerrain(),(i||c)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){i==null&&(i={name:"mercator"}),this.projectionOptions=i;const c=this.projection?this.getProjection():void 0;this.projection=s.getProjection(i);const p=this.getProjection();return L(c,p)?null:(this._calcMatrices(),p)}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const c=-i*Math.PI/180;var p;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(p=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(v,x,E){var A=x[0],P=x[1],R=x[2],N=x[3],U=Math.sin(E),X=Math.cos(E);v[0]=A*X+R*U,v[1]=P*X+N*U,v[2]=A*-U+R*X,v[3]=P*-U+N*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let v=0,x=0;for(let E=0;E<c.length;E++){const A=new s.pointGeometry(c[E][0]*this.width,p+c[E][1]*(this.height-p)),P=i.pointCoordinate(A);if(!P)continue;const R=1/Math.hypot(P[0]-this._camera.position[0],P[1]-this._camera.position[1]);v+=P[3]*R,x+=R}return x===0?NaN:v/x}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*c,v=this._mercatorZfromZoom(i),x=this._mercatorZfromZoom(this._maxZoom),E=Math.max(v-p,x);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[c.x,c.y,c.z]:[i.x,i.y,i.z];const v=s.length(s.sub([],this._camera.position,p));return s.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let c=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(p,this._camera.position)||(this._setCameraPosition(p),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,c=new Z;return c.position=new s.MercatorCoordinate(i[0],i[1],i[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const c=s.transformQuat([],[0,0,-1],i),p=s.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const v=Is(c,p);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(i){const c=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;i[2]=s.clamp(i[2],v/p,v/c),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new s.pointGeometry(0,0)),v=this.pointCoordinate(new s.pointGeometry(this.width,0)),x=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),E=this.pointCoordinate(new s.pointGeometry(0,this.height)),A=Math.floor(Math.min(p.x,v.x,x.x,E.x)),P=Math.floor(Math.max(p.x,v.x,x.x,E.x)),R=1;for(let N=A-R;N<=P+R;N++)N!==0&&c.push(new s.UnwrappedTileID(N,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const p=c,v=this.elevation&&!i.isTerrainDEM,x=this.projection.name==="mercator";if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const E=this.locationCoordinate(this.center),A=this.center.lat,P=1<<c,R=[P*E.x,P*E.y,0],N=this.projection.name==="globe",U=!N,X=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,U),ne=N?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),J=P*s.mercatorZfromAltitude(1,this.center.lat),W=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),de=[P*ne.x,P*ne.y,W*(U?1:J)],ae=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),he=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,fe=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ye=i.isTerrainDEM?-fe:this._elevation?this._elevation.getMinElevationBelowMSL():0,ce=this.projection.isReprojectedInTileSpace?ie(this):1,Ee=ft=>{const Qt=1/4e4,yn=new s.MercatorCoordinate(ft.x+Qt,ft.y,ft.z),tn=new s.MercatorCoordinate(ft.x,ft.y+Qt,ft.z),nn=ft.toLngLat(),xn=yn.toLngLat(),Bn=tn.toLngLat(),_n=this.locationCoordinate(nn),wn=this.locationCoordinate(xn),ii=this.locationCoordinate(Bn),Fi=Math.hypot(wn.x-_n.x,wn.y-_n.y),Fr=Math.hypot(ii.x-_n.x,ii.y-_n.y);return Math.sqrt(Fi*Fr)*ce/Qt},We=ft=>{const Qt=fe,yn=ye;return{aabb:s.tileAABB(this,P,0,0,0,ft,yn,Qt,this.projection),zoom:0,x:0,y:0,minZ:yn,maxZ:Qt,wrap:ft,fullyVisible:!1}},it=[];let ut=[];const st=c,Ot=i.reparseOverscaled?p:c,qe=ft=>ft*ft,Dt=qe((W-this._centerAltitude)*J),Mt=ft=>{if(!this._elevation||!ft.tileID||!x)return;const Qt=this._elevation.getMinMaxForTile(ft.tileID),yn=ft.aabb;Qt?(yn.min[2]=Qt.min,yn.max[2]=Qt.max,yn.center[2]=(yn.min[2]+yn.max[2])/2):(ft.shouldSplit=rn(ft),ft.shouldSplit||(yn.min[2]=yn.max[2]=yn.center[2]=this._centerAltitude))},rn=ft=>{if(ft.zoom<he)return!0;if(ft.zoom===st)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const Qt=ft.aabb.distanceX(de),yn=ft.aabb.distanceY(de);let tn=Dt,nn=1;if(N){tn=qe(ft.aabb.distanceZ(de));const Bn=Math.pow(2,ft.zoom),_n=s.latFromMercatorY((ft.y+1)/Bn),wn=s.latFromMercatorY(ft.y/Bn),ii=Math.min(Math.max(A,_n),wn),Fi=s.circumferenceAtLatitude(ii)/s.circumferenceAtLatitude(A);nn=Math.min(Fi,1)}else if(v&&(tn=qe(ft.aabb.distanceZ(de)*J)),this.projection.isReprojectedInTileSpace&&p<=5){const Bn=Math.pow(2,ft.zoom),_n=Ee(new s.MercatorCoordinate((ft.x+.5)/Bn,(ft.y+.5)/Bn));nn=_n>.85?1:_n}const xn=Qt*Qt+yn*yn+tn;return xn<qe((1<<st-ft.zoom)*ae*nn*((Bn,_n)=>{if(_n*qe(.707)<Bn)return 1;const wn=Math.sqrt(_n/Bn);return wn/(1.4144271570014144+(Math.pow(1.1,wn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(tn,Dt),xn))};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)it.push(We(-ft)),it.push(We(ft));for(it.push(We(0));it.length>0;){const ft=it.pop(),Qt=ft.x,yn=ft.y;let tn=ft.fullyVisible;if(!tn){const nn=ft.aabb.intersects(X);if(nn===0)continue;tn=nn===2}if(ft.zoom!==st&&rn(ft))for(let nn=0;nn<4;nn++){const xn=(Qt<<1)+nn%2,Bn=(yn<<1)+(nn>>1),_n={aabb:x?ft.aabb.quadrant(nn):s.tileAABB(this,P,ft.zoom+1,xn,Bn,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:xn,y:Bn,wrap:ft.wrap,fullyVisible:tn,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};v&&!N&&(_n.tileID=new s.OverscaledTileID(ft.zoom+1===st?Ot:ft.zoom+1,ft.wrap,ft.zoom+1,xn,Bn),Mt(_n)),it.push(_n)}else{const nn=ft.zoom===st?Ot:ft.zoom;if(i.minzoom&&i.minzoom>nn)continue;const xn=R[0]-(.5+Qt+(ft.wrap<<ft.zoom))*(1<<c-ft.zoom),Bn=R[1]-.5-yn,_n=ft.tileID?ft.tileID:new s.OverscaledTileID(nn,ft.wrap,ft.zoom,Qt,yn);ut.push({tileID:_n,distanceSq:xn*xn+Bn*Bn})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,Qt=this.horizonLineFromTop();ut=ut.filter(yn=>{const tn=[0,0,0,1],nn=[s.EXTENT,s.EXTENT,0,1],xn=this.calculateFogTileMatrix(yn.tileID.toUnwrapped());s.transformMat4$1(tn,tn,xn),s.transformMat4$1(nn,nn,xn);const Bn=s.getAABBPointSquareDist(tn,nn);if(Bn===0)return!0;let _n=!1;const wn=this._elevation;if(wn&&Bn>ft&&Qt!==0){const ii=this.calculateProjMatrix(yn.tileID.toUnwrapped());let Fi;i.isTerrainDEM||(Fi=wn.getMinMaxForTile(yn.tileID)),Fi||(Fi={min:ye,max:fe});const Fr=s.furthestTileCorner(this.rotation),Br=[Fr[0]*s.EXTENT,Fr[1]*s.EXTENT,Fi.max];s.transformMat4(Br,Br,ii),_n=(1-Br[1])*this.height*.5<Qt}return Bn<ft||_n})}return ut.sort((ft,Qt)=>ft.distanceSq-Qt.distanceSq).map(ft=>ft.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=this.projection.project(i.lng,c);return new s.pointGeometry(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,c){let p,v;const x=this.centerPoint;if(this.projection.name==="globe"){const A=this.worldSize;p=(c.x-x.x)/A,v=(c.y-x.y)/A}else{const A=this.pointCoordinate(c),P=this.pointCoordinate(x);p=A.x-P.x,v=A.y-P.y}const E=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(E.x-p,E.y-v))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this._coordinatePoint(this.locationCoordinate(i),!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,c){const p=c?s.mercatorZfromAltitude(c,i.lat):void 0,v=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(v.x,v.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,c){const p=c!=null?c:this._centerAltitude,v=[i.x,i.y,0,1],x=[i.x,i.y,1,1];s.transformMat4$1(v,v,this.pixelMatrixInverse),s.transformMat4$1(x,x,this.pixelMatrixInverse);const E=x[3];s.scale$1(v,v,1/v[3]),s.scale$1(x,x,1/E);const A=v[2],P=x[2];return{p0:v,p1:x,t:A===P?0:(p-A)/(P-A)}}screenPointToMercatorRay(i){const c=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return s.transformMat4$1(c,c,this.pixelMatrixInverse),s.transformMat4$1(p,p,this.pixelMatrixInverse),s.scale$1(c,c,1/c[3]),s.scale$1(p,p,1/p[3]),c[2]=s.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,p[2]=s.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,s.scale$1(c,c,1/this.worldSize),s.scale$1(p,p,1/this.worldSize),new s.Ray([c[0],c[1],c[2]],s.normalize([],s.sub([],p,c)))}rayIntersectionCoordinate(i){const{p0:c,p1:p,t:v}=i,x=s.mercatorZfromAltitude(c[2],this._center.lat),E=s.mercatorZfromAltitude(p[2],this._center.lat);return new s.MercatorCoordinate(s.number(c[0],p[0],v)/this.worldSize,s.number(c[1],p[1],v)/this.worldSize,s.number(x,E,v))}pointCoordinate(i,c=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,c)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);const c=this.elevation;let p=this.elevation.pointCoordinate(i);if(p)return new s.MercatorCoordinate(p[0],p[1],p[2]);let v=0,x=this.horizonLineFromTop();if(i.y>x)return this.pointCoordinate(i);const E=.02*x,A=i.clone();for(let P=0;P<10&&x-v>E;P++){A.y=s.number(v,x,.66);const R=c.pointCoordinate(A);R?(x=A.y,p=R):v=A.y}return p?new s.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){if(this.elevation)return!this.elevation.pointCoordinate(i);{const c=this.horizonLineFromTop();return i.y<c}}_coordinatePoint(i,c){const p=c&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,v=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return s.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new s.pointGeometry(v[0]/v[3],v[1]/v[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(i,c){const p=new s.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),v=new s.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),x=new s.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),E=new s.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let A=this.pointCoordinate(p,i),P=this.pointCoordinate(v,i);const R=this.pointCoordinate(x,c),N=this.pointCoordinate(E,c),U=(X,ne)=>(ne.y-X.y)/(ne.x-X.x);return A.y>1&&P.y>=0?A=new s.MercatorCoordinate((1-N.y)/U(N,A)+N.x,1):A.y<0&&P.y<=1&&(A=new s.MercatorCoordinate(-N.y/U(N,A)+N.x,0)),P.y>1&&A.y>=0?P=new s.MercatorCoordinate((1-R.y)/U(R,P)+R.x,1):P.y<0&&A.y<=1&&(P=new s.MercatorCoordinate(-R.y/U(R,P)+R.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(A)).extend(this.coordinateLocation(P)).extend(this.coordinateLocation(N)).extend(this.coordinateLocation(R))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length)return this._getBounds(0,0);const c=i.visibleDemTiles.reduce((p,v)=>{if(v.dem){const x=v.dem.tree;p.min=Math.min(p.min,x.minimums[0]),p.max=Math.max(p.max,x.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBounds(c.min*i.exaggeration(),c.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,p=this.height/2-c*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,c){return this.projection.createTileMatrix(this,c,i)}calculateDistanceTileData(i){const c=i.key,p=this._distanceTileDataCache;if(p[c])return p[c];const v=i.canonical,x=1/this.height,E=this.cameraWorldSize/this.zoomScale(v.z),A=(v.x+Math.pow(2,v.z)*i.wrap)*E,P=v.y*E,R=this.point,N=this.angle,U=Math.sin(-N),X=-Math.cos(-N);return p[c]={bearing:[U,X],center:[(R.x-A)*x,(R.y-P)*x],scale:E/s.EXTENT*x},p[c]}calculateFogTileMatrix(i){const c=i.key,p=this._fogTileMatrixCache;if(p[c])return p[c];const v=this.calculatePosMatrix(i,this.cameraWorldSize);return s.multiply$1(v,this.worldToFogMatrix,v),p[c]=new Float32Array(v),p[c]}calculateProjMatrix(i,c=!1){const p=i.key,v=c?this._alignedProjMatrixCache:this._projMatrixCache;if(v[p])return v[p];const x=this.calculatePosMatrix(i,this.worldSize);return s.multiply$1(x,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,x),v[p]=new Float32Array(x),v[p]}calculatePixelsToTileUnitsMatrix(i){const c=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[c])return p[c];const v=function(x,E){const{scale:A}=x.tileTransform,P=A*s.EXTENT/(x.tileSize*Math.pow(2,E.zoom-x.tileID.overscaledZ+x.tileID.canonical.z));return R=new Float32Array(4),X=(N=E.inverseAdjustmentMatrix)[1],ne=N[2],J=N[3],de=(U=[P,P])[1],R[0]=N[0]*(W=U[0]),R[1]=X*W,R[2]=ne*de,R[3]=J*de,R;var R,N,U,X,ne,J,W,de}(i,this);return p[c]=v,p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(c),v=this._camera.forward(),x=s.mercatorZfromAltitude(1,this._center.lat);p[2]/=x,v[2]/=x,s.normalize(v,v);const E=i.raycast(p,v,i.exaggeration());if(E){const A=s.scaleAndAdd([],p,v,E),P=new s.MercatorCoordinate(A[0],A[1],s.mercatorZfromAltitude(A[2],s.latFromMercatorY(A[1]))),R=(P.z+s.length([P.x-p[0],P.y-p[1],P.z-p[2]*x]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(R),this._centerAltitude=P.toAltitude(),this._center=this.coordinateLocation(P),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(c),v=i.getAtPointOrZero(new s.MercatorCoordinate(...p)),x=this._minimumHeightOverTerrain()*Math.cos(s.degToRad(this._maxPitch)),E=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*v;if(E<x){const A=this.locationCoordinate(this._center,this._centerAltitude),P=[A.x-p[0],A.y-p[1],A.z-p[2]],R=s.length(P);P[2]-=(x-E)/this._projectionScaler;const N=s.length(P);if(N===0)return;s.scale$2(P,P,R/N*this._projectionScaler),this._camera.position=[A.x-P[0],A.y-P[1],A.z*this._projectionScaler-P[2]],this._camera.orientation=Is(P,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const U=this.center;return U.lat=s.clamp(U.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(U.lng=s.clamp(U.lng,this.minLng,this.maxLng)),this.center=U,void(this._constraining=!1)}const i=this._unmodified,{x:c,y:p}=this.point;let v=0,x=c,E=p;const A=this.width/2,P=this.height/2,R=this.worldMinY*this.scale,N=this.worldMaxY*this.scale;if(p-P<R&&(E=R+P),p+P>N&&(E=N-P),N-R<this.height&&(v=Math.max(v,this.height/(N-R)),E=(N+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const U=this.worldMinX*this.scale,X=this.worldMaxX*this.scale,ne=this.worldSize/2-(U+X)/2;x=(c+ne+this.worldSize)%this.worldSize-ne,x-A<U&&(x=U+A),x+A>X&&(x=X-A),X-U<this.width&&(v=Math.max(v,this.width/(X-U)),x=(X+U)/2)}x===c&&E===p||(this.center=this.unproject(new s.pointGeometry(x,E))),v&&(this.zoom+=this.scaleZoom(v)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this._fov/2,c=this.centerOffset,p=this.pixelsPerMeter;this._projectionScaler=p/(s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(i)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?p:1),x=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);x[8]=2*-c.x/this.width,x[9]=2*c.y/this.height;let E=s.mul([],x,v);if(this.projection.isReprojectedInTileSpace){const ye=this.locationCoordinate(this.center),ce=s.identity([]);s.translate(ce,ce,[ye.x*this.worldSize,ye.y*this.worldSize,0]),s.multiply$1(ce,ce,z(this)),s.translate(ce,ce,[-ye.x*this.worldSize,-ye.y*this.worldSize,0]),s.multiply$1(E,E,ce),this.inverseAdjustmentMatrix=function(Ee){const We=z(Ee,!0);return Xe([],[We[0],We[1],We[4],We[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],E,[this.worldSize,this.worldSize,this.worldSize/p,1]),this.projMatrix=E,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const A=new Float32Array(16);s.identity(A),s.scale(A,A,[1,-1,1]),s.rotateX(A,A,this._pitch),s.rotateZ(A,A,this.angle);const P=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),R=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;P[8]=2*-c.x/this.width,P[9]=2*(c.y+R)/this.height,this.skyboxMatrix=s.multiply$1(A,P,A);const N=this.point,U=N.x,X=N.y,ne=this.width%2/2,J=this.height%2/2,W=Math.cos(this.angle),de=Math.sin(this.angle),ae=U-Math.round(U)+W*ne+de*J,he=X-Math.round(X)+W*J+de*ne,fe=new Float64Array(E);if(s.translate(fe,fe,[ae>.5?ae-1:ae,he>.5?he-1:he,0]),this.alignedProjMatrix=fe,E=s.create(),s.scale(E,E,[this.width/2,-this.height/2,1]),s.translate(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=s.create(),s.scale(E,E,[1,-1,1]),s.translate(E,E,[-1,-1,0]),s.scale(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E,this.pixelMatrix=s.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},E=s.invert(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");this.pixelMatrixInverse=E,this.globeMatrix=this.projection.name==="globe"?s.calculateGlobeMatrix(this):E,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,c=this.cameraPixelsPerMeter,p=this._camera.position,v=1/this.height,x=[i,i,c];s.scale$2(x,x,v),s.scale$2(p,p,-1),s.multiply$2(p,p,x);const E=s.create();s.translate(E,E,p),s.scale(E,E,x),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,c,v)}_computeCameraPosition(i){const c=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),v=this.point,x=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-i/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-p[0]*x,v.y/this.worldSize-p[1]*x,i/this.worldSize*this._centerAltitude-p[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=i[2];let v=1;p>0&&(v=Math.min((c-this._camera.position[2])/p,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,v),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const i=this._camera.position,c=this._camera.forward(),{pitch:p,bearing:v}=this._camera.getPitchBearing(),x=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),A=Math.max((i[2]-x)/Math.cos(p),E),P=this._zoomFromMercatorZ(A);s.scaleAndAdd(i,i,c,A),this._pitch=s.clamp(p,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(v,-Math.PI,Math.PI),this._setZoom(s.clamp(P,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(i,c){const p=Math.min(i.x,c.x),v=Math.max(i.x,c.x),x=Math.min(i.y,c.y),E=Math.max(i.y,c.y);if(x<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const A=[new s.pointGeometry(p,x),new s.pointGeometry(v,E),new s.pointGeometry(p,E),new s.pointGeometry(v,x)],P=this.renderWorldCopies?-3:0,R=this.renderWorldCopies?4:1;for(const N of A){const U=this.pointRayIntersection(N);if(U.t<0)return!0;const X=this.rayIntersectionCoordinate(U);if(X.x<P||X.y<0||X.x>R||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,c){const p=s.length(s.sub([],this._camera.position,i)),v=this._zoomFromMercatorZ(p)+c;return p-this._mercatorZfromZoom(v)}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,i))}}function ln(f,i){let c=!1,p=null;const v=()=>{p=null,c&&(f(),p=setTimeout(v,i),c=!1)};return()=>(c=!0,p||v(),p)}class pn{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ln(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(i){const c=this._map;if(!c)return"";const p=c.getCenter(),v=Math.round(100*c.getZoom())/100,x=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,x),A=Math.round(p.lng*E)/E,P=Math.round(p.lat*E)/E,R=c.getBearing(),N=c.getPitch();let U="";if(U+=i?`/${A}/${P}/${v}`:`${v}/${P}/${A}`,(R||N)&&(U+="/"+Math.round(10*R)/10),N&&(U+=`/${Math.round(N)}`),this._hashName){const X=this._hashName;let ne=!1;const J=s.window.location.hash.slice(1).split("&").map(W=>{const de=W.split("=")[0];return de===X?(ne=!0,`${de}=${U}`):W}).filter(W=>W);return ne||J.push(`${X}=${U}`),`#${J.join("&")}`}return`#${U}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(c=p)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(c[3]||0):i.getBearing();return i.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}const $t={linearity:.3,easing:s.bezier(0,0,.3,1)},Xn=s.extend({deceleration:2500,maxSpeed:1400},$t),Pn=s.extend({deceleration:20,maxSpeed:1400},$t),On=s.extend({deceleration:1e3,maxSpeed:360},$t),Un=s.extend({deceleration:1e3,maxSpeed:90},$t);class Fn{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=s.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const x=Mn(c.pan.mag(),p,s.extend({},Xn,i||{}));v.offset=c.pan.mult(x.amount/c.pan.mag()),v.center=this._map.transform.center,di(v,x)}if(c.zoom){const x=Mn(c.zoom,p,Pn);v.zoom=this._map.transform.zoom+x.amount,di(v,x)}if(c.bearing){const x=Mn(c.bearing,p,On);v.bearing=this._map.transform.bearing+s.clamp(x.amount,-179,179),di(v,x)}if(c.pitch){const x=Mn(c.pitch,p,Un);v.pitch=this._map.transform.pitch+x.amount,di(v,x)}if(v.zoom||v.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;v.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function di(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function Mn(f,i,c){const{maxSpeed:p,linearity:v,deceleration:x}=c,E=s.clamp(f*v/(i/1e3),-p,p),A=Math.abs(E)/(x*v);return{easing:c.easing,duration:1e3*A,amount:E*(A/2)}}class Cn extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,v={}){const x=Ae(c.getCanvasContainer(),p),E=c.unproject(x);super(i,s.extend({point:x,lngLat:E,originalEvent:p},v)),this._defaultPrevented=!1,this.target=c}}class ni extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const v=i==="touchend"?p.changedTouches:p.touches,x=Le(c.getCanvasContainer(),v),E=x.map(P=>c.unproject(P)),A=x.reduce((P,R,N,U)=>P.add(R.div(U.length)),new s.pointGeometry(0,0));super(i,{points:x,point:A,lngLats:E,lngLat:c.unproject(A),originalEvent:p}),this._defaultPrevented=!1}}class li extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class ci{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new li(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Cn(i.type,this._map,i))}mouseup(i){this._map.fire(new Cn(i.type,this._map,i))}preclick(i){const c=s.extend({},i);c.type="preclick",this._map.fire(new Cn(c.type,this._map,c))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Cn(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Cn(i.type,this._map,i))}mouseover(i){this._map.fire(new Cn(i.type,this._map,i))}mouseout(i){this._map.fire(new Cn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ni(i.type,this._map,i))}touchmove(i){this._map.fire(new ni(i.type,this._map,i))}touchend(i){this._map.fire(new ni(i.type,this._map,i))}touchcancel(i){this._map.fire(new ni(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Cn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Cn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _i{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(G(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=p,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(v.x,p.x),E=Math.max(v.x,p.x),A=Math.min(v.y,p.y),P=Math.max(v.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${x}px,${A}px)`,this._box.style.width=E-x+"px",this._box.style.height=P-A+"px")})}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,v=c;if(this.reset(),Ce(),p.x!==v.x||p.y!==v.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Q(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new s.Event(i,{originalEvent:c}))}}function pi(f,i){const c={};for(let p=0;p<f.length;p++)c[f[p].identifier]=i[p];return c}class Oi{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(v){const x=new s.pointGeometry(0,0);for(const E of v)x._add(E);return x.div(v.length)}(c),this.touches=pi(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const v=pi(p,c);for(const x in this.touches){const E=this.touches[x],A=v[x];(!A||A.dist(E)>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Qi{constructor(i){this.singleTap=new Oi(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const v=this.singleTap.touchend(i,c,p);if(v){const x=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(v)<30;if(x&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Ft{constructor(){this._zoomIn=new Qi({numTouches:1,numTaps:2}),this._zoomOut=new Qi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const v=this._zoomIn.touchend(i,c,p),x=this._zoomOut.touchend(i,c,p);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(v)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ji={0:1,2:2};class zo{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const p=$e(i);this._correctButton(i,p)&&(this._lastPoint=c,this._eventButton=p)}mousemoveWindow(i,c){const p=this._lastPoint;if(p){if(i.preventDefault(),this._eventButton!=null&&function(v,x){const E=ji[x];return v.buttons===void 0||(v.buttons&E)!==E}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(p,c)}}mouseupWindow(i){this._lastPoint&&$e(i)===this._eventButton&&(this._moved&&Ce(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yr extends zo{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Nr extends zo{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const p=.8*(c.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class hr extends zo{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const p=-.5*(c.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class Ni{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(p.length===1)return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.preventDefault(),this._calculateTransform(i,c,p)}}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const v=pi(p,c),x=new s.pointGeometry(0,0),E=new s.pointGeometry(0,0);let A=0;for(const R in v){const N=v[R],U=this._touches[R];U&&(x._add(N),E._add(N.sub(U)),A++,v[R]=N)}if(this._touches=v,A<this._minTouches||!E.mag())return;const P=E.div(A);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(A),panDelta:P}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class No{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,c,p){return{}}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){const v=this._firstTwoTouches;if(!v)return;i.preventDefault();const[x,E]=v,A=fr(p,c,x),P=fr(p,c,E);if(!A||!P)return;const R=this._aroundCenter?null:A.add(P).div(2);return this._move([A,P],R,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[v,x]=this._firstTwoTouches,E=fr(p,c,v),A=fr(p,c,x);E&&A||(this._active&&Ce(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fr(f,i,c){for(let p=0;p<f.length;p++)if(f[p].identifier===c)return i[p]}function vr(f,i){return Math.log(f/i)/Math.LN2}class Kr extends No{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(vr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vr(this._distance,p),pinchAround:c}}}function Ta(f,i){return 180*f.angleWith(i)/Math.PI}class Ms extends No{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ta(this._vector,p),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Ta(i,this._startVector);return Math.abs(p)<c}}function Fo(f){return Math.abs(f.y)>Math.abs(f.x)}class ic extends No{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Fo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){const v=this._lastPoints;if(!v)return;const x=i[0].sub(v[0]),E=i[1].sub(v[1]);return this._map._cooperativeGestures&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(x,E,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(x.y+E.y)/2*-.5})}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,x=c.mag()>=2;if(!v&&!x)return;if(!v||!x)return this._firstMove==null&&(this._firstMove=p),p-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return Fo(i)&&Fo(c)&&E}}const Bh={panStep:100,bearingStep:15,pitchStep:10};class rc{constructor(){const i=Bh;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,v=0,x=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:A=>{const P=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:$h,zoom:c?Math.round(P)+c*(i.shiftKey?2:1):P,bearing:A.getBearing()+p*this._bearingStep,pitch:A.getPitch()+v*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:A.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $h(f){return f*(2-f)}const oc=4.000244140625;class mu{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=s.exported.now(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%oc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Ae(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,c=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>oc?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&R!==0&&(R=1/R);const N=c(),U=Math.pow(2,N),X=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):U;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(X*R))),this._type==="wheel"&&(this._startZoom=c(),this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:c(),v=this._startZoom,x=this._easing;let E,A=!1;if(this._type==="wheel"&&v&&x){const P=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),R=x(P);E=s.number(v,p,R),P<1?this._frameId||(this._frameId=!0):A=!0}else E=p,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:E-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=s.ease;if(this._prevEase){const p=this._prevEase,v=(s.exported.now()-p.start)/p.duration,x=p.easing(v+.01)-p.easing(v),E=.27/Math.sqrt(x*x+1e-4)*.01,A=Math.sqrt(.0729-E*E);c=s.bezier(E,A,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!s.window.document.fullscreenElement||!!s.window.document.webkitFullscreenElement}_showBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class _u{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class gu{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yu{constructor(){this._tap=new Qi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,c,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=c[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,c,p))}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=c[0],x=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,c,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uh{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ll{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vu{constructor(i,c,p,v){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Aa=f=>f.zoom||f.drag||f.pitch||f.rotate;class sc extends s.Event{}class Hp{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,c){const p=s.sub([],c,i);this.radius=s.length(p[2]<0?s.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const c=s.scale$2([],i,this.radius);if(c[2]>0){const p=s.scale$2([],[0,0,1],s.dot(c,[0,0,1])),v=s.scale$2([],s.normalize([],[c[0],c[1],0]),this.radius),x=s.add([],c,s.scale$2([],s.sub([],s.add([],v,p),c),2));c[0]=x[0],c[1]=x[1]}return c}}function ac(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Gp{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fn(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Hp,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),s.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[v,x,E]of this._listeners)v.addEventListener(x,v===s.window.document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,p]of this._listeners)i.removeEventListener(c,i===s.window.document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new ci(c,i));const v=c.boxZoom=new _i(c,i);this._add("boxZoom",v);const x=new Ft,E=new gu;c.doubleClickZoom=new _u(E,x),this._add("tapZoom",x),this._add("clickZoom",E);const A=new yu;this._add("tapDragZoom",A);const P=c.touchPitch=new ic(c);this._add("touchPitch",P);const R=new Nr(i),N=new hr(i);c.dragRotate=new ll(i,R,N),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const U=new Yr(i),X=new Ni(c,i);c.dragPan=new Uh(p,U,X),this._add("mousePan",U),this._add("touchPan",X,["touchZoom","touchRotate"]);const ne=new Ms,J=new Kr;c.touchZoomRotate=new vu(p,J,ne,A),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Qn(c));const W=c.scrollZoom=new mu(c,this);this._add("scrollZoom",W,["mousePan"]);const de=c.keyboard=new rc;this._add("keyboard",de);for(const ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[ae]&&c[ae].enable(i[ae])}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Aa(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const v in i)if(v!==p&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}handleEvent(i,c){this._updatingCamera=!0;const p=i.type==="renderFrame",v=p?void 0:i,x={needsRenderFrame:!1},E={},A={},P=i.touches?this._getMapTouches(i.touches):void 0,R=P?Le(this._el,P):p?void 0:Ae(this._el,i);for(const{handlerName:X,handler:ne,allowed:J}of this._handlers){if(!ne.isEnabled())continue;let W;this._blockedByActive(A,J,X)?ne.reset():ne[c||i.type]&&(W=ne[c||i.type](i,R,P),this.mergeHandlerResult(x,E,W,X,v),W&&W.needsRenderFrame&&this._triggerRenderFrame()),(W||ne.isActive())&&(A[X]=ne)}const N={};for(const X in this._previousActiveHandlers)A[X]||(N[X]=v);this._previousActiveHandlers=A,(Object.keys(N).length||ac(x))&&(this._changes.push([x,E,N]),this._triggerRenderFrame()),(Object.keys(A).length||ac(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=x;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))}mergeHandlerResult(i,c,p,v,x){if(!p)return;s.extend(i,p);const E={handlerName:v,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(c.zoom=E),p.panDelta!==void 0&&(c.drag=E),p.pitchDelta!==void 0&&(c.pitch=E),p.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},p={};for(const[v,x,E]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new s.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.aroundCoord!==void 0&&(i.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),s.extend(c,x),s.extend(p,E);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const v=this._map,x=v.transform,E=he=>[he.x,he.y,he.z];if((he=>{const fe=this._eventsInProgress.drag;return fe&&!this._handlersById[fe.handlerName].isActive()})()&&!ac(i)){const he=x.zoom;x.cameraElevationReference="sea",x.recenterOnTerrain(),x.cameraElevationReference="ground",he!==x.zoom&&this._map._update(!0)}if(!ac(i))return void this._fireEvents(c,p,!0);let{panDelta:A,zoomDelta:P,bearingDelta:R,pitchDelta:N,around:U,aroundCoord:X,pinchAround:ne}=i;ne!==void 0&&(U=ne),(he=>c.drag&&!this._eventsInProgress.drag)()&&U&&(this._dragOrigin=E(x.pointCoordinate3D(U)),this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",v._stop(!0),U=U||v.transform.centerPoint,R&&(x.bearing+=R),N&&(x.pitch+=N),x._updateCameraState();const J=[0,0,0];if(A){const he=x.pointCoordinate(U);if(x.projection.name==="globe"){const fe=s.latFromMercatorY(he.y),ye=x.center.lat,ce=Math.min(s.mercatorZfromAltitude(1,fe)/s.mercatorZfromAltitude(1,ye),2);A=A.rotate(-x.angle),J[0]=-A.x/x.worldSize*ce,J[1]=-A.y/x.worldSize*ce}else{const fe=x.pointCoordinate(U.sub(A));he&&fe&&(J[0]=fe.x-he.x,J[1]=fe.y-he.y)}}const W=x.zoom,de=[0,0,0];if(P){const he=E(X||x.pointCoordinate3D(U)),fe={dir:s.normalize([],s.sub([],he,x._camera.position))};if(fe.dir[2]<0){const ye=x.zoomDeltaToMovement(he,P);s.scale$2(de,fe.dir,ye)}}const ae=s.add(J,J,de);x._translateCameraConstrained(ae),P&&Math.abs(x.zoom-W)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const v=Aa(this._eventsInProgress),x=Aa(i),E={};for(const N in i){const{originalEvent:U}=i[N];this._eventsInProgress[N]||(E[`${N}start`]=U),this._eventsInProgress[N]=i[N]}!v&&x&&this._fireEvent("movestart",x.originalEvent);for(const N in E)this._fireEvent(N,E[N]);x&&this._fireEvent("move",x.originalEvent);for(const N in i){const{originalEvent:U}=i[N];this._fireEvent(N,U)}const A={};let P;for(const N in this._eventsInProgress){const{handlerName:U,originalEvent:X}=this._eventsInProgress[N];this._handlersById[U].isActive()||(delete this._eventsInProgress[N],P=c[U]||X,A[`${N}end`]=P)}for(const N in A)this._fireEvent(N,A[N]);const R=Aa(this._eventsInProgress);if(p&&(v||x)&&!R){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;N?(U(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:P})):(this._map.fire(new s.Event("moveend",{originalEvent:P})),U(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new s.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new sc("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class sd extends s.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=s.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},c),p)}panTo(i,c,p){return this.easeTo(s.extend({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(s.extend({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(s.extend({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,s.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=s.LngLatBounds.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_extendCameraOptions(i){const c={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const p=i.padding;i.padding={top:p,bottom:p,right:p,left:p}}return i.padding=s.extend(c,i.padding),i}_cameraForBoxAndBearing(i,c,p,v){const x=this._extendCameraOptions(v),E=this.transform,A=E.padding,P=E.project(s.LngLat.convert(i)),R=E.project(s.LngLat.convert(c)),N=new s.pointGeometry(P.x,R.y),U=new s.pointGeometry(R.x,P.y),X=-s.degToRad(p),ne=P.rotate(X),J=R.rotate(X),W=N.rotate(X),de=U.rotate(X),ae=new s.pointGeometry(Math.max(ne.x,J.x,W.x,de.x),Math.max(ne.y,J.y,W.y,de.y)),he=new s.pointGeometry(Math.min(ne.x,J.x,W.x,de.x),Math.min(ne.y,J.y,W.y,de.y)),fe=ae.sub(he),ye=(E.width-((A.left||0)+(A.right||0)+x.padding.left+x.padding.right))/fe.x,ce=(E.height-((A.top||0)+(A.bottom||0)+x.padding.top+x.padding.bottom))/fe.y;if(ce<0||ye<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ee=Math.min(E.scaleZoom(E.scale*Math.min(ye,ce)),x.maxZoom),We=typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new s.pointGeometry(x.offset.x,x.offset.y):s.pointGeometry.convert(x.offset),it=new s.pointGeometry((x.padding.left-x.padding.right)/2,(x.padding.top-x.padding.bottom)/2).rotate(p*Math.PI/180),ut=We.add(it).mult(E.scale/E.zoomScale(Ee));return{center:E.unproject(P.add(R).div(2).sub(ut)),zoom:Ee,bearing:p}}_cameraForBox(i,c,p,v,x){const E=this._extendCameraOptions(x);p=p||0,v=v||0,i=s.LngLat.convert(i),c=s.LngLat.convert(c);const A=this.transform.clone();A.padding=E.padding;const P=this.getFreeCameraOptions(),R=new s.LngLat(.5*(i.lng+c.lng),.5*(i.lat+c.lat)),N=.5*(p+v);if(A._camera.position[2]<s.mercatorZfromAltitude(N,R.lat))return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");P.lookAtPoint(R),A.setFreeCameraOptions(P);const U=s.MercatorCoordinate.fromLngLat(i),X=s.MercatorCoordinate.fromLngLat(c),ne=A.pointRayIntersection(A.centerPoint,N),J=[(W=A.rayIntersectionCoordinate(ne)).x,W.y,W.z];var W;const de=A.screenPointToMercatorRay(A.centerPoint),ae=A.projection.name!=="globe";let he,fe=0;do{const ye=Math.floor(A.zoom),ce=1<<ye,Ee=Math.min(ce*U.x,ce*X.x),We=Math.min(ce*U.y,ce*X.y),it=Math.max(ce*U.x,ce*X.x),ut=Math.max(ce*U.y,ce*X.y),st=new s.Aabb([Ee,We,p],[it,ut,v]),Ot=s.Frustum.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ye,ae);if(st.intersects(Ot)!==2){he&&(A._camera.position=s.scaleAndAdd([],A._camera.position,de.dir,-he),A._updateStateFromCamera());break}const qe=s.sub([],A._camera.position,J);he=.5*s.length(qe),A._camera.position=s.scaleAndAdd([],A._camera.position,de.dir,he);try{A._updateStateFromCamera()}catch{return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++fe<10);return{center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}_raycastElevationBox(i,c){const p=this.transform.elevation;if(!p)return;const v=new s.pointGeometry(i.x,c.y),x=new s.pointGeometry(c.x,i.y),E=p.pointCoordinate(i);if(!E)return;const A=p.pointCoordinate(c);if(!A)return;const P=p.pointCoordinate(v);if(!P)return;const R=p.pointCoordinate(x);if(!R)return;const N=new s.MercatorCoordinate(E[0],E[1]).toLngLat(),U=new s.MercatorCoordinate(A[0],A[1]).toLngLat(),X=new s.MercatorCoordinate(P[0],P[1]).toLngLat(),ne=new s.MercatorCoordinate(R[0],R[1]).toLngLat(),J=Math.min(N.lng,Math.min(U.lng,Math.min(X.lng,ne.lng))),W=Math.min(N.lat,Math.min(U.lat,Math.min(X.lat,ne.lat))),de=Math.max(N.lng,Math.max(U.lng,Math.max(X.lng,ne.lng))),ae=Math.max(N.lat,Math.max(U.lat,Math.max(X.lat,ne.lat))),he=Math.min(E[3],Math.min(A[3],Math.min(P[3],R[3]))),fe=Math.max(E[3],Math.max(A[3],Math.max(P[3],R[3])));return{minLngLat:new s.LngLat(J,W),maxLngLat:new s.LngLat(de,ae),minAltitude:he,maxAltitude:fe}}fitScreenCoordinates(i,c,p,v,x){let E,A,P,R;const N=s.pointGeometry.convert(i),U=s.pointGeometry.convert(c),X=this._raycastElevationBox(N,U);if(X)E=X.minLngLat,A=X.maxLngLat,P=X.minAltitude,R=X.maxAltitude;else{if(this.transform.anyCornerOffEdge(N,U))return this;E=this.transform.pointLocation(N),A=this.transform.pointLocation(U)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(i)),this.transform.pointLocation(s.pointGeometry.convert(c)),p,v):this._cameraForBox(E,A,P,R,v),v,x)}_fitInternal(i,c,p){return i?(delete(c=s.extend(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let v=!1,x=!1,E=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(v=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=s.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(E=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),v&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),x&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),E&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Vh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,c){const p=this.transform;if(!p.projection.supportsFreeCamera)return s.warnOnce(Vh),this;this.stop();const v=p.zoom,x=p.pitch,E=p.bearing;p.setFreeCameraOptions(i);const A=v!==p.zoom,P=x!==p.pitch,R=E!==p.bearing;return this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),A&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),R&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),P&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)),this}easeTo(i,c){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||!i.essential&&s.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,v=this.getZoom(),x=this.getBearing(),E=this.getPitch(),A=this.getPadding(),P="zoom"in i?+i.zoom:v,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,N="pitch"in i?+i.pitch:E,U="padding"in i?i.padding:p.padding,X=s.pointGeometry.convert(i.offset);let ne,J,W;if(p.projection.name==="globe"){const ut=s.MercatorCoordinate.fromLngLat(p.center),st=X.rotate(-p.angle);ut.x+=st.x/p.worldSize,ut.y+=st.y/p.worldSize;const Ot=ut.toLngLat(),qe=s.LngLat.convert(i.center||Ot);this._normalizeCenter(qe),ne=p.centerPoint.add(st),J=new s.pointGeometry(ut.x,ut.y).mult(p.worldSize),W=new s.pointGeometry(s.mercatorXfromLng(qe.lng),s.mercatorYfromLat(qe.lat)).mult(p.worldSize).sub(J)}else{ne=p.centerPoint.add(X);const ut=p.pointLocation(ne),st=s.LngLat.convert(i.center||ut);this._normalizeCenter(st),J=p.project(ut),W=p.project(st).sub(J)}const de=p.zoomScale(P-v);let ae,he;i.around&&(ae=s.LngLat.convert(i.around),he=p.locationPoint(ae));const fe=this._zooming||P!==v,ye=this._rotating||x!==R,ce=this._pitching||N!==E,Ee=!p.isPaddingEqual(U),We=ut=>st=>{if(fe&&(ut.zoom=s.number(v,P,st)),ye&&(ut.bearing=s.number(x,R,st)),ce&&(ut.pitch=s.number(E,N,st)),Ee&&(ut.interpolatePadding(A,U,st),ne=ut.centerPoint.add(X)),ae)ut.setLocationAtPoint(ae,he);else{const Ot=ut.zoomScale(ut.zoom-v),qe=P>v?Math.min(2,de):Math.max(.5,de),Dt=Math.pow(qe,1-st),Mt=ut.unproject(J.add(W.mult(st*Dt)).mult(Ot));ut.setLocationAtPoint(ut.renderWorldCopies?Mt.wrap():Mt,ne)}return i.preloadOnly||this._fireMoveEvents(c),ut};if(i.preloadOnly){const ut=this._emulate(We,i.duration,p);return this._preloadTiles(ut),this}const it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=fe,this._rotating=ye,this._pitching=ce,this._padding=Ee,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,it),this._ease(We(p),ut=>{p.recenterOnTerrain(),this._afterEase(c,ut)},i),this}_prepareEase(i,c,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||p.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new s.Event("zoomend",i)),v&&this.fire(new s.Event("rotateend",i)),x&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,c){if(!i.essential&&s.exported.prefersReducedMotion){const tn=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(tn,c)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const p=this.transform,v=this.getZoom(),x=this.getBearing(),E=this.getPitch(),A=this.getPadding(),P="zoom"in i?s.clamp(+i.zoom,p.minZoom,p.maxZoom):v,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,N="pitch"in i?+i.pitch:E,U="padding"in i?i.padding:p.padding,X=p.zoomScale(P-v),ne=s.pointGeometry.convert(i.offset);let J=p.centerPoint.add(ne);const W=p.pointLocation(J),de=s.LngLat.convert(i.center||W);this._normalizeCenter(de);const ae=p.project(W),he=p.project(de).sub(ae);let fe=i.curve;const ye=Math.max(p.width,p.height),ce=ye/X,Ee=he.mag();if("minZoom"in i){const tn=s.clamp(Math.min(i.minZoom,v,P),p.minZoom,p.maxZoom),nn=ye/p.zoomScale(tn-v);fe=Math.sqrt(nn/Ee*2)}const We=fe*fe;function it(tn){const nn=(ce*ce-ye*ye+(tn?-1:1)*We*We*Ee*Ee)/(2*(tn?ce:ye)*We*Ee);return Math.log(Math.sqrt(nn*nn+1)-nn)}function ut(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function st(tn){return(Math.exp(tn)+Math.exp(-tn))/2}const Ot=it(0);let qe=function(tn){return st(Ot)/st(Ot+fe*tn)},Dt=function(tn){return ye*((st(Ot)*(ut(nn=Ot+fe*tn)/st(nn))-ut(Ot))/We)/Ee;var nn},Mt=(it(1)-Ot)/fe;if(Math.abs(Ee)<1e-6||!isFinite(Mt)){if(Math.abs(ye-ce)<1e-6)return this.easeTo(i,c);const tn=ce<ye?-1:1;Mt=Math.abs(Math.log(ce/ye))/fe,Dt=function(){return 0},qe=function(nn){return Math.exp(tn*fe*nn)}}i.duration="duration"in i?+i.duration:1e3*Mt/("screenSpeed"in i?+i.screenSpeed/fe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const rn=x!==R,ft=N!==E,Qt=!p.isPaddingEqual(U),yn=tn=>nn=>{const xn=nn*Mt,Bn=1/qe(xn);tn.zoom=nn===1?P:v+tn.scaleZoom(Bn),rn&&(tn.bearing=s.number(x,R,nn)),ft&&(tn.pitch=s.number(E,N,nn)),Qt&&(tn.interpolatePadding(A,U,nn),J=tn.centerPoint.add(ne));const _n=nn===1?de:tn.unproject(ae.add(he.mult(Dt(xn))).mult(Bn));return tn.setLocationAtPoint(tn.renderWorldCopies?_n.wrap():_n,J),tn._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(c),tn};if(i.preloadOnly){const tn=this._emulate(yn,i.duration,p);return this._preloadTiles(tn),this}return this._zooming=!0,this._rotating=rn,this._pitching=ft,this._padding=Qt,this._prepareEase(c,!1),this._ease(yn(p),()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=s.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=s.wrap(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}_emulate(i,c,p){const v=Math.ceil(15*c/1e3),x=[],E=i(p.clone());for(let A=0;A<=v;A++){const P=E(A/v);x.push(P.clone())}return x}}class jh{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const c=this.options&&this.options.compact;return this._map=i,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),F("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.setAttribute("aria-label",p),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",p)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const p=c.reduce((v,x,E)=>(x.value&&(v+=`${x.key}=${x.value}${E<c.length-1?"&":""}`),v),"?");i.href=`${s.config.FEEDBACK_URL}/${p}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style._sourceCaches;for(const v in c){const x=c[v];if(x.used){const E=x.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i.sort((v,x)=>v.length-x.length),i=i.filter((v,x)=>{for(let E=x+1;E<i.length;E++)if(i[E].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Wp{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=F("div","mapboxgl-ctrl");const c=F("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const c in i){const p=i[c].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class qp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const v of p)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Hh(f,i,c){if(f=new s.LngLat(f.lng,f.lat),i){const p=new s.LngLat(f.lng-360,f.lat),v=new s.LngLat(f.lng+360,f.lat),x=360*Math.ceil(Math.abs(f.lng-c.center.lng)/360),E=c.locationPoint(f).distSqr(i),A=i.x<0||i.y<0||i.x>c.width||i.y>c.height;c.locationPoint(p).distSqr(i)<E&&(A||Math.abs(p.lng-c.center.lng)<x)?f=p:c.locationPoint(v).distSqr(i)<E&&(A||Math.abs(v.lng-c.center.lng)<x)&&(f=v)}for(;Math.abs(f.lng-c.center.lng)>180;){const p=c.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;f.lng>c.center.lng?f.lng-=360:f.lng+=360}return f}const Gh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Wh extends s.Evented{constructor(i,c){if(super(),(i instanceof s.window.HTMLElement||c)&&(i=s.extend({element:i},c)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),i&&i.element)this._element=i.element,this._offset=s.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=F("div");const v=41,x=27,E=Y("svg",{display:"block",height:v*this._scale+"px",width:x*this._scale+"px",viewBox:`0 0 ${x} ${v}`},this._element),A=Y("radialGradient",{id:"shadowGradient"},Y("defs",{},E));Y("stop",{offset:"10%","stop-opacity":.4},A),Y("stop",{offset:"100%","stop-opacity":.05},A),Y("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},E),Y("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},E),Y("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},E),Y("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},E),this._offset=s.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const p=this._element.classList;for(const v in Gh)p.remove(`mapboxgl-marker-anchor-${v}`);p.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const c=38.1,p=13.5,v=Math.sqrt(Math.pow(p,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-c],"bottom-left":[v,-1*(c-p+v)],"bottom-right":[-v,-1*(c-p+v)],left:[p,-1*(c-p)],right:[-p,-1*(c-p)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const c=i.code,p=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,p=this._element;this._popup&&(c===p||p.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const i=this._map;if(!i)return;const c=this._pos;if(!c||c.x<0||c.x>i.transform.width||c.y<0||c.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(c);let v=!1;if(i.transform._terrainEnabled()&&i.getTerrain()){const E=i.getFreeCameraOptions();if(E.position){const A=E.position.toLngLat();v=A.distanceTo(p)<.9*A.distanceTo(this._lngLat)}}const x=(1-i._queryFogOpacity(p))*(v?.2:1);this._element.style.opacity=`${x}`,this._popup&&this._popup._setOpacity(`${x}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i)return;const c=this._offset.mult(this._scale),p=this._calculatePitch(),v=this._calculateRotation();this._element.style.transform=`
            translate(${i.x}px, ${i.y}px) ${Gh[this._anchor]}
            rotateX(${p}deg) rotateZ(${v}deg)
            translate(${c.x}px, ${c.y}px)
        `}_calculatePitch(){return this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?0:this._map&&this._pitchAlignment==="map"?this._map.getPitch():0}_calculateRotation(){return this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?this._rotation:this._map&&this._rotationAlignment==="map"?this._rotation-this._map.getBearing():0}_update(i){s.window.cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=Hh(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!c.getTerrain()&&!c.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.pointGeometry.convert(i),this._update(),this}_onMove(i){const c=this._map;if(c){if(!this._isDragging){const p=this._clickTolerance||c._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){const c=this._map;c&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos),this._pointerdownPos=i.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const c=this._map;return c&&(i?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class _g{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const c=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,c,p){this._start=this.getValue(c),this._end=i,this._startTime=c,this._endTime=c+p}}const gg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ad={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function xu(f){f.parentNode&&f.parentNode.removeChild(f)}const ld={showCompass:!0,showZoom:!0,visualizePitch:!1};class cd{constructor(i,c,p=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Nr({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new hr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),G()}move(i,c){const p=this.map,v=this.mouseRotate.mousemoveWindow(i,c),x=v&&v.bearingDelta;if(x&&p.setBearing(p.getBearing()+x),this.mousePitch){const E=this.mousePitch.mousemoveWindow(i,c),A=E&&E.pitchDelta;A&&p.setPitch(p.getPitch()+A)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Q(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Ae(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Ae(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Le(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=Le(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ao={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let bo,bu=0,cl=!1;const ud={maxWidth:100,unit:"metric"};function qh(f,i,c){const p=c&&c.maxWidth||100,v=f._containerHeight/2,x=f._containerWidth/2-p/2,E=f.unproject([x,v]),A=f.unproject([x+p,v]),P=E.distanceTo(A);if(c&&c.unit==="imperial"){const R=3.2808*P;R>5280?lc(i,p,R/5280,f._getUIString("ScaleControl.Miles"),f):lc(i,p,R,f._getUIString("ScaleControl.Feet"),f)}else c&&c.unit==="nautical"?lc(i,p,P/1852,f._getUIString("ScaleControl.NauticalMiles"),f):P>=1e3?lc(i,p,P/1e3,f._getUIString("ScaleControl.Kilometers"),f):lc(i,p,P,f._getUIString("ScaleControl.Meters"),f)}function lc(f,i,c,p,v){const x=function(A){const P=Math.pow(10,`${Math.floor(A)}`.length-1);let R=A/P;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(N){const U=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*U)/U}(R),P*R}(c),E=x/c;v._requestDomTask(()=>{f.style.width=i*E+"px",f.innerHTML=`${x}&nbsp;${p}`})}const Bo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ii=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wu(f=new s.pointGeometry(0,0),i="bottom"){if(typeof f=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(i){case"top":return new s.pointGeometry(0,f);case"top-left":return new s.pointGeometry(c,c);case"top-right":return new s.pointGeometry(-c,c);case"bottom":return new s.pointGeometry(0,-f);case"bottom-left":return new s.pointGeometry(c,-c);case"bottom-right":return new s.pointGeometry(-c,-c);case"left":return new s.pointGeometry(f,0);case"right":return new s.pointGeometry(-f,0)}return new s.pointGeometry(0,0)}return f instanceof s.pointGeometry||Array.isArray(f)?s.pointGeometry.convert(f):s.pointGeometry.convert(f[i]||[0,0])}const cc={version:s.version,supported:C,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends sd{constructor(f){if((f=s.extend({},ad,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(f.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Gt(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._renderTaskQueue=new qp,this._domRenderTaskQueue=new qp,this._controls=[],this._markers=[],this._mapId=s.uniqueId(),this._locale=s.extend({},gg,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new _g(0),this._explicitProjection=null,this._requestManager=new s.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=s.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Gp(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new pn(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,s.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new jh({customAttribution:f.customAttribution})),this._logoControl=new Wp,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",f)).fire(new s.Event("move",f)),this.fire(new s.Event("resize",f)),i&&this.fire(new s.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(s.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?85:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._updateProjection(f)}_updateProjection(f){f===null&&(this._explicitProjection=null);const i=f||this.getProjection(),c=this.transform.setProjection(i);if(f&&(this._explicitProjection=this.transform.getProjection()),c){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this.style.applyProjectionUpdate(),this._update(!0)}return this}project(f){return this.transform.locationPoint3D(s.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(s.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(f,i,c){if(f==="mouseenter"||f==="mouseover"){let p=!1;const v=E=>{const A=i.filter(R=>this.getLayer(R)),P=A.length?this.queryRenderedFeatures(E.point,{layers:A}):[];P.length?p||(p=!0,c.call(this,new Cn(f,this,E.originalEvent,{features:P}))):p=!1},x=()=>{p=!1};return{layers:new Set(i),listener:c,delegates:{mousemove:v,mouseout:x}}}if(f==="mouseleave"||f==="mouseout"){let p=!1;const v=E=>{const A=i.filter(P=>this.getLayer(P));(A.length?this.queryRenderedFeatures(E.point,{layers:A}):[]).length?p=!0:p&&(p=!1,c.call(this,new Cn(f,this,E.originalEvent)))},x=E=>{p&&(p=!1,c.call(this,new Cn(f,this,E.originalEvent)))};return{layers:new Set(i),listener:c,delegates:{mousemove:v,mouseout:x}}}{const p=v=>{const x=i.filter(A=>this.getLayer(A)),E=x.length?this.queryRenderedFeatures(v.point,{layers:x}):[];E.length&&(v.features=E,c.call(this,v),delete v.features)};return{layers:new Set(i),listener:c,delegates:{[f]:p}}}}on(f,i,c){if(c===void 0)return super.on(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const v in p.delegates)this.on(v,p.delegates[v]);return this}once(f,i,c){if(c===void 0)return super.once(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,c);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(f,i,c){if(c===void 0)return super.off(f,i);i=new Set(Array.isArray(i)?i:[i]);const p=(x,E)=>{if(x.size!==E.size)return!1;for(const A of x)if(!E.has(A))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(x=>{for(let E=0;E<x.length;E++){const A=x[E];if(A.listener===c&&p(A.layers,i)){for(const P in A.delegates)this.off(P,A.delegates[P]);return x.splice(E,1),this}}})(v),this}queryRenderedFeatures(f,i){return this.style?(i!==void 0||f===void 0||f instanceof s.pointGeometry||Array.isArray(f)||(i=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}queryTerrainElevation(f,i){const c=this.transform.elevation;return c?(i=s.extend({},{exaggerated:!0},i),c.getAtPoint(s.MercatorCoordinate.fromLngLat(f),null,i.exaggerated)):null}setStyle(f,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new ir(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if(typeof f=="string"){const c=this._requestManager.normalizeStyleURL(f),p=this._requestManager.transformRequest(c,s.ResourceType.Style);s.getJSON(p,(v,x)=>{v?this.fire(new s.ErrorEvent(v)):x&&this._updateDiff(x,i)})}else typeof f=="object"&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(c){s.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const i in f){const c=f[i]._tiles;for(const p in c){const v=c[p];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,i,c){this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,c)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:c=1,sdf:p=!1,stretchX:v,stretchY:x,content:E}={}){if(this._lazyInitEmptyStyle(),i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap){const{width:A,height:P,data:R}=s.exported.getImageData(i);this.style.addImage(f,{data:new s.RGBAImage({width:A,height:P},R),pixelRatio:c,stretchX:v,stretchY:x,content:E,sdf:p,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:P}=i,R=i;this.style.addImage(f,{data:new s.RGBAImage({width:A,height:P},new Uint8Array(R.data)),pixelRatio:c,stretchX:v,stretchY:x,content:E,sdf:p,version:0,userImage:R}),R.onAdd&&R.onAdd(this,f)}}updateImage(f,i){const c=this.style.getImage(f);if(!c)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap?s.exported.getImageData(i):i,{width:v,height:x}=p;v!==void 0&&x!==void 0?v===c.data.width&&x===c.data.height?(c.data.replace(p.data,!(i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap)),this.style.updateImage(f,c)):this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){s.getImage(this._requestManager.transformRequest(f,s.ResourceType.Image),(c,p)=>{i(c,p instanceof s.window.HTMLImageElement?s.exported.getImageData(p):p)})}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,c){return this.style.setLayerZoomRange(f,i,c),this._update(!0)}setFilter(f,i,c={}){return this.style.setFilter(f,i,c),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,c,p={}){return this.style.setPaintProperty(f,i,c,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,c,p={}){return this.style.setLayoutProperty(f,i,c,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(f),this.transform):0}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let c,p,v,x=this._container;for(;x&&(!p||!v);){const E=s.window.getComputedStyle(x).transform;E&&E!=="none"&&(c=E.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(p=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(v=c[3])),x=x.parentElement}this._containerWidth=p?Math.abs(f/p):f,this._containerHeight=v?Math.abs(i/v):i}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=F("div","mapboxgl-canvas-container",f);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=F("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=F("div","mapboxgl-control-container",f),p=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{p[v]=F("div",`mapboxgl-ctrl-${v}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const c=s.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(f),this._canvas.height=c*Math.ceil(i),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);i!==-1&&this._markers.splice(i,1)}_setupPainter(){const f=s.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(s.storeAuthState(i,!0),this.painter=new Ea(i,this.transform),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(i)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;const c=this.painter.context.extTimerQuery,p=s.exported.now();if(this.listens("gpu-timing-frame")&&(i=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;let v=!1;const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,R=this.transform.pitch,N=s.exported.now();this.style.zoomHistory.update(P,N);const U=new s.EvaluationParameters(P,{now:N,fadeDuration:x,pitch:R,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=U.crossFadingFactor();X===1&&X===this._crossFadingFactor||(v=!0,this._crossFadingFactor=X),this.style.update(U)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(p),this.style._updateSources(this.transform),this._forceMarkerUpdate()):E=this._updateAverageElevation(p),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=s.exported.now()-p;c.endQueryEXT(c.TIME_ELAPSED_EXT,i),setTimeout(()=>{const R=c.getQueryObjectEXT(i,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:P,gpuTime:R}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const R=this.painter.queryGpuTimers(P);this.fire(new s.Event("gpu-timing-layer",{layerTimes:R}))},50)}const A=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(A||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(E=this._updateAverageElevation(p,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const R=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:R})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const f of this._markers)f._update()}_updateAverageElevation(f,i=!1){const c=p=>(this.transform.averageElevation=p,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);if((i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const p=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),x=!1;this.transform.elevation&&(x=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const E=Math.abs(p-v);if(E>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(v),c(v);this._averageElevation.easeTo(v,f,300)}else if(E>1e-4)return this._averageElevation.jumpTo(v),c(v)}return!!this._averageElevation.isEasing(f)&&c(this._averageElevation.getValue(f))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===s.AUTH_ERR_MSG||f.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof Wp&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const c=this.painter.context.gl,p=c.createFramebuffer();function v(x){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,x,0);const E=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,E),E}return c.bindFramebuffer(c.FRAMEBUFFER,p),this._canvasPixelComparison(v(f),i.canvasCopies.map(v),i.timeStamps)}_canvasPixelComparison(f,i,c){let p=c[1]-c[0];const v=f.length/4;for(let x=0;x<i.length;x++){const E=i[x];let A=0;for(let P=0;P<E.length;P+=4)E[P]===f[P]&&E[P+1]===f[P+1]&&E[P+2]===f[P+2]&&E[P+3]===f[P+3]&&(A+=1);p+=(c[x+2]-c[x+1])*(1-A/v)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),xu(this._canvasContainer),xu(this._controlContainer),xu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(i)}))}_preloadTiles(f){const i=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(i,(c,p)=>c._preloadTiles(f,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){s.setCacheLimits(f,i)}get version(){return s.version}},NavigationControl:class{constructor(f){this.options=s.extend({},ld,f),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:i}):c.resetNorth({},{originalEvent:i}))}),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const i=f.getZoom(),c=i===f.getMaxZoom(),p=i===f.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cd(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,i){const c=F("button",f,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(f,i){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${i}`);f.setAttribute("aria-label",c),f.firstElementChild&&f.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends s.Evented{constructor(f){super(),this.options=s.extend({},ao,f),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ln(this._updateMarkerRotation,20)}onAdd(f){var i;return this._map=f,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,bo!==void 0?i(bo):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(c=>{bo=c.state!=="denied",i(bo)}):(bo=!!s.window.navigator.geolocation,i(bo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,bu=0,cl=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),c=f.coords;return!!i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude),c=f.coords.accuracy,p=this._map.getBearing(),v=s.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),v,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._containerHeight/2,i=this._map.unproject([0,f]),c=this._map.unproject([100,f]),p=i.distanceTo(c)/100,v=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Wh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bu--,cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bu++,bu>1?(f={maximumAge:6e5,timeout:0},cl=!0):(f=this.options.positionOptions,cl=!1),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&f()}).catch(console.error):f()}_clearWatch(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:jh,ScaleControl:class{constructor(f){this.options=s.extend({},ud,f),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){qh(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,qh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof s.window.HTMLElement?this._container=f.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(f){super(),this.options=s.extend(Object.create(Bo),f),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=s.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(s.window.document.createTextNode(f))}setHTML(f){const i=s.window.document.createDocumentFragment(),c=s.window.document.createElement("body");let p;for(c.innerHTML=f;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(f),this.options.closeButton){const c=this._closeButton=F("button","mapboxgl-popup-close-button",i);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let i;return this._classList.delete(f)?i=!1:(this._classList.add(f),i=!0),this._updateClassList(),i}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const i=this._map,c=this._container,p=this._pos;if(!i||!c||!p)return"bottom";const v=c.offsetWidth,x=c.offsetHeight,E=p.x<v/2,A=p.x>i.transform.width-v/2;if(p.y+f<x)return E?"top-left":A?"top-right":"top";if(p.y>i.transform.height-x){if(E)return"bottom-left";if(A)return"bottom-right"}return E?"left":A?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),f.className=i.join(" ")}_update(f){const i=this._map,c=this._content;if(!i||!this._lngLat&&!this._trackPointer||!c)return;let p=this._container;if(p||(p=this._container=F("div","mapboxgl-popup",i.getContainer()),this._tip=F("div","mapboxgl-popup-tip",p),p.appendChild(c)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Hh(this._lngLat,this._pos,i.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:i.project(this._lngLat),x=wu(this.options.offset),E=this._anchor=this._getAnchor(x.y),A=wu(this.options.offset,E),P=v.add(A).round();i._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Gh[E]} translate(${P.x}px,${P.y}px)`)})}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Ii);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._content&&(this._content.style.opacity=f),this._tip&&(this._tip.style.opacity=f)}},Marker:Wh,Style:ir,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Z,Evented:s.Evented,config:s.config,prewarm:function(){gn().acquire(un)},clearPrewarmedResources:function(){const f=an;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(un),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(f){s.config.ACCESS_TOKEN=f},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(f){s.config.API_URL=f},get workerCount(){return Yt.workerCount},set workerCount(f){Yt.workerCount=f},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){s.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){s.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return cc});var b=m;return b})})(JA);var eV=JA.exports,h5={exports:{}};/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){const a="transitionend",h=Z=>{let S=Z.getAttribute("data-bs-target");if(!S||S==="#"){let z=Z.getAttribute("href");if(!z||!z.includes("#")&&!z.startsWith("."))return null;z.includes("#")&&!z.startsWith("#")&&(z=`#${z.split("#")[1]}`),S=z&&z!=="#"?z.trim():null}return S},m=Z=>{const S=h(Z);return S&&document.querySelector(S)?S:null},g=Z=>{const S=h(Z);return S?document.querySelector(S):null},b=Z=>{Z.dispatchEvent(new Event(a))},s=Z=>!(!Z||typeof Z!="object")&&(Z.jquery!==void 0&&(Z=Z[0]),Z.nodeType!==void 0),C=Z=>s(Z)?Z.jquery?Z[0]:Z:typeof Z=="string"&&Z.length>0?document.querySelector(Z):null,D=(Z,S,z)=>{Object.keys(z).forEach(ie=>{const we=z[ie],De=S[ie],tt=De&&s(De)?"element":(At=De)==null?`${At}`:{}.toString.call(At).match(/\s([a-z]+)/i)[1].toLowerCase();var At;if(!new RegExp(we).test(tt))throw new TypeError(`${Z.toUpperCase()}: Option "${ie}" provided type "${tt}" but expected type "${we}".`)})},M=Z=>!(!s(Z)||Z.getClientRects().length===0)&&getComputedStyle(Z).getPropertyValue("visibility")==="visible",L=Z=>!Z||Z.nodeType!==Node.ELEMENT_NODE||!!Z.classList.contains("disabled")||(Z.disabled!==void 0?Z.disabled:Z.hasAttribute("disabled")&&Z.getAttribute("disabled")!=="false"),F=Z=>{if(!document.documentElement.attachShadow)return null;if(typeof Z.getRootNode=="function"){const S=Z.getRootNode();return S instanceof ShadowRoot?S:null}return Z instanceof ShadowRoot?Z:Z.parentNode?F(Z.parentNode):null},Y=()=>{},Te=Z=>{Z.offsetHeight},ue=()=>{const{jQuery:Z}=window;return Z&&!document.body.hasAttribute("data-bs-no-jquery")?Z:null},K=[],G=()=>document.documentElement.dir==="rtl",Q=Z=>{var S;S=()=>{const z=ue();if(z){const ie=Z.NAME,we=z.fn[ie];z.fn[ie]=Z.jQueryInterface,z.fn[ie].Constructor=Z,z.fn[ie].noConflict=()=>(z.fn[ie]=we,Z.jQueryInterface)}},document.readyState==="loading"?(K.length||document.addEventListener("DOMContentLoaded",()=>{K.forEach(z=>z())}),K.push(S)):S()},_e=Z=>{typeof Z=="function"&&Z()},Ce=(Z,S,z=!0)=>{if(!z)return void _e(Z);const ie=(tt=>{if(!tt)return 0;let{transitionDuration:At,transitionDelay:Gt}=window.getComputedStyle(tt);const ln=Number.parseFloat(At),pn=Number.parseFloat(Gt);return ln||pn?(At=At.split(",")[0],Gt=Gt.split(",")[0],1e3*(Number.parseFloat(At)+Number.parseFloat(Gt))):0})(S)+5;let we=!1;const De=({target:tt})=>{tt===S&&(we=!0,S.removeEventListener(a,De),_e(Z))};S.addEventListener(a,De),setTimeout(()=>{we||b(S)},ie)},Ae=(Z,S,z,ie)=>{let we=Z.indexOf(S);if(we===-1)return Z[!z&&ie?Z.length-1:0];const De=Z.length;return we+=z?1:-1,ie&&(we=(we+De)%De),Z[Math.max(0,Math.min(we,De-1))]},Le=/[^.]*(?=\..*)\.|.*/,$e=/\..*/,pt=/::\d+$/,Xe={};let ve=1;const Ye={mouseenter:"mouseover",mouseleave:"mouseout"},Be=/^(mouseenter|mouseleave)/i,Pe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function xe(Z,S){return S&&`${S}::${ve++}`||Z.uidEvent||ve++}function je(Z){const S=xe(Z);return Z.uidEvent=S,Xe[S]=Xe[S]||{},Xe[S]}function lt(Z,S,z=null){const ie=Object.keys(Z);for(let we=0,De=ie.length;we<De;we++){const tt=Z[ie[we]];if(tt.originalHandler===S&&tt.delegationSelector===z)return tt}return null}function Qe(Z,S,z){const ie=typeof S=="string",we=ie?z:S;let De=Ut(Z);return Pe.has(De)||(De=Z),[ie,we,De]}function ht(Z,S,z,ie,we){if(typeof S!="string"||!Z)return;if(z||(z=ie,ie=null),Be.test(S)){const Pn=On=>function(Un){if(!Un.relatedTarget||Un.relatedTarget!==Un.delegateTarget&&!Un.delegateTarget.contains(Un.relatedTarget))return On.call(this,Un)};ie?ie=Pn(ie):z=Pn(z)}const[De,tt,At]=Qe(S,z,ie),Gt=je(Z),ln=Gt[At]||(Gt[At]={}),pn=lt(ln,tt,De?z:null);if(pn)return void(pn.oneOff=pn.oneOff&&we);const $t=xe(tt,S.replace(Le,"")),Xn=De?function(Pn,On,Un){return function Fn(di){const Mn=Pn.querySelectorAll(On);for(let{target:Cn}=di;Cn&&Cn!==this;Cn=Cn.parentNode)for(let ni=Mn.length;ni--;)if(Mn[ni]===Cn)return di.delegateTarget=Cn,Fn.oneOff&&Ke.off(Pn,di.type,On,Un),Un.apply(Cn,[di]);return null}}(Z,z,ie):function(Pn,On){return function Un(Fn){return Fn.delegateTarget=Pn,Un.oneOff&&Ke.off(Pn,Fn.type,On),On.apply(Pn,[Fn])}}(Z,z);Xn.delegationSelector=De?z:null,Xn.originalHandler=tt,Xn.oneOff=we,Xn.uidEvent=$t,ln[$t]=Xn,Z.addEventListener(At,Xn,De)}function ct(Z,S,z,ie,we){const De=lt(S[z],ie,we);De&&(Z.removeEventListener(z,De,Boolean(we)),delete S[z][De.uidEvent])}function Ut(Z){return Z=Z.replace($e,""),Ye[Z]||Z}const Ke={on(Z,S,z,ie){ht(Z,S,z,ie,!1)},one(Z,S,z,ie){ht(Z,S,z,ie,!0)},off(Z,S,z,ie){if(typeof S!="string"||!Z)return;const[we,De,tt]=Qe(S,z,ie),At=tt!==S,Gt=je(Z),ln=S.startsWith(".");if(De!==void 0)return!Gt||!Gt[tt]?void 0:void ct(Z,Gt,tt,De,we?z:null);ln&&Object.keys(Gt).forEach($t=>{(function(Xn,Pn,On,Un){const Fn=Pn[On]||{};Object.keys(Fn).forEach(di=>{if(di.includes(Un)){const Mn=Fn[di];ct(Xn,Pn,On,Mn.originalHandler,Mn.delegationSelector)}})})(Z,Gt,$t,S.slice(1))});const pn=Gt[tt]||{};Object.keys(pn).forEach($t=>{const Xn=$t.replace(pt,"");if(!At||S.includes(Xn)){const Pn=pn[$t];ct(Z,Gt,tt,Pn.originalHandler,Pn.delegationSelector)}})},trigger(Z,S,z){if(typeof S!="string"||!Z)return null;const ie=ue(),we=Ut(S),De=S!==we,tt=Pe.has(we);let At,Gt=!0,ln=!0,pn=!1,$t=null;return De&&ie&&(At=ie.Event(S,z),ie(Z).trigger(At),Gt=!At.isPropagationStopped(),ln=!At.isImmediatePropagationStopped(),pn=At.isDefaultPrevented()),tt?($t=document.createEvent("HTMLEvents"),$t.initEvent(we,Gt,!0)):$t=new CustomEvent(S,{bubbles:Gt,cancelable:!0}),z!==void 0&&Object.keys(z).forEach(Xn=>{Object.defineProperty($t,Xn,{get:()=>z[Xn]})}),pn&&$t.preventDefault(),ln&&Z.dispatchEvent($t),$t.defaultPrevented&&At!==void 0&&At.preventDefault(),$t}},hn=new Map,Ht={set(Z,S,z){hn.has(Z)||hn.set(Z,new Map);const ie=hn.get(Z);ie.has(S)||ie.size===0?ie.set(S,z):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ie.keys())[0]}.`)},get:(Z,S)=>hn.has(Z)&&hn.get(Z).get(S)||null,remove(Z,S){if(!hn.has(Z))return;const z=hn.get(Z);z.delete(S),z.size===0&&hn.delete(Z)}};class dn{constructor(S){(S=C(S))&&(this._element=S,Ht.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ht.remove(this._element,this.constructor.DATA_KEY),Ke.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(S=>{this[S]=null})}_queueCallback(S,z,ie=!0){Ce(S,z,ie)}static getInstance(S){return Ht.get(C(S),this.DATA_KEY)}static getOrCreateInstance(S,z={}){return this.getInstance(S)||new this(S,typeof z=="object"?z:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Ue=(Z,S="hide")=>{const z=`click.dismiss${Z.EVENT_KEY}`,ie=Z.NAME;Ke.on(document,z,`[data-bs-dismiss="${ie}"]`,function(we){if(["A","AREA"].includes(this.tagName)&&we.preventDefault(),L(this))return;const De=g(this)||this.closest(`.${ie}`);Z.getOrCreateInstance(De)[S]()})};class wt extends dn{static get NAME(){return"alert"}close(){if(Ke.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const S=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,S)}_destroyElement(){this._element.remove(),Ke.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(S){return this.each(function(){const z=wt.getOrCreateInstance(this);if(typeof S=="string"){if(z[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);z[S](this)}})}}Ue(wt,"close"),Q(wt);const kt='[data-bs-toggle="button"]';class Et extends dn{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(S){return this.each(function(){const z=Et.getOrCreateInstance(this);S==="toggle"&&z[S]()})}}function sn(Z){return Z==="true"||Z!=="false"&&(Z===Number(Z).toString()?Number(Z):Z===""||Z==="null"?null:Z)}function En(Z){return Z.replace(/[A-Z]/g,S=>`-${S.toLowerCase()}`)}Ke.on(document,"click.bs.button.data-api",kt,Z=>{Z.preventDefault();const S=Z.target.closest(kt);Et.getOrCreateInstance(S).toggle()}),Q(Et);const me={setDataAttribute(Z,S,z){Z.setAttribute(`data-bs-${En(S)}`,z)},removeDataAttribute(Z,S){Z.removeAttribute(`data-bs-${En(S)}`)},getDataAttributes(Z){if(!Z)return{};const S={};return Object.keys(Z.dataset).filter(z=>z.startsWith("bs")).forEach(z=>{let ie=z.replace(/^bs/,"");ie=ie.charAt(0).toLowerCase()+ie.slice(1,ie.length),S[ie]=sn(Z.dataset[z])}),S},getDataAttribute:(Z,S)=>sn(Z.getAttribute(`data-bs-${En(S)}`)),offset(Z){const S=Z.getBoundingClientRect();return{top:S.top+window.pageYOffset,left:S.left+window.pageXOffset}},position:Z=>({top:Z.offsetTop,left:Z.offsetLeft})},oe={find:(Z,S=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(S,Z)),findOne:(Z,S=document.documentElement)=>Element.prototype.querySelector.call(S,Z),children:(Z,S)=>[].concat(...Z.children).filter(z=>z.matches(S)),parents(Z,S){const z=[];let ie=Z.parentNode;for(;ie&&ie.nodeType===Node.ELEMENT_NODE&&ie.nodeType!==3;)ie.matches(S)&&z.push(ie),ie=ie.parentNode;return z},prev(Z,S){let z=Z.previousElementSibling;for(;z;){if(z.matches(S))return[z];z=z.previousElementSibling}return[]},next(Z,S){let z=Z.nextElementSibling;for(;z;){if(z.matches(S))return[z];z=z.nextElementSibling}return[]},focusableChildren(Z){const S=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(z=>`${z}:not([tabindex^="-"])`).join(", ");return this.find(S,Z).filter(z=>!L(z)&&M(z))}},ot="carousel",te={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ge={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Ze="next",Je="prev",mt="left",St="right",Vt={ArrowLeft:St,ArrowRight:mt},Ct="slid.bs.carousel",vt="active",Me=".active.carousel-item";class et extends dn{constructor(S,z){super(S),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(z),this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return te}static get NAME(){return ot}next(){this._slide(Ze)}nextWhenVisible(){!document.hidden&&M(this._element)&&this.next()}prev(){this._slide(Je)}pause(S){S||(this._isPaused=!0),oe.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(b(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(S){S||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(S){this._activeElement=oe.findOne(Me,this._element);const z=this._getItemIndex(this._activeElement);if(S>this._items.length-1||S<0)return;if(this._isSliding)return void Ke.one(this._element,Ct,()=>this.to(S));if(z===S)return this.pause(),void this.cycle();const ie=S>z?Ze:Je;this._slide(ie,this._items[S])}_getConfig(S){return S=en(en(en({},te),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),D(ot,S,ge),S}_handleSwipe(){const S=Math.abs(this.touchDeltaX);if(S<=40)return;const z=S/this.touchDeltaX;this.touchDeltaX=0,z&&this._slide(z>0?St:mt)}_addEventListeners(){this._config.keyboard&&Ke.on(this._element,"keydown.bs.carousel",S=>this._keydown(S)),this._config.pause==="hover"&&(Ke.on(this._element,"mouseenter.bs.carousel",S=>this.pause(S)),Ke.on(this._element,"mouseleave.bs.carousel",S=>this.cycle(S))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const S=De=>this._pointerEvent&&(De.pointerType==="pen"||De.pointerType==="touch"),z=De=>{S(De)?this.touchStartX=De.clientX:this._pointerEvent||(this.touchStartX=De.touches[0].clientX)},ie=De=>{this.touchDeltaX=De.touches&&De.touches.length>1?0:De.touches[0].clientX-this.touchStartX},we=De=>{S(De)&&(this.touchDeltaX=De.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(tt=>this.cycle(tt),500+this._config.interval))};oe.find(".carousel-item img",this._element).forEach(De=>{Ke.on(De,"dragstart.bs.carousel",tt=>tt.preventDefault())}),this._pointerEvent?(Ke.on(this._element,"pointerdown.bs.carousel",De=>z(De)),Ke.on(this._element,"pointerup.bs.carousel",De=>we(De)),this._element.classList.add("pointer-event")):(Ke.on(this._element,"touchstart.bs.carousel",De=>z(De)),Ke.on(this._element,"touchmove.bs.carousel",De=>ie(De)),Ke.on(this._element,"touchend.bs.carousel",De=>we(De)))}_keydown(S){if(/input|textarea/i.test(S.target.tagName))return;const z=Vt[S.key];z&&(S.preventDefault(),this._slide(z))}_getItemIndex(S){return this._items=S&&S.parentNode?oe.find(".carousel-item",S.parentNode):[],this._items.indexOf(S)}_getItemByOrder(S,z){const ie=S===Ze;return Ae(this._items,z,ie,this._config.wrap)}_triggerSlideEvent(S,z){const ie=this._getItemIndex(S),we=this._getItemIndex(oe.findOne(Me,this._element));return Ke.trigger(this._element,"slide.bs.carousel",{relatedTarget:S,direction:z,from:we,to:ie})}_setActiveIndicatorElement(S){if(this._indicatorsElement){const z=oe.findOne(".active",this._indicatorsElement);z.classList.remove(vt),z.removeAttribute("aria-current");const ie=oe.find("[data-bs-target]",this._indicatorsElement);for(let we=0;we<ie.length;we++)if(Number.parseInt(ie[we].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(S)){ie[we].classList.add(vt),ie[we].setAttribute("aria-current","true");break}}}_updateInterval(){const S=this._activeElement||oe.findOne(Me,this._element);if(!S)return;const z=Number.parseInt(S.getAttribute("data-bs-interval"),10);z?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=z):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(S,z){const ie=this._directionToOrder(S),we=oe.findOne(Me,this._element),De=this._getItemIndex(we),tt=z||this._getItemByOrder(ie,we),At=this._getItemIndex(tt),Gt=Boolean(this._interval),ln=ie===Ze,pn=ln?"carousel-item-start":"carousel-item-end",$t=ln?"carousel-item-next":"carousel-item-prev",Xn=this._orderToDirection(ie);if(tt&&tt.classList.contains(vt))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(tt,Xn).defaultPrevented||!we||!tt)return;this._isSliding=!0,Gt&&this.pause(),this._setActiveIndicatorElement(tt),this._activeElement=tt;const Pn=()=>{Ke.trigger(this._element,Ct,{relatedTarget:tt,direction:Xn,from:De,to:At})};if(this._element.classList.contains("slide")){tt.classList.add($t),Te(tt),we.classList.add(pn),tt.classList.add(pn);const On=()=>{tt.classList.remove(pn,$t),tt.classList.add(vt),we.classList.remove(vt,$t,pn),this._isSliding=!1,setTimeout(Pn,0)};this._queueCallback(On,we,!0)}else we.classList.remove(vt),tt.classList.add(vt),this._isSliding=!1,Pn();Gt&&this.cycle()}_directionToOrder(S){return[St,mt].includes(S)?G()?S===mt?Je:Ze:S===mt?Ze:Je:S}_orderToDirection(S){return[Ze,Je].includes(S)?G()?S===Je?mt:St:S===Je?St:mt:S}static carouselInterface(S,z){const ie=et.getOrCreateInstance(S,z);let{_config:we}=ie;typeof z=="object"&&(we=en(en({},we),z));const De=typeof z=="string"?z:we.slide;if(typeof z=="number")ie.to(z);else if(typeof De=="string"){if(ie[De]===void 0)throw new TypeError(`No method named "${De}"`);ie[De]()}else we.interval&&we.ride&&(ie.pause(),ie.cycle())}static jQueryInterface(S){return this.each(function(){et.carouselInterface(this,S)})}static dataApiClickHandler(S){const z=g(this);if(!z||!z.classList.contains("carousel"))return;const ie=en(en({},me.getDataAttributes(z)),me.getDataAttributes(this)),we=this.getAttribute("data-bs-slide-to");we&&(ie.interval=!1),et.carouselInterface(z,ie),we&&et.getInstance(z).to(we),S.preventDefault()}}Ke.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",et.dataApiClickHandler),Ke.on(window,"load.bs.carousel.data-api",()=>{const Z=oe.find('[data-bs-ride="carousel"]');for(let S=0,z=Z.length;S<z;S++)et.carouselInterface(Z[S],et.getInstance(Z[S]))}),Q(et);const jt="collapse",Zt={toggle:!0,parent:null},bn={toggle:"boolean",parent:"(null|element)"},Tn="show",An="collapse",Sn="collapsing",si="collapsed",Ci=":scope .collapse .collapse",lr='[data-bs-toggle="collapse"]';class xr extends dn{constructor(S,z){super(S),this._isTransitioning=!1,this._config=this._getConfig(z),this._triggerArray=[];const ie=oe.find(lr);for(let we=0,De=ie.length;we<De;we++){const tt=ie[we],At=m(tt),Gt=oe.find(At).filter(ln=>ln===this._element);At!==null&&Gt.length&&(this._selector=At,this._triggerArray.push(tt))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Zt}static get NAME(){return jt}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let S,z=[];if(this._config.parent){const tt=oe.find(Ci,this._config.parent);z=oe.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(At=>!tt.includes(At))}const ie=oe.findOne(this._selector);if(z.length){const tt=z.find(At=>ie!==At);if(S=tt?xr.getInstance(tt):null,S&&S._isTransitioning)return}if(Ke.trigger(this._element,"show.bs.collapse").defaultPrevented)return;z.forEach(tt=>{ie!==tt&&xr.getOrCreateInstance(tt,{toggle:!1}).hide(),S||Ht.set(tt,"bs.collapse",null)});const we=this._getDimension();this._element.classList.remove(An),this._element.classList.add(Sn),this._element.style[we]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const De=`scroll${we[0].toUpperCase()+we.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(An,Tn),this._element.style[we]="",Ke.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[we]=`${this._element[De]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ke.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const S=this._getDimension();this._element.style[S]=`${this._element.getBoundingClientRect()[S]}px`,Te(this._element),this._element.classList.add(Sn),this._element.classList.remove(An,Tn);const z=this._triggerArray.length;for(let ie=0;ie<z;ie++){const we=this._triggerArray[ie],De=g(we);De&&!this._isShown(De)&&this._addAriaAndCollapsedClass([we],!1)}this._isTransitioning=!0,this._element.style[S]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(An),Ke.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(S=this._element){return S.classList.contains(Tn)}_getConfig(S){return(S=en(en(en({},Zt),me.getDataAttributes(this._element)),S)).toggle=Boolean(S.toggle),S.parent=C(S.parent),D(jt,S,bn),S}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const S=oe.find(Ci,this._config.parent);oe.find(lr,this._config.parent).filter(z=>!S.includes(z)).forEach(z=>{const ie=g(z);ie&&this._addAriaAndCollapsedClass([z],this._isShown(ie))})}_addAriaAndCollapsedClass(S,z){S.length&&S.forEach(ie=>{z?ie.classList.remove(si):ie.classList.add(si),ie.setAttribute("aria-expanded",z)})}static jQueryInterface(S){return this.each(function(){const z={};typeof S=="string"&&/show|hide/.test(S)&&(z.toggle=!1);const ie=xr.getOrCreateInstance(this,z);if(typeof S=="string"){if(ie[S]===void 0)throw new TypeError(`No method named "${S}"`);ie[S]()}})}}Ke.on(document,"click.bs.collapse.data-api",lr,function(Z){(Z.target.tagName==="A"||Z.delegateTarget&&Z.delegateTarget.tagName==="A")&&Z.preventDefault();const S=m(this);oe.find(S).forEach(z=>{xr.getOrCreateInstance(z,{toggle:!1}).toggle()})}),Q(xr);var Ti="top",Ui="bottom",ti="right",gi="left",Cr="auto",yr=[Ti,Ui,ti,gi],qi="start",tr="end",Gr="clippingParents",Or="viewport",Ji="popper",go="reference",Wr=yr.reduce(function(Z,S){return Z.concat([S+"-"+qi,S+"-"+tr])},[]),se=[].concat(yr,[Cr]).reduce(function(Z,S){return Z.concat([S,S+"-"+qi,S+"-"+tr])},[]),$="beforeRead",j="read",re="afterRead",pe="beforeMain",Se="main",Ve="afterMain",Fe="beforeWrite",Ie="write",Ge="afterWrite",gt=[$,j,re,pe,Se,Ve,Fe,Ie,Ge];function Pt(Z){return Z?(Z.nodeName||"").toLowerCase():null}function yt(Z){if(Z==null)return window;if(Z.toString()!=="[object Window]"){var S=Z.ownerDocument;return S&&S.defaultView||window}return Z}function un(Z){return Z instanceof yt(Z).Element||Z instanceof Element}function Yt(Z){return Z instanceof yt(Z).HTMLElement||Z instanceof HTMLElement}function an(Z){return typeof ShadowRoot!="undefined"&&(Z instanceof yt(Z).ShadowRoot||Z instanceof ShadowRoot)}const gn={name:"applyStyles",enabled:!0,phase:"write",fn:function(Z){var S=Z.state;Object.keys(S.elements).forEach(function(z){var ie=S.styles[z]||{},we=S.attributes[z]||{},De=S.elements[z];Yt(De)&&Pt(De)&&(Object.assign(De.style,ie),Object.keys(we).forEach(function(tt){var At=we[tt];At===!1?De.removeAttribute(tt):De.setAttribute(tt,At===!0?"":At)}))})},effect:function(Z){var S=Z.state,z={popper:{position:S.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(S.elements.popper.style,z.popper),S.styles=z,S.elements.arrow&&Object.assign(S.elements.arrow.style,z.arrow),function(){Object.keys(S.elements).forEach(function(ie){var we=S.elements[ie],De=S.attributes[ie]||{},tt=Object.keys(S.styles.hasOwnProperty(ie)?S.styles[ie]:z[ie]).reduce(function(At,Gt){return At[Gt]="",At},{});Yt(we)&&Pt(we)&&(Object.assign(we.style,tt),Object.keys(De).forEach(function(At){we.removeAttribute(At)}))})}},requires:["computeStyles"]};function He(Z){return Z.split("-")[0]}function jn(Z,S){var z=Z.getBoundingClientRect();return{width:z.width/1,height:z.height/1,top:z.top/1,right:z.right/1,bottom:z.bottom/1,left:z.left/1,x:z.left/1,y:z.top/1}}function Jt(Z){var S=jn(Z),z=Z.offsetWidth,ie=Z.offsetHeight;return Math.abs(S.width-z)<=1&&(z=S.width),Math.abs(S.height-ie)<=1&&(ie=S.height),{x:Z.offsetLeft,y:Z.offsetTop,width:z,height:ie}}function Yn(Z,S){var z=S.getRootNode&&S.getRootNode();if(Z.contains(S))return!0;if(z&&an(z)){var ie=S;do{if(ie&&Z.isSameNode(ie))return!0;ie=ie.parentNode||ie.host}while(ie)}return!1}function zn(Z){return yt(Z).getComputedStyle(Z)}function Oo(Z){return["table","td","th"].indexOf(Pt(Z))>=0}function nr(Z){return((un(Z)?Z.ownerDocument:Z.document)||window.document).documentElement}function Rt(Z){return Pt(Z)==="html"?Z:Z.assignedSlot||Z.parentNode||(an(Z)?Z.host:null)||nr(Z)}function Vn(Z){return Yt(Z)&&zn(Z).position!=="fixed"?Z.offsetParent:null}function Ln(Z){for(var S=yt(Z),z=Vn(Z);z&&Oo(z)&&zn(z).position==="static";)z=Vn(z);return z&&(Pt(z)==="html"||Pt(z)==="body"&&zn(z).position==="static")?S:z||function(ie){var we=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&Yt(ie)&&zn(ie).position==="fixed")return null;for(var De=Rt(ie);Yt(De)&&["html","body"].indexOf(Pt(De))<0;){var tt=zn(De);if(tt.transform!=="none"||tt.perspective!=="none"||tt.contain==="paint"||["transform","perspective"].indexOf(tt.willChange)!==-1||we&&tt.willChange==="filter"||we&&tt.filter&&tt.filter!=="none")return De;De=De.parentNode}return null}(Z)||S}function Dr(Z){return["top","bottom"].indexOf(Z)>=0?"x":"y"}var br=Math.max,H=Math.min,Re=Math.round;function It(Z,S,z){return br(Z,H(S,z))}function _t(Z){return Object.assign({},{top:0,right:0,bottom:0,left:0},Z)}function vn(Z,S){return S.reduce(function(z,ie){return z[ie]=Z,z},{})}const on={name:"arrow",enabled:!0,phase:"main",fn:function(Z){var S,z=Z.state,ie=Z.name,we=Z.options,De=z.elements.arrow,tt=z.modifiersData.popperOffsets,At=He(z.placement),Gt=Dr(At),ln=[gi,ti].indexOf(At)>=0?"height":"width";if(De&&tt){var pn=function(_i,pi){return _t(typeof(_i=typeof _i=="function"?_i(Object.assign({},pi.rects,{placement:pi.placement})):_i)!="number"?_i:vn(_i,yr))}(we.padding,z),$t=Jt(De),Xn=Gt==="y"?Ti:gi,Pn=Gt==="y"?Ui:ti,On=z.rects.reference[ln]+z.rects.reference[Gt]-tt[Gt]-z.rects.popper[ln],Un=tt[Gt]-z.rects.reference[Gt],Fn=Ln(De),di=Fn?Gt==="y"?Fn.clientHeight||0:Fn.clientWidth||0:0,Mn=On/2-Un/2,Cn=pn[Xn],ni=di-$t[ln]-pn[Pn],li=di/2-$t[ln]/2+Mn,ci=It(Cn,li,ni),Qn=Gt;z.modifiersData[ie]=((S={})[Qn]=ci,S.centerOffset=ci-li,S)}},effect:function(Z){var S=Z.state,z=Z.options.element,ie=z===void 0?"[data-popper-arrow]":z;ie!=null&&(typeof ie!="string"||(ie=S.elements.popper.querySelector(ie)))&&Yn(S.elements.popper,ie)&&(S.elements.arrow=ie)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ai(Z){return Z.split("-")[1]}var Hn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xt(Z){var S,z=Z.popper,ie=Z.popperRect,we=Z.placement,De=Z.variation,tt=Z.offsets,At=Z.position,Gt=Z.gpuAcceleration,ln=Z.adaptive,pn=Z.roundOffsets,$t=pn===!0?function(Oi){var Qi=Oi.x,Ft=Oi.y,ji=window.devicePixelRatio||1;return{x:Re(Re(Qi*ji)/ji)||0,y:Re(Re(Ft*ji)/ji)||0}}(tt):typeof pn=="function"?pn(tt):tt,Xn=$t.x,Pn=Xn===void 0?0:Xn,On=$t.y,Un=On===void 0?0:On,Fn=tt.hasOwnProperty("x"),di=tt.hasOwnProperty("y"),Mn=gi,Cn=Ti,ni=window;if(ln){var li=Ln(z),ci="clientHeight",Qn="clientWidth";li===yt(z)&&zn(li=nr(z)).position!=="static"&&At==="absolute"&&(ci="scrollHeight",Qn="scrollWidth"),li=li,we!==Ti&&(we!==gi&&we!==ti||De!==tr)||(Cn=Ui,Un-=li[ci]-ie.height,Un*=Gt?1:-1),we!==gi&&(we!==Ti&&we!==Ui||De!==tr)||(Mn=ti,Pn-=li[Qn]-ie.width,Pn*=Gt?1:-1)}var _i,pi=Object.assign({position:At},ln&&Hn);return Gt?Object.assign({},pi,((_i={})[Cn]=di?"0":"",_i[Mn]=Fn?"0":"",_i.transform=(ni.devicePixelRatio||1)<=1?"translate("+Pn+"px, "+Un+"px)":"translate3d("+Pn+"px, "+Un+"px, 0)",_i)):Object.assign({},pi,((S={})[Cn]=di?Un+"px":"",S[Mn]=Fn?Pn+"px":"",S.transform="",S))}const cr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(Z){var S=Z.state,z=Z.options,ie=z.gpuAcceleration,we=ie===void 0||ie,De=z.adaptive,tt=De===void 0||De,At=z.roundOffsets,Gt=At===void 0||At,ln={placement:He(S.placement),variation:ai(S.placement),popper:S.elements.popper,popperRect:S.rects.popper,gpuAcceleration:we};S.modifiersData.popperOffsets!=null&&(S.styles.popper=Object.assign({},S.styles.popper,Xt(Object.assign({},ln,{offsets:S.modifiersData.popperOffsets,position:S.options.strategy,adaptive:tt,roundOffsets:Gt})))),S.modifiersData.arrow!=null&&(S.styles.arrow=Object.assign({},S.styles.arrow,Xt(Object.assign({},ln,{offsets:S.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Gt})))),S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-placement":S.placement})},data:{}};var Di={passive:!0};const Do={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(Z){var S=Z.state,z=Z.instance,ie=Z.options,we=ie.scroll,De=we===void 0||we,tt=ie.resize,At=tt===void 0||tt,Gt=yt(S.elements.popper),ln=[].concat(S.scrollParents.reference,S.scrollParents.popper);return De&&ln.forEach(function(pn){pn.addEventListener("scroll",z.update,Di)}),At&&Gt.addEventListener("resize",z.update,Di),function(){De&&ln.forEach(function(pn){pn.removeEventListener("scroll",z.update,Di)}),At&&Gt.removeEventListener("resize",z.update,Di)}},data:{}};var Nn={left:"right",right:"left",bottom:"top",top:"bottom"};function ts(Z){return Z.replace(/left|right|bottom|top/g,function(S){return Nn[S]})}var eu={start:"end",end:"start"};function Zi(Z){return Z.replace(/start|end/g,function(S){return eu[S]})}function Ir(Z){var S=yt(Z);return{scrollLeft:S.pageXOffset,scrollTop:S.pageYOffset}}function qr(Z){return jn(nr(Z)).left+Ir(Z).scrollLeft}function ca(Z){var S=zn(Z),z=S.overflow,ie=S.overflowX,we=S.overflowY;return/auto|scroll|overlay|hidden/.test(z+we+ie)}function Vi(Z){return["html","body","#document"].indexOf(Pt(Z))>=0?Z.ownerDocument.body:Yt(Z)&&ca(Z)?Z:Vi(Rt(Z))}function Zr(Z,S){var z;S===void 0&&(S=[]);var ie=Vi(Z),we=ie===((z=Z.ownerDocument)==null?void 0:z.body),De=yt(ie),tt=we?[De].concat(De.visualViewport||[],ca(ie)?ie:[]):ie,At=S.concat(tt);return we?At:At.concat(Zr(Rt(tt)))}function yo(Z){return Object.assign({},Z,{left:Z.x,top:Z.y,right:Z.x+Z.width,bottom:Z.y+Z.height})}function ur(Z,S){return S===Or?yo(function(z){var ie=yt(z),we=nr(z),De=ie.visualViewport,tt=we.clientWidth,At=we.clientHeight,Gt=0,ln=0;return De&&(tt=De.width,At=De.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Gt=De.offsetLeft,ln=De.offsetTop)),{width:tt,height:At,x:Gt+qr(z),y:ln}}(Z)):Yt(S)?function(z){var ie=jn(z);return ie.top=ie.top+z.clientTop,ie.left=ie.left+z.clientLeft,ie.bottom=ie.top+z.clientHeight,ie.right=ie.left+z.clientWidth,ie.width=z.clientWidth,ie.height=z.clientHeight,ie.x=ie.left,ie.y=ie.top,ie}(S):yo(function(z){var ie,we=nr(z),De=Ir(z),tt=(ie=z.ownerDocument)==null?void 0:ie.body,At=br(we.scrollWidth,we.clientWidth,tt?tt.scrollWidth:0,tt?tt.clientWidth:0),Gt=br(we.scrollHeight,we.clientHeight,tt?tt.scrollHeight:0,tt?tt.clientHeight:0),ln=-De.scrollLeft+qr(z),pn=-De.scrollTop;return zn(tt||we).direction==="rtl"&&(ln+=br(we.clientWidth,tt?tt.clientWidth:0)-At),{width:At,height:Gt,x:ln,y:pn}}(nr(Z)))}function Pl(Z){var S,z=Z.reference,ie=Z.element,we=Z.placement,De=we?He(we):null,tt=we?ai(we):null,At=z.x+z.width/2-ie.width/2,Gt=z.y+z.height/2-ie.height/2;switch(De){case Ti:S={x:At,y:z.y-ie.height};break;case Ui:S={x:At,y:z.y+z.height};break;case ti:S={x:z.x+z.width,y:Gt};break;case gi:S={x:z.x-ie.width,y:Gt};break;default:S={x:z.x,y:z.y}}var ln=De?Dr(De):null;if(ln!=null){var pn=ln==="y"?"height":"width";switch(tt){case qi:S[ln]=S[ln]-(z[pn]/2-ie[pn]/2);break;case tr:S[ln]=S[ln]+(z[pn]/2-ie[pn]/2)}}return S}function wr(Z,S){S===void 0&&(S={});var z=S,ie=z.placement,we=ie===void 0?Z.placement:ie,De=z.boundary,tt=De===void 0?Gr:De,At=z.rootBoundary,Gt=At===void 0?Or:At,ln=z.elementContext,pn=ln===void 0?Ji:ln,$t=z.altBoundary,Xn=$t!==void 0&&$t,Pn=z.padding,On=Pn===void 0?0:Pn,Un=_t(typeof On!="number"?On:vn(On,yr)),Fn=pn===Ji?go:Ji,di=Z.rects.popper,Mn=Z.elements[Xn?Fn:pn],Cn=function(Qi,Ft,ji){var zo=Ft==="clippingParents"?function(Ni){var No=Zr(Rt(Ni)),fr=["absolute","fixed"].indexOf(zn(Ni).position)>=0&&Yt(Ni)?Ln(Ni):Ni;return un(fr)?No.filter(function(vr){return un(vr)&&Yn(vr,fr)&&Pt(vr)!=="body"}):[]}(Qi):[].concat(Ft),Yr=[].concat(zo,[ji]),Nr=Yr[0],hr=Yr.reduce(function(Ni,No){var fr=ur(Qi,No);return Ni.top=br(fr.top,Ni.top),Ni.right=H(fr.right,Ni.right),Ni.bottom=H(fr.bottom,Ni.bottom),Ni.left=br(fr.left,Ni.left),Ni},ur(Qi,Nr));return hr.width=hr.right-hr.left,hr.height=hr.bottom-hr.top,hr.x=hr.left,hr.y=hr.top,hr}(un(Mn)?Mn:Mn.contextElement||nr(Z.elements.popper),tt,Gt),ni=jn(Z.elements.reference),li=Pl({reference:ni,element:di,strategy:"absolute",placement:we}),ci=yo(Object.assign({},di,li)),Qn=pn===Ji?ci:ni,_i={top:Cn.top-Qn.top+Un.top,bottom:Qn.bottom-Cn.bottom+Un.bottom,left:Cn.left-Qn.left+Un.left,right:Qn.right-Cn.right+Un.right},pi=Z.modifiersData.offset;if(pn===Ji&&pi){var Oi=pi[we];Object.keys(_i).forEach(function(Qi){var Ft=[ti,Ui].indexOf(Qi)>=0?1:-1,ji=[Ti,Ui].indexOf(Qi)>=0?"y":"x";_i[Qi]+=Oi[ji]*Ft})}return _i}function ua(Z,S){S===void 0&&(S={});var z=S,ie=z.placement,we=z.boundary,De=z.rootBoundary,tt=z.padding,At=z.flipVariations,Gt=z.allowedAutoPlacements,ln=Gt===void 0?se:Gt,pn=ai(ie),$t=pn?At?Wr:Wr.filter(function(On){return ai(On)===pn}):yr,Xn=$t.filter(function(On){return ln.indexOf(On)>=0});Xn.length===0&&(Xn=$t);var Pn=Xn.reduce(function(On,Un){return On[Un]=wr(Z,{placement:Un,boundary:we,rootBoundary:De,padding:tt})[He(Un)],On},{});return Object.keys(Pn).sort(function(On,Un){return Pn[On]-Pn[Un]})}const $s={name:"flip",enabled:!0,phase:"main",fn:function(Z){var S=Z.state,z=Z.options,ie=Z.name;if(!S.modifiersData[ie]._skip){for(var we=z.mainAxis,De=we===void 0||we,tt=z.altAxis,At=tt===void 0||tt,Gt=z.fallbackPlacements,ln=z.padding,pn=z.boundary,$t=z.rootBoundary,Xn=z.altBoundary,Pn=z.flipVariations,On=Pn===void 0||Pn,Un=z.allowedAutoPlacements,Fn=S.options.placement,di=He(Fn),Mn=Gt||(di!==Fn&&On?function(vr){if(He(vr)===Cr)return[];var Kr=ts(vr);return[Zi(vr),Kr,Zi(Kr)]}(Fn):[ts(Fn)]),Cn=[Fn].concat(Mn).reduce(function(vr,Kr){return vr.concat(He(Kr)===Cr?ua(S,{placement:Kr,boundary:pn,rootBoundary:$t,padding:ln,flipVariations:On,allowedAutoPlacements:Un}):Kr)},[]),ni=S.rects.reference,li=S.rects.popper,ci=new Map,Qn=!0,_i=Cn[0],pi=0;pi<Cn.length;pi++){var Oi=Cn[pi],Qi=He(Oi),Ft=ai(Oi)===qi,ji=[Ti,Ui].indexOf(Qi)>=0,zo=ji?"width":"height",Yr=wr(S,{placement:Oi,boundary:pn,rootBoundary:$t,altBoundary:Xn,padding:ln}),Nr=ji?Ft?ti:gi:Ft?Ui:Ti;ni[zo]>li[zo]&&(Nr=ts(Nr));var hr=ts(Nr),Ni=[];if(De&&Ni.push(Yr[Qi]<=0),At&&Ni.push(Yr[Nr]<=0,Yr[hr]<=0),Ni.every(function(vr){return vr})){_i=Oi,Qn=!1;break}ci.set(Oi,Ni)}if(Qn)for(var No=function(vr){var Kr=Cn.find(function(Ta){var Ms=ci.get(Ta);if(Ms)return Ms.slice(0,vr).every(function(Fo){return Fo})});if(Kr)return _i=Kr,"break"},fr=On?3:1;fr>0&&No(fr)!=="break";fr--);S.placement!==_i&&(S.modifiersData[ie]._skip=!0,S.placement=_i,S.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ah(Z,S,z){return z===void 0&&(z={x:0,y:0}),{top:Z.top-S.height-z.y,right:Z.right-S.width+z.x,bottom:Z.bottom-S.height+z.y,left:Z.left-S.width-z.x}}function oo(Z){return[Ti,ti,Ui,gi].some(function(S){return Z[S]>=0})}const Sh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(Z){var S=Z.state,z=Z.name,ie=S.rects.reference,we=S.rects.popper,De=S.modifiersData.preventOverflow,tt=wr(S,{elementContext:"reference"}),At=wr(S,{altBoundary:!0}),Gt=Ah(tt,ie),ln=Ah(At,we,De),pn=oo(Gt),$t=oo(ln);S.modifiersData[z]={referenceClippingOffsets:Gt,popperEscapeOffsets:ln,isReferenceHidden:pn,hasPopperEscaped:$t},S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-reference-hidden":pn,"data-popper-escaped":$t})}},tu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(Z){var S=Z.state,z=Z.options,ie=Z.name,we=z.offset,De=we===void 0?[0,0]:we,tt=se.reduce(function(pn,$t){return pn[$t]=function(Xn,Pn,On){var Un=He(Xn),Fn=[gi,Ti].indexOf(Un)>=0?-1:1,di=typeof On=="function"?On(Object.assign({},Pn,{placement:Xn})):On,Mn=di[0],Cn=di[1];return Mn=Mn||0,Cn=(Cn||0)*Fn,[gi,ti].indexOf(Un)>=0?{x:Cn,y:Mn}:{x:Mn,y:Cn}}($t,S.rects,De),pn},{}),At=tt[S.placement],Gt=At.x,ln=At.y;S.modifiersData.popperOffsets!=null&&(S.modifiersData.popperOffsets.x+=Gt,S.modifiersData.popperOffsets.y+=ln),S.modifiersData[ie]=tt}},Mr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(Z){var S=Z.state,z=Z.name;S.modifiersData[z]=Pl({reference:S.rects.reference,element:S.rects.popper,strategy:"absolute",placement:S.placement})},data:{}},Xa={name:"preventOverflow",enabled:!0,phase:"main",fn:function(Z){var S=Z.state,z=Z.options,ie=Z.name,we=z.mainAxis,De=we===void 0||we,tt=z.altAxis,At=tt!==void 0&&tt,Gt=z.boundary,ln=z.rootBoundary,pn=z.altBoundary,$t=z.padding,Xn=z.tether,Pn=Xn===void 0||Xn,On=z.tetherOffset,Un=On===void 0?0:On,Fn=wr(S,{boundary:Gt,rootBoundary:ln,padding:$t,altBoundary:pn}),di=He(S.placement),Mn=ai(S.placement),Cn=!Mn,ni=Dr(di),li=ni==="x"?"y":"x",ci=S.modifiersData.popperOffsets,Qn=S.rects.reference,_i=S.rects.popper,pi=typeof Un=="function"?Un(Object.assign({},S.rects,{placement:S.placement})):Un,Oi={x:0,y:0};if(ci){if(De||At){var Qi=ni==="y"?Ti:gi,Ft=ni==="y"?Ui:ti,ji=ni==="y"?"height":"width",zo=ci[ni],Yr=ci[ni]+Fn[Qi],Nr=ci[ni]-Fn[Ft],hr=Pn?-_i[ji]/2:0,Ni=Mn===qi?Qn[ji]:_i[ji],No=Mn===qi?-_i[ji]:-Qn[ji],fr=S.elements.arrow,vr=Pn&&fr?Jt(fr):{width:0,height:0},Kr=S.modifiersData["arrow#persistent"]?S.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ta=Kr[Qi],Ms=Kr[Ft],Fo=It(0,Qn[ji],vr[ji]),ic=Cn?Qn[ji]/2-hr-Fo-Ta-pi:Ni-Fo-Ta-pi,Bh=Cn?-Qn[ji]/2+hr+Fo+Ms+pi:No+Fo+Ms+pi,rc=S.elements.arrow&&Ln(S.elements.arrow),$h=rc?ni==="y"?rc.clientTop||0:rc.clientLeft||0:0,oc=S.modifiersData.offset?S.modifiersData.offset[S.placement][ni]:0,mu=ci[ni]+ic-oc-$h,_u=ci[ni]+Bh-oc;if(De){var gu=It(Pn?H(Yr,mu):Yr,zo,Pn?br(Nr,_u):Nr);ci[ni]=gu,Oi[ni]=gu-zo}if(At){var yu=ni==="x"?Ti:gi,Uh=ni==="x"?Ui:ti,ll=ci[li],vu=ll+Fn[yu],Aa=ll-Fn[Uh],sc=It(Pn?H(vu,mu):vu,ll,Pn?br(Aa,_u):Aa);ci[li]=sc,Oi[li]=sc-ll}}S.modifiersData[ie]=Oi}},requiresIfExists:["offset"]};function bs(Z,S,z){z===void 0&&(z=!1);var ie=Yt(S);Yt(S)&&function(pn){var $t=pn.getBoundingClientRect();$t.width,pn.offsetWidth,$t.height,pn.offsetHeight}(S);var we,De,tt=nr(S),At=jn(Z),Gt={scrollLeft:0,scrollTop:0},ln={x:0,y:0};return(ie||!ie&&!z)&&((Pt(S)!=="body"||ca(tt))&&(Gt=(we=S)!==yt(we)&&Yt(we)?{scrollLeft:(De=we).scrollLeft,scrollTop:De.scrollTop}:Ir(we)),Yt(S)?((ln=jn(S)).x+=S.clientLeft,ln.y+=S.clientTop):tt&&(ln.x=qr(tt))),{x:At.left+Gt.scrollLeft-ln.x,y:At.top+Gt.scrollTop-ln.y,width:At.width,height:At.height}}function nu(Z){var S=new Map,z=new Set,ie=[];function we(De){z.add(De.name),[].concat(De.requires||[],De.requiresIfExists||[]).forEach(function(tt){if(!z.has(tt)){var At=S.get(tt);At&&we(At)}}),ie.push(De)}return Z.forEach(function(De){S.set(De.name,De)}),Z.forEach(function(De){z.has(De.name)||we(De)}),ie}var Ya={placement:"bottom",modifiers:[],strategy:"absolute"};function iu(){for(var Z=arguments.length,S=new Array(Z),z=0;z<Z;z++)S[z]=arguments[z];return!S.some(function(ie){return!(ie&&typeof ie.getBoundingClientRect=="function")})}function Us(Z){Z===void 0&&(Z={});var S=Z,z=S.defaultModifiers,ie=z===void 0?[]:z,we=S.defaultOptions,De=we===void 0?Ya:we;return function(tt,At,Gt){Gt===void 0&&(Gt=De);var ln,pn,$t={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ya,De),modifiersData:{},elements:{reference:tt,popper:At},attributes:{},styles:{}},Xn=[],Pn=!1,On={state:$t,setOptions:function(Fn){var di=typeof Fn=="function"?Fn($t.options):Fn;Un(),$t.options=Object.assign({},De,$t.options,di),$t.scrollParents={reference:un(tt)?Zr(tt):tt.contextElement?Zr(tt.contextElement):[],popper:Zr(At)};var Mn,Cn,ni=function(li){var ci=nu(li);return gt.reduce(function(Qn,_i){return Qn.concat(ci.filter(function(pi){return pi.phase===_i}))},[])}((Mn=[].concat(ie,$t.options.modifiers),Cn=Mn.reduce(function(li,ci){var Qn=li[ci.name];return li[ci.name]=Qn?Object.assign({},Qn,ci,{options:Object.assign({},Qn.options,ci.options),data:Object.assign({},Qn.data,ci.data)}):ci,li},{}),Object.keys(Cn).map(function(li){return Cn[li]})));return $t.orderedModifiers=ni.filter(function(li){return li.enabled}),$t.orderedModifiers.forEach(function(li){var ci=li.name,Qn=li.options,_i=Qn===void 0?{}:Qn,pi=li.effect;if(typeof pi=="function"){var Oi=pi({state:$t,name:ci,instance:On,options:_i});Xn.push(Oi||function(){})}}),On.update()},forceUpdate:function(){if(!Pn){var Fn=$t.elements,di=Fn.reference,Mn=Fn.popper;if(iu(di,Mn)){$t.rects={reference:bs(di,Ln(Mn),$t.options.strategy==="fixed"),popper:Jt(Mn)},$t.reset=!1,$t.placement=$t.options.placement,$t.orderedModifiers.forEach(function(pi){return $t.modifiersData[pi.name]=Object.assign({},pi.data)});for(var Cn=0;Cn<$t.orderedModifiers.length;Cn++)if($t.reset!==!0){var ni=$t.orderedModifiers[Cn],li=ni.fn,ci=ni.options,Qn=ci===void 0?{}:ci,_i=ni.name;typeof li=="function"&&($t=li({state:$t,options:Qn,name:_i,instance:On})||$t)}else $t.reset=!1,Cn=-1}}},update:(ln=function(){return new Promise(function(Fn){On.forceUpdate(),Fn($t)})},function(){return pn||(pn=new Promise(function(Fn){Promise.resolve().then(function(){pn=void 0,Fn(ln())})})),pn}),destroy:function(){Un(),Pn=!0}};if(!iu(tt,At))return On;function Un(){Xn.forEach(function(Fn){return Fn()}),Xn=[]}return On.setOptions(Gt).then(function(Fn){!Pn&&Gt.onFirstUpdate&&Gt.onFirstUpdate(Fn)}),On}}var ru=Us(),rd=Us({defaultModifiers:[Do,Mr,cr,gn]}),Ol=Us({defaultModifiers:[Do,Mr,cr,gn,tu,$s,Xa,on,Sh]});const Ch=Object.freeze({__proto__:null,popperGenerator:Us,detectOverflow:wr,createPopperBase:ru,createPopper:Ol,createPopperLite:rd,top:Ti,bottom:Ui,right:ti,left:gi,auto:Cr,basePlacements:yr,start:qi,end:tr,clippingParents:Gr,viewport:Or,popper:Ji,reference:go,variationPlacements:Wr,placements:se,beforeRead:$,read:j,afterRead:re,beforeMain:pe,main:Se,afterMain:Ve,beforeWrite:Fe,write:Ie,afterWrite:Ge,modifierPhases:gt,applyStyles:gn,arrow:on,computeStyles:cr,eventListeners:Do,flip:$s,hide:Sh,offset:tu,popperOffsets:Mr,preventOverflow:Xa}),Dl="dropdown",ou="Escape",Ka="Space",ha="ArrowUp",Rl="ArrowDown",Ih=new RegExp("ArrowUp|ArrowDown|Escape"),su="click.bs.dropdown.data-api",ws="keydown.bs.dropdown.data-api",ir="show",ns='[data-bs-toggle="dropdown"]',Vs=".dropdown-menu",js=G()?"top-end":"top-start",Es=G()?"top-start":"top-end",zl=G()?"bottom-end":"bottom-start",Ja=G()?"bottom-start":"bottom-end",Qa=G()?"left-start":"right-start",mn=G()?"right-start":"left-start",Nl={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Mh={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class Rr extends dn{constructor(S,z){super(S),this._popper=null,this._config=this._getConfig(z),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Nl}static get DefaultType(){return Mh}static get NAME(){return Dl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(L(this._element)||this._isShown(this._menu))return;const S={relatedTarget:this._element};if(Ke.trigger(this._element,"show.bs.dropdown",S).defaultPrevented)return;const z=Rr.getParentFromElement(this._element);this._inNavbar?me.setDataAttribute(this._menu,"popper","none"):this._createPopper(z),"ontouchstart"in document.documentElement&&!z.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(ie=>Ke.on(ie,"mouseover",Y)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ir),this._element.classList.add(ir),Ke.trigger(this._element,"shown.bs.dropdown",S)}hide(){if(L(this._element)||!this._isShown(this._menu))return;const S={relatedTarget:this._element};this._completeHide(S)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(S){Ke.trigger(this._element,"hide.bs.dropdown",S).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(z=>Ke.off(z,"mouseover",Y)),this._popper&&this._popper.destroy(),this._menu.classList.remove(ir),this._element.classList.remove(ir),this._element.setAttribute("aria-expanded","false"),me.removeDataAttribute(this._menu,"popper"),Ke.trigger(this._element,"hidden.bs.dropdown",S))}_getConfig(S){if(S=en(en(en({},this.constructor.Default),me.getDataAttributes(this._element)),S),D(Dl,S,this.constructor.DefaultType),typeof S.reference=="object"&&!s(S.reference)&&typeof S.reference.getBoundingClientRect!="function")throw new TypeError(`${Dl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return S}_createPopper(S){if(Ch===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let z=this._element;this._config.reference==="parent"?z=S:s(this._config.reference)?z=C(this._config.reference):typeof this._config.reference=="object"&&(z=this._config.reference);const ie=this._getPopperConfig(),we=ie.modifiers.find(De=>De.name==="applyStyles"&&De.enabled===!1);this._popper=Ol(z,this._menu,ie),we&&me.setDataAttribute(this._menu,"popper","static")}_isShown(S=this._element){return S.classList.contains(ir)}_getMenuElement(){return oe.next(this._element,Vs)[0]}_getPlacement(){const S=this._element.parentNode;if(S.classList.contains("dropend"))return Qa;if(S.classList.contains("dropstart"))return mn;const z=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return S.classList.contains("dropup")?z?Es:js:z?Ja:zl}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(z=>Number.parseInt(z,10)):typeof S=="function"?z=>S(z,this._element):S}_getPopperConfig(){const S={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(S.modifiers=[{name:"applyStyles",enabled:!1}]),en(en({},S),typeof this._config.popperConfig=="function"?this._config.popperConfig(S):this._config.popperConfig)}_selectMenuItem({key:S,target:z}){const ie=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(M);ie.length&&Ae(ie,z,S===Rl,!ie.includes(z)).focus()}static jQueryInterface(S){return this.each(function(){const z=Rr.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S]()}})}static clearMenus(S){if(S&&(S.button===2||S.type==="keyup"&&S.key!=="Tab"))return;const z=oe.find(ns);for(let ie=0,we=z.length;ie<we;ie++){const De=Rr.getInstance(z[ie]);if(!De||De._config.autoClose===!1||!De._isShown())continue;const tt={relatedTarget:De._element};if(S){const At=S.composedPath(),Gt=At.includes(De._menu);if(At.includes(De._element)||De._config.autoClose==="inside"&&!Gt||De._config.autoClose==="outside"&&Gt||De._menu.contains(S.target)&&(S.type==="keyup"&&S.key==="Tab"||/input|select|option|textarea|form/i.test(S.target.tagName)))continue;S.type==="click"&&(tt.clickEvent=S)}De._completeHide(tt)}}static getParentFromElement(S){return g(S)||S.parentNode}static dataApiKeydownHandler(S){if(/input|textarea/i.test(S.target.tagName)?S.key===Ka||S.key!==ou&&(S.key!==Rl&&S.key!==ha||S.target.closest(Vs)):!Ih.test(S.key))return;const z=this.classList.contains(ir);if(!z&&S.key===ou||(S.preventDefault(),S.stopPropagation(),L(this)))return;const ie=this.matches(ns)?this:oe.prev(this,ns)[0],we=Rr.getOrCreateInstance(ie);if(S.key!==ou)return S.key===ha||S.key===Rl?(z||we.show(),void we._selectMenuItem(S)):void(z&&S.key!==Ka||Rr.clearMenus());we.hide()}}Ke.on(document,ws,ns,Rr.dataApiKeydownHandler),Ke.on(document,ws,Vs,Rr.dataApiKeydownHandler),Ke.on(document,su,Rr.clearMenus),Ke.on(document,"keyup.bs.dropdown.data-api",Rr.clearMenus),Ke.on(document,su,ns,function(Z){Z.preventDefault(),Rr.getOrCreateInstance(this).toggle()}),Q(Rr);const Fl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bl=".sticky-top";class el{constructor(){this._element=document.body}getWidth(){const S=document.documentElement.clientWidth;return Math.abs(window.innerWidth-S)}hide(){const S=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",z=>z+S),this._setElementAttributes(Fl,"paddingRight",z=>z+S),this._setElementAttributes(Bl,"marginRight",z=>z-S)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(S,z,ie){const we=this.getWidth();this._applyManipulationCallback(S,De=>{if(De!==this._element&&window.innerWidth>De.clientWidth+we)return;this._saveInitialAttribute(De,z);const tt=window.getComputedStyle(De)[z];De.style[z]=`${ie(Number.parseFloat(tt))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(Fl,"paddingRight"),this._resetElementAttributes(Bl,"marginRight")}_saveInitialAttribute(S,z){const ie=S.style[z];ie&&me.setDataAttribute(S,z,ie)}_resetElementAttributes(S,z){this._applyManipulationCallback(S,ie=>{const we=me.getDataAttribute(ie,z);we===void 0?ie.style.removeProperty(z):(me.removeDataAttribute(ie,z),ie.style[z]=we)})}_applyManipulationCallback(S,z){s(S)?z(S):oe.find(S,this._element).forEach(z)}isOverflowing(){return this.getWidth()>0}}const kh={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Lh={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},tl="show",is="mousedown.bs.backdrop";class Hs{constructor(S){this._config=this._getConfig(S),this._isAppended=!1,this._element=null}show(S){this._config.isVisible?(this._append(),this._config.isAnimated&&Te(this._getElement()),this._getElement().classList.add(tl),this._emulateAnimation(()=>{_e(S)})):_e(S)}hide(S){this._config.isVisible?(this._getElement().classList.remove(tl),this._emulateAnimation(()=>{this.dispose(),_e(S)})):_e(S)}_getElement(){if(!this._element){const S=document.createElement("div");S.className=this._config.className,this._config.isAnimated&&S.classList.add("fade"),this._element=S}return this._element}_getConfig(S){return(S=en(en({},kh),typeof S=="object"?S:{})).rootElement=C(S.rootElement),D("backdrop",S,Lh),S}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),Ke.on(this._getElement(),is,()=>{_e(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(Ke.off(this._element,is),this._element.remove(),this._isAppended=!1)}_emulateAnimation(S){Ce(S,this._getElement(),this._config.isAnimated)}}const au={trapElement:null,autofocus:!0},$l={trapElement:"element",autofocus:"boolean"},Ul=".bs.focustrap",Ph="backward";class fa{constructor(S){this._config=this._getConfig(S),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:S,autofocus:z}=this._config;this._isActive||(z&&S.focus(),Ke.off(document,Ul),Ke.on(document,"focusin.bs.focustrap",ie=>this._handleFocusin(ie)),Ke.on(document,"keydown.tab.bs.focustrap",ie=>this._handleKeydown(ie)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ke.off(document,Ul))}_handleFocusin(S){const{target:z}=S,{trapElement:ie}=this._config;if(z===document||z===ie||ie.contains(z))return;const we=oe.focusableChildren(ie);we.length===0?ie.focus():this._lastTabNavDirection===Ph?we[we.length-1].focus():we[0].focus()}_handleKeydown(S){S.key==="Tab"&&(this._lastTabNavDirection=S.shiftKey?Ph:"forward")}_getConfig(S){return S=en(en({},au),typeof S=="object"?S:{}),D("focustrap",S,$l),S}}const da="modal",Vl="Escape",zr={backdrop:!0,keyboard:!0,focus:!0},jl={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},pa="hidden.bs.modal",ma="show.bs.modal",Hl="resize.bs.modal",nl="click.dismiss.bs.modal",il="keydown.dismiss.bs.modal",rl="mousedown.dismiss.bs.modal",ol="modal-open",sl="show",Gl="modal-static";class Ts extends dn{constructor(S,z){super(S),this._config=this._getConfig(z),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new el}static get Default(){return zr}static get NAME(){return da}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||this._isTransitioning||Ke.trigger(this._element,ma,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(ol),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Ke.on(this._dialog,rl,()=>{Ke.one(this._element,"mouseup.dismiss.bs.modal",z=>{z.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(S)))}hide(){if(!this._isShown||this._isTransitioning||Ke.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const S=this._isAnimated();S&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(sl),Ke.off(this._element,nl),Ke.off(this._dialog,rl),this._queueCallback(()=>this._hideModal(),this._element,S)}dispose(){[window,this._dialog].forEach(S=>Ke.off(S,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Hs({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fa({trapElement:this._element})}_getConfig(S){return S=en(en(en({},zr),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),D(da,S,jl),S}_showElement(S){const z=this._isAnimated(),ie=oe.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,ie&&(ie.scrollTop=0),z&&Te(this._element),this._element.classList.add(sl),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ke.trigger(this._element,"shown.bs.modal",{relatedTarget:S})},this._dialog,z)}_setEscapeEvent(){this._isShown?Ke.on(this._element,il,S=>{this._config.keyboard&&S.key===Vl?(S.preventDefault(),this.hide()):this._config.keyboard||S.key!==Vl||this._triggerBackdropTransition()}):Ke.off(this._element,il)}_setResizeEvent(){this._isShown?Ke.on(window,Hl,()=>this._adjustDialog()):Ke.off(window,Hl)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ol),this._resetAdjustments(),this._scrollBar.reset(),Ke.trigger(this._element,pa)})}_showBackdrop(S){Ke.on(this._element,nl,z=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:z.target===z.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(S)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ke.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:S,scrollHeight:z,style:ie}=this._element,we=z>document.documentElement.clientHeight;!we&&ie.overflowY==="hidden"||S.contains(Gl)||(we||(ie.overflowY="hidden"),S.add(Gl),this._queueCallback(()=>{S.remove(Gl),we||this._queueCallback(()=>{ie.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const S=this._element.scrollHeight>document.documentElement.clientHeight,z=this._scrollBar.getWidth(),ie=z>0;(!ie&&S&&!G()||ie&&!S&&G())&&(this._element.style.paddingLeft=`${z}px`),(ie&&!S&&!G()||!ie&&S&&G())&&(this._element.style.paddingRight=`${z}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(S,z){return this.each(function(){const ie=Ts.getOrCreateInstance(this,S);if(typeof S=="string"){if(ie[S]===void 0)throw new TypeError(`No method named "${S}"`);ie[S](z)}})}}Ke.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(Z){const S=g(this);["A","AREA"].includes(this.tagName)&&Z.preventDefault(),Ke.one(S,ma,ie=>{ie.defaultPrevented||Ke.one(S,pa,()=>{M(this)&&this.focus()})});const z=oe.findOne(".modal.show");z&&Ts.getInstance(z).hide(),Ts.getOrCreateInstance(S).toggle(this)}),Ue(Ts),Q(Ts);const Gs="offcanvas",Oh={backdrop:!0,keyboard:!0,scroll:!1},od={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},lu="show",Dh=".offcanvas.show",Rh="hidden.bs.offcanvas";class As extends dn{constructor(S,z){super(S),this._config=this._getConfig(z),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Gs}static get Default(){return Oh}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||Ke.trigger(this._element,"show.bs.offcanvas",{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new el().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lu),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),Ke.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:S})},this._element,!0))}hide(){this._isShown&&(Ke.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(lu),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new el().reset(),Ke.trigger(this._element,Rh)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(S){return S=en(en(en({},Oh),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),D(Gs,S,od),S}_initializeBackDrop(){return new Hs({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new fa({trapElement:this._element})}_addEventListeners(){Ke.on(this._element,"keydown.dismiss.bs.offcanvas",S=>{this._config.keyboard&&S.key==="Escape"&&this.hide()})}static jQueryInterface(S){return this.each(function(){const z=As.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);z[S](this)}})}}Ke.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(Z){const S=g(this);if(["A","AREA"].includes(this.tagName)&&Z.preventDefault(),L(this))return;Ke.one(S,Rh,()=>{M(this)&&this.focus()});const z=oe.findOne(Dh);z&&z!==S&&As.getInstance(z).hide(),As.getOrCreateInstance(S).toggle(this)}),Ke.on(window,"load.bs.offcanvas.data-api",()=>oe.find(Dh).forEach(Z=>As.getOrCreateInstance(Z).show())),Ue(As),Q(As);const cu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Wl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ws=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,uu=(Z,S)=>{const z=Z.nodeName.toLowerCase();if(S.includes(z))return!cu.has(z)||Boolean(Wl.test(Z.nodeValue)||Ws.test(Z.nodeValue));const ie=S.filter(we=>we instanceof RegExp);for(let we=0,De=ie.length;we<De;we++)if(ie[we].test(z))return!0;return!1};function hu(Z,S,z){if(!Z.length)return Z;if(z&&typeof z=="function")return z(Z);const ie=new window.DOMParser().parseFromString(Z,"text/html"),we=[].concat(...ie.body.querySelectorAll("*"));for(let De=0,tt=we.length;De<tt;De++){const At=we[De],Gt=At.nodeName.toLowerCase();if(!Object.keys(S).includes(Gt)){At.remove();continue}const ln=[].concat(...At.attributes),pn=[].concat(S["*"]||[],S[Gt]||[]);ln.forEach($t=>{uu($t,pn)||At.removeAttribute($t.nodeName)})}return ie.body.innerHTML}const ql="tooltip",Ss=new Set(["sanitize","allowList","sanitizeFn"]),fu={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},qs={AUTO:"auto",TOP:"top",RIGHT:G()?"left":"right",BOTTOM:"bottom",LEFT:G()?"right":"left"},_a={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},zh={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},ga="fade",Jn="show",vo="show",Zl="out",Xl=".tooltip-inner",ya=".modal",Nh="hide.bs.modal",Yl="hover",Kl="focus";class Cs extends dn{constructor(S,z){if(Ch===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(S),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(z),this.tip=null,this._setListeners()}static get Default(){return _a}static get NAME(){return ql}static get Event(){return zh}static get DefaultType(){return fu}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(S){if(this._isEnabled)if(S){const z=this._initializeOnDelegatedTarget(S);z._activeTrigger.click=!z._activeTrigger.click,z._isWithActiveTrigger()?z._enter(null,z):z._leave(null,z)}else{if(this.getTipElement().classList.contains(Jn))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),Ke.off(this._element.closest(ya),Nh,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const S=Ke.trigger(this._element,this.constructor.Event.SHOW),z=F(this._element),ie=z===null?this._element.ownerDocument.documentElement.contains(this._element):z.contains(this._element);if(S.defaultPrevented||!ie)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(Xl).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const we=this.getTipElement(),De=($t=>{do $t+=Math.floor(1e6*Math.random());while(document.getElementById($t));return $t})(this.constructor.NAME);we.setAttribute("id",De),this._element.setAttribute("aria-describedby",De),this._config.animation&&we.classList.add(ga);const tt=typeof this._config.placement=="function"?this._config.placement.call(this,we,this._element):this._config.placement,At=this._getAttachment(tt);this._addAttachmentClass(At);const{container:Gt}=this._config;Ht.set(we,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(Gt.append(we),Ke.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Ol(this._element,we,this._getPopperConfig(At)),we.classList.add(Jn);const ln=this._resolvePossibleFunction(this._config.customClass);ln&&we.classList.add(...ln.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach($t=>{Ke.on($t,"mouseover",Y)});const pn=this.tip.classList.contains(ga);this._queueCallback(()=>{const $t=this._hoverState;this._hoverState=null,Ke.trigger(this._element,this.constructor.Event.SHOWN),$t===Zl&&this._leave(null,this)},this.tip,pn)}hide(){if(!this._popper)return;const S=this.getTipElement();if(Ke.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;S.classList.remove(Jn),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(ie=>Ke.off(ie,"mouseover",Y)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const z=this.tip.classList.contains(ga);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==vo&&S.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),Ke.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,z),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const S=document.createElement("div");S.innerHTML=this._config.template;const z=S.children[0];return this.setContent(z),z.classList.remove(ga,Jn),this.tip=z,this.tip}setContent(S){this._sanitizeAndSetContent(S,this.getTitle(),Xl)}_sanitizeAndSetContent(S,z,ie){const we=oe.findOne(ie,S);z||!we?this.setElementContent(we,z):we.remove()}setElementContent(S,z){if(S!==null)return s(z)?(z=C(z),void(this._config.html?z.parentNode!==S&&(S.innerHTML="",S.append(z)):S.textContent=z.textContent)):void(this._config.html?(this._config.sanitize&&(z=hu(z,this._config.allowList,this._config.sanitizeFn)),S.innerHTML=z):S.textContent=z)}getTitle(){const S=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(S)}updateAttachment(S){return S==="right"?"end":S==="left"?"start":S}_initializeOnDelegatedTarget(S,z){return z||this.constructor.getOrCreateInstance(S.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(z=>Number.parseInt(z,10)):typeof S=="function"?z=>S(z,this._element):S}_resolvePossibleFunction(S){return typeof S=="function"?S.call(this._element):S}_getPopperConfig(S){const z={placement:S,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:ie=>this._handlePopperPlacementChange(ie)}],onFirstUpdate:ie=>{ie.options.placement!==ie.placement&&this._handlePopperPlacementChange(ie)}};return en(en({},z),typeof this._config.popperConfig=="function"?this._config.popperConfig(z):this._config.popperConfig)}_addAttachmentClass(S){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(S)}`)}_getAttachment(S){return qs[S.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(S=>{if(S==="click")Ke.on(this._element,this.constructor.Event.CLICK,this._config.selector,z=>this.toggle(z));else if(S!=="manual"){const z=S===Yl?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,ie=S===Yl?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;Ke.on(this._element,z,this._config.selector,we=>this._enter(we)),Ke.on(this._element,ie,this._config.selector,we=>this._leave(we))}}),this._hideModalHandler=()=>{this._element&&this.hide()},Ke.on(this._element.closest(ya),Nh,this._hideModalHandler),this._config.selector?this._config=Pu(en({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const S=this._element.getAttribute("title"),z=typeof this._element.getAttribute("data-bs-original-title");(S||z!=="string")&&(this._element.setAttribute("data-bs-original-title",S||""),!S||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",S),this._element.setAttribute("title",""))}_enter(S,z){z=this._initializeOnDelegatedTarget(S,z),S&&(z._activeTrigger[S.type==="focusin"?Kl:Yl]=!0),z.getTipElement().classList.contains(Jn)||z._hoverState===vo?z._hoverState=vo:(clearTimeout(z._timeout),z._hoverState=vo,z._config.delay&&z._config.delay.show?z._timeout=setTimeout(()=>{z._hoverState===vo&&z.show()},z._config.delay.show):z.show())}_leave(S,z){z=this._initializeOnDelegatedTarget(S,z),S&&(z._activeTrigger[S.type==="focusout"?Kl:Yl]=z._element.contains(S.relatedTarget)),z._isWithActiveTrigger()||(clearTimeout(z._timeout),z._hoverState=Zl,z._config.delay&&z._config.delay.hide?z._timeout=setTimeout(()=>{z._hoverState===Zl&&z.hide()},z._config.delay.hide):z.hide())}_isWithActiveTrigger(){for(const S in this._activeTrigger)if(this._activeTrigger[S])return!0;return!1}_getConfig(S){const z=me.getDataAttributes(this._element);return Object.keys(z).forEach(ie=>{Ss.has(ie)&&delete z[ie]}),(S=en(en(en({},this.constructor.Default),z),typeof S=="object"&&S?S:{})).container=S.container===!1?document.body:C(S.container),typeof S.delay=="number"&&(S.delay={show:S.delay,hide:S.delay}),typeof S.title=="number"&&(S.title=S.title.toString()),typeof S.content=="number"&&(S.content=S.content.toString()),D(ql,S,this.constructor.DefaultType),S.sanitize&&(S.template=hu(S.template,S.allowList,S.sanitizeFn)),S}_getDelegateConfig(){const S={};for(const z in this._config)this.constructor.Default[z]!==this._config[z]&&(S[z]=this._config[z]);return S}_cleanTipClass(){const S=this.getTipElement(),z=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),ie=S.getAttribute("class").match(z);ie!==null&&ie.length>0&&ie.map(we=>we.trim()).forEach(we=>S.classList.remove(we))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(S){const{state:z}=S;z&&(this.tip=z.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(z.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(S){return this.each(function(){const z=Cs.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S]()}})}}Q(Cs);const Jl=Pu(en({},Cs.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),va=Pu(en({},Cs.DefaultType),{content:"(string|element|function)"}),al={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class xa extends Cs{static get Default(){return Jl}static get NAME(){return"popover"}static get Event(){return al}static get DefaultType(){return va}isWithContent(){return this.getTitle()||this._getContent()}setContent(S){this._sanitizeAndSetContent(S,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(S,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(S){return this.each(function(){const z=xa.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S]()}})}}Q(xa);const Ql="scrollspy",du={offset:10,method:"auto",target:""},ec={offset:"number",method:"string",target:"(string|element)"},rs="active",Wt=".nav-link, .list-group-item, .dropdown-item",Xr="position";class os extends dn{constructor(S,z){super(S),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(z),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,Ke.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return du}static get NAME(){return Ql}refresh(){const S=this._scrollElement===this._scrollElement.window?"offset":Xr,z=this._config.method==="auto"?S:this._config.method,ie=z===Xr?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),oe.find(Wt,this._config.target).map(we=>{const De=m(we),tt=De?oe.findOne(De):null;if(tt){const At=tt.getBoundingClientRect();if(At.width||At.height)return[me[z](tt).top+ie,De]}return null}).filter(we=>we).sort((we,De)=>we[0]-De[0]).forEach(we=>{this._offsets.push(we[0]),this._targets.push(we[1])})}dispose(){Ke.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(S){return(S=en(en(en({},du),me.getDataAttributes(this._element)),typeof S=="object"&&S?S:{})).target=C(S.target)||document.documentElement,D(Ql,S,ec),S}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const S=this._getScrollTop()+this._config.offset,z=this._getScrollHeight(),ie=this._config.offset+z-this._getOffsetHeight();if(this._scrollHeight!==z&&this.refresh(),S>=ie){const we=this._targets[this._targets.length-1];this._activeTarget!==we&&this._activate(we)}else{if(this._activeTarget&&S<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let we=this._offsets.length;we--;)this._activeTarget!==this._targets[we]&&S>=this._offsets[we]&&(this._offsets[we+1]===void 0||S<this._offsets[we+1])&&this._activate(this._targets[we])}}_activate(S){this._activeTarget=S,this._clear();const z=Wt.split(",").map(we=>`${we}[data-bs-target="${S}"],${we}[href="${S}"]`),ie=oe.findOne(z.join(","),this._config.target);ie.classList.add(rs),ie.classList.contains("dropdown-item")?oe.findOne(".dropdown-toggle",ie.closest(".dropdown")).classList.add(rs):oe.parents(ie,".nav, .list-group").forEach(we=>{oe.prev(we,".nav-link, .list-group-item").forEach(De=>De.classList.add(rs)),oe.prev(we,".nav-item").forEach(De=>{oe.children(De,".nav-link").forEach(tt=>tt.classList.add(rs))})}),Ke.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:S})}_clear(){oe.find(Wt,this._config.target).filter(S=>S.classList.contains(rs)).forEach(S=>S.classList.remove(rs))}static jQueryInterface(S){return this.each(function(){const z=os.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S]()}})}}Ke.on(window,"load.bs.scrollspy.data-api",()=>{oe.find('[data-bs-spy="scroll"]').forEach(Z=>new os(Z))}),Q(os);const ba="active",pu="fade",Zs="show",Ro=".active",wa=":scope > li > .active";class so extends dn{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(ba))return;let S;const z=g(this._element),ie=this._element.closest(".nav, .list-group");if(ie){const tt=ie.nodeName==="UL"||ie.nodeName==="OL"?wa:Ro;S=oe.find(tt,ie),S=S[S.length-1]}const we=S?Ke.trigger(S,"hide.bs.tab",{relatedTarget:this._element}):null;if(Ke.trigger(this._element,"show.bs.tab",{relatedTarget:S}).defaultPrevented||we!==null&&we.defaultPrevented)return;this._activate(this._element,ie);const De=()=>{Ke.trigger(S,"hidden.bs.tab",{relatedTarget:this._element}),Ke.trigger(this._element,"shown.bs.tab",{relatedTarget:S})};z?this._activate(z,z.parentNode,De):De()}_activate(S,z,ie){const we=(!z||z.nodeName!=="UL"&&z.nodeName!=="OL"?oe.children(z,Ro):oe.find(wa,z))[0],De=ie&&we&&we.classList.contains(pu),tt=()=>this._transitionComplete(S,we,ie);we&&De?(we.classList.remove(Zs),this._queueCallback(tt,S,!0)):tt()}_transitionComplete(S,z,ie){if(z){z.classList.remove(ba);const De=oe.findOne(":scope > .dropdown-menu .active",z.parentNode);De&&De.classList.remove(ba),z.getAttribute("role")==="tab"&&z.setAttribute("aria-selected",!1)}S.classList.add(ba),S.getAttribute("role")==="tab"&&S.setAttribute("aria-selected",!0),Te(S),S.classList.contains(pu)&&S.classList.add(Zs);let we=S.parentNode;if(we&&we.nodeName==="LI"&&(we=we.parentNode),we&&we.classList.contains("dropdown-menu")){const De=S.closest(".dropdown");De&&oe.find(".dropdown-toggle",De).forEach(tt=>tt.classList.add(ba)),S.setAttribute("aria-expanded",!0)}ie&&ie()}static jQueryInterface(S){return this.each(function(){const z=so.getOrCreateInstance(this);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S]()}})}}Ke.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(Z){["A","AREA"].includes(this.tagName)&&Z.preventDefault(),L(this)||so.getOrCreateInstance(this).show()}),Q(so);const ss="toast",tc="hide",Ea="show",xo="showing",Fh={animation:"boolean",autohide:"boolean",delay:"number"},nc={animation:!0,autohide:!0,delay:5e3};class Is extends dn{constructor(S,z){super(S),this._config=this._getConfig(z),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Fh}static get Default(){return nc}static get NAME(){return ss}show(){Ke.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(tc),Te(this._element),this._element.classList.add(Ea),this._element.classList.add(xo),this._queueCallback(()=>{this._element.classList.remove(xo),Ke.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(Ea)&&(Ke.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(xo),this._queueCallback(()=>{this._element.classList.add(tc),this._element.classList.remove(xo),this._element.classList.remove(Ea),Ke.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Ea)&&this._element.classList.remove(Ea),super.dispose()}_getConfig(S){return S=en(en(en({},nc),me.getDataAttributes(this._element)),typeof S=="object"&&S?S:{}),D(ss,S,this.constructor.DefaultType),S}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(S,z){switch(S.type){case"mouseover":case"mouseout":this._hasMouseInteraction=z;break;case"focusin":case"focusout":this._hasKeyboardInteraction=z}if(z)return void this._clearTimeout();const ie=S.relatedTarget;this._element===ie||this._element.contains(ie)||this._maybeScheduleHide()}_setListeners(){Ke.on(this._element,"mouseover.bs.toast",S=>this._onInteraction(S,!0)),Ke.on(this._element,"mouseout.bs.toast",S=>this._onInteraction(S,!1)),Ke.on(this._element,"focusin.bs.toast",S=>this._onInteraction(S,!0)),Ke.on(this._element,"focusout.bs.toast",S=>this._onInteraction(S,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(S){return this.each(function(){const z=Is.getOrCreateInstance(this,S);if(typeof S=="string"){if(z[S]===void 0)throw new TypeError(`No method named "${S}"`);z[S](this)}})}}return Ue(Is),Q(Is),{Alert:wt,Button:Et,Carousel:et,Collapse:xr,Dropdown:Rr,Modal:Ts,Offcanvas:As,Popover:xa,ScrollSpy:os,Tab:so,Toast:Is,Tooltip:Cs}})})(h5);function b0(t){return(b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function Mp(t,n){if(!Mp.installed){var a=eS(n)?p5(n):n;if(m5(a)){Mp.installed=!0;var h=_5(t);if(h){var m=h<3?f5:d5;Object.keys(a).forEach(function(g){m(t,g,a[g])})}else console.error("[vue-axios] unknown Vue version")}else console.error("[vue-axios] configuration is invalid, expected options are either <axios_instance> or { <registration_key>: <axios_instance> }")}}function f5(t,n,a){Object.defineProperty(t.prototype,n,{get:function(){return a}}),t[n]=a}function d5(t,n,a){t.config.globalProperties[n]=a,t[n]=a}function eS(t){return t&&typeof t.get=="function"&&typeof t.post=="function"}function p5(t){return{axios:t,$http:t}}function m5(t){return b0(t)==="object"&&Object.keys(t).every(function(n){return eS(t[n])})}function _5(t){return t&&t.version&&Number(t.version.split(".")[0])}(typeof exports=="undefined"?"undefined":b0(exports))=="object"?module.exports=Mp:typeof define=="function"&&define.amd?define([],function(){return Mp}):window.Vue&&window.axios&&window.Vue.use&&Vue.use(Mp,window.axios);/*!
  * shared v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const gh=typeof window!="undefined";let gs,yh;{const t=gh&&window.performance;t&&t.mark&&t.measure&&t.clearMarks&&t.clearMeasures&&(gs=n=>t.mark(n),yh=(n,a,h)=>{t.measure(n,a,h),t.clearMarks(a),t.clearMarks(h)})}const g5=/\{([0-9a-zA-Z]+)\}/g;function B_(t,...n){return n.length===1&&er(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),t.replace(g5,(a,h)=>n.hasOwnProperty(h)?n[h]:"")}const y5=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Va=t=>y5?Symbol(t):t,v5=(t,n,a)=>x5({l:t,k:n,s:a}),x5=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Vr=t=>typeof t=="number"&&isFinite(t),b5=t=>E0(t)==="[object Date]",Hf=t=>E0(t)==="[object RegExp]",$_=t=>oi(t)&&Object.keys(t).length===0;function es(t,n){typeof console!="undefined"&&(console.warn("[intlify] "+t),n&&console.warn(n.stack))}const jr=Object.assign;let tS;const kp=()=>tS||(tS=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function nS(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const w5=Object.prototype.hasOwnProperty;function w0(t,n){return w5.call(t,n)}const ar=Array.isArray,Sr=t=>typeof t=="function",fn=t=>typeof t=="string",Li=t=>typeof t=="boolean",er=t=>t!==null&&typeof t=="object",iS=Object.prototype.toString,E0=t=>iS.call(t),oi=t=>E0(t)==="[object Object]",E5=t=>t==null?"":ar(t)||oi(t)&&t.toString===iS?JSON.stringify(t,null,2):String(t),rS=2;function T5(t,n=0,a=t.length){const h=t.split(/\r?\n/);let m=0;const g=[];for(let b=0;b<h.length;b++)if(m+=h[b].length+1,m>=n){for(let s=b-rS;s<=b+rS||a>m;s++){if(s<0||s>=h.length)continue;const C=s+1;g.push(`${C}${" ".repeat(3-String(C).length)}|  ${h[s]}`);const D=h[s].length;if(s===b){const M=n-(m-D)+1,L=Math.max(1,a>m?D-M:a-n);g.push("   |  "+" ".repeat(M)+"^".repeat(L))}else if(s>b){if(a>m){const M=Math.max(Math.min(a-m,D),1);g.push("   |  "+"^".repeat(M))}m+=D+1}}break}return g.join(`
`)}function T0(){const t=new Map;return{events:t,on(a,h){const m=t.get(a);m&&m.push(h)||t.set(a,[h])},off(a,h){const m=t.get(a);m&&m.splice(m.indexOf(h)>>>0,1)},emit(a,h){(t.get(a)||[]).slice().map(m=>m(h)),(t.get("*")||[]).slice().map(m=>m(a,h))}}}/*!
  * message-compiler v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Zn={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15},A5={[Zn.EXPECTED_TOKEN]:"Expected token: '{0}'",[Zn.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Zn.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Zn.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Zn.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Zn.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Zn.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Zn.EMPTY_PLACEHOLDER]:"Empty placeholder",[Zn.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Zn.INVALID_LINKED_FORMAT]:"Invalid linked format",[Zn.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Zn.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Zn.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Zn.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'"};function U_(t,n,a={}){const{domain:h,messages:m,args:g}=a,b=B_((m||A5)[t]||"",...g||[]),s=new SyntaxError(String(b));return s.code=t,n&&(s.location=n),s.domain=h,s}function S5(t){throw t}function C5(t,n,a){return{line:t,column:n,offset:a}}function A0(t,n,a){const h={start:t,end:n};return a!=null&&(h.source=a),h}const Il=" ",I5="\r",Lo=`
`,M5=String.fromCharCode(8232),k5=String.fromCharCode(8233);function L5(t){const n=t;let a=0,h=1,m=1,g=0;const b=$e=>n[$e]===I5&&n[$e+1]===Lo,s=$e=>n[$e]===Lo,C=$e=>n[$e]===k5,D=$e=>n[$e]===M5,M=$e=>b($e)||s($e)||C($e)||D($e),L=()=>a,F=()=>h,Y=()=>m,Te=()=>g,ue=$e=>b($e)||C($e)||D($e)?Lo:n[$e],K=()=>ue(a),G=()=>ue(a+g);function Q(){return g=0,M(a)&&(h++,m=0),b(a)&&a++,a++,m++,n[a]}function _e(){return b(a+g)&&g++,g++,n[a+g]}function Ce(){a=0,h=1,m=1,g=0}function Ae($e=0){g=$e}function Le(){const $e=a+g;for(;$e!==a;)Q();g=0}return{index:L,line:F,column:Y,peekOffset:Te,charAt:ue,currentChar:K,currentPeek:G,next:Q,peek:_e,reset:Ce,resetPeek:Ae,skipToPeek:Le}}const Wc=void 0,oS="'",P5="tokenizer";function O5(t,n={}){const a=n.location!==!1,h=L5(t),m=()=>h.index(),g=()=>C5(h.line(),h.column(),h.index()),b=g(),s=m(),C={currentType:14,offset:s,startLoc:b,endLoc:b,lastType:14,lastOffset:s,lastStartLoc:b,lastEndLoc:b,braceNest:0,inLinked:!1,text:""},D=()=>C,{onError:M}=n;function L(me,oe,ot,...te){const ge=D();if(oe.column+=ot,oe.offset+=ot,M){const Ze=A0(ge.startLoc,oe),Je=U_(me,Ze,{domain:P5,args:te});M(Je)}}function F(me,oe,ot){me.endLoc=g(),me.currentType=oe;const te={type:oe};return a&&(te.loc=A0(me.startLoc,me.endLoc)),ot!=null&&(te.value=ot),te}const Y=me=>F(me,14);function Te(me,oe){return me.currentChar()===oe?(me.next(),oe):(L(Zn.EXPECTED_TOKEN,g(),0,oe),"")}function ue(me){let oe="";for(;me.currentPeek()===Il||me.currentPeek()===Lo;)oe+=me.currentPeek(),me.peek();return oe}function K(me){const oe=ue(me);return me.skipToPeek(),oe}function G(me){if(me===Wc)return!1;const oe=me.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe===95}function Q(me){if(me===Wc)return!1;const oe=me.charCodeAt(0);return oe>=48&&oe<=57}function _e(me,oe){const{currentType:ot}=oe;if(ot!==2)return!1;ue(me);const te=G(me.currentPeek());return me.resetPeek(),te}function Ce(me,oe){const{currentType:ot}=oe;if(ot!==2)return!1;ue(me);const te=me.currentPeek()==="-"?me.peek():me.currentPeek(),ge=Q(te);return me.resetPeek(),ge}function Ae(me,oe){const{currentType:ot}=oe;if(ot!==2)return!1;ue(me);const te=me.currentPeek()===oS;return me.resetPeek(),te}function Le(me,oe){const{currentType:ot}=oe;if(ot!==8)return!1;ue(me);const te=me.currentPeek()===".";return me.resetPeek(),te}function $e(me,oe){const{currentType:ot}=oe;if(ot!==9)return!1;ue(me);const te=G(me.currentPeek());return me.resetPeek(),te}function pt(me,oe){const{currentType:ot}=oe;if(!(ot===8||ot===12))return!1;ue(me);const te=me.currentPeek()===":";return me.resetPeek(),te}function Xe(me,oe){const{currentType:ot}=oe;if(ot!==10)return!1;const te=()=>{const Ze=me.currentPeek();return Ze==="{"?G(me.peek()):Ze==="@"||Ze==="%"||Ze==="|"||Ze===":"||Ze==="."||Ze===Il||!Ze?!1:Ze===Lo?(me.peek(),te()):G(Ze)},ge=te();return me.resetPeek(),ge}function ve(me){ue(me);const oe=me.currentPeek()==="|";return me.resetPeek(),oe}function Ye(me,oe=!0){const ot=(ge=!1,Ze="",Je=!1)=>{const mt=me.currentPeek();return mt==="{"?Ze==="%"?!1:ge:mt==="@"||!mt?Ze==="%"?!0:ge:mt==="%"?(me.peek(),ot(ge,"%",!0)):mt==="|"?Ze==="%"||Je?!0:!(Ze===Il||Ze===Lo):mt===Il?(me.peek(),ot(!0,Il,Je)):mt===Lo?(me.peek(),ot(!0,Lo,Je)):!0},te=ot();return oe&&me.resetPeek(),te}function Be(me,oe){const ot=me.currentChar();return ot===Wc?Wc:oe(ot)?(me.next(),ot):null}function Pe(me){return Be(me,ot=>{const te=ot.charCodeAt(0);return te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===95||te===36})}function xe(me){return Be(me,ot=>{const te=ot.charCodeAt(0);return te>=48&&te<=57})}function je(me){return Be(me,ot=>{const te=ot.charCodeAt(0);return te>=48&&te<=57||te>=65&&te<=70||te>=97&&te<=102})}function lt(me){let oe="",ot="";for(;oe=xe(me);)ot+=oe;return ot}function Qe(me){let oe="";for(;;){const ot=me.currentChar();if(ot==="{"||ot==="}"||ot==="@"||ot==="|"||!ot)break;if(ot==="%")if(Ye(me))oe+=ot,me.next();else break;else if(ot===Il||ot===Lo)if(Ye(me))oe+=ot,me.next();else{if(ve(me))break;oe+=ot,me.next()}else oe+=ot,me.next()}return oe}function ht(me){K(me);let oe="",ot="";for(;oe=Pe(me);)ot+=oe;return me.currentChar()===Wc&&L(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),ot}function ct(me){K(me);let oe="";return me.currentChar()==="-"?(me.next(),oe+=`-${lt(me)}`):oe+=lt(me),me.currentChar()===Wc&&L(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),oe}function Ut(me){K(me),Te(me,"'");let oe="",ot="";const te=Ze=>Ze!==oS&&Ze!==Lo;for(;oe=Be(me,te);)oe==="\\"?ot+=Ke(me):ot+=oe;const ge=me.currentChar();return ge===Lo||ge===Wc?(L(Zn.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,g(),0),ge===Lo&&(me.next(),Te(me,"'")),ot):(Te(me,"'"),ot)}function Ke(me){const oe=me.currentChar();switch(oe){case"\\":case"'":return me.next(),`\\${oe}`;case"u":return hn(me,oe,4);case"U":return hn(me,oe,6);default:return L(Zn.UNKNOWN_ESCAPE_SEQUENCE,g(),0,oe),""}}function hn(me,oe,ot){Te(me,oe);let te="";for(let ge=0;ge<ot;ge++){const Ze=je(me);if(!Ze){L(Zn.INVALID_UNICODE_ESCAPE_SEQUENCE,g(),0,`\\${oe}${te}${me.currentChar()}`);break}te+=Ze}return`\\${oe}${te}`}function Ht(me){K(me);let oe="",ot="";const te=ge=>ge!=="{"&&ge!=="}"&&ge!==Il&&ge!==Lo;for(;oe=Be(me,te);)ot+=oe;return ot}function dn(me){let oe="",ot="";for(;oe=Pe(me);)ot+=oe;return ot}function Ue(me){const oe=(ot=!1,te)=>{const ge=me.currentChar();return ge==="{"||ge==="%"||ge==="@"||ge==="|"||!ge||ge===Il?te:ge===Lo?(te+=ge,me.next(),oe(ot,te)):(te+=ge,me.next(),oe(!0,te))};return oe(!1,"")}function wt(me){K(me);const oe=Te(me,"|");return K(me),oe}function kt(me,oe){let ot=null;switch(me.currentChar()){case"{":return oe.braceNest>=1&&L(Zn.NOT_ALLOW_NEST_PLACEHOLDER,g(),0),me.next(),ot=F(oe,2,"{"),K(me),oe.braceNest++,ot;case"}":return oe.braceNest>0&&oe.currentType===2&&L(Zn.EMPTY_PLACEHOLDER,g(),0),me.next(),ot=F(oe,3,"}"),oe.braceNest--,oe.braceNest>0&&K(me),oe.inLinked&&oe.braceNest===0&&(oe.inLinked=!1),ot;case"@":return oe.braceNest>0&&L(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),ot=Et(me,oe)||Y(oe),oe.braceNest=0,ot;default:let ge=!0,Ze=!0,Je=!0;if(ve(me))return oe.braceNest>0&&L(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),ot=F(oe,1,wt(me)),oe.braceNest=0,oe.inLinked=!1,ot;if(oe.braceNest>0&&(oe.currentType===5||oe.currentType===6||oe.currentType===7))return L(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),oe.braceNest=0,sn(me,oe);if(ge=_e(me,oe))return ot=F(oe,5,ht(me)),K(me),ot;if(Ze=Ce(me,oe))return ot=F(oe,6,ct(me)),K(me),ot;if(Je=Ae(me,oe))return ot=F(oe,7,Ut(me)),K(me),ot;if(!ge&&!Ze&&!Je)return ot=F(oe,13,Ht(me)),L(Zn.INVALID_TOKEN_IN_PLACEHOLDER,g(),0,ot.value),K(me),ot;break}return ot}function Et(me,oe){const{currentType:ot}=oe;let te=null;const ge=me.currentChar();switch((ot===8||ot===9||ot===12||ot===10)&&(ge===Lo||ge===Il)&&L(Zn.INVALID_LINKED_FORMAT,g(),0),ge){case"@":return me.next(),te=F(oe,8,"@"),oe.inLinked=!0,te;case".":return K(me),me.next(),F(oe,9,".");case":":return K(me),me.next(),F(oe,10,":");default:return ve(me)?(te=F(oe,1,wt(me)),oe.braceNest=0,oe.inLinked=!1,te):Le(me,oe)||pt(me,oe)?(K(me),Et(me,oe)):$e(me,oe)?(K(me),F(oe,12,dn(me))):Xe(me,oe)?(K(me),ge==="{"?kt(me,oe)||te:F(oe,11,Ue(me))):(ot===8&&L(Zn.INVALID_LINKED_FORMAT,g(),0),oe.braceNest=0,oe.inLinked=!1,sn(me,oe))}}function sn(me,oe){let ot={type:14};if(oe.braceNest>0)return kt(me,oe)||Y(oe);if(oe.inLinked)return Et(me,oe)||Y(oe);const te=me.currentChar();switch(te){case"{":return kt(me,oe)||Y(oe);case"}":return L(Zn.UNBALANCED_CLOSING_BRACE,g(),0),me.next(),F(oe,3,"}");case"@":return Et(me,oe)||Y(oe);default:if(ve(me))return ot=F(oe,1,wt(me)),oe.braceNest=0,oe.inLinked=!1,ot;if(Ye(me))return F(oe,0,Qe(me));if(te==="%")return me.next(),F(oe,4,"%");break}return ot}function En(){const{currentType:me,offset:oe,startLoc:ot,endLoc:te}=C;return C.lastType=me,C.lastOffset=oe,C.lastStartLoc=ot,C.lastEndLoc=te,C.offset=m(),C.startLoc=g(),h.currentChar()===Wc?F(C,14):sn(h,C)}return{nextToken:En,currentOffset:m,currentPosition:g,context:D}}const D5="parser",R5=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function z5(t,n,a){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const h=parseInt(n||a,16);return h<=55295||h>=57344?String.fromCodePoint(h):"\uFFFD"}}}function N5(t={}){const n=t.location!==!1,{onError:a}=t;function h(G,Q,_e,Ce,...Ae){const Le=G.currentPosition();if(Le.offset+=Ce,Le.column+=Ce,a){const $e=A0(_e,Le),pt=U_(Q,$e,{domain:D5,args:Ae});a(pt)}}function m(G,Q,_e){const Ce={type:G,start:Q,end:Q};return n&&(Ce.loc={start:_e,end:_e}),Ce}function g(G,Q,_e,Ce){G.end=Q,Ce&&(G.type=Ce),n&&G.loc&&(G.loc.end=_e)}function b(G,Q){const _e=G.context(),Ce=m(3,_e.offset,_e.startLoc);return Ce.value=Q,g(Ce,G.currentOffset(),G.currentPosition()),Ce}function s(G,Q){const _e=G.context(),{lastOffset:Ce,lastStartLoc:Ae}=_e,Le=m(5,Ce,Ae);return Le.index=parseInt(Q,10),G.nextToken(),g(Le,G.currentOffset(),G.currentPosition()),Le}function C(G,Q){const _e=G.context(),{lastOffset:Ce,lastStartLoc:Ae}=_e,Le=m(4,Ce,Ae);return Le.key=Q,G.nextToken(),g(Le,G.currentOffset(),G.currentPosition()),Le}function D(G,Q){const _e=G.context(),{lastOffset:Ce,lastStartLoc:Ae}=_e,Le=m(9,Ce,Ae);return Le.value=Q.replace(R5,z5),G.nextToken(),g(Le,G.currentOffset(),G.currentPosition()),Le}function M(G){const Q=G.nextToken(),_e=G.context(),{lastOffset:Ce,lastStartLoc:Ae}=_e,Le=m(8,Ce,Ae);return Q.type!==12?(h(G,Zn.UNEXPECTED_EMPTY_LINKED_MODIFIER,_e.lastStartLoc,0),Le.value="",g(Le,Ce,Ae),{nextConsumeToken:Q,node:Le}):(Q.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,ja(Q)),Le.value=Q.value||"",g(Le,G.currentOffset(),G.currentPosition()),{node:Le})}function L(G,Q){const _e=G.context(),Ce=m(7,_e.offset,_e.startLoc);return Ce.value=Q,g(Ce,G.currentOffset(),G.currentPosition()),Ce}function F(G){const Q=G.context(),_e=m(6,Q.offset,Q.startLoc);let Ce=G.nextToken();if(Ce.type===9){const Ae=M(G);_e.modifier=Ae.node,Ce=Ae.nextConsumeToken||G.nextToken()}switch(Ce.type!==10&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Ce)),Ce=G.nextToken(),Ce.type===2&&(Ce=G.nextToken()),Ce.type){case 11:Ce.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Ce)),_e.key=L(G,Ce.value||"");break;case 5:Ce.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Ce)),_e.key=C(G,Ce.value||"");break;case 6:Ce.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Ce)),_e.key=s(G,Ce.value||"");break;case 7:Ce.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Ce)),_e.key=D(G,Ce.value||"");break;default:h(G,Zn.UNEXPECTED_EMPTY_LINKED_KEY,Q.lastStartLoc,0);const Ae=G.context(),Le=m(7,Ae.offset,Ae.startLoc);return Le.value="",g(Le,Ae.offset,Ae.startLoc),_e.key=Le,g(_e,Ae.offset,Ae.startLoc),{nextConsumeToken:Ce,node:_e}}return g(_e,G.currentOffset(),G.currentPosition()),{node:_e}}function Y(G){const Q=G.context(),_e=Q.currentType===1?G.currentOffset():Q.offset,Ce=Q.currentType===1?Q.endLoc:Q.startLoc,Ae=m(2,_e,Ce);Ae.items=[];let Le=null;do{const Xe=Le||G.nextToken();switch(Le=null,Xe.type){case 0:Xe.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Xe)),Ae.items.push(b(G,Xe.value||""));break;case 6:Xe.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Xe)),Ae.items.push(s(G,Xe.value||""));break;case 5:Xe.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Xe)),Ae.items.push(C(G,Xe.value||""));break;case 7:Xe.value==null&&h(G,Zn.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,ja(Xe)),Ae.items.push(D(G,Xe.value||""));break;case 8:const ve=F(G);Ae.items.push(ve.node),Le=ve.nextConsumeToken||null;break}}while(Q.currentType!==14&&Q.currentType!==1);const $e=Q.currentType===1?Q.lastOffset:G.currentOffset(),pt=Q.currentType===1?Q.lastEndLoc:G.currentPosition();return g(Ae,$e,pt),Ae}function Te(G,Q,_e,Ce){const Ae=G.context();let Le=Ce.items.length===0;const $e=m(1,Q,_e);$e.cases=[],$e.cases.push(Ce);do{const pt=Y(G);Le||(Le=pt.items.length===0),$e.cases.push(pt)}while(Ae.currentType!==14);return Le&&h(G,Zn.MUST_HAVE_MESSAGES_IN_PLURAL,_e,0),g($e,G.currentOffset(),G.currentPosition()),$e}function ue(G){const Q=G.context(),{offset:_e,startLoc:Ce}=Q,Ae=Y(G);return Q.currentType===14?Ae:Te(G,_e,Ce,Ae)}function K(G){const Q=O5(G,jr({},t)),_e=Q.context(),Ce=m(0,_e.offset,_e.startLoc);return n&&Ce.loc&&(Ce.loc.source=G),Ce.body=ue(Q),_e.currentType!==14&&h(Q,Zn.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,G[_e.offset]||""),g(Ce,Q.currentOffset(),Q.currentPosition()),Ce}return{parse:K}}function ja(t){if(t.type===14)return"EOF";const n=(t.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"\u2026":n}function F5(t,n={}){const a={ast:t,helpers:new Set};return{context:()=>a,helper:g=>(a.helpers.add(g),g)}}function sS(t,n){for(let a=0;a<t.length;a++)S0(t[a],n)}function S0(t,n){switch(t.type){case 1:sS(t.cases,n),n.helper("plural");break;case 2:sS(t.items,n);break;case 6:S0(t.key,n),n.helper("linked");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function B5(t,n={}){const a=F5(t);a.helper("normalize"),t.body&&S0(t.body,a);const h=a.context();t.helpers=Array.from(h.helpers)}function $5(t,n){const{sourceMap:a,filename:h,breakLineCode:m,needIndent:g}=n,b={source:t.loc.source,filename:h,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:m,needIndent:g,indentLevel:0},s=()=>b;function C(ue,K){b.code+=ue}function D(ue,K=!0){const G=K?m:"";C(g?G+"  ".repeat(ue):G)}function M(ue=!0){const K=++b.indentLevel;ue&&D(K)}function L(ue=!0){const K=--b.indentLevel;ue&&D(K)}function F(){D(b.indentLevel)}return{context:s,push:C,indent:M,deindent:L,newline:F,helper:ue=>`_${ue}`,needIndent:()=>b.needIndent}}function U5(t,n){const{helper:a}=t;t.push(`${a("linked")}(`),Gf(t,n.key),n.modifier&&(t.push(", "),Gf(t,n.modifier)),t.push(")")}function V5(t,n){const{helper:a,needIndent:h}=t;t.push(`${a("normalize")}([`),t.indent(h());const m=n.items.length;for(let g=0;g<m&&(Gf(t,n.items[g]),g!==m-1);g++)t.push(", ");t.deindent(h()),t.push("])")}function j5(t,n){const{helper:a,needIndent:h}=t;if(n.cases.length>1){t.push(`${a("plural")}([`),t.indent(h());const m=n.cases.length;for(let g=0;g<m&&(Gf(t,n.cases[g]),g!==m-1);g++)t.push(", ");t.deindent(h()),t.push("])")}}function H5(t,n){n.body?Gf(t,n.body):t.push("null")}function Gf(t,n){const{helper:a}=t;switch(n.type){case 0:H5(t,n);break;case 1:j5(t,n);break;case 2:V5(t,n);break;case 6:U5(t,n);break;case 8:t.push(JSON.stringify(n.value),n);break;case 7:t.push(JSON.stringify(n.value),n);break;case 5:t.push(`${a("interpolate")}(${a("list")}(${n.index}))`,n);break;case 4:t.push(`${a("interpolate")}(${a("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:t.push(JSON.stringify(n.value),n);break;case 3:t.push(JSON.stringify(n.value),n);break;default:throw new Error(`unhandled codegen node type: ${n.type}`)}}const G5=(t,n={})=>{const a=fn(n.mode)?n.mode:"normal",h=fn(n.filename)?n.filename:"message.intl",m=!!n.sourceMap,g=n.breakLineCode!=null?n.breakLineCode:a==="arrow"?";":`
`,b=n.needIndent?n.needIndent:a!=="arrow",s=t.helpers||[],C=$5(t,{mode:a,filename:h,sourceMap:m,breakLineCode:g,needIndent:b});C.push(a==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),C.indent(b),s.length>0&&(C.push(`const { ${s.map(L=>`${L}: _${L}`).join(", ")} } = ctx`),C.newline()),C.push("return "),Gf(C,t),C.deindent(b),C.push("}");const{code:D,map:M}=C.context();return{ast:t,code:D,map:M?M.toJSON():void 0}};function W5(t,n={}){const a=jr({},n),m=N5(a).parse(t);return B5(m,a),G5(m,a)}/*!
  * devtools-if v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const aS={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const qc=[];qc[0]={w:[0],i:[3,0],["["]:[4],o:[7]};qc[1]={w:[1],["."]:[2],["["]:[4],o:[7]};qc[2]={w:[2],i:[3,0],["0"]:[3,0]};qc[3]={i:[3,0],["0"]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};qc[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};qc[5]={["'"]:[4,0],o:8,l:[5,0]};qc[6]={['"']:[4,0],o:8,l:[6,0]};const q5=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Z5(t){return q5.test(t)}function X5(t){const n=t.charCodeAt(0),a=t.charCodeAt(t.length-1);return n===a&&(n===34||n===39)?t.slice(1,-1):t}function Y5(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function K5(t){const n=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Z5(n)?X5(n):"*"+n}function J5(t){const n=[];let a=-1,h=0,m=0,g,b,s,C,D,M,L;const F=[];F[0]=()=>{b===void 0?b=s:b+=s},F[1]=()=>{b!==void 0&&(n.push(b),b=void 0)},F[2]=()=>{F[0](),m++},F[3]=()=>{if(m>0)m--,h=4,F[0]();else{if(m=0,b===void 0||(b=K5(b),b===!1))return!1;F[1]()}};function Y(){const Te=t[a+1];if(h===5&&Te==="'"||h===6&&Te==='"')return a++,s="\\"+Te,F[0](),!0}for(;h!==null;)if(a++,g=t[a],!(g==="\\"&&Y())){if(C=Y5(g),L=qc[h],D=L[C]||L.l||8,D===8||(h=D[0],D[1]!==void 0&&(M=F[D[1]],M&&(s=g,M()===!1))))return;if(h===7)return n}}const lS=new Map;function Q5(t,n){return er(t)?t[n]:null}function eF(t,n){if(!er(t))return null;let a=lS.get(n);if(a||(a=J5(n),a&&lS.set(n,a)),!a)return null;const h=a.length;let m=t,g=0;for(;g<h;){const b=m[a[g]];if(b===void 0)return null;m=b,g++}return m}const tF=t=>t,nF=t=>"",iF="text",rF=t=>t.length===0?"":t.join(""),oF=E5;function cS(t,n){return t=Math.abs(t),n===2?t?t>1?1:0:1:t?Math.min(t,2):0}function sF(t){const n=Vr(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Vr(t.named.count)||Vr(t.named.n))?Vr(t.named.count)?t.named.count:Vr(t.named.n)?t.named.n:n:n}function aF(t,n){n.count||(n.count=t),n.n||(n.n=t)}function lF(t={}){const n=t.locale,a=sF(t),h=er(t.pluralRules)&&fn(n)&&Sr(t.pluralRules[n])?t.pluralRules[n]:cS,m=er(t.pluralRules)&&fn(n)&&Sr(t.pluralRules[n])?cS:void 0,g=K=>K[h(a,K.length,m)],b=t.list||[],s=K=>b[K],C=t.named||{};Vr(t.pluralIndex)&&aF(a,C);const D=K=>C[K];function M(K){const G=Sr(t.messages)?t.messages(K):er(t.messages)?t.messages[K]:!1;return G||(t.parent?t.parent.message(K):nF)}const L=K=>t.modifiers?t.modifiers[K]:tF,F=oi(t.processor)&&Sr(t.processor.normalize)?t.processor.normalize:rF,Y=oi(t.processor)&&Sr(t.processor.interpolate)?t.processor.interpolate:oF,Te=oi(t.processor)&&fn(t.processor.type)?t.processor.type:iF,ue={list:s,named:D,plural:g,linked:(K,G)=>{const Q=M(K)(ue);return fn(G)?L(G)(Q):Q},message:M,type:Te,interpolate:Y,normalize:F};return ue}let Lp=null;function cF(t){Lp=t}function uF(t,n,a){Lp&&Lp.emit(aS.I18nInit,{timestamp:Date.now(),i18n:t,version:n,meta:a})}const hF=fF(aS.FunctionTranslate);function fF(t){return n=>Lp&&Lp.emit(t,n)}const ys={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7},dF={[ys.NOT_FOUND_KEY]:"Not found '{key}' key in '{locale}' locale messages.",[ys.FALLBACK_TO_TRANSLATE]:"Fall back to translate '{key}' key with '{target}' locale.",[ys.CANNOT_FORMAT_NUMBER]:"Cannot format a number value due to not supported Intl.NumberFormat.",[ys.FALLBACK_TO_NUMBER_FORMAT]:"Fall back to number format '{key}' key with '{target}' locale.",[ys.CANNOT_FORMAT_DATE]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[ys.FALLBACK_TO_DATE_FORMAT]:"Fall back to datetime format '{key}' key with '{target}' locale."};function Wf(t,...n){return B_(dF[t],...n)}function pF(t,n,a){return[...new Set([a,...ar(n)?n:er(n)?Object.keys(n):fn(n)?[n]:[a]])]}function uS(t,n,a){const h=fn(a)?a:j_,m=t;m.__localeChainCache||(m.__localeChainCache=new Map);let g=m.__localeChainCache.get(h);if(!g){g=[];let b=[a];for(;ar(b);)b=hS(g,b,n);const s=ar(n)||!oi(n)?n:n.default?n.default:null;b=fn(s)?[s]:s,ar(b)&&hS(g,b,!1),m.__localeChainCache.set(h,g)}return g}function hS(t,n,a){let h=!0;for(let m=0;m<n.length&&Li(h);m++){const g=n[m];fn(g)&&(h=mF(t,n[m],a))}return h}function mF(t,n,a){let h;const m=n.split("-");do{const g=m.join("-");h=_F(t,g,a),m.splice(-1,1)}while(m.length&&h===!0);return h}function _F(t,n,a){let h=!1;if(!t.includes(n)&&(h=!0,n)){h=n[n.length-1]!=="!";const m=n.replace(/!/g,"");t.push(m),(ar(a)||oi(a))&&a[m]&&(h=a[m])}return h}const gF="9.2.0-beta.17",V_=-1,j_="en-US",H_="";function yF(){return{upper:t=>fn(t)?t.toUpperCase():t,lower:t=>fn(t)?t.toLowerCase():t,capitalize:t=>fn(t)?`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`:t}}let fS;function vF(t){fS=t}let dS;function xF(t){dS=t}let pS;function bF(t){pS=t}let mS=null;const _S=t=>{mS=t},wF=()=>mS;let gS=0;function EF(t={}){const n=fn(t.version)?t.version:gF,a=fn(t.locale)?t.locale:j_,h=ar(t.fallbackLocale)||oi(t.fallbackLocale)||fn(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a,m=oi(t.messages)?t.messages:{[a]:{}},g=oi(t.datetimeFormats)?t.datetimeFormats:{[a]:{}},b=oi(t.numberFormats)?t.numberFormats:{[a]:{}},s=jr({},t.modifiers||{},yF()),C=t.pluralRules||{},D=Sr(t.missing)?t.missing:null,M=Li(t.missingWarn)||Hf(t.missingWarn)?t.missingWarn:!0,L=Li(t.fallbackWarn)||Hf(t.fallbackWarn)?t.fallbackWarn:!0,F=!!t.fallbackFormat,Y=!!t.unresolving,Te=Sr(t.postTranslation)?t.postTranslation:null,ue=oi(t.processor)?t.processor:null,K=Li(t.warnHtmlMessage)?t.warnHtmlMessage:!0,G=!!t.escapeParameter,Q=Sr(t.messageCompiler)?t.messageCompiler:fS,_e=Sr(t.messageResolver)?t.messageResolver:dS||Q5,Ce=Sr(t.localeFallbacker)?t.localeFallbacker:pS||pF,Ae=Sr(t.onWarn)?t.onWarn:es,Le=t,$e=er(Le.__datetimeFormatters)?Le.__datetimeFormatters:new Map,pt=er(Le.__numberFormatters)?Le.__numberFormatters:new Map,Xe=er(Le.__meta)?Le.__meta:{};gS++;const ve={version:n,cid:gS,locale:a,fallbackLocale:h,messages:m,modifiers:s,pluralRules:C,missing:D,missingWarn:M,fallbackWarn:L,fallbackFormat:F,unresolving:Y,postTranslation:Te,processor:ue,warnHtmlMessage:K,escapeParameter:G,messageCompiler:Q,messageResolver:_e,localeFallbacker:Ce,onWarn:Ae,__meta:Xe};return ve.datetimeFormats=g,ve.numberFormats=b,ve.__datetimeFormatters=$e,ve.__numberFormatters=pt,ve.__v_emitter=Le.__v_emitter!=null?Le.__v_emitter:void 0,uF(ve,n,Xe),ve}function G_(t,n){return t instanceof RegExp?t.test(n):t}function yS(t,n){return t instanceof RegExp?t.test(n):t}function C0(t,n,a,h,m){const{missing:g,onWarn:b}=t;{const s=t.__v_emitter;s&&s.emit("missing",{locale:a,key:n,type:m,groupId:`${m}:${n}`})}if(g!==null){const s=g(t,a,n,m);return fn(s)?s:n}else return yS(h,n)&&b(Wf(ys.NOT_FOUND_KEY,{key:n,locale:a})),n}function Pp(t,n,a){const h=t;h.__localeChainCache=new Map,t.localeFallbacker(t,a,n)}const TF=/<\/?[\w\s="/.':;#-\/]+>/,AF="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function SF(t,n){(Li(n.warnHtmlMessage)?n.warnHtmlMessage:!0)&&TF.test(t)&&es(B_(AF,{source:t}))}const CF=t=>t;let vS=Object.create(null);function IF(t,n={}){{SF(t,n);const h=(n.onCacheKey||CF)(t),m=vS[h];if(m)return m;let g=!1;const b=n.onError||S5;n.onError=D=>{g=!0,b(D)};const{code:s}=W5(t,n),C=new Function(`return ${s}`)();return g?C:vS[h]=C}}let xS=Zn.__EXTEND_POINT__;const I0=()=>xS++,Ml={INVALID_ARGUMENT:xS,INVALID_DATE_ARGUMENT:I0(),INVALID_ISO_DATE_ARGUMENT:I0(),__EXTEND_POINT__:I0()};function qf(t){return U_(t,null,{messages:MF})}const MF={[Ml.INVALID_ARGUMENT]:"Invalid arguments",[Ml.INVALID_DATE_ARGUMENT]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[Ml.INVALID_ISO_DATE_ARGUMENT]:"The argument provided is not a valid ISO date string"},bS=()=>"",Ha=t=>Sr(t);function wS(t,...n){const{fallbackFormat:a,postTranslation:h,unresolving:m,fallbackLocale:g,messages:b}=t,[s,C]=M0(...n),D=Li(C.missingWarn)?C.missingWarn:t.missingWarn,M=Li(C.fallbackWarn)?C.fallbackWarn:t.fallbackWarn,L=Li(C.escapeParameter)?C.escapeParameter:t.escapeParameter,F=!!C.resolvedMessage,Y=fn(C.default)||Li(C.default)?Li(C.default)?s:C.default:a?s:"",Te=a||Y!=="",ue=fn(C.locale)?C.locale:t.locale;L&&kF(C);let[K,G,Q]=F?[s,ue,b[ue]||{}]:LF(t,s,ue,g,M,D),_e=K,Ce=s;if(!F&&!(fn(_e)||Ha(_e))&&Te&&(_e=Y,Ce=_e),!F&&(!(fn(_e)||Ha(_e))||!fn(G)))return m?V_:s;if(fn(_e)&&t.messageCompiler==null)return es(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${s}'.`),s;let Ae=!1;const Le=()=>{Ae=!0},$e=Ha(_e)?_e:ES(t,s,G,_e,Ce,Le);if(Ae)return _e;const pt=DF(t,G,Q,C),Xe=lF(pt),ve=PF(t,$e,Xe),Ye=h?h(ve):ve;{const Be={timestamp:Date.now(),key:fn(s)?s:Ha(_e)?_e.key:"",locale:G||(Ha(_e)?_e.locale:""),format:fn(_e)?_e:Ha(_e)?_e.source:"",message:Ye};Be.meta=jr({},t.__meta,wF()||{}),hF(Be)}return Ye}function kF(t){ar(t.list)?t.list=t.list.map(n=>fn(n)?nS(n):n):er(t.named)&&Object.keys(t.named).forEach(n=>{fn(t.named[n])&&(t.named[n]=nS(t.named[n]))})}function LF(t,n,a,h,m,g){const{messages:b,onWarn:s,messageResolver:C,localeFallbacker:D}=t,M=D(t,h,a);let L={},F,Y=null,Te=a,ue=null;const K="translate";for(let G=0;G<M.length;G++){if(F=ue=M[G],a!==F&&G_(m,n)&&s(Wf(ys.FALLBACK_TO_TRANSLATE,{key:n,target:F})),a!==F){const Le=t.__v_emitter;Le&&Le.emit("fallback",{type:K,key:n,from:Te,to:ue,groupId:`${K}:${n}`})}L=b[F]||{};let Q=null,_e,Ce;if(gh&&(Q=window.performance.now(),_e="intlify-message-resolve-start",Ce="intlify-message-resolve-end",gs&&gs(_e)),(Y=C(L,n))===null&&(Y=L[n]),gh){const Le=window.performance.now(),$e=t.__v_emitter;$e&&Q&&Y&&$e.emit("message-resolve",{type:"message-resolve",key:n,message:Y,time:Le-Q,groupId:`${K}:${n}`}),_e&&Ce&&gs&&yh&&(gs(Ce),yh("intlify message resolve",_e,Ce))}if(fn(Y)||Sr(Y))break;const Ae=C0(t,n,F,g,K);Ae!==n&&(Y=Ae),Te=ue}return[Y,F,L]}function ES(t,n,a,h,m,g){const{messageCompiler:b,warnHtmlMessage:s}=t;if(Ha(h)){const F=h;return F.locale=F.locale||a,F.key=F.key||n,F}let C=null,D,M;gh&&(C=window.performance.now(),D="intlify-message-compilation-start",M="intlify-message-compilation-end",gs&&gs(D));const L=b(h,OF(t,a,m,h,s,g));if(gh){const F=window.performance.now(),Y=t.__v_emitter;Y&&C&&Y.emit("message-compilation",{type:"message-compilation",message:h,time:F-C,groupId:`translate:${n}`}),D&&M&&gs&&yh&&(gs(M),yh("intlify message compilation",D,M))}return L.locale=a,L.key=n,L.source=h,L}function PF(t,n,a){let h=null,m,g;gh&&(h=window.performance.now(),m="intlify-message-evaluation-start",g="intlify-message-evaluation-end",gs&&gs(m));const b=n(a);if(gh){const s=window.performance.now(),C=t.__v_emitter;C&&h&&C.emit("message-evaluation",{type:"message-evaluation",value:b,time:s-h,groupId:`translate:${n.key}`}),m&&g&&gs&&yh&&(gs(g),yh("intlify message evaluation",m,g))}return b}function M0(...t){const[n,a,h]=t,m={};if(!fn(n)&&!Vr(n)&&!Ha(n))throw qf(Ml.INVALID_ARGUMENT);const g=Vr(n)?String(n):(Ha(n),n);return Vr(a)?m.plural=a:fn(a)?m.default=a:oi(a)&&!$_(a)?m.named=a:ar(a)&&(m.list=a),Vr(h)?m.plural=h:fn(h)?m.default=h:oi(h)&&jr(m,h),[g,m]}function OF(t,n,a,h,m,g){return{warnHtmlMessage:m,onError:b=>{g&&g(b);{const s=`Message compilation error: ${b.message}`,C=b.location&&T5(h,b.location.start.offset,b.location.end.offset),D=t.__v_emitter;D&&D.emit("compile-error",{message:h,error:b.message,start:b.location&&b.location.start.offset,end:b.location&&b.location.end.offset,groupId:`translate:${a}`}),console.error(C?`${s}
${C}`:s)}},onCacheKey:b=>v5(n,a,b)}}function DF(t,n,a,h){const{modifiers:m,pluralRules:g,messageResolver:b}=t,C={locale:n,modifiers:m,pluralRules:g,messages:D=>{const M=b(a,D);if(fn(M)){let L=!1;const Y=ES(t,D,n,M,D,()=>{L=!0});return L?bS:Y}else return Ha(M)?M:bS}};return t.processor&&(C.processor=t.processor),h.list&&(C.list=h.list),h.named&&(C.named=h.named),Vr(h.plural)&&(C.pluralIndex=h.plural),C}const TS=typeof Intl!="undefined",AS={dateTimeFormat:TS&&typeof Intl.DateTimeFormat!="undefined",numberFormat:TS&&typeof Intl.NumberFormat!="undefined"};function SS(t,...n){const{datetimeFormats:a,unresolving:h,fallbackLocale:m,onWarn:g,localeFallbacker:b}=t,{__datetimeFormatters:s}=t;if(!AS.dateTimeFormat)return g(Wf(ys.CANNOT_FORMAT_DATE)),H_;const[C,D,M,L]=k0(...n),F=Li(M.missingWarn)?M.missingWarn:t.missingWarn,Y=Li(M.fallbackWarn)?M.fallbackWarn:t.fallbackWarn,Te=!!M.part,ue=fn(M.locale)?M.locale:t.locale,K=b(t,m,ue);if(!fn(C)||C==="")return new Intl.DateTimeFormat(ue).format(D);let G={},Q,_e=null,Ce=ue,Ae=null;const Le="datetime format";for(let Xe=0;Xe<K.length;Xe++){if(Q=Ae=K[Xe],ue!==Q&&G_(Y,C)&&g(Wf(ys.FALLBACK_TO_DATE_FORMAT,{key:C,target:Q})),ue!==Q){const ve=t.__v_emitter;ve&&ve.emit("fallback",{type:Le,key:C,from:Ce,to:Ae,groupId:`${Le}:${C}`})}if(G=a[Q]||{},_e=G[C],oi(_e))break;C0(t,C,Q,F,Le),Ce=Ae}if(!oi(_e)||!fn(Q))return h?V_:C;let $e=`${Q}__${C}`;$_(L)||($e=`${$e}__${JSON.stringify(L)}`);let pt=s.get($e);return pt||(pt=new Intl.DateTimeFormat(Q,jr({},_e,L)),s.set($e,pt)),Te?pt.formatToParts(D):pt.format(D)}function k0(...t){const[n,a,h,m]=t;let g={},b={},s;if(fn(n)){const C=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!C)throw qf(Ml.INVALID_ISO_DATE_ARGUMENT);const D=C[3]?C[3].trim().startsWith("T")?`${C[1].trim()}${C[3].trim()}`:`${C[1].trim()}T${C[3].trim()}`:C[1].trim();s=new Date(D);try{s.toISOString()}catch{throw qf(Ml.INVALID_ISO_DATE_ARGUMENT)}}else if(b5(n)){if(isNaN(n.getTime()))throw qf(Ml.INVALID_DATE_ARGUMENT);s=n}else if(Vr(n))s=n;else throw qf(Ml.INVALID_ARGUMENT);return fn(a)?g.key=a:oi(a)&&(g=a),fn(h)?g.locale=h:oi(h)&&(b=h),oi(m)&&(b=m),[g.key||"",s,g,b]}function CS(t,n,a){const h=t;for(const m in a){const g=`${n}__${m}`;!h.__datetimeFormatters.has(g)||h.__datetimeFormatters.delete(g)}}function IS(t,...n){const{numberFormats:a,unresolving:h,fallbackLocale:m,onWarn:g,localeFallbacker:b}=t,{__numberFormatters:s}=t;if(!AS.numberFormat)return g(Wf(ys.CANNOT_FORMAT_NUMBER)),H_;const[C,D,M,L]=L0(...n),F=Li(M.missingWarn)?M.missingWarn:t.missingWarn,Y=Li(M.fallbackWarn)?M.fallbackWarn:t.fallbackWarn,Te=!!M.part,ue=fn(M.locale)?M.locale:t.locale,K=b(t,m,ue);if(!fn(C)||C==="")return new Intl.NumberFormat(ue).format(D);let G={},Q,_e=null,Ce=ue,Ae=null;const Le="number format";for(let Xe=0;Xe<K.length;Xe++){if(Q=Ae=K[Xe],ue!==Q&&G_(Y,C)&&g(Wf(ys.FALLBACK_TO_NUMBER_FORMAT,{key:C,target:Q})),ue!==Q){const ve=t.__v_emitter;ve&&ve.emit("fallback",{type:Le,key:C,from:Ce,to:Ae,groupId:`${Le}:${C}`})}if(G=a[Q]||{},_e=G[C],oi(_e))break;C0(t,C,Q,F,Le),Ce=Ae}if(!oi(_e)||!fn(Q))return h?V_:C;let $e=`${Q}__${C}`;$_(L)||($e=`${$e}__${JSON.stringify(L)}`);let pt=s.get($e);return pt||(pt=new Intl.NumberFormat(Q,jr({},_e,L)),s.set($e,pt)),Te?pt.formatToParts(D):pt.format(D)}function L0(...t){const[n,a,h,m]=t;let g={},b={};if(!Vr(n))throw qf(Ml.INVALID_ARGUMENT);const s=n;return fn(a)?g.key=a:oi(a)&&(g=a),fn(h)?g.locale=h:oi(h)&&(b=h),oi(m)&&(b=m),[g.key||"",s,g,b]}function MS(t,n,a){const h=t;for(const m in a){const g=`${n}__${m}`;!h.__numberFormatters.has(g)||h.__numberFormatters.delete(g)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(kp().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-devtools v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const P0={["vue-devtools-plugin-vue-i18n"]:"Vue I18n devtools",["vue-i18n-resource-inspector"]:"I18n Resources",["vue-i18n-timeline"]:"Vue I18n"},RF={["vue-i18n-resource-inspector"]:"Search for scopes ..."},zF={["vue-i18n-timeline"]:16764185};/*!
  * vue-i18n v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const NF="9.2.0-beta.17";function FF(){let t=!1;typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(t=!0,kp().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(t=!0,kp().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(kp().__INTLIFY_PROD_DEVTOOLS__=!1),t&&console.warn("You are running the esm-bundler build of vue-i18n. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle.")}let kS=ys.__EXTEND_POINT__;const vh=()=>kS++,Pr={FALLBACK_TO_ROOT:kS,NOT_SUPPORTED_PRESERVE:vh(),NOT_SUPPORTED_FORMATTER:vh(),NOT_SUPPORTED_PRESERVE_DIRECTIVE:vh(),NOT_SUPPORTED_GET_CHOICE_INDEX:vh(),COMPONENT_NAME_LEGACY_COMPATIBLE:vh(),NOT_FOUND_PARENT_SCOPE:vh(),NOT_SUPPORT_MULTI_I18N_INSTANCE:vh()},BF={[Pr.FALLBACK_TO_ROOT]:"Fall back to {type} '{key}' with root locale.",[Pr.NOT_SUPPORTED_PRESERVE]:"Not supported 'preserve'.",[Pr.NOT_SUPPORTED_FORMATTER]:"Not supported 'formatter'.",[Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE]:"Not supported 'preserveDirectiveContent'.",[Pr.NOT_SUPPORTED_GET_CHOICE_INDEX]:"Not supported 'getChoiceIndex'.",[Pr.COMPONENT_NAME_LEGACY_COMPATIBLE]:"Component name legacy compatible: '{name}' -> 'i18n'",[Pr.NOT_FOUND_PARENT_SCOPE]:"Not found parent scope. use the global scope.",[Pr.NOT_SUPPORT_MULTI_I18N_INSTANCE]:"Not support multi i18n instance."};function la(t,...n){return B_(BF[t],...n)}let LS=Zn.__EXTEND_POINT__;const Bs=()=>LS++,Pi={UNEXPECTED_RETURN_TYPE:LS,INVALID_ARGUMENT:Bs(),MUST_BE_CALL_SETUP_TOP:Bs(),NOT_INSLALLED:Bs(),NOT_AVAILABLE_IN_LEGACY_MODE:Bs(),REQUIRED_VALUE:Bs(),INVALID_VALUE:Bs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Bs(),NOT_INSLALLED_WITH_PROVIDE:Bs(),UNEXPECTED_ERROR:Bs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Bs(),BRIDGE_SUPPORT_VUE_2_ONLY:Bs(),__EXTEND_POINT__:Bs()};function no(t,...n){return U_(t,null,{messages:$F,args:n})}const $F={[Pi.UNEXPECTED_RETURN_TYPE]:"Unexpected return type in composer",[Pi.INVALID_ARGUMENT]:"Invalid argument",[Pi.MUST_BE_CALL_SETUP_TOP]:"Must be called at the top of a `setup` function",[Pi.NOT_INSLALLED]:"Need to install with `app.use` function",[Pi.UNEXPECTED_ERROR]:"Unexpected error",[Pi.NOT_AVAILABLE_IN_LEGACY_MODE]:"Not available in legacy mode",[Pi.REQUIRED_VALUE]:"Required in value: {0}",[Pi.INVALID_VALUE]:"Invalid value",[Pi.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN]:"Cannot setup vue-devtools plugin",[Pi.NOT_INSLALLED_WITH_PROVIDE]:"Need to install with `provide` function",[Pi.NOT_COMPATIBLE_LEGACY_VUE_I18N]:"Not compatible legacy VueI18n.",[Pi.BRIDGE_SUPPORT_VUE_2_ONLY]:"vue-i18n-bridge support Vue 2.x only"},O0=Va("__transrateVNode"),D0=Va("__datetimeParts"),R0=Va("__numberParts"),xh=Va("__enableEmitter"),Op=Va("__disableEmitter"),PS=Va("__setPluralRules");Va("__intlifyMeta");const OS=Va("__injectWithOption");function z0(t){if(!er(t))return t;for(const n in t)if(!!w0(t,n))if(!n.includes("."))er(t[n])&&z0(t[n]);else{const a=n.split("."),h=a.length-1;let m=t;for(let g=0;g<h;g++)a[g]in m||(m[a[g]]={}),m=m[a[g]];m[a[h]]=t[n],delete t[n],er(m[a[h]])&&z0(m[a[h]])}return t}function N0(t,n){const{messages:a,__i18n:h,messageResolver:m,flatJson:g}=n,b=oi(a)?a:ar(h)?{}:{[t]:{}};if(ar(h)&&h.forEach(s=>{if("locale"in s&&"resource"in s){const{locale:C,resource:D}=s;C?(b[C]=b[C]||{},Dp(D,b[C])):Dp(D,b)}else fn(s)&&Dp(JSON.parse(s),b)}),m==null&&g)for(const s in b)w0(b,s)&&z0(b[s]);return b}const W_=t=>!er(t)||ar(t);function Dp(t,n){if(W_(t)||W_(n))throw no(Pi.INVALID_VALUE);for(const a in t)w0(t,a)&&(W_(t[a])||W_(n[a])?n[a]=t[a]:Dp(t[a],n[a]))}function DS(t){return t.type}const RS="__INTLIFY_META__";let zS=0;function NS(t){return(n,a,h,m)=>t(a,h,wl()||void 0,m)}const UF=()=>{const t=wl();let n=null;return t&&(n=DS(t)[RS])?{[RS]:n}:null};function F0(t={},n){const{__root:a}=t,h=a===void 0;let m=Li(t.inheritLocale)?t.inheritLocale:!0;const g=gf(a&&m?a.locale.value:fn(t.locale)?t.locale:j_),b=gf(a&&m?a.fallbackLocale.value:fn(t.fallbackLocale)||ar(t.fallbackLocale)||oi(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:g.value),s=gf(N0(g.value,t)),C=gf(oi(t.datetimeFormats)?t.datetimeFormats:{[g.value]:{}}),D=gf(oi(t.numberFormats)?t.numberFormats:{[g.value]:{}});let M=a?a.missingWarn:Li(t.missingWarn)||Hf(t.missingWarn)?t.missingWarn:!0,L=a?a.fallbackWarn:Li(t.fallbackWarn)||Hf(t.fallbackWarn)?t.fallbackWarn:!0,F=a?a.fallbackRoot:Li(t.fallbackRoot)?t.fallbackRoot:!0,Y=!!t.fallbackFormat,Te=Sr(t.missing)?t.missing:null,ue=Sr(t.missing)?NS(t.missing):null,K=Sr(t.postTranslation)?t.postTranslation:null,G=Li(t.warnHtmlMessage)?t.warnHtmlMessage:!0,Q=!!t.escapeParameter;const _e=a?a.modifiers:oi(t.modifiers)?t.modifiers:{};let Ce=t.pluralRules||a&&a.pluralRules,Ae;function Le(){const Me={version:NF,locale:g.value,fallbackLocale:b.value,messages:s.value,modifiers:_e,pluralRules:Ce,missing:ue===null?void 0:ue,missingWarn:M,fallbackWarn:L,fallbackFormat:Y,unresolving:!0,postTranslation:K===null?void 0:K,warnHtmlMessage:G,escapeParameter:Q,messageResolver:t.messageResolver,__meta:{framework:"vue"}};return Me.datetimeFormats=C.value,Me.numberFormats=D.value,Me.__datetimeFormatters=oi(Ae)?Ae.__datetimeFormatters:void 0,Me.__numberFormatters=oi(Ae)?Ae.__numberFormatters:void 0,Me.__v_emitter=oi(Ae)?Ae.__v_emitter:void 0,EF(Me)}Ae=Le(),Pp(Ae,g.value,b.value);function $e(){return[g.value,b.value,s.value,C.value,D.value]}const pt=Wi({get:()=>g.value,set:Me=>{g.value=Me,Ae.locale=g.value}}),Xe=Wi({get:()=>b.value,set:Me=>{b.value=Me,Ae.fallbackLocale=b.value,Pp(Ae,g.value,Me)}}),ve=Wi(()=>s.value),Ye=Wi(()=>C.value),Be=Wi(()=>D.value);function Pe(){return Sr(K)?K:null}function xe(Me){K=Me,Ae.postTranslation=Me}function je(){return Te}function lt(Me){Me!==null&&(ue=NS(Me)),Te=Me,Ae.missing=ue}function Qe(Me,et){return Me!=="translate"||!et.resolvedMessage}function ht(Me,et,jt,Zt,bn,Tn){$e();let An;try{_S(UF()),An=Me(Ae)}finally{_S(null)}if(Vr(An)&&An===V_){const[Sn,si]=et();if(a&&fn(Sn)&&Qe(jt,si)){F&&(G_(L,Sn)||yS(M,Sn))&&es(la(Pr.FALLBACK_TO_ROOT,{key:Sn,type:jt}));{const{__v_emitter:Ci}=Ae;Ci&&F&&Ci.emit("fallback",{type:jt,key:Sn,to:"global",groupId:`${jt}:${Sn}`})}}return a&&F?Zt(a):bn(Sn)}else{if(Tn(An))return An;throw no(Pi.UNEXPECTED_RETURN_TYPE)}}function ct(...Me){return ht(et=>Reflect.apply(wS,null,[et,...Me]),()=>M0(...Me),"translate",et=>Reflect.apply(et.t,et,[...Me]),et=>et,et=>fn(et))}function Ut(...Me){const[et,jt,Zt]=Me;if(Zt&&!er(Zt))throw no(Pi.INVALID_ARGUMENT);return ct(et,jt,jr({resolvedMessage:!0},Zt||{}))}function Ke(...Me){return ht(et=>Reflect.apply(SS,null,[et,...Me]),()=>k0(...Me),"datetime format",et=>Reflect.apply(et.d,et,[...Me]),()=>H_,et=>fn(et))}function hn(...Me){return ht(et=>Reflect.apply(IS,null,[et,...Me]),()=>L0(...Me),"number format",et=>Reflect.apply(et.n,et,[...Me]),()=>H_,et=>fn(et))}function Ht(Me){return Me.map(et=>fn(et)?eo(xf,null,et,0):et)}const Ue={normalize:Ht,interpolate:Me=>Me,type:"vnode"};function wt(...Me){return ht(et=>{let jt;const Zt=et;try{Zt.processor=Ue,jt=Reflect.apply(wS,null,[Zt,...Me])}finally{Zt.processor=null}return jt},()=>M0(...Me),"translate",et=>et[O0](...Me),et=>[eo(xf,null,et,0)],et=>ar(et))}function kt(...Me){return ht(et=>Reflect.apply(IS,null,[et,...Me]),()=>L0(...Me),"number format",et=>et[R0](...Me),()=>[],et=>fn(et)||ar(et))}function Et(...Me){return ht(et=>Reflect.apply(SS,null,[et,...Me]),()=>k0(...Me),"datetime format",et=>et[D0](...Me),()=>[],et=>fn(et)||ar(et))}function sn(Me){Ce=Me,Ae.pluralRules=Ce}function En(Me,et){const jt=fn(et)?et:g.value,Zt=ot(jt);return Ae.messageResolver(Zt,Me)!==null}function me(Me){let et=null;const jt=uS(Ae,b.value,g.value);for(let Zt=0;Zt<jt.length;Zt++){const bn=s.value[jt[Zt]]||{},Tn=Ae.messageResolver(bn,Me);if(Tn!=null){et=Tn;break}}return et}function oe(Me){const et=me(Me);return et!=null?et:a?a.tm(Me)||{}:{}}function ot(Me){return s.value[Me]||{}}function te(Me,et){s.value[Me]=et,Ae.messages=s.value}function ge(Me,et){s.value[Me]=s.value[Me]||{},Dp(et,s.value[Me]),Ae.messages=s.value}function Ze(Me){return C.value[Me]||{}}function Je(Me,et){C.value[Me]=et,Ae.datetimeFormats=C.value,CS(Ae,Me,et)}function mt(Me,et){C.value[Me]=jr(C.value[Me]||{},et),Ae.datetimeFormats=C.value,CS(Ae,Me,et)}function St(Me){return D.value[Me]||{}}function Vt(Me,et){D.value[Me]=et,Ae.numberFormats=D.value,MS(Ae,Me,et)}function Ct(Me,et){D.value[Me]=jr(D.value[Me]||{},et),Ae.numberFormats=D.value,MS(Ae,Me,et)}zS++,a&&(Na(a.locale,Me=>{m&&(g.value=Me,Ae.locale=Me,Pp(Ae,g.value,b.value))}),Na(a.fallbackLocale,Me=>{m&&(b.value=Me,Ae.fallbackLocale=Me,Pp(Ae,g.value,b.value))}));const vt={id:zS,locale:pt,fallbackLocale:Xe,get inheritLocale(){return m},set inheritLocale(Me){m=Me,Me&&a&&(g.value=a.locale.value,b.value=a.fallbackLocale.value,Pp(Ae,g.value,b.value))},get availableLocales(){return Object.keys(s.value).sort()},messages:ve,get modifiers(){return _e},get pluralRules(){return Ce||{}},get isGlobal(){return h},get missingWarn(){return M},set missingWarn(Me){M=Me,Ae.missingWarn=M},get fallbackWarn(){return L},set fallbackWarn(Me){L=Me,Ae.fallbackWarn=L},get fallbackRoot(){return F},set fallbackRoot(Me){F=Me},get fallbackFormat(){return Y},set fallbackFormat(Me){Y=Me,Ae.fallbackFormat=Y},get warnHtmlMessage(){return G},set warnHtmlMessage(Me){G=Me,Ae.warnHtmlMessage=Me},get escapeParameter(){return Q},set escapeParameter(Me){Q=Me,Ae.escapeParameter=Me},t:ct,getLocaleMessage:ot,setLocaleMessage:te,mergeLocaleMessage:ge,getPostTranslationHandler:Pe,setPostTranslationHandler:xe,getMissingHandler:je,setMissingHandler:lt,[PS]:sn};return vt.datetimeFormats=Ye,vt.numberFormats=Be,vt.rt=Ut,vt.te=En,vt.tm=oe,vt.d=Ke,vt.n=hn,vt.getDateTimeFormat=Ze,vt.setDateTimeFormat=Je,vt.mergeDateTimeFormat=mt,vt.getNumberFormat=St,vt.setNumberFormat=Vt,vt.mergeNumberFormat=Ct,vt[OS]=t.__injectWithOption,vt[O0]=wt,vt[R0]=kt,vt[D0]=Et,vt[xh]=Me=>{Ae.__v_emitter=Me},vt[Op]=()=>{Ae.__v_emitter=void 0},vt}function VF(t){const n=fn(t.locale)?t.locale:j_,a=fn(t.fallbackLocale)||ar(t.fallbackLocale)||oi(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,h=Sr(t.missing)?t.missing:void 0,m=Li(t.silentTranslationWarn)||Hf(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,g=Li(t.silentFallbackWarn)||Hf(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,b=Li(t.fallbackRoot)?t.fallbackRoot:!0,s=!!t.formatFallbackMessages,C=oi(t.modifiers)?t.modifiers:{},D=t.pluralizationRules,M=Sr(t.postTranslation)?t.postTranslation:void 0,L=fn(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,F=!!t.escapeParameterHtml,Y=Li(t.sync)?t.sync:!0;t.formatter&&es(la(Pr.NOT_SUPPORTED_FORMATTER)),t.preserveDirectiveContent&&es(la(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE));let Te=t.messages;if(oi(t.sharedMessages)){const Ae=t.sharedMessages;Te=Object.keys(Ae).reduce(($e,pt)=>{const Xe=$e[pt]||($e[pt]={});return jr(Xe,Ae[pt]),$e},Te||{})}const{__i18n:ue,__root:K,__injectWithOption:G}=t,Q=t.datetimeFormats,_e=t.numberFormats,Ce=t.flatJson;return{locale:n,fallbackLocale:a,messages:Te,flatJson:Ce,datetimeFormats:Q,numberFormats:_e,missing:h,missingWarn:m,fallbackWarn:g,fallbackRoot:b,fallbackFormat:s,modifiers:C,pluralRules:D,postTranslation:M,warnHtmlMessage:L,escapeParameter:F,messageResolver:t.messageResolver,inheritLocale:Y,__i18n:ue,__root:K,__injectWithOption:G}}function B0(t={},n){{const a=F0(VF(t)),h={id:a.id,get locale(){return a.locale.value},set locale(m){a.locale.value=m},get fallbackLocale(){return a.fallbackLocale.value},set fallbackLocale(m){a.fallbackLocale.value=m},get messages(){return a.messages.value},get datetimeFormats(){return a.datetimeFormats.value},get numberFormats(){return a.numberFormats.value},get availableLocales(){return a.availableLocales},get formatter(){return es(la(Pr.NOT_SUPPORTED_FORMATTER)),{interpolate(){return[]}}},set formatter(m){es(la(Pr.NOT_SUPPORTED_FORMATTER))},get missing(){return a.getMissingHandler()},set missing(m){a.setMissingHandler(m)},get silentTranslationWarn(){return Li(a.missingWarn)?!a.missingWarn:a.missingWarn},set silentTranslationWarn(m){a.missingWarn=Li(m)?!m:m},get silentFallbackWarn(){return Li(a.fallbackWarn)?!a.fallbackWarn:a.fallbackWarn},set silentFallbackWarn(m){a.fallbackWarn=Li(m)?!m:m},get modifiers(){return a.modifiers},get formatFallbackMessages(){return a.fallbackFormat},set formatFallbackMessages(m){a.fallbackFormat=m},get postTranslation(){return a.getPostTranslationHandler()},set postTranslation(m){a.setPostTranslationHandler(m)},get sync(){return a.inheritLocale},set sync(m){a.inheritLocale=m},get warnHtmlInMessage(){return a.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(m){a.warnHtmlMessage=m!=="off"},get escapeParameterHtml(){return a.escapeParameter},set escapeParameterHtml(m){a.escapeParameter=m},get preserveDirectiveContent(){return es(la(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE)),!0},set preserveDirectiveContent(m){es(la(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE))},get pluralizationRules(){return a.pluralRules||{}},__composer:a,t(...m){const[g,b,s]=m,C={};let D=null,M=null;if(!fn(g))throw no(Pi.INVALID_ARGUMENT);const L=g;return fn(b)?C.locale=b:ar(b)?D=b:oi(b)&&(M=b),ar(s)?D=s:oi(s)&&(M=s),Reflect.apply(a.t,a,[L,D||M||{},C])},rt(...m){return Reflect.apply(a.rt,a,[...m])},tc(...m){const[g,b,s]=m,C={plural:1};let D=null,M=null;if(!fn(g))throw no(Pi.INVALID_ARGUMENT);const L=g;return fn(b)?C.locale=b:Vr(b)?C.plural=b:ar(b)?D=b:oi(b)&&(M=b),fn(s)?C.locale=s:ar(s)?D=s:oi(s)&&(M=s),Reflect.apply(a.t,a,[L,D||M||{},C])},te(m,g){return a.te(m,g)},tm(m){return a.tm(m)},getLocaleMessage(m){return a.getLocaleMessage(m)},setLocaleMessage(m,g){a.setLocaleMessage(m,g)},mergeLocaleMessage(m,g){a.mergeLocaleMessage(m,g)},d(...m){return Reflect.apply(a.d,a,[...m])},getDateTimeFormat(m){return a.getDateTimeFormat(m)},setDateTimeFormat(m,g){a.setDateTimeFormat(m,g)},mergeDateTimeFormat(m,g){a.mergeDateTimeFormat(m,g)},n(...m){return Reflect.apply(a.n,a,[...m])},getNumberFormat(m){return a.getNumberFormat(m)},setNumberFormat(m,g){a.setNumberFormat(m,g)},mergeNumberFormat(m,g){a.mergeNumberFormat(m,g)},getChoiceIndex(m,g){return es(la(Pr.NOT_SUPPORTED_GET_CHOICE_INDEX)),-1},__onComponentInstanceCreated(m){const{componentInstanceCreatedListener:g}=t;g&&g(m,h)}};return h.__enableEmitter=m=>{const g=a;g[xh]&&g[xh](m)},h.__disableEmitter=()=>{const m=a;m[Op]&&m[Op]()},h}}const $0={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}},U0=kc({name:"i18n-t",props:jr({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Vr(t)||!isNaN(t)}},$0),setup(t,n){const{slots:a,attrs:h}=n,m=t.i18n||H0({useScope:t.scope,__useComponent:!0}),g=Object.keys(a).filter(b=>b!=="_");return()=>{const b={};t.locale&&(b.locale=t.locale),t.plural!==void 0&&(b.plural=fn(t.plural)?+t.plural:t.plural);const s=jF(n,g),C=m[O0](t.keypath,s,b),D=jr({},h),M=fn(t.tag)||er(t.tag)?t.tag:ko;return Qu(M,D,C)}}});function jF({slots:t},n){return n.length===1&&n[0]==="default"?t.default?t.default():[]:n.reduce((a,h)=>{const m=t[h];return m&&(a[h]=m()),a},{})}function FS(t,n,a,h){const{slots:m,attrs:g}=n;return()=>{const b={part:!0};let s={};t.locale&&(b.locale=t.locale),fn(t.format)?b.key=t.format:er(t.format)&&(fn(t.format.key)&&(b.key=t.format.key),s=Object.keys(t.format).reduce((F,Y)=>a.includes(Y)?jr({},F,{[Y]:t.format[Y]}):F,{}));const C=h(t.value,b,s);let D=[b.key];ar(C)?D=C.map((F,Y)=>{const Te=m[F.type];return Te?Te({[F.type]:F.value,index:Y,parts:C}):[F.value]}):fn(C)&&(D=[C]);const M=jr({},g),L=fn(t.tag)||er(t.tag)?t.tag:ko;return Qu(L,M,D)}}const HF=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],BS=kc({name:"i18n-n",props:jr({value:{type:Number,required:!0},format:{type:[String,Object]}},$0),setup(t,n){const a=t.i18n||H0({useScope:"parent",__useComponent:!0});return FS(t,n,HF,(...h)=>a[R0](...h))}}),GF=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],$S=kc({name:"i18n-d",props:jr({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},$0),setup(t,n){const a=t.i18n||H0({useScope:"parent",__useComponent:!0});return FS(t,n,GF,(...h)=>a[D0](...h))}});function WF(t,n){const a=t;if(t.mode==="composition")return a.__getInstance(n)||t.global;{const h=a.__getInstance(n);return h!=null?h.__composer:t.global.__composer}}function qF(t){const n=(a,{instance:h,value:m,modifiers:g})=>{if(!h||!h.$)throw no(Pi.UNEXPECTED_ERROR);const b=WF(t,h.$);g.preserve&&es(la(Pr.NOT_SUPPORTED_PRESERVE));const s=ZF(m);a.textContent=Reflect.apply(b.t,b,[...XF(s)])};return{beforeMount:n,beforeUpdate:n}}function ZF(t){if(fn(t))return{path:t};if(oi(t)){if(!("path"in t))throw no(Pi.REQUIRED_VALUE,"path");return t}else throw no(Pi.INVALID_VALUE)}function XF(t){const{path:n,locale:a,args:h,choice:m,plural:g}=t,b={},s=h||{};return fn(a)&&(b.locale=a),Vr(m)&&(b.plural=m),Vr(g)&&(b.plural=g),[n,s,b]}function YF(t,n,...a){const h=oi(a[0])?a[0]:{},m=!!h.useI18nComponentName,g=Li(h.globalInstall)?h.globalInstall:!0;g&&m&&es(la(Pr.COMPONENT_NAME_LEGACY_COMPATIBLE,{name:U0.name})),g&&(t.component(m?"i18n":U0.name,U0),t.component(BS.name,BS),t.component($S.name,$S)),t.directive("t",qF(n))}const US="vue-i18n: composer properties";let V0;async function KF(t,n){return new Promise((a,h)=>{try{Ev({id:"vue-devtools-plugin-vue-i18n",label:P0["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[US],app:t},m=>{V0=m,m.on.visitComponentTree(({componentInstance:b,treeNode:s})=>{JF(b,s,n)}),m.on.inspectComponent(({componentInstance:b,instanceData:s})=>{b.vnode.el&&b.vnode.el.__VUE_I18N__&&s&&(n.mode==="legacy"?b.vnode.el.__VUE_I18N__!==n.global.__composer&&jS(s,b.vnode.el.__VUE_I18N__):jS(s,b.vnode.el.__VUE_I18N__))}),m.addInspector({id:"vue-i18n-resource-inspector",label:P0["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:RF["vue-i18n-resource-inspector"]}),m.on.getInspectorTree(b=>{b.app===t&&b.inspectorId==="vue-i18n-resource-inspector"&&iB(b,n)});const g=new Map;m.on.getInspectorState(async b=>{if(b.app===t&&b.inspectorId==="vue-i18n-resource-inspector")if(m.unhighlightElement(),oB(b,n),b.nodeId==="global"){if(!g.has(b.app)){const[s]=await m.getComponentInstances(b.app);g.set(b.app,s)}m.highlightElement(g.get(b.app))}else{const s=rB(b.nodeId,n);s&&m.highlightElement(s)}}),m.on.editInspectorState(b=>{b.app===t&&b.inspectorId==="vue-i18n-resource-inspector"&&aB(b,n)}),m.addTimelineLayer({id:"vue-i18n-timeline",label:P0["vue-i18n-timeline"],color:zF["vue-i18n-timeline"]}),a(!0)})}catch(m){console.error(m),h(!1)}})}function VS(t){return t.type.name||t.type.displayName||t.type.__file||"Anonymous"}function JF(t,n,a){const h=a.mode==="composition"?a.global:a.global.__composer;if(t&&t.vnode.el&&t.vnode.el.__VUE_I18N__&&t.vnode.el.__VUE_I18N__!==h){const m={label:`i18n (${VS(t)} Scope)`,textColor:0,backgroundColor:16764185};n.tags.push(m)}}function jS(t,n){const a=US;t.state.push({type:a,key:"locale",editable:!0,value:n.locale.value}),t.state.push({type:a,key:"availableLocales",editable:!1,value:n.availableLocales}),t.state.push({type:a,key:"fallbackLocale",editable:!0,value:n.fallbackLocale.value}),t.state.push({type:a,key:"inheritLocale",editable:!0,value:n.inheritLocale}),t.state.push({type:a,key:"messages",editable:!1,value:j0(n.messages.value)}),t.state.push({type:a,key:"datetimeFormats",editable:!1,value:n.datetimeFormats.value}),t.state.push({type:a,key:"numberFormats",editable:!1,value:n.numberFormats.value})}function j0(t){const n={};return Object.keys(t).forEach(a=>{const h=t[a];Sr(h)&&"source"in h?n[a]=nB(h):er(h)?n[a]=j0(h):n[a]=h}),n}const QF={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function eB(t){return t.replace(/[<>"&]/g,tB)}function tB(t){return QF[t]||t}function nB(t){const n=t.source?`("${eB(t.source)}")`:"(?)";return{_custom:{type:"function",display:`<span>\u0192</span> ${n}`}}}function iB(t,n){t.rootNodes.push({id:"global",label:"Global Scope"});const a=n.mode==="composition"?n.global:n.global.__composer;for(const[h,m]of n.__instances){const g=n.mode==="composition"?m:m.__composer;a!==g&&t.rootNodes.push({id:g.id.toString(),label:`${VS(h)} Scope`})}}function rB(t,n){let a=null;if(t!=="global"){for(const[h,m]of n.__instances.entries())if(m.id.toString()===t){a=h;break}}return a}function HS(t,n){if(t==="global")return n.mode==="composition"?n.global:n.global.__composer;{const a=Array.from(n.__instances.values()).find(h=>h.id.toString()===t);return a?n.mode==="composition"?a:a.__composer:null}}function oB(t,n){const a=HS(t.nodeId,n);return a&&(t.state=sB(a)),null}function sB(t){const n={},a="Locale related info",h=[{type:a,key:"locale",editable:!0,value:t.locale.value},{type:a,key:"fallbackLocale",editable:!0,value:t.fallbackLocale.value},{type:a,key:"availableLocales",editable:!1,value:t.availableLocales},{type:a,key:"inheritLocale",editable:!0,value:t.inheritLocale}];n[a]=h;const m="Locale messages info",g=[{type:m,key:"messages",editable:!1,value:j0(t.messages.value)}];n[m]=g;{const b="Datetime formats info",s=[{type:b,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}];n[b]=s;const C="Datetime formats info",D=[{type:C,key:"numberFormats",editable:!1,value:t.numberFormats.value}];n[C]=D}return n}function Rp(t,n){if(V0){let a;n&&"groupId"in n&&(a=n.groupId,delete n.groupId),V0.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:t,groupId:a,time:Date.now(),meta:{},data:n||{},logType:t==="compile-error"?"error":t==="fallback"||t==="missing"?"warning":"default"}})}}function aB(t,n){const a=HS(t.nodeId,n);if(a){const[h]=t.path;h==="locale"&&fn(t.state.value)?a.locale.value=t.state.value:h==="fallbackLocale"&&(fn(t.state.value)||ar(t.state.value)||er(t.state.value))?a.fallbackLocale.value=t.state.value:h==="inheritLocale"&&Li(t.state.value)&&(a.inheritLocale=t.state.value)}}function lB(t,n,a){return{beforeCreate(){const h=wl();if(!h)throw no(Pi.UNEXPECTED_ERROR);const m=this.$options;if(m.i18n){const g=m.i18n;m.__i18n&&(g.__i18n=m.__i18n),g.__root=n,this===this.$root?this.$i18n=GS(t,g):(g.__injectWithOption=!0,this.$i18n=B0(g))}else m.__i18n?this===this.$root?this.$i18n=GS(t,m):this.$i18n=B0({__i18n:m.__i18n,__injectWithOption:!0,__root:n}):this.$i18n=t;t.__onComponentInstanceCreated(this.$i18n),a.__setInstance(h,this.$i18n),this.$t=(...g)=>this.$i18n.t(...g),this.$rt=(...g)=>this.$i18n.rt(...g),this.$tc=(...g)=>this.$i18n.tc(...g),this.$te=(g,b)=>this.$i18n.te(g,b),this.$d=(...g)=>this.$i18n.d(...g),this.$n=(...g)=>this.$i18n.n(...g),this.$tm=g=>this.$i18n.tm(g)},mounted(){{this.$el.__VUE_I18N__=this.$i18n.__composer;const h=this.__v_emitter=T0(),m=this.$i18n;m.__enableEmitter&&m.__enableEmitter(h),h.on("*",Rp)}},unmounted(){const h=wl();if(!h)throw no(Pi.UNEXPECTED_ERROR);pv(()=>{{this.__v_emitter&&(this.__v_emitter.off("*",Rp),delete this.__v_emitter);const m=this.$i18n;m.__disableEmitter&&m.__disableEmitter(),delete this.$el.__VUE_I18N__}delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__deleteInstance(h),delete this.$i18n})}}}function GS(t,n){t.locale=n.locale||t.locale,t.fallbackLocale=n.fallbackLocale||t.fallbackLocale,t.missing=n.missing||t.missing,t.silentTranslationWarn=n.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=n.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=n.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=n.postTranslation||t.postTranslation,t.warnHtmlInMessage=n.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=n.escapeParameterHtml||t.escapeParameterHtml,t.sync=n.sync||t.sync,t.__composer[PS](n.pluralizationRules||t.pluralizationRules);const a=N0(t.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(a).forEach(h=>t.mergeLocaleMessage(h,a[h])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(h=>t.mergeDateTimeFormat(h,n.datetimeFormats[h])),n.numberFormats&&Object.keys(n.numberFormats).forEach(h=>t.mergeNumberFormat(h,n.numberFormats[h])),t}const cB=Va("global-vue-i18n");function tV(t={},n){const a=__VUE_I18N_LEGACY_API__&&Li(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,h=!!t.globalInjection,m=new Map,g=uB(t,a),b=Va("vue-i18n");function s(M){return m.get(M)||null}function C(M,L){m.set(M,L)}function D(M){m.delete(M)}{const M={get mode(){return __VUE_I18N_LEGACY_API__&&a?"legacy":"composition"},async install(L,...F){L.__VUE_I18N__=M,L.__VUE_I18N_SYMBOL__=b,L.provide(L.__VUE_I18N_SYMBOL__,M),!a&&h&&vB(L,M.global),__VUE_I18N_FULL_INSTALL__&&YF(L,M,...F),__VUE_I18N_LEGACY_API__&&a&&L.mixin(lB(g,g.__composer,M));{if(!await KF(L,M))throw no(Pi.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN);const Te=T0();if(a){const ue=g;ue.__enableEmitter&&ue.__enableEmitter(Te)}else{const ue=g;ue[xh]&&ue[xh](Te)}Te.on("*",Rp)}},get global(){return g},__instances:m,__getInstance:s,__setInstance:C,__deleteInstance:D};return M}}function H0(t={}){const n=wl();if(n==null)throw no(Pi.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw no(Pi.NOT_INSLALLED);const a=hB(n),h=dB(a),m=DS(n),g=fB(t,m);if(g==="global")return pB(h,t,m),h;if(g==="parent"){let C=mB(a,n,t.__useComponent);return C==null&&(es(la(Pr.NOT_FOUND_PARENT_SCOPE)),C=h),C}if(a.mode==="legacy")throw no(Pi.NOT_AVAILABLE_IN_LEGACY_MODE);const b=a;let s=b.__getInstance(n);if(s==null){const C=jr({},t);"__i18n"in m&&(C.__i18n=m.__i18n),h&&(C.__root=h),s=F0(C),_B(b,n,s),b.__setInstance(n,s)}return s}function uB(t,n,a){return __VUE_I18N_LEGACY_API__&&n?B0(t):F0(t)}function hB(t){{const n=hs(t.isCE?cB:t.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw no(t.isCE?Pi.NOT_INSLALLED_WITH_PROVIDE:Pi.UNEXPECTED_ERROR);return n}}function fB(t,n){return $_(t)?"__i18n"in n?"local":"global":t.useScope?t.useScope:"local"}function dB(t){return t.mode==="composition"?t.global:t.global.__composer}function pB(t,n,a){let h=er(n.messages)?n.messages:{};"__i18nGlobal"in a&&(h=N0(t.locale.value,{messages:h,__i18n:a.__i18nGlobal}));const m=Object.keys(h);m.length&&m.forEach(g=>{t.mergeLocaleMessage(g,h[g])});{if(er(n.datetimeFormats)){const g=Object.keys(n.datetimeFormats);g.length&&g.forEach(b=>{t.mergeDateTimeFormat(b,n.datetimeFormats[b])})}if(er(n.numberFormats)){const g=Object.keys(n.numberFormats);g.length&&g.forEach(b=>{t.mergeNumberFormat(b,n.numberFormats[b])})}}}function mB(t,n,a=!1){let h=null;const m=n.root;let g=n.parent;for(;g!=null;){const b=t;if(t.mode==="composition")h=b.__getInstance(g);else if(__VUE_I18N_LEGACY_API__){const s=b.__getInstance(g);s!=null&&(h=s.__composer,a&&h&&!h[OS]&&(h=null))}if(h!=null||m===g)break;g=g.parent}return h}function _B(t,n,a){let h=null;Xy(()=>{if(n.vnode.el){n.vnode.el.__VUE_I18N__=a,h=T0();const m=a;m[xh]&&m[xh](h),h.on("*",Rp)}},n),Ym(()=>{if(n.vnode.el&&n.vnode.el.__VUE_I18N__){h&&h.off("*",Rp);const m=a;m[Op]&&m[Op](),delete n.vnode.el.__VUE_I18N__}t.__deleteInstance(n)},n)}const gB=["locale","fallbackLocale","availableLocales"],yB=["t","rt","d","n","tm"];function vB(t,n){const a=Object.create(null);gB.forEach(h=>{const m=Object.getOwnPropertyDescriptor(n,h);if(!m)throw no(Pi.UNEXPECTED_ERROR);const g=Qr(m.value)?{get(){return m.value.value},set(b){m.value.value=b}}:{get(){return m.get&&m.get()}};Object.defineProperty(a,h,g)}),t.config.globalProperties.$i18n=a,yB.forEach(h=>{const m=Object.getOwnPropertyDescriptor(n,h);if(!m||!m.value)throw no(Pi.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${h}`,m)})}vF(IF);xF(eF);bF(uS);FF();{const t=kp();t.__INTLIFY__=!0,cF(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var xB=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},a=Symbol("test"),h=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(h)!=="[object Symbol]")return!1;var m=42;n[a]=m;for(a in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var g=Object.getOwnPropertySymbols(n);if(g.length!==1||g[0]!==a||!Object.prototype.propertyIsEnumerable.call(n,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var b=Object.getOwnPropertyDescriptor(n,a);if(b.value!==m||b.enumerable!==!0)return!1}return!0},WS=typeof Symbol!="undefined"&&Symbol,bB=xB,wB=function(){return typeof WS!="function"||typeof Symbol!="function"||typeof WS("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bB()},EB="Function.prototype.bind called on incompatible ",G0=Array.prototype.slice,TB=Object.prototype.toString,AB="[object Function]",SB=function(n){var a=this;if(typeof a!="function"||TB.call(a)!==AB)throw new TypeError(EB+a);for(var h=G0.call(arguments,1),m,g=function(){if(this instanceof m){var M=a.apply(this,h.concat(G0.call(arguments)));return Object(M)===M?M:this}else return a.apply(n,h.concat(G0.call(arguments)))},b=Math.max(0,a.length-h.length),s=[],C=0;C<b;C++)s.push("$"+C);if(m=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(g),a.prototype){var D=function(){};D.prototype=a.prototype,m.prototype=new D,D.prototype=null}return m},CB=SB,W0=Function.prototype.bind||CB,IB=W0,MB=IB.call(Function.call,Object.prototype.hasOwnProperty),yi,zp=SyntaxError,qS=Function,Zf=TypeError,q0=function(t){try{return qS('"use strict"; return ('+t+").constructor;")()}catch{}},bh=Object.getOwnPropertyDescriptor;if(bh)try{bh({},"")}catch{bh=null}var Z0=function(){throw new Zf},kB=bh?function(){try{return arguments.callee,Z0}catch{try{return bh(arguments,"callee").get}catch{return Z0}}}():Z0,Xf=wB(),Zc=Object.getPrototypeOf||function(t){return t.__proto__},Yf={},LB=typeof Uint8Array=="undefined"?yi:Zc(Uint8Array),Kf={"%AggregateError%":typeof AggregateError=="undefined"?yi:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?yi:ArrayBuffer,"%ArrayIteratorPrototype%":Xf?Zc([][Symbol.iterator]()):yi,"%AsyncFromSyncIteratorPrototype%":yi,"%AsyncFunction%":Yf,"%AsyncGenerator%":Yf,"%AsyncGeneratorFunction%":Yf,"%AsyncIteratorPrototype%":Yf,"%Atomics%":typeof Atomics=="undefined"?yi:Atomics,"%BigInt%":typeof BigInt=="undefined"?yi:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?yi:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?yi:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?yi:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?yi:FinalizationRegistry,"%Function%":qS,"%GeneratorFunction%":Yf,"%Int8Array%":typeof Int8Array=="undefined"?yi:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?yi:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?yi:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xf?Zc(Zc([][Symbol.iterator]())):yi,"%JSON%":typeof JSON=="object"?JSON:yi,"%Map%":typeof Map=="undefined"?yi:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Xf?yi:Zc(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?yi:Promise,"%Proxy%":typeof Proxy=="undefined"?yi:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?yi:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?yi:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Xf?yi:Zc(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?yi:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xf?Zc(""[Symbol.iterator]()):yi,"%Symbol%":Xf?Symbol:yi,"%SyntaxError%":zp,"%ThrowTypeError%":kB,"%TypedArray%":LB,"%TypeError%":Zf,"%Uint8Array%":typeof Uint8Array=="undefined"?yi:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?yi:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?yi:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?yi:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?yi:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?yi:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?yi:WeakSet},PB=function t(n){var a;if(n==="%AsyncFunction%")a=q0("async function () {}");else if(n==="%GeneratorFunction%")a=q0("function* () {}");else if(n==="%AsyncGeneratorFunction%")a=q0("async function* () {}");else if(n==="%AsyncGenerator%"){var h=t("%AsyncGeneratorFunction%");h&&(a=h.prototype)}else if(n==="%AsyncIteratorPrototype%"){var m=t("%AsyncGenerator%");m&&(a=Zc(m.prototype))}return Kf[n]=a,a},ZS={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},q_=W0,Z_=MB,OB=q_.call(Function.call,Array.prototype.concat),DB=q_.call(Function.apply,Array.prototype.splice),XS=q_.call(Function.call,String.prototype.replace),X_=q_.call(Function.call,String.prototype.slice),RB=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zB=/\\(\\)?/g,NB=function(n){var a=X_(n,0,1),h=X_(n,-1);if(a==="%"&&h!=="%")throw new zp("invalid intrinsic syntax, expected closing `%`");if(h==="%"&&a!=="%")throw new zp("invalid intrinsic syntax, expected opening `%`");var m=[];return XS(n,RB,function(g,b,s,C){m[m.length]=s?XS(C,zB,"$1"):b||g}),m},FB=function(n,a){var h=n,m;if(Z_(ZS,h)&&(m=ZS[h],h="%"+m[0]+"%"),Z_(Kf,h)){var g=Kf[h];if(g===Yf&&(g=PB(h)),typeof g=="undefined"&&!a)throw new Zf("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:m,name:h,value:g}}throw new zp("intrinsic "+n+" does not exist!")},X0=function(n,a){if(typeof n!="string"||n.length===0)throw new Zf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new Zf('"allowMissing" argument must be a boolean');var h=NB(n),m=h.length>0?h[0]:"",g=FB("%"+m+"%",a),b=g.name,s=g.value,C=!1,D=g.alias;D&&(m=D[0],DB(h,OB([0,1],D)));for(var M=1,L=!0;M<h.length;M+=1){var F=h[M],Y=X_(F,0,1),Te=X_(F,-1);if((Y==='"'||Y==="'"||Y==="`"||Te==='"'||Te==="'"||Te==="`")&&Y!==Te)throw new zp("property names with quotes must have matching quotes");if((F==="constructor"||!L)&&(C=!0),m+="."+F,b="%"+m+"%",Z_(Kf,b))s=Kf[b];else if(s!=null){if(!(F in s)){if(!a)throw new Zf("base intrinsic for "+n+" exists, but the property is not available.");return}if(bh&&M+1>=h.length){var ue=bh(s,F);L=!!ue,L&&"get"in ue&&!("originalValue"in ue.get)?s=ue.get:s=s[F]}else L=Z_(s,F),s=s[F];L&&!C&&(Kf[b]=s)}}return s},YS={exports:{}};(function(t){var n=W0,a=X0,h=a("%Function.prototype.apply%"),m=a("%Function.prototype.call%"),g=a("%Reflect.apply%",!0)||n.call(m,h),b=a("%Object.getOwnPropertyDescriptor%",!0),s=a("%Object.defineProperty%",!0),C=a("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(L){var F=g(n,m,arguments);if(b&&s){var Y=b(F,"length");Y.configurable&&s(F,"length",{value:1+C(0,L.length-(arguments.length-1))})}return F};var D=function(){return g(n,h,arguments)};s?s(t.exports,"apply",{value:D}):t.exports.apply=D})(YS);var KS=X0,JS=YS.exports,BB=JS(KS("String.prototype.indexOf")),$B=function(n,a){var h=KS(n,!!a);return typeof h=="function"&&BB(n,".prototype.")>-1?JS(h):h},UB=new Proxy({},{get(){throw new Error('Module "" has been externalized for browser compatibility and cannot be accessed in client code.')}}),VB=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:UB}),jB=u5(VB),Y0=typeof Map=="function"&&Map.prototype,K0=Object.getOwnPropertyDescriptor&&Y0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Y_=Y0&&K0&&typeof K0.get=="function"?K0.get:null,HB=Y0&&Map.prototype.forEach,J0=typeof Set=="function"&&Set.prototype,Q0=Object.getOwnPropertyDescriptor&&J0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,K_=J0&&Q0&&typeof Q0.get=="function"?Q0.get:null,GB=J0&&Set.prototype.forEach,WB=typeof WeakMap=="function"&&WeakMap.prototype,Np=WB?WeakMap.prototype.has:null,qB=typeof WeakSet=="function"&&WeakSet.prototype,Fp=qB?WeakSet.prototype.has:null,ZB=typeof WeakRef=="function"&&WeakRef.prototype,QS=ZB?WeakRef.prototype.deref:null,XB=Boolean.prototype.valueOf,YB=Object.prototype.toString,KB=Function.prototype.toString,JB=String.prototype.match,ex=String.prototype.slice,Xc=String.prototype.replace,QB=String.prototype.toUpperCase,eC=String.prototype.toLowerCase,tC=RegExp.prototype.test,nC=Array.prototype.concat,Ga=Array.prototype.join,e6=Array.prototype.slice,iC=Math.floor,tx=typeof BigInt=="function"?BigInt.prototype.valueOf:null,nx=Object.getOwnPropertySymbols,ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",po=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Jf?"object":"symbol")?Symbol.toStringTag:null,rC=Object.prototype.propertyIsEnumerable,oC=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function sC(t,n){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||tC.call(/e/,n))return n;var a=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var h=t<0?-iC(-t):iC(t);if(h!==t){var m=String(h),g=ex.call(n,m.length+1);return Xc.call(m,a,"$&_")+"."+Xc.call(Xc.call(g,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Xc.call(n,a,"$&_")}var rx=jB.custom,ox=rx&&lC(rx)?rx:null,t6=function t(n,a,h,m){var g=a||{};if(Yc(g,"quoteStyle")&&g.quoteStyle!=="single"&&g.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Yc(g,"maxStringLength")&&(typeof g.maxStringLength=="number"?g.maxStringLength<0&&g.maxStringLength!==1/0:g.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var b=Yc(g,"customInspect")?g.customInspect:!0;if(typeof b!="boolean"&&b!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Yc(g,"indent")&&g.indent!==null&&g.indent!=="	"&&!(parseInt(g.indent,10)===g.indent&&g.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Yc(g,"numericSeparator")&&typeof g.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=g.numericSeparator;if(typeof n=="undefined")return"undefined";if(n===null)return"null";if(typeof n=="boolean")return n?"true":"false";if(typeof n=="string")return uC(n,g);if(typeof n=="number"){if(n===0)return 1/0/n>0?"0":"-0";var C=String(n);return s?sC(n,C):C}if(typeof n=="bigint"){var D=String(n)+"n";return s?sC(n,D):D}var M=typeof g.depth=="undefined"?5:g.depth;if(typeof h=="undefined"&&(h=0),h>=M&&M>0&&typeof n=="object")return sx(n)?"[Array]":"[Object]";var L=x6(g,h);if(typeof m=="undefined")m=[];else if(cC(m,n)>=0)return"[Circular]";function F(Pe,xe,je){if(xe&&(m=e6.call(m),m.push(xe)),je){var lt={depth:g.depth};return Yc(g,"quoteStyle")&&(lt.quoteStyle=g.quoteStyle),t(Pe,lt,h+1,m)}return t(Pe,g,h+1,m)}if(typeof n=="function"){var Y=h6(n),Te=J_(n,F);return"[Function"+(Y?": "+Y:" (anonymous)")+"]"+(Te.length>0?" { "+Ga.call(Te,", ")+" }":"")}if(lC(n)){var ue=Jf?Xc.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):ix.call(n);return typeof n=="object"&&!Jf?Bp(ue):ue}if(g6(n)){for(var K="<"+eC.call(String(n.nodeName)),G=n.attributes||[],Q=0;Q<G.length;Q++)K+=" "+G[Q].name+"="+aC(n6(G[Q].value),"double",g);return K+=">",n.childNodes&&n.childNodes.length&&(K+="..."),K+="</"+eC.call(String(n.nodeName))+">",K}if(sx(n)){if(n.length===0)return"[]";var _e=J_(n,F);return L&&!v6(_e)?"["+lx(_e,L)+"]":"[ "+Ga.call(_e,", ")+" ]"}if(o6(n)){var Ce=J_(n,F);return"cause"in n&&!rC.call(n,"cause")?"{ ["+String(n)+"] "+Ga.call(nC.call("[cause]: "+F(n.cause),Ce),", ")+" }":Ce.length===0?"["+String(n)+"]":"{ ["+String(n)+"] "+Ga.call(Ce,", ")+" }"}if(typeof n=="object"&&b){if(ox&&typeof n[ox]=="function")return n[ox]();if(b!=="symbol"&&typeof n.inspect=="function")return n.inspect()}if(f6(n)){var Ae=[];return HB.call(n,function(Pe,xe){Ae.push(F(xe,n,!0)+" => "+F(Pe,n))}),hC("Map",Y_.call(n),Ae,L)}if(m6(n)){var Le=[];return GB.call(n,function(Pe){Le.push(F(Pe,n))}),hC("Set",K_.call(n),Le,L)}if(d6(n))return ax("WeakMap");if(_6(n))return ax("WeakSet");if(p6(n))return ax("WeakRef");if(a6(n))return Bp(F(Number(n)));if(c6(n))return Bp(F(tx.call(n)));if(l6(n))return Bp(XB.call(n));if(s6(n))return Bp(F(String(n)));if(!i6(n)&&!r6(n)){var $e=J_(n,F),pt=oC?oC(n)===Object.prototype:n instanceof Object||n.constructor===Object,Xe=n instanceof Object?"":"null prototype",ve=!pt&&po&&Object(n)===n&&po in n?ex.call(Kc(n),8,-1):Xe?"Object":"",Ye=pt||typeof n.constructor!="function"?"":n.constructor.name?n.constructor.name+" ":"",Be=Ye+(ve||Xe?"["+Ga.call(nC.call([],ve||[],Xe||[]),": ")+"] ":"");return $e.length===0?Be+"{}":L?Be+"{"+lx($e,L)+"}":Be+"{ "+Ga.call($e,", ")+" }"}return String(n)};function aC(t,n,a){var h=(a.quoteStyle||n)==="double"?'"':"'";return h+t+h}function n6(t){return Xc.call(String(t),/"/g,"&quot;")}function sx(t){return Kc(t)==="[object Array]"&&(!po||!(typeof t=="object"&&po in t))}function i6(t){return Kc(t)==="[object Date]"&&(!po||!(typeof t=="object"&&po in t))}function r6(t){return Kc(t)==="[object RegExp]"&&(!po||!(typeof t=="object"&&po in t))}function o6(t){return Kc(t)==="[object Error]"&&(!po||!(typeof t=="object"&&po in t))}function s6(t){return Kc(t)==="[object String]"&&(!po||!(typeof t=="object"&&po in t))}function a6(t){return Kc(t)==="[object Number]"&&(!po||!(typeof t=="object"&&po in t))}function l6(t){return Kc(t)==="[object Boolean]"&&(!po||!(typeof t=="object"&&po in t))}function lC(t){if(Jf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ix)return!1;try{return ix.call(t),!0}catch{}return!1}function c6(t){if(!t||typeof t!="object"||!tx)return!1;try{return tx.call(t),!0}catch{}return!1}var u6=Object.prototype.hasOwnProperty||function(t){return t in this};function Yc(t,n){return u6.call(t,n)}function Kc(t){return YB.call(t)}function h6(t){if(t.name)return t.name;var n=JB.call(KB.call(t),/^function\s*([\w$]+)/);return n?n[1]:null}function cC(t,n){if(t.indexOf)return t.indexOf(n);for(var a=0,h=t.length;a<h;a++)if(t[a]===n)return a;return-1}function f6(t){if(!Y_||!t||typeof t!="object")return!1;try{Y_.call(t);try{K_.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function d6(t){if(!Np||!t||typeof t!="object")return!1;try{Np.call(t,Np);try{Fp.call(t,Fp)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function p6(t){if(!QS||!t||typeof t!="object")return!1;try{return QS.call(t),!0}catch{}return!1}function m6(t){if(!K_||!t||typeof t!="object")return!1;try{K_.call(t);try{Y_.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function _6(t){if(!Fp||!t||typeof t!="object")return!1;try{Fp.call(t,Fp);try{Np.call(t,Np)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function g6(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function uC(t,n){if(t.length>n.maxStringLength){var a=t.length-n.maxStringLength,h="... "+a+" more character"+(a>1?"s":"");return uC(ex.call(t,0,n.maxStringLength),n)+h}var m=Xc.call(Xc.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,y6);return aC(m,"single",n)}function y6(t){var n=t.charCodeAt(0),a={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return a?"\\"+a:"\\x"+(n<16?"0":"")+QB.call(n.toString(16))}function Bp(t){return"Object("+t+")"}function ax(t){return t+" { ? }"}function hC(t,n,a,h){var m=h?lx(a,h):Ga.call(a,", ");return t+" ("+n+") {"+m+"}"}function v6(t){for(var n=0;n<t.length;n++)if(cC(t[n],`
`)>=0)return!1;return!0}function x6(t,n){var a;if(t.indent==="	")a="	";else if(typeof t.indent=="number"&&t.indent>0)a=Ga.call(Array(t.indent+1)," ");else return null;return{base:a,prev:Ga.call(Array(n+1),a)}}function lx(t,n){if(t.length===0)return"";var a=`
`+n.prev+n.base;return a+Ga.call(t,","+a)+`
`+n.prev}function J_(t,n){var a=sx(t),h=[];if(a){h.length=t.length;for(var m=0;m<t.length;m++)h[m]=Yc(t,m)?n(t[m],t):""}var g=typeof nx=="function"?nx(t):[],b;if(Jf){b={};for(var s=0;s<g.length;s++)b["$"+g[s]]=g[s]}for(var C in t)!Yc(t,C)||a&&String(Number(C))===C&&C<t.length||Jf&&b["$"+C]instanceof Symbol||(tC.call(/[^\w$]/,C)?h.push(n(C,t)+": "+n(t[C],t)):h.push(C+": "+n(t[C],t)));if(typeof nx=="function")for(var D=0;D<g.length;D++)rC.call(t,g[D])&&h.push("["+n(g[D])+"]: "+n(t[g[D]],t));return h}var cx=X0,Qf=$B,b6=t6,w6=cx("%TypeError%"),Q_=cx("%WeakMap%",!0),eg=cx("%Map%",!0),E6=Qf("WeakMap.prototype.get",!0),T6=Qf("WeakMap.prototype.set",!0),A6=Qf("WeakMap.prototype.has",!0),S6=Qf("Map.prototype.get",!0),C6=Qf("Map.prototype.set",!0),I6=Qf("Map.prototype.has",!0),ux=function(t,n){for(var a=t,h;(h=a.next)!==null;a=h)if(h.key===n)return a.next=h.next,h.next=t.next,t.next=h,h},M6=function(t,n){var a=ux(t,n);return a&&a.value},k6=function(t,n,a){var h=ux(t,n);h?h.value=a:t.next={key:n,next:t.next,value:a}},L6=function(t,n){return!!ux(t,n)},P6=function(){var n,a,h,m={assert:function(g){if(!m.has(g))throw new w6("Side channel does not contain "+b6(g))},get:function(g){if(Q_&&g&&(typeof g=="object"||typeof g=="function")){if(n)return E6(n,g)}else if(eg){if(a)return S6(a,g)}else if(h)return M6(h,g)},has:function(g){if(Q_&&g&&(typeof g=="object"||typeof g=="function")){if(n)return A6(n,g)}else if(eg){if(a)return I6(a,g)}else if(h)return L6(h,g);return!1},set:function(g,b){Q_&&g&&(typeof g=="object"||typeof g=="function")?(n||(n=new Q_),T6(n,g,b)):eg?(a||(a=new eg),C6(a,g,b)):(h||(h={key:{},next:null}),k6(h,g,b))}};return m},O6=String.prototype.replace,D6=/%20/g,hx={RFC1738:"RFC1738",RFC3986:"RFC3986"},fx={default:hx.RFC3986,formatters:{RFC1738:function(t){return O6.call(t,D6,"+")},RFC3986:function(t){return String(t)}},RFC1738:hx.RFC1738,RFC3986:hx.RFC3986},R6=fx,dx=Object.prototype.hasOwnProperty,wh=Array.isArray,Wa=function(){for(var t=[],n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t}(),z6=function(n){for(;n.length>1;){var a=n.pop(),h=a.obj[a.prop];if(wh(h)){for(var m=[],g=0;g<h.length;++g)typeof h[g]!="undefined"&&m.push(h[g]);a.obj[a.prop]=m}}},fC=function(n,a){for(var h=a&&a.plainObjects?Object.create(null):{},m=0;m<n.length;++m)typeof n[m]!="undefined"&&(h[m]=n[m]);return h},N6=function t(n,a,h){if(!a)return n;if(typeof a!="object"){if(wh(n))n.push(a);else if(n&&typeof n=="object")(h&&(h.plainObjects||h.allowPrototypes)||!dx.call(Object.prototype,a))&&(n[a]=!0);else return[n,a];return n}if(!n||typeof n!="object")return[n].concat(a);var m=n;return wh(n)&&!wh(a)&&(m=fC(n,h)),wh(n)&&wh(a)?(a.forEach(function(g,b){if(dx.call(n,b)){var s=n[b];s&&typeof s=="object"&&g&&typeof g=="object"?n[b]=t(s,g,h):n.push(g)}else n[b]=g}),n):Object.keys(a).reduce(function(g,b){var s=a[b];return dx.call(g,b)?g[b]=t(g[b],s,h):g[b]=s,g},m)},F6=function(n,a){return Object.keys(a).reduce(function(h,m){return h[m]=a[m],h},n)},B6=function(t,n,a){var h=t.replace(/\+/g," ");if(a==="iso-8859-1")return h.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(h)}catch{return h}},$6=function(n,a,h,m,g){if(n.length===0)return n;var b=n;if(typeof n=="symbol"?b=Symbol.prototype.toString.call(n):typeof n!="string"&&(b=String(n)),h==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(M){return"%26%23"+parseInt(M.slice(2),16)+"%3B"});for(var s="",C=0;C<b.length;++C){var D=b.charCodeAt(C);if(D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||g===R6.RFC1738&&(D===40||D===41)){s+=b.charAt(C);continue}if(D<128){s=s+Wa[D];continue}if(D<2048){s=s+(Wa[192|D>>6]+Wa[128|D&63]);continue}if(D<55296||D>=57344){s=s+(Wa[224|D>>12]+Wa[128|D>>6&63]+Wa[128|D&63]);continue}C+=1,D=65536+((D&1023)<<10|b.charCodeAt(C)&1023),s+=Wa[240|D>>18]+Wa[128|D>>12&63]+Wa[128|D>>6&63]+Wa[128|D&63]}return s},U6=function(n){for(var a=[{obj:{o:n},prop:"o"}],h=[],m=0;m<a.length;++m)for(var g=a[m],b=g.obj[g.prop],s=Object.keys(b),C=0;C<s.length;++C){var D=s[C],M=b[D];typeof M=="object"&&M!==null&&h.indexOf(M)===-1&&(a.push({obj:b,prop:D}),h.push(M))}return z6(a),n},V6=function(n){return Object.prototype.toString.call(n)==="[object RegExp]"},j6=function(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},H6=function(n,a){return[].concat(n,a)},G6=function(n,a){if(wh(n)){for(var h=[],m=0;m<n.length;m+=1)h.push(a(n[m]));return h}return a(n)},dC={arrayToObject:fC,assign:F6,combine:H6,compact:U6,decode:B6,encode:$6,isBuffer:j6,isRegExp:V6,maybeMap:G6,merge:N6},pC=P6,px=dC,$p=fx,W6=Object.prototype.hasOwnProperty,mC={brackets:function(n){return n+"[]"},comma:"comma",indices:function(n,a){return n+"["+a+"]"},repeat:function(n){return n}},Eh=Array.isArray,q6=String.prototype.split,Z6=Array.prototype.push,_C=function(t,n){Z6.apply(t,Eh(n)?n:[n])},X6=Date.prototype.toISOString,gC=$p.default,io={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:px.encode,encodeValuesOnly:!1,format:gC,formatter:$p.formatters[gC],indices:!1,serializeDate:function(n){return X6.call(n)},skipNulls:!1,strictNullHandling:!1},Y6=function(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"},mx={},K6=function t(n,a,h,m,g,b,s,C,D,M,L,F,Y,Te,ue){for(var K=n,G=ue,Q=0,_e=!1;(G=G.get(mx))!==void 0&&!_e;){var Ce=G.get(n);if(Q+=1,typeof Ce!="undefined"){if(Ce===Q)throw new RangeError("Cyclic object value");_e=!0}typeof G.get(mx)=="undefined"&&(Q=0)}if(typeof s=="function"?K=s(a,K):K instanceof Date?K=M(K):h==="comma"&&Eh(K)&&(K=px.maybeMap(K,function(Qe){return Qe instanceof Date?M(Qe):Qe})),K===null){if(m)return b&&!Y?b(a,io.encoder,Te,"key",L):a;K=""}if(Y6(K)||px.isBuffer(K)){if(b){var Ae=Y?a:b(a,io.encoder,Te,"key",L);if(h==="comma"&&Y){for(var Le=q6.call(String(K),","),$e="",pt=0;pt<Le.length;++pt)$e+=(pt===0?"":",")+F(b(Le[pt],io.encoder,Te,"value",L));return[F(Ae)+"="+$e]}return[F(Ae)+"="+F(b(K,io.encoder,Te,"value",L))]}return[F(a)+"="+F(String(K))]}var Xe=[];if(typeof K=="undefined")return Xe;var ve;if(h==="comma"&&Eh(K))ve=[{value:K.length>0?K.join(",")||null:void 0}];else if(Eh(s))ve=s;else{var Ye=Object.keys(K);ve=C?Ye.sort(C):Ye}for(var Be=0;Be<ve.length;++Be){var Pe=ve[Be],xe=typeof Pe=="object"&&typeof Pe.value!="undefined"?Pe.value:K[Pe];if(!(g&&xe===null)){var je=Eh(K)?typeof h=="function"?h(a,Pe):a:a+(D?"."+Pe:"["+Pe+"]");ue.set(n,Q);var lt=pC();lt.set(mx,ue),_C(Xe,t(xe,je,h,m,g,b,s,C,D,M,L,F,Y,Te,lt))}}return Xe},J6=function(n){if(!n)return io;if(n.encoder!==null&&typeof n.encoder!="undefined"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");var a=n.charset||io.charset;if(typeof n.charset!="undefined"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var h=$p.default;if(typeof n.format!="undefined"){if(!W6.call($p.formatters,n.format))throw new TypeError("Unknown format option provided.");h=n.format}var m=$p.formatters[h],g=io.filter;return(typeof n.filter=="function"||Eh(n.filter))&&(g=n.filter),{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:io.addQueryPrefix,allowDots:typeof n.allowDots=="undefined"?io.allowDots:!!n.allowDots,charset:a,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:io.charsetSentinel,delimiter:typeof n.delimiter=="undefined"?io.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:io.encode,encoder:typeof n.encoder=="function"?n.encoder:io.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:io.encodeValuesOnly,filter:g,format:h,formatter:m,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:io.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:io.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:io.strictNullHandling}},Q6=function(t,n){var a=t,h=J6(n),m,g;typeof h.filter=="function"?(g=h.filter,a=g("",a)):Eh(h.filter)&&(g=h.filter,m=g);var b=[];if(typeof a!="object"||a===null)return"";var s;n&&n.arrayFormat in mC?s=n.arrayFormat:n&&"indices"in n?s=n.indices?"indices":"repeat":s="indices";var C=mC[s];m||(m=Object.keys(a)),h.sort&&m.sort(h.sort);for(var D=pC(),M=0;M<m.length;++M){var L=m[M];h.skipNulls&&a[L]===null||_C(b,K6(a[L],L,C,h.strictNullHandling,h.skipNulls,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.format,h.formatter,h.encodeValuesOnly,h.charset,D))}var F=b.join(h.delimiter),Y=h.addQueryPrefix===!0?"?":"";return h.charsetSentinel&&(h.charset==="iso-8859-1"?Y+="utf8=%26%2310003%3B&":Y+="utf8=%E2%9C%93&"),F.length>0?Y+F:""},ed=dC,_x=Object.prototype.hasOwnProperty,e$=Array.isArray,Hr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ed.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},t$=function(t){return t.replace(/&#(\d+);/g,function(n,a){return String.fromCharCode(parseInt(a,10))})},yC=function(t,n){return t&&typeof t=="string"&&n.comma&&t.indexOf(",")>-1?t.split(","):t},n$="utf8=%26%2310003%3B",i$="utf8=%E2%9C%93",r$=function(n,a){var h={},m=a.ignoreQueryPrefix?n.replace(/^\?/,""):n,g=a.parameterLimit===1/0?void 0:a.parameterLimit,b=m.split(a.delimiter,g),s=-1,C,D=a.charset;if(a.charsetSentinel)for(C=0;C<b.length;++C)b[C].indexOf("utf8=")===0&&(b[C]===i$?D="utf-8":b[C]===n$&&(D="iso-8859-1"),s=C,C=b.length);for(C=0;C<b.length;++C)if(C!==s){var M=b[C],L=M.indexOf("]="),F=L===-1?M.indexOf("="):L+1,Y,Te;F===-1?(Y=a.decoder(M,Hr.decoder,D,"key"),Te=a.strictNullHandling?null:""):(Y=a.decoder(M.slice(0,F),Hr.decoder,D,"key"),Te=ed.maybeMap(yC(M.slice(F+1),a),function(ue){return a.decoder(ue,Hr.decoder,D,"value")})),Te&&a.interpretNumericEntities&&D==="iso-8859-1"&&(Te=t$(Te)),M.indexOf("[]=")>-1&&(Te=e$(Te)?[Te]:Te),_x.call(h,Y)?h[Y]=ed.combine(h[Y],Te):h[Y]=Te}return h},o$=function(t,n,a,h){for(var m=h?n:yC(n,a),g=t.length-1;g>=0;--g){var b,s=t[g];if(s==="[]"&&a.parseArrays)b=[].concat(m);else{b=a.plainObjects?Object.create(null):{};var C=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,D=parseInt(C,10);!a.parseArrays&&C===""?b={0:m}:!isNaN(D)&&s!==C&&String(D)===C&&D>=0&&a.parseArrays&&D<=a.arrayLimit?(b=[],b[D]=m):C!=="__proto__"&&(b[C]=m)}m=b}return m},s$=function(n,a,h,m){if(!!n){var g=h.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,b=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,C=h.depth>0&&b.exec(g),D=C?g.slice(0,C.index):g,M=[];if(D){if(!h.plainObjects&&_x.call(Object.prototype,D)&&!h.allowPrototypes)return;M.push(D)}for(var L=0;h.depth>0&&(C=s.exec(g))!==null&&L<h.depth;){if(L+=1,!h.plainObjects&&_x.call(Object.prototype,C[1].slice(1,-1))&&!h.allowPrototypes)return;M.push(C[1])}return C&&M.push("["+g.slice(C.index)+"]"),o$(M,a,h,m)}},a$=function(n){if(!n)return Hr;if(n.decoder!==null&&n.decoder!==void 0&&typeof n.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof n.charset!="undefined"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=typeof n.charset=="undefined"?Hr.charset:n.charset;return{allowDots:typeof n.allowDots=="undefined"?Hr.allowDots:!!n.allowDots,allowPrototypes:typeof n.allowPrototypes=="boolean"?n.allowPrototypes:Hr.allowPrototypes,allowSparse:typeof n.allowSparse=="boolean"?n.allowSparse:Hr.allowSparse,arrayLimit:typeof n.arrayLimit=="number"?n.arrayLimit:Hr.arrayLimit,charset:a,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Hr.charsetSentinel,comma:typeof n.comma=="boolean"?n.comma:Hr.comma,decoder:typeof n.decoder=="function"?n.decoder:Hr.decoder,delimiter:typeof n.delimiter=="string"||ed.isRegExp(n.delimiter)?n.delimiter:Hr.delimiter,depth:typeof n.depth=="number"||n.depth===!1?+n.depth:Hr.depth,ignoreQueryPrefix:n.ignoreQueryPrefix===!0,interpretNumericEntities:typeof n.interpretNumericEntities=="boolean"?n.interpretNumericEntities:Hr.interpretNumericEntities,parameterLimit:typeof n.parameterLimit=="number"?n.parameterLimit:Hr.parameterLimit,parseArrays:n.parseArrays!==!1,plainObjects:typeof n.plainObjects=="boolean"?n.plainObjects:Hr.plainObjects,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Hr.strictNullHandling}},l$=function(t,n){var a=a$(n);if(t===""||t===null||typeof t=="undefined")return a.plainObjects?Object.create(null):{};for(var h=typeof t=="string"?r$(t,a):t,m=a.plainObjects?Object.create(null):{},g=Object.keys(h),b=0;b<g.length;++b){var s=g[b],C=s$(s,h[s],a,typeof t=="string");m=ed.merge(m,C,a)}return a.allowSparse===!0?m:ed.compact(m)},c$=Q6,u$=l$,h$=fx,nV={formats:h$,parse:u$,stringify:c$},gx={exports:{}},vC=function(n,a){return function(){for(var m=new Array(arguments.length),g=0;g<m.length;g++)m[g]=arguments[g];return n.apply(a,m)}},f$=vC,Th=Object.prototype.toString;function yx(t){return Th.call(t)==="[object Array]"}function vx(t){return typeof t=="undefined"}function d$(t){return t!==null&&!vx(t)&&t.constructor!==null&&!vx(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function p$(t){return Th.call(t)==="[object ArrayBuffer]"}function m$(t){return typeof FormData!="undefined"&&t instanceof FormData}function _$(t){var n;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&t.buffer instanceof ArrayBuffer,n}function g$(t){return typeof t=="string"}function y$(t){return typeof t=="number"}function xC(t){return t!==null&&typeof t=="object"}function tg(t){if(Th.call(t)!=="[object Object]")return!1;var n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}function v$(t){return Th.call(t)==="[object Date]"}function x$(t){return Th.call(t)==="[object File]"}function b$(t){return Th.call(t)==="[object Blob]"}function bC(t){return Th.call(t)==="[object Function]"}function w$(t){return xC(t)&&bC(t.pipe)}function E$(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function T$(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function A$(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function xx(t,n){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),yx(t))for(var a=0,h=t.length;a<h;a++)n.call(null,t[a],a,t);else for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&n.call(null,t[m],m,t)}function bx(){var t={};function n(m,g){tg(t[g])&&tg(m)?t[g]=bx(t[g],m):tg(m)?t[g]=bx({},m):yx(m)?t[g]=m.slice():t[g]=m}for(var a=0,h=arguments.length;a<h;a++)xx(arguments[a],n);return t}function S$(t,n,a){return xx(n,function(m,g){a&&typeof m=="function"?t[g]=f$(m,a):t[g]=m}),t}function C$(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var vs={isArray:yx,isArrayBuffer:p$,isBuffer:d$,isFormData:m$,isArrayBufferView:_$,isString:g$,isNumber:y$,isObject:xC,isPlainObject:tg,isUndefined:vx,isDate:v$,isFile:x$,isBlob:b$,isFunction:bC,isStream:w$,isURLSearchParams:E$,isStandardBrowserEnv:A$,forEach:xx,merge:bx,extend:S$,trim:T$,stripBOM:C$},td=vs;function wC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var EC=function(n,a,h){if(!a)return n;var m;if(h)m=h(a);else if(td.isURLSearchParams(a))m=a.toString();else{var g=[];td.forEach(a,function(C,D){C===null||typeof C=="undefined"||(td.isArray(C)?D=D+"[]":C=[C],td.forEach(C,function(L){td.isDate(L)?L=L.toISOString():td.isObject(L)&&(L=JSON.stringify(L)),g.push(wC(D)+"="+wC(L))}))}),m=g.join("&")}if(m){var b=n.indexOf("#");b!==-1&&(n=n.slice(0,b)),n+=(n.indexOf("?")===-1?"?":"&")+m}return n},I$=vs;function ng(){this.handlers=[]}ng.prototype.use=function(n,a,h){return this.handlers.push({fulfilled:n,rejected:a,synchronous:h?h.synchronous:!1,runWhen:h?h.runWhen:null}),this.handlers.length-1};ng.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)};ng.prototype.forEach=function(n){I$.forEach(this.handlers,function(h){h!==null&&n(h)})};var M$=ng,k$=vs,L$=function(n,a){k$.forEach(n,function(m,g){g!==a&&g.toUpperCase()===a.toUpperCase()&&(n[a]=m,delete n[g])})},TC=function(n,a,h,m,g){return n.config=a,h&&(n.code=h),n.request=m,n.response=g,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},n},P$=TC,AC=function(n,a,h,m,g){var b=new Error(n);return P$(b,a,h,m,g)},O$=AC,D$=function(n,a,h){var m=h.config.validateStatus;!h.status||!m||m(h.status)?n(h):a(O$("Request failed with status code "+h.status,h.config,null,h.request,h))},ig=vs,R$=ig.isStandardBrowserEnv()?function(){return{write:function(a,h,m,g,b,s){var C=[];C.push(a+"="+encodeURIComponent(h)),ig.isNumber(m)&&C.push("expires="+new Date(m).toGMTString()),ig.isString(g)&&C.push("path="+g),ig.isString(b)&&C.push("domain="+b),s===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var h=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return h?decodeURIComponent(h[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),z$=function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)},N$=function(n,a){return a?n.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):n},F$=z$,B$=N$,$$=function(n,a){return n&&!F$(a)?B$(n,a):a},wx=vs,U$=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],V$=function(n){var a={},h,m,g;return n&&wx.forEach(n.split(`
`),function(s){if(g=s.indexOf(":"),h=wx.trim(s.substr(0,g)).toLowerCase(),m=wx.trim(s.substr(g+1)),h){if(a[h]&&U$.indexOf(h)>=0)return;h==="set-cookie"?a[h]=(a[h]?a[h]:[]).concat([m]):a[h]=a[h]?a[h]+", "+m:m}}),a},SC=vs,j$=SC.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),h;function m(g){var b=g;return n&&(a.setAttribute("href",b),b=a.href),a.setAttribute("href",b),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return h=m(window.location.href),function(b){var s=SC.isString(b)?m(b):b;return s.protocol===h.protocol&&s.host===h.host}}():function(){return function(){return!0}}();function Ex(t){this.message=t}Ex.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Ex.prototype.__CANCEL__=!0;var rg=Ex,og=vs,H$=D$,G$=R$,W$=EC,q$=$$,Z$=V$,X$=j$,Tx=AC,Y$=ag,K$=rg,CC=function(n){return new Promise(function(h,m){var g=n.data,b=n.headers,s=n.responseType,C;function D(){n.cancelToken&&n.cancelToken.unsubscribe(C),n.signal&&n.signal.removeEventListener("abort",C)}og.isFormData(g)&&delete b["Content-Type"];var M=new XMLHttpRequest;if(n.auth){var L=n.auth.username||"",F=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";b.Authorization="Basic "+btoa(L+":"+F)}var Y=q$(n.baseURL,n.url);M.open(n.method.toUpperCase(),W$(Y,n.params,n.paramsSerializer),!0),M.timeout=n.timeout;function Te(){if(!!M){var K="getAllResponseHeaders"in M?Z$(M.getAllResponseHeaders()):null,G=!s||s==="text"||s==="json"?M.responseText:M.response,Q={data:G,status:M.status,statusText:M.statusText,headers:K,config:n,request:M};H$(function(Ce){h(Ce),D()},function(Ce){m(Ce),D()},Q),M=null}}if("onloadend"in M?M.onloadend=Te:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(Te)},M.onabort=function(){!M||(m(Tx("Request aborted",n,"ECONNABORTED",M)),M=null)},M.onerror=function(){m(Tx("Network Error",n,null,M)),M=null},M.ontimeout=function(){var G=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",Q=n.transitional||Y$.transitional;n.timeoutErrorMessage&&(G=n.timeoutErrorMessage),m(Tx(G,n,Q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",M)),M=null},og.isStandardBrowserEnv()){var ue=(n.withCredentials||X$(Y))&&n.xsrfCookieName?G$.read(n.xsrfCookieName):void 0;ue&&(b[n.xsrfHeaderName]=ue)}"setRequestHeader"in M&&og.forEach(b,function(G,Q){typeof g=="undefined"&&Q.toLowerCase()==="content-type"?delete b[Q]:M.setRequestHeader(Q,G)}),og.isUndefined(n.withCredentials)||(M.withCredentials=!!n.withCredentials),s&&s!=="json"&&(M.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&M.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(C=function(K){!M||(m(!K||K&&K.type?new K$("canceled"):K),M.abort(),M=null)},n.cancelToken&&n.cancelToken.subscribe(C),n.signal&&(n.signal.aborted?C():n.signal.addEventListener("abort",C))),g||(g=null),M.send(g)})},ro=vs,IC=L$,J$=TC,Q$={"Content-Type":"application/x-www-form-urlencoded"};function MC(t,n){!ro.isUndefined(t)&&ro.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}function eU(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=CC),t}function tU(t,n,a){if(ro.isString(t))try{return(n||JSON.parse)(t),ro.trim(t)}catch(h){if(h.name!=="SyntaxError")throw h}return(a||JSON.stringify)(t)}var sg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:eU(),transformRequest:[function(n,a){return IC(a,"Accept"),IC(a,"Content-Type"),ro.isFormData(n)||ro.isArrayBuffer(n)||ro.isBuffer(n)||ro.isStream(n)||ro.isFile(n)||ro.isBlob(n)?n:ro.isArrayBufferView(n)?n.buffer:ro.isURLSearchParams(n)?(MC(a,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):ro.isObject(n)||a&&a["Content-Type"]==="application/json"?(MC(a,"application/json"),tU(n)):n}],transformResponse:[function(n){var a=this.transitional||sg.transitional,h=a&&a.silentJSONParsing,m=a&&a.forcedJSONParsing,g=!h&&this.responseType==="json";if(g||m&&ro.isString(n)&&n.length)try{return JSON.parse(n)}catch(b){if(g)throw b.name==="SyntaxError"?J$(b,this,"E_JSON_PARSE"):b}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ro.forEach(["delete","get","head"],function(n){sg.headers[n]={}});ro.forEach(["post","put","patch"],function(n){sg.headers[n]=ro.merge(Q$)});var ag=sg,nU=vs,iU=ag,rU=function(n,a,h){var m=this||iU;return nU.forEach(h,function(b){n=b.call(m,n,a)}),n},kC=function(n){return!!(n&&n.__CANCEL__)},LC=vs,Ax=rU,oU=kC,sU=ag,aU=rg;function Sx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new aU("canceled")}var lU=function(n){Sx(n),n.headers=n.headers||{},n.data=Ax.call(n,n.data,n.headers,n.transformRequest),n.headers=LC.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),LC.forEach(["delete","get","head","post","put","patch","common"],function(m){delete n.headers[m]});var a=n.adapter||sU.adapter;return a(n).then(function(m){return Sx(n),m.data=Ax.call(n,m.data,m.headers,n.transformResponse),m},function(m){return oU(m)||(Sx(n),m&&m.response&&(m.response.data=Ax.call(n,m.response.data,m.response.headers,n.transformResponse))),Promise.reject(m)})},xs=vs,PC=function(n,a){a=a||{};var h={};function m(M,L){return xs.isPlainObject(M)&&xs.isPlainObject(L)?xs.merge(M,L):xs.isPlainObject(L)?xs.merge({},L):xs.isArray(L)?L.slice():L}function g(M){if(xs.isUndefined(a[M])){if(!xs.isUndefined(n[M]))return m(void 0,n[M])}else return m(n[M],a[M])}function b(M){if(!xs.isUndefined(a[M]))return m(void 0,a[M])}function s(M){if(xs.isUndefined(a[M])){if(!xs.isUndefined(n[M]))return m(void 0,n[M])}else return m(void 0,a[M])}function C(M){if(M in a)return m(n[M],a[M]);if(M in n)return m(void 0,n[M])}var D={url:b,method:b,data:b,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:C};return xs.forEach(Object.keys(n).concat(Object.keys(a)),function(L){var F=D[L]||g,Y=F(L);xs.isUndefined(Y)&&F!==C||(h[L]=Y)}),h},OC={version:"0.24.0"},cU=OC.version,Cx={};["object","boolean","number","function","string","symbol"].forEach(function(t,n){Cx[t]=function(h){return typeof h===t||"a"+(n<1?"n ":" ")+t}});var DC={};Cx.transitional=function(n,a,h){function m(g,b){return"[Axios v"+cU+"] Transitional option '"+g+"'"+b+(h?". "+h:"")}return function(g,b,s){if(n===!1)throw new Error(m(b," has been removed"+(a?" in "+a:"")));return a&&!DC[b]&&(DC[b]=!0,console.warn(m(b," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(g,b,s):!0}};function uU(t,n,a){if(typeof t!="object")throw new TypeError("options must be an object");for(var h=Object.keys(t),m=h.length;m-- >0;){var g=h[m],b=n[g];if(b){var s=t[g],C=s===void 0||b(s,g,t);if(C!==!0)throw new TypeError("option "+g+" must be "+C);continue}if(a!==!0)throw Error("Unknown option "+g)}}var hU={assertOptions:uU,validators:Cx},RC=vs,fU=EC,zC=M$,NC=lU,lg=PC,FC=hU,nd=FC.validators;function Up(t){this.defaults=t,this.interceptors={request:new zC,response:new zC}}Up.prototype.request=function(n){typeof n=="string"?(n=arguments[1]||{},n.url=arguments[0]):n=n||{},n=lg(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var a=n.transitional;a!==void 0&&FC.assertOptions(a,{silentJSONParsing:nd.transitional(nd.boolean),forcedJSONParsing:nd.transitional(nd.boolean),clarifyTimeoutError:nd.transitional(nd.boolean)},!1);var h=[],m=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(n)===!1||(m=m&&F.synchronous,h.unshift(F.fulfilled,F.rejected))});var g=[];this.interceptors.response.forEach(function(F){g.push(F.fulfilled,F.rejected)});var b;if(!m){var s=[NC,void 0];for(Array.prototype.unshift.apply(s,h),s=s.concat(g),b=Promise.resolve(n);s.length;)b=b.then(s.shift(),s.shift());return b}for(var C=n;h.length;){var D=h.shift(),M=h.shift();try{C=D(C)}catch(L){M(L);break}}try{b=NC(C)}catch(L){return Promise.reject(L)}for(;g.length;)b=b.then(g.shift(),g.shift());return b};Up.prototype.getUri=function(n){return n=lg(this.defaults,n),fU(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")};RC.forEach(["delete","get","head","options"],function(n){Up.prototype[n]=function(a,h){return this.request(lg(h||{},{method:n,url:a,data:(h||{}).data}))}});RC.forEach(["post","put","patch"],function(n){Up.prototype[n]=function(a,h,m){return this.request(lg(m||{},{method:n,url:a,data:h}))}});var dU=Up,pU=rg;function id(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(m){n=m});var a=this;this.promise.then(function(h){if(!!a._listeners){var m,g=a._listeners.length;for(m=0;m<g;m++)a._listeners[m](h);a._listeners=null}}),this.promise.then=function(h){var m,g=new Promise(function(b){a.subscribe(b),m=b}).then(h);return g.cancel=function(){a.unsubscribe(m)},g},t(function(m){a.reason||(a.reason=new pU(m),n(a.reason))})}id.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};id.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]};id.prototype.unsubscribe=function(n){if(!!this._listeners){var a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}};id.source=function(){var n,a=new id(function(m){n=m});return{token:a,cancel:n}};var mU=id,_U=function(n){return function(h){return n.apply(null,h)}},gU=function(n){return typeof n=="object"&&n.isAxiosError===!0},BC=vs,yU=vC,cg=dU,vU=PC,xU=ag;function $C(t){var n=new cg(t),a=yU(cg.prototype.request,n);return BC.extend(a,cg.prototype,n),BC.extend(a,n),a.create=function(m){return $C(vU(t,m))},a}var qa=$C(xU);qa.Axios=cg;qa.Cancel=rg;qa.CancelToken=mU;qa.isCancel=kC;qa.VERSION=OC.version;qa.all=function(n){return Promise.all(n)};qa.spread=_U;qa.isAxiosError=gU;gx.exports=qa;gx.exports.default=qa;var iV=gx.exports;/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function bU(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function UC(t,n){for(var a=0;a<n.length;a++){var h=n[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function wU(t,n,a){return n&&UC(t.prototype,n),a&&UC(t,a),t}function EU(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function vi(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{},h=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),h.forEach(function(m){EU(t,m,a[m])})}return t}function VC(t,n){return SU(t)||IU(t,n)||kU()}function TU(t){return AU(t)||CU(t)||MU()}function AU(t){if(Array.isArray(t)){for(var n=0,a=new Array(t.length);n<t.length;n++)a[n]=t[n];return a}}function SU(t){if(Array.isArray(t))return t}function CU(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function IU(t,n){var a=[],h=!0,m=!1,g=void 0;try{for(var b=t[Symbol.iterator](),s;!(h=(s=b.next()).done)&&(a.push(s.value),!(n&&a.length===n));h=!0);}catch(C){m=!0,g=C}finally{try{!h&&b.return!=null&&b.return()}finally{if(m)throw g}}return a}function MU(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function kU(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var jC=function(){},Ix={},HC={},LU=null,GC={mark:jC,measure:jC};try{typeof window!="undefined"&&(Ix=window),typeof document!="undefined"&&(HC=document),typeof MutationObserver!="undefined"&&(LU=MutationObserver),typeof performance!="undefined"&&(GC=performance)}catch{}var PU=Ix.navigator||{},WC=PU.userAgent,qC=WC===void 0?"":WC,ug=Ix,Po=HC,hg=GC;ug.document;var Mx=!!Po.documentElement&&!!Po.head&&typeof Po.addEventListener=="function"&&typeof Po.createElement=="function",OU=~qC.indexOf("MSIE")||~qC.indexOf("Trident/"),kl="___FONT_AWESOME___",kx=16,ZC="fa",XC="svg-inline--fa",YC="data-fa-i2svg";(function(){try{return!1}catch{return!1}})();var Lx={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},KC=ug.FontAwesomeConfig||{};function DU(t){var n=Po.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}function RU(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Po&&typeof Po.querySelector=="function"){var zU=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];zU.forEach(function(t){var n=VC(t,2),a=n[0],h=n[1],m=RU(DU(a));m!=null&&(KC[h]=m)})}var NU={familyPrefix:ZC,replacementClass:XC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Px=vi({},NU,KC);Px.autoReplaceSvg||(Px.observeMutations=!1);var mo=vi({},Px);ug.FontAwesomeConfig=mo;var Ll=ug||{};Ll[kl]||(Ll[kl]={});Ll[kl].styles||(Ll[kl].styles={});Ll[kl].hooks||(Ll[kl].hooks={});Ll[kl].shims||(Ll[kl].shims=[]);var Za=Ll[kl],FU=[],BU=function t(){Po.removeEventListener("DOMContentLoaded",t),Ox=1,FU.map(function(n){return n()})},Ox=!1;Mx&&(Ox=(Po.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Po.readyState),Ox||Po.addEventListener("DOMContentLoaded",BU));typeof global!="undefined"&&typeof global.process!="undefined"&&global.process.emit;var Jc=kx,Qc={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function $U(t){if(!(!t||!Mx)){var n=Po.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var a=Po.head.childNodes,h=null,m=a.length-1;m>-1;m--){var g=a[m],b=(g.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(b)>-1&&(h=g)}return Po.head.insertBefore(n,h),t}}var UU="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function fg(){for(var t=12,n="";t-- >0;)n+=UU[Math.random()*62|0];return n}function JC(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function VU(t){return Object.keys(t||{}).reduce(function(n,a){return n+"".concat(a,'="').concat(JC(t[a]),'" ')},"").trim()}function Dx(t){return Object.keys(t||{}).reduce(function(n,a){return n+"".concat(a,": ").concat(t[a],";")},"")}function Rx(t){return t.size!==Qc.size||t.x!==Qc.x||t.y!==Qc.y||t.rotate!==Qc.rotate||t.flipX||t.flipY}function QC(t){var n=t.transform,a=t.containerWidth,h=t.iconWidth,m={transform:"translate(".concat(a/2," 256)")},g="translate(".concat(n.x*32,", ").concat(n.y*32,") "),b="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),s="rotate(".concat(n.rotate," 0 0)"),C={transform:"".concat(g," ").concat(b," ").concat(s)},D={transform:"translate(".concat(h/2*-1," -256)")};return{outer:m,inner:C,path:D}}function jU(t){var n=t.transform,a=t.width,h=a===void 0?kx:a,m=t.height,g=m===void 0?kx:m,b=t.startCentered,s=b===void 0?!1:b,C="";return s&&OU?C+="translate(".concat(n.x/Jc-h/2,"em, ").concat(n.y/Jc-g/2,"em) "):s?C+="translate(calc(-50% + ".concat(n.x/Jc,"em), calc(-50% + ").concat(n.y/Jc,"em)) "):C+="translate(".concat(n.x/Jc,"em, ").concat(n.y/Jc,"em) "),C+="scale(".concat(n.size/Jc*(n.flipX?-1:1),", ").concat(n.size/Jc*(n.flipY?-1:1),") "),C+="rotate(".concat(n.rotate,"deg) "),C}var zx={x:0,y:0,width:"100%",height:"100%"};function eI(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||n)&&(t.attributes.fill="black"),t}function HU(t){return t.tag==="g"?t.children:[t]}function GU(t){var n=t.children,a=t.attributes,h=t.main,m=t.mask,g=t.maskId,b=t.transform,s=h.width,C=h.icon,D=m.width,M=m.icon,L=QC({transform:b,containerWidth:D,iconWidth:s}),F={tag:"rect",attributes:vi({},zx,{fill:"white"})},Y=C.children?{children:C.children.map(eI)}:{},Te={tag:"g",attributes:vi({},L.inner),children:[eI(vi({tag:C.tag,attributes:vi({},C.attributes,L.path)},Y))]},ue={tag:"g",attributes:vi({},L.outer),children:[Te]},K="mask-".concat(g||fg()),G="clip-".concat(g||fg()),Q={tag:"mask",attributes:vi({},zx,{id:K,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[F,ue]},_e={tag:"defs",children:[{tag:"clipPath",attributes:{id:G},children:HU(M)},Q]};return n.push(_e,{tag:"rect",attributes:vi({fill:"currentColor","clip-path":"url(#".concat(G,")"),mask:"url(#".concat(K,")")},zx)}),{children:n,attributes:a}}function WU(t){var n=t.children,a=t.attributes,h=t.main,m=t.transform,g=t.styles,b=Dx(g);if(b.length>0&&(a.style=b),Rx(m)){var s=QC({transform:m,containerWidth:h.width,iconWidth:h.width});n.push({tag:"g",attributes:vi({},s.outer),children:[{tag:"g",attributes:vi({},s.inner),children:[{tag:h.icon.tag,children:h.icon.children,attributes:vi({},h.icon.attributes,s.path)}]}]})}else n.push(h.icon);return{children:n,attributes:a}}function qU(t){var n=t.children,a=t.main,h=t.mask,m=t.attributes,g=t.styles,b=t.transform;if(Rx(b)&&a.found&&!h.found){var s=a.width,C=a.height,D={x:s/C/2,y:.5};m.style=Dx(vi({},g,{"transform-origin":"".concat(D.x+b.x/16,"em ").concat(D.y+b.y/16,"em")}))}return[{tag:"svg",attributes:m,children:n}]}function ZU(t){var n=t.prefix,a=t.iconName,h=t.children,m=t.attributes,g=t.symbol,b=g===!0?"".concat(n,"-").concat(mo.familyPrefix,"-").concat(a):g;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:vi({},m,{id:b}),children:h}]}]}function XU(t){var n=t.icons,a=n.main,h=n.mask,m=t.prefix,g=t.iconName,b=t.transform,s=t.symbol,C=t.title,D=t.maskId,M=t.titleId,L=t.extra,F=t.watchable,Y=F===void 0?!1:F,Te=h.found?h:a,ue=Te.width,K=Te.height,G=m==="fak",Q=G?"":"fa-w-".concat(Math.ceil(ue/K*16)),_e=[mo.replacementClass,g?"".concat(mo.familyPrefix,"-").concat(g):"",Q].filter(function(ve){return L.classes.indexOf(ve)===-1}).filter(function(ve){return ve!==""||!!ve}).concat(L.classes).join(" "),Ce={children:[],attributes:vi({},L.attributes,{"data-prefix":m,"data-icon":g,class:_e,role:L.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(ue," ").concat(K)})},Ae=G&&!~L.classes.indexOf("fa-fw")?{width:"".concat(ue/K*16*.0625,"em")}:{};Y&&(Ce.attributes[YC]=""),C&&Ce.children.push({tag:"title",attributes:{id:Ce.attributes["aria-labelledby"]||"title-".concat(M||fg())},children:[C]});var Le=vi({},Ce,{prefix:m,iconName:g,main:a,mask:h,maskId:D,transform:b,symbol:s,styles:vi({},Ae,L.styles)}),$e=h.found&&a.found?GU(Le):WU(Le),pt=$e.children,Xe=$e.attributes;return Le.children=pt,Le.attributes=Xe,s?ZU(Le):qU(Le)}function YU(t){var n=t.content,a=t.width,h=t.height,m=t.transform,g=t.title,b=t.extra,s=t.watchable,C=s===void 0?!1:s,D=vi({},b.attributes,g?{title:g}:{},{class:b.classes.join(" ")});C&&(D[YC]="");var M=vi({},b.styles);Rx(m)&&(M.transform=jU({transform:m,startCentered:!0,width:a,height:h}),M["-webkit-transform"]=M.transform);var L=Dx(M);L.length>0&&(D.style=L);var F=[];return F.push({tag:"span",attributes:D,children:[n]}),g&&F.push({tag:"span",attributes:{class:"sr-only"},children:[g]}),F}var tI=function(){};mo.measurePerformance&&hg&&hg.mark&&hg.measure;var KU=function(n,a){return function(h,m,g,b){return n.call(a,h,m,g,b)}},Nx=function(n,a,h,m){var g=Object.keys(n),b=g.length,s=m!==void 0?KU(a,m):a,C,D,M;for(h===void 0?(C=1,M=n[g[0]]):(C=0,M=h);C<b;C++)D=g[C],M=s(M,n[D],D,n);return M};function nI(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=a.skipHooks,m=h===void 0?!1:h,g=Object.keys(n).reduce(function(b,s){var C=n[s],D=!!C.icon;return D?b[C.iconName]=C.icon:b[s]=C,b},{});typeof Za.hooks.addPack=="function"&&!m?Za.hooks.addPack(t,g):Za.styles[t]=vi({},Za.styles[t]||{},g),t==="fas"&&nI("fa",n)}var iI=Za.styles,JU=Za.shims,rI=function(){var n=function(m){return Nx(iI,function(g,b,s){return g[s]=Nx(b,m,{}),g},{})};n(function(h,m,g){return m[3]&&(h[m[3]]=g),h}),n(function(h,m,g){var b=m[2];return h[g]=g,b.forEach(function(s){h[s]=g}),h});var a="far"in iI;Nx(JU,function(h,m){var g=m[0],b=m[1],s=m[2];return b==="far"&&!a&&(b="fas"),h[g]={prefix:b,iconName:s},h},{})};rI();Za.styles;function oI(t,n,a){if(t&&t[n]&&t[n][a])return{prefix:n,iconName:a,icon:t[n][a]}}function sI(t){var n=t.tag,a=t.attributes,h=a===void 0?{}:a,m=t.children,g=m===void 0?[]:m;return typeof t=="string"?JC(t):"<".concat(n," ").concat(VU(h),">").concat(g.map(sI).join(""),"</").concat(n,">")}var QU=function(n){var a={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n?n.toLowerCase().split(" ").reduce(function(h,m){var g=m.toLowerCase().split("-"),b=g[0],s=g.slice(1).join("-");if(b&&s==="h")return h.flipX=!0,h;if(b&&s==="v")return h.flipY=!0,h;if(s=parseFloat(s),isNaN(s))return h;switch(b){case"grow":h.size=h.size+s;break;case"shrink":h.size=h.size-s;break;case"left":h.x=h.x-s;break;case"right":h.x=h.x+s;break;case"up":h.y=h.y-s;break;case"down":h.y=h.y+s;break;case"rotate":h.rotate=h.rotate+s;break}return h},a):a};function Fx(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}Fx.prototype=Object.create(Error.prototype);Fx.prototype.constructor=Fx;var dg={fill:"currentColor"},aI={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};vi({},dg,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var Bx=vi({},aI,{attributeName:"opacity"});vi({},dg,{cx:"256",cy:"364",r:"28"}),vi({},aI,{attributeName:"r",values:"28;14;28;28;14;28;"}),vi({},Bx,{values:"1;0;1;1;0;1;"});vi({},dg,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),vi({},Bx,{values:"1;0;0;0;0;1;"});vi({},dg,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),vi({},Bx,{values:"0;0;1;1;0;0;"});Za.styles;function lI(t){var n=t[0],a=t[1],h=t.slice(4),m=VC(h,1),g=m[0],b=null;return Array.isArray(g)?b={tag:"g",attributes:{class:"".concat(mo.familyPrefix,"-").concat(Lx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(mo.familyPrefix,"-").concat(Lx.SECONDARY),fill:"currentColor",d:g[0]}},{tag:"path",attributes:{class:"".concat(mo.familyPrefix,"-").concat(Lx.PRIMARY),fill:"currentColor",d:g[1]}}]}:b={tag:"path",attributes:{fill:"currentColor",d:g}},{found:!0,width:n,height:a,icon:b}}Za.styles;var e8=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function t8(){var t=ZC,n=XC,a=mo.familyPrefix,h=mo.replacementClass,m=e8;if(a!==t||h!==n){var g=new RegExp("\\.".concat(t,"\\-"),"g"),b=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(n),"g");m=m.replace(g,".".concat(a,"-")).replace(b,"--".concat(a,"-")).replace(s,".".concat(h))}return m}var n8=function(){function t(){bU(this,t),this.definitions={}}return wU(t,[{key:"add",value:function(){for(var a=this,h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];var b=m.reduce(this._pullDefinitions,{});Object.keys(b).forEach(function(s){a.definitions[s]=vi({},a.definitions[s]||{},b[s]),nI(s,b[s]),rI()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(a,h){var m=h.prefix&&h.iconName&&h.icon?{0:h}:h;return Object.keys(m).map(function(g){var b=m[g],s=b.prefix,C=b.iconName,D=b.icon;a[s]||(a[s]={}),a[s][C]=D}),a}}]),t}();function cI(){mo.autoAddCss&&!fI&&($U(t8()),fI=!0)}function uI(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(h){return sI(h)})}}),Object.defineProperty(t,"node",{get:function(){if(!!Mx){var h=Po.createElement("div");return h.innerHTML=t.html,h.children}}}),t}function hI(t){var n=t.prefix,a=n===void 0?"fa":n,h=t.iconName;if(!!h)return oI(r8.definitions,a,h)||oI(Za.styles,a,h)}function i8(t){return function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=(n||{}).icon?n:hI(n||{}),m=a.mask;return m&&(m=(m||{}).icon?m:hI(m||{})),t(h,vi({},a,{mask:m}))}}var r8=new n8,fI=!1,dI={transform:function(n){return QU(n)}},o8=i8(function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.transform,h=a===void 0?Qc:a,m=n.symbol,g=m===void 0?!1:m,b=n.mask,s=b===void 0?null:b,C=n.maskId,D=C===void 0?null:C,M=n.title,L=M===void 0?null:M,F=n.titleId,Y=F===void 0?null:F,Te=n.classes,ue=Te===void 0?[]:Te,K=n.attributes,G=K===void 0?{}:K,Q=n.styles,_e=Q===void 0?{}:Q;if(!!t){var Ce=t.prefix,Ae=t.iconName,Le=t.icon;return uI(vi({type:"icon"},t),function(){return cI(),mo.autoA11y&&(L?G["aria-labelledby"]="".concat(mo.replacementClass,"-title-").concat(Y||fg()):(G["aria-hidden"]="true",G.focusable="false")),XU({icons:{main:lI(Le),mask:s?lI(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:Ce,iconName:Ae,transform:vi({},Qc,h),symbol:g,title:L,maskId:D,titleId:Y,extra:{attributes:G,styles:_e,classes:ue}})})}}),s8=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=a.transform,m=h===void 0?Qc:h,g=a.title,b=g===void 0?null:g,s=a.classes,C=s===void 0?[]:s,D=a.attributes,M=D===void 0?{}:D,L=a.styles,F=L===void 0?{}:L;return uI({type:"text",content:n},function(){return cI(),YU({content:n,transform:vi({},Qc,m),title:b,extra:{attributes:M,styles:F,classes:["".concat(mo.familyPrefix,"-layers-text")].concat(TU(C))}})})},a8=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function l8(t,n){return n={exports:{}},t(n,n.exports),n.exports}var c8=l8(function(t){(function(n){var a=function(G,Q,_e){if(!D(Q)||L(Q)||F(Q)||Y(Q)||C(Q))return Q;var Ce,Ae=0,Le=0;if(M(Q))for(Ce=[],Le=Q.length;Ae<Le;Ae++)Ce.push(a(G,Q[Ae],_e));else{Ce={};for(var $e in Q)Object.prototype.hasOwnProperty.call(Q,$e)&&(Ce[G($e,_e)]=a(G,Q[$e],_e))}return Ce},h=function(G,Q){Q=Q||{};var _e=Q.separator||"_",Ce=Q.split||/(?=[A-Z])/;return G.split(Ce).join(_e)},m=function(G){return Te(G)?G:(G=G.replace(/[\-_\s]+(.)?/g,function(Q,_e){return _e?_e.toUpperCase():""}),G.substr(0,1).toLowerCase()+G.substr(1))},g=function(G){var Q=m(G);return Q.substr(0,1).toUpperCase()+Q.substr(1)},b=function(G,Q){return h(G,Q).toLowerCase()},s=Object.prototype.toString,C=function(G){return typeof G=="function"},D=function(G){return G===Object(G)},M=function(G){return s.call(G)=="[object Array]"},L=function(G){return s.call(G)=="[object Date]"},F=function(G){return s.call(G)=="[object RegExp]"},Y=function(G){return s.call(G)=="[object Boolean]"},Te=function(G){return G=G-0,G===G},ue=function(G,Q){var _e=Q&&"process"in Q?Q.process:Q;return typeof _e!="function"?G:function(Ce,Ae){return _e(Ce,G,Ae)}},K={camelize:m,decamelize:b,pascalize:g,depascalize:b,camelizeKeys:function(G,Q){return a(ue(m,Q),G)},decamelizeKeys:function(G,Q){return a(ue(b,Q),G,Q)},pascalizeKeys:function(G,Q){return a(ue(g,Q),G)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=K:n.humps=K})(a8)}),u8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp=function(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t},pg=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(t[h]=a[h])}return t},h8=function(t,n){var a={};for(var h in t)n.indexOf(h)>=0||!Object.prototype.hasOwnProperty.call(t,h)||(a[h]=t[h]);return a},$x=function(t){if(Array.isArray(t)){for(var n=0,a=Array(t.length);n<t.length;n++)a[n]=t[n];return a}else return Array.from(t)};function f8(t){return t.split(";").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,a){var h=a.indexOf(":"),m=c8.camelize(a.slice(0,h)),g=a.slice(h+1).trim();return n[m]=g,n},{})}function d8(t){return t.split(/\s+/).reduce(function(n,a){return n[a]=!0,n},{})}function Ux(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var h=(t.children||[]).map(function(C){return Ux(C)}),m=Object.keys(t.attributes||{}).reduce(function(C,D){var M=t.attributes[D];switch(D){case"class":C.class=d8(M);break;case"style":C.style=f8(M);break;default:C.attrs[D]=M}return C},{attrs:{},class:{},style:{}});a.class;var g=a.style,b=g===void 0?{}:g,s=h8(a,["class","style"]);return Qu(t.tag,pg({},n,{class:m.class,style:pg({},m.style,b)},m.attrs,s),h)}var pI=!1;try{pI=!1}catch{}function p8(){if(!pI&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function jp(t,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?Vp({},t,n):{}}function m8(t){var n,a=(n={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Vp(n,"fa-"+t.size,t.size!==null),Vp(n,"fa-rotate-"+t.rotation,t.rotation!==null),Vp(n,"fa-pull-"+t.pull,t.pull!==null),Vp(n,"fa-swap-opacity",t.swapOpacity),n);return Object.keys(a).map(function(h){return a[h]?h:null}).filter(function(h){return h})}function mI(t){if(t===null)return null;if((typeof t=="undefined"?"undefined":u8(t))==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var rV=kc({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:String,default:null,validator:function(n){return["horizontal","vertical","both"].indexOf(n)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(n){return["right","left"].indexOf(n)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(n){return[90,180,270].indexOf(Number.parseInt(n,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(n){return["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(n)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1}},setup:function(n,a){var h=a.attrs,m=Wi(function(){return mI(n.icon)}),g=Wi(function(){return jp("classes",m8(n))}),b=Wi(function(){return jp("transform",typeof n.transform=="string"?dI.transform(n.transform):n.transform)}),s=Wi(function(){return jp("mask",mI(n.mask))}),C=Wi(function(){return o8(m.value,pg({},g.value,b.value,s.value,{symbol:n.symbol,title:n.title}))});Na(C,function(M){if(!M)return p8("Could not find one or more icon(s)",m.value,s.value)},{immediate:!0});var D=Wi(function(){return C.value?Ux(C.value.abstract[0],{},h):null});return function(){return D.value}}});kc({name:"FontAwesomeLayers",props:{fixedWidth:{type:Boolean,default:!1}},setup:function(n,a){var h=a.slots,m=mo.familyPrefix,g=Wi(function(){return[m+"-layers"].concat($x(n.fixedWidth?[m+"-fw"]:[]))});return function(){return Qu("div",{class:g.value},h.default?h.default():[])}}});kc({name:"FontAwesomeLayersText",props:{value:{type:[String,Number],default:""},transform:{type:[String,Object],default:null},counter:{type:Boolean,default:!1},position:{type:String,default:null,validator:function(n){return["bottom-left","bottom-right","top-left","top-right"].indexOf(n)>-1}}},setup:function(n,a){var h=a.attrs,m=mo.familyPrefix,g=Wi(function(){return jp("classes",[].concat($x(n.counter?[m+"-layers-counter"]:[]),$x(n.position?[m+"-layers-"+n.position]:[])))}),b=Wi(function(){return jp("transform",typeof n.transform=="string"?dI.transform(n.transform):n.transform)}),s=Wi(function(){var D=s8(n.value.toString(),pg({},b.value,g.value)),M=D.abstract;return n.counter&&(M[0].attributes.class=M[0].attributes.class.replace("fa-layers-text","")),M[0]}),C=Wi(function(){return Ux(s.value,{},h)});return function(){return C.value}}});/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var oV={prefix:"fas",iconName:"angle-down",icon:[320,512,[],"f107","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]},sV={prefix:"fas",iconName:"angle-left",icon:[256,512,[],"f104","M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"]},aV={prefix:"fas",iconName:"angle-right",icon:[256,512,[],"f105","M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"]},lV={prefix:"fas",iconName:"angle-up",icon:[320,512,[],"f106","M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"]},cV={prefix:"fas",iconName:"brain",icon:[576,512,[],"f5dc","M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"]},uV={prefix:"fas",iconName:"check",icon:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"]},hV={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},fV={prefix:"fas",iconName:"chevron-left",icon:[320,512,[],"f053","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"]},dV={prefix:"fas",iconName:"chevron-right",icon:[320,512,[],"f054","M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"]},pV={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"]},mV={prefix:"fas",iconName:"clock",icon:[512,512,[],"f017","M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"]},_V={prefix:"fas",iconName:"dollar-sign",icon:[288,512,[],"f155","M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"]},gV={prefix:"fas",iconName:"euro-sign",icon:[320,512,[],"f153","M310.706 413.765c-1.314-6.63-7.835-10.872-14.424-9.369-10.692 2.439-27.422 5.413-45.426 5.413-56.763 0-101.929-34.79-121.461-85.449h113.689a12 12 0 0 0 11.708-9.369l6.373-28.36c1.686-7.502-4.019-14.631-11.708-14.631H115.22c-1.21-14.328-1.414-28.287.137-42.245H261.95a12 12 0 0 0 11.723-9.434l6.512-29.755c1.638-7.484-4.061-14.566-11.723-14.566H130.184c20.633-44.991 62.69-75.03 117.619-75.03 14.486 0 28.564 2.25 37.851 4.145 6.216 1.268 12.347-2.498 14.002-8.623l11.991-44.368c1.822-6.741-2.465-13.616-9.326-14.917C290.217 34.912 270.71 32 249.635 32 152.451 32 74.03 92.252 45.075 176H12c-6.627 0-12 5.373-12 12v29.755c0 6.627 5.373 12 12 12h21.569c-1.009 13.607-1.181 29.287-.181 42.245H12c-6.627 0-12 5.373-12 12v28.36c0 6.627 5.373 12 12 12h30.114C67.139 414.692 145.264 480 249.635 480c26.301 0 48.562-4.544 61.101-7.788 6.167-1.595 10.027-7.708 8.788-13.957l-8.818-44.49z"]},yV={prefix:"fas",iconName:"eye",icon:[576,512,[],"f06e","M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"]},vV={prefix:"fas",iconName:"file-alt",icon:[384,512,[],"f15c","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"]},xV={prefix:"fas",iconName:"lira-sign",icon:[384,512,[],"f195","M371.994 256h-48.019C317.64 256 312 260.912 312 267.246 312 368 230.179 416 144 416V256.781l134.603-29.912A12 12 0 0 0 288 215.155v-40.976c0-7.677-7.109-13.38-14.603-11.714L144 191.219V160.78l134.603-29.912A12 12 0 0 0 288 119.154V78.179c0-7.677-7.109-13.38-14.603-11.714L144 95.219V44c0-6.627-5.373-12-12-12H76c-6.627 0-12 5.373-12 12v68.997L9.397 125.131A12 12 0 0 0 0 136.845v40.976c0 7.677 7.109 13.38 14.603 11.714L64 178.558v30.439L9.397 221.131A12 12 0 0 0 0 232.845v40.976c0 7.677 7.109 13.38 14.603 11.714L64 274.558V468c0 6.627 5.373 12 12 12h79.583c134.091 0 223.255-77.834 228.408-211.592.261-6.782-5.211-12.408-11.997-12.408z"]},bV={prefix:"fas",iconName:"lock",icon:[448,512,[],"f023","M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"]},wV={prefix:"fas",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"]},EV={prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},TV={prefix:"fas",iconName:"question",icon:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"]},AV={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"]},SV={prefix:"fas",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]},CV={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]},IV={prefix:"fas",iconName:"unlock",icon:[448,512,[],"f09c","M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"]},MV={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},kV={prefix:"fas",iconName:"user-friends",icon:[640,512,[],"f500","M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"]},LV={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"]},PV={prefix:"fas",iconName:"won-sign",icon:[576,512,[],"f159","M564 192c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-48l18.6-80.6c1.7-7.5-4-14.7-11.7-14.7h-46.1c-5.7 0-10.6 4-11.7 9.5L450.7 128H340.8l-19.7-86c-1.3-5.5-6.1-9.3-11.7-9.3h-44c-5.6 0-10.4 3.8-11.7 9.3l-20 86H125l-17.5-85.7c-1.1-5.6-6.1-9.6-11.8-9.6H53.6c-7.7 0-13.4 7.1-11.7 14.6L60 128H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h62.3l7.2 32H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h83.9l40.9 182.6c1.2 5.5 6.1 9.4 11.7 9.4h56.8c5.6 0 10.4-3.9 11.7-9.3L259.3 288h55.1l42.4 182.7c1.3 5.4 6.1 9.3 11.7 9.3h56.8c5.6 0 10.4-3.9 11.7-9.3L479.1 288H564c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-70.1l7.4-32zM183.8 342c-6.2 25.8-6.8 47.2-7.3 47.2h-1.1s-1.7-22-6.8-47.2l-11-54h38.8zm27.5-118h-66.8l-6.5-32h80.8zm62.9 0l2-8.6c1.9-8 3.5-16 4.8-23.4h11.8c1.3 7.4 2.9 15.4 4.8 23.4l2 8.6zm130.9 118c-5.1 25.2-6.8 47.2-6.8 47.2h-1.1c-.6 0-1.1-21.4-7.3-47.2l-12.4-54h39.1zm25.2-118h-67.4l-7.3-32h81.6z"]},OV={prefix:"fas",iconName:"yen-sign",icon:[384,512,[],"f157","M351.2 32h-65.3c-4.6 0-8.8 2.6-10.8 6.7l-55.4 113.2c-14.5 34.7-27.1 71.9-27.1 71.9h-1.3s-12.6-37.2-27.1-71.9L108.8 38.7c-2-4.1-6.2-6.7-10.8-6.7H32.8c-9.1 0-14.8 9.7-10.6 17.6L102.3 200H44c-6.6 0-12 5.4-12 12v32c0 6.6 5.4 12 12 12h88.2l19.8 37.2V320H44c-6.6 0-12 5.4-12 12v32c0 6.6 5.4 12 12 12h108v92c0 6.6 5.4 12 12 12h56c6.6 0 12-5.4 12-12v-92h108c6.6 0 12-5.4 12-12v-32c0-6.6-5.4-12-12-12H232v-26.8l19.8-37.2H340c6.6 0 12-5.4 12-12v-32c0-6.6-5.4-12-12-12h-58.3l80.1-150.4c4.3-7.9-1.5-17.6-10.6-17.6z"]},mg={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){var a=1e3,h=6e4,m=36e5,g="millisecond",b="second",s="minute",C="hour",D="day",M="week",L="month",F="quarter",Y="year",Te="date",ue="Invalid Date",K=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_e=function(Pe,xe,je){var lt=String(Pe);return!lt||lt.length>=xe?Pe:""+Array(xe+1-lt.length).join(je)+Pe},Ce={s:_e,z:function(Pe){var xe=-Pe.utcOffset(),je=Math.abs(xe),lt=Math.floor(je/60),Qe=je%60;return(xe<=0?"+":"-")+_e(lt,2,"0")+":"+_e(Qe,2,"0")},m:function Pe(xe,je){if(xe.date()<je.date())return-Pe(je,xe);var lt=12*(je.year()-xe.year())+(je.month()-xe.month()),Qe=xe.clone().add(lt,L),ht=je-Qe<0,ct=xe.clone().add(lt+(ht?-1:1),L);return+(-(lt+(je-Qe)/(ht?Qe-ct:ct-Qe))||0)},a:function(Pe){return Pe<0?Math.ceil(Pe)||0:Math.floor(Pe)},p:function(Pe){return{M:L,y:Y,w:M,d:D,D:Te,h:C,m:s,s:b,ms:g,Q:F}[Pe]||String(Pe||"").toLowerCase().replace(/s$/,"")},u:function(Pe){return Pe===void 0}},Ae="en",Le={};Le[Ae]=Q;var $e=function(Pe){return Pe instanceof Ye},pt=function(Pe,xe,je){var lt;if(!Pe)return Ae;if(typeof Pe=="string")Le[Pe]&&(lt=Pe),xe&&(Le[Pe]=xe,lt=Pe);else{var Qe=Pe.name;Le[Qe]=Pe,lt=Qe}return!je&&lt&&(Ae=lt),lt||!je&&Ae},Xe=function(Pe,xe){if($e(Pe))return Pe.clone();var je=typeof xe=="object"?xe:{};return je.date=Pe,je.args=arguments,new Ye(je)},ve=Ce;ve.l=pt,ve.i=$e,ve.w=function(Pe,xe){return Xe(Pe,{locale:xe.$L,utc:xe.$u,x:xe.$x,$offset:xe.$offset})};var Ye=function(){function Pe(je){this.$L=pt(je.locale,null,!0),this.parse(je)}var xe=Pe.prototype;return xe.parse=function(je){this.$d=function(lt){var Qe=lt.date,ht=lt.utc;if(Qe===null)return new Date(NaN);if(ve.u(Qe))return new Date;if(Qe instanceof Date)return new Date(Qe);if(typeof Qe=="string"&&!/Z$/i.test(Qe)){var ct=Qe.match(K);if(ct){var Ut=ct[2]-1||0,Ke=(ct[7]||"0").substring(0,3);return ht?new Date(Date.UTC(ct[1],Ut,ct[3]||1,ct[4]||0,ct[5]||0,ct[6]||0,Ke)):new Date(ct[1],Ut,ct[3]||1,ct[4]||0,ct[5]||0,ct[6]||0,Ke)}}return new Date(Qe)}(je),this.$x=je.x||{},this.init()},xe.init=function(){var je=this.$d;this.$y=je.getFullYear(),this.$M=je.getMonth(),this.$D=je.getDate(),this.$W=je.getDay(),this.$H=je.getHours(),this.$m=je.getMinutes(),this.$s=je.getSeconds(),this.$ms=je.getMilliseconds()},xe.$utils=function(){return ve},xe.isValid=function(){return this.$d.toString()!==ue},xe.isSame=function(je,lt){var Qe=Xe(je);return this.startOf(lt)<=Qe&&Qe<=this.endOf(lt)},xe.isAfter=function(je,lt){return Xe(je)<this.startOf(lt)},xe.isBefore=function(je,lt){return this.endOf(lt)<Xe(je)},xe.$g=function(je,lt,Qe){return ve.u(je)?this[lt]:this.set(Qe,je)},xe.unix=function(){return Math.floor(this.valueOf()/1e3)},xe.valueOf=function(){return this.$d.getTime()},xe.startOf=function(je,lt){var Qe=this,ht=!!ve.u(lt)||lt,ct=ve.p(je),Ut=function(Et,sn){var En=ve.w(Qe.$u?Date.UTC(Qe.$y,sn,Et):new Date(Qe.$y,sn,Et),Qe);return ht?En:En.endOf(D)},Ke=function(Et,sn){return ve.w(Qe.toDate()[Et].apply(Qe.toDate("s"),(ht?[0,0,0,0]:[23,59,59,999]).slice(sn)),Qe)},hn=this.$W,Ht=this.$M,dn=this.$D,Ue="set"+(this.$u?"UTC":"");switch(ct){case Y:return ht?Ut(1,0):Ut(31,11);case L:return ht?Ut(1,Ht):Ut(0,Ht+1);case M:var wt=this.$locale().weekStart||0,kt=(hn<wt?hn+7:hn)-wt;return Ut(ht?dn-kt:dn+(6-kt),Ht);case D:case Te:return Ke(Ue+"Hours",0);case C:return Ke(Ue+"Minutes",1);case s:return Ke(Ue+"Seconds",2);case b:return Ke(Ue+"Milliseconds",3);default:return this.clone()}},xe.endOf=function(je){return this.startOf(je,!1)},xe.$set=function(je,lt){var Qe,ht=ve.p(je),ct="set"+(this.$u?"UTC":""),Ut=(Qe={},Qe[D]=ct+"Date",Qe[Te]=ct+"Date",Qe[L]=ct+"Month",Qe[Y]=ct+"FullYear",Qe[C]=ct+"Hours",Qe[s]=ct+"Minutes",Qe[b]=ct+"Seconds",Qe[g]=ct+"Milliseconds",Qe)[ht],Ke=ht===D?this.$D+(lt-this.$W):lt;if(ht===L||ht===Y){var hn=this.clone().set(Te,1);hn.$d[Ut](Ke),hn.init(),this.$d=hn.set(Te,Math.min(this.$D,hn.daysInMonth())).$d}else Ut&&this.$d[Ut](Ke);return this.init(),this},xe.set=function(je,lt){return this.clone().$set(je,lt)},xe.get=function(je){return this[ve.p(je)]()},xe.add=function(je,lt){var Qe,ht=this;je=Number(je);var ct=ve.p(lt),Ut=function(Ht){var dn=Xe(ht);return ve.w(dn.date(dn.date()+Math.round(Ht*je)),ht)};if(ct===L)return this.set(L,this.$M+je);if(ct===Y)return this.set(Y,this.$y+je);if(ct===D)return Ut(1);if(ct===M)return Ut(7);var Ke=(Qe={},Qe[s]=h,Qe[C]=m,Qe[b]=a,Qe)[ct]||1,hn=this.$d.getTime()+je*Ke;return ve.w(hn,this)},xe.subtract=function(je,lt){return this.add(-1*je,lt)},xe.format=function(je){var lt=this,Qe=this.$locale();if(!this.isValid())return Qe.invalidDate||ue;var ht=je||"YYYY-MM-DDTHH:mm:ssZ",ct=ve.z(this),Ut=this.$H,Ke=this.$m,hn=this.$M,Ht=Qe.weekdays,dn=Qe.months,Ue=function(sn,En,me,oe){return sn&&(sn[En]||sn(lt,ht))||me[En].substr(0,oe)},wt=function(sn){return ve.s(Ut%12||12,sn,"0")},kt=Qe.meridiem||function(sn,En,me){var oe=sn<12?"AM":"PM";return me?oe.toLowerCase():oe},Et={YY:String(this.$y).slice(-2),YYYY:this.$y,M:hn+1,MM:ve.s(hn+1,2,"0"),MMM:Ue(Qe.monthsShort,hn,dn,3),MMMM:Ue(dn,hn),D:this.$D,DD:ve.s(this.$D,2,"0"),d:String(this.$W),dd:Ue(Qe.weekdaysMin,this.$W,Ht,2),ddd:Ue(Qe.weekdaysShort,this.$W,Ht,3),dddd:Ht[this.$W],H:String(Ut),HH:ve.s(Ut,2,"0"),h:wt(1),hh:wt(2),a:kt(Ut,Ke,!0),A:kt(Ut,Ke,!1),m:String(Ke),mm:ve.s(Ke,2,"0"),s:String(this.$s),ss:ve.s(this.$s,2,"0"),SSS:ve.s(this.$ms,3,"0"),Z:ct};return ht.replace(G,function(sn,En){return En||Et[sn]||ct.replace(":","")})},xe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},xe.diff=function(je,lt,Qe){var ht,ct=ve.p(lt),Ut=Xe(je),Ke=(Ut.utcOffset()-this.utcOffset())*h,hn=this-Ut,Ht=ve.m(this,Ut);return Ht=(ht={},ht[Y]=Ht/12,ht[L]=Ht,ht[F]=Ht/3,ht[M]=(hn-Ke)/6048e5,ht[D]=(hn-Ke)/864e5,ht[C]=hn/m,ht[s]=hn/h,ht[b]=hn/a,ht)[ct]||hn,Qe?Ht:ve.a(Ht)},xe.daysInMonth=function(){return this.endOf(L).$D},xe.$locale=function(){return Le[this.$L]},xe.locale=function(je,lt){if(!je)return this.$L;var Qe=this.clone(),ht=pt(je,lt,!0);return ht&&(Qe.$L=ht),Qe},xe.clone=function(){return ve.w(this.$d,this)},xe.toDate=function(){return new Date(this.valueOf())},xe.toJSON=function(){return this.isValid()?this.toISOString():null},xe.toISOString=function(){return this.$d.toISOString()},xe.toString=function(){return this.$d.toUTCString()},Pe}(),Be=Ye.prototype;return Xe.prototype=Be,[["$ms",g],["$s",b],["$m",s],["$H",C],["$W",D],["$M",L],["$y",Y],["$D",Te]].forEach(function(Pe){Be[Pe[1]]=function(xe){return this.$g(xe,Pe[0],Pe[1])}}),Xe.extend=function(Pe,xe){return Pe.$i||(Pe(xe,Ye,Xe),Pe.$i=!0),Xe},Xe.locale=pt,Xe.isDayjs=$e,Xe.unix=function(Pe){return Xe(1e3*Pe)},Xe.en=Le[Ae],Xe.Ls=Le,Xe.p={},Xe})})(mg);var DV=mg.exports,_I={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){return function(a,h){h.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(_I);var RV=_I.exports,gI={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(h,m,g){var b=m.prototype,s=b.format;g.en.formats=a,b.format=function(C){C===void 0&&(C="YYYY-MM-DDTHH:mm:ssZ");var D=this.$locale().formats,M=function(L,F){return L.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Y,Te,ue){var K=ue&&ue.toUpperCase();return Te||F[ue]||a[ue]||F[K].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(G,Q,_e){return Q||_e.slice(1)})})}(C,D===void 0?{}:D);return s.call(this,M)}}})})(gI);var zV=gI.exports,yI={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},h=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,m=/\d\d/,g=/\d\d?/,b=/\d*[^\s\d-_:/()]+/,s={},C=function(ue){return(ue=+ue)+(ue>68?1900:2e3)},D=function(ue){return function(K){this[ue]=+K}},M=[/[+-]\d\d:?(\d\d)?|Z/,function(ue){(this.zone||(this.zone={})).offset=function(K){if(!K||K==="Z")return 0;var G=K.match(/([+-]|\d\d)/g),Q=60*G[1]+(+G[2]||0);return Q===0?0:G[0]==="+"?-Q:Q}(ue)}],L=function(ue){var K=s[ue];return K&&(K.indexOf?K:K.s.concat(K.f))},F=function(ue,K){var G,Q=s.meridiem;if(Q){for(var _e=1;_e<=24;_e+=1)if(ue.indexOf(Q(_e,0,K))>-1){G=_e>12;break}}else G=ue===(K?"pm":"PM");return G},Y={A:[b,function(ue){this.afternoon=F(ue,!1)}],a:[b,function(ue){this.afternoon=F(ue,!0)}],S:[/\d/,function(ue){this.milliseconds=100*+ue}],SS:[m,function(ue){this.milliseconds=10*+ue}],SSS:[/\d{3}/,function(ue){this.milliseconds=+ue}],s:[g,D("seconds")],ss:[g,D("seconds")],m:[g,D("minutes")],mm:[g,D("minutes")],H:[g,D("hours")],h:[g,D("hours")],HH:[g,D("hours")],hh:[g,D("hours")],D:[g,D("day")],DD:[m,D("day")],Do:[b,function(ue){var K=s.ordinal,G=ue.match(/\d+/);if(this.day=G[0],K)for(var Q=1;Q<=31;Q+=1)K(Q).replace(/\[|\]/g,"")===ue&&(this.day=Q)}],M:[g,D("month")],MM:[m,D("month")],MMM:[b,function(ue){var K=L("months"),G=(L("monthsShort")||K.map(function(Q){return Q.substr(0,3)})).indexOf(ue)+1;if(G<1)throw new Error;this.month=G%12||G}],MMMM:[b,function(ue){var K=L("months").indexOf(ue)+1;if(K<1)throw new Error;this.month=K%12||K}],Y:[/[+-]?\d+/,D("year")],YY:[m,function(ue){this.year=C(ue)}],YYYY:[/\d{4}/,D("year")],Z:M,ZZ:M};function Te(ue){var K,G;K=ue,G=s&&s.formats;for(var Q=(ue=K.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Xe,ve,Ye){var Be=Ye&&Ye.toUpperCase();return ve||G[Ye]||a[Ye]||G[Be].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Pe,xe,je){return xe||je.slice(1)})})).match(h),_e=Q.length,Ce=0;Ce<_e;Ce+=1){var Ae=Q[Ce],Le=Y[Ae],$e=Le&&Le[0],pt=Le&&Le[1];Q[Ce]=pt?{regex:$e,parser:pt}:Ae.replace(/^\[|\]$/g,"")}return function(Xe){for(var ve={},Ye=0,Be=0;Ye<_e;Ye+=1){var Pe=Q[Ye];if(typeof Pe=="string")Be+=Pe.length;else{var xe=Pe.regex,je=Pe.parser,lt=Xe.substr(Be),Qe=xe.exec(lt)[0];je.call(ve,Qe),Xe=Xe.replace(Qe,"")}}return function(ht){var ct=ht.afternoon;if(ct!==void 0){var Ut=ht.hours;ct?Ut<12&&(ht.hours+=12):Ut===12&&(ht.hours=0),delete ht.afternoon}}(ve),ve}}return function(ue,K,G){G.p.customParseFormat=!0,ue&&ue.parseTwoDigitYear&&(C=ue.parseTwoDigitYear);var Q=K.prototype,_e=Q.parse;Q.parse=function(Ce){var Ae=Ce.date,Le=Ce.utc,$e=Ce.args;this.$u=Le;var pt=$e[1];if(typeof pt=="string"){var Xe=$e[2]===!0,ve=$e[3]===!0,Ye=Xe||ve,Be=$e[2];ve&&(Be=$e[2]),s=this.$locale(),!Xe&&Be&&(s=G.Ls[Be]),this.$d=function(lt,Qe,ht){try{if(["x","X"].indexOf(Qe)>-1)return new Date((Qe==="X"?1e3:1)*lt);var ct=Te(Qe)(lt),Ut=ct.year,Ke=ct.month,hn=ct.day,Ht=ct.hours,dn=ct.minutes,Ue=ct.seconds,wt=ct.milliseconds,kt=ct.zone,Et=new Date,sn=hn||(Ut||Ke?1:Et.getDate()),En=Ut||Et.getFullYear(),me=0;Ut&&!Ke||(me=Ke>0?Ke-1:Et.getMonth());var oe=Ht||0,ot=dn||0,te=Ue||0,ge=wt||0;return kt?new Date(Date.UTC(En,me,sn,oe,ot,te,ge+60*kt.offset*1e3)):ht?new Date(Date.UTC(En,me,sn,oe,ot,te,ge)):new Date(En,me,sn,oe,ot,te,ge)}catch{return new Date("")}}(Ae,pt,Le),this.init(),Be&&Be!==!0&&(this.$L=this.locale(Be).$L),Ye&&Ae!=this.format(pt)&&(this.$d=new Date("")),s={}}else if(pt instanceof Array)for(var Pe=pt.length,xe=1;xe<=Pe;xe+=1){$e[1]=pt[xe-1];var je=G.apply(this,$e);if(je.isValid()){this.$d=je.$d,this.$L=je.$L,this.init();break}xe===Pe&&(this.$d=new Date(""))}else _e.call(this,Ce)}}})})(yI);var NV=yI.exports,_8={exports:{}};(function(t,n){(function(a,h){t.exports=h(mg.exports)})(Fs,function(a){function h(b){return b&&typeof b=="object"&&"default"in b?b:{default:b}}var m=h(a),g={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xE9._jue._vie._s\xE1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xE1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xEDa",dd:"%d d\xEDas",M:"un mes",MM:"%d meses",y:"un a\xF1o",yy:"%d a\xF1os"},ordinal:function(b){return b+"\xBA"}};return m.default.locale(g,null,!0),g})})(_8);var g8={exports:{}};(function(t,n){(function(a,h){t.exports=h(mg.exports)})(Fs,function(a){function h(b){return b&&typeof b=="object"&&"default"in b?b:{default:b}}var m=h(a),g={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre".split("_"),monthsShort:"janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(b){return""+b+(b===1?"er":"")}};return m.default.locale(g,null,!0),g})})(g8);var y8={exports:{}};(function(t,n){(function(a,h){t.exports=h()})(Fs,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}})})(y8);var Vx={exports:{}};(function(t,n){(function(a,h){h(n)})(Fs,function(a){function h(ue,K,G){return K in ue?Object.defineProperty(ue,K,{value:G,enumerable:!0,configurable:!0,writable:!0}):ue[K]=G,ue}function m(ue,K){return function(G){if(Array.isArray(G))return G}(ue)||function(G,Q){var _e=G==null?null:typeof Symbol!="undefined"&&G[Symbol.iterator]||G["@@iterator"];if(_e!=null){var Ce,Ae,Le=[],$e=!0,pt=!1;try{for(_e=_e.call(G);!($e=(Ce=_e.next()).done)&&(Le.push(Ce.value),!Q||Le.length!==Q);$e=!0);}catch(Xe){pt=!0,Ae=Xe}finally{try{$e||_e.return==null||_e.return()}finally{if(pt)throw Ae}}return Le}}(ue,K)||function(G,Q){if(!!G){if(typeof G=="string")return g(G,Q);var _e=Object.prototype.toString.call(G).slice(8,-1);if(_e==="Object"&&G.constructor&&(_e=G.constructor.name),_e==="Map"||_e==="Set")return Array.from(G);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return g(G,Q)}}(ue,K)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(ue,K){(K==null||K>ue.length)&&(K=ue.length);for(var G=0,Q=new Array(K);G<K;G++)Q[G]=ue[G];return Q}function b(ue,K){var G,Q,_e,Ce,Ae=null,Le=typeof K=="number"?K:(G=m(String(K).split(/(ms|s)/i),2),Q=G[0],_e=G[1],Ce=_e===void 0?"ms":_e,Number(Q)*{ms:1,s:1e3}[Ce]),$e=function(){for(var pt=this,Xe=arguments.length,ve=new Array(Xe),Ye=0;Ye<Xe;Ye++)ve[Ye]=arguments[Ye];var Be=function(){Ae=null,ue.apply(pt,ve)};clearTimeout(Ae),(Ae=setTimeout(Be,Le))||ue.apply(this,ve)};return $e.cancel=function(){clearTimeout(Ae),Ae=null},$e}function s(ue){return ue.map(function(K){return K.toLowerCase()})}function C(ue,K){var G=(ue.getNamedItem("debounce-events")||{}).value,Q=G!==void 0&&G;return s(Q?Q.split(","):function(_e){return Array.isArray(_e)?_e:_e==null?[]:[_e]}(K))}function D(ue){return ue===""}function M(ue,K){return ue==="Enter"&&(!K.lock||K.unlock)}function L(ue,K,G){return D(ue)&&G.fireonempty&&(K==="Enter"||K===" ")}function F(ue){var K=m(String(ue).split("."),1)[0];return Number(K)>=3?"mounted":"bind"}function Y(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"2",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=K.lock,Q=G!==void 0&&G,_e=K.listenTo,Ce=_e===void 0?"keyup":_e,Ae=K.defaultTime,Le=Ae===void 0?"300ms":Ae,$e=K.fireOnEmpty,pt=$e!==void 0&&$e,Xe=K.cancelOnEmpty,ve=Xe!==void 0&&Xe,Ye=K.trim,Be=Ye!==void 0&&Ye;return h({},F(ue),function(Pe,xe){var je=xe.value,lt=xe.arg,Qe=lt===void 0?Le:lt,ht=xe.modifiers,ct=Object.assign({lock:Q,trim:Be,fireonempty:pt,cancelonempty:ve},ht),Ut=C(Pe.attributes,Ce),Ke=b(function(Ht){je(Ht.target.value,Ht)},Qe);function hn(Ht){var dn=ct.trim?Ht.target.value.trim():Ht.target.value;D(dn)&&ct.cancelonempty?Ke.cancel():M(Ht.key,ct)||L(dn,Ht.key,ct)?(Ke.cancel(),je(Ht.target.value,Ht)):Ke(Ht)}Ut.forEach(function(Ht){Pe.addEventListener(Ht,hn)})})}Y();var Te={install:function(ue){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue.directive("debounce",Y(ue.version,K))}};a.debounce=b,a.default=Te,a.getDirective=Y,Object.defineProperty(a,"__esModule",{value:!0})})})(Vx,Vx.exports);var FV=c5(Vx.exports),v8={innerWidth(t){let n=t.offsetWidth,a=getComputedStyle(t);return n+=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),n},width(t){let n=t.offsetWidth,a=getComputedStyle(t);return n-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),n},getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)},getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)},getOuterWidth(t,n){if(t){let a=t.offsetWidth;if(n){let h=getComputedStyle(t);a+=parseFloat(h.marginLeft)+parseFloat(h.marginRight)}return a}else return 0},getOuterHeight(t,n){if(t){let a=t.offsetHeight;if(n){let h=getComputedStyle(t);a+=parseFloat(h.marginTop)+parseFloat(h.marginBottom)}return a}else return 0},getClientHeight(t,n){if(t){let a=t.clientHeight;if(n){let h=getComputedStyle(t);a+=parseFloat(h.marginTop)+parseFloat(h.marginBottom)}return a}else return 0},getViewport(){let t=window,n=document,a=n.documentElement,h=n.getElementsByTagName("body")[0],m=t.innerWidth||a.clientWidth||h.clientWidth,g=t.innerHeight||a.clientHeight||h.clientHeight;return{width:m,height:g}},getOffset(t){var n=t.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}},index(t){let n=t.parentNode.childNodes,a=0;for(var h=0;h<n.length;h++){if(n[h]===t)return a;n[h].nodeType===1&&a++}return-1},addMultipleClasses(t,n){if(t.classList){let a=n.split(" ");for(let h=0;h<a.length;h++)t.classList.add(a[h])}else{let a=n.split(" ");for(let h=0;h<a.length;h++)t.className+=" "+a[h]}},addClass(t,n){t.classList?t.classList.add(n):t.className+=" "+n},removeClass(t,n){t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass(t,n){return t?t.classList?t.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(t.className):!1},find(t,n){return t.querySelectorAll(n)},findSingle(t,n){return t.querySelector(n)},getHeight(t){let n=t.offsetHeight,a=getComputedStyle(t);return n-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)+parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth),n},getWidth(t){let n=t.offsetWidth,a=getComputedStyle(t);return n-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)+parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth),n},absolutePosition(t,n){let a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),h=a.height,m=a.width,g=n.offsetHeight,b=n.offsetWidth,s=n.getBoundingClientRect(),C=this.getWindowScrollTop(),D=this.getWindowScrollLeft(),M=this.getViewport(),L,F;s.top+g+h>M.height?(L=s.top+C-h,t.style.transformOrigin="bottom",L<0&&(L=C)):(L=g+s.top+C,t.style.transformOrigin="top"),s.left+m>M.width?F=Math.max(0,s.left+D+b-m):F=s.left+D,t.style.top=L+"px",t.style.left=F+"px"},relativePosition(t,n){let a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t);const h=n.offsetHeight,m=n.getBoundingClientRect(),g=this.getViewport();let b,s;m.top+h+a.height>g.height?(b=-1*a.height,t.style.transformOrigin="bottom",m.top+b<0&&(b=-1*m.top)):(b=h,t.style.transformOrigin="top"),a.width>g.width?s=m.left*-1:m.left+a.width>g.width?s=(m.left+a.width-g.width)*-1:s=0,t.style.top=b+"px",t.style.left=s+"px"},getParents(t,n=[]){return t.parentNode===null?n:this.getParents(t.parentNode,n.concat([t.parentNode]))},getScrollableParents(t){let n=[];if(t){let a=this.getParents(t);const h=/(auto|scroll)/,m=g=>{let b=window.getComputedStyle(g,null);return h.test(b.getPropertyValue("overflow"))||h.test(b.getPropertyValue("overflowX"))||h.test(b.getPropertyValue("overflowY"))};for(let g of a){let b=g.nodeType===1&&g.dataset.scrollselectors;if(b){let s=b.split(",");for(let C of s){let D=this.findSingle(g,C);D&&m(D)&&n.push(D)}}g.nodeType!==9&&m(g)&&n.push(g)}}return n},getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let n=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",n},getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let n=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",n},getHiddenElementDimensions(t){var n={};return t.style.visibility="hidden",t.style.display="block",n.width=t.offsetWidth,n.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",n},fadeIn(t,n){t.style.opacity=0;var a=+new Date,h=0,m=function(){h=+t.style.opacity+(new Date().getTime()-a)/n,t.style.opacity=h,a=+new Date,+h<1&&(window.requestAnimationFrame&&requestAnimationFrame(m)||setTimeout(m,16))};m()},fadeOut(t,n){var a=1,h=50,m=n,g=h/m;let b=setInterval(()=>{a-=g,a<=0&&(a=0,clearInterval(b)),t.style.opacity=a},h)},getUserAgent(){return navigator.userAgent},appendChild(t,n){if(this.isElement(n))n.appendChild(t);else if(n.el&&n.elElement)n.elElement.appendChild(t);else throw new Error("Cannot append "+n+" to "+t)},scrollInView(t,n){let a=getComputedStyle(t).getPropertyValue("borderTopWidth"),h=a?parseFloat(a):0,m=getComputedStyle(t).getPropertyValue("paddingTop"),g=m?parseFloat(m):0,b=t.getBoundingClientRect(),C=n.getBoundingClientRect().top+document.body.scrollTop-(b.top+document.body.scrollTop)-h-g,D=t.scrollTop,M=t.clientHeight,L=this.getOuterHeight(n);C<0?t.scrollTop=D+C:C+L>M&&(t.scrollTop=D+C-M+L)},clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}},calculateScrollbarWidth(){if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.calculatedScrollbarWidth=n,n},getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser},resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),n=/(chrome)[ ]([\w.]+)/.exec(t)||/(webkit)[ ]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}},isVisible(t){return t.offsetParent!=null},invokeElementMethod(t,n,a){t[n].apply(t,a)},getFocusableElements(t){let n=this.find(t,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`),a=[];for(let h of n)getComputedStyle(h).display!="none"&&getComputedStyle(h).visibility!="hidden"&&a.push(h);return a},getFirstFocusableElement(t){const n=this.getFocusableElements(t);return n.length>0?n[0]:null},isClickable(t){const n=t.nodeName,a=t.parentElement&&t.parentElement.nodeName;return n=="INPUT"||n=="BUTTON"||n=="A"||a=="INPUT"||a=="BUTTON"||a=="A"||this.hasClass(t,"p-button")||this.hasClass(t.parentElement,"p-button")||this.hasClass(t.parentElement,"p-checkbox")||this.hasClass(t.parentElement,"p-radiobutton")},applyStyle(t,n){if(typeof n=="string")t.style.cssText=n;else for(let a in n)t.style[a]=n[a]},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroid(){return/(android)/i.test(navigator.userAgent)},isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},exportCSV(t,n){let a=new Blob([t],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(a,n+".csv");else{let h=document.createElement("a");h.download!==void 0?(h.setAttribute("href",URL.createObjectURL(a)),h.setAttribute("download",n+".csv"),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h)):(t="data:text/csv;charset=utf-8,"+t,window.open(encodeURI(t)))}}};class BV{constructor(n,a=()=>{}){this.element=n,this.listener=a}bindScrollListener(){this.scrollableParents=v8.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var $V={equals(t,n,a){return a?this.resolveFieldData(t,a)===this.resolveFieldData(n,a):this.deepEquals(t,n)},deepEquals(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){var a=Array.isArray(t),h=Array.isArray(n),m,g,b;if(a&&h){if(g=t.length,g!=n.length)return!1;for(m=g;m--!=0;)if(!this.deepEquals(t[m],n[m]))return!1;return!0}if(a!=h)return!1;var s=t instanceof Date,C=n instanceof Date;if(s!=C)return!1;if(s&&C)return t.getTime()==n.getTime();var D=t instanceof RegExp,M=n instanceof RegExp;if(D!=M)return!1;if(D&&M)return t.toString()==n.toString();var L=Object.keys(t);if(g=L.length,g!==Object.keys(n).length)return!1;for(m=g;m--!=0;)if(!Object.prototype.hasOwnProperty.call(n,L[m]))return!1;for(m=g;m--!=0;)if(b=L[m],!this.deepEquals(t[b],n[b]))return!1;return!0}return t!==t&&n!==n},resolveFieldData(t,n){if(t&&Object.keys(t).length&&n){if(this.isFunction(n))return n(t);if(n.indexOf(".")===-1)return t[n];{let m=n.split("."),g=t;for(var a=0,h=m.length;a<h;++a){if(g==null)return null;g=g[m[a]]}return g}}else return null},isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},filter(t,n,a){var h=[];if(t){for(let m of t)for(let g of n)if(String(this.resolveFieldData(m,g)).toLowerCase().indexOf(a.toLowerCase())>-1){h.push(m);break}}return h},reorderArray(t,n,a){let h;if(t&&n!==a){if(a>=t.length)for(h=a-t.length;h--+1;)t.push(void 0);t.splice(a,0,t.splice(n,1)[0])}},findIndexInList(t,n){let a=-1;if(n){for(let h=0;h<n.length;h++)if(n[h]===t){a=h;break}}return a},contains(t,n){if(t!=null&&n&&n.length){for(let a of n)if(this.equals(t,a))return!0}return!1},insertIntoOrderedArray(t,n,a,h){if(a.length>0){let m=!1;for(let g=0;g<a.length;g++)if(this.findIndexInList(a[g],h)>n){a.splice(g,0,t),m=!0;break}m||a.push(t)}else a.push(t)},removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t},getVNodeProp(t,n){let a=t.props;if(a){let h=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),m=Object.prototype.hasOwnProperty.call(a,h)?h:n;return t.type.props[n].type===Boolean&&a[m]===""?!0:a[m]}return null},isEmpty(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!(t instanceof Date)&&typeof t=="object"&&Object.keys(t).length===0},isNotEmpty(t){return!this.isEmpty(t)}};function x8(){let t=[];const n=(g,b)=>{let s=t.length>0?t[t.length-1]:{key:g,value:b},C=s.value+(s.key===g?0:b)+1;return t.push({key:g,value:C}),C},a=g=>{t=t.filter(b=>b.value!==g)},h=()=>t.length>0?t[t.length-1].value:0,m=g=>g&&parseInt(g.style.zIndex,10)||0;return{get:m,set:(g,b,s)=>{b&&(b.style.zIndex=String(n(g,s)))},clear:g=>{g&&(a(m(g)),g.style.zIndex="")},getCurrent:()=>h()}}var UV=x8(),vI=0;function VV(t="pv_id_"){return vI++,`${t}${vI}`}function jV(){const t=new Map;return{on(n,a){let h=t.get(n);h?h.push(a):h=[a],t.set(n,h)},off(n,a){let h=t.get(n);h&&h.splice(h.indexOf(a)>>>0,1)},emit(n,a){let h=t.get(n);h&&h.slice().map(m=>{m(a)})}}}const _o={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},xI={ripple:!1,inputStyle:"outlined",locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"},filterMatchModeOptions:{text:[_o.STARTS_WITH,_o.CONTAINS,_o.NOT_CONTAINS,_o.ENDS_WITH,_o.EQUALS,_o.NOT_EQUALS],numeric:[_o.EQUALS,_o.NOT_EQUALS,_o.LESS_THAN,_o.LESS_THAN_OR_EQUAL_TO,_o.GREATER_THAN,_o.GREATER_THAN_OR_EQUAL_TO],date:[_o.DATE_IS,_o.DATE_IS_NOT,_o.DATE_BEFORE,_o.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}},b8=Symbol();var HV={install:(t,n)=>{let a=n?en(en({},xI),n):en({},xI);const h={config:Bu(a)};t.config.globalProperties.$primevue=h,t.provide(b8,h)}};export{_V as $,eV as A,Ey as B,T8 as C,A8 as D,Q8 as E,ko as F,yE as G,M8 as H,tV as I,iV as J,nV as K,Z8 as L,Uf as M,r8 as N,uV as O,MV as P,lV as Q,oV as R,aV as S,sV as T,pV as U,hV as V,dV as W,fV as X,cV as Y,LV as Z,AV as _,V8 as a,gV as a0,PV as a1,OV as a2,xV as a3,vV as a4,wV as a5,IV as a6,mV as a7,SV as a8,CV as a9,G8 as aA,zs as aB,gf as aC,Qr as aD,F8 as aE,Fs as aF,L2 as aG,t0 as aH,Bu as aI,B8 as aJ,y0 as aK,W8 as aL,Vx as aM,N8 as aN,Na as aO,P8 as aP,Zm as aQ,pv as aR,Ym as aS,bO as aT,Qu as aU,hs as aV,bV as aa,kV as ab,TV as ac,yV as ad,EV as ae,rV as af,RV as ag,zV as ah,NV as ai,DV as aj,U8 as ak,Mp as al,FV as am,HV as an,j8 as ao,jV as ap,v8 as aq,D8 as ar,UV as as,$V as at,BV as au,VV as av,KP as aw,R8 as ax,GE as ay,C8 as az,K8 as b,H8 as c,kc as d,k8 as e,L8 as f,eo as g,S8 as h,xE as i,O8 as j,z8 as k,Y8 as l,X8 as m,Ty as n,mE as o,$8 as p,YP as q,I8 as r,Wi as s,E8 as t,q8 as u,J8 as v,tP as w,Xy as x,h5 as y,Zd as z};
