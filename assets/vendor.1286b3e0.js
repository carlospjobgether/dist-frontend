var ck=Object.defineProperty,uk=Object.defineProperties;var hk=Object.getOwnPropertyDescriptors;var kb=Object.getOwnPropertySymbols;var fk=Object.prototype.hasOwnProperty,dk=Object.prototype.propertyIsEnumerable;var Lb=(t,n,l)=>n in t?ck(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,rn=(t,n)=>{for(var l in n||(n={}))fk.call(n,l)&&Lb(t,l,n[l]);if(kb)for(var l of kb(n))dk.call(n,l)&&Lb(t,l,n[l]);return t},Su=(t,n)=>uk(t,hk(n));function bc(t,n){const l=Object.create(null),h=t.split(",");for(let _=0;_<h.length;_++)l[h[_]]=!0;return n?_=>!!l[_.toLowerCase()]:_=>!!l[_]}const pk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mk=bc(pk);function Pb(t){return!!t||t===""}function cy(t){if(Wn(t)){const n={};for(let l=0;l<t.length;l++){const h=t[l],_=yr(h)?yk(h):cy(h);if(_)for(const g in _)n[g]=_[g]}return n}else{if(yr(t))return t;if(Qi(t))return t}}const _k=/;(?![^(]*\))/g,gk=/:(.+)/;function yk(t){const n={};return t.split(_k).forEach(l=>{if(l){const h=l.split(gk);h.length>1&&(n[h[0].trim()]=h[1].trim())}}),n}function uy(t){let n="";if(yr(t))n=t;else if(Wn(t))for(let l=0;l<t.length;l++){const h=uy(t[l]);h&&(n+=h+" ")}else if(Qi(t))for(const l in t)t[l]&&(n+=l+" ");return n.trim()}const vk="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",xk="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",bk=bc(vk),wk=bc(xk),MU=t=>t==null?"":Wn(t)||Qi(t)&&(t.toString===Nb||!qn(t.toString))?JSON.stringify(t,Db,2):String(t),Db=(t,n)=>n&&n.__v_isRef?Db(t,n.value):Cu(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((l,[h,_])=>(l[`${h} =>`]=_,l),{})}:Rb(n)?{[`Set(${n.size})`]:[...n.values()]}:Qi(n)&&!Wn(n)&&!Bb(n)?String(n):n,Si=Object.freeze({}),rf=Object.freeze([]),Wo=()=>{},Ob=()=>!1,Ek=/^on[^a-z]/,zd=t=>Ek.test(t),_m=t=>t.startsWith("onUpdate:"),Ar=Object.assign,zb=(t,n)=>{const l=t.indexOf(n);l>-1&&t.splice(l,1)},Tk=Object.prototype.hasOwnProperty,mi=(t,n)=>Tk.call(t,n),Wn=Array.isArray,Cu=t=>gm(t)==="[object Map]",Rb=t=>gm(t)==="[object Set]",qn=t=>typeof t=="function",yr=t=>typeof t=="string",hy=t=>typeof t=="symbol",Qi=t=>t!==null&&typeof t=="object",fy=t=>Qi(t)&&qn(t.then)&&qn(t.catch),Nb=Object.prototype.toString,gm=t=>Nb.call(t),dy=t=>gm(t).slice(8,-1),Bb=t=>gm(t)==="[object Object]",py=t=>yr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ym=bc(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vm=t=>{const n=Object.create(null);return l=>n[l]||(n[l]=t(l))},Ak=/-(\w)/g,Da=vm(t=>t.replace(Ak,(n,l)=>l?l.toUpperCase():"")),Sk=/\B([A-Z])/g,wc=vm(t=>t.replace(Sk,"-$1").toLowerCase()),Iu=vm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mu=vm(t=>t?`on${Iu(t)}`:""),Rd=(t,n)=>!Object.is(t,n),of=(t,n)=>{for(let l=0;l<t.length;l++)t[l](n)},xm=(t,n,l)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:l})},my=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let Fb;const $b=()=>Fb||(Fb=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Ck(t,...n){console.warn(`[Vue warn] ${t}`,...n)}let ku;const bm=[];class Ik{constructor(n=!1){this.active=!0,this.effects=[],this.cleanups=[],!n&&ku&&(this.parent=ku,this.index=(ku.scopes||(ku.scopes=[])).push(this)-1)}run(n){if(this.active)try{return this.on(),n()}finally{this.off()}else Ck("cannot run an inactive effect scope.")}on(){this.active&&(bm.push(this),ku=this)}off(){this.active&&(bm.pop(),ku=bm[bm.length-1])}stop(n){if(this.active){if(this.effects.forEach(l=>l.stop()),this.cleanups.forEach(l=>l()),this.scopes&&this.scopes.forEach(l=>l.stop(!0)),this.parent&&!n){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.active=!1}}}function Mk(t,n){n=n||ku,n&&n.active&&n.effects.push(t)}const _y=t=>{const n=new Set(t);return n.w=0,n.n=0,n},Ub=t=>(t.w&Ec)>0,jb=t=>(t.n&Ec)>0,kk=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Ec},Lk=t=>{const{deps:n}=t;if(n.length){let l=0;for(let h=0;h<n.length;h++){const _=n[h];Ub(_)&&!jb(_)?_.delete(t):n[l++]=_,_.w&=~Ec,_.n&=~Ec}n.length=l}},gy=new WeakMap;let Nd=0,Ec=1;const yy=30,Bd=[];let Ks;const Lu=Symbol("iterate"),vy=Symbol("Map key iterate");class xy{constructor(n,l=null,h){this.fn=n,this.scheduler=l,this.active=!0,this.deps=[],Mk(this,h)}run(){if(!this.active)return this.fn();if(!Bd.includes(this))try{return Bd.push(Ks=this),Pk(),Ec=1<<++Nd,Nd<=yy?kk(this):Vb(this),this.fn()}finally{Nd<=yy&&Lk(this),Ec=1<<--Nd,Tc(),Bd.pop();const n=Bd.length;Ks=n>0?Bd[n-1]:void 0}}stop(){this.active&&(Vb(this),this.onStop&&this.onStop(),this.active=!1)}}function Vb(t){const{deps:n}=t;if(n.length){for(let l=0;l<n.length;l++)n[l].delete(t);n.length=0}}let sf=!0;const by=[];function Pu(){by.push(sf),sf=!1}function Pk(){by.push(sf),sf=!0}function Tc(){const t=by.pop();sf=t===void 0?!0:t}function ls(t,n,l){if(!Gb())return;let h=gy.get(t);h||gy.set(t,h=new Map);let _=h.get(l);_||h.set(l,_=_y()),Hb(_,{effect:Ks,target:t,type:n,key:l})}function Gb(){return sf&&Ks!==void 0}function Hb(t,n){let l=!1;Nd<=yy?jb(t)||(t.n|=Ec,l=!Ub(t)):l=!t.has(Ks),l&&(t.add(Ks),Ks.deps.push(t),Ks.onTrack&&Ks.onTrack(Object.assign({effect:Ks},n)))}function _l(t,n,l,h,_,g){const w=gy.get(t);if(!w)return;let s=[];if(n==="clear")s=[...w.values()];else if(l==="length"&&Wn(t))w.forEach((O,k)=>{(k==="length"||k>=h)&&s.push(O)});else switch(l!==void 0&&s.push(w.get(l)),n){case"add":Wn(t)?py(l)&&s.push(w.get("length")):(s.push(w.get(Lu)),Cu(t)&&s.push(w.get(vy)));break;case"delete":Wn(t)||(s.push(w.get(Lu)),Cu(t)&&s.push(w.get(vy)));break;case"set":Cu(t)&&s.push(w.get(Lu));break}const C={target:t,type:n,key:l,newValue:h,oldValue:_,oldTarget:g};if(s.length===1)s[0]&&wy(s[0],C);else{const O=[];for(const k of s)k&&O.push(...k);wy(_y(O),C)}}function wy(t,n){for(const l of Wn(t)?t:[...t])(l!==Ks||l.allowRecurse)&&(l.onTrigger&&l.onTrigger(Ar({effect:l},n)),l.scheduler?l.scheduler():l.run())}const Dk=bc("__proto__,__v_isRef,__isVue"),Wb=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(hy)),Ok=wm(),zk=wm(!1,!0),Rk=wm(!0),Nk=wm(!0,!0),qb=Bk();function Bk(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...l){const h=ai(this);for(let g=0,w=this.length;g<w;g++)ls(h,"get",g+"");const _=h[n](...l);return _===-1||_===!1?h[n](...l.map(ai)):_}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...l){Pu();const h=ai(this)[n].apply(this,l);return Tc(),h}}),t}function wm(t=!1,n=!1){return function(h,_,g){if(_==="__v_isReactive")return!t;if(_==="__v_isReadonly")return t;if(_==="__v_raw"&&g===(t?n?ow:rw:n?iw:nw).get(h))return h;const w=Wn(h);if(!t&&w&&mi(qb,_))return Reflect.get(qb,_,g);const s=Reflect.get(h,_,g);return(hy(_)?Wb.has(_):Dk(_))||(t||ls(h,"get",_),n)?s:Qr(s)?!w||!py(_)?s.value:s:Qi(s)?t?sw(s):af(s):s}}const Fk=Zb(),$k=Zb(!0);function Zb(t=!1){return function(l,h,_,g){let w=l[h];if(!t&&(_=ai(_),w=ai(w),!Wn(l)&&Qr(w)&&!Qr(_)))return w.value=_,!0;const s=Wn(l)&&py(h)?Number(h)<l.length:mi(l,h),C=Reflect.set(l,h,_,g);return l===ai(g)&&(s?Rd(_,w)&&_l(l,"set",h,_,w):_l(l,"add",h,_)),C}}function Uk(t,n){const l=mi(t,n),h=t[n],_=Reflect.deleteProperty(t,n);return _&&l&&_l(t,"delete",n,void 0,h),_}function jk(t,n){const l=Reflect.has(t,n);return(!hy(n)||!Wb.has(n))&&ls(t,"has",n),l}function Vk(t){return ls(t,"iterate",Wn(t)?"length":Lu),Reflect.ownKeys(t)}const Xb={get:Ok,set:Fk,deleteProperty:Uk,has:jk,ownKeys:Vk},Yb={get:Rk,set(t,n){return console.warn(`Set operation on key "${String(n)}" failed: target is readonly.`,t),!0},deleteProperty(t,n){return console.warn(`Delete operation on key "${String(n)}" failed: target is readonly.`,t),!0}},Gk=Ar({},Xb,{get:zk,set:$k}),Hk=Ar({},Yb,{get:Nk}),Ey=t=>t,Em=t=>Reflect.getPrototypeOf(t);function Tm(t,n,l=!1,h=!1){t=t.__v_raw;const _=ai(t),g=ai(n);n!==g&&!l&&ls(_,"get",n),!l&&ls(_,"get",g);const{has:w}=Em(_),s=h?Ey:l?Ay:Fd;if(w.call(_,n))return s(t.get(n));if(w.call(_,g))return s(t.get(g));t!==_&&t.get(n)}function Am(t,n=!1){const l=this.__v_raw,h=ai(l),_=ai(t);return t!==_&&!n&&ls(h,"has",t),!n&&ls(h,"has",_),t===_?l.has(t):l.has(t)||l.has(_)}function Sm(t,n=!1){return t=t.__v_raw,!n&&ls(ai(t),"iterate",Lu),Reflect.get(t,"size",t)}function Kb(t){t=ai(t);const n=ai(this);return Em(n).has.call(n,t)||(n.add(t),_l(n,"add",t,t)),this}function Jb(t,n){n=ai(n);const l=ai(this),{has:h,get:_}=Em(l);let g=h.call(l,t);g?tw(l,h,t):(t=ai(t),g=h.call(l,t));const w=_.call(l,t);return l.set(t,n),g?Rd(n,w)&&_l(l,"set",t,n,w):_l(l,"add",t,n),this}function Qb(t){const n=ai(this),{has:l,get:h}=Em(n);let _=l.call(n,t);_?tw(n,l,t):(t=ai(t),_=l.call(n,t));const g=h?h.call(n,t):void 0,w=n.delete(t);return _&&_l(n,"delete",t,void 0,g),w}function ew(){const t=ai(this),n=t.size!==0,l=Cu(t)?new Map(t):new Set(t),h=t.clear();return n&&_l(t,"clear",void 0,void 0,l),h}function Cm(t,n){return function(h,_){const g=this,w=g.__v_raw,s=ai(w),C=n?Ey:t?Ay:Fd;return!t&&ls(s,"iterate",Lu),w.forEach((O,k)=>h.call(_,C(O),C(k),g))}}function Im(t,n,l){return function(...h){const _=this.__v_raw,g=ai(_),w=Cu(g),s=t==="entries"||t===Symbol.iterator&&w,C=t==="keys"&&w,O=_[t](...h),k=l?Ey:n?Ay:Fd;return!n&&ls(g,"iterate",C?vy:Lu),{next(){const{value:D,done:F}=O.next();return F?{value:D,done:F}:{value:s?[k(D[0]),k(D[1])]:k(D),done:F}},[Symbol.iterator](){return this}}}}function Ac(t){return function(...n){{const l=n[0]?`on key "${n[0]}" `:"";console.warn(`${Iu(t)} operation ${l}failed: target is readonly.`,ai(this))}return t==="delete"?!1:this}}function Wk(){const t={get(g){return Tm(this,g)},get size(){return Sm(this)},has:Am,add:Kb,set:Jb,delete:Qb,clear:ew,forEach:Cm(!1,!1)},n={get(g){return Tm(this,g,!1,!0)},get size(){return Sm(this)},has:Am,add:Kb,set:Jb,delete:Qb,clear:ew,forEach:Cm(!1,!0)},l={get(g){return Tm(this,g,!0)},get size(){return Sm(this,!0)},has(g){return Am.call(this,g,!0)},add:Ac("add"),set:Ac("set"),delete:Ac("delete"),clear:Ac("clear"),forEach:Cm(!0,!1)},h={get(g){return Tm(this,g,!0,!0)},get size(){return Sm(this,!0)},has(g){return Am.call(this,g,!0)},add:Ac("add"),set:Ac("set"),delete:Ac("delete"),clear:Ac("clear"),forEach:Cm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{t[g]=Im(g,!1,!1),l[g]=Im(g,!0,!1),n[g]=Im(g,!1,!0),h[g]=Im(g,!0,!0)}),[t,l,n,h]}const[qk,Zk,Xk,Yk]=Wk();function Mm(t,n){const l=n?t?Yk:Xk:t?Zk:qk;return(h,_,g)=>_==="__v_isReactive"?!t:_==="__v_isReadonly"?t:_==="__v_raw"?h:Reflect.get(mi(l,_)&&_ in h?l:h,_,g)}const Kk={get:Mm(!1,!1)},Jk={get:Mm(!1,!0)},Qk={get:Mm(!0,!1)},eL={get:Mm(!0,!0)};function tw(t,n,l){const h=ai(l);if(h!==l&&n.call(t,h)){const _=dy(t);console.warn(`Reactive ${_} contains both the raw and reactive versions of the same object${_==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const nw=new WeakMap,iw=new WeakMap,rw=new WeakMap,ow=new WeakMap;function tL(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nL(t){return t.__v_skip||!Object.isExtensible(t)?0:tL(dy(t))}function af(t){return t&&t.__v_isReadonly?t:km(t,!1,Xb,Kk,nw)}function iL(t){return km(t,!1,Gk,Jk,iw)}function sw(t){return km(t,!0,Yb,Qk,rw)}function lf(t){return km(t,!0,Hk,eL,ow)}function km(t,n,l,h,_){if(!Qi(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(n&&t.__v_isReactive))return t;const g=_.get(t);if(g)return g;const w=nL(t);if(w===0)return t;const s=new Proxy(t,w===2?h:l);return _.set(t,s),s}function Du(t){return Lm(t)?Du(t.__v_raw):!!(t&&t.__v_isReactive)}function Lm(t){return!!(t&&t.__v_isReadonly)}function Ty(t){return Du(t)||Lm(t)}function ai(t){const n=t&&t.__v_raw;return n?ai(n):t}function aw(t){return xm(t,"__v_skip",!0),t}const Fd=t=>Qi(t)?af(t):t,Ay=t=>Qi(t)?sw(t):t;function lw(t){Gb()&&(t=ai(t),t.dep||(t.dep=_y()),Hb(t.dep,{target:t,type:"get",key:"value"}))}function cw(t,n){t=ai(t),t.dep&&wy(t.dep,{target:t,type:"set",key:"value",newValue:n})}function Qr(t){return Boolean(t&&t.__v_isRef===!0)}function cf(t){return uw(t,!1)}function rL(t){return uw(t,!0)}function uw(t,n){return Qr(t)?t:new oL(t,n)}class oL{constructor(n,l){this._shallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?n:ai(n),this._value=l?n:Fd(n)}get value(){return lw(this),this._value}set value(n){n=this._shallow?n:ai(n),Rd(n,this._rawValue)&&(this._rawValue=n,this._value=this._shallow?n:Fd(n),cw(this,n))}}function $d(t){return Qr(t)?t.value:t}const sL={get:(t,n,l)=>$d(Reflect.get(t,n,l)),set:(t,n,l,h)=>{const _=t[n];return Qr(_)&&!Qr(l)?(_.value=l,!0):Reflect.set(t,n,l,h)}};function hw(t){return Du(t)?t:new Proxy(t,sL)}class aL{constructor(n,l,h){this._setter=l,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new xy(n,()=>{this._dirty||(this._dirty=!0,cw(this))}),this.__v_isReadonly=h}get value(){const n=ai(this);return lw(n),n._dirty&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function Hi(t,n){let l,h;const _=qn(t);_?(l=t,h=()=>{console.warn("Write operation failed: computed value is readonly")}):(l=t.get,h=t.set);const g=new aL(l,h,_||!h);return n&&(g.effect.onTrack=n.onTrack,g.effect.onTrigger=n.onTrigger),g}Promise.resolve();let Ou=!1;const uf=new Set;$b().__VUE_HMR_RUNTIME__={createRecord:Sy(fw),rerender:Sy(uL),reload:Sy(hL)};const zu=new Map;function lL(t){const n=t.type.__hmrId;let l=zu.get(n);l||(fw(n,t.type),l=zu.get(n)),l.instances.add(t)}function cL(t){zu.get(t.type.__hmrId).instances.delete(t)}function fw(t,n){return zu.has(t)?!1:(zu.set(t,{initialDef:Ud(n),instances:new Set}),!0)}function Ud(t){return iE(t)?t.__vccOpts:t}function uL(t,n){const l=zu.get(t);!l||(l.initialDef.render=n,[...l.instances].forEach(h=>{n&&(h.render=n,Ud(h.type).render=n),h.renderCache=[],Ou=!0,h.update(),Ou=!1}))}function hL(t,n){const l=zu.get(t);if(!l)return;n=Ud(n),dw(l.initialDef,n);const h=[...l.instances];for(const _ of h){const g=Ud(_.type);uf.has(g)||(g!==l.initialDef&&dw(g,n),uf.add(g)),_.appContext.optionsCache.delete(_.type),_.ceReload?(uf.add(g),_.ceReload(n.styles),uf.delete(g)):_.parent?(Jy(_.parent.update),_.parent.type.__asyncLoader&&_.parent.ceReload&&_.parent.ceReload(n.styles)):_.appContext.reload?_.appContext.reload():typeof window!="undefined"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}lE(()=>{for(const _ of h)uf.delete(Ud(_.type))})}function dw(t,n){Ar(t,n);for(const l in t)l!=="__file"&&!(l in n)&&delete t[l]}function Sy(t){return(n,l)=>{try{return t(n,l)}catch(h){console.error(h),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Ru,jd=[],Cy=!1;function Vd(t,...n){Ru?Ru.emit(t,...n):Cy||jd.push({event:t,args:n})}function pw(t,n){Ru=t,Ru?(Ru.enabled=!0,jd.forEach(({event:l,args:h})=>Ru.emit(l,...h)),jd=[]):typeof window!="undefined"&&!navigator.userAgent.includes("jsdom")?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(h=>{pw(h,n)}),setTimeout(()=>{Ru||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Cy=!0,jd=[])},3e3)):(Cy=!0,jd=[])}function fL(t,n){Vd("app:init",t,n,{Fragment:qo,Text:hf,Comment:us,Static:Gd})}function dL(t){Vd("app:unmount",t)}const pL=Iy("component:added"),mw=Iy("component:updated"),mL=Iy("component:removed");function Iy(t){return n=>{Vd(t,n.appContext.app,n.uid,n.parent?n.parent.uid:void 0,n)}}const _L=_w("perf:start"),gL=_w("perf:end");function _w(t){return(n,l,h)=>{Vd(t,n.appContext.app,n.uid,n,l,h)}}function yL(t,n,l){Vd("component:emit",t.appContext.app,t,n,l)}function vL(t,n,...l){const h=t.vnode.props||Si;{const{emitsOptions:k,propsOptions:[D]}=t;if(k)if(!(n in k))(!D||!(Mu(n)in D))&&Qt(`Component emitted event "${n}" but it is neither declared in the emits option nor as an "${Mu(n)}" prop.`);else{const F=k[n];qn(F)&&(F(...l)||Qt(`Invalid event arguments: event validation failed for event "${n}".`))}}let _=l;const g=n.startsWith("update:"),w=g&&n.slice(7);if(w&&w in h){const k=`${w==="modelValue"?"model":w}Modifiers`,{number:D,trim:F}=h[k]||Si;F?_=l.map(K=>K.trim()):D&&(_=l.map(my))}yL(t,n,_);{const k=n.toLowerCase();k!==n&&h[Mu(k)]&&Qt(`Event "${k}" is emitted in component ${Hm(t,t.type)} but the handler is registered for "${n}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${wc(n)}" instead of "${n}".`)}let s,C=h[s=Mu(n)]||h[s=Mu(Da(n))];!C&&g&&(C=h[s=Mu(wc(n))]),C&&Qs(C,t,6,_);const O=h[s+"Once"];if(O){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Qs(O,t,6,_)}}function gw(t,n,l=!1){const h=n.emitsCache,_=h.get(t);if(_!==void 0)return _;const g=t.emits;let w={},s=!1;if(!qn(t)){const C=O=>{const k=gw(O,n,!0);k&&(s=!0,Ar(w,k))};!l&&n.mixins.length&&n.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}return!g&&!s?(h.set(t,null),null):(Wn(g)?g.forEach(C=>w[C]=null):Ar(w,g),h.set(t,w),w)}function My(t,n){return!t||!zd(n)?!1:(n=n.slice(2).replace(/Once$/,""),mi(t,n[0].toLowerCase()+n.slice(1))||mi(t,wc(n))||mi(t,n))}let Ao=null,Pm=null;function Dm(t){const n=Ao;return Ao=t,Pm=t&&t.type.__scopeId||null,n}function kU(t){Pm=t}function LU(){Pm=null}function xL(t,n=Ao,l){if(!n||t._n)return t;const h=(..._)=>{h._d&&Ww(-1);const g=Dm(n),w=t(..._);return Dm(g),h._d&&Ww(1),mw(n),w};return h._n=!0,h._c=!0,h._d=!0,h}let ky=!1;function Om(){ky=!0}function Ly(t){const{type:n,vnode:l,proxy:h,withProxy:_,props:g,propsOptions:[w],slots:s,attrs:C,emit:O,render:k,renderCache:D,data:F,setupState:K,ctx:Se,inheritAttrs:pe}=t;let J,H;const te=Dm(t);ky=!1;try{if(l.shapeFlag&4){const Ae=_||h;J=Js(k.call(Ae,Ae,D,g,K,F,Se)),H=C}else{const Ae=n;C===g&&Om(),J=Js(Ae.length>1?Ae(g,{get attrs(){return Om(),C},slots:s,emit:O}):Ae(g,null)),H=n.props?C:wL(C)}}catch(Ae){Hd.length=0,Zm(Ae,t,1),J=eo(us)}let ge=J,ke;if(J.patchFlag>0&&J.patchFlag&2048&&([ge,ke]=bL(J)),H&&pe!==!1){const Ae=Object.keys(H),{shapeFlag:Pe}=ge;if(Ae.length){if(Pe&(1|6))w&&Ae.some(_m)&&(H=EL(H,w)),ge=Uu(ge,H);else if(!ky&&ge.type!==us){const Qe=Object.keys(C),wt=[],nt=[];for(let Ee=0,Xe=Qe.length;Ee<Xe;Ee++){const ot=Qe[Ee];zd(ot)?_m(ot)||wt.push(ot[2].toLowerCase()+ot.slice(3)):nt.push(ot)}nt.length&&Qt(`Extraneous non-props attributes (${nt.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),wt.length&&Qt(`Extraneous non-emits event listeners (${wt.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return l.dirs&&(vw(ge)||Qt("Runtime directive used on component with non-element root node. The directives will not function as intended."),ge.dirs=ge.dirs?ge.dirs.concat(l.dirs):l.dirs),l.transition&&(vw(ge)||Qt("Component inside <Transition> renders non-element root node that cannot be animated."),ge.transition=l.transition),ke?ke(ge):J=ge,Dm(te),J}const bL=t=>{const n=t.children,l=t.dynamicChildren,h=yw(n);if(!h)return[t,void 0];const _=n.indexOf(h),g=l?l.indexOf(h):-1,w=s=>{n[_]=s,l&&(g>-1?l[g]=s:s.patchFlag>0&&(t.dynamicChildren=[...l,s]))};return[Js(h),w]};function yw(t){let n;for(let l=0;l<t.length;l++){const h=t[l];if(ff(h)){if(h.type!==us||h.children==="v-if"){if(n)return;n=h}}else return}return n}const wL=t=>{let n;for(const l in t)(l==="class"||l==="style"||zd(l))&&((n||(n={}))[l]=t[l]);return n},EL=(t,n)=>{const l={};for(const h in t)(!_m(h)||!(h.slice(9)in n))&&(l[h]=t[h]);return l},vw=t=>t.shapeFlag&(6|1)||t.type===us;function TL(t,n,l){const{props:h,children:_,component:g}=t,{props:w,children:s,patchFlag:C}=n,O=g.emitsOptions;if((_||s)&&Ou||n.dirs||n.transition)return!0;if(l&&C>=0){if(C&1024)return!0;if(C&16)return h?xw(h,w,O):!!w;if(C&8){const k=n.dynamicProps;for(let D=0;D<k.length;D++){const F=k[D];if(w[F]!==h[F]&&!My(O,F))return!0}}}else return(_||s)&&(!s||!s.$stable)?!0:h===w?!1:h?w?xw(h,w,O):!0:!!w;return!1}function xw(t,n,l){const h=Object.keys(n);if(h.length!==Object.keys(t).length)return!0;for(let _=0;_<h.length;_++){const g=h[_];if(n[g]!==t[g]&&!My(l,g))return!0}return!1}function AL({vnode:t,parent:n},l){for(;n&&n.subTree===t;)(t=n.vnode).el=l,n=n.parent}const SL=t=>t.__isSuspense;function CL(t,n){n&&n.pendingBranch?Wn(t)?n.effects.push(...t):n.effects.push(t):lE(t)}function zm(t,n){if(!Lr)Qt("provide() can only be used inside setup().");else{let l=Lr.provides;const h=Lr.parent&&Lr.parent.provides;h===l&&(l=Lr.provides=Object.create(h)),l[t]=n}}function cs(t,n,l=!1){const h=Lr||Ao;if(h){const _=h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides;if(_&&t in _)return _[t];if(arguments.length>1)return l&&qn(n)?n.call(h.proxy):n;Qt(`injection "${String(t)}" not found.`)}else Qt("inject() can only be used inside setup() or functional components.")}function Sc(t){return qn(t)?{setup:t,name:t.name}:t}const Py=t=>!!t.type.__asyncLoader,Dy=t=>t.type.__isKeepAlive;function bw(t,n){Ew(t,"a",n)}function ww(t,n){Ew(t,"da",n)}function Ew(t,n,l=Lr){const h=t.__wdc||(t.__wdc=()=>{let _=l;for(;_;){if(_.isDeactivated)return;_=_.parent}t()});if(Rm(n,h,l),l){let _=l.parent;for(;_&&_.parent;)Dy(_.parent.vnode)&&IL(h,n,l,_),_=_.parent}}function IL(t,n,l,h){const _=Rm(n,t,h,!0);Nm(()=>{zb(h[n],_)},l)}function Rm(t,n,l=Lr,h=!1){if(l){const _=l[t]||(l[t]=[]),g=n.__weh||(n.__weh=(...w)=>{if(l.isUnmounted)return;Pu(),pf(l);const s=Qs(n,l,t,w);return ju(),Tc(),s});return h?_.unshift(g):_.push(g),g}else{const _=Mu(qy[t].replace(/ hook$/,""));Qt(`${_} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const gl=t=>(n,l=Lr)=>(!Gm||t==="sp")&&Rm(t,n,l),ML=gl("bm"),Tw=gl("m"),kL=gl("bu"),LL=gl("u"),PL=gl("bum"),Nm=gl("um"),DL=gl("sp"),OL=gl("rtg"),zL=gl("rtc");function RL(t,n=Lr){Rm("ec",t,n)}function NL(){const t=Object.create(null);return(n,l)=>{t[l]?Qt(`${n} property "${l}" is already defined in ${t[l]}.`):t[l]=n}}let Oy=!0;function BL(t){const n=Cw(t),l=t.proxy,h=t.ctx;Oy=!1,n.beforeCreate&&Aw(n.beforeCreate,t,"bc");const{data:_,computed:g,methods:w,watch:s,provide:C,inject:O,created:k,beforeMount:D,mounted:F,beforeUpdate:K,updated:Se,activated:pe,deactivated:J,beforeDestroy:H,beforeUnmount:te,destroyed:ge,unmounted:ke,render:Ae,renderTracked:Pe,renderTriggered:Qe,errorCaptured:wt,serverPrefetch:nt,expose:Ee,inheritAttrs:Xe,components:ot,directives:Be,filters:ve}=n,He=NL();{const[Ye]=t.propsOptions;if(Ye)for(const ht in Ye)He("Props",ht)}if(O&&FL(O,h,He,t.appContext.config.unwrapInjectedRef),w)for(const Ye in w){const ht=w[Ye];qn(ht)?(Object.defineProperty(h,Ye,{value:ht.bind(l),configurable:!0,enumerable:!0,writable:!0}),He("Methods",Ye)):Qt(`Method "${Ye}" has type "${typeof ht}" in the component definition. Did you reference the function correctly?`)}if(_){qn(_)||Qt("The data option must be a function. Plain object usage is no longer supported.");const Ye=_.call(l,l);if(fy(Ye)&&Qt("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Qi(Ye))Qt("data() should return an object.");else{t.data=af(Ye);for(const ht in Ye)He("Data",ht),ht[0]!=="$"&&ht[0]!=="_"&&Object.defineProperty(h,ht,{configurable:!0,enumerable:!0,get:()=>Ye[ht],set:Wo})}}if(Oy=!0,g)for(const Ye in g){const ht=g[Ye],lt=qn(ht)?ht.bind(l,l):qn(ht.get)?ht.get.bind(l,l):Wo;lt===Wo&&Qt(`Computed property "${Ye}" has no getter.`);const Ut=!qn(ht)&&qn(ht.set)?ht.set.bind(l):()=>{Qt(`Write operation failed: computed property "${Ye}" is readonly.`)},qe=Hi({get:lt,set:Ut});Object.defineProperty(h,Ye,{enumerable:!0,configurable:!0,get:()=>qe.value,set:hn=>qe.value=hn}),He("Computed",Ye)}if(s)for(const Ye in s)Sw(s[Ye],h,l,Ye);if(C){const Ye=qn(C)?C.call(l):C;Reflect.ownKeys(Ye).forEach(ht=>{zm(ht,Ye[ht])})}k&&Aw(k,t,"c");function ct(Ye,ht){Wn(ht)?ht.forEach(lt=>Ye(lt.bind(l))):ht&&Ye(ht.bind(l))}if(ct(ML,D),ct(Tw,F),ct(kL,K),ct(LL,Se),ct(bw,pe),ct(ww,J),ct(RL,wt),ct(zL,Pe),ct(OL,Qe),ct(PL,te),ct(Nm,ke),ct(DL,nt),Wn(Ee))if(Ee.length){const Ye=t.exposed||(t.exposed={});Ee.forEach(ht=>{Object.defineProperty(Ye,ht,{get:()=>l[ht],set:lt=>l[ht]=lt})})}else t.exposed||(t.exposed={});Ae&&t.render===Wo&&(t.render=Ae),Xe!=null&&(t.inheritAttrs=Xe),ot&&(t.components=ot),Be&&(t.directives=Be)}function FL(t,n,l=Wo,h=!1){Wn(t)&&(t=zy(t));for(const _ in t){const g=t[_];let w;Qi(g)?"default"in g?w=cs(g.from||_,g.default,!0):w=cs(g.from||_):w=cs(g),Qr(w)?h?Object.defineProperty(n,_,{enumerable:!0,configurable:!0,get:()=>w.value,set:s=>w.value=s}):(Qt(`injected property "${_}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),n[_]=w):n[_]=w,l("Inject",_)}}function Aw(t,n,l){Qs(Wn(t)?t.map(h=>h.bind(n.proxy)):t.bind(n.proxy),n,l)}function Sw(t,n,l,h){const _=h.includes(".")?fE(l,h):()=>l[h];if(yr(t)){const g=n[t];qn(g)?za(_,g):Qt(`Invalid watch handler specified by key "${t}"`,g)}else if(qn(t))za(_,t.bind(l));else if(Qi(t))if(Wn(t))t.forEach(g=>Sw(g,n,l,h));else{const g=qn(t.handler)?t.handler.bind(l):n[t.handler];qn(g)?za(_,g,t):Qt(`Invalid watch handler specified by key "${t.handler}"`,g)}else Qt(`Invalid watch option: "${h}"`,t)}function Cw(t){const n=t.type,{mixins:l,extends:h}=n,{mixins:_,optionsCache:g,config:{optionMergeStrategies:w}}=t.appContext,s=g.get(n);let C;return s?C=s:!_.length&&!l&&!h?C=n:(C={},_.length&&_.forEach(O=>Bm(C,O,w,!0)),Bm(C,n,w)),g.set(n,C),C}function Bm(t,n,l,h=!1){const{mixins:_,extends:g}=n;g&&Bm(t,g,l,!0),_&&_.forEach(w=>Bm(t,w,l,!0));for(const w in n)if(h&&w==="expose")Qt('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const s=$L[w]||l&&l[w];t[w]=s?s(t[w],n[w]):n[w]}return t}const $L={data:Iw,props:Nu,emits:Nu,methods:Nu,computed:Nu,beforeCreate:So,created:So,beforeMount:So,mounted:So,beforeUpdate:So,updated:So,beforeDestroy:So,beforeUnmount:So,destroyed:So,unmounted:So,activated:So,deactivated:So,errorCaptured:So,serverPrefetch:So,components:Nu,directives:Nu,watch:jL,provide:Iw,inject:UL};function Iw(t,n){return n?t?function(){return Ar(qn(t)?t.call(this,this):t,qn(n)?n.call(this,this):n)}:n:t}function UL(t,n){return Nu(zy(t),zy(n))}function zy(t){if(Wn(t)){const n={};for(let l=0;l<t.length;l++)n[t[l]]=t[l];return n}return t}function So(t,n){return t?[...new Set([].concat(t,n))]:n}function Nu(t,n){return t?Ar(Ar(Object.create(null),t),n):n}function jL(t,n){if(!t)return n;if(!n)return t;const l=Ar(Object.create(null),t);for(const h in n)l[h]=So(t[h],n[h]);return l}function VL(t,n,l,h=!1){const _={},g={};xm(g,jm,1),t.propsDefaults=Object.create(null),Mw(t,n,_,g);for(const w in t.propsOptions[0])w in _||(_[w]=void 0);Ow(n||{},_,t),l?t.props=h?_:iL(_):t.type.props?t.props=_:t.props=g,t.attrs=g}function GL(t,n,l,h){const{props:_,attrs:g,vnode:{patchFlag:w}}=t,s=ai(_),[C]=t.propsOptions;let O=!1;if(!(t.type.__hmrId||t.parent&&t.parent.type.__hmrId)&&(h||w>0)&&!(w&16)){if(w&8){const k=t.vnode.dynamicProps;for(let D=0;D<k.length;D++){let F=k[D];const K=n[F];if(C)if(mi(g,F))K!==g[F]&&(g[F]=K,O=!0);else{const Se=Da(F);_[Se]=Ry(C,s,Se,K,t,!1)}else K!==g[F]&&(g[F]=K,O=!0)}}}else{Mw(t,n,_,g)&&(O=!0);let k;for(const D in s)(!n||!mi(n,D)&&((k=wc(D))===D||!mi(n,k)))&&(C?l&&(l[D]!==void 0||l[k]!==void 0)&&(_[D]=Ry(C,s,D,void 0,t,!0)):delete _[D]);if(g!==s)for(const D in g)(!n||!mi(n,D))&&(delete g[D],O=!0)}O&&_l(t,"set","$attrs"),Ow(n||{},_,t)}function Mw(t,n,l,h){const[_,g]=t.propsOptions;let w=!1,s;if(n)for(let C in n){if(ym(C))continue;const O=n[C];let k;_&&mi(_,k=Da(C))?!g||!g.includes(k)?l[k]=O:(s||(s={}))[k]=O:My(t.emitsOptions,C)||O!==h[C]&&(h[C]=O,w=!0)}if(g){const C=ai(l),O=s||Si;for(let k=0;k<g.length;k++){const D=g[k];l[D]=Ry(_,C,D,O[D],t,!mi(O,D))}}return w}function Ry(t,n,l,h,_,g){const w=t[l];if(w!=null){const s=mi(w,"default");if(s&&h===void 0){const C=w.default;if(w.type!==Function&&qn(C)){const{propsDefaults:O}=_;l in O?h=O[l]:(pf(_),h=O[l]=C.call(null,n),ju())}else h=C}w[0]&&(g&&!s?h=!1:w[1]&&(h===""||h===wc(l))&&(h=!0))}return h}function kw(t,n,l=!1){const h=n.propsCache,_=h.get(t);if(_)return _;const g=t.props,w={},s=[];let C=!1;if(!qn(t)){const k=D=>{C=!0;const[F,K]=kw(D,n,!0);Ar(w,F),K&&s.push(...K)};!l&&n.mixins.length&&n.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}if(!g&&!C)return h.set(t,rf),rf;if(Wn(g))for(let k=0;k<g.length;k++){yr(g[k])||Qt("props must be strings when using array syntax.",g[k]);const D=Da(g[k]);Lw(D)&&(w[D]=Si)}else if(g){Qi(g)||Qt("invalid props options",g);for(const k in g){const D=Da(k);if(Lw(D)){const F=g[k],K=w[D]=Wn(F)||qn(F)?{type:F}:F;if(K){const Se=Dw(Boolean,K.type),pe=Dw(String,K.type);K[0]=Se>-1,K[1]=pe<0||Se<pe,(Se>-1||mi(K,"default"))&&s.push(D)}}}}const O=[w,s];return h.set(t,O),O}function Lw(t){return t[0]!=="$"?!0:(Qt(`Invalid prop name: "${t}" is a reserved property.`),!1)}function Ny(t){const n=t&&t.toString().match(/^\s*function (\w+)/);return n?n[1]:t===null?"null":""}function Pw(t,n){return Ny(t)===Ny(n)}function Dw(t,n){return Wn(n)?n.findIndex(l=>Pw(l,t)):qn(n)&&Pw(n,t)?0:-1}function Ow(t,n,l){const h=ai(n),_=l.propsOptions[0];for(const g in _){let w=_[g];w!=null&&HL(g,h[g],w,!mi(t,g)&&!mi(t,wc(g)))}}function HL(t,n,l,h){const{type:_,required:g,validator:w}=l;if(g&&h){Qt('Missing required prop: "'+t+'"');return}if(!(n==null&&!l.required)){if(_!=null&&_!==!0){let s=!1;const C=Wn(_)?_:[_],O=[];for(let k=0;k<C.length&&!s;k++){const{valid:D,expectedType:F}=qL(n,C[k]);O.push(F||""),s=D}if(!s){Qt(ZL(t,n,O));return}}w&&!w(n)&&Qt('Invalid prop: custom validator check failed for prop "'+t+'".')}}const WL=bc("String,Number,Boolean,Function,Symbol,BigInt");function qL(t,n){let l;const h=Ny(n);if(WL(h)){const _=typeof t;l=_===h.toLowerCase(),!l&&_==="object"&&(l=t instanceof n)}else h==="Object"?l=Qi(t):h==="Array"?l=Wn(t):h==="null"?l=t===null:l=t instanceof n;return{valid:l,expectedType:h}}function ZL(t,n,l){let h=`Invalid prop: type check failed for prop "${t}". Expected ${l.map(Iu).join(" | ")}`;const _=l[0],g=dy(n),w=zw(n,_),s=zw(n,g);return l.length===1&&Rw(_)&&!XL(_,g)&&(h+=` with value ${w}`),h+=`, got ${g} `,Rw(g)&&(h+=`with value ${s}.`),h}function zw(t,n){return n==="String"?`"${t}"`:n==="Number"?`${Number(t)}`:`${t}`}function Rw(t){return["string","number","boolean"].some(l=>t.toLowerCase()===l)}function XL(...t){return t.some(n=>n.toLowerCase()==="boolean")}const Nw=t=>t[0]==="_"||t==="$stable",By=t=>Wn(t)?t.map(Js):[Js(t)],YL=(t,n,l)=>{const h=xL((..._)=>(Lr&&Qt(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),By(n(..._))),l);return h._c=!1,h},Bw=(t,n,l)=>{const h=t._ctx;for(const _ in t){if(Nw(_))continue;const g=t[_];if(qn(g))n[_]=YL(_,g,h);else if(g!=null){Qt(`Non-function value encountered for slot "${_}". Prefer function slots for better performance.`);const w=By(g);n[_]=()=>w}}},Fw=(t,n)=>{Dy(t.vnode)||Qt("Non-function value encountered for default slot. Prefer function slots for better performance.");const l=By(n);t.slots.default=()=>l},KL=(t,n)=>{if(t.vnode.shapeFlag&32){const l=n._;l?(t.slots=ai(n),xm(n,"_",l)):Bw(n,t.slots={})}else t.slots={},n&&Fw(t,n);xm(t.slots,jm,1)},JL=(t,n,l)=>{const{vnode:h,slots:_}=t;let g=!0,w=Si;if(h.shapeFlag&32){const s=n._;s?Ou?Ar(_,n):l&&s===1?g=!1:(Ar(_,n),!l&&s===1&&delete _._):(g=!n.$stable,Bw(n,_)),w=n}else n&&(Fw(t,n),w={default:1});if(g)for(const s in _)!Nw(s)&&!(s in w)&&delete _[s]},QL=bc("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo");function $w(t){QL(t)&&Qt("Do not use built-in directive ids as custom directive id: "+t)}function PU(t,n){const l=Ao;if(l===null)return Qt("withDirectives can only be used inside render functions."),t;const h=l.proxy,_=t.dirs||(t.dirs=[]);for(let g=0;g<n.length;g++){let[w,s,C,O=Si]=n[g];qn(w)&&(w={mounted:w,updated:w}),w.deep&&Wu(s),_.push({dir:w,instance:h,value:s,oldValue:void 0,arg:C,modifiers:O})}return t}function Bu(t,n,l,h){const _=t.dirs,g=n&&n.dirs;for(let w=0;w<_.length;w++){const s=_[w];g&&(s.oldValue=g[w].value);let C=s.dir[h];C&&(Pu(),Qs(C,l,8,[t.el,s,t,n]),Tc())}}function Uw(){return{app:null,config:{isNativeTag:Ob,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eP=0;function tP(t,n){return function(h,_=null){_!=null&&!Qi(_)&&(Qt("root props passed to app.mount() must be an object."),_=null);const g=Uw(),w=new Set;let s=!1;const C=g.app={_uid:eP++,_component:h,_props:_,_container:null,_context:g,_instance:null,version:dE,get config(){return g.config},set config(O){Qt("app.config cannot be replaced. Modify individual options instead.")},use(O,...k){return w.has(O)?Qt("Plugin has already been applied to target app."):O&&qn(O.install)?(w.add(O),O.install(C,...k)):qn(O)?(w.add(O),O(C,...k)):Qt('A plugin must either be a function or an object with an "install" function.'),C},mixin(O){return g.mixins.includes(O)?Qt("Mixin has already been applied to target app"+(O.name?`: ${O.name}`:"")):g.mixins.push(O),C},component(O,k){return Vy(O,g.config),k?(g.components[O]&&Qt(`Component "${O}" has already been registered in target app.`),g.components[O]=k,C):g.components[O]},directive(O,k){return $w(O),k?(g.directives[O]&&Qt(`Directive "${O}" has already been registered in target app.`),g.directives[O]=k,C):g.directives[O]},mount(O,k,D){if(s)Qt("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{const F=eo(h,_);return F.appContext=g,g.reload=()=>{t(Uu(F),O,D)},k&&n?n(F,O):t(F,O,D),s=!0,C._container=O,O.__vue_app__=C,C._instance=F.component,fL(C,dE),Hy(F.component)||F.component.proxy}},unmount(){s?(t(null,C._container),C._instance=null,dL(C),delete C._container.__vue_app__):Qt("Cannot unmount an app that is not mounted.")},provide(O,k){return O in g.provides&&Qt(`App already provides property with key "${String(O)}". It will be overwritten with the new value.`),g.provides[O]=k,C}};return C}}let Fu,Cc;function yl(t,n){t.appContext.config.performance&&jw()&&Cc.mark(`vue-${n}-${t.uid}`),_L(t,n,Fu?Cc.now():Date.now())}function vl(t,n){if(t.appContext.config.performance&&jw()){const l=`vue-${n}-${t.uid}`,h=l+":end";Cc.mark(h),Cc.measure(`<${Hm(t,t.type)}> ${n}`,l,h),Cc.clearMarks(l),Cc.clearMarks(h)}gL(t,n,Fu?Cc.now():Date.now())}function jw(){return Fu!==void 0||(typeof window!="undefined"&&window.performance?(Fu=!0,Cc=window.performance):Fu=!1),Fu}function nP(){const t=[];if(t.length){const n=t.length>1;console.warn(`Feature flag${n?"s":""} ${t.join(", ")} ${n?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see http://link.vuejs.org/feature-flags.`)}}const Co=CL;function iP(t){return rP(t)}function rP(t,n){nP();const l=$b();l.__VUE__=!0,pw(l.__VUE_DEVTOOLS_GLOBAL_HOOK__,l);const{insert:h,remove:_,patchProp:g,createElement:w,createText:s,createComment:C,setText:O,setElementText:k,parentNode:D,nextSibling:F,setScopeId:K=Wo,cloneNode:Se,insertStaticContent:pe}=t,J=(ee,_e,We,Ze=null,pt=null,St=null,jt=!1,Ct=null,yt=Ou?!1:!!_e.dynamicChildren)=>{if(ee===_e)return;ee&&!Wd(ee,_e)&&(Ze=sn(ee),dn(ee,pt,St,!0),ee=null),_e.patchFlag===-2&&(yt=!1,_e.dynamicChildren=null);const{type:Ie,ref:Ke,shapeFlag:Vt}=_e;switch(Ie){case hf:H(ee,_e,We,Ze);break;case us:te(ee,_e,We,Ze);break;case Gd:ee==null?ge(_e,We,Ze,jt):ke(ee,_e,We,jt);break;case qo:ve(ee,_e,We,Ze,pt,St,jt,Ct,yt);break;default:Vt&1?Qe(ee,_e,We,Ze,pt,St,jt,Ct,yt):Vt&6?He(ee,_e,We,Ze,pt,St,jt,Ct,yt):Vt&64||Vt&128?Ie.process(ee,_e,We,Ze,pt,St,jt,Ct,yt,me):Qt("Invalid VNode type:",Ie,`(${typeof Ie})`)}Ke!=null&&pt&&Fy(Ke,ee&&ee.ref,St,_e||ee,!_e)},H=(ee,_e,We,Ze)=>{if(ee==null)h(_e.el=s(_e.children),We,Ze);else{const pt=_e.el=ee.el;_e.children!==ee.children&&O(pt,_e.children)}},te=(ee,_e,We,Ze)=>{ee==null?h(_e.el=C(_e.children||""),We,Ze):_e.el=ee.el},ge=(ee,_e,We,Ze)=>{[ee.el,ee.anchor]=pe(ee.children,_e,We,Ze)},ke=(ee,_e,We,Ze)=>{if(_e.children!==ee.children){const pt=F(ee.anchor);Pe(ee),[_e.el,_e.anchor]=pe(_e.children,We,pt,Ze)}else _e.el=ee.el,_e.anchor=ee.anchor},Ae=({el:ee,anchor:_e},We,Ze)=>{let pt;for(;ee&&ee!==_e;)pt=F(ee),h(ee,We,Ze),ee=pt;h(_e,We,Ze)},Pe=({el:ee,anchor:_e})=>{let We;for(;ee&&ee!==_e;)We=F(ee),_(ee),ee=We;_(_e)},Qe=(ee,_e,We,Ze,pt,St,jt,Ct,yt)=>{jt=jt||_e.type==="svg",ee==null?wt(_e,We,Ze,pt,St,jt,Ct,yt):Xe(ee,_e,pt,St,jt,Ct,yt)},wt=(ee,_e,We,Ze,pt,St,jt,Ct)=>{let yt,Ie;const{type:Ke,props:Vt,shapeFlag:qt,transition:bn,patchFlag:Tn,dirs:An}=ee;{if(yt=ee.el=w(ee.type,St,Vt&&Vt.is,Vt),qt&8?k(yt,ee.children):qt&16&&Ee(ee.children,yt,null,Ze,pt,St&&Ke!=="foreignObject",jt,Ct),An&&Bu(ee,null,Ze,"created"),Vt){for(const oi in Vt)oi!=="value"&&!ym(oi)&&g(yt,oi,null,Vt[oi],St,ee.children,Ze,pt,Et);"value"in Vt&&g(yt,"value",null,Vt.value),(Ie=Vt.onVnodeBeforeMount)&&Oa(Ie,Ze,ee)}nt(yt,ee,ee.scopeId,jt,Ze)}Object.defineProperty(yt,"__vnode",{value:ee,enumerable:!1}),Object.defineProperty(yt,"__vueParentComponent",{value:Ze,enumerable:!1}),An&&Bu(ee,null,Ze,"beforeMount");const Sn=(!pt||pt&&!pt.pendingBranch)&&bn&&!bn.persisted;Sn&&bn.beforeEnter(yt),h(yt,_e,We),((Ie=Vt&&Vt.onVnodeMounted)||Sn||An)&&Co(()=>{Ie&&Oa(Ie,Ze,ee),Sn&&bn.enter(yt),An&&Bu(ee,null,Ze,"mounted")},pt)},nt=(ee,_e,We,Ze,pt)=>{if(We&&K(ee,We),Ze)for(let St=0;St<Ze.length;St++)K(ee,Ze[St]);if(pt){let St=pt.subTree;if(St.patchFlag>0&&St.patchFlag&2048&&(St=yw(St.children)||St),_e===St){const jt=pt.vnode;nt(ee,jt,jt.scopeId,jt.slotScopeIds,pt.parent)}}},Ee=(ee,_e,We,Ze,pt,St,jt,Ct,yt=0)=>{for(let Ie=yt;Ie<ee.length;Ie++){const Ke=ee[Ie]=Ct?Ic(ee[Ie]):Js(ee[Ie]);J(null,Ke,_e,We,Ze,pt,St,jt,Ct)}},Xe=(ee,_e,We,Ze,pt,St,jt)=>{const Ct=_e.el=ee.el;let{patchFlag:yt,dynamicChildren:Ie,dirs:Ke}=_e;yt|=ee.patchFlag&16;const Vt=ee.props||Si,qt=_e.props||Si;let bn;(bn=qt.onVnodeBeforeUpdate)&&Oa(bn,We,_e,ee),Ke&&Bu(_e,ee,We,"beforeUpdate"),Ou&&(yt=0,jt=!1,Ie=null);const Tn=pt&&_e.type!=="foreignObject";if(Ie?(ot(ee.dynamicChildren,Ie,Ct,We,Ze,Tn,St),We&&We.type.__hmrId&&Fm(ee,_e)):jt||Ut(ee,_e,Ct,null,We,Ze,Tn,St,!1),yt>0){if(yt&16)Be(Ct,_e,Vt,qt,We,Ze,pt);else if(yt&2&&Vt.class!==qt.class&&g(Ct,"class",null,qt.class,pt),yt&4&&g(Ct,"style",Vt.style,qt.style,pt),yt&8){const An=_e.dynamicProps;for(let Sn=0;Sn<An.length;Sn++){const oi=An[Sn],Ci=Vt[oi],lr=qt[oi];(lr!==Ci||oi==="value")&&g(Ct,oi,Ci,lr,pt,ee.children,We,Ze,Et)}}yt&1&&ee.children!==_e.children&&k(Ct,_e.children)}else!jt&&Ie==null&&Be(Ct,_e,Vt,qt,We,Ze,pt);((bn=qt.onVnodeUpdated)||Ke)&&Co(()=>{bn&&Oa(bn,We,_e,ee),Ke&&Bu(_e,ee,We,"updated")},Ze)},ot=(ee,_e,We,Ze,pt,St,jt)=>{for(let Ct=0;Ct<_e.length;Ct++){const yt=ee[Ct],Ie=_e[Ct],Ke=yt.el&&(yt.type===qo||!Wd(yt,Ie)||yt.shapeFlag&(6|64))?D(yt.el):We;J(yt,Ie,Ke,null,Ze,pt,St,jt,!0)}},Be=(ee,_e,We,Ze,pt,St,jt)=>{if(We!==Ze){for(const Ct in Ze){if(ym(Ct))continue;const yt=Ze[Ct],Ie=We[Ct];yt!==Ie&&Ct!=="value"&&g(ee,Ct,Ie,yt,jt,_e.children,pt,St,Et)}if(We!==Si)for(const Ct in We)!ym(Ct)&&!(Ct in Ze)&&g(ee,Ct,We[Ct],null,jt,_e.children,pt,St,Et);"value"in Ze&&g(ee,"value",We.value,Ze.value)}},ve=(ee,_e,We,Ze,pt,St,jt,Ct,yt)=>{const Ie=_e.el=ee?ee.el:s(""),Ke=_e.anchor=ee?ee.anchor:s("");let{patchFlag:Vt,dynamicChildren:qt,slotScopeIds:bn}=_e;Ou&&(Vt=0,yt=!1,qt=null),bn&&(Ct=Ct?Ct.concat(bn):bn),ee==null?(h(Ie,We,Ze),h(Ke,We,Ze),Ee(_e.children,We,Ke,pt,St,jt,Ct,yt)):Vt>0&&Vt&64&&qt&&ee.dynamicChildren?(ot(ee.dynamicChildren,qt,We,pt,St,jt,Ct),pt&&pt.type.__hmrId?Fm(ee,_e):(_e.key!=null||pt&&_e===pt.subTree)&&Fm(ee,_e,!0)):Ut(ee,_e,We,Ke,pt,St,jt,Ct,yt)},He=(ee,_e,We,Ze,pt,St,jt,Ct,yt)=>{_e.slotScopeIds=Ct,ee==null?_e.shapeFlag&512?pt.ctx.activate(_e,We,Ze,jt,yt):ct(_e,We,Ze,pt,St,jt,yt):Ye(ee,_e,yt)},ct=(ee,_e,We,Ze,pt,St,jt)=>{const Ct=ee.component=vP(ee,Ze,pt);if(Ct.type.__hmrId&&lL(Ct),Wm(ee),yl(Ct,"mount"),Dy(ee)&&(Ct.ctx.renderer=me),yl(Ct,"init"),bP(Ct),vl(Ct,"init"),Ct.asyncDep){if(pt&&pt.registerDep(Ct,ht),!ee.el){const yt=Ct.subTree=eo(us);te(null,yt,_e,We)}return}ht(Ct,ee,_e,We,pt,St,jt),qm(),vl(Ct,"mount")},Ye=(ee,_e,We)=>{const Ze=_e.component=ee.component;if(TL(ee,_e,We))if(Ze.asyncDep&&!Ze.asyncResolved){Wm(_e),lt(Ze,_e,We),qm();return}else Ze.next=_e,zP(Ze.update),Ze.update();else _e.component=ee.component,_e.el=ee.el,Ze.vnode=_e},ht=(ee,_e,We,Ze,pt,St,jt)=>{const Ct=()=>{if(ee.isMounted){let{next:Ke,bu:Vt,u:qt,parent:bn,vnode:Tn}=ee,An=Ke,Sn;Wm(Ke||ee.vnode),yt.allowRecurse=!1,Ke?(Ke.el=Tn.el,lt(ee,Ke,jt)):Ke=Tn,Vt&&of(Vt),(Sn=Ke.props&&Ke.props.onVnodeBeforeUpdate)&&Oa(Sn,bn,Ke,Tn),yt.allowRecurse=!0,yl(ee,"render");const oi=Ly(ee);vl(ee,"render");const Ci=ee.subTree;ee.subTree=oi,yl(ee,"patch"),J(Ci,oi,D(Ci.el),sn(Ci),ee,pt,St),vl(ee,"patch"),Ke.el=oi.el,An===null&&AL(ee,oi.el),qt&&Co(qt,pt),(Sn=Ke.props&&Ke.props.onVnodeUpdated)&&Co(()=>Oa(Sn,bn,Ke,Tn),pt),mw(ee),qm()}else{let Ke;const{el:Vt,props:qt}=_e,{bm:bn,m:Tn,parent:An}=ee,Sn=Py(_e);if(yt.allowRecurse=!1,bn&&of(bn),!Sn&&(Ke=qt&&qt.onVnodeBeforeMount)&&Oa(Ke,An,_e),yt.allowRecurse=!0,Vt&&rt){const oi=()=>{yl(ee,"render"),ee.subTree=Ly(ee),vl(ee,"render"),yl(ee,"hydrate"),rt(Vt,ee.subTree,ee,pt,null),vl(ee,"hydrate")};Sn?_e.type.__asyncLoader().then(()=>!ee.isUnmounted&&oi()):oi()}else{yl(ee,"render");const oi=ee.subTree=Ly(ee);vl(ee,"render"),yl(ee,"patch"),J(null,oi,We,Ze,ee,pt,St),vl(ee,"patch"),_e.el=oi.el}if(Tn&&Co(Tn,pt),!Sn&&(Ke=qt&&qt.onVnodeMounted)){const oi=_e;Co(()=>Oa(Ke,An,oi),pt)}_e.shapeFlag&256&&ee.a&&Co(ee.a,pt),ee.isMounted=!0,pL(ee),_e=We=Ze=null}},yt=new xy(Ct,()=>Jy(ee.update),ee.scope),Ie=ee.update=yt.run.bind(yt);Ie.id=ee.uid,yt.allowRecurse=Ie.allowRecurse=!0,yt.onTrack=ee.rtc?Ke=>of(ee.rtc,Ke):void 0,yt.onTrigger=ee.rtg?Ke=>of(ee.rtg,Ke):void 0,Ie.ownerInstance=ee,Ie()},lt=(ee,_e,We)=>{_e.component=ee;const Ze=ee.vnode.props;ee.vnode=_e,ee.next=null,GL(ee,_e.props,Ze,We),JL(ee,_e.children,We),Pu(),Qy(void 0,ee.update),Tc()},Ut=(ee,_e,We,Ze,pt,St,jt,Ct,yt=!1)=>{const Ie=ee&&ee.children,Ke=ee?ee.shapeFlag:0,Vt=_e.children,{patchFlag:qt,shapeFlag:bn}=_e;if(qt>0){if(qt&128){hn(Ie,Vt,We,Ze,pt,St,jt,Ct,yt);return}else if(qt&256){qe(Ie,Vt,We,Ze,pt,St,jt,Ct,yt);return}}bn&8?(Ke&16&&Et(Ie,pt,St),Vt!==Ie&&k(We,Vt)):Ke&16?bn&16?hn(Ie,Vt,We,Ze,pt,St,jt,Ct,yt):Et(Ie,pt,St,!0):(Ke&8&&k(We,""),bn&16&&Ee(Vt,We,Ze,pt,St,jt,Ct,yt))},qe=(ee,_e,We,Ze,pt,St,jt,Ct,yt)=>{ee=ee||rf,_e=_e||rf;const Ie=ee.length,Ke=_e.length,Vt=Math.min(Ie,Ke);let qt;for(qt=0;qt<Vt;qt++){const bn=_e[qt]=yt?Ic(_e[qt]):Js(_e[qt]);J(ee[qt],bn,We,null,pt,St,jt,Ct,yt)}Ie>Ke?Et(ee,pt,St,!0,!1,Vt):Ee(_e,We,Ze,pt,St,jt,Ct,yt,Vt)},hn=(ee,_e,We,Ze,pt,St,jt,Ct,yt)=>{let Ie=0;const Ke=_e.length;let Vt=ee.length-1,qt=Ke-1;for(;Ie<=Vt&&Ie<=qt;){const bn=ee[Ie],Tn=_e[Ie]=yt?Ic(_e[Ie]):Js(_e[Ie]);if(Wd(bn,Tn))J(bn,Tn,We,null,pt,St,jt,Ct,yt);else break;Ie++}for(;Ie<=Vt&&Ie<=qt;){const bn=ee[Vt],Tn=_e[qt]=yt?Ic(_e[qt]):Js(_e[qt]);if(Wd(bn,Tn))J(bn,Tn,We,null,pt,St,jt,Ct,yt);else break;Vt--,qt--}if(Ie>Vt){if(Ie<=qt){const bn=qt+1,Tn=bn<Ke?_e[bn].el:Ze;for(;Ie<=qt;)J(null,_e[Ie]=yt?Ic(_e[Ie]):Js(_e[Ie]),We,Tn,pt,St,jt,Ct,yt),Ie++}}else if(Ie>qt)for(;Ie<=Vt;)dn(ee[Ie],pt,St,!0),Ie++;else{const bn=Ie,Tn=Ie,An=new Map;for(Ie=Tn;Ie<=qt;Ie++){const ti=_e[Ie]=yt?Ic(_e[Ie]):Js(_e[Ie]);ti.key!=null&&(An.has(ti.key)&&Qt("Duplicate keys found during update:",JSON.stringify(ti.key),"Make sure keys are unique."),An.set(ti.key,Ie))}let Sn,oi=0;const Ci=qt-Tn+1;let lr=!1,vr=0;const Ti=new Array(Ci);for(Ie=0;Ie<Ci;Ie++)Ti[Ie]=0;for(Ie=bn;Ie<=Vt;Ie++){const ti=ee[Ie];if(oi>=Ci){dn(ti,pt,St,!0);continue}let gi;if(ti.key!=null)gi=An.get(ti.key);else for(Sn=Tn;Sn<=qt;Sn++)if(Ti[Sn-Tn]===0&&Wd(ti,_e[Sn])){gi=Sn;break}gi===void 0?dn(ti,pt,St,!0):(Ti[gi-Tn]=Ie+1,gi>=vr?vr=gi:lr=!0,J(ti,_e[gi],We,null,pt,St,jt,Ct,yt),oi++)}const $i=lr?oP(Ti):rf;for(Sn=$i.length-1,Ie=Ci-1;Ie>=0;Ie--){const ti=Tn+Ie,gi=_e[ti],Cr=ti+1<Ke?_e[ti+1].el:Ze;Ti[Ie]===0?J(null,gi,We,Cr,pt,St,jt,Ct,yt):lr&&(Sn<0||Ie!==$i[Sn]?Gt(gi,We,Cr,2):Sn--)}}},Gt=(ee,_e,We,Ze,pt=null)=>{const{el:St,type:jt,transition:Ct,children:yt,shapeFlag:Ie}=ee;if(Ie&6){Gt(ee.component.subTree,_e,We,Ze);return}if(Ie&128){ee.suspense.move(_e,We,Ze);return}if(Ie&64){jt.move(ee,_e,We,me);return}if(jt===qo){h(St,_e,We);for(let Vt=0;Vt<yt.length;Vt++)Gt(yt[Vt],_e,We,Ze);h(ee.anchor,_e,We);return}if(jt===Gd){Ae(ee,_e,We);return}if(Ze!==2&&Ie&1&&Ct)if(Ze===0)Ct.beforeEnter(St),h(St,_e,We),Co(()=>Ct.enter(St),pt);else{const{leave:Vt,delayLeave:qt,afterLeave:bn}=Ct,Tn=()=>h(St,_e,We),An=()=>{Vt(St,()=>{Tn(),bn&&bn()})};qt?qt(St,Tn,An):An()}else h(St,_e,We)},dn=(ee,_e,We,Ze=!1,pt=!1)=>{const{type:St,props:jt,ref:Ct,children:yt,dynamicChildren:Ie,shapeFlag:Ke,patchFlag:Vt,dirs:qt}=ee;if(Ct!=null&&Fy(Ct,null,We,ee,!0),Ke&256){_e.ctx.deactivate(ee);return}const bn=Ke&1&&qt,Tn=!Py(ee);let An;if(Tn&&(An=jt&&jt.onVnodeBeforeUnmount)&&Oa(An,_e,ee),Ke&6)kt(ee.component,We,Ze);else{if(Ke&128){ee.suspense.unmount(We,Ze);return}bn&&Bu(ee,null,_e,"beforeUnmount"),Ke&64?ee.type.remove(ee,_e,We,pt,me,Ze):Ie&&(St!==qo||Vt>0&&Vt&64)?Et(Ie,_e,We,!1,!0):(St===qo&&Vt&(128|256)||!pt&&Ke&16)&&Et(yt,_e,We),Ze&&Fe(ee)}(Tn&&(An=jt&&jt.onVnodeUnmounted)||bn)&&Co(()=>{An&&Oa(An,_e,ee),bn&&Bu(ee,null,_e,"unmounted")},We)},Fe=ee=>{const{type:_e,el:We,anchor:Ze,transition:pt}=ee;if(_e===qo){bt(We,Ze);return}if(_e===Gd){Pe(ee);return}const St=()=>{_(We),pt&&!pt.persisted&&pt.afterLeave&&pt.afterLeave()};if(ee.shapeFlag&1&&pt&&!pt.persisted){const{leave:jt,delayLeave:Ct}=pt,yt=()=>jt(We,St);Ct?Ct(ee.el,St,yt):yt()}else St()},bt=(ee,_e)=>{let We;for(;ee!==_e;)We=F(ee),_(ee),ee=We;_(_e)},kt=(ee,_e,We)=>{ee.type.__hmrId&&cL(ee);const{bum:Ze,scope:pt,update:St,subTree:jt,um:Ct}=ee;Ze&&of(Ze),pt.stop(),St&&(St.active=!1,dn(jt,ee,_e,We)),Ct&&Co(Ct,_e),Co(()=>{ee.isUnmounted=!0},_e),_e&&_e.pendingBranch&&!_e.isUnmounted&&ee.asyncDep&&!ee.asyncResolved&&ee.suspenseId===_e.pendingId&&(_e.deps--,_e.deps===0&&_e.resolve()),mL(ee)},Et=(ee,_e,We,Ze=!1,pt=!1,St=0)=>{for(let jt=St;jt<ee.length;jt++)dn(ee[jt],_e,We,Ze,pt)},sn=ee=>ee.shapeFlag&6?sn(ee.component.subTree):ee.shapeFlag&128?ee.suspense.next():F(ee.anchor||ee.el),En=(ee,_e,We)=>{ee==null?_e._vnode&&dn(_e._vnode,null,null,!0):J(_e._vnode||null,ee,_e,null,null,null,We),cE(),_e._vnode=ee},me={p:J,um:dn,m:Gt,r:Fe,mt:ct,mc:Ee,pc:Ut,pbc:ot,n:sn,o:t};let oe,rt;return n&&([oe,rt]=n(me)),{render:En,hydrate:oe,createApp:tP(En,oe)}}function Fy(t,n,l,h,_=!1){if(Wn(t)){t.forEach((F,K)=>Fy(F,n&&(Wn(n)?n[K]:n),l,h,_));return}if(Py(h)&&!_)return;const g=h.shapeFlag&4?Hy(h.component)||h.component.proxy:h.el,w=_?null:g,{i:s,r:C}=t;if(!s){Qt("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const O=n&&n.r,k=s.refs===Si?s.refs={}:s.refs,D=s.setupState;if(O!=null&&O!==C&&(yr(O)?(k[O]=null,mi(D,O)&&(D[O]=null)):Qr(O)&&(O.value=null)),yr(C)){const F=()=>{k[C]=w,mi(D,C)&&(D[C]=w)};w?(F.id=-1,Co(F,l)):F()}else if(Qr(C)){const F=()=>{C.value=w};w?(F.id=-1,Co(F,l)):F()}else qn(C)?xl(C,s,12,[w,k]):Qt("Invalid template ref type:",w,`(${typeof w})`)}function Oa(t,n,l,h=null){Qs(t,n,7,[l,h])}function Fm(t,n,l=!1){const h=t.children,_=n.children;if(Wn(h)&&Wn(_))for(let g=0;g<h.length;g++){const w=h[g];let s=_[g];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=_[g]=Ic(_[g]),s.el=w.el),l||Fm(w,s)),s.type===us&&!s.el&&(s.el=w.el)}}function oP(t){const n=t.slice(),l=[0];let h,_,g,w,s;const C=t.length;for(h=0;h<C;h++){const O=t[h];if(O!==0){if(_=l[l.length-1],t[_]<O){n[h]=_,l.push(h);continue}for(g=0,w=l.length-1;g<w;)s=g+w>>1,t[l[s]]<O?g=s+1:w=s;O<t[l[g]]&&(g>0&&(n[h]=l[g-1]),l[g]=h)}}for(g=l.length,w=l[g-1];g-- >0;)l[g]=w,w=n[w];return l}const sP=t=>t.__isTeleport,$m="components",aP="directives";function DU(t,n){return $y($m,t,!0,n)||t}const Vw=Symbol();function OU(t){return yr(t)?$y($m,t,!1)||t:t||Vw}function zU(t){return $y(aP,t)}function $y(t,n,l=!0,h=!1){const _=Ao||Lr;if(_){const g=_.type;if(t===$m){const s=Wy(g);if(s&&(s===n||s===Da(n)||s===Iu(Da(n))))return g}const w=Gw(_[t]||g[t],n)||Gw(_.appContext[t],n);if(!w&&h)return g;if(l&&!w){const s=t===$m?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";Qt(`Failed to resolve ${t.slice(0,-1)}: ${n}${s}`)}return w}else Qt(`resolve${Iu(t.slice(0,-1))} can only be used in render() or setup().`)}function Gw(t,n){return t&&(t[n]||t[Da(n)]||t[Iu(Da(n))])}const qo=Symbol("Fragment"),hf=Symbol("Text"),us=Symbol("Comment"),Gd=Symbol("Static"),Hd=[];let $u=null;function Hw(t=!1){Hd.push($u=t?null:[])}function lP(){Hd.pop(),$u=Hd[Hd.length-1]||null}let Um=1;function Ww(t){Um+=t}function qw(t){return t.dynamicChildren=Um>0?$u||rf:null,lP(),Um>0&&$u&&$u.push(t),t}function RU(t,n,l,h,_,g){return qw(Yw(t,n,l,h,_,g,!0))}function Zw(t,n,l,h,_){return qw(eo(t,n,l,h,_,!0))}function ff(t){return t?t.__v_isVNode===!0:!1}function Wd(t,n){return n.shapeFlag&6&&uf.has(n.type)?!1:t.type===n.type&&t.key===n.key}const cP=(...t)=>uP(...t),jm="__vInternal",Xw=({key:t})=>t!=null?t:null,Vm=({ref:t})=>t!=null?yr(t)||Qr(t)||qn(t)?{i:Ao,r:t}:t:null;function Yw(t,n=null,l=null,h=0,_=null,g=t===qo?0:1,w=!1,s=!1){const C={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Xw(n),ref:n&&Vm(n),scopeId:Pm,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:h,dynamicProps:_,dynamicChildren:null,appContext:null};return s?(Uy(C,l),g&128&&t.normalize(C)):l&&(C.shapeFlag|=yr(l)?8:16),C.key!==C.key&&Qt("VNode created with invalid key (NaN). VNode type:",C.type),Um>0&&!w&&$u&&(C.patchFlag>0||g&6)&&C.patchFlag!==32&&$u.push(C),C}const eo=cP;function uP(t,n=null,l=null,h=0,_=null,g=!1){if((!t||t===Vw)&&(t||Qt(`Invalid vnode type when creating vnode: ${t}.`),t=us),ff(t)){const s=Uu(t,n,!0);return l&&Uy(s,l),s}if(iE(t)&&(t=t.__vccOpts),n){n=hP(n);let{class:s,style:C}=n;s&&!yr(s)&&(n.class=uy(s)),Qi(C)&&(Ty(C)&&!Wn(C)&&(C=Ar({},C)),n.style=cy(C))}const w=yr(t)?1:SL(t)?128:sP(t)?64:Qi(t)?4:qn(t)?2:0;return w&4&&Ty(t)&&(t=ai(t),Qt("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Yw(t,n,l,h,_,w,g,!0)}function hP(t){return t?Ty(t)||jm in t?Ar({},t):t:null}function Uu(t,n,l=!1){const{props:h,ref:_,patchFlag:g,children:w}=t,s=n?dP(h||{},n):h;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&Xw(s),ref:n&&n.ref?l&&_?Wn(_)?_.concat(Vm(n)):[_,Vm(n)]:Vm(n):_,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:g===-1&&Wn(w)?w.map(Kw):w,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==qo?g===-1?16:g|16:g,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Uu(t.ssContent),ssFallback:t.ssFallback&&Uu(t.ssFallback),el:t.el,anchor:t.anchor}}function Kw(t){const n=Uu(t);return Wn(t.children)&&(n.children=t.children.map(Kw)),n}function fP(t=" ",n=0){return eo(hf,null,t,n)}function NU(t,n){const l=eo(Gd,null,t);return l.staticCount=n,l}function BU(t="",n=!1){return n?(Hw(),Zw(us,null,t)):eo(us,null,t)}function Js(t){return t==null||typeof t=="boolean"?eo(us):Wn(t)?eo(qo,null,t.slice()):typeof t=="object"?Ic(t):eo(hf,null,String(t))}function Ic(t){return t.el===null||t.memo?t:Uu(t)}function Uy(t,n){let l=0;const{shapeFlag:h}=t;if(n==null)n=null;else if(Wn(n))l=16;else if(typeof n=="object")if(h&(1|64)){const _=n.default;_&&(_._c&&(_._d=!1),Uy(t,_()),_._c&&(_._d=!0));return}else{l=32;const _=n._;!_&&!(jm in n)?n._ctx=Ao:_===3&&Ao&&(Ao.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else qn(n)?(n={default:n,_ctx:Ao},l=32):(n=String(n),h&64?(l=16,n=[fP(n)]):l=8);t.children=n,t.shapeFlag|=l}function dP(...t){const n={};for(let l=0;l<t.length;l++){const h=t[l];for(const _ in h)if(_==="class")n.class!==h.class&&(n.class=uy([n.class,h.class]));else if(_==="style")n.style=cy([n.style,h.style]);else if(zd(_)){const g=n[_],w=h[_];g!==w&&(n[_]=g?[].concat(g,w):w)}else _!==""&&(n[_]=h[_])}return n}function FU(t,n,l,h){let _;const g=l&&l[h];if(Wn(t)||yr(t)){_=new Array(t.length);for(let w=0,s=t.length;w<s;w++)_[w]=n(t[w],w,void 0,g&&g[w])}else if(typeof t=="number"){if(!Number.isInteger(t))return Qt(`The v-for range expect an integer value but got ${t}.`),[];_=new Array(t);for(let w=0;w<t;w++)_[w]=n(w+1,w,void 0,g&&g[w])}else if(Qi(t))if(t[Symbol.iterator])_=Array.from(t,(w,s)=>n(w,s,void 0,g&&g[s]));else{const w=Object.keys(t);_=new Array(w.length);for(let s=0,C=w.length;s<C;s++){const O=w[s];_[s]=n(t[O],O,s,g&&g[s])}}else _=[];return l&&(l[h]=_),_}function $U(t,n,l={},h,_){if(Ao.isCE)return eo("slot",n==="default"?null:{name:n},h&&h());let g=t[n];g&&g.length>1&&(Qt("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),g=()=>[]),g&&g._c&&(g._d=!1),Hw();const w=g&&Jw(g(l)),s=Zw(qo,{key:l.key||`_${n}`},w||(h?h():[]),w&&t._===1?64:-2);return!_&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),g&&g._c&&(g._d=!0),s}function Jw(t){return t.some(n=>ff(n)?!(n.type===us||n.type===qo&&!Jw(n.children)):!0)?t:null}const jy=t=>t?eE(t)?Hy(t)||t.proxy:jy(t.parent):null,df=Ar(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>lf(t.props),$attrs:t=>lf(t.attrs),$slots:t=>lf(t.slots),$refs:t=>lf(t.refs),$parent:t=>jy(t.parent),$root:t=>jy(t.root),$emit:t=>t.emit,$options:t=>Cw(t),$forceUpdate:t=>()=>Jy(t.update),$nextTick:t=>Ky.bind(t.proxy),$watch:t=>BP.bind(t)}),Qw={get({_:t},n){const{ctx:l,setupState:h,data:_,props:g,accessCache:w,type:s,appContext:C}=t;if(n==="__isVue")return!0;if(h!==Si&&h.__isScriptSetup&&mi(h,n))return h[n];let O;if(n[0]!=="$"){const K=w[n];if(K!==void 0)switch(K){case 0:return h[n];case 1:return _[n];case 3:return l[n];case 2:return g[n]}else{if(h!==Si&&mi(h,n))return w[n]=0,h[n];if(_!==Si&&mi(_,n))return w[n]=1,_[n];if((O=t.propsOptions[0])&&mi(O,n))return w[n]=2,g[n];if(l!==Si&&mi(l,n))return w[n]=3,l[n];Oy&&(w[n]=4)}}const k=df[n];let D,F;if(k)return n==="$attrs"&&(ls(t,"get",n),Om()),k(t);if((D=s.__cssModules)&&(D=D[n]))return D;if(l!==Si&&mi(l,n))return w[n]=3,l[n];if(F=C.config.globalProperties,mi(F,n))return F[n];Ao&&(!yr(n)||n.indexOf("__v")!==0)&&(_!==Si&&(n[0]==="$"||n[0]==="_")&&mi(_,n)?Qt(`Property ${JSON.stringify(n)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Ao&&Qt(`Property ${JSON.stringify(n)} was accessed during render but is not defined on instance.`))},set({_:t},n,l){const{data:h,setupState:_,ctx:g}=t;if(_!==Si&&mi(_,n))_[n]=l;else if(h!==Si&&mi(h,n))h[n]=l;else if(mi(t.props,n))return Qt(`Attempting to mutate prop "${n}". Props are readonly.`,t),!1;return n[0]==="$"&&n.slice(1)in t?(Qt(`Attempting to mutate public property "${n}". Properties starting with $ are reserved and readonly.`,t),!1):(n in t.appContext.config.globalProperties?Object.defineProperty(g,n,{enumerable:!0,configurable:!0,value:l}):g[n]=l,!0)},has({_:{data:t,setupState:n,accessCache:l,ctx:h,appContext:_,propsOptions:g}},w){let s;return l[w]!==void 0||t!==Si&&mi(t,w)||n!==Si&&mi(n,w)||(s=g[0])&&mi(s,w)||mi(h,w)||mi(df,w)||mi(_.config.globalProperties,w)}};Qw.ownKeys=t=>(Qt("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t));function pP(t){const n={};return Object.defineProperty(n,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(df).forEach(l=>{Object.defineProperty(n,l,{configurable:!0,enumerable:!1,get:()=>df[l](t),set:Wo})}),n}function mP(t){const{ctx:n,propsOptions:[l]}=t;l&&Object.keys(l).forEach(h=>{Object.defineProperty(n,h,{enumerable:!0,configurable:!0,get:()=>t.props[h],set:Wo})})}function _P(t){const{ctx:n,setupState:l}=t;Object.keys(ai(l)).forEach(h=>{if(!l.__isScriptSetup){if(h[0]==="$"||h[0]==="_"){Qt(`setup() return property ${JSON.stringify(h)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(n,h,{enumerable:!0,configurable:!0,get:()=>l[h],set:Wo})}})}const gP=Uw();let yP=0;function vP(t,n,l){const h=t.type,_=(n?n.appContext:t.appContext)||gP,g={uid:yP++,vnode:t,type:h,parent:n,appContext:_,root:null,next:null,subTree:null,update:null,scope:new Ik(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(_.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kw(h,_),emitsOptions:gw(h,_),emit:null,emitted:null,propsDefaults:Si,inheritAttrs:h.inheritAttrs,ctx:Si,data:Si,props:Si,attrs:Si,slots:Si,refs:Si,setupState:Si,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx=pP(g),g.root=n?n.root:g,g.emit=vL.bind(null,g),t.ce&&t.ce(g),g}let Lr=null;const Mc=()=>Lr||Ao,pf=t=>{Lr=t,t.scope.on()},ju=()=>{Lr&&Lr.scope.off(),Lr=null},xP=bc("slot,component");function Vy(t,n){const l=n.isNativeTag||Ob;(xP(t)||l(t))&&Qt("Do not use built-in or reserved HTML elements as component id: "+t)}function eE(t){return t.vnode.shapeFlag&4}let Gm=!1;function bP(t,n=!1){Gm=n;const{props:l,children:h}=t.vnode,_=eE(t);VL(t,l,_,n),KL(t,h);const g=_?wP(t,n):void 0;return Gm=!1,g}function wP(t,n){const l=t.type;{if(l.name&&Vy(l.name,t.appContext.config),l.components){const _=Object.keys(l.components);for(let g=0;g<_.length;g++)Vy(_[g],t.appContext.config)}if(l.directives){const _=Object.keys(l.directives);for(let g=0;g<_.length;g++)$w(_[g])}l.compilerOptions&&EP()&&Qt('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=aw(new Proxy(t.ctx,Qw)),mP(t);const{setup:h}=l;if(h){const _=t.setupContext=h.length>1?AP(t):null;pf(t),Pu();const g=xl(h,t,0,[lf(t.props),_]);if(Tc(),ju(),fy(g)){if(g.then(ju,ju),n)return g.then(w=>{tE(t,w,n)}).catch(w=>{Zm(w,t,0)});t.asyncDep=g}else tE(t,g,n)}else nE(t,n)}function tE(t,n,l){qn(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Qi(n)?(ff(n)&&Qt("setup() should not return VNodes directly - return a render function instead."),t.devtoolsRawSetupState=n,t.setupState=hw(n),_P(t)):n!==void 0&&Qt(`setup() should return an object. Received: ${n===null?"null":typeof n}`),nE(t,l)}let Gy;const EP=()=>!Gy;function nE(t,n,l){const h=t.type;if(!t.render){if(!n&&Gy&&!h.render){const _=h.template;if(_){yl(t,"compile");const{isCustomElement:g,compilerOptions:w}=t.appContext.config,{delimiters:s,compilerOptions:C}=h,O=Ar(Ar({isCustomElement:g,delimiters:s},w),C);h.render=Gy(_,O),vl(t,"compile")}}t.render=h.render||Wo}pf(t),Pu(),BL(t),Tc(),ju(),!h.render&&t.render===Wo&&!n&&(h.template?Qt('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):Qt("Component is missing template or render function."))}function TP(t){return new Proxy(t.attrs,{get(n,l){return Om(),ls(t,"get","$attrs"),n[l]},set(){return Qt("setupContext.attrs is readonly."),!1},deleteProperty(){return Qt("setupContext.attrs is readonly."),!1}})}function AP(t){const n=h=>{t.exposed&&Qt("expose() should be called only once per setup()."),t.exposed=h||{}};let l;return Object.freeze({get attrs(){return l||(l=TP(t))},get slots(){return lf(t.slots)},get emit(){return(h,..._)=>t.emit(h,..._)},expose:n})}function Hy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hw(aw(t.exposed)),{get(n,l){if(l in n)return n[l];if(l in df)return df[l](t)}}))}const SP=/(?:^|[-_])(\w)/g,CP=t=>t.replace(SP,n=>n.toUpperCase()).replace(/[-_]/g,"");function Wy(t){return qn(t)&&t.displayName||t.name}function Hm(t,n,l=!1){let h=Wy(n);if(!h&&n.__file){const _=n.__file.match(/([^/\\]+)\.\w+$/);_&&(h=_[1])}if(!h&&t&&t.parent){const _=g=>{for(const w in g)if(g[w]===n)return w};h=_(t.components||t.parent.type.components)||_(t.appContext.components)}return h?CP(h):l?"App":"Anonymous"}function iE(t){return qn(t)&&"__vccOpts"in t}const Vu=[];function Wm(t){Vu.push(t)}function qm(){Vu.pop()}function Qt(t,...n){Pu();const l=Vu.length?Vu[Vu.length-1].component:null,h=l&&l.appContext.config.warnHandler,_=IP();if(h)xl(h,l,11,[t+n.join(""),l&&l.proxy,_.map(({vnode:g})=>`at <${Hm(l,g.type)}>`).join(`
`),_]);else{const g=[`[Vue warn]: ${t}`,...n];_.length&&g.push(`
`,...MP(_)),console.warn(...g)}Tc()}function IP(){let t=Vu[Vu.length-1];if(!t)return[];const n=[];for(;t;){const l=n[0];l&&l.vnode===t?l.recurseCount++:n.push({vnode:t,recurseCount:0});const h=t.component&&t.component.parent;t=h&&h.vnode}return n}function MP(t){const n=[];return t.forEach((l,h)=>{n.push(...h===0?[]:[`
`],...kP(l))}),n}function kP({vnode:t,recurseCount:n}){const l=n>0?`... (${n} recursive calls)`:"",h=t.component?t.component.parent==null:!1,_=` at <${Hm(t.component,t.type,h)}`,g=">"+l;return t.props?[_,...LP(t.props),g]:[_+g]}function LP(t){const n=[],l=Object.keys(t);return l.slice(0,3).forEach(h=>{n.push(...rE(h,t[h]))}),l.length>3&&n.push(" ..."),n}function rE(t,n,l){return yr(n)?(n=JSON.stringify(n),l?n:[`${t}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?l?n:[`${t}=${n}`]:Qr(n)?(n=rE(t,ai(n.value),!0),l?n:[`${t}=Ref<`,n,">"]):qn(n)?[`${t}=fn${n.name?`<${n.name}>`:""}`]:(n=ai(n),l?n:[`${t}=`,n])}const qy={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next"};function xl(t,n,l,h){let _;try{_=h?t(...h):t()}catch(g){Zm(g,n,l)}return _}function Qs(t,n,l,h){if(qn(t)){const g=xl(t,n,l,h);return g&&fy(g)&&g.catch(w=>{Zm(w,n,l)}),g}const _=[];for(let g=0;g<t.length;g++)_.push(Qs(t[g],n,l,h));return _}function Zm(t,n,l,h=!0){const _=n?n.vnode:null;if(n){let g=n.parent;const w=n.proxy,s=qy[l];for(;g;){const O=g.ec;if(O){for(let k=0;k<O.length;k++)if(O[k](t,w,s)===!1)return}g=g.parent}const C=n.appContext.config.errorHandler;if(C){xl(C,null,10,[t,w,s]);return}}PP(t,l,_,h)}function PP(t,n,l,h=!0){{const _=qy[n];if(l&&Wm(l),Qt(`Unhandled error${_?` during execution of ${_}`:""}`),l&&qm(),h)throw t;console.error(t)}}let Xm=!1,Zy=!1;const hs=[];let bl=0;const qd=[];let mf=null,Gu=0;const Zd=[];let wl=null,Hu=0;const oE=Promise.resolve();let Xy=null,Yy=null;const DP=100;function Ky(t){const n=Xy||oE;return t?n.then(this?t.bind(this):t):n}function OP(t){let n=bl+1,l=hs.length;for(;n<l;){const h=n+l>>>1;Xd(hs[h])<t?n=h+1:l=h}return n}function Jy(t){(!hs.length||!hs.includes(t,Xm&&t.allowRecurse?bl+1:bl))&&t!==Yy&&(t.id==null?hs.push(t):hs.splice(OP(t.id),0,t),sE())}function sE(){!Xm&&!Zy&&(Zy=!0,Xy=oE.then(uE))}function zP(t){const n=hs.indexOf(t);n>bl&&hs.splice(n,1)}function aE(t,n,l,h){Wn(t)?l.push(...t):(!n||!n.includes(t,t.allowRecurse?h+1:h))&&l.push(t),sE()}function RP(t){aE(t,mf,qd,Gu)}function lE(t){aE(t,wl,Zd,Hu)}function Qy(t,n=null){if(qd.length){for(Yy=n,mf=[...new Set(qd)],qd.length=0,t=t||new Map,Gu=0;Gu<mf.length;Gu++)ev(t,mf[Gu])||mf[Gu]();mf=null,Gu=0,Yy=null,Qy(t,n)}}function cE(t){if(Zd.length){const n=[...new Set(Zd)];if(Zd.length=0,wl){wl.push(...n);return}for(wl=n,t=t||new Map,wl.sort((l,h)=>Xd(l)-Xd(h)),Hu=0;Hu<wl.length;Hu++)ev(t,wl[Hu])||wl[Hu]();wl=null,Hu=0}}const Xd=t=>t.id==null?1/0:t.id;function uE(t){Zy=!1,Xm=!0,t=t||new Map,Qy(t),hs.sort((l,h)=>Xd(l)-Xd(h));const n=l=>ev(t,l);try{for(bl=0;bl<hs.length;bl++){const l=hs[bl];if(l&&l.active!==!1){if(n(l))continue;xl(l,null,14)}}}finally{bl=0,hs.length=0,cE(t),Xm=!1,Xy=null,(hs.length||qd.length||Zd.length)&&uE(t)}}function ev(t,n){if(!t.has(n))t.set(n,1);else{const l=t.get(n);if(l>DP){const h=n.ownerInstance,_=h&&Wy(h.type);return Qt(`Maximum recursive updates exceeded${_?` in component <${_}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(n,l+1)}}function NP(t,n){return tv(t,null,n)}const hE={};function za(t,n,l){return qn(n)||Qt("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),tv(t,n,l)}function tv(t,n,{immediate:l,deep:h,flush:_,onTrack:g,onTrigger:w}=Si){n||(l!==void 0&&Qt('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),h!==void 0&&Qt('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const s=te=>{Qt("Invalid watch source: ",te,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},C=Lr;let O,k=!1,D=!1;if(Qr(t)?(O=()=>t.value,k=!!t._shallow):Du(t)?(O=()=>t,h=!0):Wn(t)?(D=!0,k=t.some(Du),O=()=>t.map(te=>{if(Qr(te))return te.value;if(Du(te))return Wu(te);if(qn(te))return xl(te,C,2);s(te)})):qn(t)?n?O=()=>xl(t,C,2):O=()=>{if(!(C&&C.isUnmounted))return F&&F(),Qs(t,C,3,[K])}:(O=Wo,s(t)),n&&h){const te=O;O=()=>Wu(te())}let F,K=te=>{F=H.onStop=()=>{xl(te,C,4)}};if(Gm)return K=Wo,n?l&&Qs(n,C,3,[O(),D?[]:void 0,K]):O(),Wo;let Se=D?[]:hE;const pe=()=>{if(!!H.active)if(n){const te=H.run();(h||k||(D?te.some((ge,ke)=>Rd(ge,Se[ke])):Rd(te,Se)))&&(F&&F(),Qs(n,C,3,[te,Se===hE?void 0:Se,K]),Se=te)}else H.run()};pe.allowRecurse=!!n;let J;_==="sync"?J=pe:_==="post"?J=()=>Co(pe,C&&C.suspense):J=()=>{!C||C.isMounted?RP(pe):pe()};const H=new xy(O,J);return H.onTrack=g,H.onTrigger=w,n?l?pe():Se=H.run():_==="post"?Co(H.run.bind(H),C&&C.suspense):H.run(),()=>{H.stop(),C&&C.scope&&zb(C.scope.effects,H)}}function BP(t,n,l){const h=this.proxy,_=yr(t)?t.includes(".")?fE(h,t):()=>h[t]:t.bind(h,h);let g;qn(n)?g=n:(g=n.handler,l=n);const w=Lr;pf(this);const s=tv(_,g.bind(h),l);return w?pf(w):ju(),s}function fE(t,n){const l=n.split(".");return()=>{let h=t;for(let _=0;_<l.length&&h;_++)h=h[l[_]];return h}}function Wu(t,n){if(!Qi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Qr(t))Wu(t.value,n);else if(Wn(t))for(let l=0;l<t.length;l++)Wu(t[l],n);else if(Rb(t)||Cu(t))t.forEach(l=>{Wu(l,n)});else if(Bb(t))for(const l in t)Wu(t[l],n);return t}function _f(t,n,l){const h=arguments.length;return h===2?Qi(n)&&!Wn(n)?ff(n)?eo(t,null,[n]):eo(t,n):eo(t,null,n):(h>3?l=Array.prototype.slice.call(arguments,2):h===3&&ff(l)&&(l=[l]),eo(t,n,l))}function FP(){if(typeof window=="undefined")return;const t={style:"color:#3ba776"},n={style:"color:#0b1bc9"},l={style:"color:#b62e24"},h={style:"color:#9d288c"},_={header(D){return Qi(D)?D.__isVue?["div",t,"VueInstance"]:Qr(D)?["div",{},["span",t,k(D)],"<",s(D.value),">"]:Du(D)?["div",{},["span",t,"Reactive"],"<",s(D),`>${Lm(D)?" (readonly)":""}`]:Lm(D)?["div",{},["span",t,"Readonly"],"<",s(D),">"]:null:null},hasBody(D){return D&&D.__isVue},body(D){if(D&&D.__isVue)return["div",{},...g(D.$)]}};function g(D){const F=[];D.type.props&&D.props&&F.push(w("props",ai(D.props))),D.setupState!==Si&&F.push(w("setup",D.setupState)),D.data!==Si&&F.push(w("data",ai(D.data)));const K=C(D,"computed");K&&F.push(w("computed",K));const Se=C(D,"inject");return Se&&F.push(w("injected",Se)),F.push(["div",{},["span",{style:h.style+";opacity:0.66"},"$ (internal): "],["object",{object:D}]]),F}function w(D,F){return F=Ar({},F),Object.keys(F).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},D],["div",{style:"padding-left:1.25em"},...Object.keys(F).map(K=>["div",{},["span",h,K+": "],s(F[K],!1)])]]:["span",{}]}function s(D,F=!0){return typeof D=="number"?["span",n,D]:typeof D=="string"?["span",l,JSON.stringify(D)]:typeof D=="boolean"?["span",h,D]:Qi(D)?["object",{object:F?ai(D):D}]:["span",l,String(D)]}function C(D,F){const K=D.type;if(qn(K))return;const Se={};for(const pe in D.ctx)O(K,pe,F)&&(Se[pe]=D.ctx[pe]);return Se}function O(D,F,K){const Se=D[K];if(Wn(Se)&&Se.includes(F)||Qi(Se)&&F in Se||D.extends&&O(D.extends,F,K)||D.mixins&&D.mixins.some(pe=>O(pe,F,K)))return!0}function k(D){return D._shallow?"ShallowRef":D.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(_):window.devtoolsFormatters=[_]}const dE="3.2.21",$P="http://www.w3.org/2000/svg",gf=typeof document!="undefined"?document:null,pE=new Map,UP={insert:(t,n,l)=>{n.insertBefore(t,l||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,l,h)=>{const _=n?gf.createElementNS($P,t):gf.createElement(t,l?{is:l}:void 0);return t==="select"&&h&&h.multiple!=null&&_.setAttribute("multiple",h.multiple),_},createText:t=>gf.createTextNode(t),createComment:t=>gf.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>gf.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},cloneNode(t){const n=t.cloneNode(!0);return"_value"in t&&(n._value=t._value),n},insertStaticContent(t,n,l,h){const _=l?l.previousSibling:n.lastChild;let g=pE.get(t);if(!g){const w=gf.createElement("template");if(w.innerHTML=h?`<svg>${t}</svg>`:t,g=w.content,h){const s=g.firstChild;for(;s.firstChild;)g.appendChild(s.firstChild);g.removeChild(s)}pE.set(t,g)}return n.insertBefore(g.cloneNode(!0),l),[_?_.nextSibling:n.firstChild,l?l.previousSibling:n.lastChild]}};function jP(t,n,l){const h=t._vtc;h&&(n=(n?[n,...h]:[...h]).join(" ")),n==null?t.removeAttribute("class"):l?t.setAttribute("class",n):t.className=n}function VP(t,n,l){const h=t.style,_=yr(l);if(l&&!_){for(const g in l)nv(h,g,l[g]);if(n&&!yr(n))for(const g in n)l[g]==null&&nv(h,g,"")}else{const g=h.display;_?n!==l&&(h.cssText=l):n&&t.removeAttribute("style"),"_vod"in t&&(h.display=g)}}const mE=/\s*!important$/;function nv(t,n,l){if(Wn(l))l.forEach(h=>nv(t,n,h));else if(n.startsWith("--"))t.setProperty(n,l);else{const h=GP(t,n);mE.test(l)?t.setProperty(wc(h),l.replace(mE,""),"important"):t[h]=l}}const _E=["Webkit","Moz","ms"],iv={};function GP(t,n){const l=iv[n];if(l)return l;let h=Da(n);if(h!=="filter"&&h in t)return iv[n]=h;h=Iu(h);for(let _=0;_<_E.length;_++){const g=_E[_]+h;if(g in t)return iv[n]=g}return n}const gE="http://www.w3.org/1999/xlink";function HP(t,n,l,h,_){if(h&&n.startsWith("xlink:"))l==null?t.removeAttributeNS(gE,n.slice(6,n.length)):t.setAttributeNS(gE,n,l);else{const g=mk(n);l==null||g&&!Pb(l)?t.removeAttribute(n):t.setAttribute(n,g?"":l)}}function WP(t,n,l,h,_,g,w){if(n==="innerHTML"||n==="textContent"){h&&w(h,_,g),t[n]=l==null?"":l;return}if(n==="value"&&t.tagName!=="PROGRESS"){t._value=l;const s=l==null?"":l;t.value!==s&&(t.value=s),l==null&&t.removeAttribute(n);return}if(l===""||l==null){const s=typeof t[n];if(s==="boolean"){t[n]=Pb(l);return}else if(l==null&&s==="string"){t[n]="",t.removeAttribute(n);return}else if(s==="number"){try{t[n]=0}catch{}t.removeAttribute(n);return}}try{t[n]=l}catch(s){Qt(`Failed setting prop "${n}" on <${t.tagName.toLowerCase()}>: value ${l} is invalid.`,s)}}let Ym=Date.now,yE=!1;if(typeof window!="undefined"){Ym()>document.createEvent("Event").timeStamp&&(Ym=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);yE=!!(t&&Number(t[1])<=53)}let rv=0;const qP=Promise.resolve(),ZP=()=>{rv=0},XP=()=>rv||(qP.then(ZP),rv=Ym());function yf(t,n,l,h){t.addEventListener(n,l,h)}function YP(t,n,l,h){t.removeEventListener(n,l,h)}function KP(t,n,l,h,_=null){const g=t._vei||(t._vei={}),w=g[n];if(h&&w)w.value=h;else{const[s,C]=JP(n);if(h){const O=g[n]=QP(h,_);yf(t,s,O,C)}else w&&(YP(t,s,w,C),g[n]=void 0)}}const vE=/(?:Once|Passive|Capture)$/;function JP(t){let n;if(vE.test(t)){n={};let l;for(;l=t.match(vE);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[wc(t.slice(2)),n]}function QP(t,n){const l=h=>{const _=h.timeStamp||Ym();(yE||_>=l.attached-1)&&Qs(eD(h,l.value),n,5,[h])};return l.value=t,l.attached=XP(),l}function eD(t,n){if(Wn(n)){const l=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{l.call(t),t._stopped=!0},n.map(h=>_=>!_._stopped&&h(_))}else return n}const xE=/^on[a-z]/,tD=(t,n,l,h,_=!1,g,w,s,C)=>{n==="class"?jP(t,h,_):n==="style"?VP(t,l,h):zd(n)?_m(n)||KP(t,n,l,h,w):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):nD(t,n,h,_))?WP(t,n,h,g,w,s,C):(n==="true-value"?t._trueValue=h:n==="false-value"&&(t._falseValue=h),HP(t,n,h,_))};function nD(t,n,l,h){return h?!!(n==="innerHTML"||n==="textContent"||n in t&&xE.test(n)&&qn(l)):n==="spellcheck"||n==="draggable"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||xE.test(n)&&yr(l)?!1:n in t}const bE=t=>{const n=t.props["onUpdate:modelValue"];return Wn(n)?l=>of(n,l):n};function iD(t){t.target.composing=!0}function wE(t){const n=t.target;n.composing&&(n.composing=!1,rD(n,"input"))}function rD(t,n){const l=document.createEvent("HTMLEvents");l.initEvent(n,!0,!0),t.dispatchEvent(l)}const UU={created(t,{modifiers:{lazy:n,trim:l,number:h}},_){t._assign=bE(_);const g=h||_.props&&_.props.type==="number";yf(t,n?"change":"input",w=>{if(w.target.composing)return;let s=t.value;l?s=s.trim():g&&(s=my(s)),t._assign(s)}),l&&yf(t,"change",()=>{t.value=t.value.trim()}),n||(yf(t,"compositionstart",iD),yf(t,"compositionend",wE),yf(t,"change",wE))},mounted(t,{value:n}){t.value=n==null?"":n},beforeUpdate(t,{value:n,modifiers:{lazy:l,trim:h,number:_}},g){if(t._assign=bE(g),t.composing||document.activeElement===t&&(l||h&&t.value.trim()===n||(_||t.type==="number")&&my(t.value)===n))return;const w=n==null?"":n;t.value!==w&&(t.value=w)}},oD=["ctrl","shift","alt","meta"],sD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>oD.some(l=>t[`${l}Key`]&&!n.includes(l))},jU=(t,n)=>(l,...h)=>{for(let _=0;_<n.length;_++){const g=sD[n[_]];if(g&&g(l,n))return}return t(l,...h)},VU={beforeMount(t,{value:n},{transition:l}){t._vod=t.style.display==="none"?"":t.style.display,l&&n?l.beforeEnter(t):Yd(t,n)},mounted(t,{value:n},{transition:l}){l&&n&&l.enter(t)},updated(t,{value:n,oldValue:l},{transition:h}){!n!=!l&&(h?n?(h.beforeEnter(t),Yd(t,!0),h.enter(t)):h.leave(t,()=>{Yd(t,!1)}):Yd(t,n))},beforeUnmount(t,{value:n}){Yd(t,n)}};function Yd(t,n){t.style.display=n?t._vod:"none"}const aD=Ar({patchProp:tD},UP);let EE;function lD(){return EE||(EE=iP(aD))}const GU=(...t)=>{const n=lD().createApp(...t);cD(n),uD(n);const{mount:l}=n;return n.mount=h=>{const _=hD(h);if(!_)return;const g=n._component;!qn(g)&&!g.render&&!g.template&&(g.template=_.innerHTML),_.innerHTML="";const w=l(_,!1,_ instanceof SVGElement);return _ instanceof Element&&(_.removeAttribute("v-cloak"),_.setAttribute("data-v-app","")),w},n};function cD(t){Object.defineProperty(t.config,"isNativeTag",{value:n=>bk(n)||wk(n),writable:!1})}function uD(t){{const n=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return n},set(){Qt("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const l=t.config.compilerOptions,h='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(t.config,"compilerOptions",{get(){return Qt(h),l},set(){Qt(h)}})}}function hD(t){if(yr(t)){const n=document.querySelector(t);return n||Qt(`Failed to mount app: mount target selector "${t}" returned null.`),n}return window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&Qt('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}function fD(){FP()}fD();function dD(){return TE().__VUE_DEVTOOLS_GLOBAL_HOOK__}function TE(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const pD=typeof Proxy=="function",mD="devtools-plugin:setup",_D="plugin:settings:set";class gD{constructor(n,l){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=l;const h={};if(n.settings)for(const w in n.settings){const s=n.settings[w];h[w]=s.defaultValue}const _=`__vue-devtools-plugin-settings__${n.id}`;let g=rn({},h);try{const w=localStorage.getItem(_),s=JSON.parse(w);Object.assign(g,s)}catch{}this.fallbacks={getSettings(){return g},setSettings(w){try{localStorage.setItem(_,JSON.stringify(w))}catch{}g=w}},l.on(_D,(w,s)=>{w===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(w,s)=>this.target?this.target.on[s]:(...C)=>{this.onQueue.push({method:s,args:C})}}),this.proxiedTarget=new Proxy({},{get:(w,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...C)=>(this.targetQueue.push({method:s,args:C,resolve:()=>{}}),this.fallbacks[s](...C)):(...C)=>new Promise(O=>{this.targetQueue.push({method:s,args:C,resolve:O})})})}async setRealTarget(n){this.target=n;for(const l of this.onQueue)this.target.on[l.method](...l.args);for(const l of this.targetQueue)l.resolve(await this.target[l.method](...l.args))}}function ov(t,n){const l=TE(),h=dD(),_=pD&&t.enableEarlyProxy;if(h&&(l.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!_))h.emit(mD,t,n);else{const g=_?new gD(t,h):null;(l.__VUE_DEVTOOLS_PLUGINS__=l.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:n,proxy:g}),g&&n(g.proxiedTarget)}}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const AE=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",vf=t=>AE?Symbol("[vue-router]: "+t):"[vue-router]: "+t,SE=vf("router view location matched"),CE=vf("router view depth"),Km=vf("router"),sv=vf("route location"),av=vf("router view location"),El=typeof window!="undefined";function yD(t){return t.__esModule||AE&&t[Symbol.toStringTag]==="Module"}const Ri=Object.assign;function lv(t,n){const l={};for(const h in n){const _=n[h];l[h]=Array.isArray(_)?_.map(t):t(_)}return l}const Kd=()=>{};function wi(t){const n=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+t].concat(n))}const vD=/\/$/,xD=t=>t.replace(vD,"");function cv(t,n,l="/"){let h,_={},g="",w="";const s=n.indexOf("?"),C=n.indexOf("#",s>-1?s:0);return s>-1&&(h=n.slice(0,s),g=n.slice(s+1,C>-1?C:n.length),_=t(g)),C>-1&&(h=h||n.slice(0,C),w=n.slice(C,n.length)),h=ED(h!=null?h:n,l),{fullPath:h+(g&&"?")+g+w,path:h,query:_,hash:w}}function bD(t,n){const l=n.query?t(n.query):"";return n.path+(l&&"?")+l+(n.hash||"")}function IE(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function ME(t,n,l){const h=n.matched.length-1,_=l.matched.length-1;return h>-1&&h===_&&kc(n.matched[h],l.matched[_])&&kE(n.params,l.params)&&t(n.query)===t(l.query)&&n.hash===l.hash}function kc(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function kE(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const l in t)if(!wD(t[l],n[l]))return!1;return!0}function wD(t,n){return Array.isArray(t)?LE(t,n):Array.isArray(n)?LE(n,t):t===n}function LE(t,n){return Array.isArray(n)?t.length===n.length&&t.every((l,h)=>l===n[h]):t.length===1&&t[0]===n}function ED(t,n){if(t.startsWith("/"))return t;if(!n.startsWith("/"))return wi(`Cannot resolve a relative location without an absolute path. Trying to resolve "${t}" from "${n}". It should look like "/${n}".`),t;if(!t)return n;const l=n.split("/"),h=t.split("/");let _=l.length-1,g,w;for(g=0;g<h.length;g++)if(w=h[g],!(_===1||w==="."))if(w==="..")_--;else break;return l.slice(0,_).join("/")+"/"+h.slice(g-(g===h.length?1:0)).join("/")}var Jd;(function(t){t.pop="pop",t.push="push"})(Jd||(Jd={}));var Qd;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Qd||(Qd={}));function TD(t){if(!t)if(El){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),xD(t)}const AD=/^[^#]+#/;function SD(t,n){return t.replace(AD,"#")+n}function CD(t,n){const l=document.documentElement.getBoundingClientRect(),h=t.getBoundingClientRect();return{behavior:n.behavior,left:h.left-l.left-(n.left||0),top:h.top-l.top-(n.top||0)}}const Jm=()=>({left:window.pageXOffset,top:window.pageYOffset});function ID(t){let n;if("el"in t){const l=t.el,h=typeof l=="string"&&l.startsWith("#");if(typeof t.el=="string"&&(!h||!document.getElementById(t.el.slice(1))))try{const g=document.querySelector(t.el);if(h&&g){wi(`The selector "${t.el}" should be passed as "el: document.querySelector('${t.el}')" because it starts with "#".`);return}}catch{wi(`The selector "${t.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const _=typeof l=="string"?h?document.getElementById(l.slice(1)):document.querySelector(l):l;if(!_){wi(`Couldn't find element using selector "${t.el}" returned by scrollBehavior.`);return}n=CD(_,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function PE(t,n){return(history.state?history.state.position-n:-1)+t}const uv=new Map;function MD(t,n){uv.set(t,n)}function kD(t){const n=uv.get(t);return uv.delete(t),n}let LD=()=>location.protocol+"//"+location.host;function DE(t,n){const{pathname:l,search:h,hash:_}=n,g=t.indexOf("#");if(g>-1){let s=_.includes(t.slice(g))?t.slice(g).length:1,C=_.slice(s);return C[0]!=="/"&&(C="/"+C),IE(C,"")}return IE(l,t)+h+_}function PD(t,n,l,h){let _=[],g=[],w=null;const s=({state:F})=>{const K=DE(t,location),Se=l.value,pe=n.value;let J=0;if(F){if(l.value=K,n.value=F,w&&w===Se){w=null;return}J=pe?F.position-pe.position:0}else h(K);_.forEach(H=>{H(l.value,Se,{delta:J,type:Jd.pop,direction:J?J>0?Qd.forward:Qd.back:Qd.unknown})})};function C(){w=l.value}function O(F){_.push(F);const K=()=>{const Se=_.indexOf(F);Se>-1&&_.splice(Se,1)};return g.push(K),K}function k(){const{history:F}=window;!F.state||F.replaceState(Ri({},F.state,{scroll:Jm()}),"")}function D(){for(const F of g)F();g=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",k)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",k),{pauseListeners:C,listen:O,destroy:D}}function OE(t,n,l,h=!1,_=!1){return{back:t,current:n,forward:l,replaced:h,position:window.history.length,scroll:_?Jm():null}}function DD(t){const{history:n,location:l}=window,h={value:DE(t,l)},_={value:n.state};_.value||g(h.value,{back:null,current:h.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function g(C,O,k){const D=t.indexOf("#"),F=D>-1?(l.host&&document.querySelector("base")?t:t.slice(D))+C:LD()+t+C;try{n[k?"replaceState":"pushState"](O,"",F),_.value=O}catch(K){wi("Error with push/replace State",K),l[k?"replace":"assign"](F)}}function w(C,O){const k=Ri({},n.state,OE(_.value.back,C,_.value.forward,!0),O,{position:_.value.position});g(C,k,!0),h.value=C}function s(C,O){const k=Ri({},_.value,n.state,{forward:C,scroll:Jm()});n.state||wi(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`),g(k.current,k,!0);const D=Ri({},OE(h.value,C,null),{position:k.position+1},O);g(C,D,!1),h.value=C}return{location:h,state:_,push:s,replace:w}}function HU(t){t=TD(t);const n=DD(t),l=PD(t,n.state,n.location,n.replace);function h(g,w=!0){w||l.pauseListeners(),history.go(g)}const _=Ri({location:"",base:t,go:h,createHref:SD.bind(null,t)},n,l);return Object.defineProperty(_,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(_,"state",{enumerable:!0,get:()=>n.state.value}),_}function OD(t){return typeof t=="string"||t&&typeof t=="object"}function zE(t){return typeof t=="string"||typeof t=="symbol"}const Lc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},RE=vf("navigation failure");var NE;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NE||(NE={}));const zD={[1]({location:t,currentLocation:n}){return`No match for
 ${JSON.stringify(t)}${n?`
while being at
`+JSON.stringify(n):""}`},[2]({from:t,to:n}){return`Redirected from "${t.fullPath}" to "${ND(n)}" via a navigation guard.`},[4]({from:t,to:n}){return`Navigation aborted from "${t.fullPath}" to "${n.fullPath}" via a navigation guard.`},[8]({from:t,to:n}){return`Navigation cancelled from "${t.fullPath}" to "${n.fullPath}" with a new navigation.`},[16]({from:t,to:n}){return`Avoided redundant navigation to current location: "${t.fullPath}".`}};function xf(t,n){return Ri(new Error(zD[t](n)),{type:t,[RE]:!0},n)}function qu(t,n){return t instanceof Error&&RE in t&&(n==null||!!(t.type&n))}const RD=["params","query","hash"];function ND(t){if(typeof t=="string")return t;if("path"in t)return t.path;const n={};for(const l of RD)l in t&&(n[l]=t[l]);return JSON.stringify(n,null,2)}const BE="[^/]+?",BD={sensitive:!1,strict:!1,start:!0,end:!0},FD=/[.+*?^${}()[\]/\\]/g;function $D(t,n){const l=Ri({},BD,n),h=[];let _=l.start?"^":"";const g=[];for(const O of t){const k=O.length?[]:[90];l.strict&&!O.length&&(_+="/");for(let D=0;D<O.length;D++){const F=O[D];let K=40+(l.sensitive?.25:0);if(F.type===0)D||(_+="/"),_+=F.value.replace(FD,"\\$&"),K+=40;else if(F.type===1){const{value:Se,repeatable:pe,optional:J,regexp:H}=F;g.push({name:Se,repeatable:pe,optional:J});const te=H||BE;if(te!==BE){K+=10;try{new RegExp(`(${te})`)}catch(ke){throw new Error(`Invalid custom RegExp for param "${Se}" (${te}): `+ke.message)}}let ge=pe?`((?:${te})(?:/(?:${te}))*)`:`(${te})`;D||(ge=J&&O.length<2?`(?:/${ge})`:"/"+ge),J&&(ge+="?"),_+=ge,K+=20,J&&(K+=-8),pe&&(K+=-20),te===".*"&&(K+=-50)}k.push(K)}h.push(k)}if(l.strict&&l.end){const O=h.length-1;h[O][h[O].length-1]+=.7000000000000001}l.strict||(_+="/?"),l.end?_+="$":l.strict&&(_+="(?:/|$)");const w=new RegExp(_,l.sensitive?"":"i");function s(O){const k=O.match(w),D={};if(!k)return null;for(let F=1;F<k.length;F++){const K=k[F]||"",Se=g[F-1];D[Se.name]=K&&Se.repeatable?K.split("/"):K}return D}function C(O){let k="",D=!1;for(const F of t){(!D||!k.endsWith("/"))&&(k+="/"),D=!1;for(const K of F)if(K.type===0)k+=K.value;else if(K.type===1){const{value:Se,repeatable:pe,optional:J}=K,H=Se in O?O[Se]:"";if(Array.isArray(H)&&!pe)throw new Error(`Provided param "${Se}" is an array but it is not repeatable (* or + modifiers)`);const te=Array.isArray(H)?H.join("/"):H;if(!te)if(J)F.length<2&&(k.endsWith("/")?k=k.slice(0,-1):D=!0);else throw new Error(`Missing required param "${Se}"`);k+=te}}return k}return{re:w,score:h,keys:g,parse:s,stringify:C}}function UD(t,n){let l=0;for(;l<t.length&&l<n.length;){const h=n[l]-t[l];if(h)return h;l++}return t.length<n.length?t.length===1&&t[0]===40+40?-1:1:t.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function jD(t,n){let l=0;const h=t.score,_=n.score;for(;l<h.length&&l<_.length;){const g=UD(h[l],_[l]);if(g)return g;l++}return _.length-h.length}const VD={type:0,value:""},GD=/[a-zA-Z0-9_]/;function HD(t){if(!t)return[[]];if(t==="/")return[[VD]];if(!t.startsWith("/"))throw new Error(`Route paths should start with a "/": "${t}" should be "/${t}".`);function n(K){throw new Error(`ERR (${l})/"${O}": ${K}`)}let l=0,h=l;const _=[];let g;function w(){g&&_.push(g),g=[]}let s=0,C,O="",k="";function D(){!O||(l===0?g.push({type:0,value:O}):l===1||l===2||l===3?(g.length>1&&(C==="*"||C==="+")&&n(`A repeatable param (${O}) must be alone in its segment. eg: '/:ids+.`),g.push({type:1,value:O,regexp:k,repeatable:C==="*"||C==="+",optional:C==="*"||C==="?"})):n("Invalid state to consume buffer"),O="")}function F(){O+=C}for(;s<t.length;){if(C=t[s++],C==="\\"&&l!==2){h=l,l=4;continue}switch(l){case 0:C==="/"?(O&&D(),w()):C===":"?(D(),l=1):F();break;case 4:F(),l=h;break;case 1:C==="("?l=2:GD.test(C)?F():(D(),l=0,C!=="*"&&C!=="?"&&C!=="+"&&s--);break;case 2:C===")"?k[k.length-1]=="\\"?k=k.slice(0,-1)+C:l=3:k+=C;break;case 3:D(),l=0,C!=="*"&&C!=="?"&&C!=="+"&&s--,k="";break;default:n("Unknown state");break}}return l===2&&n(`Unfinished custom RegExp for param "${O}"`),D(),w(),_}function WD(t,n,l){const h=$D(HD(t.path),l);{const g=new Set;for(const w of h.keys)g.has(w.name)&&wi(`Found duplicated params with name "${w.name}" for path "${t.path}". Only the last one will be available on "$route.params".`),g.add(w.name)}const _=Ri(h,{record:t,parent:n,children:[],alias:[]});return n&&!_.record.aliasOf==!n.record.aliasOf&&n.children.push(_),_}function qD(t,n){const l=[],h=new Map;n=$E({strict:!1,end:!0,sensitive:!1},n);function _(k){return h.get(k)}function g(k,D,F){const K=!F,Se=XD(k);Se.aliasOf=F&&F.record;const pe=$E(n,k),J=[Se];if("alias"in k){const ge=typeof k.alias=="string"?[k.alias]:k.alias;for(const ke of ge)J.push(Ri({},Se,{components:F?F.record.components:Se.components,path:ke,aliasOf:F?F.record:Se}))}let H,te;for(const ge of J){const{path:ke}=ge;if(D&&ke[0]!=="/"){const Ae=D.record.path,Pe=Ae[Ae.length-1]==="/"?"":"/";ge.path=D.record.path+(ke&&Pe+ke)}if(ge.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.`);if(H=WD(ge,D,pe),D&&ke[0]==="/"&&QD(H,D),F?(F.alias.push(H),JD(F,H)):(te=te||H,te!==H&&te.alias.push(H),K&&k.name&&!FE(H)&&w(k.name)),"children"in Se){const Ae=Se.children;for(let Pe=0;Pe<Ae.length;Pe++)g(Ae[Pe],H,F&&F.children[Pe])}F=F||H,C(H)}return te?()=>{w(te)}:Kd}function w(k){if(zE(k)){const D=h.get(k);D&&(h.delete(k),l.splice(l.indexOf(D),1),D.children.forEach(w),D.alias.forEach(w))}else{const D=l.indexOf(k);D>-1&&(l.splice(D,1),k.record.name&&h.delete(k.record.name),k.children.forEach(w),k.alias.forEach(w))}}function s(){return l}function C(k){let D=0;for(;D<l.length&&jD(k,l[D])>=0;)D++;l.splice(D,0,k),k.record.name&&!FE(k)&&h.set(k.record.name,k)}function O(k,D){let F,K={},Se,pe;if("name"in k&&k.name){if(F=h.get(k.name),!F)throw xf(1,{location:k});pe=F.record.name,K=Ri(ZD(D.params,F.keys.filter(te=>!te.optional).map(te=>te.name)),k.params),Se=F.stringify(K)}else if("path"in k)Se=k.path,Se.startsWith("/")||wi(`The Matcher cannot resolve relative paths but received "${Se}". Unless you directly called \`matcher.resolve("${Se}")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-router-next.`),F=l.find(te=>te.re.test(Se)),F&&(K=F.parse(Se),pe=F.record.name);else{if(F=D.name?h.get(D.name):l.find(te=>te.re.test(D.path)),!F)throw xf(1,{location:k,currentLocation:D});pe=F.record.name,K=Ri({},D.params,k.params),Se=F.stringify(K)}const J=[];let H=F;for(;H;)J.unshift(H.record),H=H.parent;return{name:pe,path:Se,params:K,matched:J,meta:KD(J)}}return t.forEach(k=>g(k)),{addRoute:g,resolve:O,removeRoute:w,getRoutes:s,getRecordMatcher:_}}function ZD(t,n){const l={};for(const h of n)h in t&&(l[h]=t[h]);return l}function XD(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:YD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function YD(t){const n={},l=t.props||!1;if("component"in t)n.default=l;else for(const h in t.components)n[h]=typeof l=="boolean"?l:l[h];return n}function FE(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function KD(t){return t.reduce((n,l)=>Ri(n,l.meta),{})}function $E(t,n){const l={};for(const h in t)l[h]=h in n?n[h]:t[h];return l}function hv(t,n){return t.name===n.name&&t.optional===n.optional&&t.repeatable===n.repeatable}function JD(t,n){for(const l of t.keys)if(!l.optional&&!n.keys.find(hv.bind(null,l)))return wi(`Alias "${n.record.path}" and the original record: "${t.record.path}" should have the exact same param named "${l.name}"`);for(const l of n.keys)if(!l.optional&&!t.keys.find(hv.bind(null,l)))return wi(`Alias "${n.record.path}" and the original record: "${t.record.path}" should have the exact same param named "${l.name}"`)}function QD(t,n){for(const l of n.keys)if(!t.keys.find(hv.bind(null,l)))return wi(`Absolute path "${t.record.path}" should have the exact same param named "${l.name}" as its parent "${n.record.path}".`)}const UE=/#/g,eO=/&/g,tO=/\//g,nO=/=/g,iO=/\?/g,jE=/\+/g,rO=/%5B/g,oO=/%5D/g,VE=/%5E/g,sO=/%60/g,GE=/%7B/g,aO=/%7C/g,HE=/%7D/g,lO=/%20/g;function fv(t){return encodeURI(""+t).replace(aO,"|").replace(rO,"[").replace(oO,"]")}function cO(t){return fv(t).replace(GE,"{").replace(HE,"}").replace(VE,"^")}function dv(t){return fv(t).replace(jE,"%2B").replace(lO,"+").replace(UE,"%23").replace(eO,"%26").replace(sO,"`").replace(GE,"{").replace(HE,"}").replace(VE,"^")}function uO(t){return dv(t).replace(nO,"%3D")}function hO(t){return fv(t).replace(UE,"%23").replace(iO,"%3F")}function fO(t){return t==null?"":hO(t).replace(tO,"%2F")}function ep(t){try{return decodeURIComponent(""+t)}catch{wi(`Error decoding "${t}". Using original value`)}return""+t}function dO(t){const n={};if(t===""||t==="?")return n;const h=(t[0]==="?"?t.slice(1):t).split("&");for(let _=0;_<h.length;++_){const g=h[_].replace(jE," "),w=g.indexOf("="),s=ep(w<0?g:g.slice(0,w)),C=w<0?null:ep(g.slice(w+1));if(s in n){let O=n[s];Array.isArray(O)||(O=n[s]=[O]),O.push(C)}else n[s]=C}return n}function WE(t){let n="";for(let l in t){const h=t[l];if(l=uO(l),h==null){h!==void 0&&(n+=(n.length?"&":"")+l);continue}(Array.isArray(h)?h.map(g=>g&&dv(g)):[h&&dv(h)]).forEach(g=>{g!==void 0&&(n+=(n.length?"&":"")+l,g!=null&&(n+="="+g))})}return n}function pO(t){const n={};for(const l in t){const h=t[l];h!==void 0&&(n[l]=Array.isArray(h)?h.map(_=>_==null?null:""+_):h==null?h:""+h)}return n}function tp(){let t=[];function n(h){return t.push(h),()=>{const _=t.indexOf(h);_>-1&&t.splice(_,1)}}function l(){t=[]}return{add:n,list:()=>t,reset:l}}function mO(t,n,l){const h=()=>{t[n].delete(l)};Nm(h),ww(h),bw(()=>{t[n].add(l)}),t[n].add(l)}function WU(t){if(!Mc()){wi("getCurrentInstance() returned null. onBeforeRouteLeave() must be called at the top of a setup function");return}const n=cs(SE,{}).value;if(!n){wi("No active route record was found when calling `onBeforeRouteLeave()`. Make sure you call this function inside of a component child of <router-view>. Maybe you called it inside of App.vue?");return}mO(n,"leaveGuards",t)}function Pc(t,n,l,h,_){const g=h&&(h.enterCallbacks[_]=h.enterCallbacks[_]||[]);return()=>new Promise((w,s)=>{const C=D=>{D===!1?s(xf(4,{from:l,to:n})):D instanceof Error?s(D):OD(D)?s(xf(2,{from:n,to:D})):(g&&h.enterCallbacks[_]===g&&typeof D=="function"&&g.push(D),w())},O=t.call(h&&h.instances[_],n,l,_O(C,n,l));let k=Promise.resolve(O);if(t.length<3&&(k=k.then(C)),t.length>2){const D=`The "next" callback was never called inside of ${t.name?'"'+t.name+'"':""}:
${t.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof O=="object"&&"then"in O)k=k.then(F=>C._called?F:(wi(D),Promise.reject(new Error("Invalid navigation guard"))));else if(O!==void 0&&!C._called){wi(D),s(new Error("Invalid navigation guard"));return}}k.catch(D=>s(D))})}function _O(t,n,l){let h=0;return function(){h++==1&&wi(`The "next" callback was called more than once in one navigation guard when going from "${l.fullPath}" to "${n.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),t._called=!0,h===1&&t.apply(null,arguments)}}function pv(t,n,l,h){const _=[];for(const g of t)for(const w in g.components){let s=g.components[w];{if(!s||typeof s!="object"&&typeof s!="function")throw wi(`Component "${w}" in record with path "${g.path}" is not a valid component. Received "${String(s)}".`),new Error("Invalid route component");if("then"in s){wi(`Component "${w}" in record with path "${g.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const C=s;s=()=>C}else s.__asyncLoader&&!s.__warnedDefineAsync&&(s.__warnedDefineAsync=!0,wi(`Component "${w}" in record with path "${g.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(n!=="beforeRouteEnter"&&!g.instances[w]))if(gO(s)){const O=(s.__vccOpts||s)[n];O&&_.push(Pc(O,l,h,g,w))}else{let C=s();"catch"in C||(wi(`Component "${w}" in record with path "${g.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),C=Promise.resolve(C)),_.push(()=>C.then(O=>{if(!O)return Promise.reject(new Error(`Couldn't resolve component "${w}" at "${g.path}"`));const k=yD(O)?O.default:O;g.components[w]=k;const F=(k.__vccOpts||k)[n];return F&&Pc(F,l,h,g,w)()}))}}return _}function gO(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qE(t){const n=cs(Km),l=cs(sv),h=Hi(()=>n.resolve($d(t.to))),_=Hi(()=>{const{matched:C}=h.value,{length:O}=C,k=C[O-1],D=l.matched;if(!k||!D.length)return-1;const F=D.findIndex(kc.bind(null,k));if(F>-1)return F;const K=ZE(C[O-2]);return O>1&&ZE(k)===K&&D[D.length-1].path!==K?D.findIndex(kc.bind(null,C[O-2])):F}),g=Hi(()=>_.value>-1&&bO(l.params,h.value.params)),w=Hi(()=>_.value>-1&&_.value===l.matched.length-1&&kE(l.params,h.value.params));function s(C={}){return xO(C)?n[$d(t.replace)?"replace":"push"]($d(t.to)).catch(Kd):Promise.resolve()}if(El){const C=Mc();if(C){const O={route:h.value,isActive:g.value,isExactActive:w.value};C.__vrl_devtools=C.__vrl_devtools||[],C.__vrl_devtools.push(O),NP(()=>{O.route=h.value,O.isActive=g.value,O.isExactActive=w.value},{flush:"post"})}}return{route:h,href:Hi(()=>h.value.href),isActive:g,isExactActive:w,navigate:s}}const yO=Sc({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qE,setup(t,{slots:n}){const l=af(qE(t)),{options:h}=cs(Km),_=Hi(()=>({[XE(t.activeClass,h.linkActiveClass,"router-link-active")]:l.isActive,[XE(t.exactActiveClass,h.linkExactActiveClass,"router-link-exact-active")]:l.isExactActive}));return()=>{const g=n.default&&n.default(l);return t.custom?g:_f("a",{"aria-current":l.isExactActive?t.ariaCurrentValue:null,href:l.href,onClick:l.navigate,class:_.value},g)}}}),vO=yO;function xO(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function bO(t,n){for(const l in n){const h=n[l],_=t[l];if(typeof h=="string"){if(h!==_)return!1}else if(!Array.isArray(_)||_.length!==h.length||h.some((g,w)=>g!==_[w]))return!1}return!0}function ZE(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const XE=(t,n,l)=>t!=null?t:n!=null?n:l,wO=Sc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:n,slots:l}){TO();const h=cs(av),_=Hi(()=>t.route||h.value),g=cs(CE,0),w=Hi(()=>_.value.matched[g]);zm(CE,g+1),zm(SE,w),zm(av,_);const s=cf();return za(()=>[s.value,w.value,t.name],([C,O,k],[D,F,K])=>{O&&(O.instances[k]=C,F&&F!==O&&C&&C===D&&(O.leaveGuards.size||(O.leaveGuards=F.leaveGuards),O.updateGuards.size||(O.updateGuards=F.updateGuards))),C&&O&&(!F||!kc(O,F)||!D)&&(O.enterCallbacks[k]||[]).forEach(Se=>Se(C))},{flush:"post"}),()=>{const C=_.value,O=w.value,k=O&&O.components[t.name],D=t.name;if(!k)return YE(l.default,{Component:k,route:C});const F=O.props[t.name],K=F?F===!0?C.params:typeof F=="function"?F(C):F:null,pe=_f(k,Ri({},K,n,{onVnodeUnmounted:J=>{J.component.isUnmounted&&(O.instances[D]=null)},ref:s}));if(El&&pe.ref){const J={depth:g,name:O.name,path:O.path,meta:O.meta};(Array.isArray(pe.ref)?pe.ref.map(te=>te.i):[pe.ref.i]).forEach(te=>{te.__vrv_devtools=J})}return YE(l.default,{Component:pe,route:C})||pe}}});function YE(t,n){if(!t)return null;const l=t(n);return l.length===1?l[0]:l}const EO=wO;function TO(){const t=Mc(),n=t.parent&&t.parent.type.name;if(n&&(n==="KeepAlive"||n.includes("Transition"))){const l=n==="KeepAlive"?"keep-alive":"transition";wi(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${l}>
    <component :is="Component" />
  </${l}>
</router-view>`)}}function np(t,n){const l=Ri({},t,{matched:t.matched.map(h=>DO(h,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:t.fullPath,tooltip:n,value:l}}}function Qm(t){return{_custom:{display:t}}}let AO=0;function SO(t,n,l){if(n.__hasDevtools)return;n.__hasDevtools=!0;const h=AO++;ov({id:"org.vuejs.router"+(h?"."+h:""),label:"Vue Router",packageName:"vue-router",homepage:"https://next.router.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",componentStateTypes:["Routing"],app:t},_=>{_.on.inspectComponent((k,D)=>{k.instanceData&&k.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:np(n.currentRoute.value,"Current Route")})}),_.on.visitComponentTree(({treeNode:k,componentInstance:D})=>{if(D.__vrv_devtools){const F=D.__vrv_devtools;k.tags.push({label:(F.name?`${F.name.toString()}: `:"")+F.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:KE})}Array.isArray(D.__vrl_devtools)&&(D.__devtoolsApi=_,D.__vrl_devtools.forEach(F=>{let K=e2,Se="";F.isExactActive?(K=QE,Se="This is exactly active"):F.isActive&&(K=JE,Se="This link is active"),k.tags.push({label:F.route.path,textColor:0,tooltip:Se,backgroundColor:K})}))}),za(n.currentRoute,()=>{C(),_.notifyComponentUpdate(),_.sendInspectorTree(s),_.sendInspectorState(s)});const g="router:navigations:"+h;_.addTimelineLayer({id:g,label:`Router${h?" "+h:""} Navigations`,color:4237508}),n.onError((k,D)=>{_.addTimelineEvent({layerId:g,event:{title:"Error during Navigation",subtitle:D.fullPath,logType:"error",time:Date.now(),data:{error:k},groupId:D.meta.__navigationId}})});let w=0;n.beforeEach((k,D)=>{const F={guard:Qm("beforeEach"),from:np(D,"Current Location during this navigation"),to:np(k,"Target location")};Object.defineProperty(k.meta,"__navigationId",{value:w++}),_.addTimelineEvent({layerId:g,event:{time:Date.now(),title:"Start of navigation",subtitle:k.fullPath,data:F,groupId:k.meta.__navigationId}})}),n.afterEach((k,D,F)=>{const K={guard:Qm("afterEach")};F?(K.failure={_custom:{type:Error,readOnly:!0,display:F?F.message:"",tooltip:"Navigation Failure",value:F}},K.status=Qm("\u274C")):K.status=Qm("\u2705"),K.from=np(D,"Current Location during this navigation"),K.to=np(k,"Target location"),_.addTimelineEvent({layerId:g,event:{title:"End of navigation",subtitle:k.fullPath,time:Date.now(),data:K,logType:F?"warning":"default",groupId:k.meta.__navigationId}})});const s="router-inspector:"+h;_.addInspector({id:s,label:"Routes"+(h?" "+h:""),icon:"book",treeFilterPlaceholder:"Search routes"});function C(){if(!O)return;const k=O;let D=l.getRoutes().filter(F=>!F.parent);D.forEach(i2),k.filter&&(D=D.filter(F=>mv(F,k.filter.toLowerCase()))),D.forEach(F=>n2(F,n.currentRoute.value)),k.rootNodes=D.map(t2)}let O;_.on.getInspectorTree(k=>{O=k,k.app===t&&k.inspectorId===s&&C()}),_.on.getInspectorState(k=>{if(k.app===t&&k.inspectorId===s){const F=l.getRoutes().find(K=>K.record.__vd_id===k.nodeId);F&&(k.state={options:IO(F)})}}),_.sendInspectorTree(s),_.sendInspectorState(s)})}function CO(t){return t.optional?t.repeatable?"*":"?":t.repeatable?"+":""}function IO(t){const{record:n}=t,l=[{editable:!1,key:"path",value:n.path}];return n.name!=null&&l.push({editable:!1,key:"name",value:n.name}),l.push({editable:!1,key:"regexp",value:t.re}),t.keys.length&&l.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:t.keys.map(h=>`${h.name}${CO(h)}`).join(" "),tooltip:"Param keys",value:t.keys}}}),n.redirect!=null&&l.push({editable:!1,key:"redirect",value:n.redirect}),t.alias.length&&l.push({editable:!1,key:"aliases",value:t.alias.map(h=>h.record.path)}),l.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:t.score.map(h=>h.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:t.score}}}),l}const KE=15485081,JE=2450411,QE=8702998,MO=2282478,e2=16486972,kO=6710886;function t2(t){const n=[],{record:l}=t;l.name!=null&&n.push({label:String(l.name),textColor:0,backgroundColor:MO}),l.aliasOf&&n.push({label:"alias",textColor:0,backgroundColor:e2}),t.__vd_match&&n.push({label:"matches",textColor:0,backgroundColor:KE}),t.__vd_exactActive&&n.push({label:"exact",textColor:0,backgroundColor:QE}),t.__vd_active&&n.push({label:"active",textColor:0,backgroundColor:JE}),l.redirect&&n.push({label:"redirect: "+(typeof l.redirect=="string"?l.redirect:"Object"),textColor:16777215,backgroundColor:kO});let h=l.__vd_id;return h==null&&(h=String(LO++),l.__vd_id=h),{id:h,label:l.path,tags:n,children:t.children.map(t2)}}let LO=0;const PO=/^\/(.*)\/([a-z]*)$/;function n2(t,n){const l=n.matched.length&&kc(n.matched[n.matched.length-1],t.record);t.__vd_exactActive=t.__vd_active=l,l||(t.__vd_active=n.matched.some(h=>kc(h,t.record))),t.children.forEach(h=>n2(h,n))}function i2(t){t.__vd_match=!1,t.children.forEach(i2)}function mv(t,n){const l=String(t.re).match(PO);if(t.__vd_match=!1,!l||l.length<3)return!1;if(new RegExp(l[1].replace(/\$$/,""),l[2]).test(n))return t.children.forEach(w=>mv(w,n)),t.record.path!=="/"||n==="/"?(t.__vd_match=t.re.test(n),!0):!1;const _=t.record.path.toLowerCase(),g=ep(_);return!n.startsWith("/")&&(g.includes(n)||_.includes(n))||g.startsWith(n)||_.startsWith(n)||t.record.name&&String(t.record.name).includes(n)?!0:t.children.some(w=>mv(w,n))}function DO(t,n){const l={};for(const h in t)n.includes(h)||(l[h]=t[h]);return l}function qU(t){const n=qD(t.routes,t),l=t.parseQuery||dO,h=t.stringifyQuery||WE,_=t.history;if(!_)throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');const g=tp(),w=tp(),s=tp(),C=rL(Lc);let O=Lc;El&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const k=lv.bind(null,Fe=>""+Fe),D=lv.bind(null,fO),F=lv.bind(null,ep);function K(Fe,bt){let kt,Et;return zE(Fe)?(kt=n.getRecordMatcher(Fe),Et=bt):Et=Fe,n.addRoute(Et,kt)}function Se(Fe){const bt=n.getRecordMatcher(Fe);bt?n.removeRoute(bt):wi(`Cannot remove non-existent route "${String(Fe)}"`)}function pe(){return n.getRoutes().map(Fe=>Fe.record)}function J(Fe){return!!n.getRecordMatcher(Fe)}function H(Fe,bt){if(bt=Ri({},bt||C.value),typeof Fe=="string"){const oe=cv(l,Fe,bt.path),rt=n.resolve({path:oe.path},bt),ee=_.createHref(oe.fullPath);return ee.startsWith("//")?wi(`Location "${Fe}" resolved to "${ee}". A resolved location cannot start with multiple slashes.`):rt.matched.length||wi(`No match found for location with path "${Fe}"`),Ri(oe,rt,{params:F(rt.params),hash:ep(oe.hash),redirectedFrom:void 0,href:ee})}let kt;if("path"in Fe)"params"in Fe&&!("name"in Fe)&&Object.keys(Fe.params).length&&wi(`Path "${Fe.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),kt=Ri({},Fe,{path:cv(l,Fe.path,bt.path).path});else{const oe=Ri({},Fe.params);for(const rt in oe)oe[rt]==null&&delete oe[rt];kt=Ri({},Fe,{params:D(Fe.params)}),bt.params=D(bt.params)}const Et=n.resolve(kt,bt),sn=Fe.hash||"";sn&&!sn.startsWith("#")&&wi(`A \`hash\` should always start with the character "#". Replace "${sn}" with "#${sn}".`),Et.params=k(F(Et.params));const En=bD(h,Ri({},Fe,{hash:cO(sn),path:Et.path})),me=_.createHref(En);return me.startsWith("//")?wi(`Location "${Fe}" resolved to "${me}". A resolved location cannot start with multiple slashes.`):Et.matched.length||wi(`No match found for location with path "${"path"in Fe?Fe.path:Fe}"`),Ri({fullPath:En,hash:sn,query:h===WE?pO(Fe.query):Fe.query||{}},Et,{redirectedFrom:void 0,href:me})}function te(Fe){return typeof Fe=="string"?cv(l,Fe,C.value.path):Ri({},Fe)}function ge(Fe,bt){if(O!==Fe)return xf(8,{from:bt,to:Fe})}function ke(Fe){return Qe(Fe)}function Ae(Fe){return ke(Ri(te(Fe),{replace:!0}))}function Pe(Fe){const bt=Fe.matched[Fe.matched.length-1];if(bt&&bt.redirect){const{redirect:kt}=bt;let Et=typeof kt=="function"?kt(Fe):kt;if(typeof Et=="string"&&(Et=Et.includes("?")||Et.includes("#")?Et=te(Et):{path:Et},Et.params={}),!("path"in Et)&&!("name"in Et))throw wi(`Invalid redirect found:
${JSON.stringify(Et,null,2)}
 when navigating to "${Fe.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return Ri({query:Fe.query,hash:Fe.hash,params:Fe.params},Et)}}function Qe(Fe,bt){const kt=O=H(Fe),Et=C.value,sn=Fe.state,En=Fe.force,me=Fe.replace===!0,oe=Pe(kt);if(oe)return Qe(Ri(te(oe),{state:sn,force:En,replace:me}),bt||kt);const rt=kt;rt.redirectedFrom=bt;let ee;return!En&&ME(h,Et,kt)&&(ee=xf(16,{to:rt,from:Et}),Ut(Et,Et,!0,!1)),(ee?Promise.resolve(ee):nt(rt,Et)).catch(_e=>qu(_e)?_e:Ye(_e,rt,Et)).then(_e=>{if(_e){if(qu(_e,2))return ME(h,H(_e.to),rt)&&bt&&(bt._count=bt._count?bt._count+1:1)>10?(wi(`Detected an infinite redirection in a navigation guard when going from "${Et.fullPath}" to "${rt.fullPath}". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):Qe(Ri(te(_e.to),{state:sn,force:En,replace:me}),bt||rt)}else _e=Xe(rt,Et,!0,me,sn);return Ee(rt,Et,_e),_e})}function wt(Fe,bt){const kt=ge(Fe,bt);return kt?Promise.reject(kt):Promise.resolve()}function nt(Fe,bt){let kt;const[Et,sn,En]=OO(Fe,bt);kt=pv(Et.reverse(),"beforeRouteLeave",Fe,bt);for(const oe of Et)oe.leaveGuards.forEach(rt=>{kt.push(Pc(rt,Fe,bt))});const me=wt.bind(null,Fe,bt);return kt.push(me),bf(kt).then(()=>{kt=[];for(const oe of g.list())kt.push(Pc(oe,Fe,bt));return kt.push(me),bf(kt)}).then(()=>{kt=pv(sn,"beforeRouteUpdate",Fe,bt);for(const oe of sn)oe.updateGuards.forEach(rt=>{kt.push(Pc(rt,Fe,bt))});return kt.push(me),bf(kt)}).then(()=>{kt=[];for(const oe of Fe.matched)if(oe.beforeEnter&&!bt.matched.includes(oe))if(Array.isArray(oe.beforeEnter))for(const rt of oe.beforeEnter)kt.push(Pc(rt,Fe,bt));else kt.push(Pc(oe.beforeEnter,Fe,bt));return kt.push(me),bf(kt)}).then(()=>(Fe.matched.forEach(oe=>oe.enterCallbacks={}),kt=pv(En,"beforeRouteEnter",Fe,bt),kt.push(me),bf(kt))).then(()=>{kt=[];for(const oe of w.list())kt.push(Pc(oe,Fe,bt));return kt.push(me),bf(kt)}).catch(oe=>qu(oe,8)?oe:Promise.reject(oe))}function Ee(Fe,bt,kt){for(const Et of s.list())Et(Fe,bt,kt)}function Xe(Fe,bt,kt,Et,sn){const En=ge(Fe,bt);if(En)return En;const me=bt===Lc,oe=El?history.state:{};kt&&(Et||me?_.replace(Fe.fullPath,Ri({scroll:me&&oe&&oe.scroll},sn)):_.push(Fe.fullPath,sn)),C.value=Fe,Ut(Fe,bt,kt,me),lt()}let ot;function Be(){ot=_.listen((Fe,bt,kt)=>{const Et=H(Fe),sn=Pe(Et);if(sn){Qe(Ri(sn,{replace:!0}),Et).catch(Kd);return}O=Et;const En=C.value;El&&MD(PE(En.fullPath,kt.delta),Jm()),nt(Et,En).catch(me=>qu(me,4|8)?me:qu(me,2)?(Qe(me.to,Et).then(oe=>{qu(oe,4|16)&&!kt.delta&&kt.type===Jd.pop&&_.go(-1,!1)}).catch(Kd),Promise.reject()):(kt.delta&&_.go(-kt.delta,!1),Ye(me,Et,En))).then(me=>{me=me||Xe(Et,En,!1),me&&(kt.delta?_.go(-kt.delta,!1):kt.type===Jd.pop&&qu(me,4|16)&&_.go(-1,!1)),Ee(Et,En,me)}).catch(Kd)})}let ve=tp(),He=tp(),ct;function Ye(Fe,bt,kt){lt(Fe);const Et=He.list();return Et.length?Et.forEach(sn=>sn(Fe,bt,kt)):(wi("uncaught error during route navigation:"),console.error(Fe)),Promise.reject(Fe)}function ht(){return ct&&C.value!==Lc?Promise.resolve():new Promise((Fe,bt)=>{ve.add([Fe,bt])})}function lt(Fe){ct||(ct=!0,Be(),ve.list().forEach(([bt,kt])=>Fe?kt(Fe):bt()),ve.reset())}function Ut(Fe,bt,kt,Et){const{scrollBehavior:sn}=t;if(!El||!sn)return Promise.resolve();const En=!kt&&kD(PE(Fe.fullPath,0))||(Et||!kt)&&history.state&&history.state.scroll||null;return Ky().then(()=>sn(Fe,bt,En)).then(me=>me&&ID(me)).catch(me=>Ye(me,Fe,bt))}const qe=Fe=>_.go(Fe);let hn;const Gt=new Set;return{currentRoute:C,addRoute:K,removeRoute:Se,hasRoute:J,getRoutes:pe,resolve:H,options:t,push:ke,replace:Ae,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:g.add,beforeResolve:w.add,afterEach:s.add,onError:He.add,isReady:ht,install(Fe){const bt=this;Fe.component("RouterLink",vO),Fe.component("RouterView",EO),Fe.config.globalProperties.$router=bt,Object.defineProperty(Fe.config.globalProperties,"$route",{enumerable:!0,get:()=>$d(C)}),El&&!hn&&C.value===Lc&&(hn=!0,ke(_.location).catch(sn=>{wi("Unexpected error when starting the router:",sn)}));const kt={};for(const sn in Lc)kt[sn]=Hi(()=>C.value[sn]);Fe.provide(Km,bt),Fe.provide(sv,af(kt)),Fe.provide(av,C);const Et=Fe.unmount;Gt.add(Fe),Fe.unmount=function(){Gt.delete(Fe),Gt.size<1&&(O=Lc,ot&&ot(),C.value=Lc,hn=!1,ct=!1),Et()},El&&SO(Fe,bt,n)}}}function bf(t){return t.reduce((n,l)=>n.then(()=>l()),Promise.resolve())}function OO(t,n){const l=[],h=[],_=[],g=Math.max(n.matched.length,t.matched.length);for(let w=0;w<g;w++){const s=n.matched[w];s&&(t.matched.find(O=>kc(O,s))?h.push(s):l.push(s));const C=t.matched[w];C&&(n.matched.find(O=>kc(O,C))||_.push(C))}return[l,h,_]}function ZU(){return cs(Km)}function XU(){return cs(sv)}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var r2="store";function YU(t){return t===void 0&&(t=null),cs(t!==null?t:r2)}function Zu(t,n){Object.keys(t).forEach(function(l){return n(t[l],l)})}function o2(t){return t!==null&&typeof t=="object"}function zO(t){return t&&typeof t.then=="function"}function ea(t,n){if(!t)throw new Error("[vuex] "+n)}function RO(t,n){return function(){return t(n)}}function s2(t,n,l){return n.indexOf(t)<0&&(l&&l.prepend?n.unshift(t):n.push(t)),function(){var h=n.indexOf(t);h>-1&&n.splice(h,1)}}function a2(t,n){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var l=t.state;e_(t,l,[],t._modules.root,!0),_v(t,l,n)}function _v(t,n,l){var h=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var _=t._wrappedGetters,g={};Zu(_,function(w,s){g[s]=RO(w,t),Object.defineProperty(t.getters,s,{get:function(){return g[s]()},enumerable:!0})}),t._state=af({data:n}),t.strict&&UO(t),h&&l&&t._withCommit(function(){h.data=null})}function e_(t,n,l,h,_){var g=!l.length,w=t._modules.getNamespace(l);if(h.namespaced&&(t._modulesNamespaceMap[w]&&console.error("[vuex] duplicate namespace "+w+" for the namespaced module "+l.join("/")),t._modulesNamespaceMap[w]=h),!g&&!_){var s=gv(n,l.slice(0,-1)),C=l[l.length-1];t._withCommit(function(){C in s&&console.warn('[vuex] state field "'+C+'" was overridden by a module with the same name at "'+l.join(".")+'"'),s[C]=h.state})}var O=h.context=NO(t,w,l);h.forEachMutation(function(k,D){var F=w+D;BO(t,F,k,O)}),h.forEachAction(function(k,D){var F=k.root?D:w+D,K=k.handler||k;FO(t,F,K,O)}),h.forEachGetter(function(k,D){var F=w+D;$O(t,F,k,O)}),h.forEachChild(function(k,D){e_(t,n,l.concat(D),k,_)})}function NO(t,n,l){var h=n==="",_={dispatch:h?t.dispatch:function(g,w,s){var C=t_(g,w,s),O=C.payload,k=C.options,D=C.type;if((!k||!k.root)&&(D=n+D,!t._actions[D])){console.error("[vuex] unknown local action type: "+C.type+", global type: "+D);return}return t.dispatch(D,O)},commit:h?t.commit:function(g,w,s){var C=t_(g,w,s),O=C.payload,k=C.options,D=C.type;if((!k||!k.root)&&(D=n+D,!t._mutations[D])){console.error("[vuex] unknown local mutation type: "+C.type+", global type: "+D);return}t.commit(D,O,k)}};return Object.defineProperties(_,{getters:{get:h?function(){return t.getters}:function(){return l2(t,n)}},state:{get:function(){return gv(t.state,l)}}}),_}function l2(t,n){if(!t._makeLocalGettersCache[n]){var l={},h=n.length;Object.keys(t.getters).forEach(function(_){if(_.slice(0,h)===n){var g=_.slice(h);Object.defineProperty(l,g,{get:function(){return t.getters[_]},enumerable:!0})}}),t._makeLocalGettersCache[n]=l}return t._makeLocalGettersCache[n]}function BO(t,n,l,h){var _=t._mutations[n]||(t._mutations[n]=[]);_.push(function(w){l.call(t,h.state,w)})}function FO(t,n,l,h){var _=t._actions[n]||(t._actions[n]=[]);_.push(function(w){var s=l.call(t,{dispatch:h.dispatch,commit:h.commit,getters:h.getters,state:h.state,rootGetters:t.getters,rootState:t.state},w);return zO(s)||(s=Promise.resolve(s)),t._devtoolHook?s.catch(function(C){throw t._devtoolHook.emit("vuex:error",C),C}):s})}function $O(t,n,l,h){if(t._wrappedGetters[n]){console.error("[vuex] duplicate getter key: "+n);return}t._wrappedGetters[n]=function(g){return l(h.state,h.getters,g.state,g.getters)}}function UO(t){za(function(){return t._state.data},function(){ea(t._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function gv(t,n){return n.reduce(function(l,h){return l[h]},t)}function t_(t,n,l){return o2(t)&&t.type&&(l=n,n=t,t=t.type),ea(typeof t=="string","expects string as the type, but found "+typeof t+"."),{type:t,payload:n,options:l}}var jO="vuex bindings",c2="vuex:mutations",yv="vuex:actions",wf="vuex",VO=0;function GO(t,n){ov({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[jO]},function(l){l.addTimelineLayer({id:c2,label:"Vuex Mutations",color:u2}),l.addTimelineLayer({id:yv,label:"Vuex Actions",color:u2}),l.addInspector({id:wf,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),l.on.getInspectorTree(function(h){if(h.app===t&&h.inspectorId===wf)if(h.filter){var _=[];p2(_,n._modules.root,h.filter,""),h.rootNodes=_}else h.rootNodes=[d2(n._modules.root,"")]}),l.on.getInspectorState(function(h){if(h.app===t&&h.inspectorId===wf){var _=h.nodeId;l2(n,_),h.state=qO(XO(n._modules,_),_==="root"?n.getters:n._makeLocalGettersCache,_)}}),l.on.editInspectorState(function(h){if(h.app===t&&h.inspectorId===wf){var _=h.nodeId,g=h.path;_!=="root"&&(g=_.split("/").filter(Boolean).concat(g)),n._withCommit(function(){h.set(n._state.data,g,h.state.value)})}}),n.subscribe(function(h,_){var g={};h.payload&&(g.payload=h.payload),g.state=_,l.notifyComponentUpdate(),l.sendInspectorTree(wf),l.sendInspectorState(wf),l.addTimelineEvent({layerId:c2,event:{time:Date.now(),title:h.type,data:g}})}),n.subscribeAction({before:function(h,_){var g={};h.payload&&(g.payload=h.payload),h._id=VO++,h._time=Date.now(),g.state=_,l.addTimelineEvent({layerId:yv,event:{time:h._time,title:h.type,groupId:h._id,subtitle:"start",data:g}})},after:function(h,_){var g={},w=Date.now()-h._time;g.duration={_custom:{type:"duration",display:w+"ms",tooltip:"Action duration",value:w}},h.payload&&(g.payload=h.payload),g.state=_,l.addTimelineEvent({layerId:yv,event:{time:Date.now(),title:h.type,groupId:h._id,subtitle:"end",data:g}})}})})}var u2=8702998,HO=6710886,WO=16777215,h2={label:"namespaced",textColor:WO,backgroundColor:HO};function f2(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function d2(t,n){return{id:n||"root",label:f2(n),tags:t.namespaced?[h2]:[],children:Object.keys(t._children).map(function(l){return d2(t._children[l],n+l+"/")})}}function p2(t,n,l,h){h.includes(l)&&t.push({id:h||"root",label:h.endsWith("/")?h.slice(0,h.length-1):h||"Root",tags:n.namespaced?[h2]:[]}),Object.keys(n._children).forEach(function(_){p2(t,n._children[_],l,h+_+"/")})}function qO(t,n,l){n=l==="root"?n:n[l];var h=Object.keys(n),_={state:Object.keys(t.state).map(function(w){return{key:w,editable:!0,value:t.state[w]}})};if(h.length){var g=ZO(n);_.getters=Object.keys(g).map(function(w){return{key:w.endsWith("/")?f2(w):w,editable:!1,value:vv(function(){return g[w]})}})}return _}function ZO(t){var n={};return Object.keys(t).forEach(function(l){var h=l.split("/");if(h.length>1){var _=n,g=h.pop();h.forEach(function(w){_[w]||(_[w]={_custom:{value:{},display:w,tooltip:"Module",abstract:!0}}),_=_[w]._custom.value}),_[g]=vv(function(){return t[l]})}else n[l]=vv(function(){return t[l]})}),n}function XO(t,n){var l=n.split("/").filter(function(h){return h});return l.reduce(function(h,_,g){var w=h[_];if(!w)throw new Error('Missing module "'+_+'" for path "'+n+'".');return g===l.length-1?w:w._children},n==="root"?t:t.root._children)}function vv(t){try{return t()}catch(n){return n}}var ta=function(n,l){this.runtime=l,this._children=Object.create(null),this._rawModule=n;var h=n.state;this.state=(typeof h=="function"?h():h)||{}},m2={namespaced:{configurable:!0}};m2.namespaced.get=function(){return!!this._rawModule.namespaced};ta.prototype.addChild=function(n,l){this._children[n]=l};ta.prototype.removeChild=function(n){delete this._children[n]};ta.prototype.getChild=function(n){return this._children[n]};ta.prototype.hasChild=function(n){return n in this._children};ta.prototype.update=function(n){this._rawModule.namespaced=n.namespaced,n.actions&&(this._rawModule.actions=n.actions),n.mutations&&(this._rawModule.mutations=n.mutations),n.getters&&(this._rawModule.getters=n.getters)};ta.prototype.forEachChild=function(n){Zu(this._children,n)};ta.prototype.forEachGetter=function(n){this._rawModule.getters&&Zu(this._rawModule.getters,n)};ta.prototype.forEachAction=function(n){this._rawModule.actions&&Zu(this._rawModule.actions,n)};ta.prototype.forEachMutation=function(n){this._rawModule.mutations&&Zu(this._rawModule.mutations,n)};Object.defineProperties(ta.prototype,m2);var Xu=function(n){this.register([],n,!1)};Xu.prototype.get=function(n){return n.reduce(function(l,h){return l.getChild(h)},this.root)};Xu.prototype.getNamespace=function(n){var l=this.root;return n.reduce(function(h,_){return l=l.getChild(_),h+(l.namespaced?_+"/":"")},"")};Xu.prototype.update=function(n){_2([],this.root,n)};Xu.prototype.register=function(n,l,h){var _=this;h===void 0&&(h=!0),v2(n,l);var g=new ta(l,h);if(n.length===0)this.root=g;else{var w=this.get(n.slice(0,-1));w.addChild(n[n.length-1],g)}l.modules&&Zu(l.modules,function(s,C){_.register(n.concat(C),s,h)})};Xu.prototype.unregister=function(n){var l=this.get(n.slice(0,-1)),h=n[n.length-1],_=l.getChild(h);if(!_){console.warn("[vuex] trying to unregister module '"+h+"', which is not registered");return}!_.runtime||l.removeChild(h)};Xu.prototype.isRegistered=function(n){var l=this.get(n.slice(0,-1)),h=n[n.length-1];return l?l.hasChild(h):!1};function _2(t,n,l){if(v2(t,l),n.update(l),l.modules)for(var h in l.modules){if(!n.getChild(h)){console.warn("[vuex] trying to add a new module '"+h+"' on hot reloading, manual reload is needed");return}_2(t.concat(h),n.getChild(h),l.modules[h])}}var g2={assert:function(t){return typeof t=="function"},expected:"function"},YO={assert:function(t){return typeof t=="function"||typeof t=="object"&&typeof t.handler=="function"},expected:'function or object with "handler" function'},y2={getters:g2,mutations:g2,actions:YO};function v2(t,n){Object.keys(y2).forEach(function(l){if(!!n[l]){var h=y2[l];Zu(n[l],function(_,g){ea(h.assert(_),KO(t,l,g,_,h.expected))})}})}function KO(t,n,l,h,_){var g=n+" should be "+_+' but "'+n+"."+l+'"';return t.length>0&&(g+=' in module "'+t.join(".")+'"'),g+=" is "+JSON.stringify(h)+".",g}function KU(t){return new Zo(t)}var Zo=function t(n){var l=this;n===void 0&&(n={}),ea(typeof Promise!="undefined","vuex requires a Promise polyfill in this browser."),ea(this instanceof t,"store must be called with the new operator.");var h=n.plugins;h===void 0&&(h=[]);var _=n.strict;_===void 0&&(_=!1);var g=n.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Xu(n),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=g;var w=this,s=this,C=s.dispatch,O=s.commit;this.dispatch=function(F,K){return C.call(w,F,K)},this.commit=function(F,K,Se){return O.call(w,F,K,Se)},this.strict=_;var k=this._modules.root.state;e_(this,k,[],this._modules.root),_v(this,k),h.forEach(function(D){return D(l)})},xv={state:{configurable:!0}};Zo.prototype.install=function(n,l){n.provide(l||r2,this),n.config.globalProperties.$store=this;var h=this._devtools!==void 0?this._devtools:!0;h&&GO(n,this)};xv.state.get=function(){return this._state.data};xv.state.set=function(t){ea(!1,"use store.replaceState() to explicit replace store state.")};Zo.prototype.commit=function(n,l,h){var _=this,g=t_(n,l,h),w=g.type,s=g.payload,C=g.options,O={type:w,payload:s},k=this._mutations[w];if(!k){console.error("[vuex] unknown mutation type: "+w);return}this._withCommit(function(){k.forEach(function(F){F(s)})}),this._subscribers.slice().forEach(function(D){return D(O,_.state)}),C&&C.silent&&console.warn("[vuex] mutation type: "+w+". Silent option has been removed. Use the filter functionality in the vue-devtools")};Zo.prototype.dispatch=function(n,l){var h=this,_=t_(n,l),g=_.type,w=_.payload,s={type:g,payload:w},C=this._actions[g];if(!C){console.error("[vuex] unknown action type: "+g);return}try{this._actionSubscribers.slice().filter(function(k){return k.before}).forEach(function(k){return k.before(s,h.state)})}catch(k){console.warn("[vuex] error in before action subscribers: "),console.error(k)}var O=C.length>1?Promise.all(C.map(function(k){return k(w)})):C[0](w);return new Promise(function(k,D){O.then(function(F){try{h._actionSubscribers.filter(function(K){return K.after}).forEach(function(K){return K.after(s,h.state)})}catch(K){console.warn("[vuex] error in after action subscribers: "),console.error(K)}k(F)},function(F){try{h._actionSubscribers.filter(function(K){return K.error}).forEach(function(K){return K.error(s,h.state,F)})}catch(K){console.warn("[vuex] error in error action subscribers: "),console.error(K)}D(F)})})};Zo.prototype.subscribe=function(n,l){return s2(n,this._subscribers,l)};Zo.prototype.subscribeAction=function(n,l){var h=typeof n=="function"?{before:n}:n;return s2(h,this._actionSubscribers,l)};Zo.prototype.watch=function(n,l,h){var _=this;return ea(typeof n=="function","store.watch only accepts a function."),za(function(){return n(_.state,_.getters)},l,Object.assign({},h))};Zo.prototype.replaceState=function(n){var l=this;this._withCommit(function(){l._state.data=n})};Zo.prototype.registerModule=function(n,l,h){h===void 0&&(h={}),typeof n=="string"&&(n=[n]),ea(Array.isArray(n),"module path must be a string or an Array."),ea(n.length>0,"cannot register the root module by using registerModule."),this._modules.register(n,l),e_(this,this.state,n,this._modules.get(n),h.preserveState),_v(this,this.state)};Zo.prototype.unregisterModule=function(n){var l=this;typeof n=="string"&&(n=[n]),ea(Array.isArray(n),"module path must be a string or an Array."),this._modules.unregister(n),this._withCommit(function(){var h=gv(l.state,n.slice(0,-1));delete h[n[n.length-1]]}),a2(this)};Zo.prototype.hasModule=function(n){return typeof n=="string"&&(n=[n]),ea(Array.isArray(n),"module path must be a string or an Array."),this._modules.isRegistered(n)};Zo.prototype.hotUpdate=function(n){this._modules.update(n),a2(this,!0)};Zo.prototype._withCommit=function(n){var l=this._committing;this._committing=!0,n(),this._committing=l};Object.defineProperties(Zo.prototype,xv);var JU=wv(function(t,n){var l={};return n_(n)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),bv(n).forEach(function(h){var _=h.key,g=h.val;l[_]=function(){var s=this.$store.state,C=this.$store.getters;if(t){var O=Ev(this.$store,"mapState",t);if(!O)return;s=O.context.state,C=O.context.getters}return typeof g=="function"?g.call(this,s,C):s[g]},l[_].vuex=!0}),l}),QU=wv(function(t,n){var l={};return n_(n)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),bv(n).forEach(function(h){var _=h.key,g=h.val;l[_]=function(){for(var s=[],C=arguments.length;C--;)s[C]=arguments[C];var O=this.$store.commit;if(t){var k=Ev(this.$store,"mapMutations",t);if(!k)return;O=k.context.commit}return typeof g=="function"?g.apply(this,[O].concat(s)):O.apply(this.$store,[g].concat(s))}}),l}),e8=wv(function(t,n){var l={};return n_(n)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),bv(n).forEach(function(h){var _=h.key,g=h.val;l[_]=function(){for(var s=[],C=arguments.length;C--;)s[C]=arguments[C];var O=this.$store.dispatch;if(t){var k=Ev(this.$store,"mapActions",t);if(!k)return;O=k.context.dispatch}return typeof g=="function"?g.apply(this,[O].concat(s)):O.apply(this.$store,[g].concat(s))}}),l});function bv(t){return n_(t)?Array.isArray(t)?t.map(function(n){return{key:n,val:n}}):Object.keys(t).map(function(n){return{key:n,val:t[n]}}):[]}function n_(t){return Array.isArray(t)||o2(t)}function wv(t){return function(n,l){return typeof n!="string"?(l=n,n=""):n.charAt(n.length-1)!=="/"&&(n+="/"),t(n,l)}}function Ev(t,n,l){var h=t._modulesNamespaceMap[l];return h||console.error("[vuex] module namespace not found in "+n+"(): "+l),h}var Xo="top",fs="bottom",ds="right",Yo="left",ip="auto",Ef=[Xo,fs,ds,Yo],Yu="start",Tf="end",x2="clippingParents",Tv="viewport",Af="popper",b2="reference",Av=Ef.reduce(function(t,n){return t.concat([n+"-"+Yu,n+"-"+Tf])},[]),Sv=[].concat(Ef,[ip]).reduce(function(t,n){return t.concat([n,n+"-"+Yu,n+"-"+Tf])},[]),w2="beforeRead",E2="read",T2="afterRead",A2="beforeMain",S2="main",C2="afterMain",I2="beforeWrite",M2="write",k2="afterWrite",i_=[w2,E2,T2,A2,S2,C2,I2,M2,k2];function Ra(t){return t?(t.nodeName||"").toLowerCase():null}function na(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function rp(t){var n=na(t).Element;return t instanceof n||t instanceof Element}function ps(t){var n=na(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function L2(t){if(typeof ShadowRoot=="undefined")return!1;var n=na(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function JO(t){var n=t.state;Object.keys(n.elements).forEach(function(l){var h=n.styles[l]||{},_=n.attributes[l]||{},g=n.elements[l];!ps(g)||!Ra(g)||(Object.assign(g.style,h),Object.keys(_).forEach(function(w){var s=_[w];s===!1?g.removeAttribute(w):g.setAttribute(w,s===!0?"":s)}))})}function QO(t){var n=t.state,l={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,l.popper),n.styles=l,n.elements.arrow&&Object.assign(n.elements.arrow.style,l.arrow),function(){Object.keys(n.elements).forEach(function(h){var _=n.elements[h],g=n.attributes[h]||{},w=Object.keys(n.styles.hasOwnProperty(h)?n.styles[h]:l[h]),s=w.reduce(function(C,O){return C[O]="",C},{});!ps(_)||!Ra(_)||(Object.assign(_.style,s),Object.keys(g).forEach(function(C){_.removeAttribute(C)}))})}}var Cv={name:"applyStyles",enabled:!0,phase:"write",fn:JO,effect:QO,requires:["computeStyles"]};function ia(t){return t.split("-")[0]}function Sf(t,n){var l=t.getBoundingClientRect(),h=1,_=1;return{width:l.width/h,height:l.height/_,top:l.top/_,right:l.right/h,bottom:l.bottom/_,left:l.left/h,x:l.left/h,y:l.top/_}}function Iv(t){var n=Sf(t),l=t.offsetWidth,h=t.offsetHeight;return Math.abs(n.width-l)<=1&&(l=n.width),Math.abs(n.height-h)<=1&&(h=n.height),{x:t.offsetLeft,y:t.offsetTop,width:l,height:h}}function P2(t,n){var l=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(l&&L2(l)){var h=n;do{if(h&&t.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function ra(t){return na(t).getComputedStyle(t)}function e3(t){return["table","td","th"].indexOf(Ra(t))>=0}function Dc(t){return((rp(t)?t.ownerDocument:t.document)||window.document).documentElement}function r_(t){return Ra(t)==="html"?t:t.assignedSlot||t.parentNode||(L2(t)?t.host:null)||Dc(t)}function D2(t){return!ps(t)||ra(t).position==="fixed"?null:t.offsetParent}function t3(t){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,l=navigator.userAgent.indexOf("Trident")!==-1;if(l&&ps(t)){var h=ra(t);if(h.position==="fixed")return null}for(var _=r_(t);ps(_)&&["html","body"].indexOf(Ra(_))<0;){var g=ra(_);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||n&&g.willChange==="filter"||n&&g.filter&&g.filter!=="none")return _;_=_.parentNode}return null}function op(t){for(var n=na(t),l=D2(t);l&&e3(l)&&ra(l).position==="static";)l=D2(l);return l&&(Ra(l)==="html"||Ra(l)==="body"&&ra(l).position==="static")?n:l||t3(t)||n}function Mv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}var Oc=Math.max,sp=Math.min,o_=Math.round;function s_(t,n,l){return Oc(t,sp(n,l))}function O2(){return{top:0,right:0,bottom:0,left:0}}function z2(t){return Object.assign({},O2(),t)}function R2(t,n){return n.reduce(function(l,h){return l[h]=t,l},{})}var n3=function(n,l){return n=typeof n=="function"?n(Object.assign({},l.rects,{placement:l.placement})):n,z2(typeof n!="number"?n:R2(n,Ef))};function i3(t){var n,l=t.state,h=t.name,_=t.options,g=l.elements.arrow,w=l.modifiersData.popperOffsets,s=ia(l.placement),C=Mv(s),O=[Yo,ds].indexOf(s)>=0,k=O?"height":"width";if(!(!g||!w)){var D=n3(_.padding,l),F=Iv(g),K=C==="y"?Xo:Yo,Se=C==="y"?fs:ds,pe=l.rects.reference[k]+l.rects.reference[C]-w[C]-l.rects.popper[k],J=w[C]-l.rects.reference[C],H=op(g),te=H?C==="y"?H.clientHeight||0:H.clientWidth||0:0,ge=pe/2-J/2,ke=D[K],Ae=te-F[k]-D[Se],Pe=te/2-F[k]/2+ge,Qe=s_(ke,Pe,Ae),wt=C;l.modifiersData[h]=(n={},n[wt]=Qe,n.centerOffset=Qe-Pe,n)}}function r3(t){var n=t.state,l=t.options,h=l.element,_=h===void 0?"[data-popper-arrow]":h;if(_!=null&&!(typeof _=="string"&&(_=n.elements.popper.querySelector(_),!_))){if(ps(_)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),!P2(n.elements.popper,_)){console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "));return}n.elements.arrow=_}}var N2={name:"arrow",enabled:!0,phase:"main",fn:i3,effect:r3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cf(t){return t.split("-")[1]}var o3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function s3(t){var n=t.x,l=t.y,h=window,_=h.devicePixelRatio||1;return{x:o_(o_(n*_)/_)||0,y:o_(o_(l*_)/_)||0}}function B2(t){var n,l=t.popper,h=t.popperRect,_=t.placement,g=t.variation,w=t.offsets,s=t.position,C=t.gpuAcceleration,O=t.adaptive,k=t.roundOffsets,D=k===!0?s3(w):typeof k=="function"?k(w):w,F=D.x,K=F===void 0?0:F,Se=D.y,pe=Se===void 0?0:Se,J=w.hasOwnProperty("x"),H=w.hasOwnProperty("y"),te=Yo,ge=Xo,ke=window;if(O){var Ae=op(l),Pe="clientHeight",Qe="clientWidth";Ae===na(l)&&(Ae=Dc(l),ra(Ae).position!=="static"&&s==="absolute"&&(Pe="scrollHeight",Qe="scrollWidth")),Ae=Ae,(_===Xo||(_===Yo||_===ds)&&g===Tf)&&(ge=fs,pe-=Ae[Pe]-h.height,pe*=C?1:-1),(_===Yo||(_===Xo||_===fs)&&g===Tf)&&(te=ds,K-=Ae[Qe]-h.width,K*=C?1:-1)}var wt=Object.assign({position:s},O&&o3);if(C){var nt;return Object.assign({},wt,(nt={},nt[ge]=H?"0":"",nt[te]=J?"0":"",nt.transform=(ke.devicePixelRatio||1)<=1?"translate("+K+"px, "+pe+"px)":"translate3d("+K+"px, "+pe+"px, 0)",nt))}return Object.assign({},wt,(n={},n[ge]=H?pe+"px":"",n[te]=J?K+"px":"",n.transform="",n))}function a3(t){var n=t.state,l=t.options,h=l.gpuAcceleration,_=h===void 0?!0:h,g=l.adaptive,w=g===void 0?!0:g,s=l.roundOffsets,C=s===void 0?!0:s;{var O=ra(n.elements.popper).transitionProperty||"";w&&["transform","top","right","bottom","left"].some(function(D){return O.indexOf(D)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var k={placement:ia(n.placement),variation:Cf(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:_};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,B2(Object.assign({},k,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:w,roundOffsets:C})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,B2(Object.assign({},k,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var kv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:a3,data:{}},a_={passive:!0};function l3(t){var n=t.state,l=t.instance,h=t.options,_=h.scroll,g=_===void 0?!0:_,w=h.resize,s=w===void 0?!0:w,C=na(n.elements.popper),O=[].concat(n.scrollParents.reference,n.scrollParents.popper);return g&&O.forEach(function(k){k.addEventListener("scroll",l.update,a_)}),s&&C.addEventListener("resize",l.update,a_),function(){g&&O.forEach(function(k){k.removeEventListener("scroll",l.update,a_)}),s&&C.removeEventListener("resize",l.update,a_)}}var Lv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:l3,data:{}},c3={left:"right",right:"left",bottom:"top",top:"bottom"};function l_(t){return t.replace(/left|right|bottom|top/g,function(n){return c3[n]})}var u3={start:"end",end:"start"};function F2(t){return t.replace(/start|end/g,function(n){return u3[n]})}function Pv(t){var n=na(t),l=n.pageXOffset,h=n.pageYOffset;return{scrollLeft:l,scrollTop:h}}function Dv(t){return Sf(Dc(t)).left+Pv(t).scrollLeft}function h3(t){var n=na(t),l=Dc(t),h=n.visualViewport,_=l.clientWidth,g=l.clientHeight,w=0,s=0;return h&&(_=h.width,g=h.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(w=h.offsetLeft,s=h.offsetTop)),{width:_,height:g,x:w+Dv(t),y:s}}function f3(t){var n,l=Dc(t),h=Pv(t),_=(n=t.ownerDocument)==null?void 0:n.body,g=Oc(l.scrollWidth,l.clientWidth,_?_.scrollWidth:0,_?_.clientWidth:0),w=Oc(l.scrollHeight,l.clientHeight,_?_.scrollHeight:0,_?_.clientHeight:0),s=-h.scrollLeft+Dv(t),C=-h.scrollTop;return ra(_||l).direction==="rtl"&&(s+=Oc(l.clientWidth,_?_.clientWidth:0)-g),{width:g,height:w,x:s,y:C}}function Ov(t){var n=ra(t),l=n.overflow,h=n.overflowX,_=n.overflowY;return/auto|scroll|overlay|hidden/.test(l+_+h)}function $2(t){return["html","body","#document"].indexOf(Ra(t))>=0?t.ownerDocument.body:ps(t)&&Ov(t)?t:$2(r_(t))}function ap(t,n){var l;n===void 0&&(n=[]);var h=$2(t),_=h===((l=t.ownerDocument)==null?void 0:l.body),g=na(h),w=_?[g].concat(g.visualViewport||[],Ov(h)?h:[]):h,s=n.concat(w);return _?s:s.concat(ap(r_(w)))}function zv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function d3(t){var n=Sf(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function U2(t,n){return n===Tv?zv(h3(t)):ps(n)?d3(n):zv(f3(Dc(t)))}function p3(t){var n=ap(r_(t)),l=["absolute","fixed"].indexOf(ra(t).position)>=0,h=l&&ps(t)?op(t):t;return rp(h)?n.filter(function(_){return rp(_)&&P2(_,h)&&Ra(_)!=="body"}):[]}function m3(t,n,l){var h=n==="clippingParents"?p3(t):[].concat(n),_=[].concat(h,[l]),g=_[0],w=_.reduce(function(s,C){var O=U2(t,C);return s.top=Oc(O.top,s.top),s.right=sp(O.right,s.right),s.bottom=sp(O.bottom,s.bottom),s.left=Oc(O.left,s.left),s},U2(t,g));return w.width=w.right-w.left,w.height=w.bottom-w.top,w.x=w.left,w.y=w.top,w}function j2(t){var n=t.reference,l=t.element,h=t.placement,_=h?ia(h):null,g=h?Cf(h):null,w=n.x+n.width/2-l.width/2,s=n.y+n.height/2-l.height/2,C;switch(_){case Xo:C={x:w,y:n.y-l.height};break;case fs:C={x:w,y:n.y+n.height};break;case ds:C={x:n.x+n.width,y:s};break;case Yo:C={x:n.x-l.width,y:s};break;default:C={x:n.x,y:n.y}}var O=_?Mv(_):null;if(O!=null){var k=O==="y"?"height":"width";switch(g){case Yu:C[O]=C[O]-(n[k]/2-l[k]/2);break;case Tf:C[O]=C[O]+(n[k]/2-l[k]/2);break}}return C}function If(t,n){n===void 0&&(n={});var l=n,h=l.placement,_=h===void 0?t.placement:h,g=l.boundary,w=g===void 0?x2:g,s=l.rootBoundary,C=s===void 0?Tv:s,O=l.elementContext,k=O===void 0?Af:O,D=l.altBoundary,F=D===void 0?!1:D,K=l.padding,Se=K===void 0?0:K,pe=z2(typeof Se!="number"?Se:R2(Se,Ef)),J=k===Af?b2:Af,H=t.rects.popper,te=t.elements[F?J:k],ge=m3(rp(te)?te:te.contextElement||Dc(t.elements.popper),w,C),ke=Sf(t.elements.reference),Ae=j2({reference:ke,element:H,strategy:"absolute",placement:_}),Pe=zv(Object.assign({},H,Ae)),Qe=k===Af?Pe:ke,wt={top:ge.top-Qe.top+pe.top,bottom:Qe.bottom-ge.bottom+pe.bottom,left:ge.left-Qe.left+pe.left,right:Qe.right-ge.right+pe.right},nt=t.modifiersData.offset;if(k===Af&&nt){var Ee=nt[_];Object.keys(wt).forEach(function(Xe){var ot=[ds,fs].indexOf(Xe)>=0?1:-1,Be=[Xo,fs].indexOf(Xe)>=0?"y":"x";wt[Xe]+=Ee[Be]*ot})}return wt}function _3(t,n){n===void 0&&(n={});var l=n,h=l.placement,_=l.boundary,g=l.rootBoundary,w=l.padding,s=l.flipVariations,C=l.allowedAutoPlacements,O=C===void 0?Sv:C,k=Cf(h),D=k?s?Av:Av.filter(function(Se){return Cf(Se)===k}):Ef,F=D.filter(function(Se){return O.indexOf(Se)>=0});F.length===0&&(F=D,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var K=F.reduce(function(Se,pe){return Se[pe]=If(t,{placement:pe,boundary:_,rootBoundary:g,padding:w})[ia(pe)],Se},{});return Object.keys(K).sort(function(Se,pe){return K[Se]-K[pe]})}function g3(t){if(ia(t)===ip)return[];var n=l_(t);return[F2(t),n,F2(n)]}function y3(t){var n=t.state,l=t.options,h=t.name;if(!n.modifiersData[h]._skip){for(var _=l.mainAxis,g=_===void 0?!0:_,w=l.altAxis,s=w===void 0?!0:w,C=l.fallbackPlacements,O=l.padding,k=l.boundary,D=l.rootBoundary,F=l.altBoundary,K=l.flipVariations,Se=K===void 0?!0:K,pe=l.allowedAutoPlacements,J=n.options.placement,H=ia(J),te=H===J,ge=C||(te||!Se?[l_(J)]:g3(J)),ke=[J].concat(ge).reduce(function(dn,Fe){return dn.concat(ia(Fe)===ip?_3(n,{placement:Fe,boundary:k,rootBoundary:D,padding:O,flipVariations:Se,allowedAutoPlacements:pe}):Fe)},[]),Ae=n.rects.reference,Pe=n.rects.popper,Qe=new Map,wt=!0,nt=ke[0],Ee=0;Ee<ke.length;Ee++){var Xe=ke[Ee],ot=ia(Xe),Be=Cf(Xe)===Yu,ve=[Xo,fs].indexOf(ot)>=0,He=ve?"width":"height",ct=If(n,{placement:Xe,boundary:k,rootBoundary:D,altBoundary:F,padding:O}),Ye=ve?Be?ds:Yo:Be?fs:Xo;Ae[He]>Pe[He]&&(Ye=l_(Ye));var ht=l_(Ye),lt=[];if(g&&lt.push(ct[ot]<=0),s&&lt.push(ct[Ye]<=0,ct[ht]<=0),lt.every(function(dn){return dn})){nt=Xe,wt=!1;break}Qe.set(Xe,lt)}if(wt)for(var Ut=Se?3:1,qe=function(Fe){var bt=ke.find(function(kt){var Et=Qe.get(kt);if(Et)return Et.slice(0,Fe).every(function(sn){return sn})});if(bt)return nt=bt,"break"},hn=Ut;hn>0;hn--){var Gt=qe(hn);if(Gt==="break")break}n.placement!==nt&&(n.modifiersData[h]._skip=!0,n.placement=nt,n.reset=!0)}}var V2={name:"flip",enabled:!0,phase:"main",fn:y3,requiresIfExists:["offset"],data:{_skip:!1}};function G2(t,n,l){return l===void 0&&(l={x:0,y:0}),{top:t.top-n.height-l.y,right:t.right-n.width+l.x,bottom:t.bottom-n.height+l.y,left:t.left-n.width-l.x}}function H2(t){return[Xo,ds,fs,Yo].some(function(n){return t[n]>=0})}function v3(t){var n=t.state,l=t.name,h=n.rects.reference,_=n.rects.popper,g=n.modifiersData.preventOverflow,w=If(n,{elementContext:"reference"}),s=If(n,{altBoundary:!0}),C=G2(w,h),O=G2(s,_,g),k=H2(C),D=H2(O);n.modifiersData[l]={referenceClippingOffsets:C,popperEscapeOffsets:O,isReferenceHidden:k,hasPopperEscaped:D},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":D})}var W2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:v3};function x3(t,n,l){var h=ia(t),_=[Yo,Xo].indexOf(h)>=0?-1:1,g=typeof l=="function"?l(Object.assign({},n,{placement:t})):l,w=g[0],s=g[1];return w=w||0,s=(s||0)*_,[Yo,ds].indexOf(h)>=0?{x:s,y:w}:{x:w,y:s}}function b3(t){var n=t.state,l=t.options,h=t.name,_=l.offset,g=_===void 0?[0,0]:_,w=Sv.reduce(function(k,D){return k[D]=x3(D,n.rects,g),k},{}),s=w[n.placement],C=s.x,O=s.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=C,n.modifiersData.popperOffsets.y+=O),n.modifiersData[h]=w}var q2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:b3};function w3(t){var n=t.state,l=t.name;n.modifiersData[l]=j2({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var Rv={name:"popperOffsets",enabled:!0,phase:"read",fn:w3,data:{}};function E3(t){return t==="x"?"y":"x"}function T3(t){var n=t.state,l=t.options,h=t.name,_=l.mainAxis,g=_===void 0?!0:_,w=l.altAxis,s=w===void 0?!1:w,C=l.boundary,O=l.rootBoundary,k=l.altBoundary,D=l.padding,F=l.tether,K=F===void 0?!0:F,Se=l.tetherOffset,pe=Se===void 0?0:Se,J=If(n,{boundary:C,rootBoundary:O,padding:D,altBoundary:k}),H=ia(n.placement),te=Cf(n.placement),ge=!te,ke=Mv(H),Ae=E3(ke),Pe=n.modifiersData.popperOffsets,Qe=n.rects.reference,wt=n.rects.popper,nt=typeof pe=="function"?pe(Object.assign({},n.rects,{placement:n.placement})):pe,Ee={x:0,y:0};if(!!Pe){if(g||s){var Xe=ke==="y"?Xo:Yo,ot=ke==="y"?fs:ds,Be=ke==="y"?"height":"width",ve=Pe[ke],He=Pe[ke]+J[Xe],ct=Pe[ke]-J[ot],Ye=K?-wt[Be]/2:0,ht=te===Yu?Qe[Be]:wt[Be],lt=te===Yu?-wt[Be]:-Qe[Be],Ut=n.elements.arrow,qe=K&&Ut?Iv(Ut):{width:0,height:0},hn=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:O2(),Gt=hn[Xe],dn=hn[ot],Fe=s_(0,Qe[Be],qe[Be]),bt=ge?Qe[Be]/2-Ye-Fe-Gt-nt:ht-Fe-Gt-nt,kt=ge?-Qe[Be]/2+Ye+Fe+dn+nt:lt+Fe+dn+nt,Et=n.elements.arrow&&op(n.elements.arrow),sn=Et?ke==="y"?Et.clientTop||0:Et.clientLeft||0:0,En=n.modifiersData.offset?n.modifiersData.offset[n.placement][ke]:0,me=Pe[ke]+bt-En-sn,oe=Pe[ke]+kt-En;if(g){var rt=s_(K?sp(He,me):He,ve,K?Oc(ct,oe):ct);Pe[ke]=rt,Ee[ke]=rt-ve}if(s){var ee=ke==="x"?Xo:Yo,_e=ke==="x"?fs:ds,We=Pe[Ae],Ze=We+J[ee],pt=We-J[_e],St=s_(K?sp(Ze,me):Ze,We,K?Oc(pt,oe):pt);Pe[Ae]=St,Ee[Ae]=St-We}}n.modifiersData[h]=Ee}}var Z2={name:"preventOverflow",enabled:!0,phase:"main",fn:T3,requiresIfExists:["offset"]};function A3(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function S3(t){return t===na(t)||!ps(t)?Pv(t):A3(t)}function C3(t){var n=t.getBoundingClientRect(),l=n.width/t.offsetWidth||1,h=n.height/t.offsetHeight||1;return l!==1||h!==1}function I3(t,n,l){l===void 0&&(l=!1);var h=ps(n);ps(n)&&C3(n);var _=Dc(n),g=Sf(t),w={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(h||!h&&!l)&&((Ra(n)!=="body"||Ov(_))&&(w=S3(n)),ps(n)?(s=Sf(n),s.x+=n.clientLeft,s.y+=n.clientTop):_&&(s.x=Dv(_))),{x:g.left+w.scrollLeft-s.x,y:g.top+w.scrollTop-s.y,width:g.width,height:g.height}}function M3(t){var n=new Map,l=new Set,h=[];t.forEach(function(g){n.set(g.name,g)});function _(g){l.add(g.name);var w=[].concat(g.requires||[],g.requiresIfExists||[]);w.forEach(function(s){if(!l.has(s)){var C=n.get(s);C&&_(C)}}),h.push(g)}return t.forEach(function(g){l.has(g.name)||_(g)}),h}function k3(t){var n=M3(t);return i_.reduce(function(l,h){return l.concat(n.filter(function(_){return _.phase===h}))},[])}function L3(t){var n;return function(){return n||(n=new Promise(function(l){Promise.resolve().then(function(){n=void 0,l(t())})})),n}}function zc(t){for(var n=arguments.length,l=new Array(n>1?n-1:0),h=1;h<n;h++)l[h-1]=arguments[h];return[].concat(l).reduce(function(_,g){return _.replace(/%s/,g)},t)}var Ku='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',P3='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',X2=["name","enabled","phase","fn","effect","requires","options"];function D3(t){t.forEach(function(n){[].concat(Object.keys(n),X2).filter(function(l,h,_){return _.indexOf(l)===h}).forEach(function(l){switch(l){case"name":typeof n.name!="string"&&console.error(zc(Ku,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":typeof n.enabled!="boolean"&&console.error(zc(Ku,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));break;case"phase":i_.indexOf(n.phase)<0&&console.error(zc(Ku,n.name,'"phase"',"either "+i_.join(", "),'"'+String(n.phase)+'"'));break;case"fn":typeof n.fn!="function"&&console.error(zc(Ku,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":n.effect!=null&&typeof n.effect!="function"&&console.error(zc(Ku,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":n.requires!=null&&!Array.isArray(n.requires)&&console.error(zc(Ku,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(zc(Ku,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+X2.map(function(h){return'"'+h+'"'}).join(", ")+'; but "'+l+'" was provided.')}n.requires&&n.requires.forEach(function(h){t.find(function(_){return _.name===h})==null&&console.error(zc(P3,String(n.name),h,h))})})})}function O3(t,n){var l=new Set;return t.filter(function(h){var _=n(h);if(!l.has(_))return l.add(_),!0})}function z3(t){var n=t.reduce(function(l,h){var _=l[h.name];return l[h.name]=_?Object.assign({},_,h,{options:Object.assign({},_.options,h.options),data:Object.assign({},_.data,h.data)}):h,l},{});return Object.keys(n).map(function(l){return n[l]})}var Y2="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",R3="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",K2={placement:"bottom",modifiers:[],strategy:"absolute"};function J2(){for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return!n.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function c_(t){t===void 0&&(t={});var n=t,l=n.defaultModifiers,h=l===void 0?[]:l,_=n.defaultOptions,g=_===void 0?K2:_;return function(s,C,O){O===void 0&&(O=g);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},K2,g),modifiersData:{},elements:{reference:s,popper:C},attributes:{},styles:{}},D=[],F=!1,K={state:k,setOptions:function(H){var te=typeof H=="function"?H(k.options):H;pe(),k.options=Object.assign({},g,k.options,te),k.scrollParents={reference:rp(s)?ap(s):s.contextElement?ap(s.contextElement):[],popper:ap(C)};var ge=k3(z3([].concat(h,k.options.modifiers)));k.orderedModifiers=ge.filter(function(Xe){return Xe.enabled});{var ke=O3([].concat(ge,k.options.modifiers),function(Xe){var ot=Xe.name;return ot});if(D3(ke),ia(k.options.placement)===ip){var Ae=k.orderedModifiers.find(function(Xe){var ot=Xe.name;return ot==="flip"});Ae||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var Pe=ra(C),Qe=Pe.marginTop,wt=Pe.marginRight,nt=Pe.marginBottom,Ee=Pe.marginLeft;[Qe,wt,nt,Ee].some(function(Xe){return parseFloat(Xe)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return Se(),K.update()},forceUpdate:function(){if(!F){var H=k.elements,te=H.reference,ge=H.popper;if(!J2(te,ge)){console.error(Y2);return}k.rects={reference:I3(te,op(ge),k.options.strategy==="fixed"),popper:Iv(ge)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(Xe){return k.modifiersData[Xe.name]=Object.assign({},Xe.data)});for(var ke=0,Ae=0;Ae<k.orderedModifiers.length;Ae++){if(ke+=1,ke>100){console.error(R3);break}if(k.reset===!0){k.reset=!1,Ae=-1;continue}var Pe=k.orderedModifiers[Ae],Qe=Pe.fn,wt=Pe.options,nt=wt===void 0?{}:wt,Ee=Pe.name;typeof Qe=="function"&&(k=Qe({state:k,options:nt,name:Ee,instance:K})||k)}}},update:L3(function(){return new Promise(function(J){K.forceUpdate(),J(k)})}),destroy:function(){pe(),F=!0}};if(!J2(s,C))return console.error(Y2),K;K.setOptions(O).then(function(J){!F&&O.onFirstUpdate&&O.onFirstUpdate(J)});function Se(){k.orderedModifiers.forEach(function(J){var H=J.name,te=J.options,ge=te===void 0?{}:te,ke=J.effect;if(typeof ke=="function"){var Ae=ke({state:k,name:H,instance:K,options:ge}),Pe=function(){};D.push(Ae||Pe)}})}function pe(){D.forEach(function(J){return J()}),D=[]}return K}}var N3=c_(),B3=[Lv,Rv,kv,Cv],F3=c_({defaultModifiers:B3}),$3=[Lv,Rv,kv,Cv,q2,V2,Z2,N2,W2],Nv=c_({defaultModifiers:$3}),Q2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",popperGenerator:c_,detectOverflow:If,createPopperBase:N3,createPopper:Nv,createPopperLite:F3,top:Xo,bottom:fs,right:ds,left:Yo,auto:ip,basePlacements:Ef,start:Yu,end:Tf,clippingParents:x2,viewport:Tv,popper:Af,reference:b2,variationPlacements:Av,placements:Sv,beforeRead:w2,read:E2,afterRead:T2,beforeMain:A2,main:S2,afterMain:C2,beforeWrite:I2,write:M2,afterWrite:k2,modifierPhases:i_,applyStyles:Cv,arrow:N2,computeStyles:kv,eventListeners:Lv,flip:V2,hide:W2,offset:q2,popperOffsets:Rv,preventOverflow:Z2});/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const U3=1e6,j3=1e3,Bv="transitionend",V3=t=>t==null?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),G3=t=>{do t+=Math.floor(Math.random()*U3);while(document.getElementById(t));return t},eT=t=>{let n=t.getAttribute("data-bs-target");if(!n||n==="#"){let l=t.getAttribute("href");if(!l||!l.includes("#")&&!l.startsWith("."))return null;l.includes("#")&&!l.startsWith("#")&&(l=`#${l.split("#")[1]}`),n=l&&l!=="#"?l.trim():null}return n},Fv=t=>{const n=eT(t);return n&&document.querySelector(n)?n:null},Rc=t=>{const n=eT(t);return n?document.querySelector(n):null},H3=t=>{if(!t)return 0;let{transitionDuration:n,transitionDelay:l}=window.getComputedStyle(t);const h=Number.parseFloat(n),_=Number.parseFloat(l);return!h&&!_?0:(n=n.split(",")[0],l=l.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(l))*j3)},tT=t=>{t.dispatchEvent(new Event(Bv))},Ju=t=>!t||typeof t!="object"?!1:(typeof t.jquery!="undefined"&&(t=t[0]),typeof t.nodeType!="undefined"),Nc=t=>Ju(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,Na=(t,n,l)=>{Object.keys(l).forEach(h=>{const _=l[h],g=n[h],w=g&&Ju(g)?"element":V3(g);if(!new RegExp(_).test(w))throw new TypeError(`${t.toUpperCase()}: Option "${h}" provided type "${w}" but expected type "${_}".`)})},lp=t=>!Ju(t)||t.getClientRects().length===0?!1:getComputedStyle(t).getPropertyValue("visibility")==="visible",Qu=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled!="undefined"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",nT=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const n=t.getRootNode();return n instanceof ShadowRoot?n:null}return t instanceof ShadowRoot?t:t.parentNode?nT(t.parentNode):null},u_=()=>{},Mf=t=>{t.offsetHeight},iT=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},$v=[],W3=t=>{document.readyState==="loading"?($v.length||document.addEventListener("DOMContentLoaded",()=>{$v.forEach(n=>n())}),$v.push(t)):t()},Ko=()=>document.documentElement.dir==="rtl",Ps=t=>{W3(()=>{const n=iT();if(n){const l=t.NAME,h=n.fn[l];n.fn[l]=t.jQueryInterface,n.fn[l].Constructor=t,n.fn[l].noConflict=()=>(n.fn[l]=h,t.jQueryInterface)}})},eh=t=>{typeof t=="function"&&t()},rT=(t,n,l=!0)=>{if(!l){eh(t);return}const h=5,_=H3(n)+h;let g=!1;const w=({target:s})=>{s===n&&(g=!0,n.removeEventListener(Bv,w),eh(t))};n.addEventListener(Bv,w),setTimeout(()=>{g||tT(n)},_)},oT=(t,n,l,h)=>{let _=t.indexOf(n);if(_===-1)return t[!l&&h?t.length-1:0];const g=t.length;return _+=l?1:-1,h&&(_=(_+g)%g),t[Math.max(0,Math.min(_,g-1))]},q3=/[^.]*(?=\..*)\.|.*/,Z3=/\..*/,X3=/::\d+$/,Uv={};let sT=1;const Y3={mouseenter:"mouseover",mouseleave:"mouseout"},K3=/^(mouseenter|mouseleave)/i,aT=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function lT(t,n){return n&&`${n}::${sT++}`||t.uidEvent||sT++}function cT(t){const n=lT(t);return t.uidEvent=n,Uv[n]=Uv[n]||{},Uv[n]}function J3(t,n){return function l(h){return h.delegateTarget=t,l.oneOff&&Ft.off(t,h.type,n),n.apply(t,[h])}}function Q3(t,n,l){return function h(_){const g=t.querySelectorAll(n);for(let{target:w}=_;w&&w!==this;w=w.parentNode)for(let s=g.length;s--;)if(g[s]===w)return _.delegateTarget=w,h.oneOff&&Ft.off(t,_.type,n,l),l.apply(w,[_]);return null}}function uT(t,n,l=null){const h=Object.keys(t);for(let _=0,g=h.length;_<g;_++){const w=t[h[_]];if(w.originalHandler===n&&w.delegationSelector===l)return w}return null}function hT(t,n,l){const h=typeof n=="string",_=h?l:n;let g=dT(t);return aT.has(g)||(g=t),[h,_,g]}function fT(t,n,l,h,_){if(typeof n!="string"||!t)return;if(l||(l=h,h=null),K3.test(n)){const K=Se=>function(pe){if(!pe.relatedTarget||pe.relatedTarget!==pe.delegateTarget&&!pe.delegateTarget.contains(pe.relatedTarget))return Se.call(this,pe)};h?h=K(h):l=K(l)}const[g,w,s]=hT(n,l,h),C=cT(t),O=C[s]||(C[s]={}),k=uT(O,w,g?l:null);if(k){k.oneOff=k.oneOff&&_;return}const D=lT(w,n.replace(q3,"")),F=g?Q3(t,l,h):J3(t,l);F.delegationSelector=g?l:null,F.originalHandler=w,F.oneOff=_,F.uidEvent=D,O[D]=F,t.addEventListener(s,F,g)}function jv(t,n,l,h,_){const g=uT(n[l],h,_);!g||(t.removeEventListener(l,g,Boolean(_)),delete n[l][g.uidEvent])}function ez(t,n,l,h){const _=n[l]||{};Object.keys(_).forEach(g=>{if(g.includes(h)){const w=_[g];jv(t,n,l,w.originalHandler,w.delegationSelector)}})}function dT(t){return t=t.replace(Z3,""),Y3[t]||t}const Ft={on(t,n,l,h){fT(t,n,l,h,!1)},one(t,n,l,h){fT(t,n,l,h,!0)},off(t,n,l,h){if(typeof n!="string"||!t)return;const[_,g,w]=hT(n,l,h),s=w!==n,C=cT(t),O=n.startsWith(".");if(typeof g!="undefined"){if(!C||!C[w])return;jv(t,C,w,g,_?l:null);return}O&&Object.keys(C).forEach(D=>{ez(t,C,D,n.slice(1))});const k=C[w]||{};Object.keys(k).forEach(D=>{const F=D.replace(X3,"");if(!s||n.includes(F)){const K=k[D];jv(t,C,w,K.originalHandler,K.delegationSelector)}})},trigger(t,n,l){if(typeof n!="string"||!t)return null;const h=iT(),_=dT(n),g=n!==_,w=aT.has(_);let s,C=!0,O=!0,k=!1,D=null;return g&&h&&(s=h.Event(n,l),h(t).trigger(s),C=!s.isPropagationStopped(),O=!s.isImmediatePropagationStopped(),k=s.isDefaultPrevented()),w?(D=document.createEvent("HTMLEvents"),D.initEvent(_,C,!0)):D=new CustomEvent(n,{bubbles:C,cancelable:!0}),typeof l!="undefined"&&Object.keys(l).forEach(F=>{Object.defineProperty(D,F,{get(){return l[F]}})}),k&&D.preventDefault(),O&&t.dispatchEvent(D),D.defaultPrevented&&typeof s!="undefined"&&s.preventDefault(),D}},Bc=new Map,cp={set(t,n,l){Bc.has(t)||Bc.set(t,new Map);const h=Bc.get(t);if(!h.has(n)&&h.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`);return}h.set(n,l)},get(t,n){return Bc.has(t)&&Bc.get(t).get(n)||null},remove(t,n){if(!Bc.has(t))return;const l=Bc.get(t);l.delete(n),l.size===0&&Bc.delete(t)}},tz="5.1.3";class oa{constructor(n){n=Nc(n),!!n&&(this._element=n,cp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){cp.remove(this._element,this.constructor.DATA_KEY),Ft.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(n=>{this[n]=null})}_queueCallback(n,l,h=!0){rT(n,l,h)}static getInstance(n){return cp.get(Nc(n),this.DATA_KEY)}static getOrCreateInstance(n,l={}){return this.getInstance(n)||new this(n,typeof l=="object"?l:null)}static get VERSION(){return tz}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const h_=(t,n="hide")=>{const l=`click.dismiss${t.EVENT_KEY}`,h=t.NAME;Ft.on(document,l,`[data-bs-dismiss="${h}"]`,function(_){if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),Qu(this))return;const g=Rc(this)||this.closest(`.${h}`);t.getOrCreateInstance(g)[n]()})},nz="alert",iz="bs.alert",pT=`.${iz}`,rz=`close${pT}`,oz=`closed${pT}`,sz="fade",az="show";class f_ extends oa{static get NAME(){return nz}close(){if(Ft.trigger(this._element,rz).defaultPrevented)return;this._element.classList.remove(az);const l=this._element.classList.contains(sz);this._queueCallback(()=>this._destroyElement(),this._element,l)}_destroyElement(){this._element.remove(),Ft.trigger(this._element,oz),this.dispose()}static jQueryInterface(n){return this.each(function(){const l=f_.getOrCreateInstance(this);if(typeof n=="string"){if(l[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);l[n](this)}})}}h_(f_,"close");Ps(f_);const lz="button",cz="bs.button",uz=`.${cz}`,hz=".data-api",fz="active",mT='[data-bs-toggle="button"]',dz=`click${uz}${hz}`;class d_ extends oa{static get NAME(){return lz}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(fz))}static jQueryInterface(n){return this.each(function(){const l=d_.getOrCreateInstance(this);n==="toggle"&&l[n]()})}}Ft.on(document,dz,mT,t=>{t.preventDefault();const n=t.target.closest(mT);d_.getOrCreateInstance(n).toggle()});Ps(d_);function _T(t){return t==="true"?!0:t==="false"?!1:t===Number(t).toString()?Number(t):t===""||t==="null"?null:t}function Vv(t){return t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const to={setDataAttribute(t,n,l){t.setAttribute(`data-bs-${Vv(n)}`,l)},removeDataAttribute(t,n){t.removeAttribute(`data-bs-${Vv(n)}`)},getDataAttributes(t){if(!t)return{};const n={};return Object.keys(t.dataset).filter(l=>l.startsWith("bs")).forEach(l=>{let h=l.replace(/^bs/,"");h=h.charAt(0).toLowerCase()+h.slice(1,h.length),n[h]=_T(t.dataset[l])}),n},getDataAttribute(t,n){return _T(t.getAttribute(`data-bs-${Vv(n)}`))},offset(t){const n=t.getBoundingClientRect();return{top:n.top+window.pageYOffset,left:n.left+window.pageXOffset}},position(t){return{top:t.offsetTop,left:t.offsetLeft}}},pz=3,Gn={find(t,n=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(n,t))},findOne(t,n=document.documentElement){return Element.prototype.querySelector.call(n,t)},children(t,n){return[].concat(...t.children).filter(l=>l.matches(n))},parents(t,n){const l=[];let h=t.parentNode;for(;h&&h.nodeType===Node.ELEMENT_NODE&&h.nodeType!==pz;)h.matches(n)&&l.push(h),h=h.parentNode;return l},prev(t,n){let l=t.previousElementSibling;for(;l;){if(l.matches(n))return[l];l=l.previousElementSibling}return[]},next(t,n){let l=t.nextElementSibling;for(;l;){if(l.matches(n))return[l];l=l.nextElementSibling}return[]},focusableChildren(t){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(l=>`${l}:not([tabindex^="-"])`).join(", ");return this.find(n,t).filter(l=>!Qu(l)&&lp(l))}},gT="carousel",mz="bs.carousel",ms=`.${mz}`,yT=".data-api",_z="ArrowLeft",gz="ArrowRight",yz=500,vz=40,vT={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},xz={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},th="next",nh="prev",ih="left",up="right",bz={[_z]:up,[gz]:ih},wz=`slide${ms}`,xT=`slid${ms}`,Ez=`keydown${ms}`,Tz=`mouseenter${ms}`,Az=`mouseleave${ms}`,Sz=`touchstart${ms}`,Cz=`touchmove${ms}`,Iz=`touchend${ms}`,Mz=`pointerdown${ms}`,kz=`pointerup${ms}`,Lz=`dragstart${ms}`,Pz=`load${ms}${yT}`,Dz=`click${ms}${yT}`,Oz="carousel",rh="active",zz="slide",Rz="carousel-item-end",Nz="carousel-item-start",Bz="carousel-item-next",Fz="carousel-item-prev",$z="pointer-event",Uz=".active",p_=".active.carousel-item",jz=".carousel-item",Vz=".carousel-item img",Gz=".carousel-item-next, .carousel-item-prev",Hz=".carousel-indicators",Wz="[data-bs-target]",qz="[data-bs-slide], [data-bs-slide-to]",Zz='[data-bs-ride="carousel"]',Xz="touch",Yz="pen";class Tl extends oa{constructor(n,l){super(n);this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(l),this._indicatorsElement=Gn.findOne(Hz,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return vT}static get NAME(){return gT}next(){this._slide(th)}nextWhenVisible(){!document.hidden&&lp(this._element)&&this.next()}prev(){this._slide(nh)}pause(n){n||(this._isPaused=!0),Gn.findOne(Gz,this._element)&&(tT(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(n){n||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(n){this._activeElement=Gn.findOne(p_,this._element);const l=this._getItemIndex(this._activeElement);if(n>this._items.length-1||n<0)return;if(this._isSliding){Ft.one(this._element,xT,()=>this.to(n));return}if(l===n){this.pause(),this.cycle();return}const h=n>l?th:nh;this._slide(h,this._items[n])}_getConfig(n){return n=rn(rn(rn({},vT),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Na(gT,n,xz),n}_handleSwipe(){const n=Math.abs(this.touchDeltaX);if(n<=vz)return;const l=n/this.touchDeltaX;this.touchDeltaX=0,!!l&&this._slide(l>0?up:ih)}_addEventListeners(){this._config.keyboard&&Ft.on(this._element,Ez,n=>this._keydown(n)),this._config.pause==="hover"&&(Ft.on(this._element,Tz,n=>this.pause(n)),Ft.on(this._element,Az,n=>this.cycle(n))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const n=g=>this._pointerEvent&&(g.pointerType===Yz||g.pointerType===Xz),l=g=>{n(g)?this.touchStartX=g.clientX:this._pointerEvent||(this.touchStartX=g.touches[0].clientX)},h=g=>{this.touchDeltaX=g.touches&&g.touches.length>1?0:g.touches[0].clientX-this.touchStartX},_=g=>{n(g)&&(this.touchDeltaX=g.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(w=>this.cycle(w),yz+this._config.interval))};Gn.find(Vz,this._element).forEach(g=>{Ft.on(g,Lz,w=>w.preventDefault())}),this._pointerEvent?(Ft.on(this._element,Mz,g=>l(g)),Ft.on(this._element,kz,g=>_(g)),this._element.classList.add($z)):(Ft.on(this._element,Sz,g=>l(g)),Ft.on(this._element,Cz,g=>h(g)),Ft.on(this._element,Iz,g=>_(g)))}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const l=bz[n.key];l&&(n.preventDefault(),this._slide(l))}_getItemIndex(n){return this._items=n&&n.parentNode?Gn.find(jz,n.parentNode):[],this._items.indexOf(n)}_getItemByOrder(n,l){const h=n===th;return oT(this._items,l,h,this._config.wrap)}_triggerSlideEvent(n,l){const h=this._getItemIndex(n),_=this._getItemIndex(Gn.findOne(p_,this._element));return Ft.trigger(this._element,wz,{relatedTarget:n,direction:l,from:_,to:h})}_setActiveIndicatorElement(n){if(this._indicatorsElement){const l=Gn.findOne(Uz,this._indicatorsElement);l.classList.remove(rh),l.removeAttribute("aria-current");const h=Gn.find(Wz,this._indicatorsElement);for(let _=0;_<h.length;_++)if(Number.parseInt(h[_].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(n)){h[_].classList.add(rh),h[_].setAttribute("aria-current","true");break}}}_updateInterval(){const n=this._activeElement||Gn.findOne(p_,this._element);if(!n)return;const l=Number.parseInt(n.getAttribute("data-bs-interval"),10);l?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=l):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(n,l){const h=this._directionToOrder(n),_=Gn.findOne(p_,this._element),g=this._getItemIndex(_),w=l||this._getItemByOrder(h,_),s=this._getItemIndex(w),C=Boolean(this._interval),O=h===th,k=O?Nz:Rz,D=O?Bz:Fz,F=this._orderToDirection(h);if(w&&w.classList.contains(rh)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(w,F).defaultPrevented||!_||!w)return;this._isSliding=!0,C&&this.pause(),this._setActiveIndicatorElement(w),this._activeElement=w;const Se=()=>{Ft.trigger(this._element,xT,{relatedTarget:w,direction:F,from:g,to:s})};if(this._element.classList.contains(zz)){w.classList.add(D),Mf(w),_.classList.add(k),w.classList.add(k);const pe=()=>{w.classList.remove(k,D),w.classList.add(rh),_.classList.remove(rh,D,k),this._isSliding=!1,setTimeout(Se,0)};this._queueCallback(pe,_,!0)}else _.classList.remove(rh),w.classList.add(rh),this._isSliding=!1,Se();C&&this.cycle()}_directionToOrder(n){return[up,ih].includes(n)?Ko()?n===ih?nh:th:n===ih?th:nh:n}_orderToDirection(n){return[th,nh].includes(n)?Ko()?n===nh?ih:up:n===nh?up:ih:n}static carouselInterface(n,l){const h=Tl.getOrCreateInstance(n,l);let{_config:_}=h;typeof l=="object"&&(_=rn(rn({},_),l));const g=typeof l=="string"?l:_.slide;if(typeof l=="number")h.to(l);else if(typeof g=="string"){if(typeof h[g]=="undefined")throw new TypeError(`No method named "${g}"`);h[g]()}else _.interval&&_.ride&&(h.pause(),h.cycle())}static jQueryInterface(n){return this.each(function(){Tl.carouselInterface(this,n)})}static dataApiClickHandler(n){const l=Rc(this);if(!l||!l.classList.contains(Oz))return;const h=rn(rn({},to.getDataAttributes(l)),to.getDataAttributes(this)),_=this.getAttribute("data-bs-slide-to");_&&(h.interval=!1),Tl.carouselInterface(l,h),_&&Tl.getInstance(l).to(_),n.preventDefault()}}Ft.on(document,Dz,qz,Tl.dataApiClickHandler);Ft.on(window,Pz,()=>{const t=Gn.find(Zz);for(let n=0,l=t.length;n<l;n++)Tl.carouselInterface(t[n],Tl.getInstance(t[n]))});Ps(Tl);const bT="collapse",wT="bs.collapse",hp=`.${wT}`,Kz=".data-api",ET={toggle:!0,parent:null},Jz={toggle:"boolean",parent:"(null|element)"},Qz=`show${hp}`,eR=`shown${hp}`,tR=`hide${hp}`,nR=`hidden${hp}`,iR=`click${hp}${Kz}`,Gv="show",kf="collapse",m_="collapsing",TT="collapsed",AT=`:scope .${kf} .${kf}`,rR="collapse-horizontal",oR="width",sR="height",aR=".collapse.show, .collapse.collapsing",Hv='[data-bs-toggle="collapse"]';class Lf extends oa{constructor(n,l){super(n);this._isTransitioning=!1,this._config=this._getConfig(l),this._triggerArray=[];const h=Gn.find(Hv);for(let _=0,g=h.length;_<g;_++){const w=h[_],s=Fv(w),C=Gn.find(s).filter(O=>O===this._element);s!==null&&C.length&&(this._selector=s,this._triggerArray.push(w))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ET}static get NAME(){return bT}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[],l;if(this._config.parent){const O=Gn.find(AT,this._config.parent);n=Gn.find(aR,this._config.parent).filter(k=>!O.includes(k))}const h=Gn.findOne(this._selector);if(n.length){const O=n.find(k=>h!==k);if(l=O?Lf.getInstance(O):null,l&&l._isTransitioning)return}if(Ft.trigger(this._element,Qz).defaultPrevented)return;n.forEach(O=>{h!==O&&Lf.getOrCreateInstance(O,{toggle:!1}).hide(),l||cp.set(O,wT,null)});const g=this._getDimension();this._element.classList.remove(kf),this._element.classList.add(m_),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const w=()=>{this._isTransitioning=!1,this._element.classList.remove(m_),this._element.classList.add(kf,Gv),this._element.style[g]="",Ft.trigger(this._element,eR)},C=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(w,this._element,!0),this._element.style[g]=`${this._element[C]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ft.trigger(this._element,tR).defaultPrevented)return;const l=this._getDimension();this._element.style[l]=`${this._element.getBoundingClientRect()[l]}px`,Mf(this._element),this._element.classList.add(m_),this._element.classList.remove(kf,Gv);const h=this._triggerArray.length;for(let g=0;g<h;g++){const w=this._triggerArray[g],s=Rc(w);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0;const _=()=>{this._isTransitioning=!1,this._element.classList.remove(m_),this._element.classList.add(kf),Ft.trigger(this._element,nR)};this._element.style[l]="",this._queueCallback(_,this._element,!0)}_isShown(n=this._element){return n.classList.contains(Gv)}_getConfig(n){return n=rn(rn(rn({},ET),to.getDataAttributes(this._element)),n),n.toggle=Boolean(n.toggle),n.parent=Nc(n.parent),Na(bT,n,Jz),n}_getDimension(){return this._element.classList.contains(rR)?oR:sR}_initializeChildren(){if(!this._config.parent)return;const n=Gn.find(AT,this._config.parent);Gn.find(Hv,this._config.parent).filter(l=>!n.includes(l)).forEach(l=>{const h=Rc(l);h&&this._addAriaAndCollapsedClass([l],this._isShown(h))})}_addAriaAndCollapsedClass(n,l){!n.length||n.forEach(h=>{l?h.classList.remove(TT):h.classList.add(TT),h.setAttribute("aria-expanded",l)})}static jQueryInterface(n){return this.each(function(){const l={};typeof n=="string"&&/show|hide/.test(n)&&(l.toggle=!1);const h=Lf.getOrCreateInstance(this,l);if(typeof n=="string"){if(typeof h[n]=="undefined")throw new TypeError(`No method named "${n}"`);h[n]()}})}}Ft.on(document,iR,Hv,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const n=Fv(this);Gn.find(n).forEach(h=>{Lf.getOrCreateInstance(h,{toggle:!1}).toggle()})});Ps(Lf);const Wv="dropdown",lR="bs.dropdown",oh=`.${lR}`,qv=".data-api",__="Escape",ST="Space",CT="Tab",Zv="ArrowUp",g_="ArrowDown",cR=2,uR=new RegExp(`${Zv}|${g_}|${__}`),hR=`hide${oh}`,fR=`hidden${oh}`,dR=`show${oh}`,pR=`shown${oh}`,IT=`click${oh}${qv}`,MT=`keydown${oh}${qv}`,mR=`keyup${oh}${qv}`,Pf="show",_R="dropup",gR="dropend",yR="dropstart",vR="navbar",fp='[data-bs-toggle="dropdown"]',Xv=".dropdown-menu",xR=".navbar-nav",bR=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",wR=Ko()?"top-end":"top-start",ER=Ko()?"top-start":"top-end",TR=Ko()?"bottom-end":"bottom-start",AR=Ko()?"bottom-start":"bottom-end",SR=Ko()?"left-start":"right-start",CR=Ko()?"right-start":"left-start",IR={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},MR={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class Ds extends oa{constructor(n,l){super(n);this._popper=null,this._config=this._getConfig(l),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return IR}static get DefaultType(){return MR}static get NAME(){return Wv}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Qu(this._element)||this._isShown(this._menu))return;const n={relatedTarget:this._element};if(Ft.trigger(this._element,dR,n).defaultPrevented)return;const h=Ds.getParentFromElement(this._element);this._inNavbar?to.setDataAttribute(this._menu,"popper","none"):this._createPopper(h),"ontouchstart"in document.documentElement&&!h.closest(xR)&&[].concat(...document.body.children).forEach(_=>Ft.on(_,"mouseover",u_)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Pf),this._element.classList.add(Pf),Ft.trigger(this._element,pR,n)}hide(){if(Qu(this._element)||!this._isShown(this._menu))return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){Ft.trigger(this._element,hR,n).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(h=>Ft.off(h,"mouseover",u_)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Pf),this._element.classList.remove(Pf),this._element.setAttribute("aria-expanded","false"),to.removeDataAttribute(this._menu,"popper"),Ft.trigger(this._element,fR,n))}_getConfig(n){if(n=rn(rn(rn({},this.constructor.Default),to.getDataAttributes(this._element)),n),Na(Wv,n,this.constructor.DefaultType),typeof n.reference=="object"&&!Ju(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${Wv.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(n){if(typeof Q2=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let l=this._element;this._config.reference==="parent"?l=n:Ju(this._config.reference)?l=Nc(this._config.reference):typeof this._config.reference=="object"&&(l=this._config.reference);const h=this._getPopperConfig(),_=h.modifiers.find(g=>g.name==="applyStyles"&&g.enabled===!1);this._popper=Nv(l,this._menu,h),_&&to.setDataAttribute(this._menu,"popper","static")}_isShown(n=this._element){return n.classList.contains(Pf)}_getMenuElement(){return Gn.next(this._element,Xv)[0]}_getPlacement(){const n=this._element.parentNode;if(n.classList.contains(gR))return SR;if(n.classList.contains(yR))return CR;const l=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains(_R)?l?ER:wR:l?AR:TR}_detectNavbar(){return this._element.closest(`.${vR}`)!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(l=>Number.parseInt(l,10)):typeof n=="function"?l=>n(l,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(n.modifiers=[{name:"applyStyles",enabled:!1}]),rn(rn({},n),typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig)}_selectMenuItem({key:n,target:l}){const h=Gn.find(bR,this._menu).filter(lp);!h.length||oT(h,l,n===g_,!h.includes(l)).focus()}static jQueryInterface(n){return this.each(function(){const l=Ds.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n]()}})}static clearMenus(n){if(n&&(n.button===cR||n.type==="keyup"&&n.key!==CT))return;const l=Gn.find(fp);for(let h=0,_=l.length;h<_;h++){const g=Ds.getInstance(l[h]);if(!g||g._config.autoClose===!1||!g._isShown())continue;const w={relatedTarget:g._element};if(n){const s=n.composedPath(),C=s.includes(g._menu);if(s.includes(g._element)||g._config.autoClose==="inside"&&!C||g._config.autoClose==="outside"&&C||g._menu.contains(n.target)&&(n.type==="keyup"&&n.key===CT||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;n.type==="click"&&(w.clickEvent=n)}g._completeHide(w)}}static getParentFromElement(n){return Rc(n)||n.parentNode}static dataApiKeydownHandler(n){if(/input|textarea/i.test(n.target.tagName)?n.key===ST||n.key!==__&&(n.key!==g_&&n.key!==Zv||n.target.closest(Xv)):!uR.test(n.key))return;const l=this.classList.contains(Pf);if(!l&&n.key===__||(n.preventDefault(),n.stopPropagation(),Qu(this)))return;const h=this.matches(fp)?this:Gn.prev(this,fp)[0],_=Ds.getOrCreateInstance(h);if(n.key===__){_.hide();return}if(n.key===Zv||n.key===g_){l||_.show(),_._selectMenuItem(n);return}(!l||n.key===ST)&&Ds.clearMenus()}}Ft.on(document,MT,fp,Ds.dataApiKeydownHandler);Ft.on(document,MT,Xv,Ds.dataApiKeydownHandler);Ft.on(document,IT,Ds.clearMenus);Ft.on(document,mR,Ds.clearMenus);Ft.on(document,IT,fp,function(t){t.preventDefault(),Ds.getOrCreateInstance(this).toggle()});Ps(Ds);const kT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",LT=".sticky-top";class Yv{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",l=>l+n),this._setElementAttributes(kT,"paddingRight",l=>l+n),this._setElementAttributes(LT,"marginRight",l=>l-n)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,l,h){const _=this.getWidth(),g=w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+_)return;this._saveInitialAttribute(w,l);const s=window.getComputedStyle(w)[l];w.style[l]=`${h(Number.parseFloat(s))}px`};this._applyManipulationCallback(n,g)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(kT,"paddingRight"),this._resetElementAttributes(LT,"marginRight")}_saveInitialAttribute(n,l){const h=n.style[l];h&&to.setDataAttribute(n,l,h)}_resetElementAttributes(n,l){const h=_=>{const g=to.getDataAttribute(_,l);typeof g=="undefined"?_.style.removeProperty(l):(to.removeDataAttribute(_,l),_.style[l]=g)};this._applyManipulationCallback(n,h)}_applyManipulationCallback(n,l){Ju(n)?l(n):Gn.find(n,this._element).forEach(l)}isOverflowing(){return this.getWidth()>0}}const kR={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},LR={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},PT="backdrop",PR="fade",DT="show",OT=`mousedown.bs.${PT}`;class zT{constructor(n){this._config=this._getConfig(n),this._isAppended=!1,this._element=null}show(n){if(!this._config.isVisible){eh(n);return}this._append(),this._config.isAnimated&&Mf(this._getElement()),this._getElement().classList.add(DT),this._emulateAnimation(()=>{eh(n)})}hide(n){if(!this._config.isVisible){eh(n);return}this._getElement().classList.remove(DT),this._emulateAnimation(()=>{this.dispose(),eh(n)})}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add(PR),this._element=n}return this._element}_getConfig(n){return n=rn(rn({},kR),typeof n=="object"?n:{}),n.rootElement=Nc(n.rootElement),Na(PT,n,LR),n}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),Ft.on(this._getElement(),OT,()=>{eh(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(Ft.off(this._element,OT),this._element.remove(),this._isAppended=!1)}_emulateAnimation(n){rT(n,this._getElement(),this._config.isAnimated)}}const DR={trapElement:null,autofocus:!0},OR={trapElement:"element",autofocus:"boolean"},zR="focustrap",RR="bs.focustrap",y_=`.${RR}`,NR=`focusin${y_}`,BR=`keydown.tab${y_}`,FR="Tab",$R="forward",RT="backward";class NT{constructor(n){this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:n,autofocus:l}=this._config;this._isActive||(l&&n.focus(),Ft.off(document,y_),Ft.on(document,NR,h=>this._handleFocusin(h)),Ft.on(document,BR,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Ft.off(document,y_))}_handleFocusin(n){const{target:l}=n,{trapElement:h}=this._config;if(l===document||l===h||h.contains(l))return;const _=Gn.focusableChildren(h);_.length===0?h.focus():this._lastTabNavDirection===RT?_[_.length-1].focus():_[0].focus()}_handleKeydown(n){n.key===FR&&(this._lastTabNavDirection=n.shiftKey?RT:$R)}_getConfig(n){return n=rn(rn({},DR),typeof n=="object"?n:{}),Na(zR,n,OR),n}}const BT="modal",UR="bs.modal",Os=`.${UR}`,jR=".data-api",FT="Escape",$T={backdrop:!0,keyboard:!0,focus:!0},VR={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},GR=`hide${Os}`,HR=`hidePrevented${Os}`,UT=`hidden${Os}`,jT=`show${Os}`,WR=`shown${Os}`,VT=`resize${Os}`,GT=`click.dismiss${Os}`,HT=`keydown.dismiss${Os}`,qR=`mouseup.dismiss${Os}`,WT=`mousedown.dismiss${Os}`,ZR=`click${Os}${jR}`,qT="modal-open",XR="fade",ZT="show",Kv="modal-static",YR=".modal.show",KR=".modal-dialog",JR=".modal-body",QR='[data-bs-toggle="modal"]';class Df extends oa{constructor(n,l){super(n);this._config=this._getConfig(l),this._dialog=Gn.findOne(KR,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Yv}static get Default(){return $T}static get NAME(){return BT}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||Ft.trigger(this._element,jT,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(qT),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Ft.on(this._dialog,WT,()=>{Ft.one(this._element,qR,h=>{h.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(n)))}hide(){if(!this._isShown||this._isTransitioning||Ft.trigger(this._element,GR).defaultPrevented)return;this._isShown=!1;const l=this._isAnimated();l&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(ZT),Ft.off(this._element,GT),Ft.off(this._dialog,WT),this._queueCallback(()=>this._hideModal(),this._element,l)}dispose(){[window,this._dialog].forEach(n=>Ft.off(n,Os)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zT({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new NT({trapElement:this._element})}_getConfig(n){return n=rn(rn(rn({},$T),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Na(BT,n,VR),n}_showElement(n){const l=this._isAnimated(),h=Gn.findOne(JR,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,h&&(h.scrollTop=0),l&&Mf(this._element),this._element.classList.add(ZT);const _=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ft.trigger(this._element,WR,{relatedTarget:n})};this._queueCallback(_,this._dialog,l)}_setEscapeEvent(){this._isShown?Ft.on(this._element,HT,n=>{this._config.keyboard&&n.key===FT?(n.preventDefault(),this.hide()):!this._config.keyboard&&n.key===FT&&this._triggerBackdropTransition()}):Ft.off(this._element,HT)}_setResizeEvent(){this._isShown?Ft.on(window,VT,()=>this._adjustDialog()):Ft.off(window,VT)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(qT),this._resetAdjustments(),this._scrollBar.reset(),Ft.trigger(this._element,UT)})}_showBackdrop(n){Ft.on(this._element,GT,l=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}l.target===l.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(n)}_isAnimated(){return this._element.classList.contains(XR)}_triggerBackdropTransition(){if(Ft.trigger(this._element,HR).defaultPrevented)return;const{classList:l,scrollHeight:h,style:_}=this._element,g=h>document.documentElement.clientHeight;!g&&_.overflowY==="hidden"||l.contains(Kv)||(g||(_.overflowY="hidden"),l.add(Kv),this._queueCallback(()=>{l.remove(Kv),g||this._queueCallback(()=>{_.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,l=this._scrollBar.getWidth(),h=l>0;(!h&&n&&!Ko()||h&&!n&&Ko())&&(this._element.style.paddingLeft=`${l}px`),(h&&!n&&!Ko()||!h&&n&&Ko())&&(this._element.style.paddingRight=`${l}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,l){return this.each(function(){const h=Df.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof h[n]=="undefined")throw new TypeError(`No method named "${n}"`);h[n](l)}})}}Ft.on(document,ZR,QR,function(t){const n=Rc(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Ft.one(n,jT,_=>{_.defaultPrevented||Ft.one(n,UT,()=>{lp(this)&&this.focus()})});const l=Gn.findOne(YR);l&&Df.getInstance(l).hide(),Df.getOrCreateInstance(n).toggle(this)});h_(Df);Ps(Df);const XT="offcanvas",e4="bs.offcanvas",sh=`.${e4}`,YT=".data-api",t4=`load${sh}${YT}`,n4="Escape",KT={backdrop:!0,keyboard:!0,scroll:!1},i4={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},JT="show",r4="offcanvas-backdrop",QT=".offcanvas.show",o4=`show${sh}`,s4=`shown${sh}`,a4=`hide${sh}`,eA=`hidden${sh}`,l4=`click${sh}${YT}`,c4=`keydown.dismiss${sh}`,u4='[data-bs-toggle="offcanvas"]';class ah extends oa{constructor(n,l){super(n);this._config=this._getConfig(l),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return XT}static get Default(){return KT}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){if(this._isShown||Ft.trigger(this._element,o4,{relatedTarget:n}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Yv().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(JT);const h=()=>{this._config.scroll||this._focustrap.activate(),Ft.trigger(this._element,s4,{relatedTarget:n})};this._queueCallback(h,this._element,!0)}hide(){if(!this._isShown||Ft.trigger(this._element,a4).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(JT),this._backdrop.hide();const l=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Yv().reset(),Ft.trigger(this._element,eA)};this._queueCallback(l,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(n){return n=rn(rn(rn({},KT),to.getDataAttributes(this._element)),typeof n=="object"?n:{}),Na(XT,n,i4),n}_initializeBackDrop(){return new zT({className:r4,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new NT({trapElement:this._element})}_addEventListeners(){Ft.on(this._element,c4,n=>{this._config.keyboard&&n.key===n4&&this.hide()})}static jQueryInterface(n){return this.each(function(){const l=ah.getOrCreateInstance(this,n);if(typeof n=="string"){if(l[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);l[n](this)}})}}Ft.on(document,l4,u4,function(t){const n=Rc(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Qu(this))return;Ft.one(n,eA,()=>{lp(this)&&this.focus()});const l=Gn.findOne(QT);l&&l!==n&&ah.getInstance(l).hide(),ah.getOrCreateInstance(n).toggle(this)});Ft.on(window,t4,()=>Gn.find(QT).forEach(t=>ah.getOrCreateInstance(t).show()));h_(ah);Ps(ah);const h4=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),f4=/^aria-[\w-]*$/i,d4=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,p4=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,m4=(t,n)=>{const l=t.nodeName.toLowerCase();if(n.includes(l))return h4.has(l)?Boolean(d4.test(t.nodeValue)||p4.test(t.nodeValue)):!0;const h=n.filter(_=>_ instanceof RegExp);for(let _=0,g=h.length;_<g;_++)if(h[_].test(l))return!0;return!1},_4={"*":["class","dir","id","lang","role",f4],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function tA(t,n,l){if(!t.length)return t;if(l&&typeof l=="function")return l(t);const _=new window.DOMParser().parseFromString(t,"text/html"),g=[].concat(..._.body.querySelectorAll("*"));for(let w=0,s=g.length;w<s;w++){const C=g[w],O=C.nodeName.toLowerCase();if(!Object.keys(n).includes(O)){C.remove();continue}const k=[].concat(...C.attributes),D=[].concat(n["*"]||[],n[O]||[]);k.forEach(F=>{m4(F,D)||C.removeAttribute(F.nodeName)})}return _.body.innerHTML}const nA="tooltip",g4="bs.tooltip",Ba=`.${g4}`,y4="bs-tooltip",v4=new Set(["sanitize","allowList","sanitizeFn"]),x4={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},b4={AUTO:"auto",TOP:"top",RIGHT:Ko()?"left":"right",BOTTOM:"bottom",LEFT:Ko()?"right":"left"},w4={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:_4,popperConfig:null},E4={HIDE:`hide${Ba}`,HIDDEN:`hidden${Ba}`,SHOW:`show${Ba}`,SHOWN:`shown${Ba}`,INSERTED:`inserted${Ba}`,CLICK:`click${Ba}`,FOCUSIN:`focusin${Ba}`,FOCUSOUT:`focusout${Ba}`,MOUSEENTER:`mouseenter${Ba}`,MOUSELEAVE:`mouseleave${Ba}`},v_="fade",T4="modal",dp="show",pp="show",Jv="out",iA=".tooltip-inner",rA=`.${T4}`,oA="hide.bs.modal",mp="hover",Qv="focus",A4="click",S4="manual";class Of extends oa{constructor(n,l){if(typeof Q2=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(n);this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(l),this.tip=null,this._setListeners()}static get Default(){return w4}static get NAME(){return nA}static get Event(){return E4}static get DefaultType(){return x4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(n){if(!!this._isEnabled)if(n){const l=this._initializeOnDelegatedTarget(n);l._activeTrigger.click=!l._activeTrigger.click,l._isWithActiveTrigger()?l._enter(null,l):l._leave(null,l)}else{if(this.getTipElement().classList.contains(dp)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),Ft.off(this._element.closest(rA),oA,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;const n=Ft.trigger(this._element,this.constructor.Event.SHOW),l=nT(this._element),h=l===null?this._element.ownerDocument.documentElement.contains(this._element):l.contains(this._element);if(n.defaultPrevented||!h)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(iA).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const _=this.getTipElement(),g=G3(this.constructor.NAME);_.setAttribute("id",g),this._element.setAttribute("aria-describedby",g),this._config.animation&&_.classList.add(v_);const w=typeof this._config.placement=="function"?this._config.placement.call(this,_,this._element):this._config.placement,s=this._getAttachment(w);this._addAttachmentClass(s);const{container:C}=this._config;cp.set(_,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(C.append(_),Ft.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Nv(this._element,_,this._getPopperConfig(s)),_.classList.add(dp);const O=this._resolvePossibleFunction(this._config.customClass);O&&_.classList.add(...O.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(F=>{Ft.on(F,"mouseover",u_)});const k=()=>{const F=this._hoverState;this._hoverState=null,Ft.trigger(this._element,this.constructor.Event.SHOWN),F===Jv&&this._leave(null,this)},D=this.tip.classList.contains(v_);this._queueCallback(k,this.tip,D)}hide(){if(!this._popper)return;const n=this.getTipElement(),l=()=>{this._isWithActiveTrigger()||(this._hoverState!==pp&&n.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),Ft.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(Ft.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;n.classList.remove(dp),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(g=>Ft.off(g,"mouseover",u_)),this._activeTrigger[A4]=!1,this._activeTrigger[Qv]=!1,this._activeTrigger[mp]=!1;const _=this.tip.classList.contains(v_);this._queueCallback(l,this.tip,_),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const n=document.createElement("div");n.innerHTML=this._config.template;const l=n.children[0];return this.setContent(l),l.classList.remove(v_,dp),this.tip=l,this.tip}setContent(n){this._sanitizeAndSetContent(n,this.getTitle(),iA)}_sanitizeAndSetContent(n,l,h){const _=Gn.findOne(h,n);if(!l&&_){_.remove();return}this.setElementContent(_,l)}setElementContent(n,l){if(n!==null){if(Ju(l)){l=Nc(l),this._config.html?l.parentNode!==n&&(n.innerHTML="",n.append(l)):n.textContent=l.textContent;return}this._config.html?(this._config.sanitize&&(l=tA(l,this._config.allowList,this._config.sanitizeFn)),n.innerHTML=l):n.textContent=l}}getTitle(){const n=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(n)}updateAttachment(n){return n==="right"?"end":n==="left"?"start":n}_initializeOnDelegatedTarget(n,l){return l||this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(l=>Number.parseInt(l,10)):typeof n=="function"?l=>n(l,this._element):n}_resolvePossibleFunction(n){return typeof n=="function"?n.call(this._element):n}_getPopperConfig(n){const l={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:h=>this._handlePopperPlacementChange(h)}],onFirstUpdate:h=>{h.options.placement!==h.placement&&this._handlePopperPlacementChange(h)}};return rn(rn({},l),typeof this._config.popperConfig=="function"?this._config.popperConfig(l):this._config.popperConfig)}_addAttachmentClass(n){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(n)}`)}_getAttachment(n){return b4[n.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(l=>{if(l==="click")Ft.on(this._element,this.constructor.Event.CLICK,this._config.selector,h=>this.toggle(h));else if(l!==S4){const h=l===mp?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,_=l===mp?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;Ft.on(this._element,h,this._config.selector,g=>this._enter(g)),Ft.on(this._element,_,this._config.selector,g=>this._leave(g))}}),this._hideModalHandler=()=>{this._element&&this.hide()},Ft.on(this._element.closest(rA),oA,this._hideModalHandler),this._config.selector?this._config=Su(rn({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const n=this._element.getAttribute("title"),l=typeof this._element.getAttribute("data-bs-original-title");(n||l!=="string")&&(this._element.setAttribute("data-bs-original-title",n||""),n&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",n),this._element.setAttribute("title",""))}_enter(n,l){if(l=this._initializeOnDelegatedTarget(n,l),n&&(l._activeTrigger[n.type==="focusin"?Qv:mp]=!0),l.getTipElement().classList.contains(dp)||l._hoverState===pp){l._hoverState=pp;return}if(clearTimeout(l._timeout),l._hoverState=pp,!l._config.delay||!l._config.delay.show){l.show();return}l._timeout=setTimeout(()=>{l._hoverState===pp&&l.show()},l._config.delay.show)}_leave(n,l){if(l=this._initializeOnDelegatedTarget(n,l),n&&(l._activeTrigger[n.type==="focusout"?Qv:mp]=l._element.contains(n.relatedTarget)),!l._isWithActiveTrigger()){if(clearTimeout(l._timeout),l._hoverState=Jv,!l._config.delay||!l._config.delay.hide){l.hide();return}l._timeout=setTimeout(()=>{l._hoverState===Jv&&l.hide()},l._config.delay.hide)}}_isWithActiveTrigger(){for(const n in this._activeTrigger)if(this._activeTrigger[n])return!0;return!1}_getConfig(n){const l=to.getDataAttributes(this._element);return Object.keys(l).forEach(h=>{v4.has(h)&&delete l[h]}),n=rn(rn(rn({},this.constructor.Default),l),typeof n=="object"&&n?n:{}),n.container=n.container===!1?document.body:Nc(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),Na(nA,n,this.constructor.DefaultType),n.sanitize&&(n.template=tA(n.template,n.allowList,n.sanitizeFn)),n}_getDelegateConfig(){const n={};for(const l in this._config)this.constructor.Default[l]!==this._config[l]&&(n[l]=this._config[l]);return n}_cleanTipClass(){const n=this.getTipElement(),l=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),h=n.getAttribute("class").match(l);h!==null&&h.length>0&&h.map(_=>_.trim()).forEach(_=>n.classList.remove(_))}_getBasicClassPrefix(){return y4}_handlePopperPlacementChange(n){const{state:l}=n;!l||(this.tip=l.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(l.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(n){return this.each(function(){const l=Of.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n]()}})}}Ps(Of);const C4="popover",I4="bs.popover",Fa=`.${I4}`,M4="bs-popover",k4=Su(rn({},Of.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),L4=Su(rn({},Of.DefaultType),{content:"(string|element|function)"}),P4={HIDE:`hide${Fa}`,HIDDEN:`hidden${Fa}`,SHOW:`show${Fa}`,SHOWN:`shown${Fa}`,INSERTED:`inserted${Fa}`,CLICK:`click${Fa}`,FOCUSIN:`focusin${Fa}`,FOCUSOUT:`focusout${Fa}`,MOUSEENTER:`mouseenter${Fa}`,MOUSELEAVE:`mouseleave${Fa}`},D4=".popover-header",O4=".popover-body";class e0 extends Of{static get Default(){return k4}static get NAME(){return C4}static get Event(){return P4}static get DefaultType(){return L4}isWithContent(){return this.getTitle()||this._getContent()}setContent(n){this._sanitizeAndSetContent(n,this.getTitle(),D4),this._sanitizeAndSetContent(n,this._getContent(),O4)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return M4}static jQueryInterface(n){return this.each(function(){const l=e0.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n]()}})}}Ps(e0);const sA="scrollspy",z4="bs.scrollspy",x_=`.${z4}`,R4=".data-api",aA={offset:10,method:"auto",target:""},N4={offset:"number",method:"string",target:"(string|element)"},B4=`activate${x_}`,F4=`scroll${x_}`,$4=`load${x_}${R4}`,lA="dropdown-item",zf="active",U4='[data-bs-spy="scroll"]',j4=".nav, .list-group",t0=".nav-link",V4=".nav-item",cA=".list-group-item",n0=`${t0}, ${cA}, .${lA}`,G4=".dropdown",H4=".dropdown-toggle",W4="offset",uA="position";class b_ extends oa{constructor(n,l){super(n);this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(l),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,Ft.on(this._scrollElement,F4,()=>this._process()),this.refresh(),this._process()}static get Default(){return aA}static get NAME(){return sA}refresh(){const n=this._scrollElement===this._scrollElement.window?W4:uA,l=this._config.method==="auto"?n:this._config.method,h=l===uA?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Gn.find(n0,this._config.target).map(g=>{const w=Fv(g),s=w?Gn.findOne(w):null;if(s){const C=s.getBoundingClientRect();if(C.width||C.height)return[to[l](s).top+h,w]}return null}).filter(g=>g).sort((g,w)=>g[0]-w[0]).forEach(g=>{this._offsets.push(g[0]),this._targets.push(g[1])})}dispose(){Ft.off(this._scrollElement,x_),super.dispose()}_getConfig(n){return n=rn(rn(rn({},aA),to.getDataAttributes(this._element)),typeof n=="object"&&n?n:{}),n.target=Nc(n.target)||document.documentElement,Na(sA,n,N4),n}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const n=this._getScrollTop()+this._config.offset,l=this._getScrollHeight(),h=this._config.offset+l-this._getOffsetHeight();if(this._scrollHeight!==l&&this.refresh(),n>=h){const _=this._targets[this._targets.length-1];this._activeTarget!==_&&this._activate(_);return}if(this._activeTarget&&n<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let _=this._offsets.length;_--;)this._activeTarget!==this._targets[_]&&n>=this._offsets[_]&&(typeof this._offsets[_+1]=="undefined"||n<this._offsets[_+1])&&this._activate(this._targets[_])}_activate(n){this._activeTarget=n,this._clear();const l=n0.split(",").map(_=>`${_}[data-bs-target="${n}"],${_}[href="${n}"]`),h=Gn.findOne(l.join(","),this._config.target);h.classList.add(zf),h.classList.contains(lA)?Gn.findOne(H4,h.closest(G4)).classList.add(zf):Gn.parents(h,j4).forEach(_=>{Gn.prev(_,`${t0}, ${cA}`).forEach(g=>g.classList.add(zf)),Gn.prev(_,V4).forEach(g=>{Gn.children(g,t0).forEach(w=>w.classList.add(zf))})}),Ft.trigger(this._scrollElement,B4,{relatedTarget:n})}_clear(){Gn.find(n0,this._config.target).filter(n=>n.classList.contains(zf)).forEach(n=>n.classList.remove(zf))}static jQueryInterface(n){return this.each(function(){const l=b_.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n]()}})}}Ft.on(window,$4,()=>{Gn.find(U4).forEach(t=>new b_(t))});Ps(b_);const q4="tab",Z4="bs.tab",_p=`.${Z4}`,X4=".data-api",Y4=`hide${_p}`,K4=`hidden${_p}`,J4=`show${_p}`,Q4=`shown${_p}`,e5=`click${_p}${X4}`,t5="dropdown-menu",gp="active",hA="fade",fA="show",n5=".dropdown",i5=".nav, .list-group",dA=".active",pA=":scope > li > .active",r5='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',o5=".dropdown-toggle",s5=":scope > .dropdown-menu .active";class w_ extends oa{static get NAME(){return q4}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(gp))return;let n;const l=Rc(this._element),h=this._element.closest(i5);if(h){const s=h.nodeName==="UL"||h.nodeName==="OL"?pA:dA;n=Gn.find(s,h),n=n[n.length-1]}const _=n?Ft.trigger(n,Y4,{relatedTarget:this._element}):null;if(Ft.trigger(this._element,J4,{relatedTarget:n}).defaultPrevented||_!==null&&_.defaultPrevented)return;this._activate(this._element,h);const w=()=>{Ft.trigger(n,K4,{relatedTarget:this._element}),Ft.trigger(this._element,Q4,{relatedTarget:n})};l?this._activate(l,l.parentNode,w):w()}_activate(n,l,h){const g=(l&&(l.nodeName==="UL"||l.nodeName==="OL")?Gn.find(pA,l):Gn.children(l,dA))[0],w=h&&g&&g.classList.contains(hA),s=()=>this._transitionComplete(n,g,h);g&&w?(g.classList.remove(fA),this._queueCallback(s,n,!0)):s()}_transitionComplete(n,l,h){if(l){l.classList.remove(gp);const g=Gn.findOne(s5,l.parentNode);g&&g.classList.remove(gp),l.getAttribute("role")==="tab"&&l.setAttribute("aria-selected",!1)}n.classList.add(gp),n.getAttribute("role")==="tab"&&n.setAttribute("aria-selected",!0),Mf(n),n.classList.contains(hA)&&n.classList.add(fA);let _=n.parentNode;if(_&&_.nodeName==="LI"&&(_=_.parentNode),_&&_.classList.contains(t5)){const g=n.closest(n5);g&&Gn.find(o5,g).forEach(w=>w.classList.add(gp)),n.setAttribute("aria-expanded",!0)}h&&h()}static jQueryInterface(n){return this.each(function(){const l=w_.getOrCreateInstance(this);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n]()}})}}Ft.on(document,e5,r5,function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Qu(this))return;w_.getOrCreateInstance(this).show()});Ps(w_);const mA="toast",a5="bs.toast",Fc=`.${a5}`,l5=`mouseover${Fc}`,c5=`mouseout${Fc}`,u5=`focusin${Fc}`,h5=`focusout${Fc}`,f5=`hide${Fc}`,d5=`hidden${Fc}`,p5=`show${Fc}`,m5=`shown${Fc}`,_5="fade",_A="hide",yp="show",E_="showing",g5={animation:"boolean",autohide:"boolean",delay:"number"},gA={animation:!0,autohide:!0,delay:5e3};class T_ extends oa{constructor(n,l){super(n);this._config=this._getConfig(l),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return g5}static get Default(){return gA}static get NAME(){return mA}show(){if(Ft.trigger(this._element,p5).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(_5);const l=()=>{this._element.classList.remove(E_),Ft.trigger(this._element,m5),this._maybeScheduleHide()};this._element.classList.remove(_A),Mf(this._element),this._element.classList.add(yp),this._element.classList.add(E_),this._queueCallback(l,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(yp)||Ft.trigger(this._element,f5).defaultPrevented)return;const l=()=>{this._element.classList.add(_A),this._element.classList.remove(E_),this._element.classList.remove(yp),Ft.trigger(this._element,d5)};this._element.classList.add(E_),this._queueCallback(l,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(yp)&&this._element.classList.remove(yp),super.dispose()}_getConfig(n){return n=rn(rn(rn({},gA),to.getDataAttributes(this._element)),typeof n=="object"&&n?n:{}),Na(mA,n,this.constructor.DefaultType),n}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(n,l){switch(n.type){case"mouseover":case"mouseout":this._hasMouseInteraction=l;break;case"focusin":case"focusout":this._hasKeyboardInteraction=l;break}if(l){this._clearTimeout();return}const h=n.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){Ft.on(this._element,l5,n=>this._onInteraction(n,!0)),Ft.on(this._element,c5,n=>this._onInteraction(n,!1)),Ft.on(this._element,u5,n=>this._onInteraction(n,!0)),Ft.on(this._element,h5,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const l=T_.getOrCreateInstance(this,n);if(typeof n=="string"){if(typeof l[n]=="undefined")throw new TypeError(`No method named "${n}"`);l[n](this)}})}}h_(T_);Ps(T_);var zs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function y5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function v5(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(l){var h=Object.getOwnPropertyDescriptor(t,l);Object.defineProperty(n,l,h.get?h:{enumerable:!0,get:function(){return t[l]}})}),n}var yA={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){var l="__v-click-outside",h=typeof window!="undefined",_=typeof navigator!="undefined",g=h&&("ontouchstart"in window||_&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],w=function(k){var D=k.event,F=k.handler;(0,k.middleware)(D)&&F(D)},s=function(k,D){var F=function(te){var ge=typeof te=="function";if(!ge&&typeof te!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:ge?te:te.handler,middleware:te.middleware||function(ke){return ke},events:te.events||g,isActive:te.isActive!==!1,detectIframe:te.detectIframe!==!1,capture:Boolean(te.capture)}}(D.value),K=F.handler,Se=F.middleware,pe=F.detectIframe,J=F.capture;if(F.isActive){if(k[l]=F.events.map(function(te){return{event:te,srcTarget:document.documentElement,handler:function(ge){return function(ke){var Ae=ke.el,Pe=ke.event,Qe=ke.handler,wt=ke.middleware,nt=Pe.path||Pe.composedPath&&Pe.composedPath();(nt?nt.indexOf(Ae)<0:!Ae.contains(Pe.target))&&w({event:Pe,handler:Qe,middleware:wt})}({el:k,event:ge,handler:K,middleware:Se})},capture:J}}),pe){var H={event:"blur",srcTarget:window,handler:function(te){return function(ge){var ke=ge.el,Ae=ge.event,Pe=ge.handler,Qe=ge.middleware;setTimeout(function(){var wt=document.activeElement;wt&&wt.tagName==="IFRAME"&&!ke.contains(wt)&&w({event:Ae,handler:Pe,middleware:Qe})},0)}({el:k,event:te,handler:K,middleware:Se})},capture:J};k[l]=[].concat(k[l],[H])}k[l].forEach(function(te){var ge=te.event,ke=te.srcTarget,Ae=te.handler;return setTimeout(function(){k[l]&&ke.addEventListener(ge,Ae,J)},0)})}},C=function(k){(k[l]||[]).forEach(function(D){return D.srcTarget.removeEventListener(D.event,D.handler,D.capture)}),delete k[l]},O=h?{beforeMount:s,updated:function(k,D){var F=D.value,K=D.oldValue;JSON.stringify(F)!==JSON.stringify(K)&&(C(k),s(k,{value:F}))},unmounted:C}:{};return{install:function(k){k.directive("click-outside",O)},directive:O}})})(yA);var t8=yA.exports,vA={exports:{}};(function(t){(function(n){var l=":not(:disabled):not(.ajs-reset)",h={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39,TAB:9},_={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+l].join(l+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},g=[];function w(Ee,Xe){Ee.className+=" "+Xe}function s(Ee,Xe){for(var ot=Ee.className.split(" "),Be=Xe.split(" "),ve=0;ve<Be.length;ve+=1){var He=ot.indexOf(Be[ve]);He>-1&&ot.splice(He,1)}Ee.className=ot.join(" ")}function C(){return n.getComputedStyle(document.body).direction==="rtl"}function O(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function k(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function D(Ee){for(;Ee.lastChild;)Ee.removeChild(Ee.lastChild)}function F(Ee){if(Ee===null)return Ee;var Xe;if(Array.isArray(Ee)){Xe=[];for(var ot=0;ot<Ee.length;ot+=1)Xe.push(F(Ee[ot]));return Xe}if(Ee instanceof Date)return new Date(Ee.getTime());if(Ee instanceof RegExp)return Xe=new RegExp(Ee.source),Xe.global=Ee.global,Xe.ignoreCase=Ee.ignoreCase,Xe.multiline=Ee.multiline,Xe.lastIndex=Ee.lastIndex,Xe;if(typeof Ee=="object"){Xe={};for(var Be in Ee)Ee.hasOwnProperty(Be)&&(Xe[Be]=F(Ee[Be]));return Xe}return Ee}function K(Ee,Xe){if(Ee.elements){var ot=Ee.elements.root;ot.parentNode.removeChild(ot),delete Ee.elements,Ee.settings=F(Ee.__settings),Ee.__init=Xe,delete Ee.__internal}}var Se=!1;try{var pe=Object.defineProperty({},"passive",{get:function(){Se=!0}});n.addEventListener("test",pe,pe),n.removeEventListener("test",pe,pe)}catch{}var J=function(Ee,Xe,ot,Be,ve){Ee.addEventListener(Xe,ot,Se?{capture:Be,passive:ve}:Be===!0)},H=function(Ee,Xe,ot,Be,ve){Ee.removeEventListener(Xe,ot,Se?{capture:Be,passive:ve}:Be===!0)},te=function(){var Ee,Xe,ot=!1,Be={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(Ee in Be)if(document.documentElement.style[Ee]!==void 0){Xe=Be[Ee],ot=!0;break}return{type:Xe,supported:ot}}();function ge(Ee,Xe){return function(){if(arguments.length>0){for(var ot=[],Be=0;Be<arguments.length;Be+=1)ot.push(arguments[Be]);return ot.push(Ee),Xe.apply(Ee,ot)}return Xe.apply(Ee,[null,Ee])}}function ke(Ee,Xe){return{index:Ee,button:Xe,cancel:!1}}function Ae(Ee,Xe){if(typeof Xe.get(Ee)=="function")return Xe.get(Ee).call(Xe)}var Pe=function(){var Ee=[],Xe=!1,ot=n.navigator.userAgent.indexOf("Safari")>-1&&n.navigator.userAgent.indexOf("Chrome")<0,Be={dimmer:'<div class="ajs-dimmer"></div>',modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},ve={animationIn:"ajs-in",animationOut:"ajs-out",base:"alertify",basic:"ajs-basic",capture:"ajs-capture",closable:"ajs-closable",fixed:"ajs-fixed",frameless:"ajs-frameless",hidden:"ajs-hidden",maximize:"ajs-maximize",maximized:"ajs-maximized",maximizable:"ajs-maximizable",modeless:"ajs-modeless",movable:"ajs-movable",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",pin:"ajs-pin",pinnable:"ajs-pinnable",prefix:"ajs-",resizable:"ajs-resizable",restore:"ajs-restore",shake:"ajs-shake",unpinned:"ajs-unpinned",noTransition:"ajs-no-transition"};function He(G){if(!G.__internal){nt.defaults.hooks.preinit(G),delete G.__init,G.__settings||(G.__settings=F(G.settings));var Oe;typeof G.setup=="function"?(Oe=G.setup(),Oe.options=Oe.options||{},Oe.focus=Oe.focus||{}):Oe={buttons:[],focus:{element:null,select:!1},options:{}},typeof G.hooks!="object"&&(G.hooks={});var It=[];if(Array.isArray(Oe.buttons))for(var mt=0;mt<Oe.buttons.length;mt+=1){var vn=Oe.buttons[mt],on={};for(var si in vn)vn.hasOwnProperty(si)&&(on[si]=vn[si]);It.push(on)}var Vn=G.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:It,focus:Oe.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},Zt={};Zt.root=document.createElement("div"),Zt.root.style.display="none",Zt.root.className=ve.base+" "+ve.hidden+" ",Zt.root.innerHTML=Be.dimmer+Be.modal,Zt.dimmer=Zt.root.firstChild,Zt.modal=Zt.root.lastChild,Zt.modal.innerHTML=Be.dialog,Zt.dialog=Zt.modal.firstChild,Zt.dialog.innerHTML=Be.reset+Be.commands+Be.header+Be.body+Be.footer+Be.resizeHandle+Be.reset,Zt.reset=[],Zt.reset.push(Zt.dialog.firstChild),Zt.reset.push(Zt.dialog.lastChild),Zt.commands={},Zt.commands.container=Zt.reset[0].nextSibling,Zt.commands.pin=Zt.commands.container.firstChild,Zt.commands.maximize=Zt.commands.pin.nextSibling,Zt.commands.close=Zt.commands.maximize.nextSibling,Zt.header=Zt.commands.container.nextSibling,Zt.body=Zt.header.nextSibling,Zt.body.innerHTML=Be.content,Zt.content=Zt.body.firstChild,Zt.footer=Zt.body.nextSibling,Zt.footer.innerHTML=Be.buttons.auxiliary+Be.buttons.primary,Zt.resizeHandle=Zt.footer.nextSibling,Zt.buttons={},Zt.buttons.auxiliary=Zt.footer.firstChild,Zt.buttons.primary=Zt.buttons.auxiliary.nextSibling,Zt.buttons.primary.innerHTML=Be.button,Zt.buttonTemplate=Zt.buttons.primary.firstChild,Zt.buttons.primary.removeChild(Zt.buttonTemplate);for(var cr=0;cr<G.__internal.buttons.length;cr+=1){var Oi=G.__internal.buttons[cr];Ee.indexOf(Oi.key)<0&&Ee.push(Oi.key),Oi.element=Zt.buttonTemplate.cloneNode(),Oi.element.innerHTML=Oi.text,typeof Oi.className=="string"&&Oi.className!==""&&w(Oi.element,Oi.className);for(var Lo in Oi.attrs)Lo!=="className"&&Oi.attrs.hasOwnProperty(Lo)&&Oi.element.setAttribute(Lo,Oi.attrs[Lo]);Oi.scope==="auxiliary"?Zt.buttons.auxiliary.appendChild(Oi.element):Zt.buttons.primary.appendChild(Oi.element)}G.elements=Zt,Vn.resetHandler=ge(G,Ti),Vn.beginMoveHandler=ge(G,V),Vn.beginResizeHandler=ge(G,un),Vn.bringToFrontHandler=ge(G,sn),Vn.modalClickHandler=ge(G,bn),Vn.buttonsClickHandler=ge(G,oi),Vn.commandsClickHandler=ge(G,rt),Vn.transitionInHandler=ge(G,gi),Vn.transitionOutHandler=ge(G,Cr);for(var Rn in Vn.options)Oe.options[Rn]!==void 0?G.set(Rn,Oe.options[Rn]):nt.defaults.hasOwnProperty(Rn)?G.set(Rn,nt.defaults[Rn]):Rn==="title"&&G.set(Rn,nt.defaults.glossary[Rn]);typeof G.build=="function"&&G.build(),nt.defaults.hooks.postinit(G)}document.body.appendChild(G.elements.root)}var ct,Ye;function ht(){ct=k(),Ye=O()}function lt(){n.scrollTo(ct,Ye)}function Ut(){for(var G=0,Oe=0;Oe<g.length;Oe+=1){var It=g[Oe];(It.isModal()||It.isMaximized())&&(G+=1)}G===0&&document.body.className.indexOf(ve.noOverflow)>=0?(s(document.body,ve.noOverflow),Gt(!1)):G>0&&document.body.className.indexOf(ve.noOverflow)<0&&(Gt(!0),w(document.body,ve.noOverflow))}var qe="",hn=0;function Gt(G){nt.defaults.preventBodyShift&&(G&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(hn=Ye,qe=n.getComputedStyle(document.body).top,w(document.body,ve.fixed),document.body.style.top=-Ye+"px"):G||(Ye=hn,document.body.style.top=qe,s(document.body,ve.fixed),lt()))}function dn(G,Oe,It){typeof It=="string"&&s(G.elements.root,ve.prefix+It),w(G.elements.root,ve.prefix+Oe),G.elements.root.offsetWidth}function Fe(G){G.get("transitionOff")?w(G.elements.root,ve.noTransition):s(G.elements.root,ve.noTransition)}function bt(G){G.get("modal")?(s(G.elements.root,ve.modeless),G.isOpen()&&(ko(G),Ct(G),Ut())):(w(G.elements.root,ve.modeless),G.isOpen()&&(zn(G),Ct(G),Ut()))}function kt(G){G.get("basic")?w(G.elements.root,ve.basic):s(G.elements.root,ve.basic)}function Et(G){G.get("frameless")?w(G.elements.root,ve.frameless):s(G.elements.root,ve.frameless)}function sn(G,Oe){for(var It=g.indexOf(Oe),mt=It+1;mt<g.length;mt+=1)if(g[mt].isModal())return;return document.body.lastChild!==Oe.elements.root&&(document.body.appendChild(Oe.elements.root),g.splice(g.indexOf(Oe),1),g.push(Oe),vr(Oe)),!1}function En(G,Oe,It,mt){switch(Oe){case"title":G.setHeader(mt);break;case"modal":bt(G);break;case"basic":kt(G);break;case"frameless":Et(G);break;case"pinned":yt(G);break;case"closable":Ke(G);break;case"maximizable":Ie(G);break;case"pinnable":pt(G);break;case"movable":$e(G);break;case"resizable":Ue(G);break;case"padding":mt?s(G.elements.root,ve.noPadding):G.elements.root.className.indexOf(ve.noPadding)<0&&w(G.elements.root,ve.noPadding);break;case"overflow":mt?s(G.elements.root,ve.noOverflow):G.elements.root.className.indexOf(ve.noOverflow)<0&&w(G.elements.root,ve.noOverflow);break;case"transition":dn(G,mt,It);break;case"transitionOff":Fe(G);break}typeof G.hooks.onupdate=="function"&&G.hooks.onupdate.call(G,Oe,It,mt)}function me(G,Oe,It,mt,vn){var on={op:void 0,items:[]};if(typeof vn=="undefined"&&typeof mt=="string")on.op="get",Oe.hasOwnProperty(mt)?(on.found=!0,on.value=Oe[mt]):(on.found=!1,on.value=void 0);else{var si;if(on.op="set",typeof mt=="object"){var Vn=mt;for(var Zt in Vn)Oe.hasOwnProperty(Zt)?(Oe[Zt]!==Vn[Zt]&&(si=Oe[Zt],Oe[Zt]=Vn[Zt],It.call(G,Zt,si,Vn[Zt])),on.items.push({key:Zt,value:Vn[Zt],found:!0})):on.items.push({key:Zt,value:Vn[Zt],found:!1})}else if(typeof mt=="string")Oe.hasOwnProperty(mt)?(Oe[mt]!==vn&&(si=Oe[mt],Oe[mt]=vn,It.call(G,mt,si,vn)),on.items.push({key:mt,value:vn,found:!0})):on.items.push({key:mt,value:vn,found:!1});else throw new Error("args must be a string or object")}return on}function oe(G){var Oe;Sn(G,function(It){return Oe=G.get("invokeOnCloseOff")!==!0&&It.invokeOnClose===!0}),!Oe&&G.isOpen()&&G.close()}function rt(G,Oe){var It=G.srcElement||G.target;switch(It){case Oe.elements.commands.pin:Oe.isPinned()?_e(Oe):ee(Oe);break;case Oe.elements.commands.maximize:Oe.isMaximized()?Ze(Oe):We(Oe);break;case Oe.elements.commands.close:oe(Oe);break}return!1}function ee(G){G.set("pinned",!0)}function _e(G){G.set("pinned",!1)}function We(G){Ae("onmaximize",G),w(G.elements.root,ve.maximized),G.isOpen()&&Ut(),Ae("onmaximized",G)}function Ze(G){Ae("onrestore",G),s(G.elements.root,ve.maximized),G.isOpen()&&Ut(),Ae("onrestored",G)}function pt(G){G.get("pinnable")?w(G.elements.root,ve.pinnable):s(G.elements.root,ve.pinnable)}function St(G){var Oe=k();G.elements.modal.style.marginTop=O()+"px",G.elements.modal.style.marginLeft=Oe+"px",G.elements.modal.style.marginRight=-Oe+"px"}function jt(G){var Oe=parseInt(G.elements.modal.style.marginTop,10),It=parseInt(G.elements.modal.style.marginLeft,10);if(G.elements.modal.style.marginTop="",G.elements.modal.style.marginLeft="",G.elements.modal.style.marginRight="",G.isOpen()){var mt=0,vn=0;G.elements.dialog.style.top!==""&&(mt=parseInt(G.elements.dialog.style.top,10)),G.elements.dialog.style.top=mt+(Oe-O())+"px",G.elements.dialog.style.left!==""&&(vn=parseInt(G.elements.dialog.style.left,10)),G.elements.dialog.style.left=vn+(It-k())+"px"}}function Ct(G){!G.get("modal")&&!G.get("pinned")?St(G):jt(G)}function yt(G){G.get("pinned")?(s(G.elements.root,ve.unpinned),G.isOpen()&&jt(G)):(w(G.elements.root,ve.unpinned),G.isOpen()&&!G.isModal()&&St(G))}function Ie(G){G.get("maximizable")?w(G.elements.root,ve.maximizable):s(G.elements.root,ve.maximizable)}function Ke(G){G.get("closable")?(w(G.elements.root,ve.closable),Or(G)):(s(G.elements.root,ve.closable),xr(G))}var Vt=!1,qt=0;function bn(G,Oe){if(G.timeStamp-qt>200&&(qt=G.timeStamp)&&!Vt){var It=G.srcElement||G.target;Oe.get("closableByDimmer")===!0&&It===Oe.elements.modal&&oe(Oe)}Vt=!1}var Tn=0,An=!1;function Sn(G,Oe){if(Date.now()-Tn>200&&(Tn=Date.now()))for(var It=0;It<G.__internal.buttons.length;It+=1){var mt=G.__internal.buttons[It];if(!mt.element.disabled&&Oe(mt)){var vn=ke(It,mt);typeof G.callback=="function"&&G.callback.apply(G,[vn]),vn.cancel===!1&&G.close();break}}}function oi(G,Oe){var It=G.srcElement||G.target;Sn(Oe,function(mt){return mt.element===It&&(An=!0)})}function Ci(G){if(An){An=!1;return}var Oe=g[g.length-1],It=G.keyCode;if(Oe.__internal.buttons.length===0&&It===h.ESC&&Oe.get("closable")===!0)return oe(Oe),!1;if(Ee.indexOf(It)>-1)return Sn(Oe,function(mt){return mt.key===It}),!1}function lr(G){var Oe=g[g.length-1],It=G.keyCode;if(It===h.LEFT||It===h.RIGHT){for(var mt=Oe.__internal.buttons,vn=0;vn<mt.length;vn+=1)if(document.activeElement===mt[vn].element)switch(It){case h.LEFT:mt[(vn||mt.length)-1].element.focus();return;case h.RIGHT:mt[(vn+1)%mt.length].element.focus();return}}else if(It<h.F12+1&&It>h.F1-1&&Ee.indexOf(It)>-1)return G.preventDefault(),G.stopPropagation(),Sn(Oe,function(on){return on.key===It}),!1}function vr(G,Oe){if(Oe)Oe.focus();else{var It=G.__internal.focus,mt=It.element;switch(typeof It.element){case"number":G.__internal.buttons.length>It.element&&(G.get("basic")===!0?mt=G.elements.reset[0]:mt=G.__internal.buttons[It.element].element);break;case"string":mt=G.elements.body.querySelector(It.element);break;case"function":mt=It.element.call(G);break}(G.get("defaultFocusOff")===!0||(typeof mt=="undefined"||mt===null)&&G.__internal.buttons.length===0)&&(mt=G.elements.reset[0]),mt&&mt.focus&&(mt.focus(),It.select&&mt.select&&mt.select())}}function Ti(G,Oe){if(!Oe){for(var It=g.length-1;It>-1;It-=1)if(g[It].isModal()){Oe=g[It];break}}if(Oe&&Oe.isModal()){var mt=Oe.elements.reset[0],vn=Oe.elements.reset[1],on=G.relatedTarget,si=Oe.elements.root.contains(on),Vn=G.srcElement||G.target,Zt;if(Vn===mt&&!si||Vn===vn&&on===mt)return;Vn===vn||Vn===document.body?Zt=mt:Vn===mt&&on===vn?Zt=$i(Oe):Vn===mt&&si&&(Zt=$i(Oe,!0)),vr(Oe,Zt)}}function $i(G,Oe){var It=[].slice.call(G.elements.dialog.querySelectorAll(_.tabbable));Oe&&It.reverse();for(var mt=0;mt<It.length;mt+=1){var vn=It[mt];if(vn.offsetParent||vn.offsetWidth||vn.offsetHeight||vn.getClientRects().length)return vn}}function ti(G){var Oe=g[g.length-1];Oe&&G.shiftKey&&G.keyCode===h.TAB&&Oe.elements.reset[1].focus()}function gi(G,Oe){clearTimeout(Oe.__internal.timerIn),vr(Oe),An=!1,Ae("onfocus",Oe),H(Oe.elements.dialog,te.type,Oe.__internal.transitionInHandler),s(Oe.elements.root,ve.animationIn)}function Cr(G,Oe){clearTimeout(Oe.__internal.timerOut),H(Oe.elements.dialog,te.type,Oe.__internal.transitionOutHandler),Te(Oe),gn(Oe),Oe.isMaximized()&&!Oe.get("startMaximized")&&Ze(Oe),typeof Oe.__internal.destroy=="function"&&Oe.__internal.destroy.apply(Oe)}var _r=null,Wi=0,tr=0,Hr="pageX",Dr="pageY",Ki=null,mo=!1,Wr=null;function se(G,Oe){var It=G[Hr]-Wi,mt=G[Dr]-tr;mo&&(mt-=document.body.scrollTop),Oe.style.left=It+"px",Oe.style.top=mt+"px"}function $(G,Oe){var It=G[Hr]-Wi,mt=G[Dr]-tr;mo&&(mt-=document.body.scrollTop),Oe.style.left=Math.min(Ki.maxLeft,Math.max(Ki.minLeft,It))+"px",mo?Oe.style.top=Math.min(Ki.maxTop,Math.max(Ki.minTop,mt))+"px":Oe.style.top=Math.max(Ki.minTop,mt)+"px"}function V(G,Oe){if(Ne===null&&!Oe.isMaximized()&&Oe.get("movable")){var It,mt=0,vn=0;if(G.type==="touchstart"?(G.preventDefault(),It=G.targetTouches[0],Hr="clientX",Dr="clientY"):G.button===0&&(It=G),It){var on=Oe.elements.dialog;if(w(on,ve.capture),on.style.left&&(mt=parseInt(on.style.left,10)),on.style.top&&(vn=parseInt(on.style.top,10)),Wi=It[Hr]-mt,tr=It[Dr]-vn,Oe.isModal()?tr+=Oe.elements.modal.scrollTop:Oe.isPinned()&&(tr-=document.body.scrollTop),Oe.get("moveBounded")){var si=on,Vn=-mt,Zt=-vn;do Vn+=si.offsetLeft,Zt+=si.offsetTop;while(si=si.offsetParent);Ki={maxLeft:Vn,minLeft:-Vn,maxTop:document.documentElement.clientHeight-on.clientHeight-Zt,minTop:-Zt},Wr=$}else Ki=null,Wr=se;return Ae("onmove",Oe),mo=!Oe.isModal()&&Oe.isPinned(),_r=Oe,Wr(It,on),w(document.body,ve.noSelection),!1}}}function re(G){if(_r){var Oe;G.type==="touchmove"?(G.preventDefault(),Oe=G.targetTouches[0]):G.button===0&&(Oe=G),Oe&&Wr(Oe,_r.elements.dialog)}}function de(){if(_r){var G=_r;_r=Ki=null,s(document.body,ve.noSelection),s(G.elements.dialog,ve.capture),Ae("onmoved",G)}}function Te(G){_r=null;var Oe=G.elements.dialog;Oe.style.left=Oe.style.top=""}function $e(G){G.get("movable")?(w(G.elements.root,ve.movable),G.isOpen()&&nr(G)):(Te(G),s(G.elements.root,ve.movable),G.isOpen()&&zt(G))}var Ne=null,Ce=Number.Nan,je=0,_t=0,Pt=0;function gt(G,Oe,It){var mt=Oe,vn=0,on=0;do vn+=mt.offsetLeft,on+=mt.offsetTop;while(mt=mt.offsetParent);var si,Vn;It===!0?(si=G.pageX,Vn=G.pageY):(si=G.clientX,Vn=G.clientY);var Zt=C();if(Zt&&(si=document.body.offsetWidth-si,isNaN(Ce)||(vn=document.body.offsetWidth-vn-Oe.offsetWidth)),Oe.style.height=Vn-on+Pt+"px",Oe.style.width=si-vn+Pt+"px",!isNaN(Ce)){var cr=Math.abs(Oe.offsetWidth-je)*.5;Zt&&(cr*=-1),Oe.offsetWidth>je?Oe.style.left=Ce+cr+"px":Oe.offsetWidth>=_t&&(Oe.style.left=Ce-cr+"px")}}function un(G,Oe){if(!Oe.isMaximized()){var It;if(G.type==="touchstart"?(G.preventDefault(),It=G.targetTouches[0]):G.button===0&&(It=G),It){Ae("onresize",Oe),Ne=Oe,Pt=Oe.elements.resizeHandle.offsetHeight/2;var mt=Oe.elements.dialog;return w(mt,ve.capture),Ce=parseInt(mt.style.left,10),mt.style.height=mt.offsetHeight+"px",mt.style.minHeight=Oe.elements.header.offsetHeight+Oe.elements.footer.offsetHeight+"px",mt.style.width=(je=mt.offsetWidth)+"px",mt.style.maxWidth!=="none"&&(mt.style.minWidth=(_t=mt.offsetWidth)+"px"),mt.style.maxWidth="none",w(document.body,ve.noSelection),!1}}}function Xt(G){if(Ne){var Oe;G.type==="touchmove"?(G.preventDefault(),Oe=G.targetTouches[0]):G.button===0&&(Oe=G),Oe&&gt(Oe,Ne.elements.dialog,!Ne.get("modal")&&!Ne.get("pinned"))}}function an(){if(Ne){var G=Ne;Ne=null,s(document.body,ve.noSelection),s(G.elements.dialog,ve.capture),Vt=!0,Ae("onresized",G)}}function gn(G){Ne=null;var Oe=G.elements.dialog;Oe.style.maxWidth==="none"&&(Oe.style.maxWidth=Oe.style.minWidth=Oe.style.width=Oe.style.height=Oe.style.minHeight=Oe.style.left="",Ce=Number.Nan,je=_t=Pt=0)}function Ue(G){G.get("resizable")?(w(G.elements.root,ve.resizable),G.isOpen()&&Un(G)):(gn(G),s(G.elements.root,ve.resizable),G.isOpen()&&Ln(G))}function jn(){for(var G=0;G<g.length;G+=1){var Oe=g[G];Oe.get("autoReset")&&(Te(Oe),gn(Oe))}}function Kt(G){g.length===1&&(J(n,"resize",jn),J(document.body,"keyup",Ci),J(document.body,"keydown",lr),J(document.body,"focus",Ti),J(document.documentElement,"mousemove",re),J(document.documentElement,"touchmove",re,!1,!1),J(document.documentElement,"mouseup",de),J(document.documentElement,"touchend",de),J(document.documentElement,"mousemove",Xt),J(document.documentElement,"touchmove",Xt,!1,!1),J(document.documentElement,"mouseup",an),J(document.documentElement,"touchend",an)),J(G.elements.commands.container,"click",G.__internal.commandsClickHandler),J(G.elements.footer,"click",G.__internal.buttonsClickHandler),J(G.elements.reset[0],"focusin",G.__internal.resetHandler),J(G.elements.reset[0],"keydown",ti),J(G.elements.reset[1],"focusin",G.__internal.resetHandler),An=!0,J(G.elements.dialog,te.type,G.__internal.transitionInHandler),G.get("modal")||zn(G),G.get("resizable")&&Un(G),G.get("movable")&&nr(G)}function Yn(G){g.length===1&&(H(n,"resize",jn),H(document.body,"keyup",Ci),H(document.body,"keydown",lr),H(document.body,"focus",Ti),H(document.documentElement,"mousemove",re),H(document.documentElement,"mouseup",de),H(document.documentElement,"mousemove",Xt),H(document.documentElement,"mouseup",an)),H(G.elements.commands.container,"click",G.__internal.commandsClickHandler),H(G.elements.footer,"click",G.__internal.buttonsClickHandler),H(G.elements.reset[0],"focusin",G.__internal.resetHandler),H(G.elements.reset[0],"keydown",ti),H(G.elements.reset[1],"focusin",G.__internal.resetHandler),J(G.elements.dialog,te.type,G.__internal.transitionOutHandler),G.get("modal")||ko(G),G.get("movable")&&zt(G),G.get("resizable")&&Ln(G)}function zn(G){J(G.elements.dialog,"focus",G.__internal.bringToFrontHandler,!0)}function ko(G){H(G.elements.dialog,"focus",G.__internal.bringToFrontHandler,!0)}function nr(G){J(G.elements.header,"mousedown",G.__internal.beginMoveHandler),J(G.elements.header,"touchstart",G.__internal.beginMoveHandler,!1,!1)}function zt(G){H(G.elements.header,"mousedown",G.__internal.beginMoveHandler),H(G.elements.header,"touchstart",G.__internal.beginMoveHandler,!1,!1)}function Un(G){J(G.elements.resizeHandle,"mousedown",G.__internal.beginResizeHandler),J(G.elements.resizeHandle,"touchstart",G.__internal.beginResizeHandler,!1,!1)}function Ln(G){H(G.elements.resizeHandle,"mousedown",G.__internal.beginResizeHandler),H(G.elements.resizeHandle,"touchstart",G.__internal.beginResizeHandler,!1,!1)}function Or(G){J(G.elements.modal,"click",G.__internal.modalClickHandler)}function xr(G){H(G.elements.modal,"click",G.__internal.modalClickHandler)}return{__init:He,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(ve.modeless)<0},isMaximized:function(){return this.elements.root.className.indexOf(ve.maximized)>-1},isPinned:function(){return this.elements.root.className.indexOf(ve.unpinned)<0},maximize:function(){return this.isMaximized()||We(this),this},restore:function(){return this.isMaximized()&&Ze(this),this},pin:function(){return this.isPinned()||ee(this),this},unpin:function(){return this.isPinned()&&_e(this),this},bringToFront:function(){return sn(null,this),this},moveTo:function(G,Oe){if(!isNaN(G)&&!isNaN(Oe)){Ae("onmove",this);var It=this.elements.dialog,mt=It,vn=0,on=0;It.style.left&&(vn-=parseInt(It.style.left,10)),It.style.top&&(on-=parseInt(It.style.top,10));do vn+=mt.offsetLeft,on+=mt.offsetTop;while(mt=mt.offsetParent);var si=G-vn,Vn=Oe-on;C()&&(si*=-1),It.style.left=si+"px",It.style.top=Vn+"px",Ae("onmoved",this)}return this},resizeTo:function(G,Oe){var It=parseFloat(G),mt=parseFloat(Oe),vn=/(\d*\.\d+|\d+)%/;if(!isNaN(It)&&!isNaN(mt)&&this.get("resizable")===!0){Ae("onresize",this),(""+G).match(vn)&&(It=It/100*document.documentElement.clientWidth),(""+Oe).match(vn)&&(mt=mt/100*document.documentElement.clientHeight);var on=this.elements.dialog;on.style.maxWidth!=="none"&&(on.style.minWidth=(_t=on.offsetWidth)+"px"),on.style.maxWidth="none",on.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",on.style.width=It+"px",on.style.height=mt+"px",Ae("onresized",this)}return this},setting:function(G,Oe){var It=this,mt=me(this,this.__internal.options,function(Vn,Zt,cr){En(It,Vn,Zt,cr)},G,Oe);if(mt.op==="get")return mt.found?mt.value:typeof this.settings!="undefined"?me(this,this.settings,this.settingUpdated||function(){},G,Oe).value:void 0;if(mt.op==="set"){if(mt.items.length>0)for(var vn=this.settingUpdated||function(){},on=0;on<mt.items.length;on+=1){var si=mt.items[on];!si.found&&typeof this.settings!="undefined"&&me(this,this.settings,vn,si.key,si.value)}return this}},set:function(G,Oe){return this.setting(G,Oe),this},get:function(G){return this.setting(G)},setHeader:function(G){return typeof G=="string"?(D(this.elements.header),this.elements.header.innerHTML=G):G instanceof n.HTMLElement&&this.elements.header.firstChild!==G&&(D(this.elements.header),this.elements.header.appendChild(G)),this},setContent:function(G){return typeof G=="string"?(D(this.elements.content),this.elements.content.innerHTML=G):G instanceof n.HTMLElement&&this.elements.content.firstChild!==G&&(D(this.elements.content),this.elements.content.appendChild(G)),this},showModal:function(G){return this.show(!0,G)},show:function(G,Oe){if(He(this),this.__internal.isOpen){Te(this),gn(this),w(this.elements.dialog,ve.shake);var mt=this;setTimeout(function(){s(mt.elements.dialog,ve.shake)},200)}else{if(this.__internal.isOpen=!0,g.push(this),nt.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",Xe="0"),typeof this.prepare=="function"&&this.prepare(),Kt(this),G!==void 0&&this.set("modal",G),ht(),Ut(),typeof Oe=="string"&&Oe!==""&&(this.__internal.className=Oe,w(this.elements.root,Oe)),this.get("startMaximized")?this.maximize():this.isMaximized()&&Ze(this),Ct(this),this.elements.root.removeAttribute("style"),s(this.elements.root,ve.animationOut),w(this.elements.root,ve.animationIn),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,te.supported?1e3:100),ot){var It=this.elements.root;It.style.display="none",setTimeout(function(){It.style.display="block"},0)}this.elements.root.offsetWidth,s(this.elements.root,ve.hidden),lt(),typeof this.hooks.onshow=="function"&&this.hooks.onshow.call(this),Ae("onshow",this)}return this},close:function(){return this.__internal.isOpen&&Ae("onclosing",this)!==!1&&(Yn(this),s(this.elements.root,ve.animationIn),w(this.elements.root,ve.animationOut),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,te.supported?1e3:100),w(this.elements.root,ve.hidden),this.elements.modal.offsetWidth,nt.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),typeof this.__internal.className!="undefined"&&this.__internal.className!==""&&s(this.elements.root,this.__internal.className),typeof this.hooks.onclose=="function"&&this.hooks.onclose.call(this),Ae("onclose",this),g.splice(g.indexOf(this),1),this.__internal.isOpen=!1,Ut()),!g.length&&Xe==="0"&&document.body.removeAttribute("tabindex"),this},closeOthers:function(){return nt.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){K(this,He)},this.close()):this.__internal.destroy||K(this,He)),this}}}(),Qe=function(){var Ee,Xe=[],ot=_.notifier.classes,Be=ot.base;function ve(lt){if(!lt.__internal){lt.__internal={position:nt.defaults.notifier.position,delay:nt.defaults.notifier.delay},Ee=document.createElement("DIV");var Ut="transitionOff"in _.notifier?_.notifier.transitionOff:_.transitionOff;Ut&&(Be=ot.base+" ajs-no-transition"),Ye(lt)}Ee.parentNode!==document.body&&document.body.appendChild(Ee)}function He(lt){lt.__internal.pushed=!0,Xe.push(lt)}function ct(lt){Xe.splice(Xe.indexOf(lt),1),lt.__internal.pushed=!1}function Ye(lt){switch(Ee.className=Be,lt.__internal.position){case"top-right":w(Ee,ot.top+" "+ot.right);break;case"top-left":w(Ee,ot.top+" "+ot.left);break;case"top-center":w(Ee,ot.top+" "+ot.center);break;case"bottom-left":w(Ee,ot.bottom+" "+ot.left);break;case"bottom-center":w(Ee,ot.bottom+" "+ot.center);break;default:case"bottom-right":w(Ee,ot.bottom+" "+ot.right);break}}function ht(lt,Ut){function qe(Fe,bt){(!bt.__internal.closeButton||Fe.target.getAttribute("data-close")==="true")&&bt.dismiss(!0)}function hn(Fe,bt){H(bt.element,te.type,hn),Ee.removeChild(bt.element)}function Gt(Fe){return Fe.__internal||(Fe.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},Fe.__internal.clickHandler=ge(Fe,qe),Fe.__internal.transitionEndHandler=ge(Fe,hn)),Fe}function dn(Fe){clearTimeout(Fe.__internal.timer),clearTimeout(Fe.__internal.transitionTimeout)}return Gt({element:lt,push:function(Fe,bt){if(!this.__internal.pushed){He(this),dn(this);var kt,Et;switch(arguments.length){case 0:Et=this.__internal.delay;break;case 1:typeof Fe=="number"?Et=Fe:(kt=Fe,Et=this.__internal.delay);break;case 2:kt=Fe,Et=bt;break}return this.__internal.closeButton=nt.defaults.notifier.closeButton,typeof kt!="undefined"&&this.setContent(kt),Qe.__internal.position.indexOf("top")<0?Ee.appendChild(this.element):Ee.insertBefore(this.element,Ee.firstChild),this.element.offsetWidth,w(this.element,ot.visible),J(this.element,"click",this.__internal.clickHandler),this.delay(Et)}return this},ondismiss:function(){},callback:Ut,dismiss:function(Fe){return this.__internal.pushed&&(dn(this),typeof this.ondismiss=="function"&&this.ondismiss.call(this)===!1||(H(this.element,"click",this.__internal.clickHandler),typeof this.element!="undefined"&&this.element.parentNode===Ee&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,te.supported?1e3:100),s(this.element,ot.visible),typeof this.callback=="function"&&this.callback.call(this,Fe)),ct(this))),this},delay:function(Fe){if(dn(this),this.__internal.delay=typeof Fe!="undefined"&&!isNaN(+Fe)?+Fe:Qe.__internal.delay,this.__internal.delay>0){var bt=this;this.__internal.timer=setTimeout(function(){bt.dismiss()},this.__internal.delay*1e3)}return this},setContent:function(Fe){if(typeof Fe=="string"?(D(this.element),this.element.innerHTML=Fe):Fe instanceof n.HTMLElement&&this.element.firstChild!==Fe&&(D(this.element),this.element.appendChild(Fe)),this.__internal.closeButton){var bt=document.createElement("span");w(bt,ot.close),bt.setAttribute("data-close",!0),this.element.appendChild(bt)}return this},dismissOthers:function(){return Qe.dismissAll(this),this}})}return{setting:function(lt,Ut){if(ve(this),typeof Ut=="undefined")return this.__internal[lt];switch(lt){case"position":this.__internal.position=Ut,Ye(this);break;case"delay":this.__internal.delay=Ut;break}return this},set:function(lt,Ut){return this.setting(lt,Ut),this},get:function(lt){return this.setting(lt)},create:function(lt,Ut){ve(this);var qe=document.createElement("div");return qe.className=ot.message+(typeof lt=="string"&&lt!==""?" "+ot.prefix+lt:""),ht(qe,Ut)},dismissAll:function(lt){for(var Ut=Xe.slice(0),qe=0;qe<Ut.length;qe+=1){var hn=Ut[qe];(lt===void 0||lt!==hn)&&hn.dismiss()}}}}();function wt(){var Ee={};function Xe(ve,He){for(var ct in He)He.hasOwnProperty(ct)&&(ve[ct]=He[ct]);return ve}function ot(ve){var He=Ee[ve].dialog;return He&&typeof He.__init=="function"&&He.__init(He),He}function Be(ve,He,ct,Ye){var ht={dialog:null,factory:He};return Ye!==void 0&&(ht.factory=function(){return Xe(new Ee[Ye].factory,new He)}),ct||(ht.dialog=Xe(new ht.factory,Pe)),Ee[ve]=ht}return{defaults:_,dialog:function(ve,He,ct,Ye){if(typeof He!="function")return ot(ve);if(this.hasOwnProperty(ve))throw new Error("alertify.dialog: name already exists");var ht=Be(ve,He,ct,Ye);ct?this[ve]=function(){if(arguments.length===0)return ht.dialog;var lt=Xe(new ht.factory,Pe);return lt&&typeof lt.__init=="function"&&lt.__init(lt),lt.main.apply(lt,arguments),lt.show.apply(lt)}:this[ve]=function(){if(ht.dialog&&typeof ht.dialog.__init=="function"&&ht.dialog.__init(ht.dialog),arguments.length===0)return ht.dialog;var lt=ht.dialog;return lt.main.apply(ht.dialog,arguments),lt.show.apply(ht.dialog)}},closeAll:function(ve){for(var He=g.slice(0),ct=0;ct<He.length;ct+=1){var Ye=He[ct];(ve===void 0||ve!==Ye)&&Ye.close()}},setting:function(ve,He,ct){if(ve==="notifier")return Qe.setting(He,ct);var Ye=ot(ve);if(Ye)return Ye.setting(He,ct)},set:function(ve,He,ct){return this.setting(ve,He,ct)},get:function(ve,He){return this.setting(ve,He)},notify:function(ve,He,ct,Ye){return Qe.create(He,Ye).push(ve,ct)},message:function(ve,He,ct){return Qe.create(null,ct).push(ve,He)},success:function(ve,He,ct){return Qe.create("success",ct).push(ve,He)},error:function(ve,He,ct){return Qe.create("error",ct).push(ve,He)},warning:function(ve,He,ct){return Qe.create("warning",ct).push(ve,He)},dismissAll:function(){Qe.dismissAll()}}}var nt=new wt;nt.dialog("alert",function(){return{main:function(Ee,Xe,ot){var Be,ve,He;switch(arguments.length){case 1:ve=Ee;break;case 2:typeof Xe=="function"?(ve=Ee,He=Xe):(Be=Ee,ve=Xe);break;case 3:Be=Ee,ve=Xe,He=ot;break}return this.set("title",Be),this.set("message",ve),this.set("onok",He),this},setup:function(){return{buttons:[{text:nt.defaults.glossary.ok,key:h.ESC,invokeOnClose:!0,className:nt.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(Ee){this.setContent(Ee)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(Ee,Xe,ot){switch(Ee){case"message":this.setMessage(ot);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=ot);break}},callback:function(Ee){if(typeof this.get("onok")=="function"){var Xe=this.get("onok").call(this,Ee);typeof Xe!="undefined"&&(Ee.cancel=!Xe)}}}}),nt.dialog("confirm",function(){var Ee={timer:null,index:null,text:null,duration:null,task:function(Be,ve){if(ve.isOpen()){if(ve.__internal.buttons[Ee.index].element.innerHTML=Ee.text+" (&#8207;"+Ee.duration+"&#8207;) ",Ee.duration-=1,Ee.duration===-1){Xe(ve);var He=ve.__internal.buttons[Ee.index],ct=ke(Ee.index,He);typeof ve.callback=="function"&&ve.callback.apply(ve,[ct]),ct.close!==!1&&ve.close()}}else Xe(ve)}};function Xe(Be){Ee.timer!==null&&(clearInterval(Ee.timer),Ee.timer=null,Be.__internal.buttons[Ee.index].element.innerHTML=Ee.text)}function ot(Be,ve,He){Xe(Be),Ee.duration=He,Ee.index=ve,Ee.text=Be.__internal.buttons[ve].element.innerHTML,Ee.timer=setInterval(ge(Be,Ee.task),1e3),Ee.task(null,Be)}return{main:function(Be,ve,He,ct){var Ye,ht,lt,Ut;switch(arguments.length){case 1:ht=Be;break;case 2:ht=Be,lt=ve;break;case 3:ht=Be,lt=ve,Ut=He;break;case 4:Ye=Be,ht=ve,lt=He,Ut=ct;break}return this.set("title",Ye),this.set("message",ht),this.set("onok",lt),this.set("oncancel",Ut),this},setup:function(){return{buttons:[{text:nt.defaults.glossary.ok,key:h.ENTER,className:nt.defaults.theme.ok},{text:nt.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:nt.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(Be){this.setContent(Be)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(Be,ve,He){switch(Be){case"message":this.setMessage(He);break;case"labels":"ok"in He&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=He.ok,this.__internal.buttons[0].element.innerHTML=He.ok),"cancel"in He&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=He.cancel,this.__internal.buttons[1].element.innerHTML=He.cancel);break;case"reverseButtons":He===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element=He==="ok"?0:1;break}},callback:function(Be){Xe(this);var ve;switch(Be.index){case 0:typeof this.get("onok")=="function"&&(ve=this.get("onok").call(this,Be),typeof ve!="undefined"&&(Be.cancel=!ve));break;case 1:typeof this.get("oncancel")=="function"&&(ve=this.get("oncancel").call(this,Be),typeof ve!="undefined"&&(Be.cancel=!ve));break}},autoOk:function(Be){return ot(this,0,Be),this},autoCancel:function(Be){return ot(this,1,Be),this}}}),nt.dialog("prompt",function(){var Ee=document.createElement("INPUT"),Xe=document.createElement("P");return{main:function(ot,Be,ve,He,ct){var Ye,ht,lt,Ut,qe;switch(arguments.length){case 1:ht=ot;break;case 2:ht=ot,lt=Be;break;case 3:ht=ot,lt=Be,Ut=ve;break;case 4:ht=ot,lt=Be,Ut=ve,qe=He;break;case 5:Ye=ot,ht=Be,lt=ve,Ut=He,qe=ct;break}return this.set("title",Ye),this.set("message",ht),this.set("value",lt),this.set("onok",Ut),this.set("oncancel",qe),this},setup:function(){return{buttons:[{text:nt.defaults.glossary.ok,key:h.ENTER,className:nt.defaults.theme.ok},{text:nt.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:nt.defaults.theme.cancel}],focus:{element:Ee,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){Ee.className=nt.defaults.theme.input,Ee.setAttribute("type","text"),Ee.value=this.get("value"),this.elements.content.appendChild(Xe),this.elements.content.appendChild(Ee)},prepare:function(){},setMessage:function(ot){typeof ot=="string"?(D(Xe),Xe.innerHTML=ot):ot instanceof n.HTMLElement&&Xe.firstChild!==ot&&(D(Xe),Xe.appendChild(ot))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(ot,Be,ve){switch(ot){case"message":this.setMessage(ve);break;case"value":Ee.value=ve;break;case"type":switch(ve){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":Ee.type=ve;break;default:Ee.type="text";break}break;case"labels":ve.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=ve.ok),ve.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=ve.cancel);break;case"reverseButtons":ve===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break}},callback:function(ot){var Be;switch(ot.index){case 0:this.settings.value=Ee.value,typeof this.get("onok")=="function"&&(Be=this.get("onok").call(this,ot,this.settings.value),typeof Be!="undefined"&&(ot.cancel=!Be));break;case 1:typeof this.get("oncancel")=="function"&&(Be=this.get("oncancel").call(this,ot),typeof Be!="undefined"&&(ot.cancel=!Be)),ot.cancel||(Ee.value=this.settings.value);break}}}}),t.exports=nt})(typeof window!="undefined"?window:zs)})(vA);var n8=vA.exports,xA={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){var l,h,_;function g(s,C){if(!l)l=C;else if(!h)h=C;else{var O="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+l+")(sharedChunk); ("+h+")(sharedChunk); self.onerror = null;",k={};l(k),_=C(k),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(_.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}g(["exports"],function(s){var C="2.8.2",O=k;function k(r,e,o,a){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=o,this.p2y=a}k.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},k.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},k.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},k.prototype.solveCurveX=function(r,e){var o,a,u,d,m;for(e===void 0&&(e=1e-6),u=r,m=0;m<8;m++){if(d=this.sampleCurveX(u)-r,Math.abs(d)<e)return u;var y=this.sampleCurveDerivativeX(u);if(Math.abs(y)<1e-6)break;u-=d/y}if((u=r)<(o=0))return o;if(u>(a=1))return a;for(;o<a;){if(d=this.sampleCurveX(u),Math.abs(d-r)<e)return u;r>d?o=u:a=u,u=.5*(a-o)+o}return u},k.prototype.solve=function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))};var D=F;function F(r,e){this.x=r,this.y=e}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,o=r.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),o=Math.sin(r),a=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=a,this},_rotateAround:function(r,e){var o=Math.cos(r),a=Math.sin(r),u=e.y+a*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-a*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(r){return r instanceof F?r:Array.isArray(r)?new F(r[0],r[1]):r};var K=typeof self!="undefined"?self:{};const Se=Math.PI/180,pe=180/Math.PI;function J(r){return r*Se}function H(r){return r*pe}const te=[[0,0],[1,0],[1,1],[0,1]];function ge(r){if(r<=0)return 0;if(r>=1)return 1;const e=r*r,o=e*r;return 4*(r<.5?o:3*(r-e)+o-.75)}function ke(r,e,o,a){const u=new O(r,e,o,a);return function(d){return u.solve(d)}}const Ae=ke(.25,.1,.25,1);function Pe(r,e,o){return Math.min(o,Math.max(e,r))}function Qe(r,e,o){return(o=Pe((o-r)/(e-r),0,1))*o*(3-2*o)}function wt(r,e,o){const a=o-e,u=((r-e)%a+a)%a+e;return u===e?o:u}function nt(r,e,o){if(!r.length)return o(null,[]);let a=r.length;const u=new Array(r.length);let d=null;r.forEach((m,y)=>{e(m,(b,T)=>{b&&(d=b),u[y]=T,--a==0&&o(d,u)})})}function Ee(r){const e=[];for(const o in r)e.push(r[o]);return e}function Xe(r,...e){for(const o of e)for(const a in o)r[a]=o[a];return r}let ot=1;function Be(){return ot++}function ve(){return function r(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function He(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function ct(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Ye(r,e){r.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function ht(r,e){return r.indexOf(e,r.length-e.length)!==-1}function lt(r,e,o){const a={};for(const u in r)a[u]=e.call(o||this,r[u],u,r);return a}function Ut(r,e,o){const a={};for(const u in r)e.call(o||this,r[u],u,r)&&(a[u]=r[u]);return a}function qe(r){return Array.isArray(r)?r.map(qe):typeof r=="object"&&r?lt(r,qe):r}const hn={};function Gt(r){hn[r]||(typeof console!="undefined"&&console.warn(r),hn[r]=!0)}function dn(r,e,o){return(o.y-r.y)*(e.x-r.x)>(e.y-r.y)*(o.x-r.x)}function Fe(r){let e=0;for(let o,a,u=0,d=r.length,m=d-1;u<d;m=u++)o=r[u],a=r[m],e+=(a.x-o.x)*(o.y+a.y);return e}function bt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function kt(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,a,u,d)=>{const m=u||d;return e[a]=!m||m.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let Et,sn,En,me,oe=null;function rt(r){if(oe==null){const e=r.navigator?r.navigator.userAgent:null;oe=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return oe}function ee(r){try{const e=K[r];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}const _e={now:()=>En!==void 0?En:K.performance.now(),setNow(r){En=r},restoreNow(){En=void 0},frame(r){const e=K.requestAnimationFrame(r);return{cancel:()=>K.cancelAnimationFrame(e)}},getImageData(r,e=0){const{width:o,height:a}=r;me||(me=K.document.createElement("canvas"));const u=me.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return(o>me.width||a>me.height)&&(me.width=o,me.height=a),u.clearRect(-e,-e,o+2*e,a+2*e),u.drawImage(r,0,0,o,a),u.getImageData(-e,-e,o+2*e,a+2*e)},resolveURL:r=>(Et||(Et=K.document.createElement("a")),Et.href=r,Et.href),get devicePixelRatio(){return K.devicePixelRatio},get prefersReducedMotion(){return!!K.matchMedia&&(sn==null&&(sn=K.matchMedia("(prefers-reduced-motion: reduce)")),sn.matches)}};let We;const Ze={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(We==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{We={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):r}catch{We=r}}return We},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},pt={supported:!1,testSupport:function(r){!Ct&&jt&&(yt?Ie(r):St=r)}};let St,jt,Ct=!1,yt=!1;function Ie(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,jt),r.isContextLost())return;pt.supported=!0}catch{}r.deleteTexture(e),Ct=!0}K.document&&(jt=K.document.createElement("img"),jt.onload=function(){St&&Ie(St),St=null,yt=!0},jt.onerror=function(){Ct=!0,St=null},jt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ke="01",Vt="NO_ACCESS_TOKEN";function qt(r){return r.indexOf("mapbox:")===0}function bn(r){return Ze.API_URL_REGEX.test(r)}const Tn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function An(r){const e=r.match(Tn);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Sn(r){const e=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${e}`}function oi(r){if(!r)return null;const e=r.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(K.atob(e[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ci{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const o=oi(Ze.ACCESS_TOKEN);let a="";return a=o&&o.u?K.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(u,d)=>String.fromCharCode(Number("0x"+d)))):Ze.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${a}`:`mapbox.eventData:${a}`}fetchEventData(){const e=ee("localStorage"),o=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const u=K.localStorage.getItem(o);u&&(this.eventData=JSON.parse(u));const d=K.localStorage.getItem(a);d&&(this.anonId=d)}catch{Gt("Unable to read from LocalStorage")}}saveEventData(){const e=ee("localStorage"),o=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{K.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&K.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{Gt("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,o,a,u){if(!Ze.EVENTS_URL)return;const d=An(Ze.EVENTS_URL);d.params.push(`access_token=${u||Ze.ACCESS_TOKEN||""}`);const m={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:Ke,userId:this.anonId},y=o?Xe(m,o):m,b={url:Sn(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([y])};this.pendingRequest=Te(b,T=>{this.pendingRequest=null,a(T),this.saveEventData(),this.processRequests(u)})}queueRequest(e,o){this.queue.push(e),this.processRequests(o)}}const lr=new class extends Ci{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,e){Ze.EVENTS_URL&&Ze.ACCESS_TOKEN&&Array.isArray(r)&&r.some(o=>qt(o)||bn(o))&&this.queueRequest(Date.now(),e)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=oi(Ze.ACCESS_TOKEN),o=e?e.u:Ze.ACCESS_TOKEN;let a=o!==this.eventData.tokenU;ct(this.anonId)||(this.anonId=ve(),a=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const d=new Date(this.eventData.lastSuccess),m=new Date(u),y=(u-this.eventData.lastSuccess)/864e5;a=a||y>=1||y<-1||d.getDate()!==m.getDate()}else a=!0;a?this.postEvent(u,{"enabled.telemetry":!1},d=>{d||(this.eventData.lastSuccess=u,this.eventData.tokenU=o)},r):this.processRequests()}},vr=lr.postTurnstileEvent.bind(lr),Ti=new class extends Ci{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,e,o,a){this.skuToken=e,this.errorCb=a,Ze.EVENTS_URL&&(o||Ze.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(Vt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),ct(this.anonId)||(this.anonId=ve()),this.postEvent(o,{skuToken:this.skuToken},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},r))}},$i=Ti.postMapLoadEvent.bind(Ti),ti=new class extends Ci{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,e,o,a){if(!Ze.API_URL||!Ze.SESSION_PATH)return;const u=An(Ze.API_URL+Ze.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${a||Ze.ACCESS_TOKEN||""}`);const d={url:Sn(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=$e(d,m=>{this.pendingRequest=null,o(m),this.saveEventData(),this.processRequests(a)})}getSessionAPI(r,e,o,a){this.skuToken=e,this.errorCb=a,Ze.SESSION_PATH&&Ze.API_URL&&(o||Ze.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(Vt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||this.getSession(o,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},r)}},gi=ti.getSessionAPI.bind(ti),Cr=new Set,_r="mapbox-tiles";let Wi,tr,Hr=500,Dr=50;function Ki(){K.caches&&!Wi&&(Wi=K.caches.open(_r))}function mo(r){const e=r.indexOf("?");return e<0?r:r.slice(0,e)}let Wr=1/0;const se={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(se);class $ extends Error{constructor(e,o,a){o===401&&bn(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=o,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const V=bt()?()=>self.worker&&self.worker.referrer:()=>(K.location.protocol==="blob:"?K.parent:K).location.href,re=function(r,e){if(!(/^file:/.test(o=r.url)||/^file:/.test(V())&&!/^\w+:/.test(o))){if(K.fetch&&K.Request&&K.AbortController&&K.Request.prototype.hasOwnProperty("signal"))return function(a,u){const d=new K.AbortController,m=new K.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:V(),signal:d.signal});let y=!1,b=!1;const T=(I=m.url).indexOf("sku=")>0&&bn(I);var I;a.type==="json"&&m.headers.set("Accept","application/json");const M=(B,j,q)=>{if(b)return;if(B&&B.message!=="SecurityError"&&Gt(B),j&&q)return P(j);const Q=Date.now();K.fetch(m).then(le=>{if(le.ok){const xe=T?le.clone():null;return P(le,xe,Q)}return u(new $(le.statusText,le.status,a.url))}).catch(le=>{le.code!==20&&u(new Error(le.message))})},P=(B,j,q)=>{(a.type==="arrayBuffer"?B.arrayBuffer():a.type==="json"?B.json():B.text()).then(Q=>{b||(j&&q&&function(le,xe,Me){if(Ki(),!Wi)return;const Le={status:xe.status,statusText:xe.statusText,headers:new K.Headers};xe.headers.forEach((it,at)=>Le.headers.set(at,it));const ze=kt(xe.headers.get("Cache-Control")||"");if(ze["no-store"])return;ze["max-age"]&&Le.headers.set("Expires",new Date(Me+1e3*ze["max-age"]).toUTCString());const Re=Le.headers.get("Expires");Re&&(new Date(Re).getTime()-Me<42e4||function(it,at){if(tr===void 0)try{new Response(new ReadableStream),tr=!0}catch{tr=!1}tr?at(it.body):it.blob().then(at)}(xe,it=>{const at=new K.Response(it,Le);Ki(),Wi&&Wi.then(vt=>vt.put(mo(le.url),at)).catch(vt=>Gt(vt.message))}))}(m,j,q),y=!0,u(null,Q,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(Q=>{b||u(new Error(Q.message))})};return T?function(B,j){if(Ki(),!Wi)return j(null);const q=mo(B.url);Wi.then(Q=>{Q.match(q).then(le=>{const xe=function(Me){if(!Me)return!1;const Le=new Date(Me.headers.get("Expires")||0),ze=kt(Me.headers.get("Cache-Control")||"");return Le>Date.now()&&!ze["no-cache"]}(le);Q.delete(q),xe&&Q.put(q,le.clone()),j(null,le,xe)}).catch(j)}).catch(j)}(m,M):M(null,null),{cancel:()=>{b=!0,y||d.abort()}}}(r,e);if(bt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var o;return function(a,u){const d=new K.XMLHttpRequest;d.open(a.method||"GET",a.url,!0),a.type==="arrayBuffer"&&(d.responseType="arraybuffer");for(const m in a.headers)d.setRequestHeader(m,a.headers[m]);return a.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=a.credentials==="include",d.onerror=()=>{u(new Error(d.statusText))},d.onload=()=>{if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){let m=d.response;if(a.type==="json")try{m=JSON.parse(d.response)}catch(y){return u(y)}u(null,m,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else u(new $(d.statusText,d.status,a.url))},d.send(a.body),{cancel:()=>d.abort()}}(r,e)},de=function(r,e){return re(Xe(r,{type:"arrayBuffer"}),e)},Te=function(r,e){return re(Xe(r,{method:"POST"}),e)},$e=function(r,e){return re(Xe(r,{method:"GET"}),e)};function Ne(r){const e=K.document.createElement("a");return e.href=r,e.protocol===K.document.location.protocol&&e.host===K.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let je,_t;je=[],_t=0;const Pt=function(r,e){if(pt.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),_t>=Ze.MAX_PARALLEL_IMAGE_REQUESTS){const d={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return je.push(d),d}_t++;let o=!1;const a=()=>{if(!o)for(o=!0,_t--;je.length&&_t<Ze.MAX_PARALLEL_IMAGE_REQUESTS;){const d=je.shift(),{requestParameters:m,callback:y,cancelled:b}=d;b||(d.cancel=Pt(m,y).cancel)}},u=de(r,(d,m,y,b)=>{a(),d?e(d):m&&(K.createImageBitmap?function(T,I){const M=new K.Blob([new Uint8Array(T)],{type:"image/png"});K.createImageBitmap(M).then(P=>{I(null,P)}).catch(P=>{I(new Error(`Could not load image because of ${P.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(T,I)=>e(T,I,y,b)):function(T,I){const M=new K.Image,P=K.URL;M.onload=()=>{I(null,M),P.revokeObjectURL(M.src),M.onload=null,K.requestAnimationFrame(()=>{M.src=Ce})},M.onerror=()=>I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const B=new K.Blob([new Uint8Array(T)],{type:"image/png"});M.src=T.byteLength?P.createObjectURL(B):Ce}(m,(T,I)=>e(T,I,y,b)))});return{cancel:()=>{u.cancel(),a()}}};function gt(r,e,o){o[r]&&o[r].indexOf(e)!==-1||(o[r]=o[r]||[],o[r].push(e))}function un(r,e,o){if(o&&o[r]){const a=o[r].indexOf(e);a!==-1&&o[r].splice(a,1)}}class Xt{constructor(e,o={}){Xe(this,o),this.type=e}}class an extends Xt{constructor(e,o={}){super("error",Xe({error:e},o))}}class gn{on(e,o){return this._listeners=this._listeners||{},gt(e,o,this._listeners),this}off(e,o){return un(e,o,this._listeners),un(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},gt(e,o,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,o){typeof e=="string"&&(e=new Xt(e,o||{}));const a=e.type;if(this.listens(a)){e.target=this;const u=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const y of u)y.call(this,e);const d=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const y of d)un(a,y,this._oneTimeListeners),y.call(this,e);const m=this._eventedParent;m&&(Xe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof an&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var Ue=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function jn(r,...e){for(const o of e)for(const a in o)r[a]=o[a];return r}function Kt(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Yn(r){if(Array.isArray(r))return r.map(Yn);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const o in r)e[o]=Yn(r[o]);return e}return Kt(r)}class zn extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class ko{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[a,u]of o)this.bindings[a]=u}concat(e){return new ko(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const nr={kind:"null"},zt={kind:"number"},Un={kind:"string"},Ln={kind:"boolean"},Or={kind:"color"},xr={kind:"object"},G={kind:"value"},Oe={kind:"collator"},It={kind:"formatted"},mt={kind:"resolvedImage"};function vn(r,e){return{kind:"array",itemType:r,N:e}}function on(r){if(r.kind==="array"){const e=on(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}const si=[nr,zt,Un,Ln,Or,It,xr,vn(G),mt];function Vn(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Vn(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const o of si)if(!Vn(o,e))return null}}return`Expected ${on(r)} but found ${on(e)} instead.`}function Zt(r,e){return e.some(o=>o.kind===r.kind)}function cr(r,e){return e.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}function Oi(r){var e={exports:{}};return r(e,e.exports),e.exports}var Lo=Oi(function(r,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(y){return(y=Math.round(y))<0?0:y>255?255:y}function u(y){return a(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function d(y){return(b=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:b>1?1:b;var b}function m(y,b,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?y+(b-y)*T*6:2*T<1?b:3*T<2?y+(b-y)*(2/3-T)*6:y}try{e.parseCSSColor=function(y){var b,T=y.replace(/ /g,"").toLowerCase();if(T in o)return o[T].slice();if(T[0]==="#")return T.length===4?(b=parseInt(T.substr(1),16))>=0&&b<=4095?[(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:T.length===7&&(b=parseInt(T.substr(1),16))>=0&&b<=16777215?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var I=T.indexOf("("),M=T.indexOf(")");if(I!==-1&&M+1===T.length){var P=T.substr(0,I),B=T.substr(I+1,M-(I+1)).split(","),j=1;switch(P){case"rgba":if(B.length!==4)return null;j=d(B.pop());case"rgb":return B.length!==3?null:[u(B[0]),u(B[1]),u(B[2]),j];case"hsla":if(B.length!==4)return null;j=d(B.pop());case"hsl":if(B.length!==3)return null;var q=(parseFloat(B[0])%360+360)%360/360,Q=d(B[1]),le=d(B[2]),xe=le<=.5?le*(Q+1):le+Q-le*Q,Me=2*le-xe;return[a(255*m(Me,xe,q+1/3)),a(255*m(Me,xe,q)),a(255*m(Me,xe,q-1/3)),j];default:return null}}return null}}catch{}});class Rn{constructor(e,o,a,u=1){this.r=e,this.g=o,this.b=a,this.a=u}static parse(e){if(!e)return;if(e instanceof Rn)return e;if(typeof e!="string")return;const o=Lo.parseCSSColor(e);return o?new Rn(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,a,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(a)},${u})`}toArray(){const{r:e,g:o,b:a,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*o/u,255*a/u,u]}}Rn.black=new Rn(0,0,0,1),Rn.white=new Rn(1,1,1,1),Rn.transparent=new Rn(0,0,0,0),Rn.red=new Rn(1,0,0,1),Rn.blue=new Rn(0,0,1,1);class Qo{constructor(e,o,a){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Zc{constructor(e,o,a,u,d){this.text=e.normalize?e.normalize():e,this.image=o,this.scale=a,this.fontStack=u,this.textColor=d}}class qi{constructor(e){this.sections=e}static fromString(e){return new qi([new Zc(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof qi?e:qi.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const a={};o.fontStack&&(a["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(a["font-scale"]=o.scale),o.textColor&&(a["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(a)}return e}}class Ir{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ir({name:e,available:!1}):null}serialize(){return["image",this.name]}}function qr(r,e,o,a){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[r,e,o,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[r,e,o,a]:[r,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function aa(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Rn||r instanceof Qo||r instanceof qi||r instanceof Ir)return!0;if(Array.isArray(r)){for(const e of r)if(!aa(e))return!1;return!0}if(typeof r=="object"){for(const e in r)if(!aa(r[e]))return!1;return!0}return!1}function Ui(r){if(r===null)return nr;if(typeof r=="string")return Un;if(typeof r=="boolean")return Ln;if(typeof r=="number")return zt;if(r instanceof Rn)return Or;if(r instanceof Qo)return Oe;if(r instanceof qi)return It;if(r instanceof Ir)return mt;if(Array.isArray(r)){const e=r.length;let o;for(const a of r){const u=Ui(a);if(o){if(o===u)continue;o=G;break}o=u}return vn(o||G,e)}return xr}function Zr(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Rn||r instanceof qi||r instanceof Ir?r.toString():JSON.stringify(r)}class _o{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!aa(e[1]))return o.error("invalid value");const a=e[1];let u=Ui(a);const d=o.expectedType;return u.kind!=="array"||u.N!==0||!d||d.kind!=="array"||typeof d.N=="number"&&d.N!==0||(u=d),new _o(u,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Rn?["rgba"].concat(this.value.toArray()):this.value instanceof qi?this.value.serialize():this.value}}class ur{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Ml={string:Un,number:zt,boolean:Ln,object:xr};class br{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let a,u=1;const d=e[0];if(d==="array"){let y,b;if(e.length>2){const T=e[1];if(typeof T!="string"||!(T in Ml)||T==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);y=Ml[T],u++}else y=G;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);b=e[2],u++}a=vn(y,b)}else a=Ml[d];const m=[];for(;u<e.length;u++){const y=o.parse(e[u],u,G);if(!y)return null;m.push(y)}return new br(a,m)}evaluate(e){for(let o=0;o<this.args.length;o++){const a=this.args[o].evaluate(e);if(!Vn(this.type,Ui(a)))return a;if(o===this.args.length-1)throw new ur(`Expected value to be of type ${on(this.type)}, but found ${on(Ui(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){o.push(a.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&o.push(u)}}return o.concat(this.args.map(a=>a.serialize()))}}class la{constructor(e){this.type=It,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return o.error("First argument must be an image or text section.");const u=[];let d=!1;for(let m=1;m<=e.length-1;++m){const y=e[m];if(d&&typeof y=="object"&&!Array.isArray(y)){d=!1;let b=null;if(y["font-scale"]&&(b=o.parse(y["font-scale"],1,zt),!b))return null;let T=null;if(y["text-font"]&&(T=o.parse(y["text-font"],1,vn(Un)),!T))return null;let I=null;if(y["text-color"]&&(I=o.parse(y["text-color"],1,Or),!I))return null;const M=u[u.length-1];M.scale=b,M.font=T,M.textColor=I}else{const b=o.parse(e[m],1,G);if(!b)return null;const T=b.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");d=!0,u.push({content:b,scale:null,font:null,textColor:null})}}return new la(u)}evaluate(e){return new qi(this.sections.map(o=>{const a=o.content.evaluate(e);return Ui(a)===mt?new Zc("",a,null,null,null):new Zc(Zr(a),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const a={};o.scale&&(a["font-scale"]=o.scale.serialize()),o.font&&(a["text-font"]=o.font.serialize()),o.textColor&&(a["text-color"]=o.textColor.serialize()),e.push(a)}return e}}class Ns{constructor(e){this.type=mt,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");const a=o.parse(e[1],1,Un);return a?new Ns(a):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),a=Ir.fromString(o);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(o)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const _h={"to-boolean":Ln,"to-color":Or,"to-number":zt,"to-string":Un};class oo{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return o.error("Expected one argument.");const u=_h[a],d=[];for(let m=1;m<e.length;m++){const y=o.parse(e[m],m,G);if(!y)return null;d.push(y)}return new oo(u,d)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let o,a;for(const u of this.args){if(o=u.evaluate(e),a=null,o instanceof Rn)return o;if(typeof o=="string"){const d=e.parseColor(o);if(d)return d}else if(Array.isArray(o)&&(a=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:qr(o[0],o[1],o[2],o[3]),!a))return new Rn(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ur(a||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const a of this.args){if(o=a.evaluate(e),o===null)return 0;const u=Number(o);if(!isNaN(u))return u}throw new ur(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?qi.fromString(Zr(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ir.fromString(Zr(this.args[0].evaluate(e))):Zr(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new la([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ns(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}const gh=["Unknown","Point","LineString","Polygon"];class Xc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:a,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*o-e[0])+this.featureDistanceData.bearing[1]*(u*o-e[1])}return 0}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=Rn.parse(e)),o}}class Mr{constructor(e,o,a,u){this.name=e,this.type=o,this._evaluate=a,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const a=e[0],u=Mr.definitions[a];if(!u)return o.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const d=Array.isArray(u)?u[0]:u.type,m=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,y=m.filter(([T])=>!Array.isArray(T)||T.length===e.length-1);let b=null;for(const[T,I]of y){b=new ws(o.registry,o.path,null,o.scope);const M=[];let P=!1;for(let B=1;B<e.length;B++){const j=e[B],q=Array.isArray(T)?T[B-1]:T.type,Q=b.parse(j,1+M.length,q);if(!Q){P=!0;break}M.push(Q)}if(!P)if(Array.isArray(T)&&T.length!==M.length)b.error(`Expected ${T.length} arguments, but found ${M.length} instead.`);else{for(let B=0;B<M.length;B++){const j=Array.isArray(T)?T[B]:T.type,q=M[B];b.concat(B+1).checkSubtype(j,q.type)}if(b.errors.length===0)return new Mr(a,d,I,M)}}if(y.length===1)o.errors.push(...b.errors);else{const T=(y.length?y:m).map(([M])=>{return P=M,Array.isArray(P)?`(${P.map(on).join(", ")})`:`(${on(P.type)}...)`;var P}).join(" | "),I=[];for(let M=1;M<e.length;M++){const P=o.parse(e[M],1+I.length);if(!P)return null;I.push(on(P.type))}o.error(`Expected arguments of type ${T}, but found (${I.join(", ")}) instead.`)}return null}static register(e,o){Mr.definitions=o;for(const a in o)e[a]=Mr}}class qa{constructor(e,o,a){this.type=Oe,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return o.error("Collator options argument must be an object.");const u=o.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,Ln);if(!u)return null;const d=o.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,Ln);if(!d)return null;let m=null;return a.locale&&(m=o.parse(a.locale,1,Un),!m)?null:new qa(u,d,m)}evaluate(e){return new Qo(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const xs=8192;function Yc(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function Za(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Kc(r,e){const o=(180+r[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(o*u*xs),Math.round(a*u*xs)]}function Bs(r,e,o){const a=r[0]-e[0],u=r[1]-e[1],d=r[0]-o[0],m=r[1]-o[1];return a*m-d*u==0&&a*d<=0&&u*m<=0}function Jc(r,e){let o=!1;for(let m=0,y=e.length;m<y;m++){const b=e[m];for(let T=0,I=b.length;T<I-1;T++){if(Bs(r,b[T],b[T+1]))return!1;(u=b[T])[1]>(a=r)[1]!=(d=b[T+1])[1]>a[1]&&a[0]<(d[0]-u[0])*(a[1]-u[1])/(d[1]-u[1])+u[0]&&(o=!o)}}var a,u,d;return o}function Yf(r,e){for(let o=0;o<e.length;o++)if(Jc(r,e[o]))return!0;return!1}function kl(r,e,o,a){const u=a[0]-o[0],d=a[1]-o[1],m=(r[0]-o[0])*d-u*(r[1]-o[1]),y=(e[0]-o[0])*d-u*(e[1]-o[1]);return m>0&&y<0||m<0&&y>0}function yh(r,e,o){for(const T of o)for(let I=0;I<T.length-1;++I)if((y=[(m=T[I+1])[0]-(d=T[I])[0],m[1]-d[1]])[0]*(b=[(u=e)[0]-(a=r)[0],u[1]-a[1]])[1]-y[1]*b[0]!=0&&kl(a,u,d,m)&&kl(d,m,a,u))return!0;var a,u,d,m,y,b;return!1}function Ll(r,e){for(let o=0;o<r.length;++o)if(!Jc(r[o],e))return!1;for(let o=0;o<r.length-1;++o)if(yh(r[o],r[o+1],e))return!1;return!0}function Qc(r,e){for(let o=0;o<e.length;o++)if(Ll(r,e[o]))return!0;return!1}function Xa(r,e,o){const a=[];for(let u=0;u<r.length;u++){const d=[];for(let m=0;m<r[u].length;m++){const y=Kc(r[u][m],o);Yc(e,y),d.push(y)}a.push(d)}return a}function ca(r,e,o){const a=[];for(let u=0;u<r.length;u++){const d=Xa(r[u],e,o);a.push(d)}return a}function Pl(r,e,o,a){if(r[0]<o[0]||r[0]>o[2]){const u=.5*a;let d=r[0]-o[0]>u?-a:o[0]-r[0]>u?a:0;d===0&&(d=r[0]-o[2]>u?-a:o[2]-r[0]>u?a:0),r[0]+=d}Yc(e,r)}function vh(r,e,o,a){const u=Math.pow(2,a.z)*xs,d=[a.x*xs,a.y*xs],m=[];if(!r)return m;for(const y of r)for(const b of y){const T=[b.x+d[0],b.y+d[1]];Pl(T,e,o,u),m.push(T)}return m}function eu(r,e,o,a){const u=Math.pow(2,a.z)*xs,d=[a.x*xs,a.y*xs],m=[];if(!r)return m;for(const b of r){const T=[];for(const I of b){const M=[I.x+d[0],I.y+d[1]];Yc(e,M),T.push(M)}m.push(T)}if(e[2]-e[0]<=u/2){(y=e)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const b of m)for(const T of b)Pl(T,e,o,u)}var y;return m}class bs{constructor(e,o){this.type=Ln,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(aa(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let u=0;u<a.features.length;++u){const d=a.features[u].geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new bs(a,a.features[u].geometry)}else if(a.type==="Feature"){const u=a.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new bs(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new bs(a,a)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,a){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=o.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=Xa(a.coordinates,d,m),b=vh(o.geometry(),u,d,m);if(!Za(u,d))return!1;for(const T of b)if(!Jc(T,y))return!1}if(a.type==="MultiPolygon"){const y=ca(a.coordinates,d,m),b=vh(o.geometry(),u,d,m);if(!Za(u,d))return!1;for(const T of b)if(!Yf(T,y))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,a){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=o.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=Xa(a.coordinates,d,m),b=eu(o.geometry(),u,d,m);if(!Za(u,d))return!1;for(const T of b)if(!Ll(T,y))return!1}if(a.type==="MultiPolygon"){const y=ca(a.coordinates,d,m),b=eu(o.geometry(),u,d,m);if(!Za(u,d))return!1;for(const T of b)if(!Qc(T,y))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function ir(r){if(r instanceof Mr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof bs)return!1;let e=!0;return r.eachChild(o=>{e&&!ir(o)&&(e=!1)}),e}function es(r){if(r instanceof Mr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(o=>{e&&!es(o)&&(e=!1)}),e}function Fs(r,e){if(r instanceof Mr&&e.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(a=>{o&&!Fs(a,e)&&(o=!1)}),o}class $s{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const a=e[1];return o.scope.has(a)?new $s(a,o.scope.get(a)):o.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ws{constructor(e,o=[],a,u=new ko,d=[]){this.registry=e,this.path=o,this.key=o.map(m=>`[${m}]`).join(""),this.scope=u,this.errors=d,this.expectedType=a}parse(e,o,a,u,d={}){return o?this.concat(o,a,u)._parse(e,d):this._parse(e,d)}_parse(e,o){function a(u,d,m){return m==="assert"?new br(d,[u]):m==="coerce"?new oo(d,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const d=this.registry[u];if(d){let m=d.parse(e,this);if(!m)return null;if(this.expectedType){const y=this.expectedType,b=m.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||b.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(y,b))return null}else m=a(m,y,o.typeAnnotation||"coerce");else m=a(m,y,o.typeAnnotation||"assert")}if(!(m instanceof _o)&&m.type.kind!=="resolvedImage"&&Dl(m)){const y=new Xc;try{m=new _o(m.type,m.evaluate(y))}catch(b){return this.error(b.message),null}}return m}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,a){const u=typeof e=="number"?this.path.concat(e):this.path,d=a?this.scope.concat(a):this.scope;return new ws(this.registry,u,o||null,d,this.errors)}error(e,...o){const a=`${this.key}${o.map(u=>`[${u}]`).join("")}`;this.errors.push(new zn(a,e))}checkSubtype(e,o){const a=Vn(e,o);return a&&this.error(a),a}}function Dl(r){if(r instanceof $s)return Dl(r.boundExpression);if(r instanceof Mr&&r.name==="error"||r instanceof qa||r instanceof bs)return!1;const e=r instanceof oo||r instanceof br;let o=!0;return r.eachChild(a=>{o=e?o&&Dl(a):o&&a instanceof _o}),!!o&&ir(r)&&Fs(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ya(r,e){const o=r.length-1;let a,u,d=0,m=o,y=0;for(;d<=m;)if(y=Math.floor((d+m)/2),a=r[y],u=r[y+1],a<=e){if(y===o||e<u)return y;d=y+1}else{if(!(a>e))throw new ur("Input is not a number.");m=y-1}return 0}class Ka{constructor(e,o,a){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[u,d]of a)this.labels.push(u),this.outputs.push(d)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const a=o.parse(e[1],1,zt);if(!a)return null;const u=[];let d=null;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);for(let m=1;m<e.length;m+=2){const y=m===1?-1/0:e[m],b=e[m+1],T=m,I=m+1;if(typeof y!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=y)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const M=o.parse(b,I,d);if(!M)return null;d=d||M.type,u.push([y,M])}return new Ka(d,a,u)}evaluate(e){const o=this.labels,a=this.outputs;if(o.length===1)return a[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return a[0].evaluate(e);const d=o.length;return u>=o[d-1]?a[d-1].evaluate(e):a[Ya(o,u)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}function mn(r,e,o){return r*(1-o)+e*o}var Ol=Object.freeze({__proto__:null,number:mn,color:function(r,e,o){return new Rn(mn(r.r,e.r,o),mn(r.g,e.g,o),mn(r.b,e.b,o),mn(r.a,e.a,o))},array:function(r,e,o){return r.map((a,u)=>mn(a,e[u],o))}});const xh=.95047,zr=1.08883,zl=4/29,Rl=6/29,Ja=3*Rl*Rl,bh=Math.PI/180,wh=180/Math.PI;function Qa(r){return r>.008856451679035631?Math.pow(r,1/3):r/Ja+zl}function ts(r){return r>Rl?r*r*r:Ja*(r-zl)}function Us(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function tu(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Nl(r){const e=tu(r.r),o=tu(r.g),a=tu(r.b),u=Qa((.4124564*e+.3575761*o+.1804375*a)/xh),d=Qa((.2126729*e+.7151522*o+.072175*a)/1);return{l:116*d-16,a:500*(u-d),b:200*(d-Qa((.0193339*e+.119192*o+.9503041*a)/zr)),alpha:r.a}}function Bl(r){let e=(r.l+16)/116,o=isNaN(r.a)?e:e+r.a/500,a=isNaN(r.b)?e:e-r.b/200;return e=1*ts(e),o=xh*ts(o),a=zr*ts(a),new Rn(Us(3.2404542*o-1.5371385*e-.4985314*a),Us(-.969266*o+1.8760108*e+.041556*a),Us(.0556434*o-.2040259*e+1.0572252*a),r.alpha)}function Eh(r,e,o){const a=e-r;return r+o*(a>180||a<-180?a-360*Math.round(a/360):a)}const ua={forward:Nl,reverse:Bl,interpolate:function(r,e,o){return{l:mn(r.l,e.l,o),a:mn(r.a,e.a,o),b:mn(r.b,e.b,o),alpha:mn(r.alpha,e.alpha,o)}}},ha={forward:function(r){const{l:e,a:o,b:a}=Nl(r),u=Math.atan2(a,o)*wh;return{h:u<0?u+360:u,c:Math.sqrt(o*o+a*a),l:e,alpha:r.a}},reverse:function(r){const e=r.h*bh,o=r.c;return Bl({l:r.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:r.alpha})},interpolate:function(r,e,o){return{h:Eh(r.h,e.h,o),c:mn(r.c,e.c,o),l:mn(r.l,e.l,o),alpha:mn(r.alpha,e.alpha,o)}}};var Fl=Object.freeze({__proto__:null,lab:ua,hcl:ha});class Rr{constructor(e,o,a,u,d){this.type=e,this.operator=o,this.interpolation=a,this.input=u,this.labels=[],this.outputs=[];for(const[m,y]of d)this.labels.push(m),this.outputs.push(y)}static interpolationFactor(e,o,a,u){let d=0;if(e.name==="exponential")d=$l(o,e.base,a,u);else if(e.name==="linear")d=$l(o,1,a,u);else if(e.name==="cubic-bezier"){const m=e.controlPoints;d=new O(m[0],m[1],m[2],m[3]).solve($l(o,1,a,u))}return d}static parse(e,o){let[a,u,d,...m]=e;if(!Array.isArray(u)||u.length===0)return o.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const T=u[1];if(typeof T!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:T}}else{if(u[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const T=u.slice(1);if(T.length!==4||T.some(I=>typeof I!="number"||I<0||I>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:T}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(d=o.parse(d,2,zt),!d)return null;const y=[];let b=null;a==="interpolate-hcl"||a==="interpolate-lab"?b=Or:o.expectedType&&o.expectedType.kind!=="value"&&(b=o.expectedType);for(let T=0;T<m.length;T+=2){const I=m[T],M=m[T+1],P=T+3,B=T+4;if(typeof I!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(y.length&&y[y.length-1][0]>=I)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const j=o.parse(M,B,b);if(!j)return null;b=b||j.type,y.push([I,j])}return b.kind==="number"||b.kind==="color"||b.kind==="array"&&b.itemType.kind==="number"&&typeof b.N=="number"?new Rr(b,a,u,d,y):o.error(`Type ${on(b)} is not interpolatable.`)}evaluate(e){const o=this.labels,a=this.outputs;if(o.length===1)return a[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return a[0].evaluate(e);const d=o.length;if(u>=o[d-1])return a[d-1].evaluate(e);const m=Ya(o,u),y=Rr.interpolationFactor(this.interpolation,u,o[m],o[m+1]),b=a[m].evaluate(e),T=a[m+1].evaluate(e);return this.operator==="interpolate"?Ol[this.type.kind.toLowerCase()](b,T,y):this.operator==="interpolate-hcl"?ha.reverse(ha.interpolate(ha.forward(b),ha.forward(T),y)):ua.reverse(ua.interpolate(ua.forward(b),ua.forward(T),y))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)o.push(this.labels[a],this.outputs[a].serialize());return o}}function $l(r,e,o,a){const u=a-o,d=r-o;return u===0?0:e===1?d/u:(Math.pow(e,d)-1)/(Math.pow(e,u)-1)}class fa{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let a=null;const u=o.expectedType;u&&u.kind!=="value"&&(a=u);const d=[];for(const y of e.slice(1)){const b=o.parse(y,1+d.length,a,void 0,{typeAnnotation:"omit"});if(!b)return null;a=a||b.type,d.push(b)}const m=u&&d.some(y=>Vn(u,y.type));return new fa(m?G:a,d)}evaluate(e){let o,a=null,u=0;for(const d of this.args){if(u++,a=d.evaluate(e),a&&a instanceof Ir&&!a.available&&(o||(o=a),a=null,u===this.args.length))return o;if(a!==null)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class da{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let d=1;d<e.length-1;d+=2){const m=e[d];if(typeof m!="string")return o.error(`Expected string, but found ${typeof m} instead.`,d);if(/[^a-zA-Z0-9_]/.test(m))return o.error("Variable names must contain only alphanumeric characters or '_'.",d);const y=o.parse(e[d+1],d+1);if(!y)return null;a.push([m,y])}const u=o.parse(e[e.length-1],e.length-1,o.expectedType,a);return u?new da(a,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,a]of this.bindings)e.push(o,a.serialize());return e.push(this.result.serialize()),e}}class Ul{constructor(e,o,a){this.type=e,this.index=o,this.input=a}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=o.parse(e[1],1,zt),u=o.parse(e[2],2,vn(o.expectedType||G));return a&&u?new Ul(u.type.itemType,a,u):null}evaluate(e){const o=this.index.evaluate(e),a=this.input.evaluate(e);if(o<0)throw new ur(`Array index out of bounds: ${o} < 0.`);if(o>=a.length)throw new ur(`Array index out of bounds: ${o} > ${a.length-1}.`);if(o!==Math.floor(o))throw new ur(`Array index must be an integer, but found ${o} instead.`);return a[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class el{constructor(e,o){this.type=Ln,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=o.parse(e[1],1,G),u=o.parse(e[2],2,G);return a&&u?Zt(a.type,[Ln,Un,zt,nr,G])?new el(a,u):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(a.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!cr(o,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${on(Ui(o))} instead.`);if(!cr(a,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${on(Ui(a))} instead.`);return a.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class tl{constructor(e,o,a){this.type=zt,this.needle=e,this.haystack=o,this.fromIndex=a}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=o.parse(e[1],1,G),u=o.parse(e[2],2,G);if(!a||!u)return null;if(!Zt(a.type,[Ln,Un,zt,nr,G]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(a.type)} instead`);if(e.length===4){const d=o.parse(e[3],3,zt);return d?new tl(a,u,d):null}return new tl(a,u)}evaluate(e){const o=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!cr(o,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${on(Ui(o))} instead.`);if(!cr(a,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${on(Ui(a))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return a.indexOf(o,u)}return a.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class nl{constructor(e,o,a,u,d,m){this.inputType=e,this.type=o,this.input=a,this.cases=u,this.outputs=d,this.otherwise=m}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let a,u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const d={},m=[];for(let T=2;T<e.length-1;T+=2){let I=e[T];const M=e[T+1];Array.isArray(I)||(I=[I]);const P=o.concat(T);if(I.length===0)return P.error("Expected at least one branch label.");for(const j of I){if(typeof j!="number"&&typeof j!="string")return P.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return P.error("Numeric branch labels must be integer values.");if(a){if(P.checkSubtype(a,Ui(j)))return null}else a=Ui(j);if(d[String(j)]!==void 0)return P.error("Branch labels must be unique.");d[String(j)]=m.length}const B=o.parse(M,T,u);if(!B)return null;u=u||B.type,m.push(B)}const y=o.parse(e[1],1,G);if(!y)return null;const b=o.parse(e[e.length-1],e.length-1,u);return b?y.type.kind!=="value"&&o.concat(1).checkSubtype(a,y.type)?null:new nl(a,u,y,d,m,b):null}evaluate(e){const o=this.input.evaluate(e);return(Ui(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),a=[],u={};for(const m of o){const y=u[this.cases[m]];y===void 0?(u[this.cases[m]]=a.length,a.push([this.cases[m],[m]])):a[y][1].push(m)}const d=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,y]of a)e.push(y.length===1?d(y[0]):y.map(d)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}class il{constructor(e,o,a){this.type=e,this.branches=o,this.otherwise=a}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let a;o.expectedType&&o.expectedType.kind!=="value"&&(a=o.expectedType);const u=[];for(let m=1;m<e.length-1;m+=2){const y=o.parse(e[m],m,Ln);if(!y)return null;const b=o.parse(e[m+1],m+1,a);if(!b)return null;u.push([y,b]),a=a||b.type}const d=o.parse(e[e.length-1],e.length-1,a);return d?new il(a,u,d):null}evaluate(e){for(const[o,a]of this.branches)if(o.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,a]of this.branches)e(o),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class rl{constructor(e,o,a,u){this.type=e,this.input=o,this.beginIndex=a,this.endIndex=u}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=o.parse(e[1],1,G),u=o.parse(e[2],2,zt);if(!a||!u)return null;if(!Zt(a.type,[vn(G),Un,G]))return o.error(`Expected first argument to be of type array or string, but found ${on(a.type)} instead`);if(e.length===4){const d=o.parse(e[3],3,zt);return d?new rl(a.type,a,u,d):null}return new rl(a.type,a,u)}evaluate(e){const o=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!cr(o,["string","array"]))throw new ur(`Expected first argument to be of type array or string, but found ${on(Ui(o))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return o.slice(a,u)}return o.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function jl(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Es(r,e,o,a){return a.compare(e,o)===0}function js(r,e,o){const a=r!=="=="&&r!=="!=";return class bA{constructor(d,m,y){this.type=Ln,this.lhs=d,this.rhs=m,this.collator=y,this.hasUntypedArgument=d.type.kind==="value"||m.type.kind==="value"}static parse(d,m){if(d.length!==3&&d.length!==4)return m.error("Expected two or three arguments.");const y=d[0];let b=m.parse(d[1],1,G);if(!b)return null;if(!jl(y,b.type))return m.concat(1).error(`"${y}" comparisons are not supported for type '${on(b.type)}'.`);let T=m.parse(d[2],2,G);if(!T)return null;if(!jl(y,T.type))return m.concat(2).error(`"${y}" comparisons are not supported for type '${on(T.type)}'.`);if(b.type.kind!==T.type.kind&&b.type.kind!=="value"&&T.type.kind!=="value")return m.error(`Cannot compare types '${on(b.type)}' and '${on(T.type)}'.`);a&&(b.type.kind==="value"&&T.type.kind!=="value"?b=new br(T.type,[b]):b.type.kind!=="value"&&T.type.kind==="value"&&(T=new br(b.type,[T])));let I=null;if(d.length===4){if(b.type.kind!=="string"&&T.type.kind!=="string"&&b.type.kind!=="value"&&T.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(I=m.parse(d[3],3,Oe),!I)return null}return new bA(b,T,I)}evaluate(d){const m=this.lhs.evaluate(d),y=this.rhs.evaluate(d);if(a&&this.hasUntypedArgument){const b=Ui(m),T=Ui(y);if(b.kind!==T.kind||b.kind!=="string"&&b.kind!=="number")throw new ur(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${b.kind}, ${T.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const b=Ui(m),T=Ui(y);if(b.kind!=="string"||T.kind!=="string")return e(d,m,y)}return this.collator?o(d,m,y,this.collator.evaluate(d)):e(d,m,y)}eachChild(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)}outputDefined(){return!0}serialize(){const d=[r];return this.eachChild(m=>{d.push(m.serialize())}),d}}}const Th=js("==",function(r,e,o){return e===o},Es),Kf=js("!=",function(r,e,o){return e!==o},function(r,e,o,a){return!Es(0,e,o,a)}),nu=js("<",function(r,e,o){return e<o},function(r,e,o,a){return a.compare(e,o)<0}),Ah=js(">",function(r,e,o){return e>o},function(r,e,o,a){return a.compare(e,o)>0}),Sh=js("<=",function(r,e,o){return e<=o},function(r,e,o,a){return a.compare(e,o)<=0}),Ts=js(">=",function(r,e,o){return e>=o},function(r,e,o,a){return a.compare(e,o)>=0});class iu{constructor(e,o,a,u,d){this.type=Un,this.number=e,this.locale=o,this.currency=a,this.minFractionDigits=u,this.maxFractionDigits=d}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");const a=o.parse(e[1],1,zt);if(!a)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return o.error("NumberFormat options argument must be an object.");let d=null;if(u.locale&&(d=o.parse(u.locale,1,Un),!d))return null;let m=null;if(u.currency&&(m=o.parse(u.currency,1,Un),!m))return null;let y=null;if(u["min-fraction-digits"]&&(y=o.parse(u["min-fraction-digits"],1,zt),!y))return null;let b=null;return u["max-fraction-digits"]&&(b=o.parse(u["max-fraction-digits"],1,zt),!b)?null:new iu(a,d,m,y,b)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Vl{constructor(e){this.type=zt,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=o.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${on(a.type)} instead.`):new Vl(a):null}evaluate(e){const o=this.input.evaluate(e);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ur(`Expected value to be of type string or array, but found ${on(Ui(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Vs={"==":Th,"!=":Kf,">":Ah,"<":nu,">=":Ts,"<=":Sh,array:br,at:Ul,boolean:br,case:il,coalesce:fa,collator:qa,format:la,image:Ns,in:el,"index-of":tl,interpolate:Rr,"interpolate-hcl":Rr,"interpolate-lab":Rr,length:Vl,let:da,literal:_o,match:nl,number:br,"number-format":iu,object:br,slice:rl,step:Ka,string:br,"to-boolean":oo,"to-color":oo,"to-number":oo,"to-string":oo,var:$s,within:bs};function ru(r,[e,o,a,u]){e=e.evaluate(r),o=o.evaluate(r),a=a.evaluate(r);const d=u?u.evaluate(r):1,m=qr(e,o,a,d);if(m)throw new ur(m);return new Rn(e/255*d,o/255*d,a/255*d,d)}function ou(r,e){return r in e}function Gl(r,e){const o=e[r];return o===void 0?null:o}function As(r){return{type:r}}function su(r){return{result:"success",value:r}}function Gs(r){return{result:"error",value:r}}function pa(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ch(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function ma(r){return!!r.expression&&r.expression.interpolated}function Jn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function go(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Hl(r){return r}function Wl(r,e){const o=e.type==="color",a=r.stops&&typeof r.stops[0][0]=="object",u=a||!(a||r.property!==void 0),d=r.type||(ma(e)?"exponential":"interval");if(o&&((r=jn({},r)).stops&&(r.stops=r.stops.map(T=>[T[0],Rn.parse(T[1])])),r.default=Rn.parse(r.default?r.default:e.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!Fl[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let m,y,b;if(d==="exponential")m=Zl;else if(d==="interval")m=ql;else if(d==="categorical"){m=Ih,y=Object.create(null);for(const T of r.stops)y[T[0]]=T[1];b=typeof r.stops[0][0]}else{if(d!=="identity")throw new Error(`Unknown function type "${d}"`);m=Ss}if(a){const T={},I=[];for(let B=0;B<r.stops.length;B++){const j=r.stops[B],q=j[0].zoom;T[q]===void 0&&(T[q]={zoom:q,type:r.type,property:r.property,default:r.default,stops:[]},I.push(q)),T[q].stops.push([j[0].value,j[1]])}const M=[];for(const B of I)M.push([T[B].zoom,Wl(T[B],e)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:Rr.interpolationFactor.bind(void 0,P),zoomStops:M.map(B=>B[0]),evaluate:({zoom:B},j)=>Zl({stops:M,base:r.base},e,B).evaluate(B,j)}}if(u){const T=d==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Rr.interpolationFactor.bind(void 0,T),zoomStops:r.stops.map(I=>I[0]),evaluate:({zoom:I})=>m(r,e,I,y,b)}}return{kind:"source",evaluate(T,I){const M=I&&I.properties?I.properties[r.property]:void 0;return M===void 0?_a(r.default,e.default):m(r,e,M,y,b)}}}function _a(r,e,o){return r!==void 0?r:e!==void 0?e:o!==void 0?o:void 0}function Ih(r,e,o,a,u){return _a(typeof o===u?a[o]:void 0,r.default,e.default)}function ql(r,e,o){if(Jn(o)!=="number")return _a(r.default,e.default);const a=r.stops.length;if(a===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[a-1][0])return r.stops[a-1][1];const u=Ya(r.stops.map(d=>d[0]),o);return r.stops[u][1]}function Zl(r,e,o){const a=r.base!==void 0?r.base:1;if(Jn(o)!=="number")return _a(r.default,e.default);const u=r.stops.length;if(u===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[u-1][0])return r.stops[u-1][1];const d=Ya(r.stops.map(I=>I[0]),o),m=function(I,M,P,B){const j=B-P,q=I-P;return j===0?0:M===1?q/j:(Math.pow(M,q)-1)/(Math.pow(M,j)-1)}(o,a,r.stops[d][0],r.stops[d+1][0]),y=r.stops[d][1],b=r.stops[d+1][1];let T=Ol[e.type]||Hl;if(r.colorSpace&&r.colorSpace!=="rgb"){const I=Fl[r.colorSpace];T=(M,P)=>I.reverse(I.interpolate(I.forward(M),I.forward(P),m))}return typeof y.evaluate=="function"?{evaluate(...I){const M=y.evaluate.apply(void 0,I),P=b.evaluate.apply(void 0,I);if(M!==void 0&&P!==void 0)return T(M,P,m)}}:T(y,b,m)}function Ss(r,e,o){return e.type==="color"?o=Rn.parse(o):e.type==="formatted"?o=qi.fromString(o.toString()):e.type==="resolvedImage"?o=Ir.fromString(o.toString()):Jn(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0),_a(o,r.default,e.default)}Mr.register(Vs,{error:[{kind:"error"},[Un],(r,[e])=>{throw new ur(e.evaluate(r))}],typeof:[Un,[G],(r,[e])=>on(Ui(e.evaluate(r)))],"to-rgba":[vn(zt,4),[Or],(r,[e])=>e.evaluate(r).toArray()],rgb:[Or,[zt,zt,zt],ru],rgba:[Or,[zt,zt,zt,zt],ru],has:{type:Ln,overloads:[[[Un],(r,[e])=>ou(e.evaluate(r),r.properties())],[[Un,xr],(r,[e,o])=>ou(e.evaluate(r),o.evaluate(r))]]},get:{type:G,overloads:[[[Un],(r,[e])=>Gl(e.evaluate(r),r.properties())],[[Un,xr],(r,[e,o])=>Gl(e.evaluate(r),o.evaluate(r))]]},"feature-state":[G,[Un],(r,[e])=>Gl(e.evaluate(r),r.featureState||{})],properties:[xr,[],r=>r.properties()],"geometry-type":[Un,[],r=>r.geometryType()],id:[G,[],r=>r.id()],zoom:[zt,[],r=>r.globals.zoom],pitch:[zt,[],r=>r.globals.pitch||0],"distance-from-center":[zt,[],r=>r.distanceFromCenter()],"heatmap-density":[zt,[],r=>r.globals.heatmapDensity||0],"line-progress":[zt,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[zt,[],r=>r.globals.skyRadialProgress||0],accumulated:[G,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[zt,As(zt),(r,e)=>{let o=0;for(const a of e)o+=a.evaluate(r);return o}],"*":[zt,As(zt),(r,e)=>{let o=1;for(const a of e)o*=a.evaluate(r);return o}],"-":{type:zt,overloads:[[[zt,zt],(r,[e,o])=>e.evaluate(r)-o.evaluate(r)],[[zt],(r,[e])=>-e.evaluate(r)]]},"/":[zt,[zt,zt],(r,[e,o])=>e.evaluate(r)/o.evaluate(r)],"%":[zt,[zt,zt],(r,[e,o])=>e.evaluate(r)%o.evaluate(r)],ln2:[zt,[],()=>Math.LN2],pi:[zt,[],()=>Math.PI],e:[zt,[],()=>Math.E],"^":[zt,[zt,zt],(r,[e,o])=>Math.pow(e.evaluate(r),o.evaluate(r))],sqrt:[zt,[zt],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[zt,[zt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[zt,[zt],(r,[e])=>Math.log(e.evaluate(r))],log2:[zt,[zt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[zt,[zt],(r,[e])=>Math.sin(e.evaluate(r))],cos:[zt,[zt],(r,[e])=>Math.cos(e.evaluate(r))],tan:[zt,[zt],(r,[e])=>Math.tan(e.evaluate(r))],asin:[zt,[zt],(r,[e])=>Math.asin(e.evaluate(r))],acos:[zt,[zt],(r,[e])=>Math.acos(e.evaluate(r))],atan:[zt,[zt],(r,[e])=>Math.atan(e.evaluate(r))],min:[zt,As(zt),(r,e)=>Math.min(...e.map(o=>o.evaluate(r)))],max:[zt,As(zt),(r,e)=>Math.max(...e.map(o=>o.evaluate(r)))],abs:[zt,[zt],(r,[e])=>Math.abs(e.evaluate(r))],round:[zt,[zt],(r,[e])=>{const o=e.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[zt,[zt],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[zt,[zt],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[Ln,[Un,G],(r,[e,o])=>r.properties()[e.value]===o.value],"filter-id-==":[Ln,[G],(r,[e])=>r.id()===e.value],"filter-type-==":[Ln,[Un],(r,[e])=>r.geometryType()===e.value],"filter-<":[Ln,[Un,G],(r,[e,o])=>{const a=r.properties()[e.value],u=o.value;return typeof a==typeof u&&a<u}],"filter-id-<":[Ln,[G],(r,[e])=>{const o=r.id(),a=e.value;return typeof o==typeof a&&o<a}],"filter->":[Ln,[Un,G],(r,[e,o])=>{const a=r.properties()[e.value],u=o.value;return typeof a==typeof u&&a>u}],"filter-id->":[Ln,[G],(r,[e])=>{const o=r.id(),a=e.value;return typeof o==typeof a&&o>a}],"filter-<=":[Ln,[Un,G],(r,[e,o])=>{const a=r.properties()[e.value],u=o.value;return typeof a==typeof u&&a<=u}],"filter-id-<=":[Ln,[G],(r,[e])=>{const o=r.id(),a=e.value;return typeof o==typeof a&&o<=a}],"filter->=":[Ln,[Un,G],(r,[e,o])=>{const a=r.properties()[e.value],u=o.value;return typeof a==typeof u&&a>=u}],"filter-id->=":[Ln,[G],(r,[e])=>{const o=r.id(),a=e.value;return typeof o==typeof a&&o>=a}],"filter-has":[Ln,[G],(r,[e])=>e.value in r.properties()],"filter-has-id":[Ln,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ln,[vn(Un)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ln,[vn(G)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[Ln,[Un,vn(G)],(r,[e,o])=>o.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[Ln,[Un,vn(G)],(r,[e,o])=>function(a,u,d,m){for(;d<=m;){const y=d+m>>1;if(u[y]===a)return!0;u[y]>a?m=y-1:d=y+1}return!1}(r.properties()[e.value],o.value,0,o.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(r,[e,o])=>e.evaluate(r)&&o.evaluate(r)],[As(Ln),(r,e)=>{for(const o of e)if(!o.evaluate(r))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(r,[e,o])=>e.evaluate(r)||o.evaluate(r)],[As(Ln),(r,e)=>{for(const o of e)if(o.evaluate(r))return!0;return!1}]]},"!":[Ln,[Ln],(r,[e])=>!e.evaluate(r)],"is-supported-script":[Ln,[Un],(r,[e])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(e.evaluate(r))}],upcase:[Un,[Un],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[Un,[Un],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[Un,As(G),(r,e)=>e.map(o=>Zr(o.evaluate(r))).join("")],"resolved-locale":[Un,[Oe],(r,[e])=>e.evaluate(r).resolvedLocale()]});class Xl{constructor(e,o){this.expression=e,this._warningHistory={},this._evaluator=new Xc,this._defaultValue=o?function(a){return a.type==="color"&&go(a.default)?new Rn(0,0,0,0):a.type==="color"?Rn.parse(a.default)||null:a.default===void 0?null:a.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,a,u,d,m,y,b){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=a,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=b||null,this.expression.evaluate(this._evaluator)}evaluate(e,o,a,u,d,m,y,b){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=a||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=b||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function ga(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Vs}function ol(r,e){const o=new ws(Vs,[],e?function(u){const d={color:Or,string:Un,number:zt,enum:Un,boolean:Ln,formatted:It,resolvedImage:mt};return u.type==="array"?vn(d[u.value]||G,u.length):d[u.type]}(e):void 0),a=o.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?su(new Xl(a,e)):Gs(o.errors)}class ya{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!es(o.expression)}evaluateWithoutErrorHandling(e,o,a,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,o,a,u,d,m)}evaluate(e,o,a,u,d,m){return this._styleExpression.evaluate(e,o,a,u,d,m)}}class Yl{constructor(e,o,a,u){this.kind=e,this.zoomStops=a,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!es(o.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,o,a,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,o,a,u,d,m)}evaluate(e,o,a,u,d,m){return this._styleExpression.evaluate(e,o,a,u,d,m)}interpolationFactor(e,o,a){return this.interpolationType?Rr.interpolationFactor(this.interpolationType,e,o,a):0}}function au(r,e){if((r=ol(r,e)).result==="error")return r;const o=r.value.expression,a=ir(o);if(!a&&!pa(e))return Gs([new zn("","data expressions not supported")]);const u=Fs(o,["zoom","pitch","distance-from-center"]);if(!u&&!Ch(e))return Gs([new zn("","zoom expressions not supported")]);const d=ns(o);return d||u?d instanceof zn?Gs([d]):d instanceof Rr&&!ma(e)?Gs([new zn("",'"interpolate" expressions cannot be used with this property')]):su(d?new Yl(a?"camera":"composite",r.value,d.labels,d instanceof Rr?d.interpolation:void 0):new ya(a?"constant":"source",r.value)):Gs([new zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Kl{constructor(e,o){this._parameters=e,this._specification=o,jn(this,Wl(this._parameters,this._specification))}static deserialize(e){return new Kl(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ns(r){let e=null;if(r instanceof da)e=ns(r.result);else if(r instanceof fa){for(const o of r.args)if(e=ns(o),e)break}else(r instanceof Ka||r instanceof Rr)&&r.input instanceof Mr&&r.input.name==="zoom"&&(e=r);return e instanceof zn||r.eachChild(o=>{const a=ns(o);a instanceof zn?e=a:!e&&a?e=new zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new zn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Wt{constructor(e,o,a,u){this.message=(e?`${e}: `:"")+a,u&&(this.identifier=u),o!=null&&o.__line__&&(this.line=o.__line__)}}function Xr(r){const e=r.key,o=r.value,a=r.valueSpec||{},u=r.objectElementValidators||{},d=r.style,m=r.styleSpec;let y=[];const b=Jn(o);if(b!=="object")return[new Wt(e,o,`object expected, ${b} found`)];for(const T in o){const I=T.split(".")[0],M=a[I]||a["*"];let P;u[I]?P=u[I]:a[I]?P=Mn:u["*"]?P=u["*"]:a["*"]&&(P=Mn),P?y=y.concat(P({key:(e&&`${e}.`)+T,value:o[T],valueSpec:M,style:d,styleSpec:m,object:o,objectKey:T},o)):y.push(new Wt(e,o[T],`unknown property "${T}"`))}for(const T in a)u[T]||a[T].required&&a[T].default===void 0&&o[T]===void 0&&y.push(new Wt(e,o,`missing required property "${T}"`));return y}function is(r){const e=r.value,o=r.valueSpec,a=r.style,u=r.styleSpec,d=r.key,m=r.arrayElementValidator||Mn;if(Jn(e)!=="array")return[new Wt(d,e,`array expected, ${Jn(e)} found`)];if(o.length&&e.length!==o.length)return[new Wt(d,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new Wt(d,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let y={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};u.$version<7&&(y.function=o.function),Jn(o.value)==="object"&&(y=o.value);let b=[];for(let T=0;T<e.length;T++)b=b.concat(m({array:e,arrayIndex:T,value:e[T],valueSpec:y,style:a,styleSpec:u,key:`${d}[${T}]`}));return b}function va(r){const e=r.key,o=r.value,a=r.valueSpec;let u=Jn(o);if(u==="number"&&o!=o&&(u="NaN"),u!=="number")return[new Wt(e,o,`number expected, ${u} found`)];if("minimum"in a){let d=a.minimum;if(Jn(a.minimum)==="array"&&(d=a.minimum[r.arrayIndex]),o<d)return[new Wt(e,o,`${o} is less than the minimum value ${d}`)]}if("maximum"in a){let d=a.maximum;if(Jn(a.maximum)==="array"&&(d=a.maximum[r.arrayIndex]),o>d)return[new Wt(e,o,`${o} is greater than the maximum value ${d}`)]}return[]}function lu(r){const e=r.valueSpec,o=Kt(r.value.type);let a,u,d,m={};const y=o!=="categorical"&&r.value.property===void 0,b=!y,T=Jn(r.value.stops)==="array"&&Jn(r.value.stops[0])==="array"&&Jn(r.value.stops[0][0])==="object",I=Xr({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(B){if(o==="identity")return[new Wt(B.key,B.value,'identity function may not have a "stops" property')];let j=[];const q=B.value;return j=j.concat(is({key:B.key,value:q,valueSpec:B.valueSpec,style:B.style,styleSpec:B.styleSpec,arrayElementValidator:M})),Jn(q)==="array"&&q.length===0&&j.push(new Wt(B.key,q,"array must have at least one stop")),j},default:function(B){return Mn({key:B.key,value:B.value,valueSpec:e,style:B.style,styleSpec:B.styleSpec})}}});return o==="identity"&&y&&I.push(new Wt(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||I.push(new Wt(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!ma(r.valueSpec)&&I.push(new Wt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(b&&!pa(r.valueSpec)?I.push(new Wt(r.key,r.value,"property functions not supported")):y&&!Ch(r.valueSpec)&&I.push(new Wt(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!T||r.value.property!==void 0||I.push(new Wt(r.key,r.value,'"property" property is required')),I;function M(B){let j=[];const q=B.value,Q=B.key;if(Jn(q)!=="array")return[new Wt(Q,q,`array expected, ${Jn(q)} found`)];if(q.length!==2)return[new Wt(Q,q,`array length 2 expected, length ${q.length} found`)];if(T){if(Jn(q[0])!=="object")return[new Wt(Q,q,`object expected, ${Jn(q[0])} found`)];if(q[0].zoom===void 0)return[new Wt(Q,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Wt(Q,q,"object stop key must have value")];const le=Kt(q[0].zoom);if(typeof le!="number")return[new Wt(Q,q[0].zoom,"stop zoom values must be numbers")];if(d&&d>le)return[new Wt(Q,q[0].zoom,"stop zoom values must appear in ascending order")];le!==d&&(d=le,u=void 0,m={}),j=j.concat(Xr({key:`${Q}[0]`,value:q[0],valueSpec:{zoom:{}},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{zoom:va,value:P}}))}else j=j.concat(P({key:`${Q}[0]`,value:q[0],valueSpec:{},style:B.style,styleSpec:B.styleSpec},q));return ga(Yn(q[1]))?j.concat([new Wt(`${Q}[1]`,q[1],"expressions are not allowed in function stops.")]):j.concat(Mn({key:`${Q}[1]`,value:q[1],valueSpec:e,style:B.style,styleSpec:B.styleSpec}))}function P(B,j){const q=Jn(B.value),Q=Kt(B.value),le=B.value!==null?B.value:j;if(a){if(q!==a)return[new Wt(B.key,le,`${q} stop domain type must match previous stop domain type ${a}`)]}else a=q;if(q!=="number"&&q!=="string"&&q!=="boolean"&&typeof Q!="number"&&typeof Q!="string"&&typeof Q!="boolean")return[new Wt(B.key,le,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&o!=="categorical"){let xe=`number expected, ${q} found`;return pa(e)&&o===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(B.key,le,xe)]}return o!=="categorical"||q!=="number"||typeof Q=="number"&&isFinite(Q)&&Math.floor(Q)===Q?o!=="categorical"&&q==="number"&&typeof Q=="number"&&typeof u=="number"&&u!==void 0&&Q<u?[new Wt(B.key,le,"stop domain values must appear in ascending order")]:(u=Q,o==="categorical"&&Q in m?[new Wt(B.key,le,"stop domain values must be unique")]:(m[Q]=!0,[])):[new Wt(B.key,le,`integer expected, found ${String(Q)}`)]}}function Hs(r){const e=(r.expressionContext==="property"?au:ol)(Yn(r.value),r.valueSpec);if(e.result==="error")return e.value.map(a=>new Wt(`${r.key}${a.key}`,r.value,a.message));const o=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new Wt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!es(o))return[new Wt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return Po(o,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Fs(o,["zoom","feature-state"]))return[new Wt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!ir(o))return[new Wt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Po(r,e){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)o.delete(u);if(o.size===0)return[];const a=[];return r instanceof Mr&&o.has(r.name)?[new Wt(e.key,e.value,`["${r.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(r.eachChild(u=>{a.push(...Po(u,e))}),a)}function xa(r){const e=r.key,o=r.value,a=r.valueSpec,u=[];return Array.isArray(a.values)?a.values.indexOf(Kt(o))===-1&&u.push(new Wt(e,o,`expected one of [${a.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(a.values).indexOf(Kt(o))===-1&&u.push(new Wt(e,o,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(o)} found`)),u}function so(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!so(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function rs(r,e="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};so(r)||(r=Z(r));const o=r;let a=!0;try{a=function(T){if(!yo(T))return T;let I=Yn(T);return ba(I),I=Jl(I),I}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const u=Ue[`filter_${e}`],d=ol(a,u);let m=null;if(d.result==="error")throw new Error(d.value.map(T=>`${T.key}: ${T.message}`).join(", "));m=(T,I,M)=>d.value.evaluate(T,I,{},M);let y=null,b=null;if(a!==o){const T=ol(o,u);if(T.result==="error")throw new Error(T.value.map(I=>`${I.key}: ${I.message}`).join(", "));y=(I,M,P,B,j)=>T.value.evaluate(I,M,{},P,void 0,void 0,B,j),b=!ir(T.value.expression)}return m=m,{filter:m,dynamicFilter:y||void 0,needGeometry:Cs(a),needFeature:!!b}}function Jl(r){if(!Array.isArray(r))return r;const e=function(o){if(Mh.has(o[0])){for(let a=1;a<o.length;a++)if(yo(o[a]))return!0}return o}(r);return e===!0?e:e.map(o=>Jl(o))}function ba(r){let e=!1;const o=[];if(r[0]==="case"){for(let a=1;a<r.length-1;a+=2)e=e||yo(r[a]),o.push(r[a+1]);o.push(r[r.length-1])}else if(r[0]==="match"){e=e||yo(r[1]);for(let a=2;a<r.length-1;a+=2)o.push(r[a+1]);o.push(r[r.length-1])}else if(r[0]==="step"){e=e||yo(r[1]);for(let a=1;a<r.length-1;a+=2)o.push(r[a+1])}e&&(r.length=0,r.push("any",...o));for(let a=1;a<r.length;a++)ba(r[a])}function yo(r){if(!Array.isArray(r))return!1;if((e=r[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let o=1;o<r.length;o++)if(yo(r[o]))return!0;return!1}const Mh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ql(r,e){return r<e?-1:r>e?1:0}function Cs(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(Cs(r[e]))return!0;return!1}function Z(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?S(r[1],r[2],"=="):e==="!="?be(S(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?S(r[1],r[2],e):e==="any"?(o=r.slice(1),["any"].concat(o.map(Z))):e==="all"?["all"].concat(r.slice(1).map(Z)):e==="none"?["all"].concat(r.slice(1).map(Z).map(be)):e==="in"?R(r[1],r.slice(2)):e==="!in"?be(R(r[1],r.slice(2))):e==="has"?ie(r[1]):e==="!has"?be(ie(r[1])):e!=="within"||r;var o}function S(r,e,o){switch(r){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,r,e]}}function R(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",r,["literal",e.sort(Ql)]]:["filter-in-small",r,["literal",e]]}}function ie(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function be(r){return["!",r]}function De(r){return so(Yn(r.value))?Hs(jn({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):Je(r)}function Je(r){const e=r.value,o=r.key;if(Jn(e)!=="array")return[new Wt(o,e,`array expected, ${Jn(e)} found`)];const a=r.styleSpec;let u,d=[];if(e.length<1)return[new Wt(o,e,"filter array must have at least 1 element")];switch(d=d.concat(xa({key:`${o}[0]`,value:e[0],valueSpec:a.filter_operator,style:r.style,styleSpec:r.styleSpec})),Kt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Kt(e[1])==="$type"&&d.push(new Wt(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&d.push(new Wt(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Jn(e[1]),u!=="string"&&d.push(new Wt(`${o}[1]`,e[1],`string expected, ${u} found`)));for(let m=2;m<e.length;m++)u=Jn(e[m]),Kt(e[1])==="$type"?d=d.concat(xa({key:`${o}[${m}]`,value:e[m],valueSpec:a.geometry_type,style:r.style,styleSpec:r.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&d.push(new Wt(`${o}[${m}]`,e[m],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)d=d.concat(Je({key:`${o}[${m}]`,value:e[m],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":u=Jn(e[1]),e.length!==2?d.push(new Wt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&d.push(new Wt(`${o}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Jn(e[1]),e.length!==2?d.push(new Wt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="object"&&d.push(new Wt(`${o}[1]`,e[1],`object expected, ${u} found`))}return d}function At(r,e){const o=r.key,a=r.style,u=r.styleSpec,d=r.value,m=r.objectKey,y=u[`${e}_${r.layerType}`];if(!y)return[];const b=m.match(/^(.*)-transition$/);if(e==="paint"&&b&&y[b[1]]&&y[b[1]].transition)return Mn({key:o,value:d,valueSpec:u.transition,style:a,styleSpec:u});const T=r.valueSpec||y[m];if(!T)return[new Wt(o,d,`unknown property "${m}"`)];let I;if(Jn(d)==="string"&&pa(T)&&!T.tokens&&(I=/^{([^}]+)}$/.exec(d)))return[new Wt(o,d,`"${m}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(I[1])} }\`.`)];const M=[];return r.layerType==="symbol"&&(m==="text-field"&&a&&!a.glyphs&&M.push(new Wt(o,d,'use of "text-field" requires a style "glyphs" property')),m==="text-font"&&go(Yn(d))&&Kt(d.type)==="identity"&&M.push(new Wt(o,d,'"text-font" does not support identity functions'))),M.concat(Mn({key:r.key,value:d,valueSpec:T,style:a,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:m}))}function Ht(r){return At(r,"paint")}function ln(r){return At(r,"layout")}function pn(r){let e=[];const o=r.value,a=r.key,u=r.style,d=r.styleSpec;o.type||o.ref||e.push(new Wt(a,o,'either "type" or "ref" is required'));let m=Kt(o.type);const y=Kt(o.ref);if(o.id){const b=Kt(o.id);for(let T=0;T<r.arrayIndex;T++){const I=u.layers[T];Kt(I.id)===b&&e.push(new Wt(a,o.id,`duplicate layer id "${o.id}", previously used at line ${I.id.__line__}`))}}if("ref"in o){let b;["type","source","source-layer","filter","layout"].forEach(T=>{T in o&&e.push(new Wt(a,o[T],`"${T}" is prohibited for ref layers`))}),u.layers.forEach(T=>{Kt(T.id)===y&&(b=T)}),b?b.ref?e.push(new Wt(a,o.ref,"ref cannot reference another ref layer")):m=Kt(b.type):typeof y=="string"&&e.push(new Wt(a,o.ref,`ref layer "${y}" not found`))}else if(m!=="background"&&m!=="sky")if(o.source){const b=u.sources&&u.sources[o.source],T=b&&Kt(b.type);b?T==="vector"&&m==="raster"?e.push(new Wt(a,o.source,`layer "${o.id}" requires a raster source`)):T==="raster"&&m!=="raster"?e.push(new Wt(a,o.source,`layer "${o.id}" requires a vector source`)):T!=="vector"||o["source-layer"]?T==="raster-dem"&&m!=="hillshade"?e.push(new Wt(a,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!o.paint||!o.paint["line-gradient"]||T==="geojson"&&b.lineMetrics||e.push(new Wt(a,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Wt(a,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new Wt(a,o.source,`source "${o.source}" not found`))}else e.push(new Wt(a,o,'missing required property "source"'));return e=e.concat(Xr({key:a,value:o,valueSpec:d.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mn({key:`${a}.type`,value:o.type,valueSpec:d.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:b=>De(jn({layerType:m},b)),layout:b=>Xr({layer:o,key:b.key,value:b.value,valueSpec:{},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":T=>ln(jn({layerType:m},T))}}),paint:b=>Xr({layer:o,key:b.key,value:b.value,valueSpec:{},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":T=>Ht(jn({layerType:m},T))}})}})),e}function $t(r){const e=r.value,o=r.key,a=Jn(e);return a!=="string"?[new Wt(o,e,`string expected, ${a} found`)]:[]}const Xn={promoteId:function({key:r,value:e}){if(Jn(e)==="string")return $t({key:r,value:e});{const o=[];for(const a in e)o.push(...$t({key:`${r}.${a}`,value:e[a]}));return o}}};function Pn(r){const e=r.value,o=r.key,a=r.styleSpec,u=r.style;if(!e.type)return[new Wt(o,e,'"type" is required')];const d=Kt(e.type);let m;switch(d){case"vector":case"raster":case"raster-dem":return m=Xr({key:o,value:e,valueSpec:a[`source_${d.replace("-","_")}`],style:r.style,styleSpec:a,objectElementValidators:Xn}),m;case"geojson":if(m=Xr({key:o,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a,objectElementValidators:Xn}),e.cluster)for(const y in e.clusterProperties){const[b,T]=e.clusterProperties[y],I=typeof b=="string"?[b,["accumulated"],["get",y]]:b;m.push(...Hs({key:`${o}.${y}.map`,value:T,expressionContext:"cluster-map"})),m.push(...Hs({key:`${o}.${y}.reduce`,value:I,expressionContext:"cluster-reduce"}))}return m;case"video":return Xr({key:o,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return Xr({key:o,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return[new Wt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xa({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:a})}}function Dn(r){const e=r.value,o=r.styleSpec,a=o.light,u=r.style;let d=[];const m=Jn(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new Wt("light",e,`object expected, ${m} found`)]),d;for(const y in e){const b=y.match(/^(.*)-transition$/);d=d.concat(b&&a[b[1]]&&a[b[1]].transition?Mn({key:y,value:e[y],valueSpec:o.transition,style:u,styleSpec:o}):a[y]?Mn({key:y,value:e[y],valueSpec:a[y],style:u,styleSpec:o}):[new Wt(y,e[y],`unknown property "${y}"`)])}return d}function $n(r){const e=r.value,o=r.key,a=r.style,u=r.styleSpec,d=u.terrain;let m=[];const y=Jn(e);if(e===void 0)return m;if(y!=="object")return m=m.concat([new Wt("terrain",e,`object expected, ${y} found`)]),m;for(const b in e){const T=b.match(/^(.*)-transition$/);m=m.concat(T&&d[T[1]]&&d[T[1]].transition?Mn({key:b,value:e[b],valueSpec:u.transition,style:a,styleSpec:u}):d[b]?Mn({key:b,value:e[b],valueSpec:d[b],style:a,styleSpec:u}):[new Wt(b,e[b],`unknown property "${b}"`)])}if(e.source){const b=a.sources&&a.sources[e.source],T=b&&Kt(b.type);b?T!=="raster-dem"&&m.push(new Wt(o,e.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):m.push(new Wt(o,e.source,`source "${e.source}" not found`))}else m.push(new Wt(o,e,'terrain is missing required property "source"'));return m}function Nn(r){const e=r.value,o=r.style,a=r.styleSpec,u=a.fog;let d=[];const m=Jn(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new Wt("fog",e,`object expected, ${m} found`)]),d;for(const y in e){const b=y.match(/^(.*)-transition$/);d=d.concat(b&&u[b[1]]&&u[b[1]].transition?Mn({key:y,value:e[y],valueSpec:a.transition,style:o,styleSpec:a}):u[y]?Mn({key:y,value:e[y],valueSpec:u[y],style:o,styleSpec:a}):[new Wt(y,e[y],`unknown property "${y}"`)])}return d}const di={"*":()=>[],array:is,boolean:function(r){const e=r.value,o=r.key,a=Jn(e);return a!=="boolean"?[new Wt(o,e,`boolean expected, ${a} found`)]:[]},number:va,color:function(r){const e=r.key,o=r.value,a=Jn(o);return a!=="string"?[new Wt(e,o,`color expected, ${a} found`)]:Lo.parseCSSColor(o)===null?[new Wt(e,o,`color expected, "${o}" found`)]:[]},enum:xa,filter:De,function:lu,layer:pn,object:Xr,source:Pn,light:Dn,terrain:$n,fog:Nn,string:$t,formatted:function(r){return $t(r).length===0?[]:Hs(r)},resolvedImage:function(r){return $t(r).length===0?[]:Hs(r)},projection:function(r){const e=r.value,o=r.styleSpec,a=o.projection,u=r.style;let d=[];const m=Jn(e);if(m==="object")for(const y in e)d=d.concat(Mn({key:y,value:e[y],valueSpec:a[y],style:u,styleSpec:o}));else m!=="string"&&(d=d.concat([new Wt("projection",e,`object or string expected, ${m} found`)]));return d}};function Mn(r){const e=r.value,o=r.valueSpec,a=r.styleSpec;return o.expression&&go(Kt(e))?lu(r):o.expression&&ga(Yn(e))?Hs(r):o.type&&di[o.type]?di[o.type](r):Xr(jn({},r,{valueSpec:o.type?a[o.type]:o}))}function Cn(r){const e=r.value,o=r.key,a=$t(r);return a.length||(e.indexOf("{fontstack}")===-1&&a.push(new Wt(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&a.push(new Wt(o,e,'"glyphs" url must include a "{range}" token'))),a}function ni(r,e=Ue){return Qn(Mn({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Cn,"*":()=>[]}}))}const li=r=>Qn(Ht(r)),ci=r=>Qn(ln(r));function Qn(r){return r.slice().sort((e,o)=>e.line&&o.line?e.line-o.line:0)}function _i(r,e){let o=!1;if(e&&e.length)for(const a of e)r.fire(new an(new Error(a.message))),o=!0;return o}var pi=Di;function Di(r,e,o){var a=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var u=new Int32Array(this.arrayBuffer);r=u[0],this.d=(e=u[1])+2*(o=u[2]);for(var d=0;d<this.d*this.d;d++){var m=u[3+d],y=u[3+d+1];a.push(m===y?null:u.subarray(m,y))}var b=u[3+a.length+1];this.keys=u.subarray(u[3+a.length],b),this.bboxes=u.subarray(b),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var T=0;T<this.d*this.d;T++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=r,this.padding=o,this.scale=e/r,this.uid=0;var I=o/e*r;this.min=-I,this.max=r+I}Di.prototype.insert=function(r,e,o,a,u){this._forEachCell(e,o,a,u,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(a),this.bboxes.push(u)},Di.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Di.prototype._insertCell=function(r,e,o,a,u,d){this.cells[u].push(d)},Di.prototype.query=function(r,e,o,a,u){var d=this.min,m=this.max;if(r<=d&&e<=d&&m<=o&&m<=a&&!u)return Array.prototype.slice.call(this.keys);var y=[];return this._forEachCell(r,e,o,a,this._queryCell,y,{},u),y},Di.prototype._queryCell=function(r,e,o,a,u,d,m,y){var b=this.cells[u];if(b!==null)for(var T=this.keys,I=this.bboxes,M=0;M<b.length;M++){var P=b[M];if(m[P]===void 0){var B=4*P;(y?y(I[B+0],I[B+1],I[B+2],I[B+3]):r<=I[B+2]&&e<=I[B+3]&&o>=I[B+0]&&a>=I[B+1])?(m[P]=!0,d.push(T[P])):m[P]=!1}}},Di.prototype._forEachCell=function(r,e,o,a,u,d,m,y){for(var b=this._convertToCellCoord(r),T=this._convertToCellCoord(e),I=this._convertToCellCoord(o),M=this._convertToCellCoord(a),P=b;P<=I;P++)for(var B=T;B<=M;B++){var j=this.d*B+P;if((!y||y(this._convertFromCellCoord(P),this._convertFromCellCoord(B),this._convertFromCellCoord(P+1),this._convertFromCellCoord(B+1)))&&u.call(this,r,e,o,a,j,d,m,y))return}},Di.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Di.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Di.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,e=3+this.cells.length+1+1,o=0,a=0;a<this.cells.length;a++)o+=this.cells[a].length;var u=new Int32Array(e+o+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var d=e,m=0;m<r.length;m++){var y=r[m];u[3+m]=d,u.set(y,d),d+=y.length}return u[3+r.length]=d,u.set(this.keys,d),u[3+r.length+1]=d+=this.keys.length,u.set(this.bboxes,d),d+=this.bboxes.length,u.buffer};const Ji={};function Bt(r,e,o={}){Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),Ji[e]={klass:r,omit:o.omit||[]}}Bt(Object,"Object"),pi.serialize=function(r,e){const o=r.toArrayBuffer();return e&&e.push(o),{buffer:o}},pi.deserialize=function(r){return new pi(r.buffer)},Object.defineProperty(pi,"name",{value:"Grid"}),Bt(pi,"Grid"),Bt(Rn,"Color"),Bt(Error,"Error"),Bt($,"AJAXError"),Bt(Ir,"ResolvedImage"),Bt(Kl,"StylePropertyFunction"),Bt(Xl,"StyleExpression",{omit:["_evaluator"]}),Bt(Yl,"ZoomDependentExpression"),Bt(ya,"ZoomConstantExpression"),Bt(Mr,"CompoundExpression",{omit:["_evaluate"]});for(const r in Vs)Ji[Vs[r]._classRegistryKey]||Bt(Vs[r],`Expression${r}`);function ji(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Do(r){return K.ImageBitmap&&r instanceof K.ImageBitmap}function Yr(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(ji(r)||Do(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return e&&e.push(o.buffer),o}if(r instanceof K.ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const a of r)o.push(Yr(a,e));return o}if(typeof r=="object"){const o=r.constructor,a=o._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const u=o.serialize?o.serialize(r,e):{};if(!o.serialize){for(const d in r)r.hasOwnProperty(d)&&(Ji[a].omit.indexOf(d)>=0||(u[d]=Yr(r[d],e)));r instanceof Error&&(u.message=r.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(u.$name=a),u}throw new Error("can't serialize object of type "+typeof r)}function Nr(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||ji(r)||Do(r)||ArrayBuffer.isView(r)||r instanceof K.ImageData)return r;if(Array.isArray(r))return r.map(Nr);if(typeof r=="object"){const e=r.$name||"Object",{klass:o}=Ji[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(r);const a=Object.create(o.prototype);for(const u of Object.keys(r))u!=="$name"&&(a[u]=Nr(r[u]));return a}throw new Error("can't deserialize object of type "+typeof r)}class hr{constructor(){this.first=!0}update(e,o){const a=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=a,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=a,!0):(this.lastFloorZoom>a?(this.lastIntegerZoom=a+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<a&&(this.lastIntegerZoom=a,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=a,!0))}}const Ni=r=>r>=1536&&r<=1791,Oo=r=>r>=1872&&r<=1919,fr=r=>r>=2208&&r<=2303,gr=r=>r>=11904&&r<=12031,Kr=r=>r>=12032&&r<=12255,wa=r=>r>=12272&&r<=12287,Is=r=>r>=12288&&r<=12351,zo=r=>r>=12352&&r<=12447,ec=r=>r>=12448&&r<=12543,kh=r=>r>=12544&&r<=12591,tc=r=>r>=12704&&r<=12735,Lh=r=>r>=12736&&r<=12783,nc=r=>r>=12784&&r<=12799,cu=r=>r>=12800&&r<=13055,uu=r=>r>=13056&&r<=13311,hu=r=>r>=13312&&r<=19903,fu=r=>r>=19968&&r<=40959,Ph=r=>r>=40960&&r<=42127,sl=r=>r>=42128&&r<=42191,du=r=>r>=44032&&r<=55215,Ea=r=>r>=63744&&r<=64255,ic=r=>r>=64336&&r<=65023,Op=r=>r>=65040&&r<=65055,rc=r=>r>=65072&&r<=65103,zp=r=>r>=65104&&r<=65135,Dh=r=>r>=65136&&r<=65279,Jf=r=>r>=65280&&r<=65519;function Oh(r){for(const e of r)if(zh(e.charCodeAt(0)))return!0;return!1}function Rp(r){for(const e of r)if(!Np(e.charCodeAt(0)))return!1;return!0}function Np(r){return!(Ni(r)||Oo(r)||fr(r)||ic(r)||Dh(r))}function zh(r){return!(r!==746&&r!==747&&(r<4352||!(tc(r)||kh(r)||rc(r)&&!(r>=65097&&r<=65103)||Ea(r)||uu(r)||gr(r)||Lh(r)||!(!Is(r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||hu(r)||fu(r)||cu(r)||(e=>e>=12592&&e<=12687)(r)||(e=>e>=43360&&e<=43391)(r)||(e=>e>=55216&&e<=55295)(r)||(e=>e>=4352&&e<=4607)(r)||du(r)||zo(r)||wa(r)||(e=>e>=12688&&e<=12703)(r)||Kr(r)||nc(r)||ec(r)&&r!==12540||!(!Jf(r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!zp(r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||(e=>e>=5120&&e<=5759)(r)||(e=>e>=6320&&e<=6399)(r)||Op(r)||(e=>e>=19904&&e<=19967)(r)||Ph(r)||sl(r))))}function Rh(r){return!(zh(r)||function(e){return!!((o=>o>=128&&o<=255)(e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||(o=>o>=8192&&o<=8303)(e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||(o=>o>=8448&&o<=8527)(e)||(o=>o>=8528&&o<=8591)(e)||(o=>o>=8960&&o<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||(o=>o>=9216&&o<=9279)(e)&&e!==9251||(o=>o>=9280&&o<=9311)(e)||(o=>o>=9312&&o<=9471)(e)||(o=>o>=9632&&o<=9727)(e)||(o=>o>=9728&&o<=9983)(e)&&!(e>=9754&&e<=9759)||(o=>o>=11008&&o<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Is(e)||ec(e)||(o=>o>=57344&&o<=63743)(e)||rc(e)||zp(e)||Jf(e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function Nh(r){return r>=1424&&r<=2303||ic(r)||Dh(r)}function ng(r,e){return!(!e&&Nh(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||(o=>o>=6016&&o<=6143)(r))}function ig(r){for(const e of r)if(Nh(e.charCodeAt(0)))return!0;return!1}const Qf="deferred",pu="loading",ed="loaded";let td=null,ao="unavailable",vo=null;const mu=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(ao="error"),td&&td(r)};function al(){nd.fire(new Xt("pluginStateChange",{pluginStatus:ao,pluginURL:vo}))}const nd=new gn,Bh=function(){return ao},oc=function(){if(ao!==Qf||!vo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ao=pu,al(),vo&&de({url:vo},r=>{r?mu(r):(ao=ed,al())})},Ro={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ao===ed||Ro.applyArabicShaping!=null,isLoading:()=>ao===pu,setState(r){ao=r.pluginStatus,vo=r.pluginURL},isParsed:()=>Ro.applyArabicShaping!=null&&Ro.processBidirectionalText!=null&&Ro.processStyledBidirectionalText!=null,getPluginURL:()=>vo};class Ii{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hr,this.transition={},this.pitch=0)}isSupportedScript(e){return function(o,a){for(const u of o)if(!ng(u.charCodeAt(0),a))return!1;return!0}(e,Ro.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),a=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*a}:{fromScale:.5,toScale:1,t:1-(1-a)*o}}}class _u{constructor(e,o){this.property=e,this.value=o,this.expression=function(a,u){if(go(a))return new Kl(a,u);if(ga(a)){const d=au(a,u);if(d.result==="error")throw new Error(d.value.map(m=>`${m.key}: ${m.message}`).join(", "));return d.value}{let d=a;return typeof a=="string"&&u.type==="color"&&(d=Rn.parse(a)),{kind:"constant",evaluate:()=>d}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,a){return this.property.possiblyEvaluate(this,e,o,a)}}class sc{constructor(e){this.property=e,this.value=new _u(e,void 0)}transitioned(e,o){return new i(this.property,this.value,o,Xe({},e.transition,this.transition),e.now)}untransitioned(){return new i(this.property,this.value,null,{},0)}}class f{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return qe(this._values[e].value.value)}setValue(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new sc(this._values[e].property)),this._values[e].value=new _u(this._values[e].property,o===null?void 0:qe(o))}getTransition(e){return qe(this._values[e].transition)}setTransition(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new sc(this._values[e].property)),this._values[e].transition=qe(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const a=this.getValue(o);a!==void 0&&(e[o]=a);const u=this.getTransition(o);u!==void 0&&(e[`${o}-transition`]=u)}return e}transitioned(e,o){const a=new c(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].transitioned(e,o._values[u]);return a}untransitioned(){const e=new c(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class i{constructor(e,o,a,u,d){const m=u.delay||0,y=u.duration||0;d=d||0,this.property=e,this.value=o,this.begin=d+m,this.end=this.begin+y,e.specification.transition&&(u.delay||u.duration)&&(this.prior=a)}possiblyEvaluate(e,o,a){const u=e.now||0,d=this.value.possiblyEvaluate(e,o,a),m=this.prior;if(m){if(u>this.end)return this.prior=null,d;if(this.value.isDataDriven())return this.prior=null,d;if(u<this.begin)return m.possiblyEvaluate(e,o,a);{const y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,o,a),d,ge(y))}}return d}}class c{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,a){const u=new x(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,o,a);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class p{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return qe(this._values[e].value)}setValue(e,o){this._values[e]=new _u(this._values[e].property,o===null?void 0:qe(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const a=this.getValue(o);a!==void 0&&(e[o]=a)}return e}possiblyEvaluate(e,o,a){const u=new x(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,o,a);return u}}class v{constructor(e,o,a){this.property=e,this.value=o,this.parameters=a}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,a,u){return this.property.evaluate(this.value,this.parameters,e,o,a,u)}}class x{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class E{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,a){const u=Ol[this.specification.type];return u?u(e,o,a):e}}class A{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,a,u){return new v(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},a,u)}:e.expression,o)}interpolate(e,o,a){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new v(this,{kind:"constant",value:void 0},e.parameters);const u=Ol[this.specification.type];return u?new v(this,{kind:"constant",value:u(e.value.value,o.value.value,a)},e.parameters):e}evaluate(e,o,a,u,d,m){return e.kind==="constant"?e.value:e.evaluate(o,a,u,d,m)}}class L extends A{possiblyEvaluate(e,o,a,u){if(e.value===void 0)return new v(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){const d=e.expression.evaluate(o,null,{},a,u),m=e.property.specification.type==="resolvedImage"&&typeof d!="string"?d.name:d,y=this._calculate(m,m,m,o);return new v(this,{kind:"constant",value:y},o)}if(e.expression.kind==="camera"){const d=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new v(this,{kind:"constant",value:d},o)}return new v(this,e.expression,o)}evaluate(e,o,a,u,d,m){if(e.kind==="source"){const y=e.evaluate(o,a,u,d,m);return this._calculate(y,y,y,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},a,u),e.evaluate({zoom:Math.floor(o.zoom)},a,u),e.evaluate({zoom:Math.floor(o.zoom)+1},a,u),o):e.value}_calculate(e,o,a,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o,other:a}:{from:a,to:o,other:e}}interpolate(e){return e}}class z{constructor(e){this.specification=e}possiblyEvaluate(e,o,a,u){if(e.value!==void 0){if(e.expression.kind==="constant"){const d=e.expression.evaluate(o,null,{},a,u);return this._calculate(d,d,d,o)}return this._calculate(e.expression.evaluate(new Ii(Math.floor(o.zoom-1),o)),e.expression.evaluate(new Ii(Math.floor(o.zoom),o)),e.expression.evaluate(new Ii(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,a,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:a,to:o}}interpolate(e){return e}}class N{constructor(e){this.specification=e}possiblyEvaluate(e,o,a,u){return!!e.expression.evaluate(o,null,{},a,u)}interpolate(){return!1}}class U{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const a=e[o];a.specification.overridable&&this.overridableProperties.push(o);const u=this.defaultPropertyValues[o]=new _u(a,void 0),d=this.defaultTransitionablePropertyValues[o]=new sc(a);this.defaultTransitioningPropertyValues[o]=d.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=u.possiblyEvaluate({})}}}function X(r,e){return 256*(r=Pe(Math.floor(r),0,255))+Pe(Math.floor(e),0,255)}Bt(A,"DataDrivenProperty"),Bt(E,"DataConstantProperty"),Bt(L,"CrossFadedDataDrivenProperty"),Bt(z,"CrossFadedProperty"),Bt(N,"ColorRampProperty");const ne={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Y{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class W{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function fe(r,e=1){let o=0,a=0;return{members:r.map(u=>{const d=ne[u.type].BYTES_PER_ELEMENT,m=o=ae(o,Math.max(e,d)),y=u.components||1;return a=Math.max(a,d),o+=d*y,{name:u.name,type:u.type,components:y,offset:m}}),size:ae(o,Math.max(a,e)),alignment:e}}function ae(r,e){return Math.ceil(r/e)*e}class ue extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,o)}emplace(e,o,a){const u=2*e;return this.int16[u+0]=o,this.int16[u+1]=a,e}}ue.prototype.bytesPerElement=4,Bt(ue,"StructArrayLayout2i4");class he extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,a)}emplace(e,o,a,u){const d=3*e;return this.int16[d+0]=o,this.int16[d+1]=a,this.int16[d+2]=u,e}}he.prototype.bytesPerElement=6,Bt(he,"StructArrayLayout3i6");class ye extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,a,u)}emplace(e,o,a,u,d){const m=4*e;return this.int16[m+0]=o,this.int16[m+1]=a,this.int16[m+2]=u,this.int16[m+3]=d,e}}ye.prototype.bytesPerElement=8,Bt(ye,"StructArrayLayout4i8");class ce extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,a,u,d,m,y)}emplace(e,o,a,u,d,m,y,b){const T=6*e,I=12*e,M=3*e;return this.int16[T+0]=o,this.int16[T+1]=a,this.uint8[I+4]=u,this.uint8[I+5]=d,this.uint8[I+6]=m,this.uint8[I+7]=y,this.float32[M+2]=b,e}}ce.prototype.bytesPerElement=12,Bt(ce,"StructArrayLayout2i4ub1f12");class we extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,a,u)}emplace(e,o,a,u,d){const m=4*e;return this.float32[m+0]=o,this.float32[m+1]=a,this.float32[m+2]=u,this.float32[m+3]=d,e}}we.prototype.bytesPerElement=16,Bt(we,"StructArrayLayout4f16");class Ve extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b,T,I){const M=this.length;return this.resize(M+1),this.emplace(M,e,o,a,u,d,m,y,b,T,I)}emplace(e,o,a,u,d,m,y,b,T,I,M){const P=10*e;return this.uint16[P+0]=o,this.uint16[P+1]=a,this.uint16[P+2]=u,this.uint16[P+3]=d,this.uint16[P+4]=m,this.uint16[P+5]=y,this.uint16[P+6]=b,this.uint16[P+7]=T,this.uint16[P+8]=I,this.uint16[P+9]=M,e}}Ve.prototype.bytesPerElement=20,Bt(Ve,"StructArrayLayout10ui20");class tt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,e,o,a,u,d,m,y,b)}emplace(e,o,a,u,d,m,y,b,T){const I=8*e;return this.uint16[I+0]=o,this.uint16[I+1]=a,this.uint16[I+2]=u,this.uint16[I+3]=d,this.uint16[I+4]=m,this.uint16[I+5]=y,this.uint16[I+6]=b,this.uint16[I+7]=T,e}}tt.prototype.bytesPerElement=16,Bt(tt,"StructArrayLayout8ui16");class ut extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,a,u,d,m)}emplace(e,o,a,u,d,m,y){const b=6*e;return this.int16[b+0]=o,this.int16[b+1]=a,this.int16[b+2]=u,this.int16[b+3]=d,this.int16[b+4]=m,this.int16[b+5]=y,e}}ut.prototype.bytesPerElement=12,Bt(ut,"StructArrayLayout6i12");class st extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q){const le=this.length;return this.resize(le+1),this.emplace(le,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q)}emplace(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le){const xe=16*e;return this.int16[xe+0]=o,this.int16[xe+1]=a,this.int16[xe+2]=u,this.int16[xe+3]=d,this.uint16[xe+4]=m,this.uint16[xe+5]=y,this.uint16[xe+6]=b,this.uint16[xe+7]=T,this.int16[xe+8]=I,this.int16[xe+9]=M,this.int16[xe+10]=P,this.int16[xe+11]=B,this.int16[xe+12]=j,this.int16[xe+13]=q,this.int16[xe+14]=Q,this.int16[xe+15]=le,e}}st.prototype.bytesPerElement=32,Bt(st,"StructArrayLayout4i4ui4i4i32");class Dt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,a)}emplace(e,o,a,u){const d=3*e;return this.float32[d+0]=o,this.float32[d+1]=a,this.float32[d+2]=u,e}}Dt.prototype.bytesPerElement=12,Bt(Dt,"StructArrayLayout3f12");class Ge extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}Ge.prototype.bytesPerElement=4,Bt(Ge,"StructArrayLayout1ul4");class Ot extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b,T,I,M,P,B){const j=this.length;return this.resize(j+1),this.emplace(j,e,o,a,u,d,m,y,b,T,I,M,P,B)}emplace(e,o,a,u,d,m,y,b,T,I,M,P,B,j){const q=20*e,Q=10*e;return this.int16[q+0]=o,this.int16[q+1]=a,this.int16[q+2]=u,this.int16[q+3]=d,this.int16[q+4]=m,this.float32[Q+3]=y,this.float32[Q+4]=b,this.float32[Q+5]=T,this.float32[Q+6]=I,this.int16[q+14]=M,this.uint32[Q+8]=P,this.uint16[q+18]=B,this.uint16[q+19]=j,e}}Ot.prototype.bytesPerElement=40,Bt(Ot,"StructArrayLayout5i4f1i1ul2ui40");class Mt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,a,u,d,m,y)}emplace(e,o,a,u,d,m,y,b){const T=8*e;return this.int16[T+0]=o,this.int16[T+1]=a,this.int16[T+2]=u,this.int16[T+4]=d,this.int16[T+5]=m,this.int16[T+6]=y,this.int16[T+7]=b,e}}Mt.prototype.bytesPerElement=16,Bt(Mt,"StructArrayLayout3i2i2i16");class nn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,a,u,d)}emplace(e,o,a,u,d,m){const y=4*e,b=8*e;return this.float32[y+0]=o,this.float32[y+1]=a,this.float32[y+2]=u,this.int16[b+6]=d,this.int16[b+7]=m,e}}nn.prototype.bytesPerElement=16,Bt(nn,"StructArrayLayout2f1f2i16");class ft extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,a,u)}emplace(e,o,a,u,d){const m=12*e,y=3*e;return this.uint8[m+0]=o,this.uint8[m+1]=a,this.float32[y+1]=u,this.float32[y+2]=d,e}}ft.prototype.bytesPerElement=12,Bt(ft,"StructArrayLayout2ub2f12");class Jt extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,a)}emplace(e,o,a,u){const d=3*e;return this.uint16[d+0]=o,this.uint16[d+1]=a,this.uint16[d+2]=u,e}}Jt.prototype.bytesPerElement=6,Bt(Jt,"StructArrayLayout3ui6");class yn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze){const Re=this.length;return this.resize(Re+1),this.emplace(Re,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze)}emplace(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze,Re){const it=30*e,at=15*e,vt=60*e;return this.int16[it+0]=o,this.int16[it+1]=a,this.int16[it+2]=u,this.float32[at+2]=d,this.float32[at+3]=m,this.uint16[it+8]=y,this.uint16[it+9]=b,this.uint32[at+5]=T,this.uint32[at+6]=I,this.uint32[at+7]=M,this.uint16[it+16]=P,this.uint16[it+17]=B,this.uint16[it+18]=j,this.float32[at+10]=q,this.float32[at+11]=Q,this.uint8[vt+48]=le,this.uint8[vt+49]=xe,this.uint8[vt+50]=Me,this.uint32[at+13]=Le,this.int16[it+28]=ze,this.uint8[vt+58]=Re,e}}yn.prototype.bytesPerElement=60,Bt(yn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class en extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze,Re,it,at,vt,xt,et,dt,Tt,Nt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze,Re,it,at,vt,xt,et,dt,Tt,Nt)}emplace(e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q,le,xe,Me,Le,ze,Re,it,at,vt,xt,et,dt,Tt,Nt,Lt){const Rt=38*e,In=19*e;return this.int16[Rt+0]=o,this.int16[Rt+1]=a,this.int16[Rt+2]=u,this.float32[In+2]=d,this.float32[In+3]=m,this.int16[Rt+8]=y,this.int16[Rt+9]=b,this.int16[Rt+10]=T,this.int16[Rt+11]=I,this.int16[Rt+12]=M,this.int16[Rt+13]=P,this.uint16[Rt+14]=B,this.uint16[Rt+15]=j,this.uint16[Rt+16]=q,this.uint16[Rt+17]=Q,this.uint16[Rt+18]=le,this.uint16[Rt+19]=xe,this.uint16[Rt+20]=Me,this.uint16[Rt+21]=Le,this.uint16[Rt+22]=ze,this.uint16[Rt+23]=Re,this.uint16[Rt+24]=it,this.uint16[Rt+25]=at,this.uint16[Rt+26]=vt,this.uint16[Rt+27]=xt,this.uint16[Rt+28]=et,this.uint32[In+15]=dt,this.float32[In+16]=Tt,this.float32[In+17]=Nt,this.float32[In+18]=Lt,e}}en.prototype.bytesPerElement=76,Bt(en,"StructArrayLayout3i2f6i15ui1ul3f76");class tn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}tn.prototype.bytesPerElement=4,Bt(tn,"StructArrayLayout1f4");class xn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,a,u,d,m,y)}emplace(e,o,a,u,d,m,y,b){const T=7*e;return this.float32[T+0]=o,this.float32[T+1]=a,this.float32[T+2]=u,this.float32[T+3]=d,this.float32[T+4]=m,this.float32[T+5]=y,this.float32[T+6]=b,e}}xn.prototype.bytesPerElement=28,Bt(xn,"StructArrayLayout7f28");class Bn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,a,u,d)}emplace(e,o,a,u,d,m){const y=5*e;return this.float32[y+0]=o,this.float32[y+1]=a,this.float32[y+2]=u,this.float32[y+3]=d,this.float32[y+4]=m,e}}Bn.prototype.bytesPerElement=20,Bt(Bn,"StructArrayLayout5f20");class _n extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,a,u)}emplace(e,o,a,u,d){const m=6*e;return this.uint32[3*e+0]=o,this.uint16[m+2]=a,this.uint16[m+3]=u,this.uint16[m+4]=d,e}}_n.prototype.bytesPerElement=12,Bt(_n,"StructArrayLayout1ul3ui12");class wn extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,o)}emplace(e,o,a){const u=2*e;return this.uint16[u+0]=o,this.uint16[u+1]=a,e}}wn.prototype.bytesPerElement=4,Bt(wn,"StructArrayLayout2ui4");class ii extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}ii.prototype.bytesPerElement=2,Bt(ii,"StructArrayLayout1ui2");class Bi extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,o)}emplace(e,o,a){const u=2*e;return this.float32[u+0]=o,this.float32[u+1]=a,e}}Bi.prototype.bytesPerElement=8,Bt(Bi,"StructArrayLayout2f8");class Br extends W{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,a,u,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,a,u,d,m,y)}emplace(e,o,a,u,d,m,y,b){const T=8*e,I=4*e;return this.int16[T+0]=o,this.int16[T+1]=a,this.int16[T+2]=u,this.int16[T+3]=d,this.int16[T+4]=m,this.int16[T+5]=y,this.float32[I+3]=b,e}}Br.prototype.bytesPerElement=16,Bt(Br,"StructArrayLayout6i1f16");class Fr extends Y{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Fr.prototype.size=12;class xo extends ut{get(e){return new Fr(this,e)}}Bt(xo,"FillExtrusionExtArray");class os extends Y{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}os.prototype.size=40;class Ws extends Ot{get(e){return new os(this,e)}}Bt(Ws,"CollisionBoxArray");class Ta extends Y{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Ta.prototype.size=60;class qs extends yn{get(e){return new Ta(this,e)}}Bt(qs,"PlacedSymbolArray");class Vi extends Y{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Vi.prototype.size=76;class Zi extends en{get(e){return new Vi(this,e)}}Bt(Zi,"SymbolInstanceArray");class ui extends tn{getoffsetX(e){return this.float32[1*e+0]}}Bt(ui,"GlyphOffsetArray");class rr extends he{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Bt(rr,"SymbolLineVertexArray");class bo extends Y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}bo.prototype.size=12;class Fi extends _n{get(e){return new bo(this,e)}}Bt(Fi,"FeatureIndexArray");class No extends Y{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}No.prototype.size=4;class gu extends wn{get(e){return new No(this,e)}}Bt(gu,"FillExtrusionCentroidArray");class wo extends Y{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}get a_scale(){return this._structArray.float32[this._pos4+3]}}wo.prototype.size=16;class ll extends Br{get(e){return new wo(this,e)}}Bt(ll,"CircleGlobeExtArray");const Bp=fe([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),id=fe([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var ac=Oi(function(r){r.exports=function(e,o){var a,u,d,m,y,b,T,I;for(u=e.length-(a=3&e.length),d=o,y=3432918353,b=461845907,I=0;I<u;)T=255&e.charCodeAt(I)|(255&e.charCodeAt(++I))<<8|(255&e.charCodeAt(++I))<<16|(255&e.charCodeAt(++I))<<24,++I,d=27492+(65535&(m=5*(65535&(d=(d^=T=(65535&(T=(T=(65535&T)*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&e.charCodeAt(I+2))<<16;case 2:T^=(255&e.charCodeAt(I+1))<<8;case 1:d^=T=(65535&(T=(T=(65535&(T^=255&e.charCodeAt(I)))*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295}return d^=e.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),rg=Oi(function(r){r.exports=function(e,o){for(var a,u=e.length,d=o^u,m=0;u>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(m)|(255&e.charCodeAt(++m))<<8|(255&e.charCodeAt(++m))<<16|(255&e.charCodeAt(++m))<<24))+((1540483477*(a>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++m;switch(u){case 3:d^=(255&e.charCodeAt(m+2))<<16;case 2:d^=(255&e.charCodeAt(m+1))<<8;case 1:d=1540483477*(65535&(d^=255&e.charCodeAt(m)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),Aa=ac,rd=rg;Aa.murmur3=ac,Aa.murmur2=rd;class Fp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,a,u){this.ids.push(Ax(e)),this.positions.push(o,a,u)}getPositions(e){const o=Ax(e);let a=0,u=this.ids.length-1;for(;a<u;){const m=a+u>>1;this.ids[m]>=o?u=m:a=m+1}const d=[];for(;this.ids[a]===o;)d.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return d}static serialize(e,o){const a=new Float64Array(e.ids),u=new Uint32Array(e.positions);return og(a,u,0,a.length-1),o&&o.push(a.buffer,u.buffer),{ids:a,positions:u}}static deserialize(e){const o=new Fp;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function Ax(r){const e=+r;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Aa(String(r))}function og(r,e,o,a){for(;o<a;){const u=r[o+a>>1];let d=o-1,m=a+1;for(;;){do d++;while(r[d]<u);do m--;while(r[m]>u);if(d>=m)break;$p(r,d,m),$p(e,3*d,3*m),$p(e,3*d+1,3*m+1),$p(e,3*d+2,3*m+2)}m-o<a-m?(og(r,e,o,m),o=m+1):(og(r,e,m+1,a),a=m)}}function $p(r,e,o){const a=r[e];r[e]=r[o],r[o]=a}Bt(Fp,"FeaturePositionMap");class cl{constructor(e,o){this.gl=e.gl,this.location=o}}class Up extends cl{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Sx extends cl{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Cx extends cl{constructor(e,o){super(e,o),this.current=Rn.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const UC=new Float32Array(16),jC=new Float32Array(9),VC=new Float32Array(4);function sg(r){return[X(255*r.r,255*r.g),X(255*r.b,255*r.a)]}class od{constructor(e,o,a){this.value=e,this.uniformNames=o.map(u=>`u_${u}`),this.type=a}setUniform(e,o,a){e.set(a.constantOr(this.value))}getBinding(e,o,a){return this.type==="color"?new Cx(e,o):new Up(e,o)}}class Fh{constructor(e,o){this.uniformNames=o.map(a=>`u_${a}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=o.tl.concat(o.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,o,a,u){const d=u==="u_pattern_to"||u==="u_dash_to"?this.patternTo:u==="u_pattern_from"||u==="u_dash_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;d&&e.set(d)}getBinding(e,o,a){return a==="u_pattern_from"||a==="u_pattern_to"||a==="u_dash_from"||a==="u_dash_to"?new Sx(e,o):new Up(e,o)}}class ul{constructor(e,o,a,u){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=o.map(d=>({name:`a_${d}`,type:"Float32",components:a==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,o,a,u,d,m){const y=this.paintVertexArray.length,b=this.expression.evaluate(new Ii(0),o,{},d,u,m);this.paintVertexArray.resize(e),this._setPaintValue(y,e,b)}updatePaintArray(e,o,a,u,d){const m=this.expression.evaluate({zoom:0},a,u,void 0,d);this._setPaintValue(e,o,m)}_setPaintValue(e,o,a){if(this.type==="color"){const u=sg(a);for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,u[0],u[1])}else{for(let u=e;u<o;u++)this.paintVertexArray.emplace(u,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zs{constructor(e,o,a,u,d,m){this.expression=e,this.uniformNames=o.map(y=>`u_${y}_t`),this.type=a,this.useIntegerZoom=u,this.zoom=d,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:a==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,o,a,u,d,m){const y=this.expression.evaluate(new Ii(this.zoom),o,{},d,u,m),b=this.expression.evaluate(new Ii(this.zoom+1),o,{},d,u,m),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,y,b)}updatePaintArray(e,o,a,u,d){const m=this.expression.evaluate({zoom:this.zoom},a,u,void 0,d),y=this.expression.evaluate({zoom:this.zoom+1},a,u,void 0,d);this._setPaintValue(e,o,m,y)}_setPaintValue(e,o,a,u){if(this.type==="color"){const d=sg(a),m=sg(u);for(let y=e;y<o;y++)this.paintVertexArray.emplace(y,d[0],d[1],m[0],m[1])}else{for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,a,u);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const a=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,u=Pe(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);e.set(u)}getBinding(e,o,a){return new Up(e,o)}}class lc{constructor(e,o,a,u,d,m,y){this.expression=e,this.type=a,this.useIntegerZoom=u,this.zoom=d,this.layerId=y,this.paintVertexAttributes=(a==="array"?id:Bp).members;for(let b=0;b<o.length;++b);this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}populatePaintArray(e,o,a){const u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,o.patterns&&o.patterns[this.layerId],a)}updatePaintArray(e,o,a,u,d,m){this._setPaintValues(e,o,a.patterns&&a.patterns[this.layerId],m)}_setPaintValues(e,o,a,u){if(!u||!a)return;const{min:d,mid:m,max:y}=a,b=u[d],T=u[m],I=u[y];if(b&&T&&I)for(let M=e;M<o;M++)this._setPaintValue(this.zoomInPaintVertexArray,M,T,b),this._setPaintValue(this.zoomOutPaintVertexArray,M,T,I)}_setPaintValue(e,o,a,u){e.emplace(o,a.tl[0],a.tl[1],a.br[0],a.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],a.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cc{constructor(e,o,a=()=>!0){this.binders={},this._buffers=[];const u=[];for(const d in e.paint._values){if(!a(d))continue;const m=e.paint.get(d);if(!(m instanceof v&&pa(m.property.specification)))continue;const y=HC(d,e.type),b=m.value,T=m.property.specification.type,I=m.property.useIntegerZoom,M=m.property.specification["property-type"],P=M==="cross-faded"||M==="cross-faded-data-driven",B=String(d)==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(b.kind!=="constant"||B)if(b.kind==="source"||B||P){const j=Ix(d,T,"source");this.binders[d]=P?new lc(b,y,T,I,o,j,e.id):new ul(b,y,T,j),u.push(`/a_${d}`)}else{const j=Ix(d,T,"composite");this.binders[d]=new Zs(b,y,T,I,o,j),u.push(`/z_${d}`)}else this.binders[d]=P?new Fh(b.value,y):new od(b.value,y,T),u.push(`/u_${d}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof ul||o instanceof Zs?o.maxValue:0}populatePaintArrays(e,o,a,u,d,m){for(const y in this.binders){const b=this.binders[y];(b instanceof ul||b instanceof Zs||b instanceof lc)&&b.populatePaintArray(e,o,a,u,d,m)}}setConstantPatternPositions(e,o){for(const a in this.binders){const u=this.binders[a];u instanceof Fh&&u.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,a,u,d,m){let y=!1;for(const b in e){const T=o.getPositions(b);for(const I of T){const M=a.feature(I.index);for(const P in this.binders){const B=this.binders[P];if((B instanceof ul||B instanceof Zs||B instanceof lc)&&B.expression.isStateDependent===!0){const j=u.paint.get(P);B.expression=j.value,B.updatePaintArray(I.start,I.end,M,e[b],d,m),y=!0}}}}return y}defines(){const e=[];for(const o in this.binders){const a=this.binders[o];(a instanceof od||a instanceof Fh)&&e.push(...a.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const a=this.binders[o];if(a instanceof ul||a instanceof Zs||a instanceof lc)for(let u=0;u<a.paintVertexAttributes.length;u++)e.push(a.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const a=this.binders[o];if(a instanceof od||a instanceof Fh||a instanceof Zs)for(const u of a.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const a=[];for(const u in this.binders){const d=this.binders[u];if(d instanceof od||d instanceof Fh||d instanceof Zs){for(const m of d.uniformNames)if(o[m]){const y=d.getBinding(e,o[m],m);a.push({name:m,property:u,binding:y})}}}return a}setUniforms(e,o,a,u){for(const{name:d,property:m,binding:y}of o)this.binders[m].setUniform(y,u,a.get(m),d)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const a=this.binders[o];if(e&&a instanceof lc){const u=e.fromScale===2?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(a instanceof ul||a instanceof Zs)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(e){for(const o in this.binders){const a=this.binders[o];(a instanceof ul||a instanceof Zs||a instanceof lc)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof ul||o instanceof Zs||o instanceof lc)&&o.destroy()}}}class yu{constructor(e,o,a=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new cc(u,o,a);this.needsUpload=!1,this._featureMap=new Fp,this._bufferOffset=0}populatePaintArrays(e,o,a,u,d,m,y){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(e,o,u,d,m,y);o.id!==void 0&&this._featureMap.add(o.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,a,u,d){for(const m of a)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,o,m,u,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const GC={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function HC(r,e){return GC[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}const WC={"line-pattern":{source:Ve,composite:Ve},"fill-pattern":{source:Ve,composite:Ve},"fill-extrusion-pattern":{source:Ve,composite:Ve},"line-dasharray":{source:tt,composite:tt}},qC={color:{source:Bi,composite:we},number:{source:tn,composite:Bi}};function Ix(r,e,o){const a=WC[r];return a&&a[o]||qC[e][o]}Bt(od,"ConstantBinder"),Bt(Fh,"CrossFadedConstantBinder"),Bt(ul,"SourceExpressionBinder"),Bt(lc,"CrossFadedCompositeBinder"),Bt(Zs,"CompositeExpressionBinder"),Bt(cc,"ProgramConfiguration",{omit:["_buffers"]}),Bt(yu,"ProgramConfigurationSet");const jp="-transition";class Xs extends gn{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new p(o.layout)),o.paint)){this._transitionablePaint=new f(o.paint);for(const a in e.paint)this.setPaintProperty(a,e.paint[a],{validate:!1});for(const a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new x(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,a={}){o!=null&&this._validate(ci,`layers.${this.id}.layout.${e}`,e,o,a)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return ht(e,jp)?this._transitionablePaint.getTransition(e.slice(0,-jp.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,a={}){if(o!=null&&this._validate(li,`layers.${this.id}.paint.${e}`,e,o,a))return!1;if(ht(e,jp))return this._transitionablePaint.setTransition(e.slice(0,-jp.length),o||void 0),!1;{const u=this._transitionablePaint._values[e],d=u.property.specification["property-type"]==="cross-faded-data-driven",m=u.value.isDataDriven(),y=u.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const b=this._transitionablePaint._values[e].value;return b.isDataDriven()||m||d||this._handleOverridablePaintPropertyUpdate(e,y,b)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,o,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ut(e,(o,a)=>!(o===void 0||a==="layout"&&!Object.keys(o).length||a==="paint"&&!Object.keys(o).length))}_validate(e,o,a,u,d={}){return(!d||d.validate!==!1)&&_i(this,e.call(ni,{key:o,layerType:this.type,objectKey:a,value:u,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof v&&pa(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=rs(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ZC=fe([{name:"a_pos",components:2,type:"Int16"}],4),XC=fe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"},{name:"a_scale",components:1,type:"Float32"}]);class Xi{constructor(e=[]){this.segments=e}prepareSegment(e,o,a,u){let d=this.segments[this.segments.length-1];return e>Xi.MAX_VERTEX_ARRAY_LENGTH&&Gt(`Max vertices per segment is ${Xi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!d||d.vertexLength+e>Xi.MAX_VERTEX_ARRAY_LENGTH||d.sortKey!==u)&&(d={vertexOffset:o.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},u!==void 0&&(d.sortKey=u),this.segments.push(d)),d}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,a,u){return new Xi([{vertexOffset:e,primitiveOffset:o,vertexLength:a,primitiveLength:u,vaos:{},sortKey:0}])}}Xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt(Xi,"SegmentVector");var On=8192;class uc{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof xi?new xi(e.lng,e.lat):xi.convert(e),this}setSouthWest(e){return this._sw=e instanceof xi?new xi(e.lng,e.lat):xi.convert(e),this}extend(e){const o=this._sw,a=this._ne;let u,d;if(e instanceof xi)u=e,d=e;else{if(!(e instanceof uc))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(uc.convert(e)):this.extend(xi.convert(e)):this;if(u=e._sw,d=e._ne,!u||!d)return this}return o||a?(o.lng=Math.min(u.lng,o.lng),o.lat=Math.min(u.lat,o.lat),a.lng=Math.max(d.lng,a.lng),a.lat=Math.max(d.lat,a.lat)):(this._sw=new xi(u.lng,u.lat),this._ne=new xi(d.lng,d.lat)),this}getCenter(){return new xi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new xi(this.getWest(),this.getNorth())}getSouthEast(){return new xi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:a}=xi.convert(e);let u=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&u}static convert(e){return!e||e instanceof uc?e:new uc(e)}}const ag=63710088e-1;class xi{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xi(wt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,a=this.lat*o,u=e.lat*o,d=Math.sin(a)*Math.sin(u)+Math.cos(a)*Math.cos(u)*Math.cos((e.lng-this.lng)*o);return ag*Math.acos(Math.min(d,1))}toBounds(e=0){const o=360*e/40075017,a=o/Math.cos(Math.PI/180*this.lat);return new uc(new xi(this.lng-a,this.lat-o),new xi(this.lng+a,this.lat+o))}static convert(e){if(e instanceof xi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new xi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new xi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mx=2*Math.PI*ag;function lg(r){return Mx*Math.cos(r*Math.PI/180)}function sd(r){return(180+r)/360}function $h(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Uh(r,e){return r/lg(e)}function Ms(r){return 360*r-180}function $r(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function kx(r,e){return r*lg($r(e))}const Sa=85.051129;class Vp{constructor(e,o,a=0){this.x=+e,this.y=+o,this.z=+a}static fromLngLat(e,o=0){const a=xi.convert(e);return new Vp(sd(a.lng),$h(a.lat),Uh(o,a.lat))}toLngLat(){return new xi(Ms(this.x),$r(this.y))}toAltitude(){return kx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Mx*(e=$r(this.y),1/Math.cos(e*Math.PI/180));var e}}function cg(r,e,o,a,u,d,m,y,b){const T=(e+a)/2,I=(o+u)/2,M=new D(T,I);y(M),function(P,B,j,q,Q,le){const xe=j-Q,Me=q-le;return Math.abs((q-B)*xe-(j-P)*Me)/Math.hypot(xe,Me)}(M.x,M.y,d.x,d.y,m.x,m.y)>=b?(cg(r,e,o,T,I,d,M,y,b),cg(r,T,I,a,u,M,m,y,b)):r.push(m)}function YC(r,e,o){let a=r[0],u=a.x,d=a.y;e(a);const m=[a];for(let y=1;y<r.length;y++){const b=r[y],{x:T,y:I}=b;e(b),cg(m,u,d,T,I,a,b,e,o),u=T,d=I,a=b}return m}const ug=Math.pow(2,14)-1,Lx=-ug-1;function KC(r,e){const o=Math.round(r.x*e),a=Math.round(r.y*e);return r.x=Pe(o,Lx,ug),r.y=Pe(a,Lx,ug),(o<r.x||o>r.x+1||a<r.y||a>r.y+1)&&Gt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function hl(r,e,o){const a=r.loadGeometry(),u=r.extent,d=On/u;if(e&&o&&o.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:y,x:b,y:T,projection:I}=o,M=P=>{const B=Ms((e.x+P.x/u)/m),j=$r((e.y+P.y/u)/m),q=I.project(B,j);P.x=(q.x*y-b)*u,P.y=(q.y*y-T)*u};for(let P=0;P<a.length;P++)if(r.type!==1)a[P]=YC(a[P],M,1);else{const B=[];for(const j of a[P])j.x<0||j.x>=u||j.y<0||j.y>=u||(M(j),B.push(j));a[P]=B}}for(const m of a)for(const y of m)KC(y,d);return a}function vu(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?hl(r):[]}}function Gp(r,e,o,a,u){r.emplaceBack(2*e+(a+1)/2,2*o+(u+1)/2)}function Hp(r,e,o,a){const u=16384;r.emplaceBack(e.x,e.y,e.z,o[0]*u,o[1]*u,o[2]*u,a)}class hg{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ue,this.indexArray=new Jt,this.segments=new Xi,this.programConfigurations=new yu(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,a,u){const d=this.layers[0],m=[];let y=null;d.type==="circle"&&(y=d.layout.get("circle-sort-key"));for(const{feature:T,id:I,index:M,sourceLayerIndex:P}of e){const B=this.layers[0]._featureFilter.needGeometry,j=vu(T,B);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),j,a))continue;const q=y?y.evaluate(j,{},a):void 0,Q={id:I,properties:T.properties,type:T.type,sourceLayerIndex:P,index:M,geometry:B?j.geometry:hl(T,a,u),patterns:{},sortKey:q};m.push(Q)}y&&m.sort((T,I)=>T.sortKey-I.sortKey);let b=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new ll,b=u.projection);for(const T of m){const{geometry:I,index:M,sourceLayerIndex:P}=T,B=e[M].feature;this.addFeature(T,I,M,o.availableImages,a,b),o.featureIndex.insert(B,I,M,P,this.index)}}update(e,o,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ZC.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,XC.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,o,a,u,d,m){for(const y of o)for(const b of y){const T=b.x,I=b.y;if(T<0||T>=On||I<0||I>=On)continue;if(m){const B=m.projectTilePoint(T,I,d),j=m.upVector(d,T,I),q=$r((I/On+d.y)/(1<<d.z)),Q=m.pixelsPerMeter(q,1)/Uh(1,q),le=this.globeExtVertexArray;Hp(le,B,j,Q),Hp(le,B,j,Q),Hp(le,B,j,Q),Hp(le,B,j,Q)}const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),P=M.vertexLength;Gp(this.layoutVertexArray,T,I,-1,-1),Gp(this.layoutVertexArray,T,I,1,-1),Gp(this.layoutVertexArray,T,I,1,1),Gp(this.layoutVertexArray,T,I,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},u,d)}}function Px(r,e){for(let o=0;o<r.length;o++)if(jh(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(jh(r,e[o]))return!0;return!!fg(r,e)}function JC(r,e,o){return!!jh(r,e)||!!dg(e,r,o)}function Dx(r,e){if(r.length===1)return zx(e,r[0]);for(let o=0;o<e.length;o++){const a=e[o];for(let u=0;u<a.length;u++)if(jh(r,a[u]))return!0}for(let o=0;o<r.length;o++)if(zx(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(fg(r,e[o]))return!0;return!1}function QC(r,e,o){if(r.length>1){if(fg(r,e))return!0;for(let a=0;a<e.length;a++)if(dg(e[a],r,o))return!0}for(let a=0;a<r.length;a++)if(dg(r[a],e,o))return!0;return!1}function fg(r,e){if(r.length===0||e.length===0)return!1;for(let o=0;o<r.length-1;o++){const a=r[o],u=r[o+1];for(let d=0;d<e.length-1;d++)if(eI(a,u,e[d],e[d+1]))return!0}return!1}function eI(r,e,o,a){return dn(r,o,a)!==dn(e,o,a)&&dn(r,e,o)!==dn(r,e,a)}function dg(r,e,o){const a=o*o;if(e.length===1)return r.distSqr(e[0])<a;for(let u=1;u<e.length;u++)if(Ox(r,e[u-1],e[u])<a)return!0;return!1}function Ox(r,e,o){const a=e.distSqr(o);if(a===0)return r.distSqr(e);const u=((r.x-e.x)*(o.x-e.x)+(r.y-e.y)*(o.y-e.y))/a;return r.distSqr(u<0?e:u>1?o:o.sub(e)._mult(u)._add(e))}function zx(r,e){let o,a,u,d=!1;for(let m=0;m<r.length;m++){o=r[m];for(let y=0,b=o.length-1;y<o.length;b=y++)a=o[y],u=o[b],a.y>e.y!=u.y>e.y&&e.x<(u.x-a.x)*(e.y-a.y)/(u.y-a.y)+a.x&&(d=!d)}return d}function jh(r,e){let o=!1;for(let a=0,u=r.length-1;a<r.length;u=a++){const d=r[a],m=r[u];d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(o=!o)}return o}function Rx(r,e,o,a,u){for(const m of r)if(e<=m.x&&o<=m.y&&a>=m.x&&u>=m.y)return!0;const d=[new D(e,o),new D(e,u),new D(a,u),new D(a,o)];if(r.length>2){for(const m of d)if(jh(r,m))return!0}for(let m=0;m<r.length-1;m++)if(tI(r[m],r[m+1],d))return!0;return!1}function tI(r,e,o){const a=o[0],u=o[2];if(r.x<a.x&&e.x<a.x||r.x>u.x&&e.x>u.x||r.y<a.y&&e.y<a.y||r.y>u.y&&e.y>u.y)return!1;const d=dn(r,e,o[0]);return d!==dn(r,e,o[1])||d!==dn(r,e,o[2])||d!==dn(r,e,o[3])}function Vh(r,e,o){const a=e.paint.get(r).value;return a.kind==="constant"?a.value:o.programConfigurations.get(e.id).getMaxValue(r)}function Wp(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Nx(r,e,o,a,u){if(!e[0]&&!e[1])return r;const d=D.convert(e)._mult(u);o==="viewport"&&d._rotate(-a);const m=[];for(let y=0;y<r.length;y++)m.push(r[y].sub(d));return m}function Bx(r,e,o,a){const u=D.convert(r)._mult(a);return e==="viewport"&&u._rotate(-o),u}Bt(hg,"CircleBucket",{omit:["layers"]});const nI=new U({"circle-sort-key":new A(Ue.layout_circle["circle-sort-key"])});var iI={paint:new U({"circle-radius":new A(Ue.paint_circle["circle-radius"]),"circle-color":new A(Ue.paint_circle["circle-color"]),"circle-blur":new A(Ue.paint_circle["circle-blur"]),"circle-opacity":new A(Ue.paint_circle["circle-opacity"]),"circle-translate":new E(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new E(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new E(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new E(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new A(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new A(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new A(Ue.paint_circle["circle-stroke-opacity"])}),layout:nI},pg=1e-6,Bo=typeof Float32Array!="undefined"?Float32Array:Array;function Fx(){var r=new Bo(9);return Bo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Ca(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mg(r,e,o){var a=e[0],u=e[1],d=e[2],m=e[3],y=e[4],b=e[5],T=e[6],I=e[7],M=e[8],P=e[9],B=e[10],j=e[11],q=e[12],Q=e[13],le=e[14],xe=e[15],Me=o[0],Le=o[1],ze=o[2],Re=o[3];return r[0]=Me*a+Le*y+ze*M+Re*q,r[1]=Me*u+Le*b+ze*P+Re*Q,r[2]=Me*d+Le*T+ze*B+Re*le,r[3]=Me*m+Le*I+ze*j+Re*xe,r[4]=(Me=o[4])*a+(Le=o[5])*y+(ze=o[6])*M+(Re=o[7])*q,r[5]=Me*u+Le*b+ze*P+Re*Q,r[6]=Me*d+Le*T+ze*B+Re*le,r[7]=Me*m+Le*I+ze*j+Re*xe,r[8]=(Me=o[8])*a+(Le=o[9])*y+(ze=o[10])*M+(Re=o[11])*q,r[9]=Me*u+Le*b+ze*P+Re*Q,r[10]=Me*d+Le*T+ze*B+Re*le,r[11]=Me*m+Le*I+ze*j+Re*xe,r[12]=(Me=o[12])*a+(Le=o[13])*y+(ze=o[14])*M+(Re=o[15])*q,r[13]=Me*u+Le*b+ze*P+Re*Q,r[14]=Me*d+Le*T+ze*B+Re*le,r[15]=Me*m+Le*I+ze*j+Re*xe,r}function xu(r,e,o){var a,u,d,m,y,b,T,I,M,P,B,j,q=o[0],Q=o[1],le=o[2];return e===r?(r[12]=e[0]*q+e[4]*Q+e[8]*le+e[12],r[13]=e[1]*q+e[5]*Q+e[9]*le+e[13],r[14]=e[2]*q+e[6]*Q+e[10]*le+e[14],r[15]=e[3]*q+e[7]*Q+e[11]*le+e[15]):(u=e[1],d=e[2],m=e[3],y=e[4],b=e[5],T=e[6],I=e[7],M=e[8],P=e[9],B=e[10],j=e[11],r[0]=a=e[0],r[1]=u,r[2]=d,r[3]=m,r[4]=y,r[5]=b,r[6]=T,r[7]=I,r[8]=M,r[9]=P,r[10]=B,r[11]=j,r[12]=a*q+y*Q+M*le+e[12],r[13]=u*q+b*Q+P*le+e[13],r[14]=d*q+T*Q+B*le+e[14],r[15]=m*q+I*Q+j*le+e[15]),r}function hc(r,e,o){var a=o[0],u=o[1],d=o[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*u,r[5]=e[5]*u,r[6]=e[6]*u,r[7]=e[7]*u,r[8]=e[8]*d,r[9]=e[9]*d,r[10]=e[10]*d,r[11]=e[11]*d,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function _g(r,e,o){var a=Math.sin(o),u=Math.cos(o),d=e[4],m=e[5],y=e[6],b=e[7],T=e[8],I=e[9],M=e[10],P=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=d*u+T*a,r[5]=m*u+I*a,r[6]=y*u+M*a,r[7]=b*u+P*a,r[8]=T*u-d*a,r[9]=I*u-m*a,r[10]=M*u-y*a,r[11]=P*u-b*a,r}function gg(r,e,o){var a=Math.sin(o),u=Math.cos(o),d=e[0],m=e[1],y=e[2],b=e[3],T=e[8],I=e[9],M=e[10],P=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=d*u-T*a,r[1]=m*u-I*a,r[2]=y*u-M*a,r[3]=b*u-P*a,r[8]=d*a+T*u,r[9]=m*a+I*u,r[10]=y*a+M*u,r[11]=b*a+P*u,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var rI=mg;function yg(){var r=new Bo(3);return Bo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function $x(r){var e=new Bo(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function Ux(r){return Math.hypot(r[0],r[1],r[2])}function ad(r,e,o){var a=new Bo(3);return a[0]=r,a[1]=e,a[2]=o,a}function jx(r,e,o){return r[0]=e[0]+o[0],r[1]=e[1]+o[1],r[2]=e[2]+o[2],r}function Vx(r,e,o){return r[0]=e[0]-o[0],r[1]=e[1]-o[1],r[2]=e[2]-o[2],r}function Gx(r,e,o){return r[0]=e[0]*o[0],r[1]=e[1]*o[1],r[2]=e[2]*o[2],r}function vg(r,e,o){return r[0]=Math.min(e[0],o[0]),r[1]=Math.min(e[1],o[1]),r[2]=Math.min(e[2],o[2]),r}function xg(r,e,o){return r[0]=Math.max(e[0],o[0]),r[1]=Math.max(e[1],o[1]),r[2]=Math.max(e[2],o[2]),r}function ld(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r}function bg(r,e,o,a){return r[0]=e[0]+o[0]*a,r[1]=e[1]+o[1]*a,r[2]=e[2]+o[2]*a,r}function cd(r,e){var o=e[0],a=e[1],u=e[2],d=o*o+a*a+u*u;return d>0&&(d=1/Math.sqrt(d)),r[0]=e[0]*d,r[1]=e[1]*d,r[2]=e[2]*d,r}function ud(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function Hx(r,e,o){var a=e[0],u=e[1],d=e[2],m=o[0],y=o[1],b=o[2];return r[0]=u*b-d*y,r[1]=d*m-a*b,r[2]=a*y-u*m,r}function bu(r,e,o){var a=e[0],u=e[1],d=e[2],m=o[3]*a+o[7]*u+o[11]*d+o[15];return r[0]=(o[0]*a+o[4]*u+o[8]*d+o[12])/(m=m||1),r[1]=(o[1]*a+o[5]*u+o[9]*d+o[13])/m,r[2]=(o[2]*a+o[6]*u+o[10]*d+o[14])/m,r}function Wx(r,e,o){var a=o[0],u=o[1],d=o[2],m=e[0],y=e[1],b=e[2],T=u*b-d*y,I=d*m-a*b,M=a*y-u*m,P=u*M-d*I,B=d*T-a*M,j=a*I-u*T,q=2*o[3];return I*=q,M*=q,B*=2,j*=2,r[0]=m+(T*=q)+(P*=2),r[1]=y+I+B,r[2]=b+M+j,r}var hd,Gh=Vx,oI=Gx,sI=Ux;function Hh(r,e,o){var a=e[0],u=e[1],d=e[2],m=e[3];return r[0]=o[0]*a+o[4]*u+o[8]*d+o[12]*m,r[1]=o[1]*a+o[5]*u+o[9]*d+o[13]*m,r[2]=o[2]*a+o[6]*u+o[10]*d+o[14]*m,r[3]=o[3]*a+o[7]*u+o[11]*d+o[15]*m,r}function qx(){var r=new Bo(4);return Bo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Zx(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function Xx(r,e,o){o*=.5;var a=e[0],u=e[1],d=e[2],m=e[3],y=Math.sin(o),b=Math.cos(o);return r[0]=a*b+m*y,r[1]=u*b+d*y,r[2]=d*b-u*y,r[3]=m*b-a*y,r}yg(),hd=new Bo(4),Bo!=Float32Array&&(hd[0]=0,hd[1]=0,hd[2]=0,hd[3]=0),yg(),ad(1,0,0),ad(0,1,0),qx(),qx(),Fx();class wg{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,a,u){const d=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(b=>{const T=Hh([],b,e),I=1/T[3]/o*d;return function(M,P,B){return M[0]=P[0]*B[0],M[1]=P[1]*B[1],M[2]=P[2]*B[2],M[3]=P[3]*B[3],M}(T,T,[I,I,u?1/T[3]:I,I])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(b=>{const T=cd([],Hx([],Gh([],m[b[0]],m[b[1]]),Gh([],m[b[2]],m[b[1]]))),I=-ud(T,m[b[1]]);return T.concat(I)});return new wg(m,y)}}class ss{constructor(e,o){this.min=e,this.max=o,this.center=ld([],jx([],this.min,this.max),.5)}quadrant(e){const o=[e%2==0,e<2],a=$x(this.min),u=$x(this.max);for(let d=0;d<o.length;d++)a[d]=o[d]?this.min[d]:this.center[d],u[d]=o[d]?this.center[d]:this.max[d];return u[2]=this.max[2],new ss(a,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,o=this.max;return[[e[0],e[1],e[2]],[o[0],e[1],e[2]],[o[0],o[1],e[2]],[e[0],o[1],e[2]],[e[0],e[1],o[2]],[o[0],e[1],o[2]],[o[0],o[1],o[2]],[e[0],o[1],o[2]]]}intersects(e){const o=this.getCorners();let a=!0;for(let u=0;u<e.planes.length;u++){const d=e.planes[u];let m=0;for(let y=0;y<o.length;y++)m+=ud(d,o[y])+d[3]>=0;if(m===0)return 0;m!==o.length&&(a=!1)}if(a)return 2;for(let u=0;u<3;u++){let d=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let y=0;y<e.points.length;y++){const b=e.points[y][u]-this.min[u];d=Math.min(d,b),m=Math.max(m,b)}if(m<0||d>this.max[u]-this.min[u])return 0}return 1}}function Yx(r,e,o,a,u,d,m,y,b){if(d&&r.queryGeometry.isAboveHorizon)return!1;d&&(b*=r.pixelToTileUnitsFactor);for(const T of e)for(const I of T){const M=I.add(y),P=u&&o.elevation?o.elevation.exaggeration()*u.getElevationAt(M.x,M.y,!0):0,B=d?M:aI(M,P,a),j=d?r.tilespaceRays.map(Q=>cI(Q,P)):r.queryGeometry.screenGeometry,q=Hh([],[I.x,I.y,P,1],a);if(!m&&d?b*=q[3]/o.cameraToCenterDistance:m&&!d&&(b*=o.cameraToCenterDistance/q[3]),JC(j,B,b))return!0}return!1}function aI(r,e,o){const a=Hh([],[r.x,r.y,e,1],o);return new D(a[0]/a[3],a[1]/a[3])}const Kx=ad(0,0,0),lI=ad(0,0,1);function cI(r,e){const o=yg();return Kx[2]=e,r.intersectsPlane(Kx,lI,o),new D(o[0],o[1])}class Jx extends hg{}function Qx(r,{width:e,height:o},a,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*o*a)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*o*a);return r.width=e,r.height=o,r.data=u,r}function e1(r,e,o){const{width:a,height:u}=e;a===r.width&&u===r.height||(Eg(r,e,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,a),height:Math.min(r.height,u)},o),r.width=a,r.height=u,r.data=e.data)}function Eg(r,e,o,a,u,d){if(u.width===0||u.height===0)return e;if(u.width>r.width||u.height>r.height||o.x>r.width-u.width||o.y>r.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||a.x>e.width-u.width||a.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const m=r.data,y=e.data;for(let b=0;b<u.height;b++){const T=((o.y+b)*r.width+o.x)*d,I=((a.y+b)*e.width+a.x)*d;for(let M=0;M<u.width*d;M++)y[I+M]=m[T+M]}return e}Bt(Jx,"HeatmapBucket",{omit:["layers"]});class fl{constructor(e,o){Qx(this,e,1,o)}resize(e){e1(this,new fl(e),1)}clone(){return new fl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,a,u,d){Eg(e,o,a,u,d,1)}}class Fo{constructor(e,o){Qx(this,e,4,o)}resize(e){e1(this,new Fo(e),4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,a,u,d){Eg(e,o,a,u,d,4)}}Bt(fl,"AlphaImage"),Bt(Fo,"RGBAImage");var uI={paint:new U({"heatmap-radius":new A(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new A(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new E(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new N(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new E(Ue.paint_heatmap["heatmap-opacity"])})};function Tg(r){const e={},o=r.resolution||256,a=r.clips?r.clips.length:1,u=r.image||new Fo({width:o,height:a}),d=(m,y,b)=>{e[r.evaluationKey]=b;const T=r.expression.evaluate(e);u.data[m+y+0]=Math.floor(255*T.r/T.a),u.data[m+y+1]=Math.floor(255*T.g/T.a),u.data[m+y+2]=Math.floor(255*T.b/T.a),u.data[m+y+3]=Math.floor(255*T.a)};if(r.clips)for(let m=0,y=0;m<a;++m,y+=4*o)for(let b=0,T=0;b<o;b++,T+=4){const I=b/(o-1),{start:M,end:P}=r.clips[m];d(y,T,M*(1-I)+P*I)}else for(let m=0,y=0;m<o;m++,y+=4)d(0,y,m/(o-1));return u}var hI={paint:new U({"hillshade-illumination-direction":new E(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new E(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new E(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new E(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new E(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new E(Ue.paint_hillshade["hillshade-accent-color"])})};const fI=fe([{name:"a_pos",components:2,type:"Int16"}],4),{members:dI}=fI;var qp=Zp,pI=Zp;function Zp(r,e,o){o=o||2;var a,u,d,m,y,b,T,I=e&&e.length,M=I?e[0]*o:r.length,P=t1(r,0,M,o,!0),B=[];if(!P||P.next===P.prev)return B;if(I&&(P=function(q,Q,le,xe){var Me,Le,ze,Re=[];for(Me=0,Le=Q.length;Me<Le;Me++)(ze=t1(q,Q[Me]*xe,Me<Le-1?Q[Me+1]*xe:q.length,xe,!1))===ze.next&&(ze.steiner=!0),Re.push(wI(ze));for(Re.sort(vI),Me=0;Me<Re.length;Me++)le=fc(le=xI(Re[Me],le),le.next);return le}(r,e,P,o)),r.length>80*o){a=d=r[0],u=m=r[1];for(var j=o;j<M;j+=o)(y=r[j])<a&&(a=y),(b=r[j+1])<u&&(u=b),y>d&&(d=y),b>m&&(m=b);T=(T=Math.max(d-a,m-u))!==0?1/T:0}return fd(P,B,o,a,u,T),B}function t1(r,e,o,a,u){var d,m;if(u===Cg(r,e,o,a)>0)for(d=e;d<o;d+=a)m=r1(d,r[d],r[d+1],m);else for(d=o-a;d>=e;d-=a)m=r1(d,r[d],r[d+1],m);return m&&Xp(m,m.next)&&(pd(m),m=m.next),m}function fc(r,e){if(!r)return r;e||(e=r);var o,a=r;do if(o=!1,a.steiner||!Xp(a,a.next)&&or(a.prev,a,a.next)!==0)a=a.next;else{if(pd(a),(a=e=a.prev)===a.next)break;o=!0}while(o||a!==e);return e}function fd(r,e,o,a,u,d,m){if(r){!m&&d&&function(I,M,P,B){var j=I;do j.z===null&&(j.z=Ag(j.x,j.y,M,P,B)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==I);j.prevZ.nextZ=null,j.prevZ=null,function(q){var Q,le,xe,Me,Le,ze,Re,it,at=1;do{for(le=q,q=null,Le=null,ze=0;le;){for(ze++,xe=le,Re=0,Q=0;Q<at&&(Re++,xe=xe.nextZ);Q++);for(it=at;Re>0||it>0&&xe;)Re!==0&&(it===0||!xe||le.z<=xe.z)?(Me=le,le=le.nextZ,Re--):(Me=xe,xe=xe.nextZ,it--),Le?Le.nextZ=Me:q=Me,Me.prevZ=Le,Le=Me;le=xe}Le.nextZ=null,at*=2}while(ze>1)}(j)}(r,a,u,d);for(var y,b,T=r;r.prev!==r.next;)if(y=r.prev,b=r.next,d?_I(r,a,u,d):mI(r))e.push(y.i/o),e.push(r.i/o),e.push(b.i/o),pd(r),r=b.next,T=b.next;else if((r=b)===T){m?m===1?fd(r=gI(fc(r),e,o),e,o,a,u,d,2):m===2&&yI(r,e,o,a,u,d):fd(fc(r),e,o,a,u,d,1);break}}}function mI(r){var e=r.prev,o=r,a=r.next;if(or(e,o,a)>=0)return!1;for(var u=r.next.next;u!==r.prev;){if(Wh(e.x,e.y,o.x,o.y,a.x,a.y,u.x,u.y)&&or(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function _I(r,e,o,a){var u=r.prev,d=r,m=r.next;if(or(u,d,m)>=0)return!1;for(var y=u.x>d.x?u.x>m.x?u.x:m.x:d.x>m.x?d.x:m.x,b=u.y>d.y?u.y>m.y?u.y:m.y:d.y>m.y?d.y:m.y,T=Ag(u.x<d.x?u.x<m.x?u.x:m.x:d.x<m.x?d.x:m.x,u.y<d.y?u.y<m.y?u.y:m.y:d.y<m.y?d.y:m.y,e,o,a),I=Ag(y,b,e,o,a),M=r.prevZ,P=r.nextZ;M&&M.z>=T&&P&&P.z<=I;){if(M!==r.prev&&M!==r.next&&Wh(u.x,u.y,d.x,d.y,m.x,m.y,M.x,M.y)&&or(M.prev,M,M.next)>=0||(M=M.prevZ,P!==r.prev&&P!==r.next&&Wh(u.x,u.y,d.x,d.y,m.x,m.y,P.x,P.y)&&or(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;M&&M.z>=T;){if(M!==r.prev&&M!==r.next&&Wh(u.x,u.y,d.x,d.y,m.x,m.y,M.x,M.y)&&or(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;P&&P.z<=I;){if(P!==r.prev&&P!==r.next&&Wh(u.x,u.y,d.x,d.y,m.x,m.y,P.x,P.y)&&or(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function gI(r,e,o){var a=r;do{var u=a.prev,d=a.next.next;!Xp(u,d)&&n1(u,a,a.next,d)&&dd(u,d)&&dd(d,u)&&(e.push(u.i/o),e.push(a.i/o),e.push(d.i/o),pd(a),pd(a.next),a=r=d),a=a.next}while(a!==r);return fc(a)}function yI(r,e,o,a,u,d){var m=r;do{for(var y=m.next.next;y!==m.prev;){if(m.i!==y.i&&EI(m,y)){var b=i1(m,y);return m=fc(m,m.next),b=fc(b,b.next),fd(m,e,o,a,u,d),void fd(b,e,o,a,u,d)}y=y.next}m=m.next}while(m!==r)}function vI(r,e){return r.x-e.x}function xI(r,e){var o=function(d,m){var y,b=m,T=d.x,I=d.y,M=-1/0;do{if(I<=b.y&&I>=b.next.y&&b.next.y!==b.y){var P=b.x+(I-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(P<=T&&P>M){if(M=P,P===T){if(I===b.y)return b;if(I===b.next.y)return b.next}y=b.x<b.next.x?b:b.next}}b=b.next}while(b!==m);if(!y)return null;if(T===M)return y;var B,j=y,q=y.x,Q=y.y,le=1/0;b=y;do T>=b.x&&b.x>=q&&T!==b.x&&Wh(I<Q?T:M,I,q,Q,I<Q?M:T,I,b.x,b.y)&&(B=Math.abs(I-b.y)/(T-b.x),dd(b,d)&&(B<le||B===le&&(b.x>y.x||b.x===y.x&&bI(y,b)))&&(y=b,le=B)),b=b.next;while(b!==j);return y}(r,e);if(!o)return e;var a=i1(o,r),u=fc(o,o.next);return fc(a,a.next),e===o?u:e}function bI(r,e){return or(r.prev,r,e.prev)<0&&or(e.next,r,r.next)<0}function Ag(r,e,o,a,u){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-o)*u)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-a)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wI(r){var e=r,o=r;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==r);return o}function Wh(r,e,o,a,u,d,m,y){return(u-m)*(e-y)-(r-m)*(d-y)>=0&&(r-m)*(a-y)-(o-m)*(e-y)>=0&&(o-m)*(d-y)-(u-m)*(a-y)>=0}function EI(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(o,a){var u=o;do{if(u.i!==o.i&&u.next.i!==o.i&&u.i!==a.i&&u.next.i!==a.i&&n1(u,u.next,o,a))return!0;u=u.next}while(u!==o);return!1}(r,e)&&(dd(r,e)&&dd(e,r)&&function(o,a){var u=o,d=!1,m=(o.x+a.x)/2,y=(o.y+a.y)/2;do u.y>y!=u.next.y>y&&u.next.y!==u.y&&m<(u.next.x-u.x)*(y-u.y)/(u.next.y-u.y)+u.x&&(d=!d),u=u.next;while(u!==o);return d}(r,e)&&(or(r.prev,r,e.prev)||or(r,e.prev,e))||Xp(r,e)&&or(r.prev,r,r.next)>0&&or(e.prev,e,e.next)>0)}function or(r,e,o){return(e.y-r.y)*(o.x-e.x)-(e.x-r.x)*(o.y-e.y)}function Xp(r,e){return r.x===e.x&&r.y===e.y}function n1(r,e,o,a){var u=Kp(or(r,e,o)),d=Kp(or(r,e,a)),m=Kp(or(o,a,r)),y=Kp(or(o,a,e));return u!==d&&m!==y||!(u!==0||!Yp(r,o,e))||!(d!==0||!Yp(r,a,e))||!(m!==0||!Yp(o,r,a))||!(y!==0||!Yp(o,e,a))}function Yp(r,e,o){return e.x<=Math.max(r.x,o.x)&&e.x>=Math.min(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&e.y>=Math.min(r.y,o.y)}function Kp(r){return r>0?1:r<0?-1:0}function dd(r,e){return or(r.prev,r,r.next)<0?or(r,e,r.next)>=0&&or(r,r.prev,e)>=0:or(r,e,r.prev)<0||or(r,r.next,e)<0}function i1(r,e){var o=new Sg(r.i,r.x,r.y),a=new Sg(e.i,e.x,e.y),u=r.next,d=e.prev;return r.next=e,e.prev=r,o.next=u,u.prev=o,a.next=o,o.prev=a,d.next=a,a.prev=d,a}function r1(r,e,o,a){var u=new Sg(r,e,o);return a?(u.next=a.next,u.prev=a,a.next.prev=u,a.next=u):(u.prev=u,u.next=u),u}function pd(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Sg(r,e,o){this.i=r,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cg(r,e,o,a){for(var u=0,d=e,m=o-a;d<o;d+=a)u+=(r[m]-r[d])*(r[d+1]+r[m+1]),m=d;return u}function TI(r,e,o,a,u){o1(r,e,o||0,a||r.length-1,u||AI)}function o1(r,e,o,a,u){for(;a>o;){if(a-o>600){var d=a-o+1,m=e-o+1,y=Math.log(d),b=.5*Math.exp(2*y/3),T=.5*Math.sqrt(y*b*(d-b)/d)*(m-d/2<0?-1:1);o1(r,e,Math.max(o,Math.floor(e-m*b/d+T)),Math.min(a,Math.floor(e+(d-m)*b/d+T)),u)}var I=r[e],M=o,P=a;for(md(r,o,e),u(r[a],I)>0&&md(r,o,a);M<P;){for(md(r,M,P),M++,P--;u(r[M],I)<0;)M++;for(;u(r[P],I)>0;)P--}u(r[o],I)===0?md(r,o,P):md(r,++P,a),P<=e&&(o=P+1),e<=P&&(a=P-1)}}function md(r,e,o){var a=r[e];r[e]=r[o],r[o]=a}function AI(r,e){return r<e?-1:r>e?1:0}function Ig(r,e){const o=r.length;if(o<=1)return[r];const a=[];let u,d;for(let m=0;m<o;m++){const y=Fe(r[m]);y!==0&&(r[m].area=Math.abs(y),d===void 0&&(d=y<0),d===y<0?(u&&a.push(u),u=[r[m]]):u.push(r[m]))}if(u&&a.push(u),e>1)for(let m=0;m<a.length;m++)a[m].length<=e||(TI(a[m],e,1,a[m].length-1,SI),a[m]=a[m].slice(0,e));return a}function SI(r,e){return e.area-r.area}function Mg(r,e,o){const a=o.patternDependencies;let u=!1;for(const d of e){const m=d.paint.get(`${r}-pattern`);m.isConstant()||(u=!0);const y=m.constantOr(null);y&&(u=!0,a[y.to]=!0,a[y.from]=!0)}return u}function kg(r,e,o,a,u){const d=u.patternDependencies;for(const m of e){const y=m.paint.get(`${r}-pattern`).value;if(y.kind!=="constant"){let b=y.evaluate({zoom:a-1},o,{},u.availableImages),T=y.evaluate({zoom:a},o,{},u.availableImages),I=y.evaluate({zoom:a+1},o,{},u.availableImages);b=b&&b.name?b.name:b,T=T&&T.name?T.name:T,I=I&&I.name?I.name:I,d[b]=!0,d[T]=!0,d[I]=!0,o.patterns[m.id]={min:b,mid:T,max:I}}}return o}Zp.deviation=function(r,e,o,a){var u=e&&e.length,d=Math.abs(Cg(r,0,u?e[0]*o:r.length,o));if(u)for(var m=0,y=e.length;m<y;m++)d-=Math.abs(Cg(r,e[m]*o,m<y-1?e[m+1]*o:r.length,o));var b=0;for(m=0;m<a.length;m+=3){var T=a[m]*o,I=a[m+1]*o,M=a[m+2]*o;b+=Math.abs((r[T]-r[M])*(r[I+1]-r[T+1])-(r[T]-r[I])*(r[M+1]-r[T+1]))}return d===0&&b===0?0:Math.abs((b-d)/d)},Zp.flatten=function(r){for(var e=r[0][0].length,o={vertices:[],holes:[],dimensions:e},a=0,u=0;u<r.length;u++){for(var d=0;d<r[u].length;d++)for(var m=0;m<e;m++)o.vertices.push(r[u][d][m]);u>0&&o.holes.push(a+=r[u-1].length)}return o},qp.default=pI;class Jp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new Jt,this.indexArray2=new wn,this.programConfigurations=new yu(e.layers,e.zoom),this.segments=new Xi,this.segments2=new Xi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=e.projection}populate(e,o,a,u){this.hasPattern=Mg("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:y,id:b,index:T,sourceLayerIndex:I}of e){const M=this.layers[0]._featureFilter.needGeometry,P=vu(y,M);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),P,a))continue;const B=d?d.evaluate(P,{},a,o.availableImages):void 0,j={id:b,properties:y.properties,type:y.type,sourceLayerIndex:I,index:T,geometry:M?P.geometry:hl(y,a,u),patterns:{},sortKey:B};m.push(j)}d&&m.sort((y,b)=>y.sortKey-b.sortKey);for(const y of m){const{geometry:b,index:T,sourceLayerIndex:I}=y;if(this.hasPattern){const M=kg("fill",this.layers,y,this.zoom,o);this.patternFeatures.push(M)}else this.addFeature(y,b,T,a,{},o.availableImages);o.featureIndex.insert(e[T].feature,b,T,I,this.index)}}update(e,o,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,a,u)}addFeatures(e,o,a,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,dI),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,a,u,d,m=[]){for(const y of Ig(o,500)){let b=0;for(const j of y)b+=j.length;const T=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),I=T.vertexLength,M=[],P=[];for(const j of y){if(j.length===0)continue;j!==y[0]&&P.push(M.length/2);const q=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),Q=q.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(Q+j.length-1,Q),M.push(j[0].x),M.push(j[0].y);for(let le=1;le<j.length;le++)this.layoutVertexArray.emplaceBack(j[le].x,j[le].y),this.indexArray2.emplaceBack(Q+le-1,Q+le),M.push(j[le].x),M.push(j[le].y);q.vertexLength+=j.length,q.primitiveLength+=j.length}const B=qp(M,P);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(I+B[j],I+B[j+1],I+B[j+2]);T.vertexLength+=b,T.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}}Bt(Jp,"FillBucket",{omit:["layers","patternFeatures"]});const CI=new U({"fill-sort-key":new A(Ue.layout_fill["fill-sort-key"])});var II={paint:new U({"fill-antialias":new E(Ue.paint_fill["fill-antialias"]),"fill-opacity":new A(Ue.paint_fill["fill-opacity"]),"fill-color":new A(Ue.paint_fill["fill-color"]),"fill-outline-color":new A(Ue.paint_fill["fill-outline-color"]),"fill-translate":new E(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new E(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new L(Ue.paint_fill["fill-pattern"])}),layout:CI};const MI=fe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),kI=fe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),LI=fe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:PI}=MI;var s1=qh;function qh(r,e,o,a,u){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=a,this._values=u,r.readFields(DI,this,e)}function DI(r,e,o){r==1?e.id=o.readVarint():r==2?function(a,u){for(var d=a.readVarint()+a.pos;a.pos<d;){var m=u._keys[a.readVarint()],y=u._values[a.readVarint()];u.properties[m]=y}}(o,e):r==3?e.type=o.readVarint():r==4&&(e._geometry=o.pos)}function OI(r){for(var e,o,a=0,u=0,d=r.length,m=d-1;u<d;m=u++)a+=((o=r[m]).x-(e=r[u]).x)*(e.y+o.y);return a}qh.types=["Unknown","Point","LineString","Polygon"],qh.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,o=r.readVarint()+r.pos,a=1,u=0,d=0,m=0,y=[];r.pos<o;){if(u<=0){var b=r.readVarint();a=7&b,u=b>>3}if(u--,a===1||a===2)d+=r.readSVarint(),m+=r.readSVarint(),a===1&&(e&&y.push(e),e=[]),e.push(new D(d,m));else{if(a!==7)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&y.push(e),y},qh.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,o=1,a=0,u=0,d=0,m=1/0,y=-1/0,b=1/0,T=-1/0;r.pos<e;){if(a<=0){var I=r.readVarint();o=7&I,a=I>>3}if(a--,o===1||o===2)(u+=r.readSVarint())<m&&(m=u),u>y&&(y=u),(d+=r.readSVarint())<b&&(b=d),d>T&&(T=d);else if(o!==7)throw new Error("unknown command "+o)}return[m,b,y,T]},qh.prototype.toGeoJSON=function(r,e,o){var a,u,d=this.extent*Math.pow(2,o),m=this.extent*r,y=this.extent*e,b=this.loadGeometry(),T=qh.types[this.type];function I(B){for(var j=0;j<B.length;j++){var q=B[j];B[j]=[360*(q.x+m)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+y)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(a=0;a<b.length;a++)M[a]=b[a][0];I(b=M);break;case 2:for(a=0;a<b.length;a++)I(b[a]);break;case 3:for(b=function(B){var j=B.length;if(j<=1)return[B];for(var q,Q,le=[],xe=0;xe<j;xe++){var Me=OI(B[xe]);Me!==0&&(Q===void 0&&(Q=Me<0),Q===Me<0?(q&&le.push(q),q=[B[xe]]):q.push(B[xe]))}return q&&le.push(q),le}(b),a=0;a<b.length;a++)for(u=0;u<b[a].length;u++)I(b[a][u])}b.length===1?b=b[0]:T="Multi"+T;var P={type:"Feature",geometry:{type:T,coordinates:b},properties:this.properties};return"id"in this&&(P.id=this.id),P};var a1=l1;function l1(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(zI,this,e),this.length=this._features.length}function zI(r,e,o){r===15?e.version=o.readVarint():r===1?e.name=o.readString():r===5?e.extent=o.readVarint():r===2?e._features.push(o.pos):r===3?e._keys.push(o.readString()):r===4&&e._values.push(function(a){for(var u=null,d=a.readVarint()+a.pos;a.pos<d;){var m=a.readVarint()>>3;u=m===1?a.readString():m===2?a.readFloat():m===3?a.readDouble():m===4?a.readVarint64():m===5?a.readVarint():m===6?a.readSVarint():m===7?a.readBoolean():null}return u}(o))}function RI(r,e,o){if(r===3){var a=new a1(o,o.readVarint()+o.pos);a.length&&(e[a.name]=a)}}l1.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new s1(this._pbf,e,this.extent,this._keys,this._values)};var wu={VectorTile:function(r,e){this.layers=r.readFields(RI,{},e)},VectorTileFeature:s1,VectorTileLayer:a1};function Qp(r,e,o,a){const u=[],d=a===0?(m,y,b,T,I,M)=>{m.push(new D(M,b+(M-y)/(T-y)*(I-b)))}:(m,y,b,T,I,M)=>{m.push(new D(y+(M-b)/(I-b)*(T-y),M))};for(const m of r){const y=[];for(const b of m){if(b.length<=2)continue;const T=[];for(let P=0;P<b.length-1;P++){const B=b[P].x,j=b[P].y,q=b[P+1].x,Q=b[P+1].y,le=a===0?B:j,xe=a===0?q:Q;le<e?xe>e&&d(T,B,j,q,Q,e):le>o?xe<o&&d(T,B,j,q,Q,o):T.push(b[P]),xe<e&&le>=e&&d(T,B,j,q,Q,e),xe>o&&le<=o&&d(T,B,j,q,Q,o)}let I=b[b.length-1];const M=a===0?I.x:I.y;M>=e&&M<=o&&T.push(I),T.length&&(I=T[T.length-1],T[0].x===I.x&&T[0].y===I.y||T.push(T[0]),y.push(T))}y.length&&u.push(y)}return u}const NI=wu.VectorTileFeature.types,BI=Math.pow(2,13);function _d(r,e,o,a,u,d,m,y){r.emplaceBack((e<<1)+m,(o<<1)+d,(Math.floor(a*BI)<<1)+u,Math.round(y))}function gd(r,e,o){const a=16384;r.emplaceBack(e.x,e.y,e.z,o[0]*a,o[1]*a,o[2]*a)}class c1{constructor(){this.acc=new D(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new D(e.x,e.y),this.max=new D(e.x,e.y))}append(e,o){this.currentPolyCount.edges++,this.acc._add(e);const a=this.min,u=this.max;e.x<a.x?a.x=e.x:e.x>u.x&&(u.x=e.x),e.y<a.y?a.y=e.y:e.y>u.y&&(u.y=e.y),((e.x===0||e.x===On)&&e.x===o.x)!=((e.y===0||e.y===On)&&e.y===o.y)&&this.processBorderOverlap(e,o),o.x<0!=e.x<0&&this.addBorderIntersection(0,mn(o.y,e.y,(0-o.x)/(e.x-o.x))),o.x>On!=e.x>On&&this.addBorderIntersection(1,mn(o.y,e.y,(On-o.x)/(e.x-o.x))),o.y<0!=e.y<0&&this.addBorderIntersection(2,mn(o.x,e.x,(0-o.y)/(e.y-o.y))),o.y>On!=e.y>On&&this.addBorderIntersection(3,mn(o.x,e.x,(On-o.y)/(e.y-o.y)))}addBorderIntersection(e,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];o<a[0]&&(a[0]=o),o>a[1]&&(a[1]=o)}processBorderOverlap(e,o){if(e.x===o.x){if(e.y===o.y)return;const a=e.x===0?0:1;this.addBorderIntersection(a,o.y),this.addBorderIntersection(a,e.y)}else{const a=e.y===0?2:3;this.addBorderIntersection(a,o.x),this.addBorderIntersection(a,e.x)}}centroid(){const e=this.polyCount.reduce((o,a)=>o+a.edges,0);return e!==0?this.acc.div(e)._round():new D(0,0)}span(){return new D(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,o)=>e+ +(o[0]!==Number.MAX_VALUE),0)}}class yd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ye,this.centroidVertexArray=new gu,this.indexArray=new Jt,this.programConfigurations=new yu(e.layers,e.zoom),this.segments=new Xi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=e.enableTerrain}populate(e,o,a,u){this.features=[],this.hasPattern=Mg("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(d){const m=Math.exp(Math.PI*(1-d.y/(1<<d.z)*2));return 80150034*m/(m*m+1)/On/(1<<d.z)}(a);for(const{feature:d,id:m,index:y,sourceLayerIndex:b}of e){const T=this.layers[0]._featureFilter.needGeometry,I=vu(d,T);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),I,a))continue;const M={id:m,sourceLayerIndex:b,index:y,geometry:T?I.geometry:hl(d,a,u),properties:d.properties,type:d.type,patterns:{}},P=this.layoutVertexArray.length;this.hasPattern?this.features.push(kg("fill-extrusion",this.layers,M,this.zoom,o)):this.addFeature(M,M.geometry,y,a,{},o.availableImages,u),o.featureIndex.insert(d,M.geometry,y,b,this.index,P)}this.sortBorders()}addFeatures(e,o,a,u,d){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,o,a,u,d)}this.sortBorders()}update(e,o,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,PI),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,LI.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,kI.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,a,u,d,m,y){const b=[new D(0,0),new D(On,On)],T=y.projection,I=T.name==="globe",M=this.enableTerrain&&!I?new c1:null;I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new xo);const P=Ig(o,500);for(let q=P.length-1;q>=0;q--){const Q=P[q];(Q.length===0||(B=Q[0]).every(le=>le.x<=0)||B.every(le=>le.x>=On)||B.every(le=>le.y<=0)||B.every(le=>le.y>=On))&&P.splice(q,1)}var B;let j;if(I){const q=11.25,Q=1<<u.z,le=Ms(u.x/Q),xe=Ms((u.x+1)/Q),Me=$r(u.y/Q),Le=$r((u.y+1)/Q);j=function(ze,Re,it,at,vt=0,xt){const et=[];if(!ze.length||!it||!at)return et;const dt=(kn,Fn)=>{for(const cn of kn)et.push({polygon:cn,bounds:Fn})},Tt=Math.ceil(Math.log2(it)),Nt=Math.ceil(Math.log2(at)),Lt=Tt-Nt,Rt=[];for(let kn=0;kn<Math.abs(Lt);kn++)Rt.push(Lt>0?0:1);for(let kn=0;kn<Math.min(Tt,Nt);kn++)Rt.push(0),Rt.push(1);let In=ze;if(In=Qp(In,Re[0].y-vt,Re[1].y+vt,1),In=Qp(In,Re[0].x-vt,Re[1].x+vt,0),!In.length)return et;const Hn=[];for(Rt.length?Hn.push({polygons:In,bounds:Re,depth:0}):dt(In,Re);Hn.length;){const kn=Hn.pop(),Fn=kn.depth,cn=Rt[Fn],Yt=kn.bounds[0],Kn=kn.bounds[1],hi=cn===0?Yt.x:Yt.y,dr=cn===0?Kn.x:Kn.y,Mi=xt?xt(cn,hi,dr):.5*(hi+dr),pr=Qp(kn.polygons,hi-vt,Mi+vt,cn),fi=Qp(kn.polygons,Mi-vt,dr+vt,cn);if(pr.length){const ei=[Yt,new D(cn===0?Mi:Kn.x,cn===1?Mi:Kn.y)];Rt.length>Fn+1?Hn.push({polygons:pr,bounds:ei,depth:Fn+1}):dt(pr,ei)}if(fi.length){const ei=[new D(cn===0?Mi:Yt.x,cn===1?Mi:Yt.y),Kn];Rt.length>Fn+1?Hn.push({polygons:fi,bounds:ei,depth:Fn+1}):dt(fi,ei)}}return et}(P,b,Math.ceil((xe-le)/q),Math.ceil((Me-Le)/q),1,(ze,Re,it)=>{if(ze===0)return .5*(Re+it);{const at=$r((u.y+Re/On)/Q);return($h(.5*($r((u.y+it/On)/Q)+at))*Q-u.y)*On}})}else{j=[];for(const q of P)j.push({polygon:q,bounds:b})}for(const q of j){const Q=q.polygon;let le=0,xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let it=0;it<Q.length;it++){const at=Q[it];if(at.length===0)continue;le+=at.length;let vt=0;M&&M.startRing(at[0]);for(let xt=0;xt<at.length;xt++){const et=at[xt];if(xt>=1){const dt=at[xt-1];if(!FI(et,dt,q.bounds)){M&&M.append(et,dt),xe.vertexLength+4>Xi.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Tt=et.sub(dt)._perp(),Nt=Tt.x/(Math.abs(Tt.x)+Math.abs(Tt.y)),Lt=Tt.y>0?1:0,Rt=dt.dist(et);vt+Rt>32768&&(vt=0),_d(this.layoutVertexArray,et.x,et.y,Nt,Lt,0,0,vt),_d(this.layoutVertexArray,et.x,et.y,Nt,Lt,0,1,vt),vt+=Rt,_d(this.layoutVertexArray,dt.x,dt.y,Nt,Lt,0,0,vt),_d(this.layoutVertexArray,dt.x,dt.y,Nt,Lt,0,1,vt);const In=xe.vertexLength;if(this.indexArray.emplaceBack(In,In+2,In+1),this.indexArray.emplaceBack(In+1,In+2,In+3),xe.vertexLength+=4,xe.primitiveLength+=2,I){const Hn=this.layoutVertexExtArray,kn=T.projectTilePoint(et.x,et.y,u),Fn=T.projectTilePoint(dt.x,dt.y,u),cn=T.upVector(u,et.x,et.y),Yt=T.upVector(u,dt.x,dt.y);gd(Hn,kn,cn),gd(Hn,kn,cn),gd(Hn,Fn,Yt),gd(Hn,Fn,Yt)}}}}}if(xe.vertexLength+le>Xi.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray)),NI[e.type]!=="Polygon")continue;const Me=[],Le=[],ze=xe.vertexLength;for(let it=0;it<Q.length;it++){const at=Q[it];if(at.length!==0){at!==Q[0]&&Le.push(Me.length/2);for(let vt=0;vt<at.length;vt++){const xt=at[vt];_d(this.layoutVertexArray,xt.x,xt.y,0,0,1,1,0),Me.push(xt.x),Me.push(xt.y),M&&M.currentPolyCount.top++,I&&gd(this.layoutVertexExtArray,T.projectTilePoint(xt.x,xt.y,u),T.upVector(u,xt.x,xt.y))}}}const Re=qp(Me,Le);for(let it=0;it<Re.length;it+=3)this.indexArray.emplaceBack(ze+Re[it],ze+Re[it+2],ze+Re[it+1]);xe.primitiveLength+=Re.length/3,xe.vertexLength+=le}if(M&&M.polyCount.length>0){if(M.borders){M.vertexArrayOffset=this.centroidVertexArray.length;const q=M.borders,Q=this.featuresOnBorder.push(M)-1;for(let le=0;le<4;le++)q[le][0]!==Number.MAX_VALUE&&this.borders[le].push(Q)}this.encodeCentroid(M.borders?void 0:M.centroid(),M)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((o,a)=>this.featuresOnBorder[o].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,o,a=!0){let u,d;if(e)if(e.y!==0){const y=o.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(y.x/10)),d=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(y.y/10))}else u=Math.ceil(7*(e.x+450)),d=0;else u=0,d=+a;let m=a?this.centroidVertexArray.length:o.vertexArrayOffset;for(const y of o.polyCount){a&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*y.edges+y.top);for(let b=0;b<2*y.edges;b++)this.centroidVertexArray.emplace(m++,0,d),this.centroidVertexArray.emplace(m++,u,d);for(let b=0;b<y.top;b++)this.centroidVertexArray.emplace(m++,u,d)}}}function FI(r,e,o){return r.x===e.x&&(r.x<o[0].x||r.x>o[1].x)||r.y===e.y&&(r.y<o[0].y||r.y>o[1].y)}Bt(yd,"FillExtrusionBucket",{omit:["layers","features"]}),Bt(c1,"PartMetadata");var $I={paint:new U({"fill-extrusion-opacity":new E(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new A(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new E(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new E(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new L(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new A(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new A(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new E(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function vd(r,e){return r.x*e.x+r.y*e.y}function u1(r,e){if(r.length===1){let o=0;const a=e[o++];let u;for(;!u||a.equals(u);)if(u=e[o++],!u)return 1/0;for(;o<e.length;o++){const d=e[o],m=r[0],y=u.sub(a),b=d.sub(a),T=m.sub(a),I=vd(y,y),M=vd(y,b),P=vd(b,b),B=vd(T,y),j=vd(T,b),q=I*P-M*M,Q=(P*B-M*j)/q,le=(I*j-M*B)/q,xe=a.z*(1-Q-le)+u.z*Q+d.z*le;if(isFinite(xe))return xe}return 1/0}{let o=1/0;for(const a of e)o=Math.min(o,a.z);return o}}function h1(r){const e=new D(r[0],r[1]);return e.z=r[2],e}function UI(r,e,o,a,u,d,m,y){const b=m*u.getElevationAt(r,e,!0,!0),T=d[0]!==0,I=T?d[1]===0?m*(d[0]/7-450):m*function(M,P,B){const j=Math.floor(P[0]/8),q=Math.floor(P[1]/8),Q=10*(P[0]-8*j),le=10*(P[1]-8*q),xe=M.getElevationAt(j,q,!0,!0),Me=M.getMeterToDEM(B),Le=Math.floor(.5*(Q*Me-1)),ze=Math.floor(.5*(le*Me-1)),Re=M.tileCoordToPixel(j,q),it=2*Le+1,at=2*ze+1,vt=function(Lt,Rt,In,Hn,kn){return[Lt.getElevationAtPixel(Rt,In,!0),Lt.getElevationAtPixel(Rt+kn,In,!0),Lt.getElevationAtPixel(Rt,In+kn,!0),Lt.getElevationAtPixel(Rt+Hn,In+kn,!0)]}(M,Re.x-Le,Re.y-ze,it,at),xt=Math.abs(vt[0]-vt[1]),et=Math.abs(vt[2]-vt[3]),dt=Math.abs(vt[0]-vt[2])+Math.abs(vt[1]-vt[3]),Tt=Math.min(.25,.5*Me*(xt+et)/it),Nt=Math.min(.25,.5*Me*dt/at);return xe+Math.max(Tt*Q,Nt*le)}(u,d,y):b;return{base:b+(o===0)?-1:o,top:T?Math.max(I+a,b+o+2):b+a}}const jI=fe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:VI}=jI,GI=fe([{name:"a_packed",components:3,type:"Float32"}]),{members:HI}=GI,WI=wu.VectorTileFeature.types,qI=Math.cos(Math.PI/180*37.5);class em{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new ce,this.layoutVertexArray2=new Dt,this.indexArray=new Jt,this.programConfigurations=new yu(e.layers,e.zoom),this.segments=new Xi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,a,u){this.hasPattern=Mg("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:I,id:M,index:P,sourceLayerIndex:B}of e){const j=this.layers[0]._featureFilter.needGeometry,q=vu(I,j);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),q,a))continue;const Q=d?d.evaluate(q,{},a):void 0,le={id:M,properties:I.properties,type:I.type,sourceLayerIndex:B,index:P,geometry:j?q.geometry:hl(I,a,u),patterns:{},sortKey:Q};m.push(le)}d&&m.sort((I,M)=>I.sortKey-M.sortKey);const{lineAtlas:y,featureIndex:b}=o,T=this.addConstantDashes(y);for(const I of m){const{geometry:M,index:P,sourceLayerIndex:B}=I;if(T&&this.addFeatureDashes(I,y),this.hasPattern){const j=kg("line",this.layers,I,this.zoom,o);this.patternFeatures.push(j)}else this.addFeature(I,M,P,a,y.positions,o.availableImages);b.insert(e[P].feature,M,P,B,this.index)}}addConstantDashes(e){let o=!1;for(const a of this.layers){const u=a.paint.get("line-dasharray").value,d=a.layout.get("line-cap").value;if(u.kind!=="constant"||d.kind!=="constant")o=!0;else{const m=d.value,y=u.value;if(!y)continue;e.addDash(y.from,m),e.addDash(y.to,m),y.other&&e.addDash(y.other,m)}}return o}addFeatureDashes(e,o){const a=this.zoom;for(const u of this.layers){const d=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(d.kind==="constant"&&m.kind==="constant")continue;let y,b,T,I,M,P;if(d.kind==="constant"){const Q=d.value;if(!Q)continue;y=Q.other||Q.to,b=Q.to,T=Q.from}else y=d.evaluate({zoom:a-1},e),b=d.evaluate({zoom:a},e),T=d.evaluate({zoom:a+1},e);m.kind==="constant"?I=M=P=m.value:(I=m.evaluate({zoom:a-1},e),M=m.evaluate({zoom:a},e),P=m.evaluate({zoom:a+1},e)),o.addDash(y,I),o.addDash(b,M),o.addDash(T,P);const B=o.getKey(y,I),j=o.getKey(b,M),q=o.getKey(T,P);e.patterns[u.id]={min:B,mid:j,max:q}}}update(e,o,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,a,u)}addFeatures(e,o,a,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,HI)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,VI),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,a,u,d,m){const y=this.layers[0].layout,b=y.get("line-join").evaluate(e,{}),T=y.get("line-cap").evaluate(e,{}),I=y.get("line-miter-limit"),M=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const P of o)this.addLine(P,e,b,T,I,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}addLine(e,o,a,u,d,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<e.length-1;le++)this.totalDistance+=e[le].dist(e[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=WI[o.type]==="Polygon";let b=e.length;for(;b>=2&&e[b-1].equals(e[b-2]);)b--;let T=0;for(;T<b-1&&e[T].equals(e[T+1]);)T++;if(b<(y?3:2))return;a==="bevel"&&(d=1.05);const I=this.overscaling<=16?122880/(512*this.overscaling):0,M=this.segments.prepareSegment(10*b,this.layoutVertexArray,this.indexArray);let P,B,j,q,Q;this.e1=this.e2=-1,y&&(P=e[b-2],Q=e[T].sub(P)._unit()._perp());for(let le=T;le<b;le++){if(j=le===b-1?y?e[T+1]:void 0:e[le+1],j&&e[le].equals(j))continue;Q&&(q=Q),P&&(B=P),P=e[le],Q=j?j.sub(P)._unit()._perp():q,q=q||Q;let xe=q.add(Q);xe.x===0&&xe.y===0||xe._unit();const Me=q.x*Q.x+q.y*Q.y,Le=xe.x*Q.x+xe.y*Q.y,ze=Le!==0?1/Le:1/0,Re=2*Math.sqrt(2-2*Le),it=Le<qI&&B&&j,at=q.x*Q.y-q.y*Q.x>0;if(it&&le>T){const et=P.dist(B);if(et>2*I){const dt=P.sub(P.sub(B)._mult(I/et)._round());this.updateDistance(B,dt),this.addCurrentVertex(dt,q,0,0,M),B=dt}}const vt=B&&j;let xt=vt?a:y?"butt":u;if(vt&&xt==="round"&&(ze<m?xt="miter":ze<=2&&(xt="fakeround")),xt==="miter"&&ze>d&&(xt="bevel"),xt==="bevel"&&(ze>2&&(xt="flipbevel"),ze<d&&(xt="miter")),B&&this.updateDistance(B,P),xt==="miter")xe._mult(ze),this.addCurrentVertex(P,xe,0,0,M);else if(xt==="flipbevel"){if(ze>100)xe=Q.mult(-1);else{const et=ze*q.add(Q).mag()/q.sub(Q).mag();xe._perp()._mult(et*(at?-1:1))}this.addCurrentVertex(P,xe,0,0,M),this.addCurrentVertex(P,xe.mult(-1),0,0,M)}else if(xt==="bevel"||xt==="fakeround"){const et=-Math.sqrt(ze*ze-1),dt=at?et:0,Tt=at?0:et;if(B&&this.addCurrentVertex(P,q,dt,Tt,M),xt==="fakeround"){const Nt=Math.round(180*Re/Math.PI/20);for(let Lt=1;Lt<Nt;Lt++){let Rt=Lt/Nt;if(Rt!==.5){const Hn=Rt-.5;Rt+=Rt*Hn*(Rt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*Hn*Hn+(.848013+Me*(.215638*Me-1.06021)))}const In=Q.sub(q)._mult(Rt)._add(q)._unit()._mult(at?-1:1);this.addHalfVertex(P,In.x,In.y,!1,at,0,M)}}j&&this.addCurrentVertex(P,Q,-dt,-Tt,M)}else if(xt==="butt")this.addCurrentVertex(P,xe,0,0,M);else if(xt==="square"){const et=B?1:-1;B||this.addCurrentVertex(P,xe,et,et,M),this.addCurrentVertex(P,xe,0,0,M),B&&this.addCurrentVertex(P,xe,et,et,M)}else xt==="round"&&(B&&(this.addCurrentVertex(P,q,0,0,M),this.addCurrentVertex(P,q,1,1,M,!0)),j&&(this.addCurrentVertex(P,Q,-1,-1,M,!0),this.addCurrentVertex(P,Q,0,0,M)));if(it&&le<b-1){const et=P.dist(j);if(et>2*I){const dt=P.add(j.sub(P)._mult(I/et)._round());this.updateDistance(P,dt),this.addCurrentVertex(dt,Q,0,0,M),P=dt}}}}addCurrentVertex(e,o,a,u,d,m=!1){const y=o.y*u-o.x,b=-o.y-o.x*u;this.addHalfVertex(e,o.x+o.y*a,o.y-o.x*a,m,!1,a,d),this.addHalfVertex(e,y,b,m,!0,-u,d)}addHalfVertex({x:e,y:o},a,u,d,m,y,b){this.layoutVertexArray.emplaceBack((e<<1)+(d?1:0),(o<<1)+(m?1:0),Math.round(63*a)+128,Math.round(63*u)+128,1+(y===0?0:y<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const T=b.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),b.primitiveLength++),m?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}Bt(em,"LineBucket",{omit:["layers","patternFeatures"]});const ZI=new U({"line-cap":new A(Ue.layout_line["line-cap"]),"line-join":new A(Ue.layout_line["line-join"]),"line-miter-limit":new E(Ue.layout_line["line-miter-limit"]),"line-round-limit":new E(Ue.layout_line["line-round-limit"]),"line-sort-key":new A(Ue.layout_line["line-sort-key"])});var f1={paint:new U({"line-opacity":new A(Ue.paint_line["line-opacity"]),"line-color":new A(Ue.paint_line["line-color"]),"line-translate":new E(Ue.paint_line["line-translate"]),"line-translate-anchor":new E(Ue.paint_line["line-translate-anchor"]),"line-width":new A(Ue.paint_line["line-width"]),"line-gap-width":new A(Ue.paint_line["line-gap-width"]),"line-offset":new A(Ue.paint_line["line-offset"]),"line-blur":new A(Ue.paint_line["line-blur"]),"line-dasharray":new L(Ue.paint_line["line-dasharray"]),"line-pattern":new L(Ue.paint_line["line-pattern"]),"line-gradient":new N(Ue.paint_line["line-gradient"])}),layout:ZI};const d1=new class extends A{possiblyEvaluate(r,e){return e=new Ii(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,o,a){return e=Xe({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,o,a)}}(f1.paint.properties["line-width"].specification);function p1(r,e){return e>0?e+2*r:r}d1.useIntegerZoom=!0;const XI=fe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),YI=fe([{name:"a_projected_pos",components:3,type:"Float32"}],4);fe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const KI=fe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),JI=fe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const m1=fe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),QI=fe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);fe([{name:"triangle",components:3,type:"Uint16"}]),fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fe([{type:"Float32",name:"offsetX"}]),fe([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ur=24;const Ia=128;function Lg(r,e){const{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Ii(r+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:a,interpolationType:u}=o;let d=0;for(;d<a.length&&a[d]<=r;)d++;d=Math.max(0,d-1);let m=d;for(;m<a.length&&a[m]<r+1;)m++;m=Math.min(a.length-1,m);const y=a[d],b=a[m];return o.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:b,interpolationType:u}:{kind:"camera",minZoom:y,maxZoom:b,minSize:o.evaluate(new Ii(y)),maxSize:o.evaluate(new Ii(b)),interpolationType:u}}}function tm(r,{uSize:e,uSizeT:o},{lowerSize:a,upperSize:u}){return r.kind==="source"?a/Ia:r.kind==="composite"?mn(a/Ia,u/Ia,o):e}function Zh(r,e){let o=0,a=0;if(r.kind==="constant")a=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:u,minZoom:d,maxZoom:m}=r,y=u?Pe(Rr.interpolationFactor(u,e,d,m),0,1):0;r.kind==="camera"?a=mn(r.minSize,r.maxSize,y):o=y}return{uSizeT:o,uSize:a}}var eM=Object.freeze({__proto__:null,getSizeData:Lg,evaluateSizeForFeature:tm,evaluateSizeForZoom:Zh,SIZE_PACK_FACTOR:Ia});function tM(r,e,o){return r.sections.forEach(a=>{a.text=function(u,d,m){const y=d.layout.get("text-transform").evaluate(m,{});return y==="uppercase"?u=u.toLocaleUpperCase():y==="lowercase"&&(u=u.toLocaleLowerCase()),Ro.applyArabicShaping&&(u=Ro.applyArabicShaping(u)),u}(a.text,e,o)}),r}const xd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function nM(r){return r==="\uFE36"||r==="\uFE48"||r==="\uFE38"||r==="\uFE44"||r==="\uFE42"||r==="\uFE3E"||r==="\uFE3C"||r==="\uFE3A"||r==="\uFE18"||r==="\uFE40"||r==="\uFE10"||r==="\uFE13"||r==="\uFE14"||r==="\uFF40"||r==="\uFFE3"||r==="\uFE11"||r==="\uFE12"}function iM(r){return r==="\uFE35"||r==="\uFE47"||r==="\uFE37"||r==="\uFE43"||r==="\uFE41"||r==="\uFE3D"||r==="\uFE3B"||r==="\uFE39"||r==="\uFE17"||r==="\uFE3F"}var _1=function(r,e,o,a,u){var d,m,y=8*u-a-1,b=(1<<y)-1,T=b>>1,I=-7,M=o?u-1:0,P=o?-1:1,B=r[e+M];for(M+=P,d=B&(1<<-I)-1,B>>=-I,I+=y;I>0;d=256*d+r[e+M],M+=P,I-=8);for(m=d&(1<<-I)-1,d>>=-I,I+=a;I>0;m=256*m+r[e+M],M+=P,I-=8);if(d===0)d=1-T;else{if(d===b)return m?NaN:1/0*(B?-1:1);m+=Math.pow(2,a),d-=T}return(B?-1:1)*m*Math.pow(2,d-a)},g1=function(r,e,o,a,u,d){var m,y,b,T=8*d-u-1,I=(1<<T)-1,M=I>>1,P=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=a?0:d-1,j=a?1:-1,q=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,m=I):(m=Math.floor(Math.log(e)/Math.LN2),e*(b=Math.pow(2,-m))<1&&(m--,b*=2),(e+=m+M>=1?P/b:P*Math.pow(2,1-M))*b>=2&&(m++,b/=2),m+M>=I?(y=0,m=I):m+M>=1?(y=(e*b-1)*Math.pow(2,u),m+=M):(y=e*Math.pow(2,M-1)*Math.pow(2,u),m=0));u>=8;r[o+B]=255&y,B+=j,y/=256,u-=8);for(m=m<<u|y,T+=u;T>0;r[o+B]=255&m,B+=j,m/=256,T-=8);r[o+B-j]|=128*q},bd=Ai;function Ai(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var Pg=4294967296,y1=1/Pg,v1=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function dl(r){return r.type===Ai.Bytes?r.readVarint()+r.pos:r.pos+1}function Xh(r,e,o){return o?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function x1(r,e,o){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(a);for(var u=o.pos-1;u>=r;u--)o.buf[u+a]=o.buf[u]}function rM(r,e){for(var o=0;o<r.length;o++)e.writeVarint(r[o])}function oM(r,e){for(var o=0;o<r.length;o++)e.writeSVarint(r[o])}function sM(r,e){for(var o=0;o<r.length;o++)e.writeFloat(r[o])}function aM(r,e){for(var o=0;o<r.length;o++)e.writeDouble(r[o])}function lM(r,e){for(var o=0;o<r.length;o++)e.writeBoolean(r[o])}function cM(r,e){for(var o=0;o<r.length;o++)e.writeFixed32(r[o])}function uM(r,e){for(var o=0;o<r.length;o++)e.writeSFixed32(r[o])}function hM(r,e){for(var o=0;o<r.length;o++)e.writeFixed64(r[o])}function fM(r,e){for(var o=0;o<r.length;o++)e.writeSFixed64(r[o])}function nm(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function Yh(r,e,o){r[o]=e,r[o+1]=e>>>8,r[o+2]=e>>>16,r[o+3]=e>>>24}function b1(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function dM(r,e,o){e.glyphs=[],r===1&&o.readMessage(pM,e)}function pM(r,e,o){if(r===3){const{id:a,bitmap:u,width:d,height:m,left:y,top:b,advance:T}=o.readMessage(mM,{});e.glyphs.push({id:a,bitmap:new fl({width:d+6,height:m+6},u),metrics:{width:d,height:m,left:y,top:b,advance:T}})}else r===4?e.ascender=o.readSVarint():r===5&&(e.descender=o.readSVarint())}function mM(r,e,o){r===1?e.id=o.readVarint():r===2?e.bitmap=o.readBytes():r===3?e.width=o.readVarint():r===4?e.height=o.readVarint():r===5?e.left=o.readSVarint():r===6?e.top=o.readSVarint():r===7&&(e.advance=o.readVarint())}function Dg(r){let e=0,o=0;for(const m of r)e+=m.w*m.h,o=Math.max(o,m.w);r.sort((m,y)=>y.h-m.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let u=0,d=0;for(const m of r)for(let y=a.length-1;y>=0;y--){const b=a[y];if(!(m.w>b.w||m.h>b.h)){if(m.x=b.x,m.y=b.y,d=Math.max(d,m.y+m.h),u=Math.max(u,m.x+m.w),m.w===b.w&&m.h===b.h){const T=a.pop();y<a.length&&(a[y]=T)}else m.h===b.h?(b.x+=m.w,b.w-=m.w):m.w===b.w?(b.y+=m.h,b.h-=m.h):(a.push({x:b.x+m.w,y:b.y,w:b.w-m.w,h:m.h}),b.y+=m.h,b.h-=m.h);break}}return{w:u,h:d,fill:e/(u*d)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(r,e,o){for(o=o||this.length;this.pos<o;){var a=this.readVarint(),u=a>>3,d=this.pos;this.type=7&a,r(u,e,this),this.pos===d&&this.skip(a)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=nm(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=b1(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=nm(this.buf,this.pos)+nm(this.buf,this.pos+4)*Pg;return this.pos+=8,r},readSFixed64:function(){var r=nm(this.buf,this.pos)+b1(this.buf,this.pos+4)*Pg;return this.pos+=8,r},readFloat:function(){var r=_1(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=_1(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,o,a=this.buf;return e=127&(o=a[this.pos++]),o<128?e:(e|=(127&(o=a[this.pos++]))<<7,o<128?e:(e|=(127&(o=a[this.pos++]))<<14,o<128?e:(e|=(127&(o=a[this.pos++]))<<21,o<128?e:function(u,d,m){var y,b,T=m.buf;if(y=(112&(b=T[m.pos++]))>>4,b<128||(y|=(127&(b=T[m.pos++]))<<3,b<128)||(y|=(127&(b=T[m.pos++]))<<10,b<128)||(y|=(127&(b=T[m.pos++]))<<17,b<128)||(y|=(127&(b=T[m.pos++]))<<24,b<128)||(y|=(1&(b=T[m.pos++]))<<31,b<128))return Xh(u,y,d);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=a[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&v1?function(o,a,u){return v1.decode(o.subarray(a,u))}(this.buf,e,r):function(o,a,u){for(var d="",m=a;m<u;){var y,b,T,I=o[m],M=null,P=I>239?4:I>223?3:I>191?2:1;if(m+P>u)break;P===1?I<128&&(M=I):P===2?(192&(y=o[m+1]))==128&&(M=(31&I)<<6|63&y)<=127&&(M=null):P===3?(b=o[m+2],(192&(y=o[m+1]))==128&&(192&b)==128&&((M=(15&I)<<12|(63&y)<<6|63&b)<=2047||M>=55296&&M<=57343)&&(M=null)):P===4&&(b=o[m+2],T=o[m+3],(192&(y=o[m+1]))==128&&(192&b)==128&&(192&T)==128&&((M=(15&I)<<18|(63&y)<<12|(63&b)<<6|63&T)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,P=1):M>65535&&(M-=65536,d+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),d+=String.fromCharCode(M),m+=P}return d}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Ai.Bytes)return r.push(this.readVarint(e));var o=dl(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSVarint());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Ai.Bytes)return r.push(this.readBoolean());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFloat());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Ai.Bytes)return r.push(this.readDouble());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFixed32());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSFixed32());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Ai.Bytes)return r.push(this.readFixed64());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Ai.Bytes)return r.push(this.readSFixed64());var e=dl(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ai.Fixed32)this.pos+=4;else{if(e!==Ai.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Yh(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Yh(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Yh(this.buf,-1&r,this.pos),Yh(this.buf,Math.floor(r*y1),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Yh(this.buf,-1&r,this.pos),Yh(this.buf,Math.floor(r*y1),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,o){var a,u;if(e>=0?(a=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(d,m,y){y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,y.buf[y.pos]=127&(d>>>=7)}(a,0,o),function(d,m){var y=(7&d)<<4;m.buf[m.pos++]|=y|((d>>>=3)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d)))))}(u,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(a,u,d){for(var m,y,b=0;b<u.length;b++){if((m=u.charCodeAt(b))>55295&&m<57344){if(!y){m>56319||b+1===u.length?(a[d++]=239,a[d++]=191,a[d++]=189):y=m;continue}if(m<56320){a[d++]=239,a[d++]=191,a[d++]=189,y=m;continue}m=y-55296<<10|m-56320|65536,y=null}else y&&(a[d++]=239,a[d++]=191,a[d++]=189,y=null);m<128?a[d++]=m:(m<2048?a[d++]=m>>6|192:(m<65536?a[d++]=m>>12|224:(a[d++]=m>>18|240,a[d++]=m>>12&63|128),a[d++]=m>>6&63|128),a[d++]=63&m|128)}return d}(this.buf,r,this.pos);var o=this.pos-e;o>=128&&x1(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),g1(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),g1(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,e){this.pos++;var o=this.pos;r(e,this);var a=this.pos-o;a>=128&&x1(o,a,this),this.pos=o-1,this.writeVarint(a),this.pos+=a},writeMessage:function(r,e,o){this.writeTag(r,Ai.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,rM,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,oM,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,lM,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,sM,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,aM,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,cM,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,uM,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,hM,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,fM,e)},writeBytesField:function(r,e){this.writeTag(r,Ai.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Ai.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Ai.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Ai.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Ai.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Ai.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class Og{constructor(e,{pixelRatio:o,version:a,stretchX:u,stretchY:d,content:m}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=u,this.stretchY=d,this.content=m,this.version=a}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class w1{constructor(e,o){const a={},u={};this.haveRenderCallbacks=[];const d=[];this.addImages(e,a,d),this.addImages(o,u,d);const{w:m,h:y}=Dg(d),b=new Fo({width:m||1,height:y||1});for(const T in e){const I=e[T],M=a[T].paddedRect;Fo.copy(I.data,b,{x:0,y:0},{x:M.x+1,y:M.y+1},I.data)}for(const T in o){const I=o[T],M=u[T].paddedRect,P=M.x+1,B=M.y+1,j=I.data.width,q=I.data.height;Fo.copy(I.data,b,{x:0,y:0},{x:P,y:B},I.data),Fo.copy(I.data,b,{x:0,y:q-1},{x:P,y:B-1},{width:j,height:1}),Fo.copy(I.data,b,{x:0,y:0},{x:P,y:B+q},{width:j,height:1}),Fo.copy(I.data,b,{x:j-1,y:0},{x:P-1,y:B},{width:1,height:q}),Fo.copy(I.data,b,{x:0,y:0},{x:P+j,y:B},{width:1,height:q})}this.image=b,this.iconPositions=a,this.patternPositions=u}addImages(e,o,a){for(const u in e){const d=e[u],m={x:0,y:0,w:d.data.width+2,h:d.data.height+2};a.push(m),o[u]=new Og(m,d),d.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(a=>e.hasImage(a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const a in e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),o),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),o)}patchUpdatedImage(e,o,a){if(!e||!o||e.version===o.version)return;e.version=o.version;const[u,d]=e.tl;a.update(o.data,void 0,{x:u,y:d})}}Bt(Og,"ImagePosition"),Bt(w1,"ImageAtlas");const as={horizontal:1,vertical:2,horizontalOnly:3};class wd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const a=new wd;return a.scale=e||1,a.fontStack=o,a}static forImage(e){const o=new wd;return o.imageName=e,o}}class Kh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const a=new Kh;for(let u=0;u<e.sections.length;u++){const d=e.sections[u];d.image?a.addImageSection(d):a.addTextSection(d,o)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(o,a){let u="";for(let d=0;d<o.length;d++){const m=o.charCodeAt(d+1)||null,y=o.charCodeAt(d-1)||null;u+=!a&&(m&&Rh(m)&&!xd[o[d+1]]||y&&Rh(y)&&!xd[o[d-1]])||!xd[o[d]]?o[d]:xd[o[d]]}return u}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&im[this.text.charCodeAt(a)];a++)e++;let o=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&im[this.text.charCodeAt(a)];a--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const a=new Kh;return a.text=this.text.substring(e,o),a.sectionIndex=this.sectionIndex.slice(e,o),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(wd.forText(e.scale,e.fontStack||o));const a=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(a)}addImageSection(e){const o=e.image?e.image.name:"";if(o.length===0)return void Gt("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(wd.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zg(r,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q){const Q=Kh.fromFeature(r,u);let le;M===as.vertical&&Q.verticalizePunctuation(P);const{processBidirectionalText:xe,processStyledBidirectionalText:Me}=Ro;if(xe&&Q.sections.length===1){le=[];const Re=xe(Q.toString(),Rg(Q,T,d,e,a,B,j));for(const it of Re){const at=new Kh;at.text=it,at.sections=Q.sections;for(let vt=0;vt<it.length;vt++)at.sectionIndex.push(0);le.push(at)}}else if(Me){le=[];const Re=Me(Q.text,Q.sectionIndex,Rg(Q,T,d,e,a,B,j));for(const it of Re){const at=new Kh;at.text=it[0],at.sectionIndex=it[1],at.sections=Q.sections,le.push(at)}}else le=function(Re,it){const at=[],vt=Re.text;let xt=0;for(const et of it)at.push(Re.substring(xt,et)),xt=et;return xt<vt.length&&at.push(Re.substring(xt,vt.length)),at}(Q,Rg(Q,T,d,e,a,B,j));const Le=[],ze={positionedLines:Le,text:Q.toString(),top:I[1],bottom:I[1],left:I[0],right:I[0],writingMode:M,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Re,it,at,vt,xt,et,dt,Tt,Nt,Lt,Rt,In){let Hn=0,kn=0,Fn=0;const cn=Tt==="right"?1:Tt==="left"?0:.5;let Yt=!1;for(const fi of xt){const ei=fi.getSections();for(const bi of ei){if(bi.imageName)continue;const Gi=it[bi.fontStack];if(Gi&&(Yt=Gi.ascender!==void 0&&Gi.descender!==void 0,!Yt))break}if(!Yt)break}let Kn=0;for(const fi of xt){fi.trim();const ei=fi.getMaxScale(),bi=(ei-1)*Ur,Gi={positionedGlyphs:[],lineOffset:0};Re.positionedLines[Kn]=Gi;const Yi=Gi.positionedGlyphs;let mr=0;if(!fi.length()){kn+=et,++Kn;continue}let wr=0,jo=0;for(let Ei=0;Ei<fi.length();Ei++){const co=fi.getSection(Ei),Vo=fi.getSectionIndex(Ei),kr=fi.getCharCode(Ei);let Er=co.scale,zi=null,ki=null,To=null,uo=Ur,sr=0;const ho=!(Nt===as.horizontal||!Rt&&!zh(kr)||Rt&&(im[kr]||(hi=kr,Ni(hi)||Oo(hi)||fr(hi)||ic(hi)||Dh(hi))));if(co.imageName){const Jr=vt[co.imageName];if(!Jr)continue;To=co.imageName,Re.iconsInText=Re.iconsInText||!0,ki=Jr.paddedRect;const Tr=Jr.displaySize;Er=Er*Ur/In,zi={width:Tr[0],height:Tr[1],left:1,top:-3,advance:ho?Tr[1]:Tr[0],localGlyph:!1},sr=Yt?-zi.height*Er:ei*Ur-17-Tr[1]*Er,uo=zi.advance;const Ls=(ho?Tr[0]:Tr[1])*Er-Ur*ei;Ls>0&&Ls>mr&&(mr=Ls)}else{const Jr=at[co.fontStack];if(!Jr)continue;Jr[kr]&&(ki=Jr[kr]);const Tr=it[co.fontStack];if(!Tr)continue;const Ls=Tr.glyphs[kr];if(!Ls)continue;if(zi=Ls.metrics,uo=kr!==8203?Ur:0,Yt){const vc=Tr.ascender!==void 0?Math.abs(Tr.ascender):0,Pd=Tr.descender!==void 0?Math.abs(Tr.descender):0,Dd=(vc+Pd)*Er;wr<Dd&&(wr=Dd,jo=(vc-Pd)/2*Er),sr=-vc*Er}else sr=(ei-Er)*Ur-17}ho?(Re.verticalizable=!0,Yi.push({glyph:kr,imageName:To,x:Hn,y:kn+sr,vertical:ho,scale:Er,localGlyph:zi.localGlyph,fontStack:co.fontStack,sectionIndex:Vo,metrics:zi,rect:ki}),Hn+=uo*Er+Lt):(Yi.push({glyph:kr,imageName:To,x:Hn,y:kn+sr,vertical:ho,scale:Er,localGlyph:zi.localGlyph,fontStack:co.fontStack,sectionIndex:Vo,metrics:zi,rect:ki}),Hn+=zi.advance*Er+Lt)}Yi.length!==0&&(Fn=Math.max(Hn-Lt,Fn),Yt?C1(Yi,cn,mr,jo,et*ei/2):C1(Yi,cn,mr,0,et/2)),Hn=0;const Eo=et*ei+mr;Gi.lineOffset=Math.max(mr,bi),kn+=Eo,++Kn}var hi;const dr=kn,{horizontalAlign:Mi,verticalAlign:pr}=Ng(dt);(function(fi,ei,bi,Gi,Yi,mr){const wr=(ei-bi)*Yi,jo=-mr*Gi;for(const Eo of fi)for(const Ei of Eo.positionedGlyphs)Ei.x+=wr,Ei.y+=jo})(Re.positionedLines,cn,Mi,pr,Fn,dr),Re.top+=-pr*dr,Re.bottom=Re.top+dr,Re.left+=-Mi*Fn,Re.right=Re.left+Fn,Re.hasBaseline=Yt}(ze,e,o,a,le,m,y,b,M,T,P,q),!function(Re){for(const it of Re)if(it.positionedGlyphs.length!==0)return!1;return!0}(Le)&&ze}const im={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_M={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function E1(r,e,o,a,u,d){if(e.imageName){const m=a[e.imageName];return m?m.displaySize[0]*e.scale*Ur/d+u:0}{const m=o[e.fontStack],y=m&&m.glyphs[r];return y?y.metrics.advance*e.scale+u:0}}function T1(r,e,o,a){const u=Math.pow(r-e,2);return a?r<e?u/2:2*u:u+Math.abs(o)*o}function gM(r,e,o){let a=0;return r===10&&(a-=1e4),o&&(a+=150),r!==40&&r!==65288||(a+=50),e!==41&&e!==65289||(a+=50),a}function A1(r,e,o,a,u,d){let m=null,y=T1(e,o,u,d);for(const b of a){const T=T1(e-b.x,o,u,d)+b.badness;T<=y&&(m=b,y=T)}return{index:r,x:e,priorBreak:m,badness:y}}function S1(r){return r?S1(r.priorBreak).concat(r.index):[]}function Rg(r,e,o,a,u,d,m){if(d!=="point")return[];if(!r)return[];const y=[],b=function(P,B,j,q,Q,le){let xe=0;for(let Me=0;Me<P.length();Me++){const Le=P.getSection(Me);xe+=E1(P.getCharCode(Me),Le,q,Q,B,le)}return xe/Math.max(1,Math.ceil(xe/j))}(r,e,o,a,u,m),T=r.text.indexOf("\u200B")>=0;let I=0;for(let P=0;P<r.length();P++){const B=r.getSection(P),j=r.getCharCode(P);if(im[j]||(I+=E1(j,B,a,u,e,m)),P<r.length()-1){const q=!((M=j)<11904||!(tc(M)||kh(M)||rc(M)||Ea(M)||uu(M)||gr(M)||Lh(M)||Is(M)||hu(M)||fu(M)||cu(M)||Jf(M)||zo(M)||wa(M)||Kr(M)||nc(M)||ec(M)||Op(M)||sl(M)||Ph(M)));(_M[j]||q||B.imageName)&&y.push(A1(P+1,I,b,y,gM(j,r.getCharCode(P+1),q&&T),!1))}}var M;return S1(A1(r.length(),I,b,y,0,!0))}function Ng(r){let e=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function C1(r,e,o,a,u){if(!(e||o||a||u))return;const d=r.length-1,m=r[d],y=(m.x+m.metrics.advance*m.scale)*e;for(let b=0;b<=d;b++)r[b].x-=y,r[b].y+=o+a+u}function yM(r,e,o){const{horizontalAlign:a,verticalAlign:u}=Ng(o),d=e[0]-r.displaySize[0]*a,m=e[1]-r.displaySize[1]*u;return{image:r,top:m,bottom:m+r.displaySize[1],left:d,right:d+r.displaySize[0]}}function I1(r,e,o,a,u,d){const m=r.image;let y;if(m.content){const Q=m.content,le=m.pixelRatio||1;y=[Q[0]/le,Q[1]/le,m.displaySize[0]-Q[2]/le,m.displaySize[1]-Q[3]/le]}const b=e.left*d,T=e.right*d;let I,M,P,B;o==="width"||o==="both"?(B=u[0]+b-a[3],M=u[0]+T+a[1]):(B=u[0]+(b+T-m.displaySize[0])/2,M=B+m.displaySize[0]);const j=e.top*d,q=e.bottom*d;return o==="height"||o==="both"?(I=u[1]+j-a[0],P=u[1]+q+a[2]):(I=u[1]+(j+q-m.displaySize[1])/2,P=I+m.displaySize[1]),{image:m,top:I,right:M,bottom:P,left:B,collisionPadding:y}}class pl extends D{constructor(e,o,a,u,d){super(e,o),this.angle=u,this.z=a,d!==void 0&&(this.segment=d)}clone(){return new pl(this.x,this.y,this.z,this.angle,this.segment)}}function M1(r,e,o,a,u){if(e.segment===void 0)return!0;let d=e,m=e.segment+1,y=0;for(;y>-o/2;){if(m--,m<0)return!1;y-=r[m].dist(d),d=r[m]}y+=r[m].dist(r[m+1]),m++;const b=[];let T=0;for(;y<o/2;){const I=r[m],M=r[m+1];if(!M)return!1;let P=r[m-1].angleTo(I)-I.angleTo(M);for(P=Math.abs((P+3*Math.PI)%(2*Math.PI)-Math.PI),b.push({distance:y,angleDelta:P}),T+=P;y-b[0].distance>a;)T-=b.shift().angleDelta;if(T>u)return!1;m++,y+=I.dist(M)}return!0}function k1(r){let e=0;for(let o=0;o<r.length-1;o++)e+=r[o].dist(r[o+1]);return e}function L1(r,e,o){return r?.6*e*o:0}function P1(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function vM(r,e,o,a,u,d){const m=L1(o,u,d),y=P1(o,a)*d;let b=0;const T=k1(r)/2;for(let I=0;I<r.length-1;I++){const M=r[I],P=r[I+1],B=M.dist(P);if(b+B>T){const j=(T-b)/B,q=mn(M.x,P.x,j),Q=mn(M.y,P.y,j),le=new pl(q,Q,0,P.angleTo(M),I);return!m||M1(r,le,y,m,e)?le:void 0}b+=B}}function xM(r,e,o,a,u,d,m,y,b){const T=L1(a,d,m),I=P1(a,u),M=I*m,P=r[0].x===0||r[0].x===b||r[0].y===0||r[0].y===b;return e-M<e/4&&(e=M+e/4),D1(r,P?e/2*y%e:(I/2+2*d)*m*y%e,e,T,o,M,P,!1,b)}function D1(r,e,o,a,u,d,m,y,b){const T=d/2,I=k1(r);let M=0,P=e-o,B=[];for(let j=0;j<r.length-1;j++){const q=r[j],Q=r[j+1],le=q.dist(Q),xe=Q.angleTo(q);for(;P+o<M+le;){P+=o;const Me=(P-M)/le,Le=mn(q.x,Q.x,Me),ze=mn(q.y,Q.y,Me);if(Le>=0&&Le<b&&ze>=0&&ze<b&&P-T>=0&&P+T<=I){const Re=new pl(Le,ze,0,xe,j);Re._round(),a&&!M1(r,Re,d,a,u)||B.push(Re)}}M+=le}return y||B.length||m||(B=D1(r,M/2,o,a,u,d,m,!0,b)),B}function O1(r,e,o,a,u){const d=[];for(let m=0;m<r.length;m++){const y=r[m];let b;for(let T=0;T<y.length-1;T++){let I=y[T],M=y[T+1];I.x<e&&M.x<e||(I.x<e?I=new D(e,I.y+(e-I.x)/(M.x-I.x)*(M.y-I.y))._round():M.x<e&&(M=new D(e,I.y+(e-I.x)/(M.x-I.x)*(M.y-I.y))._round()),I.y<o&&M.y<o||(I.y<o?I=new D(I.x+(o-I.y)/(M.y-I.y)*(M.x-I.x),o)._round():M.y<o&&(M=new D(I.x+(o-I.y)/(M.y-I.y)*(M.x-I.x),o)._round()),I.x>=a&&M.x>=a||(I.x>=a?I=new D(a,I.y+(a-I.x)/(M.x-I.x)*(M.y-I.y))._round():M.x>=a&&(M=new D(a,I.y+(a-I.x)/(M.x-I.x)*(M.y-I.y))._round()),I.y>=u&&M.y>=u||(I.y>=u?I=new D(I.x+(u-I.y)/(M.y-I.y)*(M.x-I.x),u)._round():M.y>=u&&(M=new D(I.x+(u-I.y)/(M.y-I.y)*(M.x-I.x),u)._round()),b&&I.equals(b[b.length-1])||(b=[I],d.push(b)),b.push(M)))))}}return d}Bt(pl,"Anchor");const Ed=1e20;function z1(r,e,o,a,u,d,m,y,b){for(let T=e;T<e+a;T++)R1(r,o*d+T,d,u,m,y,b);for(let T=o;T<o+u;T++)R1(r,T*d+e,1,a,m,y,b)}function R1(r,e,o,a,u,d,m){d[0]=0,m[0]=-Ed,m[1]=Ed,u[0]=r[e];for(let y=1,b=0,T=0;y<a;y++){u[y]=r[e+y*o];const I=y*y;do{const M=d[b];T=(u[y]-u[M]+I-M*M)/(y-M)/2}while(T<=m[b]&&--b>-1);b++,d[b]=y,m[b]=T,m[b+1]=Ed}for(let y=0,b=0;y<a;y++){for(;m[b+1]<y;)b++;const T=d[b],I=y-T;r[e+y*o]=u[T]+I*I}}const Bg={none:0,ideographs:1,all:2};class Jh{constructor(e,o,a){this.requestManager=e,this.localGlyphMode=o,this.localFontFamily=a,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,o){const a=[];for(const u in e)for(const d of e[u])a.push({stack:u,id:d});nt(a,({stack:u,id:d},m)=>{let y=this.entries[u];y||(y=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let b=y.glyphs[d];if(b!==void 0)return void m(null,{stack:u,id:d,glyph:b});if(b=this._tinySDF(y,u,d),b)return y.glyphs[d]=b,void m(null,{stack:u,id:d,glyph:b});const T=Math.floor(d/256);if(256*T>65535)return void m(new Error("glyphs > 65535 not supported"));if(y.ranges[T])return void m(null,{stack:u,id:d,glyph:b});let I=y.requests[T];I||(I=y.requests[T]=[],Jh.loadGlyphRange(u,T,this.url,this.requestManager,(M,P)=>{if(P){y.ascender=P.ascender,y.descender=P.descender;for(const B in P.glyphs)this._doesCharSupportLocalGlyph(+B)||(y.glyphs[+B]=P.glyphs[+B]);y.ranges[T]=!0}for(const B of I)B(M,P);delete y.requests[T]})),I.push((M,P)=>{M?m(M):P&&m(null,{stack:u,id:d,glyph:P.glyphs[d]||null})})},(u,d)=>{if(u)o(u);else if(d){const m={};for(const{stack:y,id:b,glyph:T}of d)m[y]===void 0&&(m[y]={}),m[y].glyphs===void 0&&(m[y].glyphs={}),m[y].glyphs[b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},m[y].ascender=this.entries[y].ascender,m[y].descender=this.entries[y].descender;o(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Bg.none&&(this.localGlyphMode===Bg.all?!!this.localFontFamily:!!this.localFontFamily&&(fu(e)||du(e)||zo(e)||ec(e)||Is(e)))}_tinySDF(e,o,a){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(a))return;let d=e.tinySDF;if(!d){let q="400";/bold/i.test(o)?q="900":/medium/i.test(o)?q="500":/light/i.test(o)&&(q="200"),d=e.tinySDF=new Jh.TinySDF({fontFamily:u,fontWeight:q,fontSize:48,buffer:6,radius:16}),d.fontWeight=q}if(this.localGlyphs[d.fontWeight][a])return this.localGlyphs[d.fontWeight][a];const m=String.fromCharCode(a),{data:y,width:b,height:T,glyphWidth:I,glyphHeight:M,glyphLeft:P,glyphTop:B,glyphAdvance:j}=d.draw(m);return this.localGlyphs[d.fontWeight][a]={id:a,bitmap:new fl({width:b,height:T},y),metrics:{width:I/2,height:M/2,left:P/2,top:B/2-27,advance:j/2,localGlyph:!0}}}}function N1(r,e,o,a){const u=[],d=r.image,m=d.pixelRatio,y=d.paddedRect.w-2,b=d.paddedRect.h-2,T=r.right-r.left,I=r.bottom-r.top,M=d.stretchX||[[0,y]],P=d.stretchY||[[0,b]],B=(et,dt)=>et+dt[1]-dt[0],j=M.reduce(B,0),q=P.reduce(B,0),Q=y-j,le=b-q;let xe=0,Me=j,Le=0,ze=q,Re=0,it=Q,at=0,vt=le;if(d.content&&a){const et=d.content;xe=rm(M,0,et[0]),Le=rm(P,0,et[1]),Me=rm(M,et[0],et[2]),ze=rm(P,et[1],et[3]),Re=et[0]-xe,at=et[1]-Le,it=et[2]-et[0]-Me,vt=et[3]-et[1]-ze}const xt=(et,dt,Tt,Nt)=>{const Lt=om(et.stretch-xe,Me,T,r.left),Rt=sm(et.fixed-Re,it,et.stretch,j),In=om(dt.stretch-Le,ze,I,r.top),Hn=sm(dt.fixed-at,vt,dt.stretch,q),kn=om(Tt.stretch-xe,Me,T,r.left),Fn=sm(Tt.fixed-Re,it,Tt.stretch,j),cn=om(Nt.stretch-Le,ze,I,r.top),Yt=sm(Nt.fixed-at,vt,Nt.stretch,q),Kn=new D(Lt,In),hi=new D(kn,In),dr=new D(kn,cn),Mi=new D(Lt,cn),pr=new D(Rt/m,Hn/m),fi=new D(Fn/m,Yt/m),ei=e*Math.PI/180;if(ei){const Yi=Math.sin(ei),mr=Math.cos(ei),wr=[mr,-Yi,Yi,mr];Kn._matMult(wr),hi._matMult(wr),Mi._matMult(wr),dr._matMult(wr)}const bi=et.stretch+et.fixed,Gi=dt.stretch+dt.fixed;return{tl:Kn,tr:hi,bl:Mi,br:dr,tex:{x:d.paddedRect.x+1+bi,y:d.paddedRect.y+1+Gi,w:Tt.stretch+Tt.fixed-bi,h:Nt.stretch+Nt.fixed-Gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pr,pixelOffsetBR:fi,minFontScaleX:it/m/T,minFontScaleY:vt/m/I,isSDF:o}};if(a&&(d.stretchX||d.stretchY)){const et=B1(M,Q,j),dt=B1(P,le,q);for(let Tt=0;Tt<et.length-1;Tt++){const Nt=et[Tt],Lt=et[Tt+1];for(let Rt=0;Rt<dt.length-1;Rt++)u.push(xt(Nt,dt[Rt],Lt,dt[Rt+1]))}}else u.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:b+1}));return u}function rm(r,e,o){let a=0;for(const u of r)a+=Math.max(e,Math.min(o,u[1]))-Math.max(e,Math.min(o,u[0]));return a}function B1(r,e,o){const a=[{fixed:-1,stretch:0}];for(const[u,d]of r){const m=a[a.length-1];a.push({fixed:u-m.stretch,stretch:m.stretch}),a.push({fixed:u-m.stretch,stretch:m.stretch+(d-u)})}return a.push({fixed:e+1,stretch:o}),a}function om(r,e,o,a){return r/e*o+a}function sm(r,e,o,a){return r-e*o/a}function bM(r,e,o,a){const u=e+r.positionedLines[a].lineOffset;return a===0?o+u/2:o+(u+(e+r.positionedLines[a-1].lineOffset))/2}Jh.loadGlyphRange=function(r,e,o,a,u){const d=256*e,m=d+255,y=a.transformRequest(a.normalizeGlyphsURL(o).replace("{fontstack}",r).replace("{range}",`${d}-${m}`),se.Glyphs);de(y,(b,T)=>{if(b)u(b);else if(T){const I={},M=function(P){return new bd(P).readFields(dM,{})}(T);for(const P of M.glyphs)I[P.id]=P;u(null,{glyphs:I,ascender:M.ascender,descender:M.descender})}})},Jh.TinySDF=class{constructor({fontSize:r=24,buffer:e=3,radius:o=8,cutoff:a=.25,fontFamily:u="sans-serif",fontWeight:d="normal",fontStyle:m="normal"}){this.buffer=e,this.cutoff=a,this.radius=o;const y=this.size=r+4*e,b=this._createCanvas(y),T=this.ctx=b.getContext("2d",{willReadFrequently:!0});T.font=`${m} ${d} ${r}px ${u}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(r){const e=document.createElement("canvas");return e.width=e.height=r,e}draw(r){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:a,actualBoundingBoxLeft:u,actualBoundingBoxRight:d}=this.ctx.measureText(r),m=Math.floor(o),y=Math.min(this.size-this.buffer,Math.ceil(d-u)),b=Math.min(this.size-this.buffer,Math.ceil(o)+Math.ceil(a)),T=y+2*this.buffer,I=b+2*this.buffer,M=T*I,P=new Uint8ClampedArray(M),B={data:P,width:T,height:I,glyphWidth:y,glyphHeight:b,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(y===0||b===0)return B;const{ctx:j,buffer:q,gridInner:Q,gridOuter:le}=this;j.clearRect(q,q,y,b),j.fillText(r,q,q+m+1);const xe=j.getImageData(q,q,y,b);le.fill(Ed,0,M),Q.fill(0,0,M);for(let Me=0;Me<b;Me++)for(let Le=0;Le<y;Le++){const ze=xe.data[4*(Me*y+Le)+3]/255;if(ze===0)continue;const Re=(Me+q)*T+Le+q;if(ze===1)le[Re]=0,Q[Re]=Ed;else{const it=.5-ze;le[Re]=it>0?it*it:0,Q[Re]=it<0?it*it:0}}z1(le,0,0,T,I,T,this.f,this.v,this.z),z1(Q,q,q,y,b,T,this.f,this.v,this.z);for(let Me=0;Me<M;Me++){const Le=Math.sqrt(le[Me])-Math.sqrt(Q[Me]);P[Me]=Math.round(255-255*(Le/this.radius+this.cutoff))}return B}};class wM{constructor(e=[],o=EM){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:a}=this,u=o[e];for(;e>0;){const d=e-1>>1,m=o[d];if(a(u,m)>=0)break;o[e]=m,e=d}o[e]=u}_down(e){const{data:o,compare:a}=this,u=this.length>>1,d=o[e];for(;e<u;){let m=1+(e<<1),y=o[m];const b=m+1;if(b<this.length&&a(o[b],y)<0&&(m=b,y=o[b]),a(y,d)>=0)break;o[e]=y,e=m}o[e]=d}}function EM(r,e){return r<e?-1:r>e?1:0}function TM(r,e=1,o=!1){let a=1/0,u=1/0,d=-1/0,m=-1/0;const y=r[0];for(let B=0;B<y.length;B++){const j=y[B];(!B||j.x<a)&&(a=j.x),(!B||j.y<u)&&(u=j.y),(!B||j.x>d)&&(d=j.x),(!B||j.y>m)&&(m=j.y)}const b=Math.min(d-a,m-u);let T=b/2;const I=new wM([],AM);if(b===0)return new D(a,u);for(let B=a;B<d;B+=b)for(let j=u;j<m;j+=b)I.push(new Qh(B+T,j+T,T,r));let M=function(B){let j=0,q=0,Q=0;const le=B[0];for(let xe=0,Me=le.length,Le=Me-1;xe<Me;Le=xe++){const ze=le[xe],Re=le[Le],it=ze.x*Re.y-Re.x*ze.y;q+=(ze.x+Re.x)*it,Q+=(ze.y+Re.y)*it,j+=3*it}return new Qh(q/j,Q/j,0,B)}(r),P=I.length;for(;I.length;){const B=I.pop();(B.d>M.d||!M.d)&&(M=B,o&&console.log("found best %d after %d probes",Math.round(1e4*B.d)/1e4,P)),B.max-M.d<=e||(T=B.h/2,I.push(new Qh(B.p.x-T,B.p.y-T,T,r)),I.push(new Qh(B.p.x+T,B.p.y-T,T,r)),I.push(new Qh(B.p.x-T,B.p.y+T,T,r)),I.push(new Qh(B.p.x+T,B.p.y+T,T,r)),P+=4)}return o&&(console.log(`num probes: ${P}`),console.log(`best distance: ${M.d}`)),M.p}function AM(r,e){return e.max-r.max}function Qh(r,e,o,a){this.p=new D(r,e),this.h=o,this.d=function(u,d){let m=!1,y=1/0;for(let b=0;b<d.length;b++){const T=d[b];for(let I=0,M=T.length,P=M-1;I<M;P=I++){const B=T[I],j=T[P];B.y>u.y!=j.y>u.y&&u.x<(j.x-B.x)*(u.y-B.y)/(j.y-B.y)+B.x&&(m=!m),y=Math.min(y,Ox(u,B,j))}}return(m?1:-1)*Math.sqrt(y)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}const Fg=Number.POSITIVE_INFINITY,SM=Math.sqrt(2);function F1(r,e){return e[1]!==Fg?function(o,a,u){let d=0,m=0;switch(a=Math.abs(a),u=Math.abs(u),o){case"top-right":case"top-left":case"top":m=u-7;break;case"bottom-right":case"bottom-left":case"bottom":m=7-u}switch(o){case"top-right":case"bottom-right":case"right":d=-a;break;case"top-left":case"bottom-left":case"left":d=a}return[d,m]}(r,e[0],e[1]):function(o,a){let u=0,d=0;a<0&&(a=0);const m=a/SM;switch(o){case"top-right":case"top-left":d=m-7;break;case"bottom-right":case"bottom-left":d=7-m;break;case"bottom":d=7-a;break;case"top":d=a-7}switch(o){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=a;break;case"right":u=-a}return[u,d]}(r,e[0])}function CM(r,e,o,a,u,d,m,y,b,T){r.createArrays(),r.tilePixelRatio=On/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const I=r.layers[0].layout,M=r.layers[0]._unevaluatedLayout._values,P={};if(r.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:Q}=r.textSizeData;P.compositeTextSizes=[M["text-size"].possiblyEvaluate(new Ii(q),y),M["text-size"].possiblyEvaluate(new Ii(Q),y)]}if(r.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:Q}=r.iconSizeData;P.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new Ii(q),y),M["icon-size"].possiblyEvaluate(new Ii(Q),y)]}P.layoutTextSize=M["text-size"].possiblyEvaluate(new Ii(b+1),y),P.layoutIconSize=M["icon-size"].possiblyEvaluate(new Ii(b+1),y),P.textMaxSize=M["text-size"].possiblyEvaluate(new Ii(18),y);const B=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",j=I.get("text-size");for(const q of r.features){const Q=I.get("text-font").evaluate(q,{},y).join(","),le=j.evaluate(q,{},y),xe=P.layoutTextSize.evaluate(q,{},y),Me=(P.layoutIconSize.evaluate(q,{},y),{horizontal:{},vertical:void 0}),Le=q.text;let ze,Re=[0,0];if(Le){const vt=Le.toString(),xt=I.get("text-letter-spacing").evaluate(q,{},y)*Ur,et=I.get("text-line-height").evaluate(q,{},y)*Ur,dt=Rp(vt)?xt:0,Tt=I.get("text-anchor").evaluate(q,{},y),Nt=I.get("text-variable-anchor");if(!Nt){const Fn=I.get("text-radial-offset").evaluate(q,{},y);Re=Fn?F1(Tt,[Fn*Ur,Fg]):I.get("text-offset").evaluate(q,{},y).map(cn=>cn*Ur)}let Lt=B?"center":I.get("text-justify").evaluate(q,{},y);const Rt=I.get("symbol-placement"),In=Rt==="point",Hn=Rt==="point"?I.get("text-max-width").evaluate(q,{},y)*Ur:0,kn=Fn=>{r.allowVerticalPlacement&&Oh(vt)&&(Me.vertical=zg(Le,e,o,u,Q,Hn,et,Tt,Fn,dt,Re,as.vertical,!0,Rt,xe,le))};if(!B&&Nt){const Fn=Lt==="auto"?Nt.map(Yt=>$g(Yt)):[Lt];let cn=!1;for(let Yt=0;Yt<Fn.length;Yt++){const Kn=Fn[Yt];if(!Me.horizontal[Kn])if(cn)Me.horizontal[Kn]=Me.horizontal[0];else{const hi=zg(Le,e,o,u,Q,Hn,et,"center",Kn,dt,Re,as.horizontal,!1,Rt,xe,le);hi&&(Me.horizontal[Kn]=hi,cn=hi.positionedLines.length===1)}}kn("left")}else{if(Lt==="auto"&&(Lt=$g(Tt)),In||I.get("text-writing-mode").indexOf("horizontal")>=0||!Oh(vt)){const Fn=zg(Le,e,o,u,Q,Hn,et,Tt,Lt,dt,Re,as.horizontal,!1,Rt,xe,le);Fn&&(Me.horizontal[Lt]=Fn)}kn(Rt==="point"?"left":Lt)}}let it=!1;if(q.icon&&q.icon.name){const vt=a[q.icon.name];vt&&(ze=yM(u[q.icon.name],I.get("icon-offset").evaluate(q,{},y),I.get("icon-anchor").evaluate(q,{},y)),it=vt.sdf,r.sdfIcons===void 0?r.sdfIcons=vt.sdf:r.sdfIcons!==vt.sdf&&Gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(vt.pixelRatio!==r.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const at=U1(Me.horizontal)||Me.vertical;r.iconsInText||(r.iconsInText=!!at&&at.iconsInText),(at||ze)&&IM(r,q,Me,ze,a,P,xe,0,Re,it,m,y,T)}d&&r.generateCollisionDebugBuffers(b,r.collisionBoxArray)}function $g(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function IM(r,e,o,a,u,d,m,y,b,T,I,M,P){let B=d.textMaxSize.evaluate(e,{},M);B===void 0&&(B=m);const j=r.layers[0].layout,q=j.get("icon-offset").evaluate(e,{},M),Q=U1(o.horizontal)||o.vertical,le=m/24,xe=r.tilePixelRatio*B/24,Me=(et=r.overscaling,r.zoom>18&&et>2&&(et>>=1),Math.max(On/(512*et),1)*j.get("symbol-spacing")),Le=j.get("text-padding")*r.tilePixelRatio,ze=j.get("icon-padding")*r.tilePixelRatio,Re=J(j.get("text-max-angle")),it=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",at=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",vt=j.get("symbol-placement"),xt=Me/2;var et;const dt=j.get("icon-text-fit");let Tt;a&&dt!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(Tt=I1(a,o.vertical,dt,j.get("icon-text-fit-padding"),q,le)),Q&&(a=I1(a,Q,dt,j.get("icon-text-fit-padding"),q,le)));const Nt=(Lt,Rt,In)=>{if(Rt.x<0||Rt.x>=On||Rt.y<0||Rt.y>=On)return;const{x:Hn,y:kn,z:Fn}=P.projectTilePoint(Rt.x,Rt.y,In),cn=new pl(Hn,kn,Fn,0,void 0);(function(Yt,Kn,hi,dr,Mi,pr,fi,ei,bi,Gi,Yi,mr,wr,jo,Eo,Ei,co,Vo,kr,Er,zi,ki,To,uo,sr){const ho=Yt.addToLineVertexArray(Kn,dr);let Jr,Tr,Ls,vc,Pd,Dd,Eb,Tb=0,Ab=0,Sb=0,Cb=0,iy=-1,ry=-1;const Pa={};let Ib=Aa(""),oy=0,sy=0;if(bi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[oy,sy]=bi.layout.get("text-offset").evaluate(zi,{},sr).map(Go=>Go*Ur):(oy=bi.layout.get("text-radial-offset").evaluate(zi,{},sr)*Ur,sy=Fg),Yt.allowVerticalPlacement&&Mi.vertical){const Go=Mi.vertical;if(Eo)Dd=Ug(Go),ei&&(Eb=Ug(ei));else{const Ho=bi.layout.get("text-rotate").evaluate(zi,{},sr)+90;Ls=am(Gi,hi,Kn,Yi,mr,wr,Go,jo,Ho,Ei),ei&&(vc=am(Gi,hi,Kn,Yi,mr,wr,ei,Vo,Ho))}}if(pr){const Go=bi.layout.get("icon-rotate").evaluate(zi,{},sr),Ho=bi.layout.get("icon-text-fit")!=="none",Od=N1(pr,Go,To,Ho),ly=ei?N1(ei,Go,To,Ho):void 0;Tr=am(Gi,hi,Kn,Yi,mr,wr,pr,Vo,Go),Tb=4*Od.length;const Mb=Yt.iconSizeData;let Au=null;Mb.kind==="source"?(Au=[Ia*bi.layout.get("icon-size").evaluate(zi,{},sr)],Au[0]>dc&&Gt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Mb.kind==="composite"&&(Au=[Ia*ki.compositeIconSizes[0].evaluate(zi,{},sr),Ia*ki.compositeIconSizes[1].evaluate(zi,{},sr)],(Au[0]>dc||Au[1]>dc)&&Gt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,Od,Au,Er,kr,zi,!1,hi,Kn,ho.lineStartIndex,ho.lineLength,-1,uo,sr),iy=Yt.icon.placedSymbolArray.length-1,ly&&(Ab=4*ly.length,Yt.addSymbols(Yt.icon,ly,Au,Er,kr,zi,as.vertical,hi,Kn,ho.lineStartIndex,ho.lineLength,-1,uo,sr),ry=Yt.icon.placedSymbolArray.length-1)}for(const Go in Mi.horizontal){const Ho=Mi.horizontal[Go];Jr||(Ib=Aa(Ho.text),Eo?Pd=Ug(Ho):Jr=am(Gi,hi,Kn,Yi,mr,wr,Ho,jo,bi.layout.get("text-rotate").evaluate(zi,{},sr),Ei));const Od=Ho.positionedLines.length===1;if(Sb+=$1(Yt,hi,Kn,Ho,fi,bi,Eo,zi,Ei,ho,Mi.vertical?as.horizontal:as.horizontalOnly,Od?Object.keys(Mi.horizontal):[Go],Pa,iy,ki,uo,sr),Od)break}Mi.vertical&&(Cb+=$1(Yt,hi,Kn,Mi.vertical,fi,bi,Eo,zi,Ei,ho,as.vertical,["vertical"],Pa,ry,ki,uo,sr));let xc=-1;const ay=(Go,Ho)=>Go?Math.max(Go,Ho):Ho;xc=ay(Pd,xc),xc=ay(Dd,xc),xc=ay(Eb,xc);const lk=xc>-1?1:0;Yt.glyphOffsetArray.length>=pc.MAX_GLYPHS&&Gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zi.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,zi.sortKey),Yt.symbolInstances.emplaceBack(hi.x,hi.y,hi.z,Kn.x,Kn.y,Pa.right>=0?Pa.right:-1,Pa.center>=0?Pa.center:-1,Pa.left>=0?Pa.left:-1,Pa.vertical>=0?Pa.vertical:-1,iy,ry,Ib,Jr!==void 0?Jr:Yt.collisionBoxArray.length,Jr!==void 0?Jr+1:Yt.collisionBoxArray.length,Ls!==void 0?Ls:Yt.collisionBoxArray.length,Ls!==void 0?Ls+1:Yt.collisionBoxArray.length,Tr!==void 0?Tr:Yt.collisionBoxArray.length,Tr!==void 0?Tr+1:Yt.collisionBoxArray.length,vc||Yt.collisionBoxArray.length,vc?vc+1:Yt.collisionBoxArray.length,Yi,Sb,Cb,Tb,Ab,lk,0,oy,sy,xc)})(r,Rt,cn,Lt,o,a,u,Tt,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,Le,it,b,0,ze,at,q,e,d,T,I,M)};if(vt==="line")for(const Lt of O1(e.geometry,0,0,On,On)){const Rt=xM(Lt,Me,Re,o.vertical||Q,a,24,xe,r.overscaling,On);for(const In of Rt){const Hn=Q;Hn&&MM(r,Hn.text,xt,In)||Nt(Lt,In,M)}}else if(vt==="line-center"){for(const Lt of e.geometry)if(Lt.length>1){const Rt=vM(Lt,Re,o.vertical||Q,a,24,xe);Rt&&Nt(Lt,Rt,M)}}else if(e.type==="Polygon")for(const Lt of Ig(e.geometry,0)){const Rt=TM(Lt,16);Nt(Lt[0],new pl(Rt.x,Rt.y,0,0,void 0),M)}else if(e.type==="LineString")for(const Lt of e.geometry)Nt(Lt,new pl(Lt[0].x,Lt[0].y,0,0,void 0),M);else if(e.type==="Point")for(const Lt of e.geometry)for(const Rt of Lt)Nt([Rt],new pl(Rt.x,Rt.y,0,0,void 0),M)}const dc=32640;function $1(r,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q,Q){const le=function(Le,ze,Re,it,at,vt,xt,et){const dt=[];if(ze.positionedLines.length===0)return dt;const Tt=it.layout.get("text-rotate").evaluate(vt,{})*Math.PI/180,Nt=function(kn){const Fn=kn[0],cn=kn[1],Yt=Fn*cn;return Yt>0?[Fn,-cn]:Yt<0?[-Fn,cn]:Fn===0?[cn,Fn]:[cn,-Fn]}(Re);let Lt=Math.abs(ze.top-ze.bottom);for(const kn of ze.positionedLines)Lt-=kn.lineOffset;const Rt=ze.positionedLines.length,In=Lt/Rt;let Hn=ze.top-Re[1];for(let kn=0;kn<Rt;++kn){const Fn=ze.positionedLines[kn];Hn=bM(ze,In,Hn,kn);for(const cn of Fn.positionedGlyphs){if(!cn.rect)continue;const Yt=cn.rect||{};let Kn=4,hi=!0,dr=1,Mi=0;if(cn.imageName){const ki=xt[cn.imageName];if(!ki)continue;if(ki.sdf){Gt("SDF images are not supported in formatted text and will be ignored.");continue}hi=!1,dr=ki.pixelRatio,Kn=1/dr}const pr=(at||et)&&cn.vertical,fi=cn.metrics.advance*cn.scale/2,ei=cn.metrics,bi=cn.rect;if(bi===null)continue;et&&ze.verticalizable&&(Mi=cn.imageName?fi-cn.metrics.width*cn.scale/2:0);const Gi=at?[cn.x+fi,cn.y]:[0,0];let Yi=[0,0],mr=[0,0],wr=!1;at||(pr?(mr=[cn.x+fi+Nt[0],cn.y+Nt[1]-Mi],wr=!0):Yi=[cn.x+fi+Re[0],cn.y+Re[1]-Mi]);const jo=bi.w*cn.scale/(dr*(cn.localGlyph?2:1)),Eo=bi.h*cn.scale/(dr*(cn.localGlyph?2:1));let Ei,co,Vo,kr;if(pr){const ki=cn.y-Hn,To=new D(-fi,fi-ki),uo=-Math.PI/2,sr=new D(...mr);Ei=new D(-fi+Yi[0],Yi[1]),Ei._rotateAround(uo,To)._add(sr),Ei.x+=-ki+fi,Ei.y-=(ei.left-Kn)*cn.scale;const ho=cn.imageName?ei.advance*cn.scale:Ur*cn.scale,Jr=String.fromCharCode(cn.glyph);nM(Jr)?Ei.x+=(1-Kn)*cn.scale:iM(Jr)?Ei.x+=ho-ei.height*cn.scale+(-Kn-1)*cn.scale:Ei.x+=cn.imageName||ei.width+2*Kn===bi.w&&ei.height+2*Kn===bi.h?(ho-Eo)/2:(ho-(ei.height+2*Kn)*cn.scale)/2,co=new D(Ei.x,Ei.y-jo),Vo=new D(Ei.x+Eo,Ei.y),kr=new D(Ei.x+Eo,Ei.y-jo)}else{const ki=(ei.left-Kn)*cn.scale-fi+Yi[0],To=(-ei.top-Kn)*cn.scale+Yi[1],uo=ki+jo,sr=To+Eo;Ei=new D(ki,To),co=new D(uo,To),Vo=new D(ki,sr),kr=new D(uo,sr)}if(Tt){let ki;ki=at?new D(0,0):wr?new D(Nt[0],Nt[1]):new D(Re[0],Re[1]),Ei._rotateAround(Tt,ki),co._rotateAround(Tt,ki),Vo._rotateAround(Tt,ki),kr._rotateAround(Tt,ki)}const Er=new D(0,0),zi=new D(0,0);dt.push({tl:Ei,tr:co,bl:Vo,br:kr,tex:Yt,writingMode:ze.writingMode,glyphOffset:Gi,sectionIndex:cn.sectionIndex,isSDF:hi,pixelOffsetTL:Er,pixelOffsetBR:zi,minFontScaleX:0,minFontScaleY:0})}}return dt}(0,a,b,d,m,y,u,r.allowVerticalPlacement),xe=r.textSizeData;let Me=null;xe.kind==="source"?(Me=[Ia*d.layout.get("text-size").evaluate(y,{},Q)],Me[0]>dc&&Gt(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):xe.kind==="composite"&&(Me=[Ia*j.compositeTextSizes[0].evaluate(y,{},Q),Ia*j.compositeTextSizes[1].evaluate(y,{},Q)],(Me[0]>dc||Me[1]>dc)&&Gt(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,le,Me,b,m,y,I,e,o,T.lineStartIndex,T.lineLength,B,q,Q);for(const Le of M)P[Le]=r.text.placedSymbolArray.length-1;return 4*le.length}function U1(r){for(const e in r)return r[e];return null}function am(r,e,o,a,u,d,m,y,b,T){let I=m.top,M=m.bottom,P=m.left,B=m.right;const j=m.collisionPadding;if(j&&(P-=j[0],I-=j[1],B+=j[2],M+=j[3]),b){const q=new D(P,I),Q=new D(B,I),le=new D(P,M),xe=new D(B,M),Me=J(b);let Le=new D(0,0);T&&(Le=new D(T[0],T[1])),q._rotateAround(Me,Le),Q._rotateAround(Me,Le),le._rotateAround(Me,Le),xe._rotateAround(Me,Le),P=Math.min(q.x,Q.x,le.x,xe.x),B=Math.max(q.x,Q.x,le.x,xe.x),I=Math.min(q.y,Q.y,le.y,xe.y),M=Math.max(q.y,Q.y,le.y,xe.y)}return r.emplaceBack(e.x,e.y,e.z,o.x,o.y,P,I,B,M,y,a,u,d),r.length-1}function Ug(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const e=r.bottom-r.top;return e>0?Math.max(10,e):null}function MM(r,e,o,a){const u=r.compareText;if(e in u){const d=u[e];for(let m=d.length-1;m>=0;m--)if(a.dist(d[m])<o)return!0}else u[e]=[];return u[e].push(a),!1}const kM=wu.VectorTileFeature.types,LM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lm(r,e,o,a,u,d,m,y,b,T,I,M,P,B,j,q){const Q=I?Math.min(dc,Math.round(I[0])):0,le=I?Math.min(dc,Math.round(I[1])):0;r.emplaceBack(e,o,Math.round(32*m),Math.round(32*y),b,T,(Q<<1)+(M?1:0),le,16*P,16*B,256*j,256*q,a,u,d,0)}function jg(r,e,o){r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o)}function PM(r){for(const e of r.sections)if(ig(e.text))return!0;return!1}class Vg{constructor(e){this.layoutVertexArray=new st,this.indexArray=new Jt,this.programConfigurations=e,this.segments=new Xi,this.dynamicLayoutVertexArray=new Dt,this.opacityVertexArray=new Ge,this.placedSymbolArray=new qs}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,a,u){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,XI.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,YI.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,LM,!0),this.opacityVertexBuffer.itemSize=1),(a||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt(Vg,"SymbolBuffers");class Gg{constructor(e,o,a){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new a,this.segments=new Xi,this.collisionVertexArray=new ft,this.collisionVertexArrayExt=new Dt}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,KI.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,JI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Bt(Gg,"CollisionBuffers");class pc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ca([]),this.placementViewportMatrix=Ca([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Lg(this.zoom,o["text-size"]),this.iconSizeData=Lg(this.zoom,o["icon-size"]);const a=this.layers[0].layout,u=a.get("symbol-sort-key"),d=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(m=>as[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Vg(new yu(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Vg(new yu(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new ui,this.lineVertexArray=new rr,this.symbolInstances=new Zi}calculateGlyphDependencies(e,o,a,u,d){for(let m=0;m<e.length;m++)if(o[e.charCodeAt(m)]=!0,u&&d){const y=xd[e.charAt(m)];y&&(o[y.charCodeAt(0)]=!0)}}populate(e,o,a,u){const d=this.layers[0],m=d.layout,y=m.get("text-font"),b=m.get("text-field"),T=m.get("icon-image"),I=(b.value.kind!=="constant"||b.value.value instanceof qi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),M=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,P=m.get("symbol-sort-key");if(this.features=[],!I&&!M)return;const B=o.iconDependencies,j=o.glyphDependencies,q=o.availableImages,Q=new Ii(this.zoom);for(const{feature:le,id:xe,index:Me,sourceLayerIndex:Le}of e){const ze=d._featureFilter.needGeometry,Re=vu(le,ze);if(!d._featureFilter.filter(Q,Re,a))continue;let it,at;if(ze||(Re.geometry=hl(le,a,u)),I){const xt=d.getValueAndResolveTokens("text-field",Re,a,q),et=qi.factory(xt);PM(et)&&(this.hasRTLText=!0),(!this.hasRTLText||Bh()==="unavailable"||this.hasRTLText&&Ro.isParsed())&&(it=tM(et,d,Re))}if(M){const xt=d.getValueAndResolveTokens("icon-image",Re,a,q);at=xt instanceof Ir?xt:Ir.fromString(xt)}if(!it&&!at)continue;const vt=this.sortFeaturesByKey?P.evaluate(Re,{},a):void 0;if(this.features.push({id:xe,text:it,icon:at,index:Me,sourceLayerIndex:Le,geometry:Re.geometry,properties:le.properties,type:kM[le.type],sortKey:vt}),at&&(B[at.name]=!0),it){const xt=y.evaluate(Re,{},a).join(","),et=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(as.vertical)>=0;for(const dt of it.sections)if(dt.image)B[dt.image.name]=!0;else{const Tt=Oh(it.toString()),Nt=dt.fontStack||xt,Lt=j[Nt]=j[Nt]||{};this.calculateGlyphDependencies(dt.text,Lt,et,this.allowVerticalPlacement,Tt)}}}m.get("symbol-placement")==="line"&&(this.features=function(le){const xe={},Me={},Le=[];let ze=0;function Re(xt){Le.push(le[xt]),ze++}function it(xt,et,dt){const Tt=Me[xt];return delete Me[xt],Me[et]=Tt,Le[Tt].geometry[0].pop(),Le[Tt].geometry[0]=Le[Tt].geometry[0].concat(dt[0]),Tt}function at(xt,et,dt){const Tt=xe[et];return delete xe[et],xe[xt]=Tt,Le[Tt].geometry[0].shift(),Le[Tt].geometry[0]=dt[0].concat(Le[Tt].geometry[0]),Tt}function vt(xt,et,dt){const Tt=dt?et[0][et[0].length-1]:et[0][0];return`${xt}:${Tt.x}:${Tt.y}`}for(let xt=0;xt<le.length;xt++){const et=le[xt],dt=et.geometry,Tt=et.text?et.text.toString():null;if(!Tt){Re(xt);continue}const Nt=vt(Tt,dt),Lt=vt(Tt,dt,!0);if(Nt in Me&&Lt in xe&&Me[Nt]!==xe[Lt]){const Rt=at(Nt,Lt,dt),In=it(Nt,Lt,Le[Rt].geometry);delete xe[Nt],delete Me[Lt],Me[vt(Tt,Le[In].geometry,!0)]=In,Le[Rt].geometry=null}else Nt in Me?it(Nt,Lt,dt):Lt in xe?at(Nt,Lt,dt):(Re(xt),xe[Nt]=ze-1,Me[Lt]=ze-1)}return Le.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,xe)=>le.sortKey-xe.sortKey)}update(e,o,a,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,a,u),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,a,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const a=this.lineVertexArray.length,u=e.segment;if(u!==void 0){let d=e.dist(o[u+1]),m=e.dist(o[u]);const y={};for(let b=u+1;b<o.length;b++)y[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:d},b<o.length-1&&(d+=o[b+1].dist(o[b]));for(let b=u||0;b>=0;b--)y[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:m},b>0&&(m+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const T=y[b];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,o,a,u,d,m,y,b,T,I,M,P,B,j){const q=e.indexArray,Q=e.layoutVertexArray,le=e.segments.prepareSegment(4*o.length,Q,q,this.canOverlap?m.sortKey:void 0),xe=this.glyphOffsetArray.length,Me=le.vertexLength,Le=this.allowVerticalPlacement&&y===as.vertical?Math.PI/2:0,ze=m.text&&m.text.sections;for(let Re=0;Re<o.length;Re++){const{tl:it,tr:at,bl:vt,br:xt,tex:et,pixelOffsetTL:dt,pixelOffsetBR:Tt,minFontScaleX:Nt,minFontScaleY:Lt,glyphOffset:Rt,isSDF:In,sectionIndex:Hn}=o[Re],kn=le.vertexLength,Fn=Rt[1];lm(Q,b.x,b.y,b.z,T.x,T.y,it.x,Fn+it.y,et.x,et.y,a,In,dt.x,dt.y,Nt,Lt),lm(Q,b.x,b.y,b.z,T.x,T.y,at.x,Fn+at.y,et.x+et.w,et.y,a,In,Tt.x,dt.y,Nt,Lt),lm(Q,b.x,b.y,b.z,T.x,T.y,vt.x,Fn+vt.y,et.x,et.y+et.h,a,In,dt.x,Tt.y,Nt,Lt),lm(Q,b.x,b.y,b.z,T.x,T.y,xt.x,Fn+xt.y,et.x+et.w,et.y+et.h,a,In,Tt.x,Tt.y,Nt,Lt),jg(e.dynamicLayoutVertexArray,b,Le),q.emplaceBack(kn,kn+1,kn+2),q.emplaceBack(kn+1,kn+2,kn+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rt[0]),Re!==o.length-1&&Hn===o[Re+1].sectionIndex||e.programConfigurations.populatePaintArrays(Q.length,m,m.index,{},B,j,ze&&ze[Hn])}e.placedSymbolArray.emplaceBack(b.x,b.y,b.z,T.x,T.y,xe,this.glyphOffsetArray.length-xe,Me,I,M,T.segment,a?a[0]:0,a?a[1]:0,u[0],u[1],y,0,!1,0,P,0)}_commitLayoutVertex(e,o,a,u,d,m,y){e.emplaceBack(o,a,u,d,m,Math.round(y.x),Math.round(y.y))}_addCollisionDebugVertices(e,o,a,u,d,m,y){const b=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),T=b.vertexLength,I=y.tileAnchorX,M=y.tileAnchorY;for(let B=0;B<4;B++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(o,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(o,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(o,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(o,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,I,M,new D(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,I,M,new D(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,I,M,new D(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,I,M,new D(e.x1,e.y2)),b.vertexLength+=4;const P=a.indexArray;P.emplaceBack(T,T+1),P.emplaceBack(T+1,T+2),P.emplaceBack(T+2,T+3),P.emplaceBack(T+3,T),b.primitiveLength+=4}_addTextDebugCollisionBoxes(e,o,a,u,d,m){for(let y=u;y<d;y++){const b=a.get(y),T=this.getSymbolInstanceTextSize(e,m,o,y);this._addCollisionDebugVertices(b,T,this.textCollisionBox,b.projectedAnchorX,b.projectedAnchorY,b.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,o,a,u,d,m){for(let y=u;y<d;y++){const b=a.get(y),T=this.getSymbolInstanceIconSize(e,o,y);this._addCollisionDebugVertices(b,T,this.iconCollisionBox,b.projectedAnchorX,b.projectedAnchorY,b.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gg(Mt,m1.members,wn),this.iconCollisionBox=new Gg(Mt,m1.members,wn);const a=Zh(this.iconSizeData,e),u=Zh(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._addTextDebugCollisionBoxes(u,e,o,m.textBoxStartIndex,m.textBoxEndIndex,m),this._addTextDebugCollisionBoxes(u,e,o,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,o,m.iconBoxStartIndex,m.iconBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,o,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m)}}getSymbolInstanceTextSize(e,o,a,u){const d=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:u),m=tm(this.textSizeData,e,d)/Ur;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,o,a){const u=this.icon.placedSymbolArray.get(a),d=tm(this.iconSizeData,e,u);return this.tilePixelRatio*d}_commitDebugCollisionVertexUpdate(e,o,a){e.emplaceBack(o,-a,-a),e.emplaceBack(o,a,-a),e.emplaceBack(o,a,a),e.emplaceBack(o,-a,a)}_updateTextDebugCollisionBoxes(e,o,a,u,d,m){for(let y=u;y<d;y++){const b=a.get(y),T=this.getSymbolInstanceTextSize(e,m,o,y);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,b.padding)}}_updateIconDebugCollisionBoxes(e,o,a,u,d){for(let m=u;m<d;m++){const y=a.get(m),b=this.getSymbolInstanceIconSize(e,o,m);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,b,y.padding)}}updateCollisionDebugBuffers(e,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=Zh(this.iconSizeData,e),u=Zh(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._updateTextDebugCollisionBoxes(u,e,o,m.textBoxStartIndex,m.textBoxEndIndex,m),this._updateTextDebugCollisionBoxes(u,e,o,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._updateIconDebugCollisionBoxes(a,e,o,m.iconBoxStartIndex,m.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(a,e,o,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,o,a,u,d,m,y,b,T){const I={};for(let M=o;M<a;M++){const P=e.get(M);I.textBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,padding:P.padding,projectedAnchorX:P.projectedAnchorX,projectedAnchorY:P.projectedAnchorY,projectedAnchorZ:P.projectedAnchorZ,tileAnchorX:P.tileAnchorX,tileAnchorY:P.tileAnchorY},I.textFeatureIndex=P.featureIndex;break}for(let M=u;M<d;M++){const P=e.get(M);I.verticalTextBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,padding:P.padding,projectedAnchorX:P.projectedAnchorX,projectedAnchorY:P.projectedAnchorY,projectedAnchorZ:P.projectedAnchorZ,tileAnchorX:P.tileAnchorX,tileAnchorY:P.tileAnchorY},I.verticalTextFeatureIndex=P.featureIndex;break}for(let M=m;M<y;M++){const P=e.get(M);I.iconBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,padding:P.padding,projectedAnchorX:P.projectedAnchorX,projectedAnchorY:P.projectedAnchorY,projectedAnchorZ:P.projectedAnchorZ,tileAnchorX:P.tileAnchorX,tileAnchorY:P.tileAnchorY},I.iconFeatureIndex=P.featureIndex;break}for(let M=b;M<T;M++){const P=e.get(M);I.verticalIconBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,padding:P.padding,projectedAnchorX:P.projectedAnchorX,projectedAnchorY:P.projectedAnchorY,projectedAnchorZ:P.projectedAnchorZ,tileAnchorX:P.tileAnchorX,tileAnchorY:P.tileAnchorY},I.verticalIconFeatureIndex=P.featureIndex;break}return I}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const a=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const a=e.placedSymbolArray.get(o),u=a.vertexStartIndex+4*a.numGlyphs;for(let d=a.vertexStartIndex;d<u;d+=4)e.indexArray.emplaceBack(d,d+1,d+2),e.indexArray.emplaceBack(d+1,d+2,d+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(e),a=Math.cos(e),u=[],d=[],m=[];for(let y=0;y<this.symbolInstances.length;++y){m.push(y);const b=this.symbolInstances.get(y);u.push(0|Math.round(o*b.tileAnchorX+a*b.tileAnchorY)),d.push(b.featureIndex)}return m.sort((y,b)=>u[y]-u[b]||d[b]-d[y]),m}addToSortKeyRanges(e,o){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===o?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const a=this.symbolInstances.get(o);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((u,d,m)=>{u>=0&&m.indexOf(u)===d&&this.addIndicesForPlacedSymbol(this.text,u)}),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Bt(pc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),pc.MAX_GLYPHS=65535,pc.addDynamicAttributes=jg;const DM=new U({"symbol-placement":new E(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new E(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new E(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new A(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new E(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new E(Ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new E(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new E(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new E(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new A(Ue.layout_symbol["icon-size"]),"icon-text-fit":new E(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new E(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new A(Ue.layout_symbol["icon-image"]),"icon-rotate":new A(Ue.layout_symbol["icon-rotate"]),"icon-padding":new E(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new E(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new A(Ue.layout_symbol["icon-offset"]),"icon-anchor":new A(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new E(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new E(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new E(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new A(Ue.layout_symbol["text-field"]),"text-font":new A(Ue.layout_symbol["text-font"]),"text-size":new A(Ue.layout_symbol["text-size"]),"text-max-width":new A(Ue.layout_symbol["text-max-width"]),"text-line-height":new A(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new A(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new A(Ue.layout_symbol["text-justify"]),"text-radial-offset":new A(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new E(Ue.layout_symbol["text-variable-anchor"]),"text-anchor":new A(Ue.layout_symbol["text-anchor"]),"text-max-angle":new E(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new E(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new A(Ue.layout_symbol["text-rotate"]),"text-padding":new E(Ue.layout_symbol["text-padding"]),"text-keep-upright":new E(Ue.layout_symbol["text-keep-upright"]),"text-transform":new A(Ue.layout_symbol["text-transform"]),"text-offset":new A(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new E(Ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new E(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new E(Ue.layout_symbol["text-optional"])});var Hg={paint:new U({"icon-opacity":new A(Ue.paint_symbol["icon-opacity"]),"icon-color":new A(Ue.paint_symbol["icon-color"]),"icon-halo-color":new A(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new A(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new A(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new E(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new E(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new A(Ue.paint_symbol["text-opacity"]),"text-color":new A(Ue.paint_symbol["text-color"],{runtimeType:Or,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new A(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new A(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new A(Ue.paint_symbol["text-halo-blur"]),"text-translate":new E(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new E(Ue.paint_symbol["text-translate-anchor"])}),layout:DM};class j1{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nr,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt(j1,"FormatSectionOverride",{omit:["defaultValue"]});class cm extends Xs{constructor(e){super(e,Hg)}recalculate(e,o){super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const u=[];for(const d of a)u.indexOf(d)<0&&u.push(d);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,o,a,u){const d=this.layout.get(e).evaluate(o,{},a,u),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||ga(m.value)||!d?d:function(y,b){return b.replace(/{([^{}]+)}/g,(T,I)=>I in y?String(y[I]):"")}(o.properties,d)}createBucket(e){return new pc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Hg.paint.overridableProperties){if(!cm.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),a=new j1(o),u=new Xl(a,o.property.specification);let d=null;d=o.value.kind==="constant"||o.value.kind==="source"?new ya("source",u):new Yl("composite",u,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new v(o.property,d,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,a){return!(!this.layout||o.isDataDriven()||a.isDataDriven())&&cm.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const a=e.get("text-field"),u=Hg.paint.properties[o];let d=!1;const m=y=>{for(const b of y)if(u.overrides&&u.overrides.hasOverride(b))return void(d=!0)};if(a.value.kind==="constant"&&a.value.value instanceof qi)m(a.value.value.sections);else if(a.value.kind==="source"){const y=T=>{d||(T instanceof _o&&Ui(T.value)===It?m(T.value.sections):T instanceof la?m(T.sections):T.eachChild(y))},b=a.value;b._styleExpression&&y(b._styleExpression.expression)}return d}getProgramConfiguration(e){return new cc(this,e)}}var OM={paint:new U({"background-color":new E(Ue.paint_background["background-color"]),"background-pattern":new z(Ue.paint_background["background-pattern"]),"background-opacity":new E(Ue.paint_background["background-opacity"])})},zM={paint:new U({"raster-opacity":new E(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new E(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new E(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new E(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new E(Ue.paint_raster["raster-saturation"]),"raster-contrast":new E(Ue.paint_raster["raster-contrast"]),"raster-resampling":new E(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new E(Ue.paint_raster["raster-fade-duration"])})};class RM extends Xs{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var NM={paint:new U({"sky-type":new E(Ue.paint_sky["sky-type"]),"sky-atmosphere-sun":new E(Ue.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new E(Ue.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new E(Ue.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new E(Ue.paint_sky["sky-gradient-radius"]),"sky-gradient":new N(Ue.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new E(Ue.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new E(Ue.paint_sky["sky-atmosphere-color"]),"sky-opacity":new E(Ue.paint_sky["sky-opacity"])})};function Wg(r,e,o){const a=[0,0,1],u=Zx([]);return function(d,m,y){y*=.5;var b=m[0],T=m[1],I=m[2],M=m[3],P=Math.sin(y),B=Math.cos(y);d[0]=b*B-I*P,d[1]=T*B+M*P,d[2]=I*B+b*P,d[3]=M*B-T*P}(u,u,o?-J(r)+Math.PI:J(r)),Xx(u,u,-J(e)),Wx(a,a,u),cd(a,a)}const BM={circle:class extends Xs{constructor(r){super(r,iI)}createBucket(r){return new hg(r)}queryRadius(r){const e=r;return Vh("circle-radius",this,e)+Vh("circle-stroke-width",this,e)+Wp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,o,a,u,d,m,y){const b=Bx(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o);return Yx(r,a,d,m,y,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",b,T)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new cc(this,r)}},heatmap:class extends Xs{createBucket(r){return new Jx(r)}constructor(r){super(r,uI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Tg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Vh("heatmap-radius",this,r)}queryIntersectsFeature(r,e,o,a,u,d,m,y){const b=this.paint.get("heatmap-radius").evaluate(e,o);return Yx(r,a,d,m,y,!0,!0,new D(0,0),b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new cc(this,r)}},hillshade:class extends Xs{constructor(r){super(r,hI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Xs{constructor(r){super(r,II)}getProgramIds(){const r=this.paint.get("fill-pattern"),e=r&&r.constantOr(1),o=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(r){return new cc(this,r)}recalculate(r,e){super.recalculate(r,e);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Jp(r)}queryRadius(){return Wp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,o,a,u,d){return!r.queryGeometry.isAboveHorizon&&Dx(Nx(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends Xs{constructor(r){super(r,$I)}createBucket(r){return new yd(r)}queryRadius(){return Wp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new cc(this,r)}queryIntersectsFeature(r,e,o,a,u,d,m,y,b){const T=Bx(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),I=this.paint.get("fill-extrusion-height").evaluate(e,o),M=this.paint.get("fill-extrusion-base").evaluate(e,o),P=[0,0],B=y&&d.elevation,j=d.elevation?d.elevation.exaggeration():1,q=r.tile.getBucket(this);if(B&&q instanceof yd){const xe=q.centroidVertexArray,Me=b+1;if(Me<xe.length){const Le=xe.get(Me);P[0]=Le.a_centroid_pos0,P[1]=Le.a_centroid_pos1}}if(P[0]===0&&P[1]===1)return!1;const Q=function(xe,Me,Le,ze,Re,it,at,vt,xt){return it?function(et,dt,Tt,Nt,Lt,Rt,In,Hn,kn){const Fn=[],cn=[],Yt=[0,0,0,1];for(const Kn of et){const hi=[],dr=[];for(const Mi of Kn){const pr=Mi.x+Nt.x,fi=Mi.y+Nt.y,ei=UI(pr,fi,dt,Tt,Rt,In,Hn,kn);Yt[0]=pr,Yt[1]=fi,Yt[2]=ei.base,Yt[3]=1,Hh(Yt,Yt,Lt),Yt[3]=Math.max(Yt[3],1e-5);const bi=h1([Yt[0]/Yt[3],Yt[1]/Yt[3],Yt[2]/Yt[3]]);Yt[0]=pr,Yt[1]=fi,Yt[2]=ei.top,Yt[3]=1,Hh(Yt,Yt,Lt),Yt[3]=Math.max(Yt[3],1e-5);const Gi=h1([Yt[0]/Yt[3],Yt[1]/Yt[3],Yt[2]/Yt[3]]);hi.push(bi),dr.push(Gi)}Fn.push(hi),cn.push(dr)}return[Fn,cn]}(xe,Me,Le,ze,Re,it,at,vt,xt):function(et,dt,Tt,Nt,Lt){const Rt=[],In=[],Hn=Lt[8]*dt,kn=Lt[9]*dt,Fn=Lt[10]*dt,cn=Lt[11]*dt,Yt=Lt[8]*Tt,Kn=Lt[9]*Tt,hi=Lt[10]*Tt,dr=Lt[11]*Tt;for(const Mi of et){const pr=[],fi=[];for(const ei of Mi){const bi=ei.x+Nt.x,Gi=ei.y+Nt.y,Yi=Lt[0]*bi+Lt[4]*Gi+Lt[12],mr=Lt[1]*bi+Lt[5]*Gi+Lt[13],wr=Lt[2]*bi+Lt[6]*Gi+Lt[14],jo=Lt[3]*bi+Lt[7]*Gi+Lt[15],Eo=Yi+Hn,Ei=mr+kn,co=wr+Fn,Vo=Math.max(jo+cn,1e-5),kr=Yi+Yt,Er=mr+Kn,zi=wr+hi,ki=Math.max(jo+dr,1e-5),To=new D(Eo/Vo,Ei/Vo);To.z=co/Vo,pr.push(To);const uo=new D(kr/ki,Er/ki);uo.z=zi/ki,fi.push(uo)}Rt.push(pr),In.push(fi)}return[Rt,In]}(xe,Me,Le,ze,Re)}(a,M,I,T,m,B?y:null,P,j,d.center.lat),le=r.queryGeometry;return function(xe,Me,Le){let ze=1/0;Dx(Le,Me)&&(ze=u1(Le,Me[0]));for(let Re=0;Re<Me.length;Re++){const it=Me[Re],at=xe[Re];for(let vt=0;vt<it.length-1;vt++){const xt=it[vt],et=[xt,it[vt+1],at[vt+1],at[vt],xt];Px(Le,et)&&(ze=Math.min(ze,u1(Le,et)))}}return ze!==1/0&&ze}(Q[0],Q[1],le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends Xs{constructor(r){super(r,f1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Ka,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=d1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new em(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new cc(this,r)}queryRadius(r){const e=r,o=p1(Vh("line-width",this,e),Vh("line-gap-width",this,e)),a=Vh("line-offset",this,e);return o/2+Math.abs(a)+Wp(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,o,a,u,d){if(r.queryGeometry.isAboveHorizon)return!1;const m=Nx(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),d.angle,r.pixelToTileUnitsFactor),y=r.pixelToTileUnitsFactor/2*p1(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),b=this.paint.get("line-offset").evaluate(e,o);return b&&(a=function(T,I){const M=[],P=new D(0,0);for(let B=0;B<T.length;B++){const j=T[B],q=[];for(let Q=0;Q<j.length;Q++){const le=j[Q-1],xe=j[Q],Me=j[Q+1],Le=Q===0?P:xe.sub(le)._unit()._perp(),ze=Q===j.length-1?P:Me.sub(xe)._unit()._perp(),Re=Le._add(ze)._unit();Re._mult(1/(Re.x*ze.x+Re.y*ze.y)),q.push(Re._mult(I)._add(xe))}M.push(q)}return M}(a,b*r.pixelToTileUnitsFactor)),function(T,I,M){for(let P=0;P<I.length;P++){const B=I[P];if(T.length>=3){for(let j=0;j<B.length;j++)if(jh(T,B[j]))return!0}if(QC(T,B,M))return!0}return!1}(m,a,y)}isTileClipped(){return!0}},symbol:cm,background:class extends Xs{constructor(r){super(r,OM)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Xs{constructor(r){super(r,zM)}getProgramIds(){return["raster"]}},sky:class extends Xs{constructor(r){super(r,NM),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Tg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(r,e){if(this.paint.get("sky-type")==="atmosphere"){const a=this.paint.get("sky-atmosphere-sun"),u=!a,d=r.style.light,m=d.properties.get("position");return u&&d.properties.get("anchor")==="viewport"&&Gt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?Wg(m.azimuthal,90-m.polar,e):Wg(a[0],90-a[1],e)}const o=this.paint.get("sky-gradient-center");return Wg(o[0],90-o[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}}};class Td{constructor(e,o,a,u){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(o,u)}update(e,o,a){const{width:u,height:d}=e,{context:m}=this,{gl:y}=m,{HTMLImageElement:b,HTMLCanvasElement:T,HTMLVideoElement:I,ImageData:M,ImageBitmap:P}=K;if(y.bindTexture(y.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!o||o.premultiply!==!1)),a||this.size&&this.size[0]===u&&this.size[1]===d){const{x:B,y:j}=a||{x:0,y:0};e instanceof b||e instanceof T||e instanceof I||e instanceof M||P&&e instanceof P?y.texSubImage2D(y.TEXTURE_2D,0,B,j,y.RGBA,y.UNSIGNED_BYTE,e):y.texSubImage2D(y.TEXTURE_2D,0,B,j,u,d,y.RGBA,y.UNSIGNED_BYTE,e.data)}else this.size=[u,d],e instanceof b||e instanceof T||e instanceof I||e instanceof M||P&&e instanceof P?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,e):y.texImage2D(y.TEXTURE_2D,0,this.format,u,d,0,this.format,y.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(e,o){const{context:a}=this,{gl:u}=a;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),o!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,o),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class qg{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.image=new fl({width:e,height:o}),this.positions={},this.uploaded=!1}getDash(e,o){const a=this.getKey(e,o);return this.positions[a]}trim(){const e=this.width,o=this.height=He(this.nextRow);this.image.resize({width:e,height:o})}getKey(e,o){return e.join(",")+o}getDashRanges(e,o,a){const u=[];let d=e.length%2==1?-e[e.length-1]*a:0,m=e[0]*a,y=!0;u.push({left:d,right:m,isDash:y,zeroLength:e[0]===0});let b=e[0];for(let T=1;T<e.length;T++){y=!y;const I=e[T];d=b*a,b+=I,m=b*a,u.push({left:d,right:m,isDash:y,zeroLength:I===0})}return u}addRoundDash(e,o,a){const u=o/2;for(let d=-a;d<=a;d++){const m=this.width*(this.nextRow+a+d);let y=0,b=e[y];for(let T=0;T<this.width;T++){T/b.right>1&&(b=e[++y]);const I=Math.abs(T-b.left),M=Math.abs(T-b.right),P=Math.min(I,M);let B;const j=d/a*(u+1);if(b.isDash){const q=u-Math.abs(j);B=Math.sqrt(P*P+q*q)}else B=u-Math.sqrt(P*P+j*j);this.image.data[m+T]=Math.max(0,Math.min(255,B+128))}}}addRegularDash(e,o){for(let b=e.length-1;b>=0;--b){const T=e[b],I=e[b+1];T.zeroLength?e.splice(b,1):I&&I.isDash===T.isDash&&(I.left=T.left,e.splice(b,1))}const a=e[0],u=e[e.length-1];a.isDash===u.isDash&&(a.left=u.left-this.width,u.right=a.right+this.width);const d=this.width*this.nextRow;let m=0,y=e[m];for(let b=0;b<this.width;b++){b/y.right>1&&(y=e[++m]);const T=Math.abs(b-y.left),I=Math.abs(b-y.right),M=Math.min(T,I);this.image.data[d+b]=Math.max(0,Math.min(255,(y.isDash?M:-M)+o+128))}}addDash(e,o){const a=this.getKey(e,o);if(this.positions[a])return this.positions[a];const u=o==="round",d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return Gt("LineAtlas out of space"),null;e.length===0&&e.push(1);let y=0;for(let I=0;I<e.length;I++)e[I]<0&&(Gt("Negative value is found in line dasharray, replacing values with 0"),e[I]=0),y+=e[I];if(y!==0){const I=this.width/y,M=this.getDashRanges(e,this.width,I);u?this.addRoundDash(M,I,d):this.addRegularDash(M,o==="square"?.5*I:0)}const b=this.nextRow+d;this.nextRow+=m;const T={tl:[b,d],br:[y,0]};return this.positions[a]=T,T}}Bt(qg,"LineAtlas");class FM{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}const $M=K.performance;function V1(r){const e=r?r.url.toString():void 0;return $M.getEntriesByName(e)}class UM{constructor(){this.tasks={},this.taskQueue=[],Ye(["process"],this),this.invoker=new FM(this.process),this.nextId=0}add(e,o){const a=this.nextId++,u=function({type:d,isSymbolTile:m,zoom:y}){return y=y||0,d==="message"?0:d!=="maybePrepare"||m?d!=="parseTile"||m?d==="parseTile"&&m?300-y:d==="maybePrepare"&&m?400-y:500:200-y:100-y}(o);if(u===0){bt();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:o,priority:u,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){bt();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const o=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let e=null,o=1/0;for(let u=0;u<this.taskQueue.length;u++){const d=this.tasks[this.taskQueue[u]];d.priority<o&&(o=d.priority,e=u)}if(e===null)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}const jM=fe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),VM=fe([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:G1}=jM,H1=fe([{name:"a_pos_3",components:3,type:"Int16"}]);var Ad=fe([{name:"a_pos",type:"Int16",components:2}]);const ef=On/Math.PI/2,$o=-ef,Uo=ef,GM=[new ss([$o,$o,$o],[Uo,Uo,Uo]),new ss([$o,$o,$o],[0,0,Uo]),new ss([0,$o,$o],[Uo,0,Uo]),new ss([$o,0,$o],[0,Uo,Uo]),new ss([0,0,$o],[Uo,Uo,Uo])];class HM{constructor(e,o,a){this.a=Gh([],e,a),this.b=Gh([],o,a),this.center=a;const u=cd([],this.a),d=cd([],this.b);this.angle=Math.acos(ud(u,d))}}function Zg(r,e){if(r.angle===0)return null;let o;return o=r.a[e]===0?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[e]/r.a[e]/Math.sin(r.angle)-1/Math.tan(r.angle)),o<0||o>1?null:function(a,u,d,m){const y=Math.sin(d);return a*(Math.sin((1-m)*d)/y)+u*(Math.sin(m*d)/y)}(r.a[e],r.b[e],r.angle,Pe(o,0,1))+r.center[e]}function Sd(r){if(r.z<=1)return GM[r.z+2*r.y+r.x];const[e,o]=Xg(r),a=[ml(e[0],e[1]),ml(e[0],o[1]),ml(o[0],e[1]),ml(o[0],o[1])],u=[Uo,Uo,Uo],d=[$o,$o,$o];for(const m of a)u[0]=Math.min(u[0],m[0]),u[1]=Math.min(u[1],m[1]),u[2]=Math.min(u[2],m[2]),d[0]=Math.max(d[0],m[0]),d[1]=Math.max(d[1],m[1]),d[2]=Math.max(d[2],m[2]);return new ss(u,d)}function WM(r,e,o){const a=e/r.worldSize,u=(dt,Tt)=>{ld(dt,dt,a),ld(Tt,Tt,a)},d=Number.MAX_VALUE,m=[-d,-d,-d],y=[d,d,d],b=Y1(r);if(o.z<=1){const dt=Sd(o).getCorners();for(let Tt=0;Tt<dt.length;Tt++)bu(dt[Tt],dt[Tt],b),vg(y,y,dt[Tt]),xg(m,m,dt[Tt]);return u(y,m),new ss(y,m)}const[T,I]=Xg(o),M=new uc;M.setSouthWest([T[1],I[0]]),M.setNorthEast([I[1],T[0]]);const P=[ml(M.getSouth(),M.getWest()),ml(M.getSouth(),M.getEast()),ml(M.getNorth(),M.getEast()),ml(M.getNorth(),M.getWest())];for(let dt=0;dt<P.length;dt++)bu(P[dt],P[dt],b),vg(y,y,P[dt]),xg(m,m,P[dt]);if(M.contains(r.center))return m[2]=0,u(y,m),new ss(y,m);const B=[b[12],b[13],b[14]],j=r.center.lng,q=Pe(r.center.lat,-85.051129,Sa),Q=[sd(j),$h(q)],le=M.getCenter().lng,xe=Pe(M.getCenter().lat,-85.051129,Sa),Me=[sd(le),$h(xe)];let Le=new Array(3),ze=0;const Re=Q[0]-Me[0],it=Q[1]-Me[1];if(Math.abs(Re)>Math.abs(it))ze=Re>=0?1:3,Le=B;else{ze=it>=0?0:2;const dt=[b[4],b[5],b[6]];let Tt;Tt=it>=0?-Math.sin(J(M.getSouth()))*ef:-Math.sin(J(M.getNorth()))*ef,Le=bg(Le,B,dt,Tt)}const at=P[ze],vt=P[(ze+1)%4],xt=new HM(at,vt,Le),et=[Zg(xt,0)||at[0],Zg(xt,1)||at[1],Zg(xt,2)||at[2]];return y[2]=Math.min(at[2],vt[2]),vg(y,y,et),xg(m,m,et),u(y,m),new ss(y,m)}function Xg(r){const e=1<<r.z,o=r.x/e,a=(r.x+1)/e,u=(r.y+1)/e;return[[$r(r.y/e),Ms(o)],[$r(u),Ms(a)]]}function W1(r,e,o,a=ef){return o=J(o),[r*Math.sin(o)*a,-e*a,r*Math.cos(o)*a]}function ml(r,e,o){return W1(Math.cos(J(r)),Math.sin(J(r)),e,o)}function q1(r,e,o){const a=Math.pow(2,o.z),u=(r/On+o.x)/a;return ml($r((e/On+o.y)/a),Ms(u))}function Yg(r){return 16383/Math.max(...Gh([],r.max,r.min))}function Z1(r){const e=Ca(new Float64Array(16)),o=Yg(r);var a,u;return hc(e,e,[o,o,o]),xu(e,e,((a=[])[0]=-(u=r.min)[0],a[1]=-u[1],a[2]=-u[2],a)),e}function X1(r,e,o,a,u){const d=function(b){const T=On/(2*Math.PI);return b/(2*Math.PI)/T}(o),m=[r,e,-o/(2*Math.PI)],y=Ca(new Float64Array(16));return xu(y,y,m),hc(y,y,[d,d,d]),_g(y,y,J(-u)),gg(y,y,J(-a)),y}function Y1(r){const{x:e,y:o}=r.point,{lng:a,lat:u}=r._center;return X1(e,o,r.worldSize,a,u)}const K1=J(85),qM=Math.cos(K1),ZM=Math.sin(K1);function J1(r,e,o){var a=2*Math.PI*6378137/256/Math.pow(2,o);return[r*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}class um{constructor(e,o,a){this.z=e,this.x=o,this.y=a,this.key=Cd(0,e,e,o,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o){const a=function(d,m,y){var b=J1(256*d,256*(m=Math.pow(2,y)-m-1),y),T=J1(256*(d+1),256*(m+1),y);return b[0]+","+b[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),u=function(d,m,y){let b,T="";for(let I=d;I>0;I--)b=1<<I-1,T+=(m&b?1:0)+(y&b?2:0);return T}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Q1{constructor(e,o){this.wrap=e,this.canonical=o,this.key=Cd(e,o.z,o.z,o.x,o.y)}}class lo{constructor(e,o,a,u,d){this.overscaledZ=e,this.wrap=o,this.canonical=new um(a,+u,+d),this.key=o===0&&e===a?this.canonical.key:Cd(o,e,a,u,d)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new lo(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o=!0){if(this.overscaledZ===e&&o)return this.key;if(e>this.canonical.z)return Cd(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return Cd(this.wrap*+o,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,a=2*this.canonical.x,u=2*this.canonical.y;return[new lo(o,this.wrap,o,a,u),new lo(o,this.wrap,o,a+1,u),new lo(o,this.wrap,o,a,u+1),new lo(o,this.wrap,o,a+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new lo(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Q1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Cd(r,e,o,a,u){const d=1<<Math.min(o,22);let m=d*(u%d)+a%d;return r&&o<22&&(m+=d*d*((r<0?-2*r-1:2*r)%(1<<2*(22-o)))),16*(32*m+o)+(e-o)}function Eu(r,e){if(!e.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:e};const o=Math.pow(2,-r.z),a=r.x*o,u=(r.x+1)*o,d=r.y*o,m=(r.y+1)*o,y=Ms(a),b=Ms(u),T=$r(d),I=$r(m),M=e.project(y,T),P=e.project(b,T),B=e.project(b,I),j=e.project(y,I);let q=Math.min(M.x,P.x,B.x,j.x),Q=Math.min(M.y,P.y,B.y,j.y),le=Math.max(M.x,P.x,B.x,j.x),xe=Math.max(M.y,P.y,B.y,j.y);const Me=o/16;function Le(Re,it,at,vt,xt,et){const dt=(at+xt)/2,Tt=(vt+et)/2,Nt=e.project(Ms(dt),$r(Tt)),Lt=Math.max(0,q-Nt.x,Q-Nt.y,Nt.x-le,Nt.y-xe);q=Math.min(q,Nt.x),le=Math.max(le,Nt.x),Q=Math.min(Q,Nt.y),xe=Math.max(xe,Nt.y),Lt>Me&&(Le(Re,Nt,at,vt,dt,Tt),Le(Nt,it,dt,Tt,xt,et))}Le(M,P,a,d,u,d),Le(P,B,u,d,u,m),Le(B,j,u,m,a,m),Le(j,M,a,m,a,d),q-=Me,Q-=Me,le+=Me,xe+=Me;const ze=1/Math.max(le-q,xe-Q);return{scale:ze,x:q*ze,y:Q*ze,x2:le*ze,y2:xe*ze,projection:e}}Bt(um,"CanonicalTileID"),Bt(lo,"OverscaledTileID",{omit:["projMatrix"]});class eb{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const a=e[o];this._stringToNumber[a]=o,this._numberToString[o]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const XM=["tile","layer","source","sourceLayer","state"];class tb{constructor(e,o,a,u,d){this.type="Feature",this._vectorTileFeature=e,this._z=o,this._x=a,this._y=u,this.properties=e.properties,this.id=d}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const o of XM)this[o]!==void 0&&(e[o]=this[o]);return e}}const ks=32,Ma=33,mc=new Uint16Array(8184);for(let r=0;r<2046;r++){let e=r+2,o=0,a=0,u=0,d=0,m=0,y=0;for(1&e?u=d=m=ks:o=a=y=ks;(e>>=1)>1;){const T=o+u>>1,I=a+d>>1;1&e?(u=o,d=a,o=m,a=y):(o=u,a=d,u=m,d=y),m=T,y=I}const b=4*r;mc[b+0]=o,mc[b+1]=a,mc[b+2]=u,mc[b+3]=d}const ka=new Uint16Array(2178),_c=new Uint8Array(1089),hm=new Uint16Array(1089);function nb(r){return r===0?-.03125:r===32?.03125:0}var ib=fe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const rb={type:2,extent:On,loadGeometry:()=>[[new D(0,0),new D(8193,0),new D(8193,8193),new D(0,8193),new D(0,0)]]};class Kg{constructor(e,o,a,u,d){this.tileID=e,this.uid=Be(),this.uses=0,this.tileSize=o,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=d,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const o=e+this.timeAdded;o<_e.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Eu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,o,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,d){const m={};if(!d)return m;for(const y of u){const b=y.layerIds.map(T=>d.getLayer(T)).filter(Boolean);if(b.length!==0){y.layers=b,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map(T=>b.filter(I=>I.id===T)[0]));for(const T of b)m[T.id]=y}}return m}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const d=this.buckets[u];if(d instanceof pc){if(this.hasSymbolBuckets=!0,!a)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const d=this.buckets[u];if(d instanceof pc&&d.hasRTLText){this.hasRTLText=!0,Ro.isLoading()||Ro.isLoaded()||Bh()!=="deferred"||oc();break}}this.queryPadding=0;for(const u in this.buckets){const d=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(u).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Ws}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const u=this.buckets[a];u.uploadPending()&&u.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Td(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Td(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Td(e,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,a,u,d,m,y,b){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:y,transform:m,params:d,tileTransform:this.tileTransform},e,o,a):{}}querySourceFeatures(e,o){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const u=a.loadVTLayers(),d=o?o.sourceLayer:"",m=u._geojsonTileLayer||u[d];if(!m)return;const y=rs(o&&o.filter),{z:b,x:T,y:I}=this.tileID.canonical,M={z:b,x:T,y:I};for(let P=0;P<m.length;P++){const B=m.feature(P);if(y.needGeometry){const Q=vu(B,!0);if(!y.filter(new Ii(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!y.filter(new Ii(this.tileID.overscaledZ),B))continue;const j=a.getId(B,d),q=new tb(B,b,T,I,j);q.tile=M,e.push(q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const a=kt(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let u=!1;if(this.expirationTime>a)u=!1;else if(o)if(this.expirationTime<o)u=!0;else{const d=this.expirationTime-o;d?this.expirationTime=a+Math.max(d,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!o)return;const a=this.latestFeatureIndex.loadVTLayers(),u=o.style.listImages();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const m=this.buckets[d],y=m.layers[0].sourceLayer||"_geojsonTileLayer",b=a[y],T=e[y];if(!b||!T||Object.keys(T).length===0)continue;if(m.update(T,b,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),m instanceof em||m instanceof Jp){const M=o.style._getSourceCache(m.layers[0].source);o._terrain&&o._terrain.enabled&&M&&m.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(M.id,this.tileID)}const I=o&&o.style&&o.style.getLayer(d);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_e.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=_e.now()+e}setTexture(e,o){const a=o.context,u=a.gl;this.texture=o.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Td(a,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),a.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax))}setDependencies(e,o){const a={};for(const u of o)a[u]=!0;this.dependencies[e]=a}hasDependency(e,o){for(const a of e){const u=this.dependencies[a];if(u){for(const d of o)if(u[d])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const a=hl(rb,this.tileID.canonical,this.tileTransform)[0],u=new ue,d=new ii;for(let m=0;m<a.length;m++){const{x:y,y:b}=a[m];u.emplaceBack(y,b),d.emplaceBack(m)}d.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,Ad.members),this._tileDebugSegments=Xi.simpleSegment(0,0,u.length,d.length)}_makeTileBoundsBuffers(e,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const a=hl(rb,this.tileID.canonical,this.tileTransform)[0];let u,d;if(this.isRaster){const m=function(y,b){const T=Eu(y,b),I=Math.pow(2,y.z);for(let Q=0;Q<Ma;Q++)for(let le=0;le<Ma;le++){const xe=Ms((y.x+(le+nb(le))/ks)/I),Me=$r((y.y+(Q+nb(Q))/ks)/I),Le=b.project(xe,Me),ze=Q*Ma+le;ka[2*ze+0]=Math.round((Le.x*T.scale-T.x)*On),ka[2*ze+1]=Math.round((Le.y*T.scale-T.y)*On)}_c.fill(0),hm.fill(0);for(let Q=2045;Q>=0;Q--){const le=4*Q,xe=mc[le+0],Me=mc[le+1],Le=mc[le+2],ze=mc[le+3],Re=xe+Le>>1,it=Me+ze>>1,at=Re+it-Me,vt=it+xe-Re,xt=Me*Ma+xe,et=ze*Ma+Le,dt=it*Ma+Re,Tt=Math.hypot((ka[2*xt+0]+ka[2*et+0])/2-ka[2*dt+0],(ka[2*xt+1]+ka[2*et+1])/2-ka[2*dt+1])>=16;if(_c[dt]=_c[dt]||(Tt?1:0),Q<1022){const Nt=(Me+vt>>1)*Ma+(xe+at>>1),Lt=(ze+vt>>1)*Ma+(Le+at>>1);_c[dt]=_c[dt]||_c[Nt]||_c[Lt]}}const M=new ye,P=new Jt;let B=0;function j(Q,le){const xe=le*Ma+Q;return hm[xe]===0&&(M.emplaceBack(ka[2*xe+0],ka[2*xe+1],Q*On/ks,le*On/ks),hm[xe]=++B),hm[xe]-1}function q(Q,le,xe,Me,Le,ze){const Re=Q+xe>>1,it=le+Me>>1;if(Math.abs(Q-Le)+Math.abs(le-ze)>1&&_c[it*Ma+Re])q(Le,ze,Q,le,Re,it),q(xe,Me,Le,ze,Re,it);else{const at=j(Q,le),vt=j(xe,Me),xt=j(Le,ze);P.emplaceBack(at,vt,xt)}}return q(0,0,ks,ks,ks,0),q(ks,ks,0,0,0,ks),{vertices:M,indices:P}}(this.tileID.canonical,o);u=m.vertices,d=m.indices}else{u=new ye,d=new Jt;for(const{x:y,y:b}of a)u.emplaceBack(y,b,0,0);const m=qp(u.int16,void 0,4);for(let y=0;y<m.length;y+=3)d.emplaceBack(m[y],m[y+1],m[y+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,ib.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(d),this._tileBoundsSegments=Xi.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugBuffers(e,o){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!o||o.name!=="globe")return;const a=this.tileID.canonical,u=Z1(Sd(a));this._makeGlobeTileDebugBorderBuffer(e,a,u),this._makeGlobeTileDebugTextBuffer(e,a,u)}_makeGlobeTileDebugBorderBuffer(e,o,a){const u=new ue,d=new ii,m=new he,y=(T,I,M,P,B)=>{const j=(M-T)/(B-1),q=(P-I)/(B-1),Q=u.length;for(let le=0;le<B;le++){const xe=T+le*j,Me=I+le*q;u.emplaceBack(xe,Me);const Le=q1(xe,Me,o),ze=bu(Le,Le,a);m.emplaceBack(ze[0],ze[1],ze[2]),d.emplaceBack(Q+le)}},b=On;y(0,0,b,0,16),y(b,0,b,b,16),y(b,b,0,b,16),y(0,b,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,Ad.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(m,H1.members),this._tileDebugSegments=Xi.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugTextBuffer(e,o,a){const u=new ue,d=new Jt,m=new he,y=25;d.reserve(32),u.reserve(y),m.reserve(y);const b=(T,I)=>y*T+I;for(let T=0;T<y;T++){const I=2048*T;for(let M=0;M<y;M++){const P=2048*M;u.emplaceBack(P,I);const B=q1(P,I,o),j=bu(B,B,a);m.emplaceBack(j[0],j[1],j[2])}}for(let T=0;T<4;T++)for(let I=0;I<4;I++){const M=b(T,I),P=b(T,I+1),B=b(T+1,I),j=b(T+1,I+1);d.emplaceBack(M,P,B),d.emplaceBack(B,P,j)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(d),this._tileDebugTextBuffer=e.createVertexBuffer(u,Ad.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(m,H1.members),this._tileDebugTextSegments=Xi.simpleSegment(0,0,y,32)}}class YM{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,a){const u=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Xe(this.stateChanges[e][u],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const d in this.state[e])d!==u&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const d in this.state[e][u])a[d]||(this.deletedStates[e][u][d]=null)}else for(const d in a)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][d]===null&&delete this.deletedStates[e][u][d]}removeFeatureState(e,o,a){if(this.deletedStates[e]===null)return;const u=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&o!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][a]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(a in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][a]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,o){const a=String(o),u=Xe({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const d=this.deletedStates[e][o];if(d===null)return{};for(const m in d)delete u[m]}return u}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const a={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const d={};for(const m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Xe(this.state[u][m],this.stateChanges[u][m]),d[m]=this.state[u][m];a[u]=d}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const d={};if(this.deletedStates[u]===null)for(const m in this.state[u])d[m]={},this.state[u][m]={};else for(const m in this.deletedStates[u]){if(this.deletedStates[u][m]===null)this.state[u][m]={};else for(const y of Object.keys(this.deletedStates[u][m]))delete this.state[u][m][y];d[m]=this.state[u][m]}a[u]=a[u]||{},Xe(a[u],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const u in e)e[u].setFeatureState(a,o)}}class ob{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,o){const a=this.toIdx(e,o);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,o){return this.leaves[this.toIdx(e,o)]}toIdx(e,o){return o*this.size+e}}function sb(r,e,o,a){let u=0,d=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(a[m])<1e-15){if(o[m]<r[m]||o[m]>e[m])return null}else{const y=1/a[m];let b=(r[m]-o[m])*y,T=(e[m]-o[m])*y;if(b>T){const I=b;b=T,T=I}if(b>u&&(u=b),T<d&&(d=T),u>d)return null}return u}function ab(r,e,o,a,u,d,m,y,b,T,I){const M=a-r,P=u-e,B=d-o,j=m-r,q=y-e,Q=b-o,le=I[1]*Q-I[2]*q,xe=I[2]*j-I[0]*Q,Me=I[0]*q-I[1]*j,Le=M*le+P*xe+B*Me;if(Math.abs(Le)<1e-15)return null;const ze=1/Le,Re=T[0]-r,it=T[1]-e,at=T[2]-o,vt=(Re*le+it*xe+at*Me)*ze;if(vt<0||vt>1)return null;const xt=it*B-at*P,et=at*M-Re*B,dt=Re*P-it*M,Tt=(I[0]*xt+I[1]*et+I[2]*dt)*ze;return Tt<0||vt+Tt>1?null:(j*xt+q*et+Q*dt)*ze}function lb(r,e,o){return(r-e)/(o-e)}function cb(r,e,o,a,u,d,m,y,b){const T=1<<o,I=d-a,M=m-u,P=(r+1)/T*I+a,B=(e+0)/T*M+u,j=(e+1)/T*M+u;y[0]=(r+0)/T*I+a,y[1]=B,b[0]=P,b[1]=j}class ub{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(d){const m=Math.ceil(Math.log2(d.dim/8)),y=[];let b=Math.ceil(Math.pow(2,m));const T=1/b,I=(B,j,q,Q,le)=>{const xe=Q?1:0,Me=(B+1)*q-xe,Le=j*q,ze=(j+1)*q-xe;le[0]=B*q,le[1]=Le,le[2]=Me,le[3]=ze};let M=new ob(b);const P=[];for(let B=0;B<b*b;B++){I(B%b,Math.floor(B/b),T,!1,P);const j=gc(P[0],P[1],d),q=gc(P[2],P[1],d),Q=gc(P[2],P[3],d),le=gc(P[0],P[3],d);M.minimums.push(Math.min(j,q,Q,le)),M.maximums.push(Math.max(j,q,Q,le)),M.leaves.push(1)}for(y.push(M),b/=2;b>=1;b/=2){const B=y[y.length-1];M=new ob(b);for(let j=0;j<b*b;j++){I(j%b,Math.floor(j/b),2,!0,P);const q=B.getElevation(P[0],P[1]),Q=B.getElevation(P[2],P[1]),le=B.getElevation(P[2],P[3]),xe=B.getElevation(P[0],P[3]),Me=B.isLeaf(P[0],P[1]),Le=B.isLeaf(P[2],P[1]),ze=B.isLeaf(P[2],P[3]),Re=B.isLeaf(P[0],P[3]),it=Math.min(q.min,Q.min,le.min,xe.min),at=Math.max(q.max,Q.max,le.max,xe.max),vt=Me&&Le&&ze&&Re;M.maximums.push(at),M.minimums.push(it),M.leaves.push(at-it<=5&&vt?1:0)}y.push(M)}return y}(this.dem),a=o.length-1,u=o[a];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(o,0,0,a,0)}raycastRoot(e,o,a,u,d,m,y=1){return sb([e,o,-100],[a,u,this.maximums[0]*y],d,m)}raycast(e,o,a,u,d,m,y=1){if(!this.nodeCount)return null;const b=this.raycastRoot(e,o,a,u,d,m,y);if(b==null)return null;const T=[],I=[],M=[],P=[],B=[{idx:0,t:b,nodex:0,nodey:0,depth:0}];for(;B.length>0;){const{idx:j,t:q,nodex:Q,nodey:le,depth:xe}=B.pop();if(this.leaves[j]){cb(Q,le,xe,e,o,a,u,M,P);const Le=1<<xe,ze=(Q+0)/Le,Re=(Q+1)/Le,it=(le+0)/Le,at=(le+1)/Le,vt=gc(ze,it,this.dem)*y,xt=gc(Re,it,this.dem)*y,et=gc(Re,at,this.dem)*y,dt=gc(ze,at,this.dem)*y,Tt=ab(M[0],M[1],vt,P[0],M[1],xt,P[0],P[1],et,d,m),Nt=ab(P[0],P[1],et,M[0],P[1],dt,M[0],M[1],vt,d,m),Lt=Math.min(Tt!==null?Tt:Number.MAX_VALUE,Nt!==null?Nt:Number.MAX_VALUE);if(Lt!==Number.MAX_VALUE)return Lt;{const Rt=bg([],d,m,q);if(hb(vt,xt,dt,et,lb(Rt[0],M[0],P[0]),lb(Rt[1],M[1],P[1]))>=Rt[2])return q}continue}let Me=0;for(let Le=0;Le<this._siblingOffset.length;Le++){cb((Q<<1)+this._siblingOffset[Le][0],(le<<1)+this._siblingOffset[Le][1],xe+1,e,o,a,u,M,P),M[2]=-100,P[2]=this.maximums[this.childOffsets[j]+Le]*y;const ze=sb(M,P,d,m);if(ze!=null){const Re=ze;T[Le]=Re;let it=!1;for(let at=0;at<Me&&!it;at++)Re>=T[I[at]]&&(I.splice(at,0,Le),it=!0);it||(I[Me]=Le),Me++}}for(let Le=0;Le<Me;Le++){const ze=I[Le];B.push({idx:this.childOffsets[j]+ze,t:T[ze],nodex:(Q<<1)+this._siblingOffset[ze][0],nodey:(le<<1)+this._siblingOffset[ze][1],depth:xe+1})}}return null}_addNode(e,o,a){return this.minimums.push(e),this.maximums.push(o),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,o,a,u,d){if(e[u].isLeaf(o,a)===1)return;this.childOffsets[d]||(this.childOffsets[d]=this.nodeCount);const m=u-1,y=e[m];let b=0,T=0;for(let I=0;I<this._siblingOffset.length;I++){const M=2*o+this._siblingOffset[I][0],P=2*a+this._siblingOffset[I][1],B=y.getElevation(M,P),j=y.isLeaf(M,P),q=this._addNode(B.min,B.max,j);j&&(b|=1<<I),T||(T=q)}for(let I=0;I<this._siblingOffset.length;I++)b&1<<I||this._construct(e,2*o+this._siblingOffset[I][0],2*a+this._siblingOffset[I][1],m,T+I)}}function hb(r,e,o,a,u,d){return mn(mn(r,o,d),mn(e,a,d),u)}function gc(r,e,o){const a=o.dim,u=Pe(r*a-.5,0,a-1),d=Pe(e*a-.5,0,a-1),m=Math.floor(u),y=Math.floor(d),b=Math.min(m+1,a-1),T=Math.min(y+1,a-1);return hb(o.get(m,y),o.get(b,y),o.get(m,T),o.get(b,T),u-m,d-y)}const fb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class fm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,o,a,u=!1,d=!1){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(a&&a!=="mapbox"&&a!=="terrarium")return Gt(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const m=this.dim=o.height-2,y=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=a||"mapbox",this.borderReady=u,!u){for(let b=0;b<m;b++)y[this._idx(-1,b)]=y[this._idx(0,b)],y[this._idx(m,b)]=y[this._idx(m-1,b)],y[this._idx(b,-1)]=y[this._idx(b,0)],y[this._idx(b,m)]=y[this._idx(b,m-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(m,-1)]=y[this._idx(m-1,0)],y[this._idx(-1,m)]=y[this._idx(0,m-1)],y[this._idx(m,m)]=y[this._idx(m-1,m-1)],d&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ub(this)}get(e,o,a=!1){a&&(e=Pe(e,-1,this.dim),o=Pe(o,-1,this.dim));const u=4*this._idx(e,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return fb[e]}get unpackVector(){return fb[this.encoding]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,a){return(256*e*256+256*o+a)/10-1e4}_unpackTerrarium(e,o,a){return 256*e+o+a/256-32768}static pack(e,o){const a=[0,0,0,0],u=fm.getUnpackVector(o);let d=Math.floor((e+u[3])/u[2]);return a[2]=d%256,d=Math.floor(d/256),a[1]=d%256,d=Math.floor(d/256),a[0]=d,a}getPixels(){return new Fo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,o,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=o*this.dim,d=o*this.dim+this.dim,m=a*this.dim,y=a*this.dim+this.dim;switch(o){case-1:u=d-1;break;case 1:d=u+1}switch(a){case-1:m=y-1;break;case 1:y=m+1}const b=-o*this.dim,T=-a*this.dim;for(let I=m;I<y;I++)for(let M=u;M<d;M++){const P=4*this._idx(M,I),B=4*this._idx(M+b,I+T);this.pixels[P+0]=e.pixels[B+0],this.pixels[P+1]=e.pixels[B+1],this.pixels[P+2]=e.pixels[B+2],this.pixels[P+3]=e.pixels[B+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Bt(fm,"DEMData"),Bt(ub,"DemMinMaxQuadTree",{omit:["dem"]});class KM{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,a){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const d={value:o,timeout:void 0};if(a!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},a)),this.data[u].push(d),this.order.push(u),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const a=e.wrapped().key,u=o===void 0?0:this.data[a].indexOf(o),d=this.data[a][u];return this.data[a].splice(u,1),d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const a in this.data)for(const u of this.data[a])e(u.value)||o.push(u);for(const a of o)this.remove(a.value.tileID,a)}}class tf{constructor(e,o,a){this.func=e,this.mask=o,this.range=a}}tf.ReadOnly=!1,tf.ReadWrite=!0,tf.disabled=new tf(519,tf.ReadOnly,[0,1]);const Jg=7680;class Qg{constructor(e,o,a,u,d,m){this.test=e,this.ref=o,this.mask=a,this.fail=u,this.depthFail=d,this.pass=m}}Qg.disabled=new Qg({func:519,mask:0},0,0,Jg,Jg,Jg);class La{constructor(e,o,a){this.blendFunction=e,this.blendColor=o,this.mask=a}}La.Replace=[1,0],La.disabled=new La(La.Replace,Rn.transparent,[!1,!1,!1,!1]),La.unblended=new La(La.Replace,Rn.transparent,[!0,!0,!0,!0]),La.alphaBlended=new La([1,771],Rn.transparent,[!0,!0,!0,!0]);const ey=1029,ty=2305;class Ys{constructor(e,o,a){this.enable=e,this.mode=o,this.frontFace=a}}Ys.disabled=new Ys(!1,ey,ty),Ys.backCCW=new Ys(!0,ey,ty),Ys.backCW=new Ys(!0,ey,2304),Ys.frontCW=new Ys(!0,1028,2304),Ys.frontCCW=new Ys(!0,1028,ty);class Tu extends gn{constructor(e,o,a){super(),this.id=e,this._onlySymbols=a,o.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new KM(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new YM,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,o){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,o)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const o in this._tiles){const a=this._tiles[o];this._source.prepareTile(a)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,a.tileID),a.upload(e),a.prepare(this.map.style.imageManager)}else for(const o in this._tiles){const a=this._tiles[o];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Ee(this._tiles).map(e=>e.tileID).sort(db).map(e=>e.key)}getRenderableIds(e){const o=[];for(const a in this._tiles)this._isIdRenderable(+a,e)&&o.push(this._tiles[a]);return e?o.sort((a,u)=>{const d=a.tileID,m=u.tileID,y=new D(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),b=new D(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-m.overscaledZ||b.y-y.y||b.x-y.x}).map(a=>a.tileID.key):o.map(a=>a.tileID).sort(db).map(a=>a.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,o){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=o),this._loadTile(a,this._tileLoaded.bind(this,a,e,o)))}_tileLoaded(e,o,a,u){if(u)if(e.state="errored",u.status!==404)this._source.fire(new an(u,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const d=this.map.painter.terrain;this.update(this.transform,d.getScaledDemTileSize(),!0),d.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=_e.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Xt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const o=this.getRenderableIds();for(let u=0;u<o.length;u++){const d=o[u];if(e.neighboringTiles&&e.neighboringTiles[d]){const m=this.getTileByID(d);a(e,m),a(m,e)}}function a(u,d){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let m=d.tileID.canonical.x-u.tileID.canonical.x;const y=d.tileID.canonical.y-u.tileID.canonical.y,b=Math.pow(2,u.tileID.canonical.z),T=d.tileID.key;m===0&&y===0||Math.abs(y)>1||(Math.abs(m)>1&&(Math.abs(m+b)===1?m+=b:Math.abs(m-b)===1&&(m-=b)),d.dem&&u.dem&&(u.dem.backfillBorder(d.dem,m,y),u.neighboringTiles&&u.neighboringTiles[T]&&(u.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,a,u){for(const d in this._tiles){let m=this._tiles[d];if(u[d]||!m.hasData()||m.tileID.overscaledZ<=o||m.tileID.overscaledZ>a)continue;let y=m.tileID;for(;m&&m.tileID.overscaledZ>o+1;){const T=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[T.key],m&&m.hasData()&&(y=T)}let b=y;for(;b.overscaledZ>o;)if(b=b.scaledTo(b.overscaledZ-1),e[b.key]){u[y.key]=y;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=o?a:null}for(let a=e.overscaledZ-1;a>=o;a--){const u=e.scaledTo(a),d=this._getLoadedTile(u);if(d)return d}}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,o){o=o||this._source.tileSize;const a=Math.ceil(e.width/o)+1,u=Math.ceil(e.height/o)+1,d=Math.floor(a*u*5),m=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,d):d,y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const a={};for(const u in this._tiles){const d=this._tiles[u];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+o),a[d.tileID.key]=d}this._tiles=a;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,o,a){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let u;this.updateCacheSize(e,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new lo(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(u=e.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(y=>this._source.hasTile(y)))):u=[];const d=this._updateRetainedTiles(u);if(pb(this._source.type)&&u.length!==0){const y={},b={},T=Object.keys(d);for(const M of T){const P=d[M],B=this._tiles[M];if(!B||B.fadeEndTime&&B.fadeEndTime<=_e.now())continue;const j=this.findLoadedParent(P,Math.max(P.overscaledZ-Tu.maxOverzooming,this._source.minzoom));j&&(this._addTile(j.tileID),y[j.tileID.key]=j.tileID),b[M]=P}const I=u[u.length-1].overscaledZ;for(const M in this._tiles){const P=this._tiles[M];if(d[M]||!P.hasData())continue;let B=P.tileID;for(;B.overscaledZ>I;){B=B.scaledTo(B.overscaledZ-1);const j=this._tiles[B.key];if(j&&j.hasData()&&b[B.key]){d[M]=P.tileID;break}}}for(const M in y)d[M]||(this._coveredTiles[M]=!0,d[M]=y[M])}for(const y in d)this._tiles[y].clearFadeHold();const m=function(y,b){const T=[];for(const I in y)I in b||T.push(I);return T}(this._tiles,d);for(const y of m){const b=this._tiles[y];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const o={};if(e.length===0)return o;const a={},u=e.reduce((T,I)=>Math.min(T,I.overscaledZ),1/0),d=e[0].overscaledZ,m=Math.max(d-Tu.maxOverzooming,this._source.minzoom),y=Math.max(d+Tu.maxUnderzooming,this._source.minzoom),b={};for(const T of e){const I=this._addTile(T);o[T.key]=T,I.hasData()||u<this._source.maxzoom&&(b[T.key]=T)}this._retainLoadedChildren(b,u,y,o);for(const T of e){let I=this._tiles[T.key];if(I.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const P=T.children(this._source.maxzoom)[0],B=this.getTile(P);if(B&&B.hasData()){o[P.key]=P;continue}}else{const P=T.children(this._source.maxzoom);if(o[P[0].key]&&o[P[1].key]&&o[P[2].key]&&o[P[3].key])continue}let M=I.wasRequested();for(let P=T.overscaledZ-1;P>=m;--P){const B=T.scaledTo(P);if(a[B.key]||(a[B.key]=!0,I=this.getTile(B),!I&&M&&(I=this._addTile(B)),I&&(o[B.key]=B,M=I.wasRequested(),I.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let a,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){a=this._loadedParentTiles[u.key];break}o.push(u.key);const d=u.scaledTo(u.overscaledZ-1);if(a=this._getLoadedTile(d),a)break;u=d}for(const d of o)this._loadedParentTiles[d]=a}}_addTile(e){let o=this._tiles[e.key];if(o)return this._source.prepareTile&&this._source.prepareTile(o),o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const a=Boolean(o);if(!a){const u=this.map?this.map.painter:null;o=new Kg(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._source.prepareTile&&this._source.prepareTile(o)||this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))}return o?(o.uses++,this._tiles[e.key]=o,a||this._source.fire(new Xt("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=o.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,o,a){const u=[],d=this.transform;if(!d)return u;for(const m in this._tiles){const y=this._tiles[m];if(a&&y.clearQueryDebugViz(),y.holdingForFade())continue;const b=e.containsTile(y,d,o);b&&u.push(b)}return u}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);for(const a of o)a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(pb(this._source.type))for(const e in this._tiles){const o=this._tiles[e];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=_e.now())return!0}return!1}setFeatureState(e,o,a){this._state.updateState(e=e||"_geojsonTileLayer",o,a)}removeFeatureState(e,o,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,a)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,a){const u=this._tiles[e];u&&u.setDependencies(o,a)}reloadTilesForDependencies(e,o){for(const a in this._tiles)this._tiles[a].hasDependency(e,o)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,o))}_preloadTiles(e,o){const a=new Map,u=Array.isArray(e)?e:[e],d=this.map.painter.terrain,m=this.usedForTerrain&&d?d.getScaledDemTileSize():this._source.tileSize;for(const y of u){const b=y.coveringTiles({tileSize:m,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of b)a.set(T.key,T);this.usedForTerrain&&y.updateElevation(!1)}nt(Array.from(a.values()),(y,b)=>{const T=new Kg(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,I=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),b(I,T)})},o)}}function db(r,e){const o=Math.abs(2*r.wrap)-+(r.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||a-o||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x}function pb(r){return r==="raster"||r==="image"||r==="video"}Tu.maxOverzooming=10,Tu.maxUnderzooming=3;class dm{constructor(e,o,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=o,this._offset=a}static create(e,o,a){const u=a||e.findDEMTileFor(o);if(!u||!u.dem)return;const d=u.dem,m=u.tileID,y=1<<o.canonical.z-m.canonical.z;return new dm(u,u.tileSize/On/y,[(o.canonical.x/y-m.canonical.x)*d.dim,(o.canonical.y/y-m.canonical.y)*d.dim])}tileCoordToPixel(e,o){const a=o*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),d=Math.floor(a);return new D(u,d)}getElevationAt(e,o,a,u){const d=e*this._scale+this._offset[0],m=o*this._scale+this._offset[1],y=Math.floor(d),b=Math.floor(m),T=this._dem;return u=!!u,a?mn(mn(T.get(y,b,u),T.get(y,b+1,u),m-b),mn(T.get(y+1,b,u),T.get(y+1,b+1,u),m-b),d-y):T.get(y,b,u)}getElevationAtPixel(e,o,a){return this._dem.get(e,o,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Uh(1,e)*this._dem.stride}}class mb{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new pi(On,16,0),this.featureIndexArray=new Fi,this.promoteId=o}insert(e,o,a,u,d,m=0){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,u,d,m);const b=this.grid;for(let T=0;T<o.length;T++){const I=o[T],M=[1/0,1/0,-1/0,-1/0];for(let P=0;P<I.length;P++){const B=I[P];M[0]=Math.min(M[0],B.x),M[1]=Math.min(M[1],B.y),M[2]=Math.max(M[2],B.x),M[3]=Math.max(M[3],B.y)}M[0]<On&&M[1]<On&&M[2]>=0&&M[3]>=0&&b.insert(y,M[0],M[1],M[2],M[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new wu.VectorTile(new bd(this.rawTileData)).layers,this.sourceLayerCoder=new eb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,o,a,u){this.loadVTLayers();const d=e.params||{},m=rs(d.filter),y=e.tileResult,b=e.transform,T=y.bufferedTilespaceBounds,I=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(j,q,Q,le)=>Rx(y.bufferedTilespaceGeometry,j,q,Q,le));I.sort(JM);let M=null;b.elevation&&I.length>0&&(M=dm.create(b.elevation,this.tileID));const P={};let B;for(let j=0;j<I.length;j++){const q=I[j];if(q===B)continue;B=q;const Q=this.featureIndexArray.get(q);let le=null;this.loadMatchingFeature(P,Q,m,d.layers,d.availableImages,o,a,u,(xe,Me,Le,ze=0)=>(le||(le=hl(xe,this.tileID.canonical,e.tileTransform)),Me.queryIntersectsFeature(y,xe,Le,le,this.z,e.transform,e.pixelPosMatrix,M,ze)))}return P}loadMatchingFeature(e,o,a,u,d,m,y,b,T){const{featureIndex:I,bucketIndex:M,sourceLayerIndex:P,layoutVertexArrayOffset:B}=o,j=this.bucketLayerIDs[M];if(u&&!function(xe,Me){for(let Le=0;Le<xe.length;Le++)if(Me.indexOf(xe[Le])>=0)return!0;return!1}(u,j))return;const q=this.sourceLayerCoder.decode(P),Q=this.vtLayers[q].feature(I);if(a.needGeometry){const xe=vu(Q,!0);if(!a.filter(new Ii(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!a.filter(new Ii(this.tileID.overscaledZ),Q))return;const le=this.getId(Q,q);for(let xe=0;xe<j.length;xe++){const Me=j[xe];if(u&&u.indexOf(Me)<0)continue;const Le=m[Me];if(!Le)continue;let ze={};le!==void 0&&b&&(ze=b.getState(Le.sourceLayer||"_geojsonTileLayer",le));const Re=Xe({},y[Me]);Re.paint=_b(Re.paint,Le.paint,Q,ze,d),Re.layout=_b(Re.layout,Le.layout,Q,ze,d);const it=!T||T(Q,Le,ze,B);if(!it)continue;const at=new tb(Q,this.z,this.x,this.y,le);at.layer=Re;let vt=e[Me];vt===void 0&&(vt=e[Me]=[]),vt.push({featureIndex:I,feature:at,intersectionZ:it})}}lookupSymbolFeatures(e,o,a,u,d,m,y,b){const T={};this.loadVTLayers();const I=rs(d);for(const M of e)this.loadMatchingFeature(T,{bucketIndex:a,sourceLayerIndex:u,featureIndex:M,layoutVertexArrayOffset:0},I,m,y,b,o);return T}loadFeature(e){const{featureIndex:o,sourceLayerIndex:a}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(a),d=this.vtFeatures[u];if(d[o])return d[o];const m=this.vtLayers[u].feature(o);return d[o]=m,m}hasLayer(e){for(const o of this.bucketLayerIDs)for(const a of o)if(e===a)return!0;return!1}getId(e,o){let a=e.id;return this.promoteId&&(a=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof a=="boolean"&&(a=Number(a))),a}}function _b(r,e,o,a,u){return lt(r,(d,m)=>{const y=e instanceof x?e.get(m):null;return y&&y.evaluate?y.evaluate(o,a,u):y})}function JM(r,e){return e-r}Bt(mb,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class gb{constructor(e){const o={},a=[];for(const y in e){const b=e[y],T=o[y]={};for(const I in b.glyphs){const M=b.glyphs[+I];if(!M||M.bitmap.width===0||M.bitmap.height===0)continue;const P=M.metrics.localGlyph?2:1,B={x:0,y:0,w:M.bitmap.width+2*P,h:M.bitmap.height+2*P};a.push(B),T[I]=B}}const{w:u,h:d}=Dg(a),m=new fl({width:u||1,height:d||1});for(const y in e){const b=e[y];for(const T in b.glyphs){const I=b.glyphs[+T];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const M=o[y][T],P=I.metrics.localGlyph?2:1;fl.copy(I.bitmap,m,{x:0,y:0},{x:M.x+P,y:M.y+P},I.bitmap)}}this.image=m,this.positions=o}}Bt(gb,"GlyphAtlas");class QM{constructor(e){this.tileID=new lo(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Eu(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,o,a,u,d){this.status="parsing",this.data=e,this.collisionBoxArray=new Ws;const m=new eb(Object.keys(e.layers).sort()),y=new mb(this.tileID,this.promoteId);y.bucketLayerIDs=[];const b={},T=new qg(256,256),I={featureIndex:y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:a},M=o.familiesBySource[this.source];for(const ze in M){const Re=e.layers[ze];if(!Re)continue;let it=!1,at=!1;for(const et of M[ze])et[0].type==="symbol"?it=!0:at=!0;if(this.isSymbolTile===!0&&!it||this.isSymbolTile===!1&&!at)continue;Re.version===1&&Gt(`Vector tile source "${this.source}" layer "${ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vt=m.encode(ze),xt=[];for(let et=0;et<Re.length;et++){const dt=Re.feature(et),Tt=y.getId(dt,ze);xt.push({feature:dt,id:Tt,index:et,sourceLayerIndex:vt})}for(const et of M[ze]){const dt=et[0];this.isSymbolTile!==void 0&&dt.type==="symbol"!==this.isSymbolTile||dt.minzoom&&this.zoom<Math.floor(dt.minzoom)||dt.maxzoom&&this.zoom>=dt.maxzoom||dt.visibility!=="none"&&(ny(et,this.zoom,a),(b[dt.id]=dt.createBucket({index:y.bucketLayerIDs.length,layers:et,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.name,availableImages:a})).populate(xt,I,this.tileID.canonical,this.tileTransform),y.bucketLayerIDs.push(et.map(Tt=>Tt.id)))}}let P,B,j,q;T.trim();const Q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},le=lt(I.glyphDependencies,ze=>Object.keys(ze).map(Number));Object.keys(le).length?u.send("getGlyphs",{uid:this.uid,stacks:le},(ze,Re)=>{P||(P=ze,B=Re,Le.call(this))},void 0,!1,Q):B={};const xe=Object.keys(I.iconDependencies);xe.length?u.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"icons"},(ze,Re)=>{P||(P=ze,j=Re,Le.call(this))},void 0,!1,Q):j={};const Me=Object.keys(I.patternDependencies);function Le(){if(P)return d(P);if(B&&j&&q){const ze=new gb(B),Re=new w1(j,q);for(const it in b){const at=b[it];at instanceof pc?(ny(at.layers,this.zoom,a),CM(at,B,ze.positions,j,Re.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection)):at.hasPattern&&(at instanceof em||at instanceof Jp||at instanceof yd)&&(ny(at.layers,this.zoom,a),at.addFeatures(I,this.tileID.canonical,Re.patternPositions,a,this.tileTransform))}this.status="done",d(null,{buckets:Ee(b).filter(it=>!it.isEmpty()),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ze.image,lineAtlas:T,imageAtlas:Re,glyphMap:this.returnDependencies?B:null,iconMap:this.returnDependencies?j:null,glyphPositions:this.returnDependencies?ze.positions:null})}}Me.length?u.send("getImages",{icons:Me,source:this.source,tileID:this.tileID,type:"patterns"},(ze,Re)=>{P||(P=ze,q=Re,Le.call(this))},void 0,!1,Q):q={},Le.call(this)}}function ny(r,e,o){const a=new Ii(e);for(const u of r)u.recalculate(a,o)}class yb{constructor(e){this.entries={},this.scheduler=e}request(e,o,a,u){const d=this.entries[e]=this.entries[e]||{callbacks:[]};if(d.result){const[m,y]=d.result;return this.scheduler?this.scheduler.add(()=>{u(m,y)},o):u(m,y),()=>{}}return d.callbacks.push(u),d.cancel||(d.cancel=a((m,y)=>{d.result=[m,y];for(const b of d.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,y)},o):b(m,y);setTimeout(()=>delete this.entries[e],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(m=>m!==u),d.callbacks.length||(d.cancel(),delete this.entries[e]))}}}function vb(r,e,o){const a=JSON.stringify(r.request);return r.data&&(this.deduped.entries[a]={result:[null,r.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},u=>{const d=de(r.request,(m,y,b,T)=>{m?u(m):y&&u(null,{vectorTile:o?void 0:new wu.VectorTile(new bd(y)),rawData:y,cacheControl:b,expires:T})});return()=>{d.cancel(),u()}},e)}const ek=Ca(new Float32Array(16));class yc{constructor(e){this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,o){return{x:0,y:0,z:0}}unproject(e,o){return new xi(0,0)}projectTilePoint(e,o,a){return{x:e,y:o,z:0}}locationPoint(e,o){return e._coordinatePoint(e.locationCoordinate(o),!1)}pixelsPerMeter(e,o){return Uh(1,e)*o}farthestPixelDistance(e){return function(o,a){const u=o.fovAboveCenter,d=o.elevation?o.elevation.getMinElevationBelowMSL()*a:0,m=(o._camera.position[2]*o.worldSize-d)/Math.cos(o._pitch),y=Math.sin(u)*m/Math.sin(Math.max(Math.PI/2-o._pitch-u,.01)),b=Math.sin(o._pitch)*y+m;return Math.min(1.01*b,m*(1/o._horizonShift))}(e,e.pixelsPerMeter)}pointCoordinate(e,o,a,u){const d=e.horizonLineFromTop(!1),m=new D(o,Math.max(d,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,u))}createInversionMatrix(e,o){return ek}createTileMatrix(e,o,a){let u,d,m;const y=a.canonical,b=Ca(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Eu(y,this);u=1,d=T.x+a.wrap*T.scale,m=T.y,hc(b,b,[u/T.scale,u/T.scale,e.pixelsPerMeter/o])}else u=o/e.zoomScale(y.z),d=(y.x+Math.pow(2,y.z)*a.wrap)*u,m=y.y*u;return xu(b,b,[d,m,0]),hc(b,b,[u/On,u/On,1]),b}upVector(e,o,a){return[0,0,1]}upVectorScale(e,o,a){return{metersToTile:1,metersToLabelSpace:1}}}class tk extends yc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,o){return{x:sd(e),y:$h(o),z:0}}unproject(e,o){const a=Ms(e),u=$r(o);return new xi(a,u)}}class nk extends yc{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[o,a]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(J(o));this.n=(u+Math.sin(J(a)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,o){const{n:a,c:u,r0:d}=this,m=J(e-this.center[0]),y=J(o),b=Math.sqrt(u-2*a*Math.sin(y))/a;return{x:b*Math.sin(m*a),y:b*Math.cos(m*a)-d,z:0}}unproject(e,o){const{n:a,c:u,r0:d}=this,m=d+o;let y=Math.atan2(e,Math.abs(m))*Math.sign(m);m*a<0&&(y-=Math.PI*Math.sign(e)*Math.sign(m));const b=J(this.center[0])*a;y=wt(y,-Math.PI-b,Math.PI-b);const T=H(y/a)+this.center[0],I=Math.asin(Pe((u-(e*e+m*m)*a*a)/(2*a),-1,1)),M=Pe(H(I),-85.051129,Sa);return new xi(T,M)}}const Id=1.340264,Md=-.081106,kd=893e-6,Ld=.003796,pm=Math.sqrt(3)/2;class ik extends yc{project(e,o){o=o/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(pm*Math.sin(o)),u=a*a,d=u*u*u;return{x:.5*(e*Math.cos(a)/(pm*(Id+3*Md*u+d*(7*kd+9*Ld*u)))/Math.PI+.5),y:1-.5*(a*(Id+Md*u+d*(kd+Ld*u))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let a=o=(2*(1-o)-1)*Math.PI,u=a*a,d=u*u*u;for(let I,M,P,B=0;B<12&&(M=a*(Id+Md*u+d*(kd+Ld*u))-o,P=Id+3*Md*u+d*(7*kd+9*Ld*u),I=M/P,a=Pe(a-I,-Math.PI/3,Math.PI/3),u=a*a,d=u*u*u,!(Math.abs(I)<1e-12));++B);const m=pm*e*(Id+3*Md*u+d*(7*kd+9*Ld*u))/Math.cos(a),y=Math.asin(Math.sin(a)/pm),b=Pe(180*m/Math.PI,-180,180),T=Pe(180*y/Math.PI,-85.051129,Sa);return new xi(b,T)}}class rk extends yc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){return{x:.5+e/360,y:.5-o/360,z:0}}unproject(e,o){const a=360*(e-.5),u=Pe(360*(.5-o),-85.051129,Sa);return new xi(a,u)}}const nf=Math.PI/2;function mm(r){return Math.tan((nf+r)/2)}class ok extends yc{constructor(e){super(e),this.center=e.center||[0,30];const[o,a]=this.parallels=e.parallels||[30,30],u=J(o),d=J(a),m=Math.cos(u);this.n=u===d?Math.sin(u):Math.log(m/Math.cos(d))/Math.log(mm(d)/mm(u)),this.f=m*Math.pow(mm(u),this.n)/this.n}project(e,o){o=J(o),e=J(e-this.center[0]);const a=1e-6,{n:u,f:d}=this;d>0?o<-nf+a&&(o=-nf+a):o>nf-a&&(o=nf-a);const m=d/Math.pow(mm(o),u),y=m*Math.sin(u*e),b=d-m*Math.cos(u*e);return{x:.5*(y/Math.PI+.5),y:1-.5*(b/Math.PI+.5),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI,o=(2*(1-o)-.5)*Math.PI;const{n:a,f:u}=this,d=u-o,m=Math.sign(d),y=Math.sign(a)*Math.sqrt(e*e+d*d);let b=Math.atan2(e,Math.abs(d))*m;d*a<0&&(b-=Math.PI*Math.sign(e)*m);const T=Pe(H(b/a)+this.center[0],-180,180),I=Pe(H(2*Math.atan(Math.pow(u/y,1/a))-nf),-85.051129,Sa);return new xi(T,I)}}const xb=J(Sa);class sk extends yc{project(e,o){const a=(o=J(o))*o,u=a*a;return{x:.5*((e=J(e))*(.8707-.131979*a+u*(u*(.003971*a-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+a*(.015085+u*(.028874*a-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let a=o=(2*(1-o)-1)*Math.PI,u=25,d=0,m=a*a;do{m=a*a;const T=m*m;d=(a*(1.007226+m*(.015085+T*(.028874*m-.044475-.005916*T)))-o)/(1.007226+m*(.045255+T*(.259866*m-.311325-.005916*11*T))),a=Pe(a-d,-xb,xb)}while(Math.abs(d)>1e-6&&--u>0);m=a*a;const y=Pe(H(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),b=H(a);return new xi(y,b)}}const bb=J(Sa);class ak extends yc{project(e,o){o=J(o),e=J(e);const a=Math.cos(o),u=2/Math.PI,d=Math.acos(a*Math.cos(e/2)),m=Math.sin(d)/d,y=.5*(e*u+2*a*Math.sin(e/2)/m)||0,b=.5*(o+Math.sin(o)/m)||0;return{x:.5*(y/Math.PI+.5),y:1-.5*(b/Math.PI+1),z:0}}unproject(e,o){let a=e=(2*e-.5)*Math.PI,u=o=(2*(1-o)-1)*Math.PI,d=25;const m=1e-6;let y=0,b=0;do{const T=Math.cos(u),I=Math.sin(u),M=2*I*T,P=I*I,B=T*T,j=Math.cos(a/2),q=Math.sin(a/2),Q=2*j*q,le=q*q,xe=1-B*j*j,Me=xe?1/xe:0,Le=xe?Math.acos(T*j)*Math.sqrt(1/xe):0,ze=.5*(2*Le*T*q+2*a/Math.PI)-e,Re=.5*(Le*I+u)-o,it=.5*Me*(B*le+Le*T*j*P)+1/Math.PI,at=Me*(Q*M/4-Le*I*q),vt=.125*Me*(M*q-Le*I*B*Q),xt=.5*Me*(P*j+Le*le*T)+.5,et=at*vt-xt*it;y=(Re*at-ze*xt)/et,b=(ze*vt-Re*it)/et,a=Pe(a-y,-Math.PI,Math.PI),u=Pe(u-b,-bb,bb)}while((Math.abs(y)>m||Math.abs(b)>m)&&--d>0);return new xi(H(a),H(u))}}class wb extends yc{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(J(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){const{scale:a,cosPhi:u}=this;return{x:J(e)*u*a+.5,y:-Math.sin(J(o))/u*a+.5,z:0}}unproject(e,o){const{scale:a,cosPhi:u}=this,d=-(o-.5)/a,m=Pe(H((e-.5)/a)/u,-180,180),y=Math.asin(Pe(d*u,-1,1)),b=Pe(H(y),-85.051129,Sa);return new xi(m,b)}}s.ARRAY_TYPE=Bo,s.AUTH_ERR_MSG=Vt,s.Aabb=ss,s.Actor=class{constructor(r,e,o){this.target=r,this.parent=e,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Ye(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=bt()?r:K,this.scheduler=new UM}send(r,e,o,a,u=!1,d){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=d,this.callbacks[m]=o);const y=rt(this.globalScope)?void 0:[];return this.target.postMessage({id:m,type:r,hasCallback:!!o,targetMapId:a,mustQueue:u,sourceMapId:this.mapId,data:Yr(e,y)},y),{cancel:()=>{o&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(r){const e=r.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const a=this.cancelCallbacks[o];delete this.cancelCallbacks[o],a&&a.cancel()}else if(e.mustQueue||bt()){const a=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,e),a&&a.metadata||{type:"message"})}else this.processTask(o,e)}processTask(r,e){if(e.type==="<response>"){const o=this.callbacks[r];delete this.callbacks[r],o&&(e.error?o(Nr(e.error)):o(null,Nr(e.data)))}else{const o=rt(this.globalScope)?void 0:[],a=e.hasCallback?(d,m)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:d?Yr(d):null,data:Yr(m,o)},o)}:d=>{},u=Nr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){const d=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,d[0],u.source)[d[1]](u,a)}else a(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=um,s.Color=Rn,s.ColorMode=La,s.CullFaceMode=Ys,s.DEMData=fm,s.DataConstantProperty=E,s.DedupedRequest=yb,s.DepthMode=tf,s.EXTENT=On,s.Elevation=class{isDataAvailableAtPoint(r){const e=this._source();if(!e||r.y<0||r.y>1)return!1;const o=e.getSource().maxzoom,a=1<<o,u=Math.floor(r.x),d=Math.floor((r.x-u)*a),m=Math.floor(r.y*a),y=this.findDEMTileFor(new lo(o,u,o,d,m));return!(!y||!y.dem)}getAtPointOrZero(r,e=0){return this.getAtPoint(r,e)||0}getAtPoint(r,e,o=!0){e==null&&(e=null);const a=this._source();if(!a||r.y<0||r.y>1)return e;const u=a.getSource().maxzoom,d=1<<u,m=Math.floor(r.x),y=r.x-m,b=new lo(u,m,u,Math.floor(y*d),Math.floor(r.y*d)),T=this.findDEMTileFor(b);if(!T||!T.dem)return e;const I=T.dem,M=1<<T.tileID.canonical.z,P=(y*M-T.tileID.canonical.x)*I.dim,B=(r.y*M-T.tileID.canonical.y)*I.dim,j=Math.floor(P),q=Math.floor(B);return(o?this.exaggeration():1)*mn(mn(I.get(j,q),I.get(j,q+1),B-q),mn(I.get(j+1,q),I.get(j+1,q+1),B-q),P-j)}getAtTileOffset(r,e,o){const a=1<<r.canonical.z;return this.getAtPointOrZero(new Vp(r.wrap+(r.canonical.x+e/On)/a,(r.canonical.y+o/On)/a))}getAtTileOffsetFunc(r,e,o,a){return u=>{const d=this.getAtTileOffset(r,u.x,u.y),m=a.upVector(r.canonical,u.x,u.y);return ld(m,m,d*a.upVectorScale(r.canonical,e,o).metersToTile),m}}getForTilePoints(r,e,o,a){const u=dm.create(this,r,a);return!!u&&(e.forEach(d=>{d[2]=this.exaggeration()*u.getElevationAt(d[0],d[1],o)}),!0)}getMinMaxForTile(r){const e=this.findDEMTileFor(r);if(!e||!e.dem)return null;const o=e.dem.tree,a=e.tileID,u=1<<r.canonical.z-a.canonical.z;let d=r.canonical.x/u-a.canonical.x,m=r.canonical.y/u-a.canonical.y,y=0;for(let b=0;b<r.canonical.z-a.canonical.z&&!o.leaves[y];b++){d*=2,m*=2;const T=2*Math.floor(m)+Math.floor(d);y=o.childOffsets[y]+T,d%=1,m%=1}return{min:this.exaggeration()*o.minimums[y],max:this.exaggeration()*o.maximums[y]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,e,o){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=an,s.EvaluationParameters=Ii,s.Event=Xt,s.Evented=gn,s.FillExtrusionBucket=yd,s.Frustum=wg,s.GLOBE_RADIUS=ef,s.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r),this._createAtmosphere(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();this._gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this._wireframeIndexBuffer&&(this._wireframeIndexBuffer.destroy(),this._wireframeSegments.destroy())}_createGrid(r){const e=new ue,o=new Jt,a=65;for(let u=0;u<a;u++)for(let d=0;d<a;d++)e.emplaceBack(d,u);for(let u=0;u<64;u++)for(let d=0;d<64;d++){const m=u*a+d;o.emplaceBack(m+1,m,m+a),o.emplaceBack(m+a,m+a+1,m+1)}this._gridBuffer=r.createVertexBuffer(e,Ad.members),this._gridIndexBuffer=r.createIndexBuffer(o,!0),this._gridSegments=Xi.simpleSegment(0,0,4225,8192)}_createPoles(r){const e=new Jt;for(let u=0;u<=64;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=r.createIndexBuffer(e,!0);const o=new xn,a=new xn;this._poleSegments=[];for(let u=0,d=0;u<5;u++){const m=1<<u,y=512*m/Math.PI/2,b=360/m;o.emplaceBack(0,-y,0,0,0,.5,0),a.emplaceBack(0,-y,0,0,0,.5,1);for(let T=0;T<=64;T++){const I=T/64,M=mn(0,b,I),[P,B,j]=W1(qM,ZM,M,y);o.emplaceBack(P,B,j,0,0,I,0),a.emplaceBack(P,B,j,0,0,I,1)}this._poleSegments.push(Xi.simpleSegment(d,0,66,64)),d+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(o,G1,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(a,G1,!1)}_createAtmosphere(r){const e=new Bn;e.emplaceBack(-1,1,1,0,0),e.emplaceBack(1,1,1,1,0),e.emplaceBack(1,-1,1,1,1),e.emplaceBack(-1,-1,1,0,1);const o=new Jt;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.atmosphereVertexBuffer=r.createVertexBuffer(e,VM.members),this.atmosphereIndexBuffer=r.createIndexBuffer(o),this.atmosphereSegments=Xi.simpleSegment(0,0,4,2)}getGridBuffers(){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r){if(!this._wireframeSegments){const e=new wn,o=64,a=o+1;for(let u=0;u<o;u++)for(let d=0;d<o;d++){const m=u*a+d;e.emplaceBack(m,m+1),e.emplaceBack(m,m+a),e.emplaceBack(m,m+a+1)}this._wireframeIndexBuffer=r.createIndexBuffer(e),this._wireframeSegments=Xi.simpleSegment(0,0,o*o,e.length)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments]}},s.GlyphManager=Jh,s.ImagePosition=Og,s.LineAtlas=qg,s.LngLat=xi,s.LngLatBounds=uc,s.LocalGlyphMode=Bg,s.MAX_MERCATOR_LATITUDE=Sa,s.MercatorCoordinate=Vp,s.ONE_EM=Ur,s.OverscaledTileID=lo,s.Properties=U,s.RGBAImage=Fo,s.Ray=class{constructor(r,e){this.pos=r,this.dir=e}intersectsPlane(r,e,o){const a=ud(e,this.dir);if(Math.abs(a)<1e-6)return!1;const u=((r[0]-this.pos[0])*e[0]+(r[1]-this.pos[1])*e[1]+(r[2]-this.pos[2])*e[2])/a;return o[0]=this.pos[0]+this.dir[0]*u,o[1]=this.pos[1]+this.dir[1]*u,o[2]=this.pos[2]+this.dir[2]*u,!0}closestPointOnSphere(r,e,o){if(function(P,B){var j=P[0],q=P[1],Q=P[2],le=B[0],xe=B[1],Me=B[2];return Math.abs(j-le)<=pg*Math.max(1,Math.abs(j),Math.abs(le))&&Math.abs(q-xe)<=pg*Math.max(1,Math.abs(q),Math.abs(xe))&&Math.abs(Q-Me)<=pg*Math.max(1,Math.abs(Q),Math.abs(Me))}(this.pos,r)||e===0)return o[0]=o[1]=o[2]=0,!1;const[a,u,d]=this.dir,m=this.pos[0]-r[0],y=this.pos[1]-r[1],b=this.pos[2]-r[2],T=a*a+u*u+d*d,I=2*(m*a+y*u+b*d),M=I*I-4*T*(m*m+y*y+b*b-e*e);if(M<0){const P=Math.max(-I/2,0),B=m+a*P,j=y+u*P,q=b+d*P,Q=Math.hypot(B,j,q);return o[0]=B*e/Q,o[1]=j*e/Q,o[2]=q*e/Q,!1}{const P=(-I-Math.sqrt(M))/(2*T);if(P<0){const B=Math.hypot(m,y,b);return o[0]=m*e/B,o[1]=y*e/B,o[2]=b*e/B,!1}return o[0]=m+a*P,o[1]=y+u*P,o[2]=b+d*P,!0}}},s.RequestManager=class{constructor(r,e,o){this._transformRequestFn=r,this._customAccessToken=e,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const r=function(){let e="";for(let o=0;o<10;o++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ke,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,e){return this._transformRequestFn&&this._transformRequestFn(r,e)||{url:r}}normalizeStyleURL(r,e){if(!qt(r))return r;const o=An(r);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeGlyphsURL(r,e){if(!qt(r))return r;const o=An(r);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeSourceURL(r,e){if(!qt(r))return r;const o=An(r);return o.path=`/v4/${o.authority}.json`,o.params.push("secure"),this._makeAPIURL(o,this._customAccessToken||e)}normalizeSpriteURL(r,e,o,a){const u=An(r);return qt(r)?(u.path=`/styles/v1${u.path}/sprite${e}${o}`,this._makeAPIURL(u,this._customAccessToken||a)):(u.path+=`${e}${o}`,Sn(u))}normalizeTileURL(r,e,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!qt(r))return r;const a=An(r);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||o&&a.authority!=="raster"&&o===512?"@2x":""}${pt.supported?".webp":"$1"}`),a.authority==="raster"?a.path=`/${Ze.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${Ze.TILE_URL_VERSION}${a.path}`);const u=this._customAccessToken||function(d){for(const m of d){const y=m.match(/^access_token=(.*)$/);if(y)return y[1]}return null}(a.params)||Ze.ACCESS_TOKEN;return Ze.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&a.params.push(`sku=${this._skuToken}`),this._makeAPIURL(a,u)}canonicalizeTileURL(r,e){const o=An(r);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return r;let a="mapbox://";o.path.match(/^\/raster\/v1\//)?a+=`raster/${o.path.replace(`/${Ze.RASTER_URL_PREFIX}/`,"")}`:a+=`tiles/${o.path.replace(`/${Ze.TILE_URL_VERSION}/`,"")}`;let u=o.params;return e&&(u=u.filter(d=>!d.match(/^access_token=/))),u.length&&(a+=`?${u.join("&")}`),a}canonicalizeTileset(r,e){const o=!!e&&qt(e),a=[];for(const u of r.tiles||[])bn(u)?a.push(this.canonicalizeTileURL(u,o)):a.push(u);return a}_makeAPIURL(r,e){const o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=An(Ze.API_URL);if(r.protocol=a.protocol,r.authority=a.authority,r.protocol==="http"){const u=r.params.indexOf("secure");u>=0&&r.params.splice(u,1)}if(a.path!=="/"&&(r.path=`${a.path}${r.path}`),!Ze.REQUIRE_ACCESS_TOKEN)return Sn(r);if(e=e||Ze.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return r.params=r.params.filter(u=>u.indexOf("access_token")===-1),r.params.push(`access_token=${e||""}`),Sn(r)}},s.ResourceType=se,s.SegmentVector=Xi,s.SourceCache=Tu,s.StencilMode=Qg,s.StructArrayLayout1ui2=ii,s.StructArrayLayout2f1f2i16=nn,s.StructArrayLayout2i4=ue,s.StructArrayLayout2ui4=wn,s.StructArrayLayout3f12=Dt,s.StructArrayLayout3ui6=Jt,s.StructArrayLayout4i8=ye,s.Texture=Td,s.Tile=Kg,s.Transitionable=f,s.Uniform1f=Up,s.Uniform1i=class extends cl{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends cl{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},s.Uniform3f=class extends cl{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},s.Uniform4f=Sx,s.UniformColor=Cx,s.UniformMatrix2f=class extends cl{constructor(r,e){super(r,e),this.current=VC}set(r){for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},s.UniformMatrix3f=class extends cl{constructor(r,e){super(r,e),this.current=jC}set(r){for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},s.UniformMatrix4f=class extends cl{constructor(r,e){super(r,e),this.current=UC}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},s.UnwrappedTileID=Q1,s.ValidationError=Wt,s.VectorTileWorkerSource=class extends gn{constructor(r,e,o,a,u){super(),this.actor=r,this.layerIndex=e,this.availableImages=o,this.loadVectorData=u||vb,this.loading={},this.loaded={},this.deduped=new yb(r.scheduler),this.isSpriteLoaded=a,this.scheduler=r.scheduler}loadTile(r,e){const o=r.uid,a=r&&r.request,u=a&&a.collectResourceTiming,d=this.loading[o]=new QM(r);d.abort=this.loadVectorData(r,(m,y)=>{const b=!this.loading[o];if(delete this.loading[o],b||m||!y)return d.status="done",b||(this.loaded[o]=d),e(m);const T=y.rawData,I={};y.expires&&(I.expires=y.expires),y.cacheControl&&(I.cacheControl=y.cacheControl),d.vectorTile=y.vectorTile||new wu.VectorTile(new bd(T));const M=()=>{d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,(P,B)=>{if(P||!B)return e(P);const j={};if(u){const q=V1(a);q.length>0&&(j.resourceTiming=JSON.parse(JSON.stringify(q)))}e(null,Xe({rawTileData:T.slice(0)},B,I,j))})};this.isSpriteLoaded?M():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(M,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):M()}),this.loaded=this.loaded||{},this.loaded[o]=d})}reloadTile(r,e){const o=this.loaded,a=r.uid,u=this;if(o&&o[a]){const d=o[a];d.showCollisionBoxes=r.showCollisionBoxes,d.enableTerrain=!!r.enableTerrain,d.projection=r.projection,d.tileTransform=Eu(r.tileID.canonical,r.projection);const m=(y,b)=>{const T=d.reloadCallback;T&&(delete d.reloadCallback,d.parse(d.vectorTile,u.layerIndex,this.availableImages,u.actor,T)),e(y,b)};d.status==="parsing"?d.reloadCallback=m:d.status==="done"&&(d.vectorTile?d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,m):m())}}abortTile(r,e){const o=r.uid,a=this.loading[o];a&&(a.abort&&a.abort(),delete this.loading[o]),e()}removeTile(r,e){const o=this.loaded,a=r.uid;o&&o[a]&&delete o[a],e()}},s.WritingMode=as,s.ZoomHistory=hr,s.add=jx,s.addDynamicAttributes=jg,s.adjoint=function(r,e){var o=e[0],a=e[1],u=e[2],d=e[3],m=e[4],y=e[5],b=e[6],T=e[7],I=e[8];return r[0]=m*I-y*T,r[1]=u*T-a*I,r[2]=a*y-u*m,r[3]=y*b-d*I,r[4]=o*I-u*b,r[5]=u*d-o*y,r[6]=d*T-m*b,r[7]=a*b-o*T,r[8]=o*m-a*d,r},s.asyncAll=nt,s.bezier=ke,s.bindAll=Ye,s.boundsAttributes=ib,s.bufferConvexPolygon=function(r,e){const o=[];for(let a=0;a<r.length;a++){const u=wt(a-1,-1,r.length-1),d=wt(a+1,-1,r.length-1),m=r[a],y=r[d],b=r[u].sub(m).unit(),T=y.sub(m).unit(),I=T.angleWithSep(b.x,b.y),M=b.add(T).unit().mult(-1*e/Math.sin(I/2));o.push(m.add(M))}return o},s.cacheEntryPossiblyAdded=function(r){Wr++,Wr>Dr&&(r.getActor().send("enforceCacheSizeLimit",Hr),Wr=0)},s.calculateGlobeLabelMatrix=function(r,e){const{lng:o,lat:a}=r._center,u=X1(0,0,r.worldSize/r._projectionScaler,o,a);return mg(u,u,function(d){const m=Ca(new Float64Array(16)),y=1/Yg(d);return xu(m,m,d.min),hc(m,m,[y,y,y]),m}(Sd(e)))},s.calculateGlobeMatrix=Y1,s.calculateGlobeMercatorMatrix=function(r){const e=r.worldSize,o=r.point,a=Uh(1,r.center.lat)*e,u=r.pixelsPerMeter,d=e/(a/r.pixelsPerMeter),m=Ca(new Float64Array(16));return xu(m,m,[o.x,o.y,0]),hc(m,m,[d,d,u]),Float32Array.from(m)},s.circumferenceAtLatitude=lg,s.clamp=Pe,s.clearTileCache=function(r){const e=K.caches.delete(_r);r&&e.catch(r).then(()=>r())},s.clipLine=O1,s.clone=function(r){var e=new Bo(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},s.clone$1=qe,s.collisionCircleLayout=QI,s.config=Ze,s.conjugate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r},s.create=function(){var r=new Bo(16);return Bo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},s.create$1=Fx,s.createExpression=ol,s.createLayout=fe,s.createStyleLayer=function(r){return r.type==="custom"?new RM(r):new BM[r.type](r)},s.cross=Hx,s.degToRad=J,s.div=function(r,e,o){return r[0]=e[0]/o[0],r[1]=e[1]/o[1],r[2]=e[2]/o[2],r},s.dot=ud,s.earthRadius=ag,s.ease=Ae,s.easeCubicInOut=ge,s.emitValidationErrors=_i,s.endsWith=ht,s.enforceCacheSizeLimit=function(r){Ki(),Wi&&Wi.then(e=>{e.keys().then(o=>{for(let a=0;a<o.length-r;a++)e.delete(o[a])})})},s.evaluateSizeForFeature=tm,s.evaluateSizeForZoom=Zh,s.evaluateVariableOffset=F1,s.evented=nd,s.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]},s.exactEquals$1=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]},s.exported=_e,s.exported$1=pt,s.extend=Xe,s.extend$1=jn,s.filterObject=Ut,s.fromMat4=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},s.fromQuat=function(r,e){var o=e[0],a=e[1],u=e[2],d=e[3],m=o+o,y=a+a,b=u+u,T=o*m,I=a*m,M=a*y,P=u*m,B=u*y,j=u*b,q=d*m,Q=d*y,le=d*b;return r[0]=1-M-j,r[1]=I+le,r[2]=P-Q,r[3]=0,r[4]=I-le,r[5]=1-T-j,r[6]=B+q,r[7]=0,r[8]=P+Q,r[9]=B-q,r[10]=1-T-M,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.fromRotation=function(r,e){var o=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=o,r[2]=0,r[3]=-o,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},s.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.furthestTileCorner=function(r){const e=Math.round((r+45+360)%360/90)%4;return te[e]},s.getAABBPointSquareDist=function(r,e,o){let a=0;for(let u=0;u<2;++u){const d=o?o[u]:0;r[u]>d&&(a+=(r[u]-d)*(r[u]-d)),e[u]<d&&(a+=(d-e[u])*(d-e[u]))}return a},s.getAnchorAlignment=Ng,s.getAnchorJustification=$g,s.getBounds=function(r){let e=1/0,o=1/0,a=-1/0,u=-1/0;for(const d of r)e=Math.min(e,d.x),o=Math.min(o,d.y),a=Math.max(a,d.x),u=Math.max(u,d.y);return{min:new D(e,o),max:new D(a,u)}},s.getColumn=function(r,e){return[r[4*e],r[4*e+1],r[4*e+2],r[4*e+3]]},s.getGridMatrix=function(r,e){const[o,a]=e,u=.015625;return[0,(a[1]-o[1])*u,1<<r.z,(a[0]-o[0])*u,0,r.y,o[0],o[1],u]},s.getImage=Pt,s.getJSON=function(r,e){return re(Xe(r,{type:"json"}),e)},s.getMapSessionAPI=gi,s.getPerformanceMeasurement=V1,s.getProjection=function(r){const e=r.parallels,o=!!e&&Math.abs(e[0]+e[1])<.01;switch(r.name){case"mercator":return new tk(r);case"equirectangular":return new rk(r);case"naturalEarth":return new sk(r);case"equalEarth":return new ik(r);case"winkelTripel":return new ak(r);case"albers":return o?new wb(r):new nk(r);case"lambertConformalConic":return o?new wb(r):new ok(r)}throw new Error(`Invalid projection name: ${r.name}`)},s.getRTLTextPluginStatus=Bh,s.getReferrer=V,s.getTilePoint=function(r,{x:e,y:o},a=0){return new D(((e-a)*r.scale-r.x)*On,(o*r.scale-r.y)*On)},s.getTileVec3=function(r,e,o=0){return ad(((e.x-o)*r.scale-r.x)*On,(e.y*r.scale-r.y)*On,kx(e.z,e.y))},s.getVideo=function(r,e){const o=K.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let a=0;a<r.length;a++){const u=K.document.createElement("source");Ne(r[a])||(o.crossOrigin="Anonymous"),u.src=r[a],o.appendChild(u)}return{cancel:()=>{}}},s.globeECEFOrigin=function(r,e){const o=[0,0,0];return bu(o,o,Z1(Sd(e.canonical))),bu(o,o,r),o},s.globePixelsToTileUnits=function(r,e){return On/(512*Math.pow(2,r))*Yg(Sd(e))},s.globePoleMatrixForTile=function(r,e,o){const a=Ca(new Float64Array(16)),u=1<<r,d=360*(e/u-.5),m=o.point,y=o.worldSize/(o.tileSize*u);return xu(a,a,[m.x,m.y,-o.worldSize/Math.PI/2]),hc(a,a,[y,y,y]),_g(a,a,J(-o._center.lat)),gg(a,a,J(-o._center.lng+d)),Float32Array.from(a)},s.globeTileLatLngCorners=Xg,s.globeToMercatorTransition=function(r){return Qe(5,6,r)},s.identity=Ca,s.identity$1=Zx,s.invert=function(r,e){var o=e[0],a=e[1],u=e[2],d=e[3],m=e[4],y=e[5],b=e[6],T=e[7],I=e[8],M=e[9],P=e[10],B=e[11],j=e[12],q=e[13],Q=e[14],le=e[15],xe=o*y-a*m,Me=o*b-u*m,Le=o*T-d*m,ze=a*b-u*y,Re=a*T-d*y,it=u*T-d*b,at=I*q-M*j,vt=I*Q-P*j,xt=I*le-B*j,et=M*Q-P*q,dt=M*le-B*q,Tt=P*le-B*Q,Nt=xe*Tt-Me*dt+Le*et+ze*xt-Re*vt+it*at;return Nt?(r[0]=(y*Tt-b*dt+T*et)*(Nt=1/Nt),r[1]=(u*dt-a*Tt-d*et)*Nt,r[2]=(q*it-Q*Re+le*ze)*Nt,r[3]=(P*Re-M*it-B*ze)*Nt,r[4]=(b*xt-m*Tt-T*vt)*Nt,r[5]=(o*Tt-u*xt+d*vt)*Nt,r[6]=(Q*Le-j*it-le*Me)*Nt,r[7]=(I*it-P*Le+B*Me)*Nt,r[8]=(m*dt-y*xt+T*at)*Nt,r[9]=(a*xt-o*dt-d*at)*Nt,r[10]=(j*Re-q*Le+le*xe)*Nt,r[11]=(M*Le-I*Re-B*xe)*Nt,r[12]=(y*vt-m*et-b*at)*Nt,r[13]=(o*et-a*vt+u*at)*Nt,r[14]=(q*Me-j*ze-Q*xe)*Nt,r[15]=(I*ze-M*Me+P*xe)*Nt,r):null},s.isMapAuthenticated=function(r){return Cr.has(r)},s.isMapboxURL=qt,s.isSafariWithAntialiasingBug=function(r){const e=r.navigator?r.navigator.userAgent:null;return!!rt(r)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=$r,s.len=sI,s.length=Ux,s.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},s.loadVectorTile=vb,s.makeRequest=re,s.mercatorXfromLng=sd,s.mercatorYfromLat=$h,s.mercatorZfromAltitude=Uh,s.mul=rI,s.mul$1=oI,s.multiply=function(r,e,o){var a=e[0],u=e[1],d=e[2],m=e[3],y=e[4],b=e[5],T=e[6],I=e[7],M=e[8],P=o[0],B=o[1],j=o[2],q=o[3],Q=o[4],le=o[5],xe=o[6],Me=o[7],Le=o[8];return r[0]=P*a+B*m+j*T,r[1]=P*u+B*y+j*I,r[2]=P*d+B*b+j*M,r[3]=q*a+Q*m+le*T,r[4]=q*u+Q*y+le*I,r[5]=q*d+Q*b+le*M,r[6]=xe*a+Me*m+Le*T,r[7]=xe*u+Me*y+Le*I,r[8]=xe*d+Me*b+Le*M,r},s.multiply$1=mg,s.multiply$2=Gx,s.nextPowerOfTwo=He,s.normalize=cd,s.normalize$1=function(r,e){var o=e[0],a=e[1],u=e[2],d=e[3],m=o*o+a*a+u*u+d*d;return m>0&&(m=1/Math.sqrt(m)),r[0]=o*m,r[1]=a*m,r[2]=u*m,r[3]=d*m,r},s.number=mn,s.ortho=function(r,e,o,a,u,d,m){var y=1/(e-o),b=1/(a-u),T=1/(d-m);return r[0]=-2*y,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*b,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(e+o)*y,r[13]=(u+a)*b,r[14]=(m+d)*T,r[15]=1,r},s.pbf=bd,s.perspective=function(r,e,o,a,u){var d,m=1/Math.tan(e/2);return r[0]=m/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=m,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,u!=null&&u!==1/0?(r[10]=(u+a)*(d=1/(a-u)),r[14]=2*u*a*d):(r[10]=-1,r[14]=-2*a),r},s.pick=function(r,e){const o={};for(let a=0;a<e.length;a++){const u=e[a];u in r&&(o[u]=r[u])}return o},s.plugin=Ro,s.pointGeometry=D,s.polygonIntersectsBox=Rx,s.polygonIntersectsPolygon=Px,s.polygonizeBounds=function(r,e,o=0,a=!0){const u=new D(o,o),d=r.sub(u),m=e.add(u),y=[d,new D(m.x,d.y),m,new D(d.x,m.y)];return a&&y.push(d),y},s.posAttributes=Ad,s.postMapLoadEvent=$i,s.postTurnstileEvent=vr,s.potpack=Dg,s.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},s.radToDeg=H,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(r){return r({pluginStatus:ao,pluginURL:vo}),nd.on("pluginStateChange",r),r},s.removeAuthState=function(r){Cr.delete(r)},s.renderColorRamp=Tg,s.rotateX=_g,s.rotateX$1=Xx,s.rotateY=gg,s.rotateZ=function(r,e,o){var a=Math.sin(o),u=Math.cos(o),d=e[0],m=e[1],y=e[2],b=e[3],T=e[4],I=e[5],M=e[6],P=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=d*u+T*a,r[1]=m*u+I*a,r[2]=y*u+M*a,r[3]=b*u+P*a,r[4]=T*u-d*a,r[5]=I*u-m*a,r[6]=M*u-y*a,r[7]=P*u-b*a,r},s.rotateZ$1=function(r,e,o){o*=.5;var a=e[0],u=e[1],d=e[2],m=e[3],y=Math.sin(o),b=Math.cos(o);return r[0]=a*b+u*y,r[1]=u*b-a*y,r[2]=d*b+m*y,r[3]=m*b-d*y,r},s.scale=hc,s.scale$1=function(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r},s.scale$2=ld,s.scaleAndAdd=bg,s.setCacheLimits=function(r,e){Hr=r,Dr=e},s.setColumn=function(r,e,o){r[4*e+0]=o[0],r[4*e+1]=o[1],r[4*e+2]=o[2],r[4*e+3]=o[3]},s.setRTLTextPlugin=function(r,e,o=!1){if(ao===Qf||ao===pu||ao===ed)throw new Error("setRTLTextPlugin cannot be called multiple times.");vo=_e.resolveURL(r),ao=Qf,td=e,al(),o||oc()},s.smoothstep=Qe,s.spec=Ue,s.storeAuthState=function(r,e){e?Cr.add(r):Cr.delete(r)},s.sub=Gh,s.subtract=Vx,s.symbolSize=eM,s.tileAABB=function(r,e,o,a,u,d,m,y,b){if(b.name==="globe")return WM(r,e,new um(o,a,u));const T=Eu({z:o,x:a,y:u},b);return new ss([(d+T.x/T.scale)*e,e*(T.y/T.scale),m],[(d+T.x2/T.scale)*e,e*(T.y2/T.scale),y])},s.tileTransform=Eu,s.transformMat3=function(r,e,o){var a=e[0],u=e[1],d=e[2];return r[0]=a*o[0]+u*o[3]+d*o[6],r[1]=a*o[1]+u*o[4]+d*o[7],r[2]=a*o[2]+u*o[5]+d*o[8],r},s.transformMat4=bu,s.transformMat4$1=Hh,s.transformQuat=Wx,s.translate=xu,s.transpose=function(r,e){if(r===e){var o=e[1],a=e[2],u=e[5];r[1]=e[3],r[2]=e[6],r[3]=o,r[5]=e[7],r[6]=a,r[7]=u}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r},s.triggerPluginCompletionEvent=mu,s.uniqueId=Be,s.validateCustomStyleLayer=function(r){const e=[],o=r.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=r=>Qn(De(r)),s.validateFog=r=>Qn(Nn(r)),s.validateLayer=r=>Qn(pn(r)),s.validateLight=r=>Qn(Dn(r)),s.validateSource=r=>Qn(Pn(r)),s.validateStyle=ni,s.validateTerrain=r=>Qn($n(r)),s.values=Ee,s.vectorTile=wu,s.version=C,s.warnOnce=Gt,s.window=K,s.wrap=wt}),g(["./shared"],function(s){function C(se){if(typeof se=="number"||typeof se=="boolean"||typeof se=="string"||se==null)return JSON.stringify(se);if(Array.isArray(se)){let V="[";for(const re of se)V+=`${C(re)},`;return`${V}]`}let $="{";for(const V of Object.keys(se).sort())$+=`${V}:${C(se[V])},`;return`${$}}`}function O(se){let $="";for(const V of s.refProperties)$+=`/${C(se[V])}`;return $}class k{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,V){for(const de of $)this._layerConfigs[de.id]=de,(this._layers[de.id]=s.createStyleLayer(de)).compileFilter(),this.keyCache[de.id]&&delete this.keyCache[de.id];for(const de of V)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const re=function(de,Te){const $e={};for(let Ce=0;Ce<de.length;Ce++){const je=Te&&Te[de[Ce].id]||O(de[Ce]);Te&&(Te[de[Ce].id]=je);let _t=$e[je];_t||(_t=$e[je]=[]),_t.push(de[Ce])}const Ne=[];for(const Ce in $e)Ne.push($e[Ce]);return Ne}(s.values(this._layerConfigs),this.keyCache);for(const de of re){const Te=de.map(Pt=>this._layers[Pt.id]),$e=Te[0];if($e.visibility==="none")continue;const Ne=$e.source||"";let Ce=this.familiesBySource[Ne];Ce||(Ce=this.familiesBySource[Ne]={});const je=$e.sourceLayer||"_geojsonTileLayer";let _t=Ce[je];_t||(_t=Ce[je]=[]),_t.push(Te)}}}class D{loadTile($,V){const{uid:re,encoding:de,rawImageData:Te,padding:$e,buildQuadTree:Ne}=$,Ce=s.window.ImageBitmap&&Te instanceof s.window.ImageBitmap?this.getImageData(Te,$e):Te;V(null,new s.DEMData(re,Ce,de,$e<1,Ne))}getImageData($,V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas($.width,$.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=$.width,this.offscreenCanvas.height=$.height,this.offscreenCanvasContext.drawImage($,0,0,$.width,$.height);const re=this.offscreenCanvasContext.getImageData(-V,-V,$.width+2*V,$.height+2*V);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),re}}var F=function se($,V){var re,de=$&&$.type;if(de==="FeatureCollection")for(re=0;re<$.features.length;re++)se($.features[re],V);else if(de==="GeometryCollection")for(re=0;re<$.geometries.length;re++)se($.geometries[re],V);else if(de==="Feature")se($.geometry,V);else if(de==="Polygon")K($.coordinates,V);else if(de==="MultiPolygon")for(re=0;re<$.coordinates.length;re++)K($.coordinates[re],V);return $};function K(se,$){if(se.length!==0){Se(se[0],$);for(var V=1;V<se.length;V++)Se(se[V],!$)}}function Se(se,$){for(var V=0,re=0,de=0,Te=se.length,$e=Te-1;de<Te;$e=de++){var Ne=(se[de][0]-se[$e][0])*(se[$e][1]+se[de][1]),Ce=V+Ne;re+=Math.abs(V)>=Math.abs(Ne)?V-Ce+Ne:Ne-Ce+V,V=Ce}V+re>=0!=!!$&&se.reverse()}const pe=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class J{constructor($){this._feature=$,this.extent=s.EXTENT,this.type=$.type,this.properties=$.tags,"id"in $&&!isNaN($.id)&&(this.id=parseInt($.id,10))}loadGeometry(){if(this._feature.type===1){const $=[];for(const V of this._feature.geometry)$.push([new s.pointGeometry(V[0],V[1])]);return $}{const $=[];for(const V of this._feature.geometry){const re=[];for(const de of V)re.push(new s.pointGeometry(de[0],de[1]));$.push(re)}return $}}toGeoJSON($,V,re){return pe.call(this,$,V,re)}}class H{constructor($){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=$.length,this._features=$}feature($){return new J(this._features[$])}}var te=s.vectorTile.VectorTileFeature,ge=ke;function ke(se,$){this.options=$||{},this.features=se,this.length=se.length}function Ae(se,$){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=$||4096}ke.prototype.feature=function(se){return new Ae(this.features[se],this.options.extent)},Ae.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var $=0;$<se.length;$++){for(var V=se[$],re=[],de=0;de<V.length;de++)re.push(new s.pointGeometry(V[de][0],V[de][1]));this.geometry.push(re)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,$=1/0,V=-1/0,re=1/0,de=-1/0,Te=0;Te<se.length;Te++)for(var $e=se[Te],Ne=0;Ne<$e.length;Ne++){var Ce=$e[Ne];$=Math.min($,Ce.x),V=Math.max(V,Ce.x),re=Math.min(re,Ce.y),de=Math.max(de,Ce.y)}return[$,re,V,de]},Ae.prototype.toGeoJSON=te.prototype.toGeoJSON;var Pe=wt,Qe=ge;function wt(se){var $=new s.pbf;return function(V,re){for(var de in V.layers)re.writeMessage(3,nt,V.layers[de])}(se,$),$.finish()}function nt(se,$){var V;$.writeVarintField(15,se.version||1),$.writeStringField(1,se.name||""),$.writeVarintField(5,se.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<se.length;V++)re.feature=se.feature(V),$.writeMessage(2,Ee,re);var de=re.keys;for(V=0;V<de.length;V++)$.writeStringField(3,de[V]);var Te=re.values;for(V=0;V<Te.length;V++)$.writeMessage(4,He,Te[V])}function Ee(se,$){var V=se.feature;V.id!==void 0&&$.writeVarintField(1,V.id),$.writeMessage(2,Xe,se),$.writeVarintField(3,V.type),$.writeMessage(4,ve,V)}function Xe(se,$){var V=se.feature,re=se.keys,de=se.values,Te=se.keycache,$e=se.valuecache;for(var Ne in V.properties){var Ce=V.properties[Ne],je=Te[Ne];if(Ce!==null){je===void 0&&(re.push(Ne),Te[Ne]=je=re.length-1),$.writeVarint(je);var _t=typeof Ce;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(Ce=JSON.stringify(Ce));var Pt=_t+":"+Ce,gt=$e[Pt];gt===void 0&&(de.push(Ce),$e[Pt]=gt=de.length-1),$.writeVarint(gt)}}}function ot(se,$){return($<<3)+(7&se)}function Be(se){return se<<1^se>>31}function ve(se,$){for(var V=se.loadGeometry(),re=se.type,de=0,Te=0,$e=V.length,Ne=0;Ne<$e;Ne++){var Ce=V[Ne],je=1;re===1&&(je=Ce.length),$.writeVarint(ot(1,je));for(var _t=re===3?Ce.length-1:Ce.length,Pt=0;Pt<_t;Pt++){Pt===1&&re!==1&&$.writeVarint(ot(2,_t-1));var gt=Ce[Pt].x-de,un=Ce[Pt].y-Te;$.writeVarint(Be(gt)),$.writeVarint(Be(un)),de+=gt,Te+=un}re===3&&$.writeVarint(ot(7,1))}}function He(se,$){var V=typeof se;V==="string"?$.writeStringField(1,se):V==="boolean"?$.writeBooleanField(7,se):V==="number"&&(se%1!=0?$.writeDoubleField(3,se):se<0?$.writeSVarintField(6,se):$.writeVarintField(5,se))}function ct(se,$,V,re,de,Te){if(de-re<=V)return;const $e=re+de>>1;Ye(se,$,$e,re,de,Te%2),ct(se,$,V,re,$e-1,Te+1),ct(se,$,V,$e+1,de,Te+1)}function Ye(se,$,V,re,de,Te){for(;de>re;){if(de-re>600){const je=de-re+1,_t=V-re+1,Pt=Math.log(je),gt=.5*Math.exp(2*Pt/3),un=.5*Math.sqrt(Pt*gt*(je-gt)/je)*(_t-je/2<0?-1:1);Ye(se,$,V,Math.max(re,Math.floor(V-_t*gt/je+un)),Math.min(de,Math.floor(V+(je-_t)*gt/je+un)),Te)}const $e=$[2*V+Te];let Ne=re,Ce=de;for(ht(se,$,re,V),$[2*de+Te]>$e&&ht(se,$,re,de);Ne<Ce;){for(ht(se,$,Ne,Ce),Ne++,Ce--;$[2*Ne+Te]<$e;)Ne++;for(;$[2*Ce+Te]>$e;)Ce--}$[2*re+Te]===$e?ht(se,$,re,Ce):(Ce++,ht(se,$,Ce,de)),Ce<=V&&(re=Ce+1),V<=Ce&&(de=Ce-1)}}function ht(se,$,V,re){lt(se,V,re),lt($,2*V,2*re),lt($,2*V+1,2*re+1)}function lt(se,$,V){const re=se[$];se[$]=se[V],se[V]=re}function Ut(se,$,V,re){const de=se-V,Te=$-re;return de*de+Te*Te}Pe.fromVectorTileJs=wt,Pe.fromGeojsonVt=function(se,$){$=$||{};var V={};for(var re in se)V[re]=new ge(se[re].features,$),V[re].name=re,V[re].version=$.version,V[re].extent=$.extent;return wt({layers:V})},Pe.GeoJSONWrapper=Qe;const qe=se=>se[0],hn=se=>se[1];class Gt{constructor($,V=qe,re=hn,de=64,Te=Float64Array){this.nodeSize=de,this.points=$;const $e=$.length<65536?Uint16Array:Uint32Array,Ne=this.ids=new $e($.length),Ce=this.coords=new Te(2*$.length);for(let je=0;je<$.length;je++)Ne[je]=je,Ce[2*je]=V($[je]),Ce[2*je+1]=re($[je]);ct(Ne,Ce,de,0,Ne.length-1,0)}range($,V,re,de){return function(Te,$e,Ne,Ce,je,_t,Pt){const gt=[0,Te.length-1,0],un=[];let Xt,an;for(;gt.length;){const gn=gt.pop(),Ue=gt.pop(),jn=gt.pop();if(Ue-jn<=Pt){for(let zn=jn;zn<=Ue;zn++)Xt=$e[2*zn],an=$e[2*zn+1],Xt>=Ne&&Xt<=je&&an>=Ce&&an<=_t&&un.push(Te[zn]);continue}const Kt=Math.floor((jn+Ue)/2);Xt=$e[2*Kt],an=$e[2*Kt+1],Xt>=Ne&&Xt<=je&&an>=Ce&&an<=_t&&un.push(Te[Kt]);const Yn=(gn+1)%2;(gn===0?Ne<=Xt:Ce<=an)&&(gt.push(jn),gt.push(Kt-1),gt.push(Yn)),(gn===0?je>=Xt:_t>=an)&&(gt.push(Kt+1),gt.push(Ue),gt.push(Yn))}return un}(this.ids,this.coords,$,V,re,de,this.nodeSize)}within($,V,re){return function(de,Te,$e,Ne,Ce,je){const _t=[0,de.length-1,0],Pt=[],gt=Ce*Ce;for(;_t.length;){const un=_t.pop(),Xt=_t.pop(),an=_t.pop();if(Xt-an<=je){for(let Yn=an;Yn<=Xt;Yn++)Ut(Te[2*Yn],Te[2*Yn+1],$e,Ne)<=gt&&Pt.push(de[Yn]);continue}const gn=Math.floor((an+Xt)/2),Ue=Te[2*gn],jn=Te[2*gn+1];Ut(Ue,jn,$e,Ne)<=gt&&Pt.push(de[gn]);const Kt=(un+1)%2;(un===0?$e-Ce<=Ue:Ne-Ce<=jn)&&(_t.push(an),_t.push(gn-1),_t.push(Kt)),(un===0?$e+Ce>=Ue:Ne+Ce>=jn)&&(_t.push(gn+1),_t.push(Xt),_t.push(Kt))}return Pt}(this.ids,this.coords,$,V,re,this.nodeSize)}}const dn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},Fe=Math.fround||(bt=new Float32Array(1),se=>(bt[0]=+se,bt[0]));var bt;class kt{constructor($){this.options=_e(Object.create(dn),$),this.trees=new Array(this.options.maxZoom+1)}load($){const{log:V,minZoom:re,maxZoom:de,nodeSize:Te}=this.options;V&&console.time("total time");const $e=`prepare ${$.length} points`;V&&console.time($e),this.points=$;let Ne=[];for(let Ce=0;Ce<$.length;Ce++)$[Ce].geometry&&Ne.push(sn($[Ce],Ce));this.trees[de+1]=new Gt(Ne,We,Ze,Te,Float32Array),V&&console.timeEnd($e);for(let Ce=de;Ce>=re;Ce--){const je=+Date.now();Ne=this._cluster(Ne,Ce),this.trees[Ce]=new Gt(Ne,We,Ze,Te,Float32Array),V&&console.log("z%d: %d clusters in %dms",Ce,Ne.length,+Date.now()-je)}return V&&console.timeEnd("total time"),this}getClusters($,V){let re=(($[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,$[1]));let Te=$[2]===180?180:(($[2]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)re=-180,Te=180;else if(re>Te){const _t=this.getClusters([re,de,180,$e],V),Pt=this.getClusters([-180,de,Te,$e],V);return _t.concat(Pt)}const Ne=this.trees[this._limitZoom(V)],Ce=Ne.range(oe(re),rt($e),oe(Te),rt(de)),je=[];for(const _t of Ce){const Pt=Ne.points[_t];je.push(Pt.numPoints?En(Pt):this.points[Pt.index])}return je}getChildren($){const V=this._getOriginId($),re=this._getOriginZoom($),de="No cluster with the specified id.",Te=this.trees[re];if(!Te)throw new Error(de);const $e=Te.points[V];if(!$e)throw new Error(de);const Ne=this.options.radius/(this.options.extent*Math.pow(2,re-1)),Ce=Te.within($e.x,$e.y,Ne),je=[];for(const _t of Ce){const Pt=Te.points[_t];Pt.parentId===$&&je.push(Pt.numPoints?En(Pt):this.points[Pt.index])}if(je.length===0)throw new Error(de);return je}getLeaves($,V,re){const de=[];return this._appendLeaves(de,$,V=V||10,re=re||0,0),de}getTile($,V,re){const de=this.trees[this._limitZoom($)],Te=Math.pow(2,$),{extent:$e,radius:Ne}=this.options,Ce=Ne/$e,je=(re-Ce)/Te,_t=(re+1+Ce)/Te,Pt={features:[]};return this._addTileFeatures(de.range((V-Ce)/Te,je,(V+1+Ce)/Te,_t),de.points,V,re,Te,Pt),V===0&&this._addTileFeatures(de.range(1-Ce/Te,je,1,_t),de.points,Te,re,Te,Pt),V===Te-1&&this._addTileFeatures(de.range(0,je,Ce/Te,_t),de.points,-1,re,Te,Pt),Pt.features.length?Pt:null}getClusterExpansionZoom($){let V=this._getOriginZoom($)-1;for(;V<=this.options.maxZoom;){const re=this.getChildren($);if(V++,re.length!==1)break;$=re[0].properties.cluster_id}return V}_appendLeaves($,V,re,de,Te){const $e=this.getChildren(V);for(const Ne of $e){const Ce=Ne.properties;if(Ce&&Ce.cluster?Te+Ce.point_count<=de?Te+=Ce.point_count:Te=this._appendLeaves($,Ce.cluster_id,re,de,Te):Te<de?Te++:$.push(Ne),$.length===re)break}return Te}_addTileFeatures($,V,re,de,Te,$e){for(const Ne of $){const Ce=V[Ne],je=Ce.numPoints;let _t,Pt,gt;if(je)_t=me(Ce),Pt=Ce.x,gt=Ce.y;else{const an=this.points[Ce.index];_t=an.properties,Pt=oe(an.geometry.coordinates[0]),gt=rt(an.geometry.coordinates[1])}const un={type:1,geometry:[[Math.round(this.options.extent*(Pt*Te-re)),Math.round(this.options.extent*(gt*Te-de))]],tags:_t};let Xt;je?Xt=Ce.id:this.options.generateId?Xt=Ce.index:this.points[Ce.index].id&&(Xt=this.points[Ce.index].id),Xt!==void 0&&(un.id=Xt),$e.features.push(un)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(+$,this.options.maxZoom+1))}_cluster($,V){const re=[],{radius:de,extent:Te,reduce:$e,minPoints:Ne}=this.options,Ce=de/(Te*Math.pow(2,V));for(let je=0;je<$.length;je++){const _t=$[je];if(_t.zoom<=V)continue;_t.zoom=V;const Pt=this.trees[V+1],gt=Pt.within(_t.x,_t.y,Ce),un=_t.numPoints||1;let Xt=un;for(const an of gt){const gn=Pt.points[an];gn.zoom>V&&(Xt+=gn.numPoints||1)}if(Xt>un&&Xt>=Ne){let an=_t.x*un,gn=_t.y*un,Ue=$e&&un>1?this._map(_t,!0):null;const jn=(je<<5)+(V+1)+this.points.length;for(const Kt of gt){const Yn=Pt.points[Kt];if(Yn.zoom<=V)continue;Yn.zoom=V;const zn=Yn.numPoints||1;an+=Yn.x*zn,gn+=Yn.y*zn,Yn.parentId=jn,$e&&(Ue||(Ue=this._map(_t,!0)),$e(Ue,this._map(Yn)))}_t.parentId=jn,re.push(Et(an/Xt,gn/Xt,jn,Xt,Ue))}else if(re.push(_t),Xt>1)for(const an of gt){const gn=Pt.points[an];gn.zoom<=V||(gn.zoom=V,re.push(gn))}}return re}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,V){if($.numPoints)return V?_e({},$.properties):$.properties;const re=this.points[$.index].properties,de=this.options.map(re);return V&&de===re?_e({},de):de}}function Et(se,$,V,re,de){return{x:Fe(se),y:Fe($),zoom:1/0,id:V,parentId:-1,numPoints:re,properties:de}}function sn(se,$){const[V,re]=se.geometry.coordinates;return{x:Fe(oe(V)),y:Fe(rt(re)),zoom:1/0,index:$,parentId:-1}}function En(se){return{type:"Feature",id:se.id,properties:me(se),geometry:{type:"Point",coordinates:[($=se.x,360*($-.5)),ee(se.y)]}};var $}function me(se){const $=se.numPoints,V=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$;return _e(_e({},se.properties),{cluster:!0,cluster_id:se.id,point_count:$,point_count_abbreviated:V})}function oe(se){return se/360+.5}function rt(se){const $=Math.sin(se*Math.PI/180),V=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return V<0?0:V>1?1:V}function ee(se){const $=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function _e(se,$){for(const V in $)se[V]=$[V];return se}function We(se){return se.x}function Ze(se){return se.y}function pt(se,$,V,re){for(var de,Te=re,$e=V-$>>1,Ne=V-$,Ce=se[$],je=se[$+1],_t=se[V],Pt=se[V+1],gt=$+3;gt<V;gt+=3){var un=St(se[gt],se[gt+1],Ce,je,_t,Pt);if(un>Te)de=gt,Te=un;else if(un===Te){var Xt=Math.abs(gt-$e);Xt<Ne&&(de=gt,Ne=Xt)}}Te>re&&(de-$>3&&pt(se,$,de,re),se[de+2]=Te,V-de>3&&pt(se,de,V,re))}function St(se,$,V,re,de,Te){var $e=de-V,Ne=Te-re;if($e!==0||Ne!==0){var Ce=((se-V)*$e+($-re)*Ne)/($e*$e+Ne*Ne);Ce>1?(V=de,re=Te):Ce>0&&(V+=$e*Ce,re+=Ne*Ce)}return($e=se-V)*$e+(Ne=$-re)*Ne}function jt(se,$,V,re){var de={id:se===void 0?null:se,type:$,geometry:V,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Te){var $e=Te.geometry,Ne=Te.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Ct(Te,$e);else if(Ne==="Polygon"||Ne==="MultiLineString")for(var Ce=0;Ce<$e.length;Ce++)Ct(Te,$e[Ce]);else if(Ne==="MultiPolygon")for(Ce=0;Ce<$e.length;Ce++)for(var je=0;je<$e[Ce].length;je++)Ct(Te,$e[Ce][je])}(de),de}function Ct(se,$){for(var V=0;V<$.length;V+=3)se.minX=Math.min(se.minX,$[V]),se.minY=Math.min(se.minY,$[V+1]),se.maxX=Math.max(se.maxX,$[V]),se.maxY=Math.max(se.maxY,$[V+1])}function yt(se,$,V,re){if($.geometry){var de=$.geometry.coordinates,Te=$.geometry.type,$e=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),Ne=[],Ce=$.id;if(V.promoteId?Ce=$.properties[V.promoteId]:V.generateId&&(Ce=re||0),Te==="Point")Ie(de,Ne);else if(Te==="MultiPoint")for(var je=0;je<de.length;je++)Ie(de[je],Ne);else if(Te==="LineString")Ke(de,Ne,$e,!1);else if(Te==="MultiLineString"){if(V.lineMetrics){for(je=0;je<de.length;je++)Ke(de[je],Ne=[],$e,!1),se.push(jt(Ce,"LineString",Ne,$.properties));return}Vt(de,Ne,$e,!1)}else if(Te==="Polygon")Vt(de,Ne,$e,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(je=0;je<$.geometry.geometries.length;je++)yt(se,{id:Ce,geometry:$.geometry.geometries[je],properties:$.properties},V,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<de.length;je++){var _t=[];Vt(de[je],_t,$e,!0),Ne.push(_t)}}se.push(jt(Ce,Te,Ne,$.properties))}}function Ie(se,$){$.push(qt(se[0])),$.push(bn(se[1])),$.push(0)}function Ke(se,$,V,re){for(var de,Te,$e=0,Ne=0;Ne<se.length;Ne++){var Ce=qt(se[Ne][0]),je=bn(se[Ne][1]);$.push(Ce),$.push(je),$.push(0),Ne>0&&($e+=re?(de*je-Ce*Te)/2:Math.sqrt(Math.pow(Ce-de,2)+Math.pow(je-Te,2))),de=Ce,Te=je}var _t=$.length-3;$[2]=1,pt($,0,_t,V),$[_t+2]=1,$.size=Math.abs($e),$.start=0,$.end=$.size}function Vt(se,$,V,re){for(var de=0;de<se.length;de++){var Te=[];Ke(se[de],Te,V,re),$.push(Te)}}function qt(se){return se/360+.5}function bn(se){var $=Math.sin(se*Math.PI/180),V=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return V<0?0:V>1?1:V}function Tn(se,$,V,re,de,Te,$e,Ne){if(re/=$,Te>=(V/=$)&&$e<re)return se;if($e<V||Te>=re)return null;for(var Ce=[],je=0;je<se.length;je++){var _t=se[je],Pt=_t.geometry,gt=_t.type,un=de===0?_t.minX:_t.minY,Xt=de===0?_t.maxX:_t.maxY;if(un>=V&&Xt<re)Ce.push(_t);else if(!(Xt<V||un>=re)){var an=[];if(gt==="Point"||gt==="MultiPoint")An(Pt,an,V,re,de);else if(gt==="LineString")Sn(Pt,an,V,re,de,!1,Ne.lineMetrics);else if(gt==="MultiLineString")Ci(Pt,an,V,re,de,!1);else if(gt==="Polygon")Ci(Pt,an,V,re,de,!0);else if(gt==="MultiPolygon")for(var gn=0;gn<Pt.length;gn++){var Ue=[];Ci(Pt[gn],Ue,V,re,de,!0),Ue.length&&an.push(Ue)}if(an.length){if(Ne.lineMetrics&&gt==="LineString"){for(gn=0;gn<an.length;gn++)Ce.push(jt(_t.id,gt,an[gn],_t.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(an.length===1?(gt="LineString",an=an[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=an.length===3?"Point":"MultiPoint"),Ce.push(jt(_t.id,gt,an,_t.tags))}}}return Ce.length?Ce:null}function An(se,$,V,re,de){for(var Te=0;Te<se.length;Te+=3){var $e=se[Te+de];$e>=V&&$e<=re&&($.push(se[Te]),$.push(se[Te+1]),$.push(se[Te+2]))}}function Sn(se,$,V,re,de,Te,$e){for(var Ne,Ce,je=oi(se),_t=de===0?vr:Ti,Pt=se.start,gt=0;gt<se.length-3;gt+=3){var un=se[gt],Xt=se[gt+1],an=se[gt+2],gn=se[gt+3],Ue=se[gt+4],jn=de===0?un:Xt,Kt=de===0?gn:Ue,Yn=!1;$e&&(Ne=Math.sqrt(Math.pow(un-gn,2)+Math.pow(Xt-Ue,2))),jn<V?Kt>V&&(Ce=_t(je,un,Xt,gn,Ue,V),$e&&(je.start=Pt+Ne*Ce)):jn>re?Kt<re&&(Ce=_t(je,un,Xt,gn,Ue,re),$e&&(je.start=Pt+Ne*Ce)):lr(je,un,Xt,an),Kt<V&&jn>=V&&(Ce=_t(je,un,Xt,gn,Ue,V),Yn=!0),Kt>re&&jn<=re&&(Ce=_t(je,un,Xt,gn,Ue,re),Yn=!0),!Te&&Yn&&($e&&(je.end=Pt+Ne*Ce),$.push(je),je=oi(se)),$e&&(Pt+=Ne)}var zn=se.length-3;un=se[zn],Xt=se[zn+1],an=se[zn+2],(jn=de===0?un:Xt)>=V&&jn<=re&&lr(je,un,Xt,an),zn=je.length-3,Te&&zn>=3&&(je[zn]!==je[0]||je[zn+1]!==je[1])&&lr(je,je[0],je[1],je[2]),je.length&&$.push(je)}function oi(se){var $=[];return $.size=se.size,$.start=se.start,$.end=se.end,$}function Ci(se,$,V,re,de,Te){for(var $e=0;$e<se.length;$e++)Sn(se[$e],$,V,re,de,Te,!1)}function lr(se,$,V,re){se.push($),se.push(V),se.push(re)}function vr(se,$,V,re,de,Te){var $e=(Te-$)/(re-$);return se.push(Te),se.push(V+(de-V)*$e),se.push(1),$e}function Ti(se,$,V,re,de,Te){var $e=(Te-V)/(de-V);return se.push($+(re-$)*$e),se.push(Te),se.push(1),$e}function $i(se,$){for(var V=[],re=0;re<se.length;re++){var de,Te=se[re],$e=Te.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")de=ti(Te.geometry,$);else if($e==="MultiLineString"||$e==="Polygon"){de=[];for(var Ne=0;Ne<Te.geometry.length;Ne++)de.push(ti(Te.geometry[Ne],$))}else if($e==="MultiPolygon")for(de=[],Ne=0;Ne<Te.geometry.length;Ne++){for(var Ce=[],je=0;je<Te.geometry[Ne].length;je++)Ce.push(ti(Te.geometry[Ne][je],$));de.push(Ce)}V.push(jt(Te.id,$e,de,Te.tags))}return V}function ti(se,$){var V=[];V.size=se.size,se.start!==void 0&&(V.start=se.start,V.end=se.end);for(var re=0;re<se.length;re+=3)V.push(se[re]+$,se[re+1],se[re+2]);return V}function gi(se,$){if(se.transformed)return se;var V,re,de,Te=1<<se.z,$e=se.x,Ne=se.y;for(V=0;V<se.features.length;V++){var Ce=se.features[V],je=Ce.geometry,_t=Ce.type;if(Ce.geometry=[],_t===1)for(re=0;re<je.length;re+=2)Ce.geometry.push(Cr(je[re],je[re+1],$,Te,$e,Ne));else for(re=0;re<je.length;re++){var Pt=[];for(de=0;de<je[re].length;de+=2)Pt.push(Cr(je[re][de],je[re][de+1],$,Te,$e,Ne));Ce.geometry.push(Pt)}}return se.transformed=!0,se}function Cr(se,$,V,re,de,Te){return[Math.round(V*(se*re-de)),Math.round(V*($*re-Te))]}function _r(se,$,V,re,de){for(var Te=$===de.maxZoom?0:de.tolerance/((1<<$)*de.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:re,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ne=0;Ne<se.length;Ne++){$e.numFeatures++,Wi($e,se[Ne],Te,de);var Ce=se[Ne].minX,je=se[Ne].minY,_t=se[Ne].maxX,Pt=se[Ne].maxY;Ce<$e.minX&&($e.minX=Ce),je<$e.minY&&($e.minY=je),_t>$e.maxX&&($e.maxX=_t),Pt>$e.maxY&&($e.maxY=Pt)}return $e}function Wi(se,$,V,re){var de=$.geometry,Te=$.type,$e=[];if(Te==="Point"||Te==="MultiPoint")for(var Ne=0;Ne<de.length;Ne+=3)$e.push(de[Ne]),$e.push(de[Ne+1]),se.numPoints++,se.numSimplified++;else if(Te==="LineString")tr($e,de,se,V,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(Ne=0;Ne<de.length;Ne++)tr($e,de[Ne],se,V,Te==="Polygon",Ne===0);else if(Te==="MultiPolygon")for(var Ce=0;Ce<de.length;Ce++){var je=de[Ce];for(Ne=0;Ne<je.length;Ne++)tr($e,je[Ne],se,V,!0,Ne===0)}if($e.length){var _t=$.tags||null;if(Te==="LineString"&&re.lineMetrics){for(var Pt in _t={},$.tags)_t[Pt]=$.tags[Pt];_t.mapbox_clip_start=de.start/de.size,_t.mapbox_clip_end=de.end/de.size}var gt={geometry:$e,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:_t};$.id!==null&&(gt.id=$.id),se.features.push(gt)}}function tr(se,$,V,re,de,Te){var $e=re*re;if(re>0&&$.size<(de?$e:re))V.numPoints+=$.length/3;else{for(var Ne=[],Ce=0;Ce<$.length;Ce+=3)(re===0||$[Ce+2]>$e)&&(V.numSimplified++,Ne.push($[Ce]),Ne.push($[Ce+1])),V.numPoints++;de&&function(je,_t){for(var Pt=0,gt=0,un=je.length,Xt=un-2;gt<un;Xt=gt,gt+=2)Pt+=(je[gt]-je[Xt])*(je[gt+1]+je[Xt+1]);if(Pt>0===_t)for(gt=0,un=je.length;gt<un/2;gt+=2){var an=je[gt],gn=je[gt+1];je[gt]=je[un-2-gt],je[gt+1]=je[un-1-gt],je[un-2-gt]=an,je[un-1-gt]=gn}}(Ne,Te),se.push(Ne)}}function Hr(se,$){var V=($=this.options=function(de,Te){for(var $e in Te)de[$e]=Te[$e];return de}(Object.create(this.options),$)).debug;if(V&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(de,Te){var $e=[];if(de.type==="FeatureCollection")for(var Ne=0;Ne<de.features.length;Ne++)yt($e,de.features[Ne],Te,Ne);else yt($e,de.type==="Feature"?de:{geometry:de},Te);return $e}(se,$);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(re=function(de,Te){var $e=Te.buffer/Te.extent,Ne=de,Ce=Tn(de,1,-1-$e,$e,0,-1,2,Te),je=Tn(de,1,1-$e,2+$e,0,-1,2,Te);return(Ce||je)&&(Ne=Tn(de,1,-$e,1+$e,0,-1,2,Te)||[],Ce&&(Ne=$i(Ce,1).concat(Ne)),je&&(Ne=Ne.concat($i(je,-1)))),Ne}(re,$)).length&&this.splitTile(re,0,0,0),V&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Dr(se,$,V){return 32*((1<<se)*V+$)+se}function Ki(se,$){const V=se.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const re=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!re)return $(null,null);const de=new H(re.features);let Te=Pe(de);Te.byteOffset===0&&Te.byteLength===Te.buffer.byteLength||(Te=new Uint8Array(Te)),$(null,{vectorTile:de,rawData:Te.buffer})}Hr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Hr.prototype.splitTile=function(se,$,V,re,de,Te,$e){for(var Ne=[se,$,V,re],Ce=this.options,je=Ce.debug;Ne.length;){re=Ne.pop(),V=Ne.pop(),$=Ne.pop(),se=Ne.pop();var _t=1<<$,Pt=Dr($,V,re),gt=this.tiles[Pt];if(!gt&&(je>1&&console.time("creation"),gt=this.tiles[Pt]=_r(se,$,V,re,Ce),this.tileCoords.push({z:$,x:V,y:re}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,V,re,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var un="z"+$;this.stats[un]=(this.stats[un]||0)+1,this.total++}if(gt.source=se,de){if($===Ce.maxZoom||$===de)continue;var Xt=1<<de-$;if(V!==Math.floor(Te/Xt)||re!==Math.floor($e/Xt))continue}else if($===Ce.indexMaxZoom||gt.numPoints<=Ce.indexMaxPoints)continue;if(gt.source=null,se.length!==0){je>1&&console.time("clipping");var an,gn,Ue,jn,Kt,Yn,zn=.5*Ce.buffer/Ce.extent,ko=.5-zn,nr=.5+zn,zt=1+zn;an=gn=Ue=jn=null,Kt=Tn(se,_t,V-zn,V+nr,0,gt.minX,gt.maxX,Ce),Yn=Tn(se,_t,V+ko,V+zt,0,gt.minX,gt.maxX,Ce),se=null,Kt&&(an=Tn(Kt,_t,re-zn,re+nr,1,gt.minY,gt.maxY,Ce),gn=Tn(Kt,_t,re+ko,re+zt,1,gt.minY,gt.maxY,Ce),Kt=null),Yn&&(Ue=Tn(Yn,_t,re-zn,re+nr,1,gt.minY,gt.maxY,Ce),jn=Tn(Yn,_t,re+ko,re+zt,1,gt.minY,gt.maxY,Ce),Yn=null),je>1&&console.timeEnd("clipping"),Ne.push(an||[],$+1,2*V,2*re),Ne.push(gn||[],$+1,2*V,2*re+1),Ne.push(Ue||[],$+1,2*V+1,2*re),Ne.push(jn||[],$+1,2*V+1,2*re+1)}}},Hr.prototype.getTile=function(se,$,V){var re=this.options,de=re.extent,Te=re.debug;if(se<0||se>24)return null;var $e=1<<se,Ne=Dr(se,$=($%$e+$e)%$e,V);if(this.tiles[Ne])return gi(this.tiles[Ne],de);Te>1&&console.log("drilling down to z%d-%d-%d",se,$,V);for(var Ce,je=se,_t=$,Pt=V;!Ce&&je>0;)je--,_t=Math.floor(_t/2),Pt=Math.floor(Pt/2),Ce=this.tiles[Dr(je,_t,Pt)];return Ce&&Ce.source?(Te>1&&console.log("found parent tile z%d-%d-%d",je,_t,Pt),Te>1&&console.time("drilling down"),this.splitTile(Ce.source,je,_t,Pt,se,$,V),Te>1&&console.timeEnd("drilling down"),this.tiles[Ne]?gi(this.tiles[Ne],de):null):null};class mo extends s.VectorTileWorkerSource{constructor($,V,re,de,Te){super($,V,re,de,Ki),Te&&(this.loadGeoJSON=Te)}loadData($,V){const re=$&&$.request,de=re&&re.collectResourceTiming;this.loadGeoJSON($,(Te,$e)=>{if(Te||!$e)return V(Te);if(typeof $e!="object")return V(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{F($e,!0);try{if($.filter){const Ce=s.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(_t=>`${_t.key}: ${_t.message}`).join(", "));const je=$e.features.filter(_t=>Ce.value.evaluate({zoom:0},_t));$e={type:"FeatureCollection",features:je}}this._geoJSONIndex=$.cluster?new kt(function({superclusterOptions:Ce,clusterProperties:je}){if(!je||!Ce)return Ce;const _t={},Pt={},gt={accumulated:null,zoom:0},un={properties:null},Xt=Object.keys(je);for(const an of Xt){const[gn,Ue]=je[an],jn=s.createExpression(Ue),Kt=s.createExpression(typeof gn=="string"?[gn,["accumulated"],["get",an]]:gn);_t[an]=jn.value,Pt[an]=Kt.value}return Ce.map=an=>{un.properties=an;const gn={};for(const Ue of Xt)gn[Ue]=_t[Ue].evaluate(gt,un);return gn},Ce.reduce=(an,gn)=>{un.properties=gn;for(const Ue of Xt)gt.accumulated=an[Ue],an[Ue]=Pt[Ue].evaluate(gt,un)},Ce}($)).load($e.features):function(Ce,je){return new Hr(Ce,je)}($e,$.geojsonVtOptions)}catch(Ce){return V(Ce)}this.loaded={};const Ne={};if(de){const Ce=s.getPerformanceMeasurement(re);Ce&&(Ne.resourceTiming={},Ne.resourceTiming[$.source]=JSON.parse(JSON.stringify(Ce)))}V(null,Ne)}})}reloadTile($,V){const re=this.loaded;return re&&re[$.uid]?super.reloadTile($,V):this.loadTile($,V)}loadGeoJSON($,V){if($.request)s.getJSON($.request,V);else{if(typeof $.data!="string")return V(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));try{return V(null,JSON.parse($.data))}catch{return V(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom($,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(re){V(re)}}getClusterChildren($,V){try{V(null,this._geoJSONIndex.getChildren($.clusterId))}catch(re){V(re)}}getClusterLeaves($,V){try{V(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(re){V(re)}}}class Wr{constructor($){this.self=$,this.actor=new s.Actor($,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:mo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(V,re)=>{if(this.workerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.workerSourceTypes[V]=re},this.self.registerRTLTextPlugin=V=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=V.applyArabicShaping,s.plugin.processBidirectionalText=V.processBidirectionalText,s.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}}clearCaches($,V,re){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$],re()}checkIfReady($,V,re){re()}setReferrer($,V){this.referrer=V}spriteLoaded($,V){this.isSpriteLoaded[$]=V;for(const re in this.workerSources[$]){const de=this.workerSources[$][re];for(const Te in de)de[Te]instanceof s.VectorTileWorkerSource&&(de[Te].isSpriteLoaded=V,de[Te].fire(new s.Event("isSpriteLoaded")))}}setImages($,V,re){this.availableImages[$]=V;for(const de in this.workerSources[$]){const Te=this.workerSources[$][de];for(const $e in Te)Te[$e].availableImages=V}re()}enableTerrain($,V,re){this.terrain=V,re()}setProjection($,V){this.projections[$]=s.getProjection(V)}setLayers($,V,re){this.getLayerIndex($).replace(V),re()}updateLayers($,V,re){this.getLayerIndex($).update(V.layers,V.removedIds),re()}loadTile($,V,re){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,V.type,V.source).loadTile(de,re)}loadDEMTile($,V,re){const de=this.enableTerrain?s.extend({buildQuadTree:this.terrain},V):V;this.getDEMWorkerSource($,V.source).loadTile(de,re)}reloadTile($,V,re){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,V.type,V.source).reloadTile(de,re)}abortTile($,V,re){this.getWorkerSource($,V.type,V.source).abortTile(V,re)}removeTile($,V,re){this.getWorkerSource($,V.type,V.source).removeTile(V,re)}removeSource($,V,re){if(!this.workerSources[$]||!this.workerSources[$][V.type]||!this.workerSources[$][V.type][V.source])return;const de=this.workerSources[$][V.type][V.source];delete this.workerSources[$][V.type][V.source],de.removeSource!==void 0?de.removeSource(V,re):re()}loadWorkerSource($,V,re){try{this.self.importScripts(V.url),re()}catch(de){re(de.toString())}}syncRTLPluginState($,V,re){try{s.plugin.setState(V);const de=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&de!=null){this.self.importScripts(de);const Te=s.plugin.isParsed();re(Te?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),Te)}}catch(de){re(de.toString())}}getAvailableImages($){let V=this.availableImages[$];return V||(V=[]),V}getLayerIndex($){let V=this.layerIndexes[$];return V||(V=this.layerIndexes[$]=new k),V}getWorkerSource($,V,re){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][V]||(this.workerSources[$][V]={}),this.workerSources[$][V][re]||(this.workerSources[$][V][re]=new this.workerSourceTypes[V]({send:(de,Te,$e,Ne,Ce,je)=>{this.actor.send(de,Te,$e,$,Ce,je)},scheduler:this.actor.scheduler},this.getLayerIndex($),this.getAvailableImages($),this.isSpriteLoaded[$])),this.workerSources[$][V][re]}getDEMWorkerSource($,V){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][V]||(this.demWorkerSources[$][V]=new D),this.demWorkerSources[$][V]}enforceCacheSizeLimit($,V){s.enforceCacheSizeLimit(V)}getWorkerPerformanceMetrics($,V,re){re(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Wr(self)),Wr}),g(["./shared"],function(s){var C=O;function O(f){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,v,x=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(x);try{v=new Worker(E),p=!0}catch{p=!1}return v&&v.terminate(),URL.revokeObjectURL(E),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var v=p.getContext("2d");if(!v)return!1;var x=v.getImageData(0,0,1,1);return x&&x.width===p.width}()?(k[c=i&&i.failIfMajorPerformanceCaveat]===void 0&&(k[c]=function(p){var v,x=function(E){var A=document.createElement("canvas"),L=Object.create(O.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=E,A.getContext("webgl",L)||A.getContext("experimental-webgl",L)}(p);if(!x)return!1;try{v=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!v||x.isContextLost())&&(x.shaderSource(v,"void main() {}"),x.compileShader(v),x.getShaderParameter(v,x.COMPILE_STATUS)===!0)}(c)),k[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(f)}var k={};function D(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let c=0;c<f.length;c++)if(!D(f[c],i[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&i!==null){if(typeof i!="object"||Object.keys(f).length!==Object.keys(i).length)return!1;for(const c in f)if(!D(f[c],i[c]))return!1;return!0}return f===i}function F(f,i,c){const p=s.window.document.createElement(f);return i!==void 0&&(p.className=i),c&&c.appendChild(p),p}function K(f,i,c){const p=s.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(i))p.setAttributeNS(null,v,i[v]);return c&&c.appendChild(p),p}O.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Se=s.window.document&&s.window.document.documentElement.style,pe=Se&&Se.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function H(){Se&&pe&&(J=Se[pe],Se[pe]="none")}function te(){Se&&pe&&(Se[pe]=J)}function ge(f){f.preventDefault(),f.stopPropagation(),s.window.removeEventListener("click",ge,!0)}function ke(){s.window.addEventListener("click",ge,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",ge,!0)},0)}function Ae(f,i){const c=f.getBoundingClientRect();return wt(f,c,i)}function Pe(f,i){const c=f.getBoundingClientRect(),p=[];for(let v=0;v<i.length;v++)p.push(wt(f,c,i[v]));return p}function Qe(f){return s.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function wt(f,i,c){const p=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new s.pointGeometry((c.clientX-i.left)*p,(c.clientY-i.top)*p)}function nt(f,i){var c=i[0],p=i[1],v=i[2],x=i[3],E=c*x-v*p;return E?(f[0]=x*(E=1/E),f[1]=-p*E,f[2]=-v*E,f[3]=c*E,f):null}function Ee(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Xe extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const v of i){if(v[0]<p||v[1]<v[0]||c<v[1])return!1;p=v[1]}return!0}_validateContent(i,c){return!(i&&(i.length!==4||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let p=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(p=!1);this.isLoaded()||p?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const p={};for(const v of i){this.images[v]||this.fire(new s.Event("styleimagemissing",{id:v}));const x=this.images[v];x?p[v]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:s.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new s.ImagePosition(v,p);this.patterns[i]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:p}=s.potpack(i),v=this.atlasImage;v.resize({width:c||1,height:p||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],A=E.x+1,L=E.y+1,z=this.images[x].data,N=z.width,U=z.height;s.RGBAImage.copy(z,v,{x:0,y:0},{x:A,y:L},{width:N,height:U}),s.RGBAImage.copy(z,v,{x:0,y:U-1},{x:A,y:L-1},{width:N,height:1}),s.RGBAImage.copy(z,v,{x:0,y:0},{x:A,y:L+U},{width:N,height:1}),s.RGBAImage.copy(z,v,{x:N-1,y:0},{x:A-1,y:L},{width:1,height:U}),s.RGBAImage.copy(z,v,{x:0,y:0},{x:A+N,y:L},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.images[c];Ee(p)&&this.updateImage(c,p)}}}const ot=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(f,i){return function([c,p,v]){const x=s.degToRad(p+90),E=s.degToRad(v);return{x:c*Math.cos(x)*Math.sin(E),y:c*Math.sin(x)*Math.sin(E),z:c*Math.cos(E),azimuthal:p,polar:v}}(f.expression.evaluate(i))}interpolate(f,i,c){return{x:s.number(f.x,i.x,c),y:s.number(f.y,i.y,c),z:s.number(f.z,i.z,c),azimuthal:s.number(f.azimuthal,i.azimuthal,c),polar:s.number(f.polar,i.polar,c)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Be="-transition";class ve extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(ot),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(s.validateLight,i,c))for(const p in i){const v=i[p];s.endsWith(p,Be)?this._transitionable.setTransition(p.slice(0,-Be.length),v):this._transitionable.setValue(p,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const He=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),ct="-transition";class Ye extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(He),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(i){for(const c in i){const p=i[c];s.endsWith(c,ct)?this._transitionable.setTransition(c.slice(0,-ct.length),p):this._transitionable.setValue(c,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function ht(f,i,c,p){const v=s.smoothstep(45,65,c),[x,E]=lt(f,p),A=s.length(i);let L=1-Math.min(1,Math.exp((A-x)/(E-x)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*v*f.alpha}function lt(f,i){const c=.5/Math.tan(.5*i);return[f.range[0]+c,f.range[1]+c]}const Ut=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"])}),qe="-transition";class hn extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(Ut),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,c={}){if(!this._validate(s.validateFog,i,c))for(const p in i){const v=i[p];s.endsWith(p,qe)?this._transitionable.setTransition(p.slice(0,-qe.length),v):this._transitionable.setValue(p,v)}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return s.smoothstep(45,65,i)*c.a}getOpacityAtLatLng(i,c){return this._transform.projection.supportsFog?function(p,v,x){const E=s.MercatorCoordinate.fromLngLat(v),A=x.elevation?x.elevation.getAtPointOrZero(E):0,L=[E.x,E.y,A];return s.transformMat4(L,L,x.mercatorFogMatrix),ht(p,L,x.pitch,x._fov)}(this.state,i,c):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?lt(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Gt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const p=this.workerPool.acquire(this.id);for(let v=0;v<p.length;v++){const x=new Gt.Actor(p[v],c,this.id);x.name=`Worker ${v}`,this.actors.push(x)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,c,p){s.asyncAll(this.actors,(v,x)=>{v.send(i,c,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function dn(f,i,c){return i*(s.EXTENT/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}Gt.Actor=s.Actor;class Fe{constructor(i,c,p,v){this.screenBounds=i,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(x=>v.pointCoordinate3D(x)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(i,c){let p,v;if(i instanceof s.pointGeometry||typeof i[0]=="number"){const x=s.pointGeometry.convert(i);p=[s.pointGeometry.convert(i)],v=c.isPointAboveHorizon(x)}else{const x=s.pointGeometry.convert(i[0]),E=s.pointGeometry.convert(i[1]);p=[x,E],v=s.polygonizeBounds(x,E).every(A=>c.isPointAboveHorizon(A))}return new Fe(p,c.getCameraPoint(),v,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const c=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],v=s.polygonizeBounds(c,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<p.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?v[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(v[3]=this.cameraPoint)),s.bufferConvexPolygon(v,i)}containsTile(i,c,p){const v=i.queryPadding+1,x=i.tileID.wrap,E=p?this._bufferedCameraMercator(v,c).map(Y=>s.getTilePoint(i.tileTransform,Y,x)):this._bufferedScreenMercator(v,c).map(Y=>s.getTilePoint(i.tileTransform,Y,x)),A=this.screenGeometryMercator.map(Y=>s.getTileVec3(i.tileTransform,Y,x)),L=A.map(Y=>new s.pointGeometry(Y[0],Y[1])),z=c.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),N=s.getTileVec3(i.tileTransform,z,x),U=A.map(Y=>{const W=s.sub(Y,Y,N);return s.normalize(W,W),new s.Ray(N,W)}),X=dn(i,1,c.zoom);if(s.polygonIntersectsBox(E,0,0,s.EXTENT,s.EXTENT))return{queryGeometry:this,tilespaceGeometry:L,tilespaceRays:U,bufferedTilespaceGeometry:E,bufferedTilespaceBounds:(ne=s.getBounds(E),ne.min.x=s.clamp(ne.min.x,0,s.EXTENT),ne.min.y=s.clamp(ne.min.y,0,s.EXTENT),ne.max.x=s.clamp(ne.max.x,0,s.EXTENT),ne.max.y=s.clamp(ne.max.y,0,s.EXTENT),ne),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:X};var ne}_bufferedScreenMercator(i,c){const p=bt(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{const v=this.bufferedScreenGeometry(i).map(x=>c.pointCoordinate3D(x));return this._screenRaycastCache[p]=v,v}}_bufferedCameraMercator(i,c){const p=bt(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{const v=this.bufferedCameraGeometry(i).map(x=>c.pointCoordinate3D(x));return this._cameraRaycastCache[p]=v,v}}}function bt(f){return 100*f|0}function kt(f,i,c){const p=function(v,x){if(v)return c(v);if(x){const E=s.pick(s.extend(x,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(E.vectorLayers=x.vector_layers,E.vectorLayerIds=E.vectorLayers.map(A=>A.id)),E.tiles=i.canonicalizeTileset(E,f.url),c(null,E)}};return f.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(f.url),s.ResourceType.Source),p):s.exported.frame(()=>p(null,f))}class Et{constructor(i,c,p){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*c),v=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*c),E=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=p&&i.x<x&&i.y>=v&&i.y<E}}class sn{constructor(i,c,p){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const En={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class me{constructor(i,c,p,v){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const v=c.attributes[this.attributes[p].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,p){for(let v=0;v<this.attributes.length;v++){const x=this.attributes[v],E=c.attributes[x.name];E!==void 0&&i.vertexAttribPointer(E,x.components,i[En[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class oe{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rt extends oe{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ee extends oe{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class _e extends oe{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class We extends oe{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ze extends oe{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class pt extends oe{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class St extends oe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class jt extends oe{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Ct extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class yt extends oe{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ie extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ke extends oe{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Vt extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class qt extends oe{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class bn extends oe{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Tn extends oe{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class An extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Sn extends oe{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class oi extends oe{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ci extends oe{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class lr extends oe{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class vr extends oe{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ti extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class $i extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ti extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class gi extends oe{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Cr extends oe{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _r extends oe{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Wi extends oe{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class tr extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Hr extends oe{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Dr extends oe{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Ki extends Dr{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class mo extends Dr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wr extends mo{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class se{constructor(i,c,p,v){this.context=i,this.width=c,this.height=p;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Ki(i,x),v&&(this.depthAttachment=new mo(i,x))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class ${constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rt(this),this.clearDepth=new ee(this),this.clearStencil=new _e(this),this.colorMask=new We(this),this.depthMask=new Ze(this),this.stencilMask=new pt(this),this.stencilFunc=new St(this),this.stencilOp=new jt(this),this.stencilTest=new Ct(this),this.depthRange=new yt(this),this.depthTest=new Ie(this),this.depthFunc=new Ke(this),this.blend=new Vt(this),this.blendFunc=new qt(this),this.blendColor=new bn(this),this.blendEquation=new Tn(this),this.cullFace=new An(this),this.cullFaceSide=new Sn(this),this.frontFace=new oi(this),this.program=new Ci(this),this.activeTexture=new lr(this),this.viewport=new vr(this),this.bindFramebuffer=new Ti(this),this.bindRenderbuffer=new $i(this),this.bindTexture=new ti(this),this.bindVertexBuffer=new gi(this),this.bindElementBuffer=new Cr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _r(this),this.pixelStoreUnpack=new Wi(this),this.pixelStoreUnpackPremultiplyAlpha=new tr(this),this.pixelStoreUnpackFlipY=new Hr(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new sn(this,i,c)}createVertexBuffer(i,c,p){return new me(this,i,c,p)}createRenderbuffer(i,c,p){const v=this.gl,x=v.createRenderbuffer();return this.bindRenderbuffer.set(x),v.renderbufferStorage(v.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,p){return new se(this,i,c,p)}clear({color:i,depth:c,stencil:p}){const v=this.gl;let x=0;i&&(x|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(x|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){D(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class V extends s.Evented{constructor(i,c,p,v){super(),this.id=i,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},c),s.extend(this,s.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(s.extend(this,c),c.bounds&&(this.tileBounds=new Et(c.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(c.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const p=s.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(v,s.ResourceType.Tile),(x,E,A,L)=>(delete i.request,i.aborted?(i.state="unloaded",c(null)):x?(i.state="errored",c(x)):E?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:A,expires:L}),i.setTexture(E,this.map.painter),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void c(null)):c(null)))}static loadTileData(i,c,p){i.setTexture(c,p)}static unloadTileData(i,c){i.texture&&c.saveTileTexture(i.texture)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let re;function de(f,i,c,p,v,x,E,A){const L=[f,c,v,i,p,x,1,1,1],z=[E,A,1],N=s.adjoint([],L),[U,X,ne]=s.transformMat3(z,z,s.transpose(N,N));return s.multiply(L,[U,0,0,0,X,0,0,0,ne],L)}class Te extends s.Evented{constructor(i,c,p,v){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(c,p)=>{if(this._loaded=!0,c)this.fire(new s.ErrorEvent(c));else if(p){const{HTMLImageElement:v}=s.window;this.image=p instanceof v?s.exported.getImageData(p):p,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const c=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(p){let v=1/0,x=1/0,E=-1/0,A=-1/0;for(const U of p)v=Math.min(v,U.x),x=Math.min(x,U.y),E=Math.max(E,U.x),A=Math.max(A,U.y);const L=Math.max(E-v,A-x),z=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),N=Math.pow(2,z);return new s.CanonicalTileID(z,Math.floor((v+E)/2*N),Math.floor((x+A)/2*N))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const L in this.tiles){const z=this.tiles[L];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}if(this._boundsArray)return;const c=s.tileTransform(this.tileID,this.map.transform.projection),[p,v,x,E]=this.coordinates.map(L=>{const z=c.projection.project(L[0],L[1]);return s.getTilePoint(c,z)._round()});this.perspectiveTransform=function(L,z,N,U,X,ne,Y,W,fe,ae){const ue=de(0,0,L,0,0,z,L,z),he=de(N,U,X,ne,Y,W,fe,ae);return s.multiply(he,s.adjoint(ue,ue),he),[he[6]/he[8]*L/s.EXTENT,he[7]/he[8]*z/s.EXTENT]}(this.width,this.height,p.x,p.y,v.x,v.y,E.x,E.y,x.x,x.y);const A=this._boundsArray=new s.StructArrayLayout4i8;A.emplaceBack(p.x,p.y,0,0),A.emplaceBack(v.x,v.y,s.EXTENT,0),A.emplaceBack(E.x,E.y,0,s.EXTENT),A.emplaceBack(x.x,x.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(A,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.texture?this.texture.update(this.image):(this.texture=new s.Texture(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._prepareData(i)}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const $e={vector:class extends s.Evented{constructor(f,i,c,p){if(super(),this.id=f,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(i,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kt(this._options,this.map._requestManager,(f,i)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new s.ErrorEvent(f)):i&&(s.extend(this,i),i.bounds&&(this.tileBounds=new Et(i.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f();const i=this.map.style._getSourceCaches(this.id);for(const c of i)c.clearTiles();this.load()}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(f,i){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(c,s.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(p.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired")f.state==="loading"?f.reloadCallback=i:f.request=f.actor.send("reloadTile",p,v.bind(this));else if(f.actor=this._tileWorkers[c]=this._tileWorkers[c]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",p,v.bind(this),void 0,!0);else{const x=s.loadVectorTile.call({deduped:this._deduped},p,(E,A)=>{E||!A?v.call(this,E):(p.data={cacheControl:A.cacheControl,expires:A.expires,rawData:A.rawData.slice(0)},f.actor&&f.actor.send("loadTile",p,v.bind(this),void 0,!0))},!0);f.request={cancel:x}}function v(x,E){return delete f.request,f.aborted?i(null):x&&x.status!==404?i(x):(E&&E.resourceTiming&&(f.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&f.setExpiryData(E),f.loadVectorData(E,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:V,"raster-dem":class extends V{constructor(f,i,c,p){super(f,i,c,p),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(v,x){v&&(f.state="errored",i(v)),x&&(f.dem=x,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=s.getImage(this.map._requestManager.transformRequest(c,s.ResourceType.Tile),function(v,x,E,A){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(v)f.state="errored",i(v);else if(x){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:E,expires:A});const L=s.window.ImageBitmap&&x instanceof s.window.ImageBitmap&&(re==null&&(re=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),re),z=1-(x.width-s.prevPowerOfTwo(x.width))/2;z<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const N=L?x:s.exported.getImageData(x,z),U={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:N,encoding:this.encoding,padding:z};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",U,p.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const i=f.canonical,c=Math.pow(2,i.z),p=(i.x-1+c)%c,v=i.x===0?f.wrap-1:f.wrap,x=(i.x+1+c)%c,E=i.x+1===c?f.wrap+1:f.wrap,A={};return A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y).key]={backfilled:!1},i.y>0&&(A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y-1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y-1).key]={backfilled:!1}),i.y+1<c&&(A[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y+1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},A[new s.OverscaledTileID(f.overscaledZ,E,i.z,x,i.y+1).key]={backfilled:!1}),A}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends s.Evented{constructor(f,i,c,p){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(p),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*v,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*v,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,c,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:c},p),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(f.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(c,p)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new s.ErrorEvent(c));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&p&&p.resourceTiming&&p.resourceTiming[this.id]&&(v.resourceTiming=p.resourceTiming[this.id]),this.fire(new s.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,i){const c=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(c,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(p,v)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):p?i(p):(f.loadVectorData(v,this.map.painter,c==="reloadTile"),i(null))),void 0,c==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Te{constructor(f,i,c,p){super(f,i,c,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Te,canvas:class extends Te{constructor(f,i,c,p){super(f,i,c,p),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(x=>typeof x!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends s.Evented{constructor(f,i,c,p){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Et(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:i,y:c,z:p}=f.canonical;return this._implementation.hasTile({x:i,y:c,z:p})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,i){const{x:c,y:p,z:v}=f.tileID.canonical,x=new s.window.AbortController,E=this._implementation.loadTile({x:c,y:p,z:v},{signal:x.signal});if(!E)return this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null);E.cancel=()=>x.abort(),f.request=E.then(function(A){return delete f.request,f.aborted?(f.state="unloaded",i(null)):A?function(L){return L instanceof s.window.ImageData||L instanceof s.window.ImageBitmap||L instanceof s.window.HTMLCanvasElement}(A)?(this.loadTileData(f,A),f.state="loaded",void i(null)):(f.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null))}.bind(this)).catch(A=>{A.code!==20&&(f.state="errored",i(A))})}loadTileData(f,i){V.loadTileData(f,i,this._map.painter)}unloadTileData(f){V.unloadTileData(f,this._map.painter)}prepareTile(f){if(!this._implementation.prepareTile)return null;const{x:i,y:c,z:p}=f.tileID.canonical,v=this._implementation.prepareTile({x:i,y:c,z:p});return v?(this.loadTileData(f,v),f.state="loaded",v):null}unloadTile(f,i){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:c,y:p,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:c,y:p,z:v})}i()}abortTile(f,i){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ne=function(f,i,c,p){const v=new $e[i.type](f,i,c,p);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Ce(f,i){const c=s.identity([]);return s.scale(c,c,[.5*f.width,.5*-f.height,1]),s.translate(c,c,[1,-1,0]),s.multiply$1(c,c,f.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(c)}function je(f,i,c,p,v,x,E,A=!1){const L=f.tilesIn(p,E,A);L.sort(Pt);const z=[];for(const U of L)z.push({wrappedTileID:U.tile.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(i,c,f._state,U,v,x,Ce(f.transform,U.tile.tileID),A)});const N=function(U){const X={},ne={};for(const Y of U){const W=Y.queryResults,fe=Y.wrappedTileID,ae=ne[fe]=ne[fe]||{};for(const ue in W){const he=W[ue],ye=ae[ue]=ae[ue]||{},ce=X[ue]=X[ue]||[];for(const we of he)ye[we.featureIndex]||(ye[we.featureIndex]=!0,ce.push(we))}}return X}(z);for(const U in N)N[U].forEach(X=>{const ne=X.feature,Y=ne.layer;Y&&Y.type!=="background"&&Y.type!=="sky"&&(ne.source=Y.source,Y["source-layer"]&&(ne.sourceLayer=Y["source-layer"]),ne.state=ne.id!==void 0?f.getFeatureState(Y["source-layer"],ne.id):{})});return N}function _t(f,i){const c=f.getRenderableIds().map(x=>f.getTileByID(x)),p=[],v={};for(let x=0;x<c.length;x++){const E=c[x],A=E.tileID.canonical.key;v[A]||(v[A]=!0,E.querySourceFeatures(p,i))}return p}function Pt(f,i){const c=f.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function gt(){return sc.workerClass!=null?new sc.workerClass:new s.window.Worker(sc.workerUrl)}const un="mapboxgl_preloaded_worker_pool";class Xt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Xt.workerCount;)this.workers.push(new gt);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[un]}numActive(){return Object.keys(this.active).length}}let an;function gn(){return an||(an=new Xt),an}function Ue(f,i){const c={};for(const p in f)p!=="ref"&&(c[p]=f[p]);return s.refProperties.forEach(p=>{p in i&&(c[p]=i[p])}),c}function jn(f){f=f.slice();const i=Object.create(null);for(let c=0;c<f.length;c++)i[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=Ue(f[c],i[f[c].ref]));return f}Xt.workerCount=2;const Kt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Yn(f,i,c){c.push({command:Kt.addSource,args:[f,i[f]]})}function zn(f,i,c){i.push({command:Kt.removeSource,args:[f]}),c[f]=!0}function ko(f,i,c,p){zn(f,c,p),Yn(f,i,c)}function nr(f,i,c){let p;for(p in f[c])if(f[c].hasOwnProperty(p)&&p!=="data"&&!D(f[c][p],i[c][p]))return!1;for(p in i[c])if(i[c].hasOwnProperty(p)&&p!=="data"&&!D(f[c][p],i[c][p]))return!1;return!0}function zt(f,i,c,p,v,x){let E;for(E in i=i||{},f=f||{})f.hasOwnProperty(E)&&(D(f[E],i[E])||c.push({command:x,args:[p,E,i[E],v]}));for(E in i)i.hasOwnProperty(E)&&!f.hasOwnProperty(E)&&(D(f[E],i[E])||c.push({command:x,args:[p,E,i[E],v]}))}function Un(f){return f.id}function Ln(f,i){return f[i.id]=i,f}class Or{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let c=1,p=this._distances[c];const v=i*this.paddedLength+this.padding;for(;p<v&&c<this._distances.length;)p=this._distances[++c];const x=c-1,E=this._distances[x],A=p-E,L=A>0?(v-E)/A:0;return this.points[x].mult(1-L).add(this.points[c].mult(L))}}class xr{constructor(i,c,p){const v=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let E=0;E<this.xCellCount*this.yCellCount;E++)v.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,v,x){this._forEachCell(c,p,v,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(x)}insertCircle(i,c,p,v){this._forEachCell(c-v,p-v,c+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(v)}_insertBoxCell(i,c,p,v,x,E){this.boxCells[x].push(E)}_insertCircleCell(i,c,p,v,x,E){this.circleCells[x].push(E)}_query(i,c,p,v,x,E){if(p<0||i>this.width||v<0||c>this.height)return!x&&[];const A=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=v){if(x)return!0;for(let L=0;L<this.boxKeys.length;L++)A.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const z=this.circles[3*L],N=this.circles[3*L+1],U=this.circles[3*L+2];A.push({key:this.circleKeys[L],x1:z-U,y1:N-U,x2:z+U,y2:N+U})}return E?A.filter(E):A}return this._forEachCell(i,c,p,v,this._queryCell,A,{hitTest:x,seenUids:{box:{},circle:{}}},E),x?A.length>0:A}_queryCircle(i,c,p,v,x){const E=i-p,A=i+p,L=c-p,z=c+p;if(A<0||E>this.width||z<0||L>this.height)return!v&&[];const N=[];return this._forEachCell(E,L,A,z,this._queryCellCircle,N,{hitTest:v,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},x),v?N.length>0:N}query(i,c,p,v,x){return this._query(i,c,p,v,!1,x)}hitTest(i,c,p,v,x){return this._query(i,c,p,v,!0,x)}hitTestCircle(i,c,p,v){return this._queryCircle(i,c,p,!0,v)}_queryCell(i,c,p,v,x,E,A,L){const z=A.seenUids,N=this.boxCells[x];if(N!==null){const X=this.bboxes;for(const ne of N)if(!z.box[ne]){z.box[ne]=!0;const Y=4*ne;if(i<=X[Y+2]&&c<=X[Y+3]&&p>=X[Y+0]&&v>=X[Y+1]&&(!L||L(this.boxKeys[ne]))){if(A.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ne],x1:X[Y],y1:X[Y+1],x2:X[Y+2],y2:X[Y+3]})}}}const U=this.circleCells[x];if(U!==null){const X=this.circles;for(const ne of U)if(!z.circle[ne]){z.circle[ne]=!0;const Y=3*ne;if(this._circleAndRectCollide(X[Y],X[Y+1],X[Y+2],i,c,p,v)&&(!L||L(this.circleKeys[ne]))){if(A.hitTest)return E.push(!0),!0;{const W=X[Y],fe=X[Y+1],ae=X[Y+2];E.push({key:this.circleKeys[ne],x1:W-ae,y1:fe-ae,x2:W+ae,y2:fe+ae})}}}}}_queryCellCircle(i,c,p,v,x,E,A,L){const z=A.circle,N=A.seenUids,U=this.boxCells[x];if(U!==null){const ne=this.bboxes;for(const Y of U)if(!N.box[Y]){N.box[Y]=!0;const W=4*Y;if(this._circleAndRectCollide(z.x,z.y,z.radius,ne[W+0],ne[W+1],ne[W+2],ne[W+3])&&(!L||L(this.boxKeys[Y])))return E.push(!0),!0}}const X=this.circleCells[x];if(X!==null){const ne=this.circles;for(const Y of X)if(!N.circle[Y]){N.circle[Y]=!0;const W=3*Y;if(this._circlesCollide(ne[W],ne[W+1],ne[W+2],z.x,z.y,z.radius)&&(!L||L(this.circleKeys[Y])))return E.push(!0),!0}}}_forEachCell(i,c,p,v,x,E,A,L){const z=this._convertToXCellCoord(i),N=this._convertToYCellCoord(c),U=this._convertToXCellCoord(p),X=this._convertToYCellCoord(v);for(let ne=z;ne<=U;ne++)for(let Y=N;Y<=X;Y++)if(x.call(this,i,c,p,v,this.xCellCount*Y+ne,E,A,L))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,v,x,E){const A=v-i,L=x-c,z=p+E;return z*z>A*A+L*L}_circleAndRectCollide(i,c,p,v,x,E,A){const L=(E-v)/2,z=Math.abs(i-(v+L));if(z>L+p)return!1;const N=(A-x)/2,U=Math.abs(c-(x+N));if(U>N+p)return!1;if(z<=L||U<=N)return!0;const X=z-L,ne=U-N;return X*X+ne*ne<=p*p}}const G=Math.tan(85*Math.PI/180);function Oe(f,i,c,p,v,x){const E=s.create();if(c){if(v.projection.name==="globe")s.multiply$1(E,E,s.calculateGlobeLabelMatrix(v,i));else{const A=nt([],x);E[0]=A[0],E[1]=A[1],E[4]=A[2],E[5]=A[3]}p||s.rotateZ(E,E,v.angle)}else s.multiply$1(E,v.labelPlaneMatrix,f);return E}function It(f,i,c,p,v,x){if(c){if(v.projection.name==="globe"){const E=Oe(f,i,c,p,v,x);return s.invert(E,E),s.multiply$1(E,f,E),E}{const E=s.clone(f),A=s.identity([]);return A[0]=x[0],A[1]=x[1],A[4]=x[2],A[5]=x[3],s.multiply$1(E,E,A),p||s.rotateZ(E,E,-v.angle),E}}return v.glCoordMatrix}function mt(f,i,c=0){const p=[f.x,f.y,c,1];c?s.transformMat4$1(p,p,i):Ir(p,p,i);const v=p[3];return{point:new s.pointGeometry(p[0]/v,p[1]/v),signedDistanceFromCamera:v}}function vn(f,i){const c=[f[0],f[1],f[2],1];s.transformMat4$1(c,c,i);const p=c[3];return{point:new s.pointGeometry(c[0]/p,c[1]/p),signedDistanceFromCamera:p}}function on(f,i){return Math.min(.5+f/i*.5,1.5)}function si(f,i){const c=f[0]/f[3],p=f[1]/f[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function Vn(f,i,c,p,v,x,E,A,L,z){const N=c.transform,U=p?f.textSizeData:f.iconSizeData,X=s.evaluateSizeForZoom(U,c.transform.zoom),ne=[256/c.width*2+1,256/c.height*2+1],Y=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Y.clear();const W=f.lineVertexArray,fe=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,ae=c.transform.width/c.transform.height;let ue=!1;for(let he=0;he<fe.length;he++){const ye=fe.get(he);if(ye.writingMode!==s.WritingMode.vertical||ue||he!==0&&fe.get(he-1).writingMode===s.WritingMode.horizontal||(ue=!0),(ye.hidden||ye.writingMode===s.WritingMode.vertical)&&!ue){qi(ye.numGlyphs,Y);continue}ue=!1;const ce=new s.pointGeometry(ye.tileAnchorX,ye.tileAnchorY),we=L?L(ce):[0,0,0],Ve=N.projection.projectTilePoint(ce.x,ce.y,z.canonical),tt=[Ve.x+we[0],Ve.y+we[1],Ve.z+we[2]],ut=[...tt,1];if(s.transformMat4$1(ut,ut,i),!si(ut,ne)){qi(ye.numGlyphs,Y);continue}const st=on(c.transform.cameraToCenterDistance,ut[3]),Dt=s.evaluateSizeForFeature(U,X,ye),Ge=E?Dt/st:Dt*st,Ot=mt(new s.pointGeometry(tt[0],tt[1]),v,tt[2]);if(Ot.signedDistanceFromCamera<=0){qi(ye.numGlyphs,Y);continue}let Mt={};const nn=E?null:L,ft=Oi(ye,Ge,!1,A,i,v,x,f.glyphOffsetArray,W,Y,Ot.point,ce,Mt,ae,nn,N.projection,z);ue=ft.useVertical,nn&&ft.needsFlipping&&(Mt={}),(ft.notEnoughRoom||ue||ft.needsFlipping&&Oi(ye,Ge,!0,A,i,v,x,f.glyphOffsetArray,W,Y,Ot.point,ce,Mt,ae,nn,N.projection,z).notEnoughRoom)&&qi(ye.numGlyphs,Y)}p?f.text.dynamicLayoutVertexBuffer.updateData(Y):f.icon.dynamicLayoutVertexBuffer.updateData(Y)}function Zt(f,i,c,p,v,x,E,A,L,z,N,U,X,ne,Y){const W=A.glyphStartIndex+A.numGlyphs,fe=A.lineStartIndex,ae=A.lineStartIndex+A.lineLength,ue=i.getoffsetX(A.glyphStartIndex),he=i.getoffsetX(W-1),ye=Qo(f*ue,c,p,v,x,E,A.segment,fe,ae,L,z,N,U,X,!0,ne,Y);if(!ye)return null;const ce=Qo(f*he,c,p,v,x,E,A.segment,fe,ae,L,z,N,U,X,!0,ne,Y);return ce?{first:ye,last:ce}:null}function cr(f,i,c,p){return f.writingMode===s.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:f.writingMode===s.WritingMode.vertical?i.y<c.y?{needsFlipping:!0}:null:f.flipState!==0&&function(v,x,E){const A=(x.x-v.x)*E;return A===0||Math.abs((x.y-v.y)/A)>G}(i,c,p)?f.flipState===1?{needsFlipping:!0}:null:i.x>c.x?{needsFlipping:!0}:null}function Oi(f,i,c,p,v,x,E,A,L,z,N,U,X,ne,Y,W,fe){const ae=i/24,ue=f.lineOffsetX*ae,he=f.lineOffsetY*ae;let ye;if(f.numGlyphs>1){const ce=f.glyphStartIndex+f.numGlyphs,we=f.lineStartIndex,Ve=f.lineStartIndex+f.lineLength,tt=Zt(ae,A,ue,he,c,N,U,f,L,x,X,Y,!1,W,fe);if(!tt)return{notEnoughRoom:!0};const ut=mt(tt.first.point,E).point,st=mt(tt.last.point,E).point;if(p&&!c){const Dt=cr(f,ut,st,ne);if(f.flipState=Dt&&Dt.needsFlipping?1:2,Dt)return Dt}ye=[tt.first];for(let Dt=f.glyphStartIndex+1;Dt<ce-1;Dt++)ye.push(Qo(ae*A.getoffsetX(Dt),ue,he,c,N,U,f.segment,we,Ve,L,x,X,Y,!1,!1,W,fe));ye.push(tt.last)}else{if(p&&!c){const we=mt(U,v).point,Ve=f.lineStartIndex+f.segment+1,tt=new s.pointGeometry(L.getx(Ve),L.gety(Ve)),ut=mt(tt,v),st=cr(f,we,ut.signedDistanceFromCamera>0?ut.point:Rn(U,tt,we,1,v,void 0,W,fe.canonical),ne);if(f.flipState=st&&st.needsFlipping?1:2,st)return st}const ce=Qo(ae*A.getoffsetX(f.glyphStartIndex),ue,he,c,N,U,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,L,x,X,Y,!1,!1,W,fe);if(!ce)return{notEnoughRoom:!0};ye=[ce]}for(const ce of ye)s.addDynamicAttributes(z,ce.point,ce.angle);return{}}function Lo(f,i,c,p,v){const x=p.projectTilePoint(f.x,f.y,i);if(!v)return mt(x,c,x.z);const E=v(f);return mt(new s.pointGeometry(x.x+E[0],x.y+E[1]),c,x.z+E[2])}function Rn(f,i,c,p,v,x,E,A){const L=Lo(f.add(f.sub(i)._unit()),A,v,E,x).point,z=c.sub(L);return c.add(z._mult(p/z.mag()))}function Qo(f,i,c,p,v,x,E,A,L,z,N,U,X,ne,Y,W,fe){const ae=p?f-i:f+i;let ue=ae>0?1:-1,he=0;p&&(ue*=-1,he=Math.PI),ue<0&&(he+=Math.PI);let ye=ue>0?A+E:A+E+1,ce=v,we=v,Ve=0,tt=0;const ut=Math.abs(ae),st=[],Dt=[];let Ge=x;const Ot=()=>{const en=ye-ue;return Ve===0?x:new s.pointGeometry(z.getx(en),z.gety(en))},Mt=()=>Rn(Ot(),Ge,we,ut-Ve+1,N,X,W,fe.canonical);for(;Ve+tt<=ut;){if(ye+=ue,ye<A||ye>=L)return null;if(we=ce,st.push(ce),ne&&Dt.push(Ge||Ot()),ce=U[ye],ce===void 0){Ge=new s.pointGeometry(z.getx(ye),z.gety(ye));const en=Lo(Ge,fe.canonical,N,W,X);ce=en.signedDistanceFromCamera>0?U[ye]=en.point:Mt()}else Ge=null;Ve+=tt,tt=we.dist(ce)}Y&&X&&(Ge=Ge||new s.pointGeometry(z.getx(ye),z.gety(ye)),U[ye]=ce=U[ye]===void 0?ce:Mt(),tt=we.dist(ce));const nn=(ut-Ve)/tt,ft=ce.sub(we),Jt=ft.mult(nn)._add(we);c&&Jt._add(ft._unit()._perp()._mult(c*ue));const yn=he+Math.atan2(ce.y-we.y,ce.x-we.x);return st.push(Jt),ne&&(Ge=Ge||new s.pointGeometry(z.getx(ye),z.gety(ye)),Dt.push(function(en,tn,xn){const Bn=1-xn;return new s.pointGeometry(en.x*Bn+tn.x*xn,en.y*Bn+tn.y*xn)}(Dt.length>0?Dt[Dt.length-1]:Ge,Ge,nn))),{point:Jt,angle:yn,path:st,tilePath:Dt}}const Zc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(f,i){for(let c=0;c<f;c++){const p=i.length;i.resize(p+4),i.float32.set(Zc,3*p)}}function Ir(f,i,c){const p=i[0],v=i[1];return f[0]=c[0]*p+c[4]*v+c[12],f[1]=c[1]*p+c[5]*v+c[13],f[3]=c[3]*p+c[7]*v+c[15],f}const qr=100;class aa{constructor(i,c,p=new xr(i.width+200,i.height+200,25),v=new xr(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=v,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+qr,this.screenBottomBoundary=i.height+qr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=c}placeCollisionBox(i,c,p,v,x,E,A){let L=c.projectedAnchorX,z=c.projectedAnchorY,N=c.projectedAnchorZ;const U=c.elevation,X=c.tileID;if(U&&X){const ye=this.transform.projection.upVector(X.canonical,c.tileAnchorX,c.tileAnchorY),ce=this.transform.projection.upVectorScale(X.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;L+=ye[0]*U*ce,z+=ye[1]*U*ce,N+=ye[2]*U*ce}const ne=this.projectAndGetPerspectiveRatio(E,[L,z,N],c.tileID,this.transform.projection.name==="globe"||!!U||this.transform.pitch>0),Y=x*ne.perspectiveRatio,W=(c.x1*i+p.x-c.padding)*Y+ne.point.x,fe=(c.y1*i+p.y-c.padding)*Y+ne.point.y,ae=(c.x2*i+p.x+c.padding)*Y+ne.point.x,ue=(c.y2*i+p.y+c.padding)*Y+ne.point.y,he=ne.perspectiveRatio<=.55||ne.occluded;return!this.isInsideGrid(W,fe,ae,ue)||!v&&this.grid.hitTest(W,fe,ae,ue,A)||he?{box:[],offscreen:!1,occluded:ne.occluded}:{box:[W,fe,ae,ue],offscreen:this.isOffscreen(W,fe,ae,ue),occluded:!1}}placeCollisionCircles(i,c,p,v,x,E,A,L,z,N,U,X,ne,Y){const W=[],fe=this.transform.elevation,ae=fe?fe.getAtTileOffsetFunc(Y,this.transform.center.lat,this.transform.worldSize,this.transform.projection):Mt=>[0,0,0],ue=new s.pointGeometry(c.tileAnchorX,c.tileAnchorY),he=this.transform.projection.projectTilePoint(c.tileAnchorX,c.tileAnchorY,Y.canonical),ye=ae(ue),ce=[he.x+ye[0],he.y+ye[1],he.z+ye[2]],we=this.projectAndGetPerspectiveRatio(E,[ce[0],ce[1],ce[2]],Y,this.transform.projection.name==="globe"||!!fe||this.transform.pitch>0),{perspectiveRatio:Ve}=we,tt=(N?x/Ve:x*Ve)/s.ONE_EM,ut=mt(new s.pointGeometry(ce[0],ce[1]),A,ce[2]).point,st=we.signedDistanceFromCamera>0?Zt(tt,v,c.lineOffsetX*tt,c.lineOffsetY*tt,!1,ut,ue,c,p,A,{},fe&&!N?ae:null,N&&!!fe,this.transform.projection,Y):null;let Dt=!1,Ge=!1,Ot=!0;if(st&&!we.occluded){const Mt=.5*X*Ve+ne,nn=new s.pointGeometry(-100,-100),ft=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Jt=new Or,yn=st.first,en=st.last;let tn=[];for(let _n=yn.path.length-1;_n>=1;_n--)tn.push(yn.path[_n]);for(let _n=1;_n<en.path.length;_n++)tn.push(en.path[_n]);const xn=2.5*Mt;if(L){const _n=tn.map(fe?(wn,ii)=>{const Bi=ae(ii<yn.path.length-1?yn.tilePath[yn.path.length-1-ii]:en.tilePath[ii-yn.path.length+2]);return mt(wn,L,Bi[2])}:wn=>mt(wn,L));tn=_n.some(wn=>wn.signedDistanceFromCamera<=0)?[]:_n.map(wn=>wn.point)}let Bn=[];if(tn.length>0){const _n=tn[0].clone(),wn=tn[0].clone();for(let ii=1;ii<tn.length;ii++)_n.x=Math.min(_n.x,tn[ii].x),_n.y=Math.min(_n.y,tn[ii].y),wn.x=Math.max(wn.x,tn[ii].x),wn.y=Math.max(wn.y,tn[ii].y);Bn=_n.x>=nn.x&&wn.x<=ft.x&&_n.y>=nn.y&&wn.y<=ft.y?[tn]:wn.x<nn.x||_n.x>ft.x||wn.y<nn.y||_n.y>ft.y?[]:s.clipLine([tn],nn.x,nn.y,ft.x,ft.y)}for(const _n of Bn){Jt.reset(_n,.25*Mt);let wn=0;wn=Jt.length<=.5*Mt?1:Math.ceil(Jt.paddedLength/xn)+1;for(let ii=0;ii<wn;ii++){const Bi=ii/Math.max(wn-1,1),Br=Jt.lerp(Bi),Fr=Br.x+qr,xo=Br.y+qr;W.push(Fr,xo,Mt,0);const os=Fr-Mt,Ws=xo-Mt,Ta=Fr+Mt,qs=xo+Mt;if(Ot=Ot&&this.isOffscreen(os,Ws,Ta,qs),Ge=Ge||this.isInsideGrid(os,Ws,Ta,qs),!i&&this.grid.hitTestCircle(Fr,xo,Mt,U)&&(Dt=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Dt,occluded:!1}}}}return{circles:!z&&Dt||!Ge?[]:W,offscreen:Ot,collisionDetected:Dt,occluded:we.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,v=1/0,x=-1/0,E=-1/0;for(const N of i){const U=new s.pointGeometry(N.x+qr,N.y+qr);p=Math.min(p,U.x),v=Math.min(v,U.y),x=Math.max(x,U.x),E=Math.max(E,U.y),c.push(U)}const A=this.grid.query(p,v,x,E).concat(this.ignoredGrid.query(p,v,x,E)),L={},z={};for(const N of A){const U=N.key;if(L[U.bucketInstanceId]===void 0&&(L[U.bucketInstanceId]={}),L[U.bucketInstanceId][U.featureIndex])continue;const X=[new s.pointGeometry(N.x1,N.y1),new s.pointGeometry(N.x2,N.y1),new s.pointGeometry(N.x2,N.y2),new s.pointGeometry(N.x1,N.y2)];s.polygonIntersectsPolygon(c,X)&&(L[U.bucketInstanceId][U.featureIndex]=!0,z[U.bucketInstanceId]===void 0&&(z[U.bucketInstanceId]=[]),z[U.bucketInstanceId].push(U.featureIndex))}return z}insertCollisionBox(i,c,p,v,x){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:x},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,v,x){const E=c?this.ignoredGrid:this.grid,A={bucketInstanceId:p,featureIndex:v,collisionGroupID:x};for(let L=0;L<i.length;L+=4)E.insertCircle(A,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,c,p,v){const x=[c[0],c[1],c[2],1];let E=!1;return c[2]||this.transform.pitch>0?(s.transformMat4$1(x,x,i),this.fogState&&p&&(E=function(A,L,z,N,U,X){const ne=X.calculateFogTileMatrix(U),Y=[L,z,N];return s.transformMat4(Y,Y,ne),ht(A,Y,X.pitch,X._fov)}(this.fogState,c[0],c[1],c[2],p.toUnwrapped(),this.transform)>.9)):Ir(x,x,i),{point:new s.pointGeometry((x[0]/x[3]+1)/2*this.transform.width+qr,(-x[1]/x[3]+1)/2*this.transform.height+qr),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/x[3]*.5,1.5),signedDistanceFromCamera:x[3],occluded:v&&x[2]>x[3]||E}}isOffscreen(i,c,p,v){return p<qr||i>=this.screenRightBoundary||v<qr||c>this.screenBottomBoundary}isInsideGrid(i,c,p,v){return p>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}class Ui{constructor(i,c,p,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Zr{constructor(i,c,p,v,x,E=!1){this.text=new Ui(i?i.text:null,c,p,x),this.icon=new Ui(i?i.icon:null,c,v,x),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _o{constructor(i,c,p,v=!1){this.text=i,this.icon=c,this.skipFade=p,this.clipped=v}}class ur{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ml{constructor(i,c,p,v,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=x}}class br{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function la(f,i,c,p,v){const{horizontalAlign:x,verticalAlign:E}=s.getAnchorAlignment(f),A=-(x-.5)*i,L=-(E-.5)*c,z=s.evaluateVariableOffset(f,p);return new s.pointGeometry(A+z[0]*v,L+z[1]*v)}function Ns(f,i,c,p,v){const x=new s.pointGeometry(f,i);return c&&x._rotate(p?v:-v),x}class _h{constructor(i,c,p,v,x){this.transform=i.clone(),this.collisionIndex=new aa(this.transform,x),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new br(p),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,v){const x=p.getBucket(c),E=p.latestFeatureIndex;if(!x||!E||c.id!==x.layerIds[0])return;const A=x.layers[0].layout,L=p.collisionBoxArray,z=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),N=p.tileSize/s.EXTENT,U=p.tileID.toUnwrapped(),X=this.transform.calculateProjMatrix(U),ne=A.get("text-pitch-alignment")==="map",Y=A.get("text-rotation-alignment")==="map";c.compileFilter();const W=c.dynamicFilter(),fe=c.dynamicFilterNeedsFeature(),ae=this.transform.calculatePixelsToTileUnitsMatrix(p),ue=Oe(X,p.tileID.canonical,ne,Y,this.transform,ae);let he=null;if(ne){const we=It(X,p.tileID.canonical,ne,Y,this.transform,ae);he=s.multiply$1([],this.transform.labelPlaneMatrix,we)}let ye=null;W&&p.latestFeatureIndex&&(ye={unwrappedTileID:U,dynamicFilter:W,dynamicFilterNeedsFeature:fe,featureIndex:p.latestFeatureIndex}),this.retainedQueryData[x.bucketInstanceId]=new Ml(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,p.tileID);const ce={bucket:x,layout:A,posMatrix:X,textLabelPlaneMatrix:ue,labelToScreenMatrix:he,clippingData:ye,scale:z,textPixelRatio:N,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(v)for(const we of x.sortKeyRanges){const{sortKey:Ve,symbolInstanceStart:tt,symbolInstanceEnd:ut}=we;i.push({sortKey:Ve,symbolInstanceStart:tt,symbolInstanceEnd:ut,parameters:ce})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ce})}attemptAnchorPlacement(i,c,p,v,x,E,A,L,z,N,U,X,ne,Y,W,fe,ae,ue){const he=[X.textOffset0,X.textOffset1],ye=la(i,p,v,he,x),ce=this.collisionIndex.placeCollisionBox(x,c,Ns(ye.x,ye.y,E,A,this.transform.angle),U,L,z,N.predicate);if((!fe||this.collisionIndex.placeCollisionBox(Y.getSymbolInstanceIconSize(ue,this.transform.zoom,ne),fe,Ns(ye.x,ye.y,E,A,this.transform.angle),U,L,z,N.predicate).box.length!==0)&&ce.box.length>0){let we;return this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(we=this.prevPlacement.variableOffsets[X.crossTileID].anchor),this.variableOffsets[X.crossTileID]={textOffset:he,width:p,height:v,anchor:i,textScale:x,prevAnchor:we},this.markUsedJustification(Y,i,X,W),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,W,X),this.placedOrientations[X.crossTileID]=W),{shift:ye,placedGlyphBoxes:ce}}}placeLayerBucketPart(i,c,p,v){const{bucket:x,layout:E,posMatrix:A,textLabelPlaneMatrix:L,labelToScreenMatrix:z,clippingData:N,textPixelRatio:U,holdingForFade:X,collisionBoxArray:ne,partiallyEvaluatedTextSize:Y,partiallyEvaluatedIconSize:W,collisionGroup:fe}=i.parameters,ae=E.get("text-optional"),ue=E.get("icon-optional"),he=E.get("text-allow-overlap"),ye=E.get("icon-allow-overlap"),ce=E.get("text-rotation-alignment")==="map",we=E.get("text-pitch-alignment")==="map",Ve=E.get("icon-text-fit")!=="none",tt=E.get("symbol-z-order")==="viewport-y";let ut=he&&(ye||!x.hasIconData()||ue),st=ye&&(he||!x.hasTextData()||ae);!x.collisionArrays&&ne&&x.deserializeCollisionBoxes(ne),p&&v&&x.updateCollisionDebugBuffers(this.transform.zoom,ne);const Dt=(Ge,Ot,Mt)=>{if(N){const Vi={zoom:this.transform.zoom,pitch:this.transform.pitch};let Zi=null;if(N.dynamicFilterNeedsFeature){const ui=this.retainedQueryData[x.bucketInstanceId];Zi=N.featureIndex.loadFeature({featureIndex:Ge.featureIndex,bucketIndex:ui.bucketIndex,sourceLayerIndex:ui.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,N.dynamicFilter)(Vi,Zi,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new s.pointGeometry(Ge.tileAnchorX,Ge.tileAnchorY),this.transform.calculateDistanceTileData(N.unwrappedTileID)))return this.placements[Ge.crossTileID]=new _o(!1,!1,!1,!0),void(c[Ge.crossTileID]=!0)}if(c[Ge.crossTileID])return;if(X)return void(this.placements[Ge.crossTileID]=new _o(!1,!1,!1));let nn=!1,ft=!1,Jt=!0,yn=!1,en=!1,tn=null,xn={box:null,offscreen:null,occluded:null},Bn={box:null,offscreen:null,occluded:null},_n=null,wn=null,ii=null,Bi=0,Br=0,Fr=0;Mt.textFeatureIndex?Bi=Mt.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(Bi=Ge.featureIndex),Mt.verticalTextFeatureIndex&&(Br=Mt.verticalTextFeatureIndex);const xo=Vi=>{Vi.tileID=this.retainedQueryData[x.bucketInstanceId].tileID,(this.transform.elevation||Vi.elevation)&&(Vi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[x.bucketInstanceId].tileID,Vi.tileAnchorX,Vi.tileAnchorY):0)},os=Mt.textBox;if(os){xo(os);const Vi=ui=>{let rr=s.WritingMode.horizontal;if(x.allowVerticalPlacement&&!ui&&this.prevPlacement){const bo=this.prevPlacement.placedOrientations[Ge.crossTileID];bo&&(this.placedOrientations[Ge.crossTileID]=bo,rr=bo,this.markUsedOrientation(x,rr,Ge))}return rr},Zi=(ui,rr)=>{if(x.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const bo of x.writingModes)if(bo===s.WritingMode.vertical?(xn=rr(),Bn=xn):xn=ui(),xn&&xn.box&&xn.box.length)break}else xn=ui()};if(E.get("text-variable-anchor")){let ui=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ge.crossTileID]){const Fi=this.prevPlacement.variableOffsets[Ge.crossTileID];ui.indexOf(Fi.anchor)>0&&(ui=ui.filter(No=>No!==Fi.anchor),ui.unshift(Fi.anchor))}const rr=(Fi,No,gu)=>{const wo=x.getSymbolInstanceTextSize(Y,Ge,this.transform.zoom,Ot),ll=(Fi.x2-Fi.x1)*wo+2*Fi.padding,Bp=(Fi.y2-Fi.y1)*wo+2*Fi.padding,id=Ve&&!ye?No:null;id&&xo(id);let ac={box:[],offscreen:!1,occluded:!1};const rg=he?2*ui.length:ui.length;for(let Aa=0;Aa<rg;++Aa){const rd=this.attemptAnchorPlacement(ui[Aa%ui.length],Fi,ll,Bp,wo,ce,we,U,A,fe,Aa>=ui.length,Ge,Ot,x,gu,id,Y,W);if(rd&&(ac=rd.placedGlyphBoxes,ac&&ac.box&&ac.box.length)){nn=!0,tn=rd.shift;break}}return ac};Zi(()=>rr(os,Mt.iconBox,s.WritingMode.horizontal),()=>{const Fi=Mt.verticalTextBox;return Fi&&xo(Fi),x.allowVerticalPlacement&&!(xn&&xn.box&&xn.box.length)&&Ge.numVerticalGlyphVertices>0&&Fi?rr(Fi,Mt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),xn&&(nn=xn.box,Jt=xn.offscreen,yn=xn.occluded);const bo=Vi(xn&&xn.box);if(!nn&&this.prevPlacement){const Fi=this.prevPlacement.variableOffsets[Ge.crossTileID];Fi&&(this.variableOffsets[Ge.crossTileID]=Fi,this.markUsedJustification(x,Fi.anchor,Ge,bo))}}else{const ui=(rr,bo)=>{const Fi=x.getSymbolInstanceTextSize(Y,Ge,this.transform.zoom,Ot),No=this.collisionIndex.placeCollisionBox(Fi,rr,new s.pointGeometry(0,0),he,U,A,fe.predicate);return No&&No.box&&No.box.length&&(this.markUsedOrientation(x,bo,Ge),this.placedOrientations[Ge.crossTileID]=bo),No};Zi(()=>ui(os,s.WritingMode.horizontal),()=>{const rr=Mt.verticalTextBox;return x.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&rr?(xo(rr),ui(rr,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Vi(xn&&xn.box&&xn.box.length)}}if(_n=xn,nn=_n&&_n.box&&_n.box.length>0,Jt=_n&&_n.offscreen,yn=_n&&_n.occluded,Ge.useRuntimeCollisionCircles){const Vi=x.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex>=0?Ge.centerJustifiedTextSymbolIndex:Ge.verticalPlacedTextSymbolIndex),Zi=s.evaluateSizeForFeature(x.textSizeData,Y,Vi),ui=E.get("text-padding");wn=this.collisionIndex.placeCollisionCircles(he,Vi,x.lineVertexArray,x.glyphOffsetArray,Zi,A,L,z,p,we,fe.predicate,Ge.collisionCircleDiameter*Zi/s.ONE_EM,ui,this.retainedQueryData[x.bucketInstanceId].tileID),nn=he||wn.circles.length>0&&!wn.collisionDetected,Jt=Jt&&wn.offscreen,yn=wn.occluded}if(Mt.iconFeatureIndex&&(Fr=Mt.iconFeatureIndex),Mt.iconBox){const Vi=Zi=>{xo(Zi);const ui=Ve&&tn?Ns(tn.x,tn.y,ce,we,this.transform.angle):new s.pointGeometry(0,0),rr=x.getSymbolInstanceIconSize(W,this.transform.zoom,Ot);return this.collisionIndex.placeCollisionBox(rr,Zi,ui,ye,U,A,fe.predicate)};Bn&&Bn.box&&Bn.box.length&&Mt.verticalIconBox?(ii=Vi(Mt.verticalIconBox),ft=ii.box.length>0):(ii=Vi(Mt.iconBox),ft=ii.box.length>0),Jt=Jt&&ii.offscreen,en=ii.occluded}const Ws=ae||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,Ta=ue||Ge.numIconVertices===0;if(Ws||Ta?Ta?Ws||(ft=ft&&nn):nn=ft&&nn:ft=nn=ft&&nn,nn&&_n&&_n.box&&this.collisionIndex.insertCollisionBox(_n.box,E.get("text-ignore-placement"),x.bucketInstanceId,Bn&&Bn.box&&Br?Br:Bi,fe.ID),ft&&ii&&this.collisionIndex.insertCollisionBox(ii.box,E.get("icon-ignore-placement"),x.bucketInstanceId,Fr,fe.ID),wn&&(nn&&this.collisionIndex.insertCollisionCircles(wn.circles,E.get("text-ignore-placement"),x.bucketInstanceId,Bi,fe.ID),p)){const Vi=x.bucketInstanceId;let Zi=this.collisionCircleArrays[Vi];Zi===void 0&&(Zi=this.collisionCircleArrays[Vi]=new ur);for(let ui=0;ui<wn.circles.length;ui+=4)Zi.circles.push(wn.circles[ui+0]),Zi.circles.push(wn.circles[ui+1]),Zi.circles.push(wn.circles[ui+2]),Zi.circles.push(wn.collisionDetected?1:0)}const qs=this.transform.projection.name!=="globe";ut=ut&&(qs||!yn),st=st&&(qs||!en),this.placements[Ge.crossTileID]=new _o(nn||ut,ft||st,Jt||x.justReloaded),c[Ge.crossTileID]=!0};if(tt){const Ge=x.getSortedSymbolIndexes(this.transform.angle);for(let Ot=Ge.length-1;Ot>=0;--Ot){const Mt=Ge[Ot];Dt(x.symbolInstances.get(Mt),Mt,x.collisionArrays[Mt])}}else for(let Ge=i.symbolInstanceStart;Ge<i.symbolInstanceEnd;Ge++)Dt(x.symbolInstances.get(Ge),Ge,x.collisionArrays[Ge]);if(p&&x.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[x.bucketInstanceId];s.invert(Ge.invProjMatrix,A),Ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(i,c,p,v){let x;x=v===s.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(c)];const E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const A of E)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=x>=0&&A!==x?0:p.crossTileID)}markUsedOrientation(i,c,p){const v=c===s.WritingMode.horizontal||c===s.WritingMode.horizontalOnly?c:0,x=c===s.WritingMode.vertical?c:0,E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const A of E)i.text.placedSymbolArray.get(A).placedOrientation=v;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},E=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(const L in this.placements){const z=this.placements[L],N=x[L];N?(this.opacities[L]=new Zr(N,v,z.text,z.icon,null,z.clipped),p=p||z.text!==N.text.placed||z.icon!==N.icon.placed):(this.opacities[L]=new Zr(null,v,z.text,z.icon,z.skipFade,z.clipped),p=p||z.text||z.icon)}for(const L in x){const z=x[L];if(!this.opacities[L]){const N=new Zr(z,v,!1,!1);N.isHidden()||(this.opacities[L]=N,p=p||z.text.placed||z.icon.placed)}}for(const L in E)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=E[L]);for(const L in A)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=A[L]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const v of c){const x=v.getBucket(i);x&&v.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,v.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,x=!!i.layers[0].dynamicFilter(),E=new Zr(null,0,!1,!1,!0),A=v.get("text-allow-overlap"),L=v.get("icon-allow-overlap"),z=v.get("text-variable-anchor"),N=v.get("text-rotation-alignment")==="map",U=v.get("text-pitch-alignment")==="map",X=v.get("icon-text-fit")!=="none",ne=new Zr(null,0,A&&(L||!i.hasIconData()||v.get("icon-optional")),L&&(A||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const Y=(fe,ae,ue)=>{for(let he=0;he<ae/4;he++)fe.opacityVertexArray.emplaceBack(ue)};let W=0;for(let fe=0;fe<i.symbolInstances.length;fe++){const ae=i.symbolInstances.get(fe),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:he,crossTileID:ye}=ae;let ce=this.opacities[ye];c[ye]?ce=E:ce||(ce=ne,this.opacities[ye]=ce),c[ye]=!0;const we=ue>0||he>0,Ve=ae.numIconVertices>0,tt=this.placedOrientations[ae.crossTileID],ut=tt===s.WritingMode.vertical,st=tt===s.WritingMode.horizontal||tt===s.WritingMode.horizontalOnly;if(!we&&!Ve||ce.isHidden()||W++,we){const Dt=Kc(ce.text);Y(i.text,ue,ut?Bs:Dt),Y(i.text,he,st?Bs:Dt);const Ge=ce.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(nn=>{nn>=0&&(i.text.placedSymbolArray.get(nn).hidden=Ge||ut?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=Ge||st?1:0);const Ot=this.variableOffsets[ae.crossTileID];Ot&&this.markUsedJustification(i,Ot.anchor,ae,tt);const Mt=this.placedOrientations[ae.crossTileID];Mt&&(this.markUsedJustification(i,"left",ae,Mt),this.markUsedOrientation(i,Mt,ae))}if(Ve){const Dt=Kc(ce.icon);ae.placedIconSymbolIndex>=0&&(Y(i.icon,ae.numIconVertices,ut?Bs:Dt),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=ce.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(Y(i.icon,ae.numVerticalIconVertices,st?Bs:Dt),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Dt=i.collisionArrays[fe];if(Dt){let Ge=new s.pointGeometry(0,0),Ot=!0;if(Dt.textBox||Dt.verticalTextBox){if(z){const nn=this.variableOffsets[ye];nn?(Ge=la(nn.anchor,nn.width,nn.height,nn.textOffset,nn.textScale),N&&Ge._rotate(U?this.transform.angle:-this.transform.angle)):Ot=!1}x&&(Ot=!ce.clipped),Dt.textBox&&oo(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Ot||ut,Ge.x,Ge.y),Dt.verticalTextBox&&oo(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Ot||st,Ge.x,Ge.y)}const Mt=Ot&&Boolean(!st&&Dt.verticalIconBox);Dt.iconBox&&oo(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,Mt,X?Ge.x:0,X?Ge.y:0),Dt.verticalIconBox&&oo(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Mt,X?Ge.x:0,X?Ge.y:0)}}}if(i.fullyClipped=W===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const fe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=fe.invProjMatrix,i.placementViewportMatrix=fe.viewportMatrix,i.collisionCircleArray=fe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function oo(f,i,c,p,v){f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0),f.emplaceBack(i?1:0,c?1:0,p||0,v||0)}const gh=Math.pow(2,25),Xc=Math.pow(2,24),Mr=Math.pow(2,17),qa=Math.pow(2,16),xs=Math.pow(2,9),Yc=Math.pow(2,8),Za=Math.pow(2,1);function Kc(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,c=Math.floor(127*f.opacity);return c*gh+i*Xc+c*Mr+i*qa+c*xs+i*Yc+c*Za+i}const Bs=0;class Jc{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,v,x){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((A,L)=>A.sortKey-L.sortKey));this._currentPartIndex<E.length;){const A=E[this._currentPartIndex];if(c.placeLayerBucketPart(A,this._seenCrossTileIDs,p,A.symbolInstanceStart===0),this._currentPartIndex++,x())return!0}return!1}}class Yf{constructor(i,c,p,v,x,E,A,L){this.placement=new _h(i,x,E,A,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const v=s.exported.now(),x=()=>{const E=s.exported.now()-v;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=A)&&(!E.maxzoom||E.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Jc(E)),this._inProgressLayer.continuePlacement(p[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const kl=512/s.EXTENT/2;class yh{constructor(i,c,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let v=0;v<c.length;v++){const x=c.get(v),E=x.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,c){const p=kl/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*s.EXTENT+i.tileAnchorX)*p),y:Math.floor((c.canonical.y*s.EXTENT+i.tileAnchorY)*p)}}findMatches(i,c,p){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const E=i.get(x);if(E.crossTileID)continue;const A=this.indexedSymbolInstances[E.key];if(!A)continue;const L=this.getScaledCoordinates(E,c);for(const z of A)if(Math.abs(z.coord.x-L.x)<=v&&Math.abs(z.coord.y-L.y)<=v&&!p[z.crossTileID]){p[z.crossTileID]=!0,E.crossTileID=z.crossTileID;break}}}}class Ll{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const v=this.indexes[p],x={};for(const E in v){const A=v[E];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),x[A.tileID.key]=A}this.indexes[p]=x}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>i.overscaledZ)for(const A in E){const L=E[A];L.tileID.isChildOf(i)&&L.findMatches(c.symbolInstances,i,v)}else{const A=E[i.scaledTo(Number(x)).key];A&&A.findMatches(c.symbolInstances,i,v)}}for(let x=0;x<c.symbolInstances.length;x++){const E=c.symbolInstances.get(x);E.crossTileID||(E.crossTileID=p.generate(),v[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new yh(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p in c.indexedSymbolInstances)for(const v of c.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const v=this.indexes[p];for(const x in v)i[v[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[x]),delete v[x],c=!0)}return c}}class Xa{constructor(){this.layerIndexes={},this.crossTileIDs=new Ll,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p,v){let x=this.layerIndexes[i.id];x===void 0&&(x=this.layerIndexes[i.id]=new Qc);let E=!1;const A={};v.name!=="globe"&&x.handleWrapJump(p);for(const L of c){const z=L.getBucket(i);z&&i.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(L.tileID,z,this.crossTileIDs)&&(E=!0),A[z.bucketInstanceId]=!0)}return x.removeStaleBuckets(A)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const ca=(f,i)=>s.emitValidationErrors(f,i&&i.filter(c=>c.identifier!=="source.canvas")),Pl=s.pick(Kt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),vh=s.pick(Kt,["setCenter","setZoom","setBearing","setPitch"]),eu={version:8,layers:[],sources:{}},bs={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ir extends s.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new Gt(gn(),this),this.imageManager=new Xe,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,c.localFontFamily?s.LocalGlyphMode.all:c.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.lineAtlas=new s.LineAtlas(256,512),this.crossTileSymbolIndex=new Xa,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const p=this;this._rtlTextPluginCallback=ir.registerForPluginStateChange(v=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(x,E)=>{if(s.triggerPluginCompletionEvent(x),E&&E.every(A=>A))for(const A in p._sourceCaches){const L=p._sourceCaches[A],z=L.getSource().type;z!=="vector"&&z!=="geojson"||L.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const x=this.getSource(v.sourceId);if(x&&x.vectorLayerIds)for(const E in this._layers){const A=this._layers[E];A.source===x.id&&this._validateLayer(A)}})}loadURL(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const p=typeof c.validate=="boolean"?c.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,c.accessToken);const v=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(v,(x,E)=>{this._request=null,x?this.fire(new s.ErrorEvent(x)):E&&this._load(E,p)})}loadJSON(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(eu,!1)}_updateLayerCount(i,c){const p=c?1:-1;i.is3D()&&(this._num3DLayers+=p),i.type==="circle"&&(this._numCircleLayers+=p),i.type==="symbol"&&(this._numSymbolLayers+=p)}_load(i,c){if(c&&ca(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i,this._updateMapProjection();for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const p=jn(this.stylesheet.layers);this._order=p.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of p)v=s.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ve(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(i){this._spriteRequest=function(c,p,v){let x,E,A;const L=s.exported.devicePixelRatio>1?"@2x":"";let z=s.getJSON(p.transformRequest(p.normalizeSpriteURL(c,L,".json"),s.ResourceType.SpriteJSON),(X,ne)=>{z=null,A||(A=X,x=ne,U())}),N=s.getImage(p.transformRequest(p.normalizeSpriteURL(c,L,".png"),s.ResourceType.SpriteImage),(X,ne)=>{N=null,A||(A=X,E=ne,U())});function U(){if(A)v(A);else if(x&&E){const X=s.exported.getImageData(E),ne={};for(const Y in x){const{width:W,height:fe,x:ae,y:ue,sdf:he,pixelRatio:ye,stretchX:ce,stretchY:we,content:Ve}=x[Y],tt=new s.RGBAImage({width:W,height:fe});s.RGBAImage.copy(X,tt,{x:ae,y:ue},{x:0,y:0},{width:W,height:fe}),ne[Y]={data:tt,pixelRatio:ye,sdf:he,stretchX:ce,stretchY:we,content:Ve}}v(null,ne)}}return{cancel(){z&&(z.cancel(),z=null),N&&(N.cancel(),N=null)}}}(i,this.map._requestManager,(c,p)=>{if(this._spriteRequest=null,c)this.fire(new s.ErrorEvent(c));else if(p)for(const v in p)this.imageManager.addImage(v,p[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.getSource(i.source);if(!c)return;const p=i.sourceLayer;p&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${c.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const p of i){const v=this._layers[p];v.type!=="custom"&&c.push(v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&bs[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(v.length||x.length)&&this._updateWorkerLayers(v,x);for(const E in this._updatedSources){const A=this._updatedSources[E];A==="reload"?this._reloadSource(E):A==="clear"&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const p={};for(const v in this._sourceCaches){const x=this._sourceCaches[v];p[v]=x.used,x.used=!1}for(const v of this._order){const x=this._layers[v];if(x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)){const A=this._getLayerSourceCache(x);A&&(A.used=!0)}const E=this.map.painter;if(E){const A=x.getProgramIds();if(!A)continue;const L=x.getProgramConfiguration(i.zoom);for(const z of A)E.useProgram(z,L)}}for(const v in p){const x=this._sourceCaches[v];p[v]!==x.used&&x.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:x.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),ca(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=jn(i.layers);const c=function(v,x){if(!v)return[{command:Kt.setStyle,args:[x]}];let E=[];try{if(!D(v.version,x.version))return[{command:Kt.setStyle,args:[x]}];D(v.center,x.center)||E.push({command:Kt.setCenter,args:[x.center]}),D(v.zoom,x.zoom)||E.push({command:Kt.setZoom,args:[x.zoom]}),D(v.bearing,x.bearing)||E.push({command:Kt.setBearing,args:[x.bearing]}),D(v.pitch,x.pitch)||E.push({command:Kt.setPitch,args:[x.pitch]}),D(v.sprite,x.sprite)||E.push({command:Kt.setSprite,args:[x.sprite]}),D(v.glyphs,x.glyphs)||E.push({command:Kt.setGlyphs,args:[x.glyphs]}),D(v.transition,x.transition)||E.push({command:Kt.setTransition,args:[x.transition]}),D(v.light,x.light)||E.push({command:Kt.setLight,args:[x.light]}),D(v.fog,x.fog)||E.push({command:Kt.setFog,args:[x.fog]}),D(v.projection,x.projection)||E.push({command:Kt.setProjection,args:[x.projection]});const A={},L=[];(function(U,X,ne,Y){let W;for(W in X=X||{},U=U||{})U.hasOwnProperty(W)&&(X.hasOwnProperty(W)||zn(W,ne,Y));for(W in X)X.hasOwnProperty(W)&&(U.hasOwnProperty(W)?D(U[W],X[W])||(U[W].type==="geojson"&&X[W].type==="geojson"&&nr(U,X,W)?ne.push({command:Kt.setGeoJSONSourceData,args:[W,X[W].data]}):ko(W,X,ne,Y)):Yn(W,X,ne))})(v.sources,x.sources,L,A);const z=[];v.layers&&v.layers.forEach(U=>{U.source&&A[U.source]?E.push({command:Kt.removeLayer,args:[U.id]}):z.push(U)});let N=v.terrain;N&&A[N.source]&&(E.push({command:Kt.setTerrain,args:[void 0]}),N=void 0),E=E.concat(L),D(N,x.terrain)||E.push({command:Kt.setTerrain,args:[x.terrain]}),function(U,X,ne){X=X||[];const Y=(U=U||[]).map(Un),W=X.map(Un),fe=U.reduce(Ln,{}),ae=X.reduce(Ln,{}),ue=Y.slice(),he=Object.create(null);let ye,ce,we,Ve,tt,ut,st;for(ye=0,ce=0;ye<Y.length;ye++)we=Y[ye],ae.hasOwnProperty(we)?ce++:(ne.push({command:Kt.removeLayer,args:[we]}),ue.splice(ue.indexOf(we,ce),1));for(ye=0,ce=0;ye<W.length;ye++)we=W[W.length-1-ye],ue[ue.length-1-ye]!==we&&(fe.hasOwnProperty(we)?(ne.push({command:Kt.removeLayer,args:[we]}),ue.splice(ue.lastIndexOf(we,ue.length-ce),1)):ce++,ut=ue[ue.length-ye],ne.push({command:Kt.addLayer,args:[ae[we],ut]}),ue.splice(ue.length-ye,0,we),he[we]=!0);for(ye=0;ye<W.length;ye++)if(we=W[ye],Ve=fe[we],tt=ae[we],!he[we]&&!D(Ve,tt))if(D(Ve.source,tt.source)&&D(Ve["source-layer"],tt["source-layer"])&&D(Ve.type,tt.type)){for(st in zt(Ve.layout,tt.layout,ne,we,null,Kt.setLayoutProperty),zt(Ve.paint,tt.paint,ne,we,null,Kt.setPaintProperty),D(Ve.filter,tt.filter)||ne.push({command:Kt.setFilter,args:[we,tt.filter]}),D(Ve.minzoom,tt.minzoom)&&D(Ve.maxzoom,tt.maxzoom)||ne.push({command:Kt.setLayerZoomRange,args:[we,tt.minzoom,tt.maxzoom]}),Ve)Ve.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?zt(Ve[st],tt[st],ne,we,st.slice(6),Kt.setPaintProperty):D(Ve[st],tt[st])||ne.push({command:Kt.setLayerProperty,args:[we,st,tt[st]]}));for(st in tt)tt.hasOwnProperty(st)&&!Ve.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&(st.indexOf("paint.")===0?zt(Ve[st],tt[st],ne,we,st.slice(6),Kt.setPaintProperty):D(Ve[st],tt[st])||ne.push({command:Kt.setLayerProperty,args:[we,st,tt[st]]}))}else ne.push({command:Kt.removeLayer,args:[we]}),ut=ue[ue.lastIndexOf(we)+1],ne.push({command:Kt.addLayer,args:[tt,ut]})}(z,x.layers,E)}catch(A){console.warn("Unable to compute style diff:",A),E=[{command:Kt.setStyle,args:[x]}]}return E}(this.serialize(),i).filter(v=>!(v.command in vh));if(c.length===0)return!1;const p=c.filter(v=>!(v.command in Pl));if(p.length>0)throw new Error(`Unimplemented: ${p.map(v=>v.command).join(", ")}.`);return c.forEach(v=>{v.command!=="setTransition"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,c){return this.getImage(i)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,c),this._afterImageUpdated(i),this)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,c,p={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.validateSource,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=Ne(i,c,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:v.serialize(),sourceId:i}));const x=E=>{const A=(E?"symbol:":"other:")+i,L=this._sourceCaches[A]=new s.SourceCache(A,v,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[i]=L,L.style=this,L.onAdd(this.map)};x(!1),c.type!=="vector"&&c.type!=="geojson"||x(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const c=this.getSource(i);if(!c)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this._getSourceCaches(i);for(const v of p)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,c){this._checkLoaded(),this.getSource(i).setData(c),this._changed=!0}getSource(i){const c=this._getSourceCache(i);return c&&c.getSource()}addLayer(i,c,p={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let x;if(i.type==="custom"){if(ca(this,s.validateCustomStyleLayer(i)))return;x=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=s.clone$1(i),i=s.extend(i,{source:v})),this._validate(s.validateLayer,`layers.${v}`,i,{arrayIndex:-1},p))return;x=s.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize(),this._updateLayerCount(x,!0)}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=x;const A=this._getLayerSourceCache(x);if(this._removedLayers[v]&&x.source&&A&&x.type!=="custom"){const L=this._removedLayers[v];delete this._removedLayers[v],L.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",A.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const c in this._layers)if(this._layers[c].type===i)return!0;return!1}setLayerZoomRange(i,c,p){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===p||(c!=null&&(v.minzoom=c),p!=null&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,c,p={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!D(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.validateFilter,`layers.${v.id}.filter`,c,{layerType:v.type},p)||(v.filter=s.clone$1(c),this._updateLayer(v)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const c=this.getLayer(i);return c&&s.clone$1(c.filter)}setLayoutProperty(i,c,p,v={}){this._checkLoaded();const x=this.getLayer(i);x?D(x.getLayoutProperty(c),p)||(x.setLayoutProperty(c,p,v),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,c,p,v={}){this._checkLoaded();const x=this.getLayer(i);x?D(x.getPaintProperty(c),p)||(x.setPaintProperty(c,p,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,c){const p=this.getLayer(i);return p&&p.getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,v=i.sourceLayer,x=this.getSource(p);if(!x)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const E=x.type;if(E==="geojson"&&v)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!v)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(p);for(const L of A)L.setFeatureState(v,i.id,c)}removeFeatureState(i,c){this._checkLoaded();const p=i.source,v=this.getSource(p);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const x=v.type,E=x==="vector"?i.sourceLayer:void 0;if(x==="vector"&&!E)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(p);for(const L of A)L.removeFeatureState(E,i.id,c)}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,v=this.getSource(c);if(v){if(v.type!=="vector"||p)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(p,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const c in this._sourceCaches){const p=this._sourceCaches[c].getSource();i[p.id]||(i[p.id]=p.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const c=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&c&&c.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",c.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",p={},v=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(c(A)){p[A]=E;for(const L of i){const z=L[A];if(z)for(const N of z)v.push(N)}}}v.sort((E,A)=>A.intersectionZ-E.intersectionZ);const x=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(c(A))for(let L=v.length-1;L>=0;L--){const z=v[L].feature;if(p[z.layer.id]<E)break;x.push(z),v.pop()}else for(const L of i){const z=L[A];if(z)for(const N of z)x.push(N.feature)}}return x}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of c.layers){const z=this._layers[L];if(!z)return this.fire(new s.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];v[z.source]=!0}}const x=[];c.availableImages=this._availableImages;const E=c&&c.layers?c.layers.some(L=>{const z=this.getLayer(L);return z&&z.is3D()}):this.has3DLayers(),A=Fe.createFromScreenPoints(i,p);for(const L in this._sourceCaches){const z=this._sourceCaches[L].getSource().id;c.layers&&!v[z]||x.push(je(this._sourceCaches[L],this._layers,this._serializedLayers,A,c,p,E,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(L,z,N,U,X,ne,Y){const W={},fe=ne.queryRenderedSymbols(U),ae=[];for(const ue of Object.keys(fe).map(Number))ae.push(Y[ue]);ae.sort(Pt);for(const ue of ae){const he=ue.featureIndex.lookupSymbolFeatures(fe[ue.bucketInstanceId],z,ue.bucketIndex,ue.sourceLayerIndex,X.filter,X.layers,X.availableImages,L);for(const ye in he){const ce=W[ye]=W[ye]||[],we=he[ye];we.sort((Ve,tt)=>{const ut=ue.featureSortOrder;if(ut){const st=ut.indexOf(Ve.featureIndex);return ut.indexOf(tt.featureIndex)-st}return tt.featureIndex-Ve.featureIndex});for(const Ve of we)ce.push(Ve)}}for(const ue in W)W[ue].forEach(he=>{const ye=he.feature,ce=N(L[ue]).getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=ce});return W}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",c.filter,null,c);const p=this._getSourceCaches(i);let v=[];for(const x of p)v=v.concat(_t(x,c));return v}addSourceType(i,c,p){return ir.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(ir.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const E in i)if(!D(i[E],p[E])){v=!0;break}if(!v)return;const x={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,c=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(c===1){if(typeof i.source=="object"){const p="terrain-dem-src";this.addSource(p,i.source),i=s.clone$1(i),i=s.extend(i,{source:p})}if(this._validate(s.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode)this._createTerrain(i,c);else{const p=this.terrain,v=p.get();for(const x in i)if(!D(i[x],v[x])){p.set(i),this.stylesheet.terrain=i;const E={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};p.updateTransitions(E);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const c=this.fog=new hn(i,this.map.transform);this.stylesheet.fog=i;const p={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(p)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,p=c.get();for(const v in i)if(!D(i[v],p[v])){c.set(i),this.stylesheet.fog=i;const x={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(x);break}}else this._createFog(i);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(p=>this.isLayerDraped(this._layers[p])),c=this._order.filter(p=>!this.isLayerDraped(this._layers[p]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...c)}_createTerrain(i,c){const p=this.terrain=new Ye(i,c);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};p.updateTransitions(v)}_force3DLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="symbol"&&this._updateLayer(c)}}_validate(i,c,p,v,x={}){return(!x||x.validate!==!1)&&ca(this,i.call(s.validateStyle,s.extend({key:c,style:this.serialize(),value:p,styleSpec:s.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const c=this._getSourceCaches(i);for(const p of c)p.clearTiles()}_reloadSource(i){const c=this._getSourceCaches(i);for(const p of c)p.resume(),p.reload()}_updateSources(i){for(const c in this._sourceCaches)this._sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const c=this._sourceCaches[i];c.resume(),c.reload()}}_updatePlacement(i,c,p,v,x=!1){let E=!1,A=!1;const L={};for(const z of this._order){const N=this._layers[z];if(N.type!=="symbol")continue;if(!L[N.source]){const X=this._getLayerSourceCache(N);if(!X)continue;L[N.source]=X.getRenderableIds(!0).map(ne=>X.getTileByID(ne)).sort((ne,Y)=>Y.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(Y.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(N,L[N.source],i.center.lng,i.projection);E=E||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),x=x||this._layerOrderChanged||p===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(x||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new Yf(i,this._order,x,c,p,v,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),A=!0),E&&this.pauseablePlacement.placement.setStale()),A||E)for(const z of this._order){const N=this._layers[z];N.type==="symbol"&&this.placement.updateLayerOpacities(N,L[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const v=x=>{x&&x.setDependencies(c.tileID.key,c.type,c.icons)};v(this._otherSourceCaches[c.source]),v(this._symbolSourceCaches[c.source])}getGlyphs(i,c,p){this.glyphManager.getGlyphs(c.stacks,p)}getResource(i,c,p){return s.makeRequest(c,p)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const c=[];return this._otherSourceCaches[i]&&c.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&c.push(this._symbolSourceCaches[i]),c}_isSourceCacheLoaded(i){const c=this._getSourceCaches(i);return c.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):c.every(p=>p.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ir.getSourceType=function(f){return $e[f]},ir.setSourceType=function(f,i){$e[f]=i},ir.registerForPluginStateChange=s.registerForPluginStateChange;var es=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}
#endif`,Fs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let $s={},ws={};$s=mn("",`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
float unpack_depth(vec4 rgba_depth)
{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,!0),ws=mn(`#ifdef FOG
uniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,`#ifdef FOG
uniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,!0);const Dl=mn(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef TERRAIN
highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#endif`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ya=es;var Ka={background:mn(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:mn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:mn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)
view_scale*=a_scale;
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
extrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:mn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:mn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:mn(`varying vec4 v_color;void main() {vec4 color=v_color;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
vec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:mn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
vec4 out_color=texture2D(u_gradient_image,v_uv);
#else
vec4 out_color=color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#ifdef RENDER_LINE_GRADIENT
attribute vec3 a_packed;
#else
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_GRADIENT
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:mn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:mn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
}`),terrainDepth:mn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:mn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fs),skyboxGradient:mn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fs),skyboxCapture:mn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:mn(`uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
vec4 globe=u_globe_matrix*vec4(globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}`),globeAtmosphere:mn(`uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;varying highp vec3 v_ray_dir;void main() {highp vec3 dir=normalize(v_ray_dir);highp vec3 closest_point=abs(dot(u_globe_pos,dir))*dir;float norm_dist_from_center=length(closest_point-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 1.0)
discard;float t=clamp(1.0-sqrt(norm_dist_from_center-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}`,"attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;varying highp vec3 v_ray_dir;void main() {v_ray_dir=mix(mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);gl_Position=vec4(a_pos,1.0);}")};function mn(f,i,c){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,x=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E=f.match(v),A=i.match(v),L=es.match(v);let z=A?A.concat(E):E;c||($s.staticUniforms&&(z=$s.staticUniforms.concat(z)),ws.staticUniforms&&(z=ws.staticUniforms.concat(z))),z&&(z=z.concat(L));const N={};return{fragmentSource:f=f.replace(p,(U,X,ne,Y,W)=>(N[W]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${ne} ${Y} ${W};
#else
uniform ${ne} ${Y} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${ne} ${Y} ${W} = u_${W};
#endif
`)),vertexSource:i=i.replace(p,(U,X,ne,Y,W)=>{const fe=Y==="float"?"vec2":"vec4",ae=W.match(/color/)?"color":fe;return N[W]?X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${ne} ${fe} a_${W};
varying ${ne} ${Y} ${W};
#else
uniform ${ne} ${Y} u_${W};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${ne} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ae}(a_${W}, u_${W}_t);
#else
    ${ne} ${Y} ${W} = u_${W};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${ne} ${fe} a_${W};
#else
uniform ${ne} ${Y} u_${W};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${ne} ${Y} ${W} = a_${W};
#else
    ${ne} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${ne} ${Y} ${W} = unpack_mix_${ae}(a_${W}, u_${W}_t);
#else
    ${ne} ${Y} ${W} = u_${W};
#endif
`}),staticAttributes:x,staticUniforms:z}}class Ol{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,v,x,E,A,L){this.context=i;let z=this.boundPaintVertexBuffers.length!==v.length;for(let N=0;!z&&N<v.length;N++)this.boundPaintVertexBuffers[N]!==v[N]&&(z=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===p&&!z&&this.boundIndexBuffer===x&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===A&&this.boundDynamicVertexBuffer2===L?(i.bindVertexArrayOES.set(this.vao),A&&A.bind(),x&&x.dynamicDraw&&x.bind(),L&&L.bind()):this.freshBind(c,p,v,x,E,A,L)}freshBind(i,c,p,v,x,E,A){let L;const z=i.numAttributes,N=this.context,U=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=A;else{L=N.currentNumAttributes||0;for(let X=z;X<L;X++)U.disableVertexAttribArray(X)}c.enableAttributes(U,i);for(const X of p)X.enableAttributes(U,i);E&&E.enableAttributes(U,i),A&&A.enableAttributes(U,i),c.bind(),c.setVertexAttribPointers(U,i,x);for(const X of p)X.bind(),X.setVertexAttribPointers(U,i,x);E&&(E.bind(),E.setVertexAttribPointers(U,i,x)),v&&v.bind(),A&&(A.bind(),A.setVertexAttribPointers(U,i,x)),N.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function xh(f,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new s.MercatorCoordinate(0,p/c).toLngLat().lat,new s.MercatorCoordinate(0,(p+1)/c).toLngLat().lat]}function zr(f,i,c,p,v,x,E){const A=f.context,L=A.gl,z=c.fbo;if(!z)return;f.prepareDrawTile();const N=f.useProgram("hillshade");A.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,z.colorAttachment.get());const U=((W,fe,ae,ue)=>{const he=ae.paint.get("hillshade-shadow-color"),ye=ae.paint.get("hillshade-highlight-color"),ce=ae.paint.get("hillshade-accent-color");let we=ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(we-=W.transform.angle);const Ve=!W.options.moving;return{u_matrix:ue||W.transform.calculateProjMatrix(fe.tileID.toUnwrapped(),Ve),u_image:0,u_latrange:xh(0,fe.tileID),u_light:[ae.paint.get("hillshade-exaggeration"),we],u_shadow:he,u_highlight:ye,u_accent:ce}})(f,c,p,f.terrain?i.projMatrix:null);f.prepareDrawProgram(A,N,i.toUnwrapped());const{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:Y}=f.getTileBoundsBuffers(c);N.draw(A,L.TRIANGLES,v,x,E,s.CullFaceMode.disabled,U,p.id,X,ne,Y)}function zl(f,i,c){if(!i.needsDEMTextureUpload)return;const p=f.context,v=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(c.stride);const x=c.getPixels();i.demTexture?i.demTexture.update(x,{premultiply:!1}):i.demTexture=new s.Texture(p,x,v.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Rl(f,i,c,p,v,x){const E=f.context,A=E.gl;if(!i.dem)return;const L=i.dem;if(E.activeTexture.set(A.TEXTURE1),zl(f,i,L),!i.demTexture)return;i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const z=L.dim;E.activeTexture.set(A.TEXTURE0);let N=i.fbo;if(!N){const Y=new s.Texture(E,{width:z,height:z,data:null},A.RGBA);Y.bind(A.LINEAR,A.CLAMP_TO_EDGE),N=i.fbo=E.createFramebuffer(z,z,!0),N.colorAttachment.set(Y.texture)}E.bindFramebuffer.set(N.framebuffer),E.viewport.set([0,0,z,z]);const{tileBoundsBuffer:U,tileBoundsIndexBuffer:X,tileBoundsSegments:ne}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(E,A.TRIANGLES,p,v,x,s.CullFaceMode.disabled,((Y,W)=>{const fe=W.stride,ae=s.create();return s.ortho(ae,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ae,ae,[0,-s.EXTENT,0]),{u_matrix:ae,u_image:1,u_dimension:[fe,fe],u_zoom:Y.overscaledZ,u_unpack:W.unpackVector}})(i.tileID,L),c.id,U,X,ne),i.needsHillshadePrepare=!1}const Ja=(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image0:new s.Uniform1i(f,i.u_image0),u_skirt_height:new s.Uniform1f(f,i.u_skirt_height)}),bh=(f,i)=>({u_matrix:f,u_image0:0,u_skirt_height:i}),wh=(f,i,c,p,v,x)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:i,u_merc_matrix:c,u_zoom_transition:p,u_merc_center:v,u_image0:0,u_grid_matrix:x?Float32Array.from(x):new Float32Array(9)});function Qa(f,i){return f!=null&&i!=null&&!(!f.hasData()||!i.hasData())&&f.demTexture!=null&&i.demTexture!=null&&f.tileID.key!==i.tileID.key}const ts=new class{constructor(){this.operations={}}newMorphing(f,i,c,p,v){if(f in this.operations){const x=this.operations[f];x.to.tileID.key!==c.tileID.key&&(x.queued=c)}else this.operations[f]={startTime:p,phase:0,duration:v,from:i,to:c,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const c=this.operations[i];for(c.phase=(f-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},Us={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function tu(f,i){const c=1<<f.z;return!i&&(f.x===0||f.x===c-1)||f.y===0||f.y===c-1}const Nl=f=>({u_matrix:f});function Bl(f,i,c,p,v){if(v>0){const x=s.exported.now(),E=(x-f.timeAdded)/v,A=i?(x-i.timeAdded)/v:-1,L=c.getSource(),z=p.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),N=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(f.tileID.overscaledZ-z),U=N&&f.refreshedUponExpiration?1:s.clamp(N?E:1-A,0,1);return f.refreshedUponExpiration&&E>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}const Eh=2*s.mercatorZfromAltitude(1,0)*s.GLOBE_RADIUS*Math.PI;class ua extends s.SourceCache{constructor(i){const c={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new Gt(gn(),null),v=Ne("mock-dem",c,p,i.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,c){i.state="loaded",c(null)}}class ha extends s.SourceCache{constructor(i){const c=Ne("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new Gt(gn(),null),i.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,c,p){if(i.freezeTileCoverage)return;this.transform=i;const v=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,E)=>{if(x[E.key]="",!this._tiles[E.key]){const A=new s.Tile(E,this._source.tileSize*E.overscaleFactor(),i.tileZoom);A.state="loaded",this._tiles[E.key]=A}return x},{});for(const x in this._tiles)x in v||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(i){const c=this.proxyCachedFBO[i];if(c!==void 0){const p=Object.values(c);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fl extends s.OverscaledTileID{constructor(i,c,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=c,this.projMatrix=p}}class Rr extends s.Elevation{constructor(i,c){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,v,x]=function(L){const z=new s.StructArrayLayout4i8,N=new s.StructArrayLayout3ui6,U=131;z.reserve(17161),N.reserve(33800);const X=s.EXTENT/128,ne=s.EXTENT+X/2,Y=ne+X;for(let fe=-X;fe<Y;fe+=X)for(let ae=-X;ae<Y;ae+=X){const ue=ae<0||ae>ne||fe<0||fe>ne?24575:0,he=s.clamp(Math.round(ae),0,s.EXTENT),ye=s.clamp(Math.round(fe),0,s.EXTENT);z.emplaceBack(he+ue,ye,he,ye)}const W=(fe,ae)=>{const ue=ae*U+fe;N.emplaceBack(ue+1,ue,ue+U),N.emplaceBack(ue+U,ue+U+1,ue+1)};for(let fe=1;fe<129;fe++)for(let ae=1;ae<129;ae++)W(ae,fe);return[0,129].forEach(fe=>{for(let ae=0;ae<130;ae++)W(ae,fe),W(fe,ae)}),[z,N,32768]}(),E=i.context;this.gridBuffer=E.createVertexBuffer(p,s.boundsAttributes.members),this.gridIndexBuffer=E.createIndexBuffer(v),this.gridSegments=s.SegmentVector.simpleSegment(0,0,p.length,v.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,p.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ha(c.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,0,s.EXTENT,0,s.EXTENT,0,1);const A=E.gl;this._overlapStencilMode=new s.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ua(c.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,c,p){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const v=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const x=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const E=this.getScaledDemTileSize();this.sourceCache.update(c,E,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,x(),this._initializing=!0),x(),c.updateElevation(!p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=p._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(p.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=c.getIds().map(L=>{const z=c.getTileByID(L).tileID;return z.projMatrix=p.calculateProjMatrix(z.toUnwrapped()),z});(function(L,z){const N=z.transform.pointCoordinate(z.transform.getCameraPoint()),U=new s.pointGeometry(N.x,N.y);L.sort((X,ne)=>{if(ne.overscaledZ-X.overscaledZ)return ne.overscaledZ-X.overscaledZ;const Y=new s.pointGeometry(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),W=new s.pointGeometry(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),fe=U.mult(1<<X.canonical.z);return fe.x-=.5,fe.y-=.5,fe.distSqr(Y)-fe.distSqr(W)})})(v,this.painter),this._previousZoom=p.zoom;const x=this.proxyToSource||{};this.proxyToSource={},v.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const E=this._style._sourceCaches;for(const L in E){const z=E[L];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,i[L],x),z.usedForTerrain))continue;const N=i[L];z.getSource().reparseOverscaled&&this._assignTerrainTiles(N)}this.proxiedCoords[c.id]=v.map(L=>new Fl(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const A={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const z=this.terrainTileForTile[L.key];if(!z)continue;const N=z.tileID.key;N in A||(this._visibleDemTiles.push(z),A[N]=N)}}_assignTerrainTiles(i){this._initializing||i.forEach(c=>{if(this.terrainTileForTile[c.key])return;const p=this._findTileCoveringTileID(c,this.sourceCache);p&&(this.terrainTileForTile[c.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,c=i.gl;for(const p in this.terrainTileForTile){const v=this.terrainTileForTile[p],x=v.dem;!x||v.demTexture&&!v.needsDEMTextureUpload||(i.activeTexture.set(c.TEXTURE1),zl(this.painter,v,x))}}_prepareDemTileUniforms(i,c,p,v){if(!c||c.demTexture==null)return!1;const x=i.tileID.canonical,E=Math.pow(2,c.tileID.canonical.z-x.z),A=v||"";return p[`u_dem_tl${A}`]=[x.x*E%1,x.y*E%1],p[`u_dem_scale${A}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,c=i.gl;if(!this._emptyDepthBufferTexture){const p=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(i,p,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const c=this._visibleDemTiles.reduce((p,v)=>{if(!v.dem)return p;const x=v.dem.tree.minimums[0];return x>0&&i++,p+x},0);return i?c/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,c=i.gl;i.activeTexture.set(c.TEXTURE2);const p=this._getLoadedAreaMinimum(),v=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(p,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(v,{premultiply:!1}):x=this._emptyDEMTexture=new s.Texture(i,v,c.RGBA,{premultiply:!1}),x}setupElevationDraw(i,c,p){const v=this.painter.context,x=v.gl,E=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var A;E.u_dem_size=this.sourceCache.getSource().tileSize,E.u_exaggeration=this.exaggeration();const L=this.painter.transform,z=L.projection,N=i.tileID.canonical;E.u_tile_tl_up=z.upVector(N,0,0),E.u_tile_tr_up=z.upVector(N,s.EXTENT,0),E.u_tile_br_up=z.upVector(N,s.EXTENT,s.EXTENT),E.u_tile_bl_up=z.upVector(N,0,s.EXTENT),E.u_tile_up_scale=p&&p.useDenormalizedUpVectorScale?Eh:z.upVectorScale(N,L.center.lat,L.worldSize).metersToTile;let U=null,X=null,ne=1;if(p&&p.morphing&&this._useVertexMorphing){const Y=p.morphing.srcDemTile,W=p.morphing.dstDemTile;ne=p.morphing.phase,Y&&W&&(this._prepareDemTileUniforms(i,Y,E,"_prev")&&(X=Y),this._prepareDemTileUniforms(i,W,E)&&(U=W))}if(X&&U?(v.activeTexture.set(x.TEXTURE2),U.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),v.activeTexture.set(x.TEXTURE4),X.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),E.u_dem_lerp=ne):(U=this.terrainTileForTile[i.tileID.key],v.activeTexture.set(x.TEXTURE2),(this._prepareDemTileUniforms(i,U,E)?U.demTexture:this.emptyDEMTexture).bind(x.NEAREST,x.CLAMP_TO_EDGE)),v.activeTexture.set(x.TEXTURE3),p&&p.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),p&&p.useMeterToDem&&U){const Y=(1<<U.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=Y}p&&p.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),c.setTerrainUniformValues(v,E)}renderToBackBuffer(i){const c=this.painter,p=this.painter.context;i.length!==0&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),this.renderingToTexture=!1,function(v,x,E,A,L){if(v.transform.projection.name==="globe")(function(z,N,U,X,ne){const Y=z.context,W=Y.gl;let fe,ae;const ue=z.options.showTerrainWireframe?2:0,he=(st,Dt)=>{if(ae===st)return;const Ge=[Us[st],"PROJECTION_GLOBE_VIEW"];Dt&&Ge.push(Us[ue]),fe=z.useProgram("globeRaster",null,Ge),ae=st},ye=z.colorModeForRenderPass(),ce=new s.DepthMode(W.LEQUAL,s.DepthMode.ReadWrite,z.depthRangeFor3D);ts.update(ne);const we=z.transform,Ve=s.calculateGlobeMercatorMatrix(we),tt=[s.mercatorXfromLng(we.center.lng),s.mercatorYfromLat(we.center.lat)],ut=z.globeSharedBuffers;if((ue?[!1,!0]:[!1]).forEach(st=>{ae=-1;const Dt=st?W.LINES:W.TRIANGLES;for(const Ge of X){const Ot=U.getTile(Ge),Mt=s.StencilMode.disabled,nn=N.prevTerrainTileForTile[Ge.key],ft=N.terrainTileForTile[Ge.key];Qa(nn,ft)&&ts.newMorphing(Ge.key,nn,ft,ne,250),Y.activeTexture.set(W.TEXTURE0),Ot.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const Jt=ts.getMorphValuesForProxy(Ge.key),yn=Jt?1:0,en={useDenormalizedUpVectorScale:!0};Jt&&s.extend$1(en,{morphing:{srcDemTile:Jt.from,dstDemTile:Jt.to,phase:s.easeCubicInOut(Jt.phase)}});const tn=Float32Array.from(we.globeMatrix),xn=s.globeTileLatLngCorners(Ge.canonical),Bn=s.getGridMatrix(Ge.canonical,xn),_n=wh(we.projMatrix,tn,Ve,s.globeToMercatorTransition(we.zoom),tt,Bn);if(he(yn,st),N.setupElevationDraw(Ot,fe,en),z.prepareDrawProgram(Y,fe,Ge.toUnwrapped()),ut){const[wn,ii,Bi]=st?ut.getWirefameBuffers(z.context):ut.getGridBuffers();fe.draw(Y,Dt,ce,Mt,ye,s.CullFaceMode.backCCW,_n,"globe_raster",wn,ii,Bi)}}}),ut){fe=z.useProgram("globeRaster",null,["GLOBE_POLES","PROJECTION_GLOBE_VIEW"]);for(const st of X){const{x:Dt,y:Ge,z:Ot}=st.canonical,Mt=Ge===0,nn=Ge===(1<<Ot)-1,[ft,Jt,yn,en]=ut.getPoleBuffers(Ot);if(en&&(Mt||nn)){const tn=U.getTile(st);Y.activeTexture.set(W.TEXTURE0),tn.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);let xn=s.globePoleMatrixForTile(Ot,Dt,we);const Bn=(_n,wn)=>_n.draw(Y,W.TRIANGLES,ce,s.StencilMode.disabled,ye,s.CullFaceMode.disabled,wh(we.projMatrix,xn,xn,0,tt),"globe_pole_raster",wn,yn,en);N.setupElevationDraw(tn,fe,{}),z.prepareDrawProgram(Y,fe,st.toUnwrapped()),Mt&&Bn(fe,ft),nn&&(xn=s.scale(s.create(),xn,[1,-1,1]),Bn(fe,Jt))}}}})(v,x,E,A,L);else{const z=v.context,N=z.gl;let U,X;const ne=v.options.showTerrainWireframe?2:0,Y=(he,ye)=>{if(X===he)return;const ce=[Us[he]];ye&&ce.push(Us[ne]),U=v.useProgram("terrainRaster",null,ce),X=he},W=v.colorModeForRenderPass(),fe=new s.DepthMode(N.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D);ts.update(L);const ae=v.transform,ue=6*Math.pow(1.5,22-ae.zoom)*x.exaggeration();(ne?[!1,!0]:[!1]).forEach(he=>{X=-1;const ye=he?N.LINES:N.TRIANGLES,[ce,we]=he?x.getWirefameBuffer():[x.gridIndexBuffer,x.gridSegments];for(const Ve of A){const tt=E.getTile(Ve),ut=s.StencilMode.disabled,st=x.prevTerrainTileForTile[Ve.key],Dt=x.terrainTileForTile[Ve.key];Qa(st,Dt)&&ts.newMorphing(Ve.key,st,Dt,L,250),z.activeTexture.set(N.TEXTURE0),tt.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);const Ge=ts.getMorphValuesForProxy(Ve.key),Ot=Ge?1:0;let Mt;Ge&&(Mt={morphing:{srcDemTile:Ge.from,dstDemTile:Ge.to,phase:s.easeCubicInOut(Ge.phase)}});const nn=bh(Ve.projMatrix,tu(Ve.canonical,ae.renderWorldCopies)?ue/10:ue);Y(Ot,he),x.setupElevationDraw(tt,U,Mt),v.prepareDrawProgram(z,U,Ve.toUnwrapped()),U.draw(z,ye,fe,ut,W,s.CullFaceMode.backCCW,nn,"terrain_raster",x.gridBuffer,ce,we)}})}}(c,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const c=this.painter,p=this.painter.context,v=this.proxySourceCache,x=this.proxiedCoords[v.id],E=this._drapedRenderBatches.shift(),A=[],L=c.style.order;let z=0;for(const N of x){const U=v.getTileByID(N.proxyTileKey),X=v.proxyCachedFBO[N.key]?v.proxyCachedFBO[N.key][i]:void 0,ne=X!==void 0?v.renderCache[X]:this.pool[z++],Y=X!==void 0;if(U.texture=ne.tex,Y&&!ne.dirty){A.push(U.tileID);continue}let W;p.bindFramebuffer.set(ne.fb.framebuffer),this.renderedToTile=!1,ne.dirty&&(p.clear({color:s.Color.transparent,stencil:0}),ne.dirty=!1);for(let fe=E.start;fe<=E.end;++fe){const ae=c.style._layers[L[fe]];if(ae.isHidden(c.transform.zoom))continue;const ue=c.style._getLayerSourceCache(ae),he=ue?this.proxyToSource[N.key][ue.id]:[N];if(!he)continue;const ye=he;p.viewport.set([0,0,ne.fb.width,ne.fb.height]),W!==(ue?ue.id:null)&&(this._setupStencil(ne,he,ae,ue),W=ue?ue.id:null),c.renderLayer(c,ue,ae,ye)}this.renderedToTile?(ne.dirty=!0,A.push(U.tileID)):Y||--z,z===5&&(z=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),E.end+1}postRender(){}renderCacheEfficiency(i){const c=i.order.length;if(c===0)return{efficiency:100};let p,v=0,x=0,E=!1;for(let A=0;A<c;++A){const L=i._layers[i.order[A]];this._style.isLayerDraped(L)?(E&&++v,++x):E||(E=!0,p=L.id)}return x===0?{efficiency:100}:{efficiency:100*(1-v/x),firstUndrapedLayer:p}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{i=Math.min(i,c.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,c,p){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const E=x.tileID,A=Math.pow(2,E.overscaledZ),{x:L,y:z}=E.canonical,N=L/A,U=(L+1)/A,X=z/A,ne=(z+1)/A;return{minx:N,miny:X,maxx:U,maxy:ne,t:x.dem.tree.raycastRoot(N,X,U,ne,i,c,p),tile:x}});v.sort((x,E)=>(x.t!==null?x.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const x of v){if(x.t==null)return null;const E=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,i,c,p);if(E!=null)return E}return null}_createFBO(){const i=this.painter.context,c=i.gl,p=this.drapeBufferSize;i.activeTexture.set(c.TEXTURE0);const v=new s.Texture(i,{width:p[0],height:p[1],data:null},c.RGBA);v.bind(c.LINEAR,c.CLAMP_TO_EDGE);const x=i.createFramebuffer(p[0],p[1],!1);return x.colorAttachment.set(v.texture),x.depthAttachment=new Wr(i,x.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:x,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const c=this._style._layers[i],p=c.isHidden(this.painter.transform.zoom),v=c.getCrossfadeParameters(),x=!!v&&v.t!==1,E=c.hasTransition();return c.type!=="custom"&&!p&&(x||E)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c]._source instanceof V){i=!0;break}if(i)for(let c=0;c<this._style.order.length;++c){const p=this._style._layers[this._style.order[c]],v=p.isHidden(this.painter.transform.zoom),x=this._style._getLayerSourceCache(p);if(p.type!=="raster"||v||!x)continue;const E=p.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const L=this.proxyToSource[A.key][x.id];if(L)for(const z of L){const N=Bl(x.getTile(z),x.findLoadedParent(z,0),x,this.painter.transform,E);(N.opacity!==1||N.mix!==0)&&this._clearRenderCacheForTile(x.id,z)}}}}_setupDrapedRenderBatches(){const i=this._style.order,c=i.length;if(c===0)return;const p=[];let v,x=0,E=this._style._layers[i[x]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++x<c;)E=this._style._layers[i[x]];for(;x<c;++x){const A=this._style._layers[i[x]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?v===void 0&&(v=x):v!==void 0&&(p.push({start:v,end:x-1}),v=void 0))}v!==void 0&&p.push({start:v,end:x-1}),this._drapedRenderBatches=p}_setupRenderCache(i){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const E=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let A=0;A<E.length;++A){const L=Object.values(E[A]);c.renderCachePool.push(...L)}}return}this._clearRasterFadeFromRenderCache();const p=this.proxyCoords,v=this._tilesDirty;for(let E=p.length-1;E>=0;E--){const A=p[E];if(c.getTileByID(A.key),c.proxyCachedFBO[A.key]!==void 0){const L=i[A.key],z=this.proxyToSource[A.key];let N=0;for(const U in z){const X=z[U],ne=L[U];if(!ne||ne.length!==X.length||X.some((Y,W)=>Y!==ne[W]||v[U]&&v[U].hasOwnProperty(Y.key))){N=-1;break}++N}for(const U in c.proxyCachedFBO[A.key])c.renderCache[c.proxyCachedFBO[A.key][U]].dirty=N<0||N!==Object.values(L).length}}const x=[...this._drapedRenderBatches];x.sort((E,A)=>A.end-A.start-(E.end-E.start));for(const E of x)for(const A of p){if(c.proxyCachedFBO[A.key])continue;let L=c.renderCachePool.pop();L===void 0&&c.renderCache.length<50&&(L=c.renderCache.length,c.renderCache.push(this._createFBO())),L!==void 0&&(c.proxyCachedFBO[A.key]={},c.proxyCachedFBO[A.key][E.start]=L,c.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(i,c,p,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,E=x.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let A;if(p.isTileClipped())A=c.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs.get(i.key)||0),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,c){const p=this.painter,v=this.painter.context,x=v.gl;p._tileClippingMaskIDs.clear(),v.setColorMode(s.ColorMode.disabled),v.setDepthMode(s.DepthMode.disabled);const E=p.useProgram("clippingMask");for(const A of i){const L=--c;p._tileClippingMaskIDs.set(A.key,L),E.draw(v,x.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:x.ALWAYS,mask:0},L,255,x.KEEP,x.KEEP,x.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Nl(A.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const c=this.painter.transform;if(i.x<0||i.x>c.width||i.y<0||i.y>c.height)return null;const p=[i.x,i.y,1,1];s.transformMat4$1(p,p,c.pixelMatrixInverse),s.scale$1(p,p,1/p[3]),p[0]/=c.worldSize,p[1]/=c.worldSize;const v=c._camera.position,x=s.mercatorZfromAltitude(1,c.center.lat),E=[v[0],v[1],v[2]/x,0],A=s.subtract([],p.slice(0,3),E);s.normalize(A,A);const L=this.raycast(E,A,this._exaggeration);return L!==null&&L?(s.scaleAndAdd(E,E,A,L),E[3]=E[2],E[2]*=x,E):null}drawDepth(){const i=this.painter,c=i.context,p=this.proxySourceCache,v=Math.ceil(i.width),x=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===x||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=c.gl,A=c.createFramebuffer(v,x,!0);c.activeTexture.set(E.TEXTURE0);const L=new s.Texture(c,{width:v,height:x,data:null},E.RGBA);L.bind(E.NEAREST,E.CLAMP_TO_EDGE),A.colorAttachment.set(L.texture);const z=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,v,x);A.depthAttachment.set(z),this._depthFBO=A,this._depthTexture=L}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,v,x]),function(E,A,L,z){if(E.transform.projection.name==="globe")return;const N=E.context,U=N.gl;N.clear({depth:1});const X=E.useProgram("terrainDepth"),ne=new s.DepthMode(U.LESS,s.DepthMode.ReadWrite,E.depthRangeFor3D);for(const Y of z){const W=L.getTile(Y),fe=bh(Y.projMatrix,0);A.setupElevationDraw(W,X),X.draw(N,U.TRIANGLES,ne,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,fe,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(i,this,p,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,c,p){if(i.getSource()instanceof Te)return this._setupProxiedCoordsForImageSource(i,c,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const v=this.proxiedCoords[i.id]=[],x=this.proxyCoords;for(let A=0;A<x.length;A++){const L=x[A],z=this._findTileCoveringTileID(L,i);if(z){const N=this._createProxiedId(L,z,p[L.key]&&p[L.key][i.id]);v.push(N),this.proxyToSource[L.key][i.id]=[N]}}let E=!1;for(let A=0;A<c.length;A++){const L=i.getTile(c[A]);if(!L||!L.hasData())continue;const z=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(z&&z.tileID.canonical.z!==L.tileID.canonical.z){const N=this.proxyToSource[z.tileID.key][i.id],U=this._createProxiedId(z.tileID,L,p[z.tileID.key]&&p[z.tileID.key][i.id]);N?N.splice(N.length-1,0,U):this.proxyToSource[z.tileID.key][i.id]=[U],v.push(U),E=!0}}this._sourceTilesOverlap[i.id]=E}_setupProxiedCoordsForImageSource(i,c,p){if(!i.getSource().loaded())return;const v=this.proxiedCoords[i.id]=[],x=this.proxyCoords,E=i.getSource(),A=new s.pointGeometry(E.tileID.x,E.tileID.y)._div(1<<E.tileID.z),L=E.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((N,U)=>(N.min.x=Math.min(N.min.x,U.x-A.x),N.min.y=Math.min(N.min.y,U.y-A.y),N.max.x=Math.max(N.max.x,U.x-A.x),N.max.y=Math.max(N.max.y,U.y-A.y),N),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),z=(N,U)=>{const X=N.wrap+N.canonical.x/(1<<N.canonical.z),ne=N.canonical.y/(1<<N.canonical.z),Y=s.EXTENT/(1<<N.canonical.z),W=U.wrap+U.canonical.x/(1<<U.canonical.z),fe=U.canonical.y/(1<<U.canonical.z);return X+Y<W+L.min.x||X>W+L.max.x||ne+Y<fe+L.min.y||ne>fe+L.max.y};for(let N=0;N<x.length;N++){const U=x[N];for(let X=0;X<c.length;X++){const ne=i.getTile(c[X]);if(!ne||!ne.hasData()||z(U,ne.tileID))continue;const Y=this._createProxiedId(U,ne,p[U.key]&&p[U.key][i.id]),W=this.proxyToSource[U.key][i.id];W?W.push(Y):this.proxyToSource[U.key][i.id]=[Y],v.push(Y)}}}_createProxiedId(i,c,p){let v=this.orthoMatrix;if(p){const x=p.find(E=>E.key===c.tileID.key);if(x)return x}if(c.tileID.key!==i.key){const x=i.canonical.z-c.tileID.canonical.z;let E,A,L;v=s.create();const z=c.tileID.wrap-i.wrap<<i.overscaledZ;x>0?(E=s.EXTENT>>x,A=E*((c.tileID.canonical.x<<x)-i.canonical.x+z),L=E*((c.tileID.canonical.y<<x)-i.canonical.y)):(E=s.EXTENT<<-x,A=s.EXTENT*(c.tileID.canonical.x-(i.canonical.x+z<<-x)),L=s.EXTENT*(c.tileID.canonical.y-(i.canonical.y<<-x))),s.ortho(v,0,E,0,E,0,1),s.translate(v,v,[A,L,0])}return new Fl(c.tileID,i.key,v)}_findTileCoveringTileID(i,c){let p=c.getTile(i);if(p&&p.hasData())return p;const v=this._findCoveringTileCache[c.id],x=v[i.key];if(p=x?c.getTileByID(x):null,p&&p.hasData()||x===null)return p;let E=p?p.tileID:i,A=E.overscaledZ;const L=c.getSource().minzoom,z=[];if(!x){const U=c.getSource().maxzoom;if(i.canonical.z>=U){const X=i.canonical.z-U;c.getSource().reparseOverscaled?(A=Math.max(i.canonical.z+2,c.transform.tileZoom),E=new s.OverscaledTileID(A,i.wrap,U,i.canonical.x>>X,i.canonical.y>>X)):X!==0&&(A=U,E=new s.OverscaledTileID(A,i.wrap,U,i.canonical.x>>X,i.canonical.y>>X))}E.key!==i.key&&(z.push(E.key),p=c.getTile(E))}const N=U=>{z.forEach(X=>{v[X]=U}),z.length=0};for(A-=1;A>=L&&(!p||!p.hasData());A--){p&&N(p.tileID.key);const U=E.calculateScaledKey(A);if(p=c.getTileByID(U),p&&p.hasData())break;const X=v[U];if(X===null)break;X===void 0?z.push(U):p=c.getTileByID(X)}return N(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,c){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(c){let p=0;const v=new s.StructArrayLayout2ui4,x=131;for(let E=1;E<129;E++){for(let A=1;A<129;A++)p=E*x+A,v.emplaceBack(p,p+1),v.emplaceBack(p,p+x),v.emplaceBack(p+1,p+x),E===128&&v.emplaceBack(p+x,p+x+1);v.emplaceBack(p+1,p+1+x)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function $l(f){const i=[];for(let c=0;c<f.length;c++){if(f[c]===null)continue;const p=f[c].split(" ");i.push(p.pop())}return i}class fa{static cacheKey(i,c,p){let v=`${i}${p?p.cacheKey:""}`;for(const x of c)v+=`/${x}`;return v}constructor(i,c,p,v,x,E){const A=i.gl;this.program=A.createProgram();const L=$l(p.staticAttributes),z=v?v.getBinderAttributes():[],N=L.concat(z),U=p.staticUniforms?$l(p.staticUniforms):[],X=v?v.getBinderUniforms():[],ne=U.concat(X),Y=[];for(const ce of ne)Y.indexOf(ce)<0&&Y.push(ce);let W=v?v.defines():[];W=W.concat(E.map(ce=>`#define ${ce}`));const fe=W.concat(`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ya,Dl.fragmentSource,ws.fragmentSource,p.fragmentSource).join(`
`),ae=W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ya,Dl.vertexSource,ws.vertexSource,$s.vertexSource,p.vertexSource).join(`
`),ue=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(ue,fe),A.compileShader(ue),A.attachShader(this.program,ue);const he=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(he,ae),A.compileShader(he),A.attachShader(this.program,he),this.attributes={};const ye={};this.numAttributes=N.length;for(let ce=0;ce<this.numAttributes;ce++)N[ce]&&(A.bindAttribLocation(this.program,ce,N[ce]),this.attributes[N[ce]]=ce);A.linkProgram(this.program),A.deleteShader(he),A.deleteShader(ue);for(let ce=0;ce<Y.length;ce++){const we=Y[ce];if(we&&!ye[we]){const Ve=A.getUniformLocation(this.program,we);Ve&&(ye[we]=Ve)}}this.fixedUniforms=x(i,ye),this.binderUniforms=v?v.getUniforms(i,ye):[],E.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=((ce,we)=>({u_dem:new s.Uniform1i(ce,we.u_dem),u_dem_prev:new s.Uniform1i(ce,we.u_dem_prev),u_dem_unpack:new s.Uniform4f(ce,we.u_dem_unpack),u_dem_tl:new s.Uniform2f(ce,we.u_dem_tl),u_dem_scale:new s.Uniform1f(ce,we.u_dem_scale),u_dem_tl_prev:new s.Uniform2f(ce,we.u_dem_tl_prev),u_dem_scale_prev:new s.Uniform1f(ce,we.u_dem_scale_prev),u_dem_size:new s.Uniform1f(ce,we.u_dem_size),u_dem_lerp:new s.Uniform1f(ce,we.u_dem_lerp),u_exaggeration:new s.Uniform1f(ce,we.u_exaggeration),u_depth:new s.Uniform1i(ce,we.u_depth),u_depth_size_inv:new s.Uniform2f(ce,we.u_depth_size_inv),u_meter_to_dem:new s.Uniform1f(ce,we.u_meter_to_dem),u_label_plane_matrix_inv:new s.UniformMatrix4f(ce,we.u_label_plane_matrix_inv),u_tile_tl_up:new s.Uniform3f(ce,we.u_tile_tl_up),u_tile_tr_up:new s.Uniform3f(ce,we.u_tile_tr_up),u_tile_br_up:new s.Uniform3f(ce,we.u_tile_br_up),u_tile_bl_up:new s.Uniform3f(ce,we.u_tile_bl_up),u_tile_up_scale:new s.Uniform1f(ce,we.u_tile_up_scale)}))(i,ye)),E.indexOf("FOG")!==-1&&(this.fogUniforms=((ce,we)=>({u_fog_matrix:new s.UniformMatrix4f(ce,we.u_fog_matrix),u_fog_range:new s.Uniform2f(ce,we.u_fog_range),u_fog_color:new s.Uniform4f(ce,we.u_fog_color),u_fog_horizon_blend:new s.Uniform1f(ce,we.u_fog_horizon_blend),u_fog_temporal_offset:new s.Uniform1f(ce,we.u_fog_temporal_offset)}))(i,ye))}setTerrainUniformValues(i,c){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)p[v].set(c[v])}}setFogUniformValues(i,c){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in c)p[v].location&&p[v].set(c[v])}}draw(i,c,p,v,x,E,A,L,z,N,U,X,ne,Y,W,fe){const ae=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(v),i.setColorMode(x),i.setCullFace(E);for(const he of Object.keys(this.fixedUniforms))this.fixedUniforms[he].set(A[he]);Y&&Y.setUniforms(i,this.binderUniforms,X,{zoom:ne});const ue={[ae.LINES]:2,[ae.TRIANGLES]:3,[ae.LINE_STRIP]:1}[c];for(const he of U.get()){const ye=he.vaos||(he.vaos={});(ye[L]||(ye[L]=new Ol)).bind(i,this,z,Y?Y.getPaintVertexBuffers():[],N,he.vertexOffset,W,fe),ae.drawElements(c,he.primitiveLength*ue,ae.UNSIGNED_SHORT,he.primitiveOffset*ue*2)}}}function da(f,i,c){const p=1/dn(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,E=x*(c.tileID.canonical.x+c.tileID.wrap*v),A=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[E>>16,A>>16],u_pixel_coord_lower:[65535&E,65535&A]}}const Ul=s.create(),el=(f,i,c,p,v,x,E,A,L)=>{const z=i.style.light,N=z.properties.get("position"),U=[N.x,N.y,N.z],X=s.create$1();z.properties.get("anchor")==="viewport"&&(s.fromRotation(X,-i.transform.angle),s.transformMat3(U,U,X));const ne=z.properties.get("color"),Y=i.transform,W={u_matrix:f,u_lightpos:U,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[ne.r,ne.g,ne.b],u_vertical_gradient:+c,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ul,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return Y.projection.name==="globe"&&(W.u_tile_id=[v.canonical.x,v.canonical.y,1<<v.canonical.z],W.u_zoom_transition=E,W.u_inv_rot_matrix=L,W.u_merc_center=A,W.u_up_dir=Y.projection.upVector(new s.CanonicalTileID(0,0,0),A[0]*s.EXTENT,A[1]*s.EXTENT),W.u_height_lift=x),W},tl=(f,i,c,p,v,x,E,A,L,z,N)=>{const U=el(f,i,c,p,v,A,L,z,N),X={u_height_factor:-Math.pow(2,v.overscaledZ)/E.tileSize/8};return s.extend(U,da(x,i,E),X)},nl=f=>({u_matrix:f}),il=(f,i,c,p)=>s.extend(nl(f),da(c,i,p)),rl=(f,i)=>({u_matrix:f,u_world:i}),jl=(f,i,c,p,v)=>s.extend(il(f,i,c,p),{u_world:v}),Es=s.create(),js=(f,i,c,p,v,x)=>{const E=f.transform,A=E.projection.name==="globe";let L;if(x.paint.get("circle-pitch-alignment")==="map")if(A){const N=s.globePixelsToTileUnits(E.zoom,i.canonical);L=Float32Array.from([N,0,0,N])}else L=E.calculatePixelsToTileUnitsMatrix(c);else L=new Float32Array([E.pixelsToGLUnits[0],0,0,E.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:E.cameraToCenterDistance,u_matrix:f.translatePosMatrix(i.projMatrix,c,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:Es,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return A&&(z.u_inv_rot_matrix=p,z.u_merc_center=v,z.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],z.u_zoom_transition=s.globeToMercatorTransition(E.zoom),z.u_up_dir=E.projection.upVector(i.canonical,v[0],v[1])),z},Th=f=>{const i=[];return f.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},Kf=(f,i,c)=>{const p=s.EXTENT/c.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/p,i.pixelsToGLUnits[1]/p]}},nu=(f,i,c=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:c}),Ah=s.create(),Sh=(f,i,c,p,v,x,E)=>{const A=f.transform,L=A.projection.name==="globe",z=L?s.globePixelsToTileUnits(A.zoom,i.canonical):dn(c,1,x),N={u_matrix:i.projMatrix,u_extrude_scale:z,u_intensity:E,u_inv_rot_matrix:Ah,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return L&&(N.u_inv_rot_matrix=p,N.u_merc_center=v,N.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],N.u_zoom_transition=s.globeToMercatorTransition(A.zoom),N.u_up_dir=A.projection.upVector(i.canonical,v[0],v[1])),N},Ts=(f,i,c,p,v,x,E)=>{const A=f.transform,L=A.calculatePixelsToTileUnitsMatrix(i),z={u_matrix:Vs(f,i,c,v),u_pixels_to_tile_units:L,u_device_pixel_ratio:E,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(ru(c)){const N=Vl(i,f.transform);z.u_texsize=i.lineAtlasTexture.size,z.u_scale=[N,p.fromScale,p.toScale],z.u_mix=p.t}return z},iu=(f,i,c,p,v,x)=>{const E=f.transform,A=Vl(i,E);return{u_matrix:Vs(f,i,c,v),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:E.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:x,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Vl(f,i){return 1/dn(f,1,i.tileZoom)}function Vs(f,i,c,p){return f.translatePosMatrix(p||i.tileID.projMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function ru(f){const i=f.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const ou=(f,i,c,p,v,x)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:c,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(A=v.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(E=v.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Gl(v.paint.get("raster-hue-rotate")),u_perspective_transform:x};var E,A};function Gl(f){f*=Math.PI/180;const i=Math.sin(f),c=Math.cos(f);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const As=s.create(),su=(f,i,c,p,v,x,E,A,L,z,N,U,X,ne)=>{const Y=v.transform,W={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_rotate_symbol:+c,u_aspect_ratio:Y.width/Y.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:A,u_is_text:+L,u_pitch_with_map:+p,u_texsize:z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:As,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:As};return Y.projection.name==="globe"&&(W.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],W.u_zoom_transition=U,W.u_inv_rot_matrix=ne,W.u_merc_center=X,W.u_camera_forward=Y._camera.forward(),W.u_ecef_origin=s.globeECEFOrigin(Y.globeMatrix,N.toUnwrapped()),W.u_tile_matrix=Float32Array.from(Y.globeMatrix)),W},Gs=(f,i,c,p,v,x,E,A,L,z,N,U,X,ne,Y)=>{const{cameraToCenterDistance:W,_pitch:fe}=v.transform;return s.extend(su(f,i,c,p,v,x,E,A,L,z,U,X,ne,Y),{u_gamma_scale:p?W*Math.cos(v.terrain?0:fe):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+N})},pa=(f,i,c,p,v,x,E,A,L,z,N,U,X,ne)=>s.extend(Gs(f,i,c,p,v,x,E,A,!0,L,!0,N,U,X,ne),{u_texsize_icon:z,u_texture_icon:1}),Ch=(f,i,c)=>({u_matrix:f,u_opacity:i,u_color:c}),ma=(f,i,c,p,v,x)=>s.extend(function(E,A,L,z){const N=L.imageManager.getPattern(E.from.toString()),U=L.imageManager.getPattern(E.to.toString()),{width:X,height:ne}=L.imageManager.getPixelSize(),Y=Math.pow(2,z.tileID.overscaledZ),W=z.tileSize*Math.pow(2,L.transform.tileZoom)/Y,fe=W*(z.tileID.canonical.x+z.tileID.wrap*Y),ae=W*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,ne],u_mix:A.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/dn(z,1,L.transform.tileZoom),u_pixel_coord_upper:[fe>>16,ae>>16],u_pixel_coord_lower:[65535&fe,65535&ae]}}(p,x,c,v),{u_matrix:f,u_opacity:i}),Jn={fillExtrusion:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_lightpos:new s.Uniform3f(f,i.u_lightpos),u_lightintensity:new s.Uniform1f(f,i.u_lightintensity),u_lightcolor:new s.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(f,i.u_vertical_gradient),u_opacity:new s.Uniform1f(f,i.u_opacity),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_up_dir:new s.Uniform3f(f,i.u_up_dir),u_height_lift:new s.Uniform1f(f,i.u_height_lift)}),fillExtrusionPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_lightpos:new s.Uniform3f(f,i.u_lightpos),u_lightintensity:new s.Uniform1f(f,i.u_lightintensity),u_lightcolor:new s.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(f,i.u_height_factor),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_up_dir:new s.Uniform3f(f,i.u_up_dir),u_height_lift:new s.Uniform1f(f,i.u_height_lift),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade),u_opacity:new s.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_world:new s.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_world:new s.Uniform2f(f,i.u_world),u_image:new s.Uniform1i(f,i.u_image),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new s.UniformMatrix2f(f,i.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_up_dir:new s.Uniform3f(f,i.u_up_dir)}),collisionBox:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new s.Uniform2f(f,i.u_extrude_scale)}),collisionCircle:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new s.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new s.UniformColor(f,i.u_color),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_overlay:new s.Uniform1i(f,i.u_overlay),u_overlay_scale:new s.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new s.Uniform1f(f,i.u_extrude_scale),u_intensity:new s.Uniform1f(f,i.u_intensity),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_up_dir:new s.Uniform3f(f,i.u_up_dir)}),heatmapTexture:(f,i)=>({u_image:new s.Uniform1i(f,i.u_image),u_color_ramp:new s.Uniform1i(f,i.u_color_ramp),u_opacity:new s.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_latrange:new s.Uniform2f(f,i.u_latrange),u_light:new s.Uniform2f(f,i.u_light),u_shadow:new s.UniformColor(f,i.u_shadow),u_highlight:new s.UniformColor(f,i.u_highlight),u_accent:new s.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_image:new s.Uniform1i(f,i.u_image),u_dimension:new s.Uniform2f(f,i.u_dimension),u_zoom:new s.Uniform1f(f,i.u_zoom),u_unpack:new s.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_pixels_to_tile_units:new s.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(f,i.u_units_to_pixels),u_dash_image:new s.Uniform1i(f,i.u_dash_image),u_gradient_image:new s.Uniform1i(f,i.u_gradient_image),u_image_height:new s.Uniform1f(f,i.u_image_height),u_texsize:new s.Uniform2f(f,i.u_texsize),u_scale:new s.Uniform3f(f,i.u_scale),u_mix:new s.Uniform1f(f,i.u_mix),u_alpha_discard_threshold:new s.Uniform1f(f,i.u_alpha_discard_threshold)}),linePattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_texsize:new s.Uniform2f(f,i.u_texsize),u_pixels_to_tile_units:new s.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_image:new s.Uniform1i(f,i.u_image),u_units_to_pixels:new s.Uniform2f(f,i.u_units_to_pixels),u_scale:new s.Uniform3f(f,i.u_scale),u_fade:new s.Uniform1f(f,i.u_fade),u_alpha_discard_threshold:new s.Uniform1f(f,i.u_alpha_discard_threshold)}),raster:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new s.Uniform2f(f,i.u_tl_parent),u_scale_parent:new s.Uniform1f(f,i.u_scale_parent),u_fade_t:new s.Uniform1f(f,i.u_fade_t),u_opacity:new s.Uniform1f(f,i.u_opacity),u_image0:new s.Uniform1i(f,i.u_image0),u_image1:new s.Uniform1i(f,i.u_image1),u_brightness_low:new s.Uniform1f(f,i.u_brightness_low),u_brightness_high:new s.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(f,i.u_spin_weights),u_perspective_transform:new s.Uniform2f(f,i.u_perspective_transform)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_camera_forward:new s.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(f,i.u_tile_matrix),u_ecef_origin:new s.Uniform3f(f,i.u_ecef_origin),u_texture:new s.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_texture:new s.Uniform1i(f,i.u_texture),u_gamma_scale:new s.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_tile_id:new s.Uniform3f(f,i.u_tile_id),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_camera_forward:new s.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(f,i.u_tile_matrix),u_ecef_origin:new s.Uniform3f(f,i.u_ecef_origin),u_is_halo:new s.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new s.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(f,i.u_size_t),u_size:new s.Uniform1f(f,i.u_size),u_camera_to_center_distance:new s.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(f,i.u_fade_change),u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new s.Uniform1i(f,i.u_is_text),u_pitch_with_map:new s.Uniform1i(f,i.u_pitch_with_map),u_texsize:new s.Uniform2f(f,i.u_texsize),u_texsize_icon:new s.Uniform2f(f,i.u_texsize_icon),u_texture:new s.Uniform1i(f,i.u_texture),u_texture_icon:new s.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new s.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_opacity:new s.Uniform1f(f,i.u_opacity),u_color:new s.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_opacity:new s.Uniform1f(f,i.u_opacity),u_image:new s.Uniform1i(f,i.u_image),u_pattern_tl_a:new s.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(f,i.u_pattern_br_b),u_texsize:new s.Uniform2f(f,i.u_texsize),u_mix:new s.Uniform1f(f,i.u_mix),u_pattern_size_a:new s.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(f,i.u_scale_a),u_scale_b:new s.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(f,i.u_tile_units_to_pixels)}),terrainRaster:Ja,terrainDepth:Ja,skybox:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_sun_direction:new s.Uniform3f(f,i.u_sun_direction),u_cubemap:new s.Uniform1i(f,i.u_cubemap),u_opacity:new s.Uniform1f(f,i.u_opacity),u_temporal_offset:new s.Uniform1f(f,i.u_temporal_offset)}),skyboxGradient:(f,i)=>({u_matrix:new s.UniformMatrix4f(f,i.u_matrix),u_color_ramp:new s.Uniform1i(f,i.u_color_ramp),u_center_direction:new s.Uniform3f(f,i.u_center_direction),u_radius:new s.Uniform1f(f,i.u_radius),u_opacity:new s.Uniform1f(f,i.u_opacity),u_temporal_offset:new s.Uniform1f(f,i.u_temporal_offset)}),skyboxCapture:(f,i)=>({u_matrix_3f:new s.UniformMatrix3f(f,i.u_matrix_3f),u_sun_direction:new s.Uniform3f(f,i.u_sun_direction),u_sun_intensity:new s.Uniform1f(f,i.u_sun_intensity),u_color_tint_r:new s.Uniform4f(f,i.u_color_tint_r),u_color_tint_m:new s.Uniform4f(f,i.u_color_tint_m),u_luminance:new s.Uniform1f(f,i.u_luminance)}),globeRaster:(f,i)=>({u_proj_matrix:new s.UniformMatrix4f(f,i.u_proj_matrix),u_globe_matrix:new s.UniformMatrix4f(f,i.u_globe_matrix),u_merc_matrix:new s.UniformMatrix4f(f,i.u_merc_matrix),u_zoom_transition:new s.Uniform1f(f,i.u_zoom_transition),u_merc_center:new s.Uniform2f(f,i.u_merc_center),u_image0:new s.Uniform1i(f,i.u_image0),u_grid_matrix:new s.UniformMatrix3f(f,i.u_grid_matrix)}),globeAtmosphere:(f,i)=>({u_frustum_tl:new s.Uniform3f(f,i.u_frustum_tl),u_frustum_tr:new s.Uniform3f(f,i.u_frustum_tr),u_frustum_br:new s.Uniform3f(f,i.u_frustum_br),u_frustum_bl:new s.Uniform3f(f,i.u_frustum_bl),u_globe_pos:new s.Uniform3f(f,i.u_globe_pos),u_globe_radius:new s.Uniform1f(f,i.u_globe_radius),u_opacity:new s.Uniform1f(f,i.u_opacity),u_fadeout_range:new s.Uniform1f(f,i.u_fadeout_range),u_start_color:new s.Uniform3f(f,i.u_start_color),u_end_color:new s.Uniform3f(f,i.u_end_color)})};let go;function Hl(f,i,c,p,v,x,E){const A=f.context,L=A.gl,z=f.useProgram("collisionBox"),N=[];let U=0,X=0;for(let he=0;he<p.length;he++){const ye=p[he],ce=i.getTile(ye),we=ce.getBucket(c);if(!we)continue;let Ve=ye.projMatrix;v[0]===0&&v[1]===0||(Ve=f.translatePosMatrix(ye.projMatrix,ce,v,x));const tt=E?we.textCollisionBox:we.iconCollisionBox,ut=we.collisionCircleArray;if(ut.length>0){const st=s.create(),Dt=Ve;s.mul(st,we.placementInvProjMatrix,f.transform.glCoordMatrix),s.mul(st,st,we.placementViewportMatrix),N.push({circleArray:ut,circleOffset:X,transform:Dt,invTransform:st}),U+=ut.length/4,X=U}tt&&(f.terrain&&f.terrain.setupElevationDraw(ce,z),z.draw(A,L.LINES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,Kf(Ve,f.transform,ce),c.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,null,f.transform.zoom,null,tt.collisionVertexBuffer,tt.collisionVertexBufferExt))}if(!E||!N.length)return;const ne=f.useProgram("collisionCircle"),Y=new s.StructArrayLayout2f1f2i16;Y.resize(4*U),Y._trim();let W=0;for(const he of N)for(let ye=0;ye<he.circleArray.length/4;ye++){const ce=4*ye,we=he.circleArray[ce+0],Ve=he.circleArray[ce+1],tt=he.circleArray[ce+2],ut=he.circleArray[ce+3];Y.emplace(W++,we,Ve,tt,ut,0),Y.emplace(W++,we,Ve,tt,ut,1),Y.emplace(W++,we,Ve,tt,ut,2),Y.emplace(W++,we,Ve,tt,ut,3)}(!go||go.length<2*U)&&(go=function(he){const ye=2*he,ce=new s.StructArrayLayout3ui6;ce.resize(ye),ce._trim();for(let we=0;we<ye;we++){const Ve=6*we;ce.uint16[Ve+0]=4*we+0,ce.uint16[Ve+1]=4*we+1,ce.uint16[Ve+2]=4*we+2,ce.uint16[Ve+3]=4*we+2,ce.uint16[Ve+4]=4*we+3,ce.uint16[Ve+5]=4*we+0}return ce}(U));const fe=A.createIndexBuffer(go,!0),ae=A.createVertexBuffer(Y,s.collisionCircleLayout.members,!0);for(const he of N){const ye={u_matrix:he.transform,u_inv_matrix:he.invTransform,u_camera_to_center_distance:(ue=f.transform).cameraToCenterDistance,u_viewport_size:[ue.width,ue.height]};ne.draw(A,L.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,ye,c.id,ae,fe,s.SegmentVector.simpleSegment(0,2*he.circleOffset,he.circleArray.length,he.circleArray.length/2),null,f.transform.zoom,null,null,null)}var ue;ae.destroy(),fe.destroy()}const Wl=s.create();function _a(f,i,c,p,v,x){const{horizontalAlign:E,verticalAlign:A}=s.getAnchorAlignment(f),L=-(E-.5)*i,z=-(A-.5)*c,N=s.evaluateVariableOffset(f,p);return new s.pointGeometry((L/v+N[0])*x,(z/v+N[1])*x)}function Ih(f,i,c,p,v,x,E,A,L,z,N,U){const X=f.text.placedSymbolArray,ne=f.text.dynamicLayoutVertexArray,Y=f.icon.dynamicLayoutVertexArray,W={},fe=A.projMatrix,ae=x.elevation,ue=U.upVectorScale(A.canonical,x.center.lat,x.worldSize);ne.clear();for(let he=0;he<X.length;he++){const ye=X.get(he),ce=f.allowVerticalPlacement&&!ye.placedOrientation,we=ye.hidden||!ye.crossTileID||ce?null:p[ye.crossTileID];if(we){const Ve=new s.pointGeometry(ye.tileAnchorX,ye.tileAnchorY),tt=U.upVector(A.canonical,Ve.x,Ve.y),ut=ae?ae.getAtTileOffset(A,Ve.x,Ve.y):0,st=vn([ye.projectedAnchorX+ut*tt[0]*ue.metersToTile,ye.projectedAnchorY+ut*tt[1]*ue.metersToTile,ye.projectedAnchorZ+ut*tt[2]*ue.metersToTile],c?fe:E),Dt=on(x.cameraToCenterDistance,st.signedDistanceFromCamera);let Ge=v.evaluateSizeForFeature(f.textSizeData,z,ye)*Dt/s.ONE_EM;c&&(Ge*=f.tilePixelRatio/L);const{width:Ot,height:Mt,anchor:nn,textOffset:ft,textScale:Jt}=we,yn=_a(nn,Ot,Mt,ft,Jt,Ge),en=c?mt(Ve.add(yn),E,ut*ue.metersToLabelSpace).point:st.point.add(i?yn.rotate(-x.angle):yn),tn=f.allowVerticalPlacement&&ye.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let xn=0;xn<ye.numGlyphs;xn++)s.addDynamicAttributes(ne,en,tn);N&&ye.associatedIconIndex>=0&&(W[ye.associatedIconIndex]={shiftedAnchor:en,angle:tn})}else qi(ye.numGlyphs,ne)}if(N){Y.clear();const he=f.icon.placedSymbolArray;for(let ye=0;ye<he.length;ye++){const ce=he.get(ye);if(ce.hidden)qi(ce.numGlyphs,Y);else{const we=W[ye];if(we)for(let Ve=0;Ve<ce.numGlyphs;Ve++)s.addDynamicAttributes(Y,we.shiftedAnchor,we.angle);else qi(ce.numGlyphs,Y)}}f.icon.dynamicLayoutVertexBuffer.updateData(Y)}f.text.dynamicLayoutVertexBuffer.updateData(ne)}function ql(f,i,c){return c.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Zl(f,i,c,p,v,x,E,A,L,z,N,U){const X=f.context,ne=X.gl,Y=f.transform,W=A==="map",fe=L==="map",ae=W&&c.layout.get("symbol-placement")!=="point",ue=W&&!fe&&!ae,he=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ye=!1;const ce=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),we=[s.mercatorXfromLng(Y.center.lng),s.mercatorYfromLat(Y.center.lat)],Ve=c.layout.get("text-variable-anchor"),tt=Y.projection.name==="globe",ut=tt?s.globeToMercatorTransition(Y.zoom):0,st=[],Dt=[];f.terrain&&fe&&Dt.push("PITCH_WITH_MAP_TERRAIN"),tt&&Dt.push("PROJECTION_GLOBE_VIEW");for(const Ge of p){const Ot=i.getTile(Ge),Mt=Ot.getBucket(c);if(!Mt||Mt.projection!==Y.projection.name)continue;const nn=v?Mt.text:Mt.icon;if(!nn||Mt.fullyClipped||!nn.segments.get().length)continue;const ft=nn.programConfigurations.get(c.id),Jt=v||Mt.sdfIcons,yn=v?Mt.textSizeData:Mt.iconSizeData,en=fe||Y.pitch!==0,tn=s.evaluateSizeForZoom(yn,Y.zoom);let xn,Bn,_n,wn,ii=[0,0],Bi=null;if(v){if(Bn=Ot.glyphAtlasTexture,_n=ne.LINEAR,xn=Ot.glyphAtlasTexture.size,Mt.iconsInText){ii=Ot.imageAtlasTexture.size,Bi=Ot.imageAtlasTexture;const wo=yn.kind==="composite"||yn.kind==="camera";wn=en||f.options.rotating||f.options.zooming||wo?ne.LINEAR:ne.NEAREST}}else{const wo=c.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;Bn=Ot.imageAtlasTexture,_n=Jt||f.options.rotating||f.options.zooming||wo||en?ne.LINEAR:ne.NEAREST,xn=Ot.imageAtlasTexture.size}const Br=f.transform.calculatePixelsToTileUnitsMatrix(Ot),Fr=Oe(Ge.projMatrix,Ot.tileID.canonical,fe,W,f.transform,Br),xo=f.terrain&&fe&&ae?s.invert(s.create(),Fr):Wl,os=It(Ge.projMatrix,Ot.tileID.canonical,fe,W,f.transform,Br),Ws=Ve&&Mt.hasTextData(),Ta=c.layout.get("icon-text-fit")!=="none"&&Ws&&Mt.hasIconData();if(ae){const wo=Y.elevation,ll=wo?wo.getAtTileOffsetFunc(Ge,Y.center.lat,Y.worldSize,Y.projection):Bp=>[0,0,0];Vn(Mt,Ge.projMatrix,f,v,Fr,os,fe,z,ll,Ge)}const qs=ae||v&&Ve||Ta,Vi=f.translatePosMatrix(Ge.projMatrix,Ot,x,E),Zi=qs?Wl:Fr,ui=f.translatePosMatrix(os,Ot,x,E,!0),rr=Y.projection.createInversionMatrix(Y,Ge.canonical),bo=qs?Dt.concat(["PROJECTED_POS_ON_VIEWPORT"]):Dt,Fi=Jt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let No;No=Jt?Mt.iconsInText?pa(yn.kind,tn,ue,fe,f,Vi,Zi,ui,xn,ii,Ge,ut,we,rr):Gs(yn.kind,tn,ue,fe,f,Vi,Zi,ui,v,xn,!0,Ge,ut,we,rr):su(yn.kind,tn,ue,fe,f,Vi,Zi,ui,v,xn,Ge,ut,we,rr);const gu={program:f.useProgram(ql(Jt,v,Mt),ft,bo),buffers:nn,uniformValues:No,atlasTexture:Bn,atlasTextureIcon:Bi,atlasInterpolation:_n,atlasInterpolationIcon:wn,isSDF:Jt,hasHalo:Fi,tile:Ot,labelPlaneMatrixInv:xo};if(he&&Mt.canOverlap){ye=!0;const wo=nn.segments.get();for(const ll of wo)st.push({segments:new s.SegmentVector([ll]),sortKey:ll.sortKey,state:gu})}else st.push({segments:nn.segments,sortKey:0,state:gu})}ye&&st.sort((Ge,Ot)=>Ge.sortKey-Ot.sortKey);for(const Ge of st){const Ot=Ge.state;if(f.terrain&&f.terrain.setupElevationDraw(Ot.tile,Ot.program,{useDepthForOcclusion:!tt,labelPlaneMatrixInv:Ot.labelPlaneMatrixInv}),X.activeTexture.set(ne.TEXTURE0),Ot.atlasTexture.bind(Ot.atlasInterpolation,ne.CLAMP_TO_EDGE),Ot.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),Ot.atlasTextureIcon&&Ot.atlasTextureIcon.bind(Ot.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),Ot.isSDF){const Mt=Ot.uniformValues;Ot.hasHalo&&(Mt.u_is_halo=1,Ss(Ot.buffers,Ge.segments,c,f,Ot.program,ce,N,U,Mt)),Mt.u_is_halo=0}Ss(Ot.buffers,Ge.segments,c,f,Ot.program,ce,N,U,Ot.uniformValues)}}function Ss(f,i,c,p,v,x,E,A,L){const z=p.context;v.draw(z,z.gl.TRIANGLES,x,E,A,s.CullFaceMode.disabled,L,c.id,f.layoutVertexBuffer,f.indexBuffer,i,c.paint,p.transform.zoom,f.programConfigurations.get(c.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Xl(f,i,c,p,v,x,E){const A=f.context.gl,L=c.paint.get("fill-pattern"),z=L&&L.constantOr(1),N=c.getCrossfadeParameters();let U,X,ne,Y,W;E?(X=z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=A.LINES):(X=z?"fillPattern":"fill",U=A.TRIANGLES);for(const fe of p){const ae=i.getTile(fe);if(z&&!ae.patternsLoaded())continue;const ue=ae.getBucket(c);if(!ue)continue;f.prepareDrawTile();const he=ue.programConfigurations.get(c.id),ye=f.useProgram(X,he);z&&(f.context.activeTexture.set(A.TEXTURE0),ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),he.updatePaintBuffers(N));const ce=L.constantOr(null);if(ce&&ae.imageAtlas){const Ve=ae.imageAtlas,tt=Ve.patternPositions[ce.to.toString()],ut=Ve.patternPositions[ce.from.toString()];tt&&ut&&he.setConstantPatternPositions(tt,ut)}const we=f.translatePosMatrix(fe.projMatrix,ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){Y=ue.indexBuffer2,W=ue.segments2;const Ve=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];ne=X==="fillOutlinePattern"&&z?jl(we,f,N,ae,Ve):rl(we,Ve)}else Y=ue.indexBuffer,W=ue.segments,ne=z?il(we,f,N,ae):nl(we);f.prepareDrawProgram(f.context,ye,fe.toUnwrapped()),ye.draw(f.context,U,v,f.stencilModeForClipping(fe),x,s.CullFaceMode.disabled,ne,c.id,ue.layoutVertexBuffer,Y,W,c.paint,f.transform.zoom,he)}}function ga(f,i,c,p,v,x,E){const A=f.context,L=A.gl,z=f.transform,N=c.paint.get("fill-extrusion-pattern"),U=N.constantOr(1),X=c.getCrossfadeParameters(),ne=c.paint.get("fill-extrusion-opacity"),Y=function(he){if(he.projection.name!=="globe")return 0;const ye=Math.PI/32,ce=Math.tan(ye),we=s.earthRadius;return we*Math.sqrt(1+2*ce*ce)-we}(z),W=z.projection.name==="globe",fe=W?s.globeToMercatorTransition(z.zoom):0,ae=[s.mercatorXfromLng(z.center.lng),s.mercatorYfromLat(z.center.lat)],ue=[];W&&ue.push("PROJECTION_GLOBE_VIEW");for(const he of p){const ye=i.getTile(he),ce=ye.getBucket(c);if(!ce||ce.projection!==z.projection.name)continue;const we=ce.programConfigurations.get(c.id),Ve=f.useProgram(U?"fillExtrusionPattern":"fillExtrusion",we,ue);if(f.terrain){const Ot=f.terrain;if(f.style.terrainSetForDrapingOnly())Ot.setupElevationDraw(ye,Ve,{useMeterToDem:!0});else{if(!ce.enableTerrain)continue;if(Ot.setupElevationDraw(ye,Ve,{useMeterToDem:!0}),ol(A,i,he,ce,c,Ot),!ce.centroidVertexBuffer){const Mt=Ve.attributes.a_centroid_pos;Mt!==void 0&&L.vertexAttrib2f(Mt,0,0)}}}U&&(f.context.activeTexture.set(L.TEXTURE0),ye.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),we.updatePaintBuffers(X));const tt=N.constantOr(null);if(tt&&ye.imageAtlas){const Ot=ye.imageAtlas,Mt=Ot.patternPositions[tt.to.toString()],nn=Ot.patternPositions[tt.from.toString()];Mt&&nn&&we.setConstantPatternPositions(Mt,nn)}const ut=f.translatePosMatrix(he.projMatrix,ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),st=z.projection.createInversionMatrix(z,he.canonical),Dt=c.paint.get("fill-extrusion-vertical-gradient"),Ge=U?tl(ut,f,Dt,ne,he,X,ye,Y,fe,ae,st):el(ut,f,Dt,ne,he,Y,fe,ae,st);f.prepareDrawProgram(A,Ve,he.toUnwrapped()),Ve.draw(A,A.gl.TRIANGLES,v,x,E,s.CullFaceMode.backCCW,Ge,c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,f.transform.zoom,we,f.terrain?ce.centroidVertexBuffer:null,W?ce.layoutVertexExtBuffer:null)}}function ol(f,i,c,p,v,x){const E=[ae=>{let ue=ae.canonical.x-1,he=ae.wrap;return ue<0&&(ue=(1<<ae.canonical.z)-1,he--),new s.OverscaledTileID(ae.overscaledZ,he,ae.canonical.z,ue,ae.canonical.y)},ae=>{let ue=ae.canonical.x+1,he=ae.wrap;return ue===1<<ae.canonical.z&&(ue=0,he++),new s.OverscaledTileID(ae.overscaledZ,he,ae.canonical.z,ue,ae.canonical.y)},ae=>new s.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,(ae.canonical.y===0?1<<ae.canonical.z:ae.canonical.y)-1),ae=>new s.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y===(1<<ae.canonical.z)-1?0:ae.canonical.y+1)],A=ae=>{const ue=i.getSource().minzoom,he=ce=>{const we=i.getTileByID(ce);if(we&&we.hasData())return we.getBucket(v)},ye=[0,-1,1];for(const ce of ye){if(ae.overscaledZ+ce<ue)continue;const we=he(ae.calculateScaledKey(ae.overscaledZ+ce));if(we)return we}},L=[0,0,0],z=(ae,ue)=>(L[0]=Math.min(ae.min.y,ue.min.y),L[1]=Math.max(ae.max.y,ue.max.y),L[2]=s.EXTENT-ue.min.x>ae.max.x?ue.min.x-s.EXTENT:ae.max.x,L),N=(ae,ue)=>(L[0]=Math.min(ae.min.x,ue.min.x),L[1]=Math.max(ae.max.x,ue.max.x),L[2]=s.EXTENT-ue.min.y>ae.max.y?ue.min.y-s.EXTENT:ae.max.y,L),U=[(ae,ue)=>z(ae,ue),(ae,ue)=>z(ue,ae),(ae,ue)=>N(ae,ue),(ae,ue)=>N(ue,ae)],X=new s.pointGeometry(0,0);let ne,Y,W;const fe=(ae,ue,he,ye,ce)=>{const we=[[ye?he:ae,ye?ae:he,0],[ye?he:ue,ye?ue:he,0]],Ve=ce<0?s.EXTENT+ce:ce,tt=[ye?Ve:(ae+ue)/2,ye?(ae+ue)/2:Ve,0];return he===0&&ce<0||he!==0&&ce>0?x.getForTilePoints(W,[tt],!0,Y):we.push(tt),x.getForTilePoints(c,we,!0,ne),Math.max(we[0][2],we[1][2],tt[2])/x.exaggeration()};for(let ae=0;ae<4;ae++){const ue=(ae<2?1:5)-ae,he=p.borders[ae];if(he.length===0)continue;const ye=W=E[ae](c),ce=A(ye);if(!(ce&&ce instanceof s.FillExtrusionBucket&&ce.enableTerrain)||p.borderDoneWithNeighborZ[ae]===ce.canonical.z&&ce.borderDoneWithNeighborZ[ue]===p.canonical.z||(Y=x.findDEMTileFor(ye),!Y||!Y.dem))continue;if(!ne){const ut=x.findDEMTileFor(c);if(!ut||!ut.dem)return;ne=ut}const we=ce.borders[ue];let Ve=0;const tt=ce.borderDoneWithNeighborZ[ue]!==p.canonical.z;if(p.canonical.z===ce.canonical.z){for(let ut=0;ut<he.length;ut++){const st=p.featuresOnBorder[he[ut]],Dt=st.borders[ae];let Ge;for(;Ve<we.length&&(Ge=ce.featuresOnBorder[we[Ve]],!(Ge.borders[ue][1]>Dt[0]+3));)tt&&ce.encodeCentroid(void 0,Ge,!1),Ve++;if(Ge&&Ve<we.length){const Ot=Ve;let Mt=0;for(;!(Ge.borders[ue][0]>Dt[1]-3)&&(Mt++,++Ve!==we.length);)Ge=ce.featuresOnBorder[we[Ve]];if(Ge=ce.featuresOnBorder[we[Ot]],st.intersectsCount()>1||Ge.intersectsCount()>1||Mt!==1){Mt!==1&&(Ve=Ot),p.encodeCentroid(void 0,st,!1),tt&&ce.encodeCentroid(void 0,Ge,!1);continue}const nn=U[ae](st,Ge),ft=ae%2?s.EXTENT-1:0;X.x=fe(nn[0],Math.min(s.EXTENT-1,nn[1]),ft,ae<2,nn[2]),X.y=0,p.encodeCentroid(X,st,!1),tt&&ce.encodeCentroid(X,Ge,!1)}else p.encodeCentroid(void 0,st,!1)}p.borderDoneWithNeighborZ[ae]=ce.canonical.z,p.needsCentroidUpdate=!0,tt&&(ce.borderDoneWithNeighborZ[ue]=p.canonical.z,ce.needsCentroidUpdate=!0)}else{for(const ut of he)p.encodeCentroid(void 0,p.featuresOnBorder[ut],!1);if(tt){for(const ut of we)ce.encodeCentroid(void 0,ce.featuresOnBorder[ut],!1);ce.borderDoneWithNeighborZ[ue]=p.canonical.z,ce.needsCentroidUpdate=!0}p.borderDoneWithNeighborZ[ae]=ce.canonical.z,p.needsCentroidUpdate=!0}}(p.needsCentroidUpdate||!p.centroidVertexBuffer&&p.centroidVertexArray.length!==0)&&p.uploadCentroid(f)}const ya=new s.Color(1,0,0,1),Yl=new s.Color(0,1,0,1),au=new s.Color(0,0,1,1),Kl=new s.Color(1,0,1,1),ns=new s.Color(0,1,1,1);function Wt(f,i,c,p){is(f,0,i+c/2,f.transform.width,c,p)}function Xr(f,i,c,p){is(f,i-c/2,0,c,f.transform.height,p)}function is(f,i,c,p,v,x){const E=f.context,A=E.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*s.exported.devicePixelRatio,c*s.exported.devicePixelRatio,p*s.exported.devicePixelRatio,v*s.exported.devicePixelRatio),E.clear({color:x}),A.disable(A.SCISSOR_TEST)}function va(f,i,c){const p=f.context,v=p.gl,x=f.transform.projection.name==="globe",E=c.projMatrix,A=f.useProgram("debug",null,x?["PROJECTION_GLOBE_VIEW"]:null),L=i.getTileByID(c.key);f.terrain&&f.terrain.setupElevationDraw(L,A);const z=s.DepthMode.disabled,N=s.StencilMode.disabled,U=f.colorModeForRenderPass(),X="$debug";p.activeTexture.set(v.TEXTURE0),f.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),x?L._makeGlobeTileDebugBuffers(f.context,f.transform.projection):L._makeDebugTileBoundsBuffers(f.context,f.transform.projection);const ne=L._tileDebugBuffer||f.debugBuffer,Y=L._tileDebugIndexBuffer||f.debugIndexBuffer,W=L._tileDebugSegments||f.debugSegments;A.draw(p,v.LINE_STRIP,z,N,U,s.CullFaceMode.disabled,nu(E,s.Color.red),X,ne,Y,W,null,null,null,L._globeTileDebugBorderBuffer);const fe=L.latestRawTileData,ae=Math.floor((fe&&fe.byteLength||0)/1024),ue=i.getTile(c).tileSize,he=512/Math.min(ue,512)*(c.overscaledZ/f.transform.zoom)*.5;let ye=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ye+=` => ${c.overscaledZ}`),function(tt,ut){tt.initDebugOverlayCanvas();const st=tt.debugOverlayCanvas,Dt=tt.context.gl,Ge=tt.debugOverlayCanvas.getContext("2d");Ge.clearRect(0,0,st.width,st.height),Ge.shadowColor="white",Ge.shadowBlur=2,Ge.lineWidth=1.5,Ge.strokeStyle="white",Ge.textBaseline="top",Ge.font="bold 36px Open Sans, sans-serif",Ge.fillText(ut,5,5),Ge.strokeText(ut,5,5),tt.debugOverlayTexture.update(st),tt.debugOverlayTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE)}(f,`${ye} ${ae}kb`);const ce=L._tileDebugTextBuffer||f.debugBuffer,we=L._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,Ve=L._tileDebugTextSegments||f.debugSegments;A.draw(p,v.TRIANGLES,z,N,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,nu(E,s.Color.transparent,he),X,ce,we,Ve,null,null,null,L._globeTileDebugTextBuffer)}const lu=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Hs}=lu;function Po(f,i,c,p){f.emplaceBack(i,c,p)}class xa{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Po(this.vertexArray,-1,-1,1),Po(this.vertexArray,1,-1,1),Po(this.vertexArray,-1,1,1),Po(this.vertexArray,1,1,1),Po(this.vertexArray,-1,-1,-1),Po(this.vertexArray,1,-1,-1),Po(this.vertexArray,-1,1,-1),Po(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Hs),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function so(f,i,c,p,v,x){const E=f.gl,A=i.paint.get("sky-atmosphere-color"),L=i.paint.get("sky-atmosphere-halo-color"),z=i.paint.get("sky-atmosphere-sun-intensity"),N=((U,X,ne,Y,W)=>({u_matrix_3f:U,u_sun_direction:X,u_sun_intensity:ne,u_color_tint_r:[Y.r,Y.g,Y.b,Y.a],u_color_tint_m:[W.r,W.g,W.b,W.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),p),v,z,A,L);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+x,i.skyboxTexture,0),c.draw(f,E.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,N,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}function rs(f,i){return s.transformMat4(f,f,i)}const Jl={symbol:function(f,i,c,p,v){if(f.renderPass!=="translucent")return;const x=s.StencilMode.disabled,E=f.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(A,L,z,N,U,X,ne){const Y=L.transform,W=U==="map",fe=X==="map";for(const ae of A){const ue=N.getTile(ae),he=ue.getBucket(z);if(!he||he.projection!==Y.projection.name||!he.text||!he.text.segments.get().length)continue;const ye=s.evaluateSizeForZoom(he.textSizeData,Y.zoom),ce=L.transform.calculatePixelsToTileUnitsMatrix(ue),we=Oe(ae.projMatrix,ue.tileID.canonical,fe,W,L.transform,ce),Ve=z.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(ye){const tt=Math.pow(2,Y.zoom-ue.tileID.overscaledZ);Ih(he,W,fe,ne,s.symbolSize,Y,we,ae,tt,ye,Ve,Y.projection)}}}(p,f,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v),c.paint.get("icon-opacity").constantOr(1)!==0&&Zl(f,i,c,p,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,E),c.paint.get("text-opacity").constantOr(1)!==0&&Zl(f,i,c,p,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,E),i.map.showCollisionBoxes&&(Hl(f,i,c,p,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Hl(f,i,c,p,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,c,p){if(f.renderPass!=="translucent")return;const v=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),A=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(x.constantOr(1)===0||E.constantOr(1)===0))return;const L=f.context,z=L.gl,N=f.transform,U=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),X=s.StencilMode.disabled,ne=f.colorModeForRenderPass(),Y=N.projection.name==="globe",W=[s.mercatorXfromLng(N.center.lng),s.mercatorYfromLat(N.center.lat)],fe=[];for(let ue=0;ue<p.length;ue++){const he=p[ue],ye=i.getTile(he),ce=ye.getBucket(c);if(!ce)continue;const we=ce.programConfigurations.get(c.id),Ve=Th(c);Y&&Ve.push("PROJECTION_GLOBE_VIEW");const tt=f.useProgram("circle",we,Ve),ut=ce.layoutVertexBuffer,st=ce.globeExtVertexBuffer,Dt=ce.indexBuffer,Ge=N.projection.createInversionMatrix(N,he.canonical),Ot={programConfiguration:we,program:tt,layoutVertexBuffer:ut,globeExtVertexBuffer:st,indexBuffer:Dt,uniformValues:js(f,he,ye,Ge,W,c),tile:ye};if(A){const Mt=ce.segments.get();for(const nn of Mt)fe.push({segments:new s.SegmentVector([nn]),sortKey:nn.sortKey,state:Ot})}else fe.push({segments:ce.segments,sortKey:0,state:Ot})}A&&fe.sort((ue,he)=>ue.sortKey-he.sortKey);const ae={useDepthForOcclusion:!Y};for(const ue of fe){const{programConfiguration:he,program:ye,layoutVertexBuffer:ce,globeExtVertexBuffer:we,indexBuffer:Ve,uniformValues:tt,tile:ut}=ue.state,st=ue.segments;f.terrain&&f.terrain.setupElevationDraw(ut,ye,ae),f.prepareDrawProgram(L,ye,ut.tileID.toUnwrapped()),ye.draw(L,z.TRIANGLES,U,X,ne,s.CullFaceMode.disabled,tt,c.id,ce,Ve,st,c.paint,N.zoom,he,Y?we:null)}},heatmap:function(f,i,c,p){if(c.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,x=v.gl,E=s.StencilMode.disabled,A=new s.ColorMode([x.ONE,x.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(X,ne,Y){const W=X.gl;X.activeTexture.set(W.TEXTURE1),X.viewport.set([0,0,ne.width/4,ne.height/4]);let fe=Y.heatmapFbo;if(fe)W.bindTexture(W.TEXTURE_2D,fe.colorAttachment.get()),X.bindFramebuffer.set(fe.framebuffer);else{const ae=W.createTexture();W.bindTexture(W.TEXTURE_2D,ae),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),fe=Y.heatmapFbo=X.createFramebuffer(ne.width/4,ne.height/4,!1),function(ue,he,ye,ce){const we=ue.gl;we.texImage2D(we.TEXTURE_2D,0,we.RGBA,he.width/4,he.height/4,0,we.RGBA,ue.extRenderToTextureHalfFloat?ue.extTextureHalfFloat.HALF_FLOAT_OES:we.UNSIGNED_BYTE,null),ce.colorAttachment.set(ye)}(X,ne,ae,fe)}})(v,f,c),v.clear({color:s.Color.transparent});const L=f.transform,z=L.projection.name==="globe",N=z?["PROJECTION_GLOBE_VIEW"]:null,U=[s.mercatorXfromLng(L.center.lng),s.mercatorYfromLat(L.center.lat)];for(let X=0;X<p.length;X++){const ne=p[X];if(i.hasRenderableParent(ne))continue;const Y=i.getTile(ne),W=Y.getBucket(c);if(!W)continue;const fe=W.programConfigurations.get(c.id),ae=f.useProgram("heatmap",fe,N),{zoom:ue}=f.transform;f.terrain&&f.terrain.setupElevationDraw(Y,ae),f.prepareDrawProgram(v,ae,ne.toUnwrapped());const he=L.projection.createInversionMatrix(L,ne.canonical);ae.draw(v,x.TRIANGLES,s.DepthMode.disabled,E,A,s.CullFaceMode.disabled,Sh(f,ne,Y,he,U,ue,c.paint.get("heatmap-intensity")),c.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,c.paint,f.transform.zoom,fe,z?W.globeExtVertexBuffer:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,x){const E=v.context,A=E.gl,L=x.heatmapFbo;if(!L)return;E.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,L.colorAttachment.get()),E.activeTexture.set(A.TEXTURE1);let z=x.colorRampTexture;z||(z=x.colorRampTexture=new s.Texture(E,x.colorRamp,A.RGBA)),z.bind(A.LINEAR,A.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(E,A.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,((N,U,X,ne)=>({u_image:0,u_color_ramp:1,u_opacity:U.paint.get("heatmap-opacity")}))(0,x),x.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,x.paint,v.transform.zoom)}(f,c))},line:function(f,i,c,p){if(f.renderPass!=="translucent")return;const v=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(v.constantOr(1)===0||x.constantOr(1)===0)return;const E=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),A=f.colorModeForRenderPass(),L=f.terrain&&f.terrain.renderingToTexture?1:s.exported.devicePixelRatio,z=c.paint.get("line-dasharray"),N=z.constantOr(1),U=c.layout.get("line-cap"),X=c.paint.get("line-pattern"),ne=X.constantOr(1),Y=c.paint.get("line-gradient"),W=c.getCrossfadeParameters(),fe=ne?"linePattern":"line",ae=f.context,ue=ae.gl,he=(ce=>{const we=[];ru(ce)&&we.push("RENDER_LINE_DASH"),ce.paint.get("line-gradient")&&we.push("RENDER_LINE_GRADIENT");const Ve=ce.paint.get("line-pattern").constantOr(1),tt=ce.paint.get("line-opacity").constantOr(1)!==1;return!Ve&&tt&&we.push("RENDER_LINE_ALPHA_DISCARD"),we})(c);let ye=he.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ye=!1);for(const ce of p){const we=i.getTile(ce);if(ne&&!we.patternsLoaded())continue;const Ve=we.getBucket(c);if(!Ve)continue;f.prepareDrawTile();const tt=Ve.programConfigurations.get(c.id),ut=f.useProgram(fe,tt,he),st=X.constantOr(null);if(st&&we.imageAtlas){const ft=we.imageAtlas,Jt=ft.patternPositions[st.to.toString()],yn=ft.patternPositions[st.from.toString()];Jt&&yn&&tt.setConstantPatternPositions(Jt,yn)}const Dt=z.constantOr(null),Ge=U.constantOr(null);if(!ne&&Dt&&Ge&&we.lineAtlas){const ft=we.lineAtlas,Jt=ft.getDash(Dt.to,Ge),yn=ft.getDash(Dt.from,Ge);Jt&&yn&&tt.setConstantPatternPositions(Jt,yn)}const Ot=f.terrain?ce.projMatrix:null,Mt=ne?iu(f,we,c,W,Ot,L):Ts(f,we,c,W,Ot,Ve.lineClipsArray.length,L);if(Y){const ft=Ve.gradients[c.id];let Jt=ft.texture;if(c.gradientVersion!==ft.version){let yn=256;if(c.stepInterpolant){const en=i.getSource().maxzoom,tn=ce.canonical.z===en?Math.ceil(1<<f.transform.maxZoom-ce.canonical.z):1;yn=s.clamp(s.nextPowerOfTwo(Ve.maxLineLength/s.EXTENT*1024*tn),256,ae.maxTextureSize)}ft.gradient=s.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:yn,image:ft.gradient||void 0,clips:Ve.lineClipsArray}),ft.texture?ft.texture.update(ft.gradient):ft.texture=new s.Texture(ae,ft.gradient,ue.RGBA),ft.version=c.gradientVersion,Jt=ft.texture}ae.activeTexture.set(ue.TEXTURE1),Jt.bind(c.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}N&&(ae.activeTexture.set(ue.TEXTURE0),we.lineAtlasTexture.bind(ue.LINEAR,ue.REPEAT),tt.updatePaintBuffers(W)),ne&&(ae.activeTexture.set(ue.TEXTURE0),we.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),tt.updatePaintBuffers(W)),f.prepareDrawProgram(ae,ut,ce.toUnwrapped());const nn=ft=>{ut.draw(ae,ue.TRIANGLES,E,ft,A,s.CullFaceMode.disabled,Mt,c.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,c.paint,f.transform.zoom,tt,Ve.layoutVertexBuffer2)};if(ye){const ft=f.stencilModeForClipping(ce).ref;ft===0&&f.terrain&&ae.clear({stencil:0});const Jt={func:ue.EQUAL,mask:255};Mt.u_alpha_discard_threshold=.8,nn(new s.StencilMode(Jt,ft,255,ue.KEEP,ue.KEEP,ue.INVERT)),Mt.u_alpha_discard_threshold=0,nn(new s.StencilMode(Jt,ft,255,ue.KEEP,ue.KEEP,ue.KEEP))}else nn(f.stencilModeForClipping(ce))}ye&&(f.resetStencilClippingMasks(),f.terrain&&ae.clear({stencil:0}))},fill:function(f,i,c,p){const v=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const E=f.colorModeForRenderPass(),A=c.paint.get("fill-pattern"),L=f.opaquePassEnabledForLayer()&&!A.constantOr(1)&&v.constantOr(s.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===L){const z=f.depthModeForSublayer(1,f.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Xl(f,i,c,p,z,E,!1)}if(f.renderPass==="translucent"&&c.paint.get("fill-antialias")){const z=f.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Xl(f,i,c,p,z,E,!0)}},"fill-extrusion":function(f,i,c,p){const v=c.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const x=new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))ga(f,i,c,p,x,s.StencilMode.disabled,s.ColorMode.disabled),ga(f,i,c,p,x,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const E=f.colorModeForRenderPass();ga(f,i,c,p,x,s.StencilMode.disabled,E)}}},hillshade:function(f,i,c,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,x=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),E=f.colorModeForRenderPass(),A=f.terrain&&f.terrain.renderingToTexture,[L,z]=f.renderPass!=="translucent"||A?[{},p]:f.stencilConfigForOverlap(p);for(const N of z){const U=i.getTile(N);if(U.needsHillshadePrepare&&f.renderPass==="offscreen")Rl(f,U,c,x,s.StencilMode.disabled,E);else if(f.renderPass==="translucent"){const X=A&&f.terrain?f.terrain.stencilModeForRTTOverlap(N):L[N.overscaledZ];zr(f,N,U,c,x,X,E)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,i,c,p,v,x){if(f.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!p.length)return;const E=f.context,A=E.gl,L=i.getSource(),z=f.useProgram("raster"),N=f.colorModeForRenderPass(),U=f.terrain&&f.terrain.renderingToTexture,[X,ne]=L instanceof Te||U?[{},p]:f.stencilConfigForOverlap(p),Y=ne[ne.length-1].overscaledZ,W=!f.options.moving;for(const fe of ne){const ae=U?s.DepthMode.disabled:f.depthModeForSublayer(fe.overscaledZ-Y,c.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,A.LESS),ue=fe.toUnwrapped(),he=i.getTile(fe);if(U&&(!he||!he.hasData()))continue;const ye=U?fe.projMatrix:f.transform.calculateProjMatrix(ue,W),ce=f.terrain&&U?f.terrain.stencilModeForRTTOverlap(fe):X[fe.overscaledZ],we=x?0:c.paint.get("raster-fade-duration");he.registerFadeDuration(we);const Ve=i.findLoadedParent(fe,0),tt=Bl(he,Ve,i,f.transform,we);let ut,st;f.terrain&&f.terrain.prepareDrawTile();const Dt=c.paint.get("raster-resampling")==="nearest"?A.NEAREST:A.LINEAR;E.activeTexture.set(A.TEXTURE0),he.texture.bind(Dt,A.CLAMP_TO_EDGE),E.activeTexture.set(A.TEXTURE1),Ve?(Ve.texture.bind(Dt,A.CLAMP_TO_EDGE),ut=Math.pow(2,Ve.tileID.overscaledZ-he.tileID.overscaledZ),st=[he.tileID.canonical.x*ut%1,he.tileID.canonical.y*ut%1]):he.texture.bind(Dt,A.CLAMP_TO_EDGE);const Ge=ou(ye,st||[0,0],ut||1,tt,c,L instanceof Te?L.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(E,z,ue),L instanceof Te)L.boundsBuffer&&L.boundsSegments&&z.draw(E,A.TRIANGLES,ae,s.StencilMode.disabled,N,s.CullFaceMode.disabled,Ge,c.id,L.boundsBuffer,f.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:Ot,tileBoundsIndexBuffer:Mt,tileBoundsSegments:nn}=f.getTileBoundsBuffers(he);z.draw(E,A.TRIANGLES,ae,ce,N,s.CullFaceMode.disabled,Ge,c.id,Ot,Mt,nn)}}f.resetStencilClippingMasks()},background:function(f,i,c,p){const v=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(x===0)return;const E=f.context,A=E.gl,L=f.transform,z=L.tileSize,N=c.paint.get("background-pattern");if(f.isPatternMissing(N))return;const U=!N&&v.a===1&&x===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==U)return;const X=s.StencilMode.disabled,ne=f.depthModeForSublayer(0,U==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),Y=f.colorModeForRenderPass(),W=f.useProgram(N?"backgroundPattern":"background");let fe,ae=p;ae||(fe=f.getBackgroundTiles(),ae=Object.values(fe).map(he=>he.tileID)),N&&(E.activeTexture.set(A.TEXTURE0),f.imageManager.bind(f.context));const ue=c.getCrossfadeParameters();for(const he of ae){const ye=he.toUnwrapped(),ce=p?he.projMatrix:f.transform.calculateProjMatrix(ye);f.prepareDrawTile();const we=i?i.getTile(he):fe?fe[he.key]:new s.Tile(he,z,L.zoom,f),Ve=N?ma(ce,x,f,N,{tileID:he,tileSize:z},ue):Ch(ce,x,v);f.prepareDrawProgram(E,W,ye);const{tileBoundsBuffer:tt,tileBoundsIndexBuffer:ut,tileBoundsSegments:st}=f.getTileBoundsBuffers(we);W.draw(E,A.TRIANGLES,ne,X,Y,s.CullFaceMode.disabled,Ve,c.id,tt,ut,st)}},sky:function(f,i,c){const p=f.transform,v=p.projection.name==="mercator"||p.projection.name==="globe"?1:s.smoothstep(7,8,p.zoom),x=c.paint.get("sky-opacity")*v;if(x===0)return;const E=f.context,A=c.paint.get("sky-type"),L=new s.DepthMode(E.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),z=f.frameCounter/1e3%1;A==="atmosphere"?f.renderPass==="offscreen"?c.needsSkyboxCapture(f)&&(function(N,U,X,ne){const Y=N.context,W=Y.gl;let fe=U.skyboxFbo;if(!fe){fe=U.skyboxFbo=Y.createFramebuffer(32,32,!1),U.skyboxGeometry=new xa(Y),U.skyboxTexture=Y.gl.createTexture(),W.bindTexture(W.TEXTURE_CUBE_MAP,U.skyboxTexture),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_CUBE_MAP,W.TEXTURE_MAG_FILTER,W.LINEAR);for(let ye=0;ye<6;++ye)W.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,W.RGBA,32,32,0,W.RGBA,W.UNSIGNED_BYTE,null)}Y.bindFramebuffer.set(fe.framebuffer),Y.viewport.set([0,0,32,32]);const ae=U.getCenter(N,!0),ue=N.useProgram("skyboxCapture"),he=new Float64Array(16);s.identity(he),s.rotateY(he,he,.5*-Math.PI),so(Y,U,ue,he,ae,0),s.identity(he),s.rotateY(he,he,.5*Math.PI),so(Y,U,ue,he,ae,1),s.identity(he),s.rotateX(he,he,.5*-Math.PI),so(Y,U,ue,he,ae,2),s.identity(he),s.rotateX(he,he,.5*Math.PI),so(Y,U,ue,he,ae,3),s.identity(he),so(Y,U,ue,he,ae,4),s.identity(he),s.rotateY(he,he,Math.PI),so(Y,U,ue,he,ae,5),Y.viewport.set([0,0,N.width,N.height])}(f,c),c.markSkyboxValid(f)):f.renderPass==="sky"&&function(N,U,X,ne,Y){const W=N.context,fe=W.gl,ae=N.transform,ue=N.useProgram("skybox");W.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_CUBE_MAP,U.skyboxTexture);const he=((ye,ce,we,Ve,tt)=>({u_matrix:ye,u_sun_direction:ce,u_cubemap:0,u_opacity:Ve,u_temporal_offset:tt}))(ae.skyboxMatrix,U.getCenter(N,!1),0,ne,Y);N.prepareDrawProgram(W,ue),ue.draw(W,fe.TRIANGLES,X,s.StencilMode.disabled,N.colorModeForRenderPass(),s.CullFaceMode.backCW,he,"skybox",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(f,c,L,x,z):A==="gradient"&&f.renderPass==="sky"&&function(N,U,X,ne,Y){const W=N.context,fe=W.gl,ae=N.transform,ue=N.useProgram("skyboxGradient");U.skyboxGeometry||(U.skyboxGeometry=new xa(W)),W.activeTexture.set(fe.TEXTURE0);let he=U.colorRampTexture;he||(he=U.colorRampTexture=new s.Texture(W,U.colorRamp,fe.RGBA)),he.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const ye=((ce,we,Ve,tt,ut)=>({u_matrix:ce,u_color_ramp:0,u_center_direction:we,u_radius:s.degToRad(Ve),u_opacity:tt,u_temporal_offset:ut}))(ae.skyboxMatrix,U.getCenter(N,!1),U.paint.get("sky-gradient-radius"),ne,Y);N.prepareDrawProgram(W,ue),ue.draw(W,fe.TRIANGLES,X,s.StencilMode.disabled,N.colorModeForRenderPass(),s.CullFaceMode.backCW,ye,"skyboxGradient",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(f,c,L,x,z)},debug:function(f,i,c){for(let p=0;p<c.length;p++)va(f,i,c[p])},custom:function(f,i,c){const p=f.context,v=c.implementation;if(f.transform.projection.unsupportedLayers&&f.transform.projection.unsupportedLayers.includes("custom"))s.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(f.renderPass==="offscreen"){const x=v.prerender;x&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),x.call(v,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(s.StencilMode.disabled);const x=v.renderingMode==="3d"?new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,s.DepthMode.ReadOnly);p.setDepthMode(x),v.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class ba{constructor(i,c){this.context=new $(i),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xa,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this._tileClippingMaskIDs=new Map,this._skippedStencilTileIDs=new Set}updateTerrain(i,c){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Rr(this,i));const v=this._terrain;this.transform.elevation=p?v:null,v.update(i,this.transform,c)}_updateFog(i){const c=i.fog;if(!c||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,v]=c.getFovAdjustedRange(this.transform._fov);if(p>v)return void(this.transform.fogCullDistSq=null);const x=p+.78*(v-p);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,c){if(this.width=i*s.exported.devicePixelRatio,this.height=c*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._layers[p].resize()}setup(){const i=this.context,c=new s.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const p=new s.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(s.EXTENT,0),p.emplaceBack(0,s.EXTENT),p.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(p,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const v=new s.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const x=new s.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(s.EXTENT,0,s.EXTENT,0),x.emplaceBack(0,s.EXTENT,0,s.EXTENT),x.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(x,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const E=new s.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);const A=new s.StructArrayLayout1ui2;for(const z of[0,1,3,2,0])A.emplaceBack(z);this.debugIndexBuffer=i.createIndexBuffer(A),this.emptyTexture=new s.Texture(i,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.create();const L=this.context.gl;this.stencilClearMode=new s.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(s.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear(),this.useProgram("clippingMask").draw(i,c.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Nl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear())}_renderTileClippingMasks(i,c,p){if(!c||this.currentStencilSource===c.id||!i.isTileClipped()||!p||p.length===0)return;const v=[];let x=!1;if(this._tileClippingMaskIDs&&!this.terrain){for(const N of p)if(this._tileClippingMaskIDs.has(N.key)||(x=!0),this._skippedStencilTileIDs.has(N.key)){if(!c.getTile(N).getBucket(i))continue;this._skippedStencilTileIDs.delete(N.key),v.push(N)}if(!x&&v.length===0)return}const E=this.context,A=E.gl;E.setColorMode(s.ColorMode.disabled),E.setDepthMode(s.DepthMode.disabled);const L=this.useProgram("clippingMask"),z=N=>{const U=c.getTile(N),{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:Y}=this.getTileBoundsBuffers(U);L.draw(E,A.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:A.GREATER,mask:255},this._tileClippingMaskIDs.get(N.key)||0,255,A.KEEP,A.KEEP,A.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Nl(N.projMatrix),"$clipping",X,ne,Y)};if(!x&&v.length>0)for(const N of v)z(N);else{(this._tileClippingMaskIDs.size===0||this.nextStencilID+p.length>256)&&this.clearStencil(),this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear();for(const N of p)this._tileClippingMaskIDs.set(N.key,this.nextStencilID++),c.getTile(N).getBucket(i)?z(N):this._skippedStencilTileIDs.add(N.key)}this._skippedStencilTileIDs.size===0&&(this.currentStencilSource=c.id)}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new s.StencilMode({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const c=this.context.gl;return new s.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs.get(i.key)||0,0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((E,A)=>A.overscaledZ-E.overscaledZ),v=p[p.length-1].overscaledZ,x=p[0].overscaledZ-v+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let A=0;A<x;A++)E[A+v]=new s.StencilMode({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[E,p]}return[{[v]:s.StencilMode.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;if(this._showOverdrawInspector){const c=1/8;return new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(c,c,c,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(p||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const p=this.style.order,v=this.style._sourceCaches;for(const z in v){const N=v[z];N.used&&N.prepare(this.context)}const x={},E={},A={};for(const z in v){const N=v[z];x[z]=N.getVisibleCoordinates(),E[z]=x[z].slice().reverse(),A[z]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<p.length;z++)if(this.style._layers[p[z]].is3D()){this.opaquePassCutoff=z;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const z of p){const N=this.style._layers[z],U=i._getLayerSourceCache(N);if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const X=U?E[U.id]:void 0;(N.type==="custom"||N.isSky()||X&&X.length)&&this.renderLayer(this,U,N,X)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let L=s.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(L=this.style.fog.properties.get("color")),this.context.clear({color:c.showOverdrawInspector?s.Color.black:L,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(z);if(z.isSky())continue;const U=N?E[N.id]:void 0;this._renderTileClippingMasks(z,N,U),this.renderLayer(this,N,z,U)}if(this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const z=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,N,z,N?E[N.id]:void 0)}for(this.transform.projection.name==="globe"&&function(z){const N=z.context,U=N.gl,X=z.transform,ne=new s.DepthMode(U.LEQUAL,s.DepthMode.ReadOnly,[0,1]),Y=z.useProgram("globeAtmosphere"),W=X.centerOffset,fe=X._camera.getCameraToClipPerspective(X._fov,X.width/X.height,X._nearZ,X._farZ);fe[8]=2*-W.x/X.width,fe[9]=2*W.y/X.height;const ae=s.invert([],fe),ue=s.mul([],ae,X.projMatrix),he={u_frustum_tl:rs([-1,1,1],ae),u_frustum_tr:rs([1,1,1],ae),u_frustum_br:rs([1,-1,1],ae),u_frustum_bl:rs([-1,-1,1],ae),u_globe_pos:rs([X.globeMatrix[12],X.globeMatrix[13],X.globeMatrix[14]],ue),u_globe_radius:X.worldSize/2/Math.PI-1,u_opacity:1-s.globeToMercatorTransition(X.zoom),u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};z.prepareDrawProgram(N,Y);const ye=z.globeSharedBuffers;ye&&Y.draw(N,U.TRIANGLES,ne,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,he,"skybox",ye.atmosphereVertexBuffer,ye.atmosphereIndexBuffer,ye.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;){const z=this.style._layers[p[this.currentLayer]],N=i._getLayerSourceCache(z);if(z.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const U=N?(z.type==="symbol"?A:E)[N.id]:void 0;this._renderTileClippingMasks(z,N,N?x[N.id]:void 0),this.renderLayer(this,N,z,U),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let z=null;s.values(this.style._layers).forEach(N=>{const U=i._getLayerSourceCache(N);U&&!N.isHidden(this.transform.zoom)&&(!z||z.getSource().maxzoom<U.getSource().maxzoom)&&(z=U)}),z&&this.options.showTileBoundaries&&Jl.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const N=z.transform.padding;Wt(z,z.transform.height-(N.top||0),3,ya),Wt(z,N.bottom||0,3,Yl),Xr(z,N.left||0,3,au),Xr(z,z.transform.width-(N.right||0),3,Kl);const U=z.transform.centerPoint;(function(X,ne,Y,W){is(X,ne-1,Y-10,2,20,W),is(X,ne-10,Y-1,20,2,W)})(z,U.x,z.transform.height-U.y,ns)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,c,p,v){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="sky"||p.type==="custom"||v&&v.length)&&(this.id=p.id,this.gpuTimingStart(p),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(p.type)||Jl[p.type](i,c,p,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),p.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const p in i){const v=i[p],x=this.context.extTimerQuery,E=x.getQueryObjectEXT(v.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(v.query),c[p]=E}return c}translatePosMatrix(i,c,p,v,x){if(!p[0]&&!p[1])return i;const E=x?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(E){const z=Math.sin(E),N=Math.cos(E);p=[p[0]*N-p[1]*z,p[0]*z+p[1]*N]}const A=[x?p[0]:dn(c,p[0],this.transform.zoom),x?p[1]:dn(c,p[1],this.transform.zoom),0],L=new Float32Array(16);return s.translate(L,i,A),L}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,c=this.style&&this.style.fog,p=[];return this.terrain&&!this.terrain.renderingToTexture&&p.push("TERRAIN"),c&&!i&&c.getOpacity(this.transform.pitch)!==0&&p.push("FOG"),i&&p.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&p.push("OVERDRAW_INSPECTOR"),p}useProgram(i,c,p){this.cache=this.cache||{};const v=p||[],x=this.currentGlobalDefines().concat(v),E=fa.cacheKey(i,x,c);return this.cache[E]||(this.cache[E]=new fa(this.context,i,Ka[i],c,Jn[i],x)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,c,p){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const x=v.getOpacity(this.transform.pitch);x!==0&&c.setFogUniformValues(i,((E,A,L,z)=>{const N=A.properties.get("color"),U=E.frameCounter/1e3%1,X=[N.r/N.a,N.g/N.a,N.b/N.a,z];return{u_fog_matrix:L?E.transform.calculateFogTileMatrix(L):E.identityMat,u_fog_range:A.getFovAdjustedRange(E.transform._fov),u_fog_color:X,u_fog_horizon_blend:A.properties.get("horizon-blend"),u_fog_temporal_offset:U}})(this,v,p,x))}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,c=i.createTexture();return i.bindTexture(i.TEXTURE_2D,c),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,c=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const v of p)c[v.key]=i[v.key]||new s.Tile(v,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class yo{constructor(i=0,c=0,p=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=v}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=s.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=s.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=s.number(i.right,c.right,p)),this}getCenter(i,c){const p=s.clamp((this.left+i-this.right)/2,0,i),v=s.clamp((this.top+c-this.bottom)/2,0,c);return new s.pointGeometry(p,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new yo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Mh(f,i){const c=s.getColumn(f,3);s.fromQuat(f,i),s.setColumn(f,3,c)}function Ql(f,i){const c=s.identity$1([]);return s.rotateZ$1(c,c,-i),s.rotateX$1(c,c,-f),c}function Cs(f,i){const c=[f[0],f[1],0],p=[i[0],i[1],0];if(s.length(c)>=1e-15){const E=s.normalize([],c);s.scale$2(p,E,s.dot(p,E)),i[0]=p[0],i[1]=p[1]}const v=s.cross([],i,f);if(s.len(v)<1e-15)return null;const x=Math.atan2(-v[1],v[0]);return Ql(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),x)}class Z{constructor(i,c){this.position=i,this.orientation=c}get position(){return this._position}set position(i){if(i){const c=i instanceof s.MercatorCoordinate?i:new s.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(c.x=s.wrap(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(i,c){if(this.orientation=null,!this.position)return;const p=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,v=this.position,x=s.MercatorCoordinate.fromLngLat(i,p),E=[x.x-v.x,x.y-v.y,x.z-v.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=Cs(E,c)}setPitchBearing(i,c){this.orientation=Ql(s.degToRad(i),s.degToRad(-c))}}class S{constructor(i,c){this._transform=s.identity([]),this.orientation=c,this.position=i}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var c;i&&s.setColumn(this._transform,3,[(c=i)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.identity$1([]),i&&Mh(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,c){this._orientation=Ql(i,c),Mh(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,c){const p=new Float64Array(16);return s.invert(p,this.getWorldToCamera(i,c)),p}getWorldToCameraPosition(i,c,p){const v=this.position;s.scale$2(v,v,-i);const x=new Float64Array(16);return s.fromScaling(x,[p,p,p]),s.translate(x,x,v),x[10]*=c,x}getWorldToCamera(i,c){const p=new Float64Array(16),v=new Float64Array(4),x=this.position;return s.conjugate(v,this._orientation),s.scale$2(x,x,-i),s.fromQuat(p,v),s.translate(p,p,x),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=c,p[9]*=c,p[10]*=c,p[11]*=c,p}getCameraToClipPerspective(i,c,p,v){const x=new Float64Array(16);return s.perspective(x,i,c,p,v),x}getDistanceToElevation(i){const c=i===0?0:s.mercatorZfromAltitude(i,this.position[1]),p=this.forward();return(c-this.position[2])/p[2]}clone(){return new S([...this.position],[...this.orientation])}}function R(f,i){const c=be(f),p=function(x,E,A,L,z){const N=new s.LngLat(A.lng-180*De,A.lat),U=new s.LngLat(A.lng+180*De,A.lat),X=x.project(N.lng,N.lat),ne=x.project(U.lng,U.lat),Y=-Math.atan2(ne.y-X.y,ne.x-X.x),W=s.MercatorCoordinate.fromLngLat(A);W.y=s.clamp(W.y,-.999975,.999975);const fe=W.toLngLat(),ae=x.project(fe.lng,fe.lat),ue=s.MercatorCoordinate.fromLngLat(fe);ue.x+=De;const he=ue.toLngLat(),ye=x.project(he.lng,he.lat),ce=At(ye.x-ae.x,ye.y-ae.y,Y),we=s.MercatorCoordinate.fromLngLat(fe);we.y+=De;const Ve=we.toLngLat(),tt=x.project(Ve.lng,Ve.lat),ut=At(tt.x-ae.x,tt.y-ae.y,Y),st=Math.abs(ce.x)/Math.abs(ut.y),Dt=s.identity([]);s.rotateZ(Dt,Dt,-Y*(1-(z?0:L)));const Ge=s.identity([]);return s.scale(Ge,Ge,[1,1-(1-st)*L,1]),Ge[4]=-ut.x/ut.y*L,s.rotateZ(Ge,Ge,Y),s.multiply$1(Ge,Dt,Ge),Ge}(f.projection,0,f.center,c,i),v=ie(f);return s.scale(p,p,[v,v,1]),p}function ie(f){const i=f.projection,c=be(f),p=Je(i,f.center),v=Je(i,s.LngLat.convert(i.center));return Math.pow(2,p*c+(1-c)*v)}function be(f){const i=f.projection.range;if(!i)return 0;const c=Math.max(f.width,f.height),p=Math.log(c/1024)/Math.LN2;return s.smoothstep(i[0]+p,i[1]+p,f.zoom)}const De=1/4e4;function Je(f,i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=new s.LngLat(i.lng-180*De,c),v=new s.LngLat(i.lng+180*De,c),x=f.project(p.lng,c),E=f.project(v.lng,c),A=s.MercatorCoordinate.fromLngLat(p),L=s.MercatorCoordinate.fromLngLat(v),z=E.x-x.x,N=E.y-x.y,U=L.x-A.x,X=L.y-A.y,ne=Math.sqrt((U*U+X*X)/(z*z+N*N));return Math.log(ne)/Math.LN2}function At(f,i,c){const p=Math.cos(c),v=Math.sin(c);return{x:f*p-i*v,y:f*v+i*p}}class Ht{constructor(i,c,p,v,x,E,A){this.tileSize=512,this._renderWorldCopies=x===void 0||x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p==null?0:p,this._maxPitch=v==null?60:v,this.setProjection(E),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new yo,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new S,this._centerAltitude=0,this._centerAltitudeValidForExaggeration=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const i=new Ht(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i){const c=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||c)&&this._updateCameraOnTerrain(),(i||c)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){i==null&&(i={name:"mercator"}),this.projectionOptions=i;const c=this.projection?this.getProjection():void 0;this.projection=s.getProjection(i);const p=this.getProjection();return D(c,p)?null:(this._calcMatrices(),p)}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const c=-i*Math.PI/180;var p;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(p=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(v,x,E){var A=x[0],L=x[1],z=x[2],N=x[3],U=Math.sin(E),X=Math.cos(E);v[0]=A*X+z*U,v[1]=L*X+N*U,v[2]=A*-U+z*X,v[3]=L*-U+N*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let v=0,x=0;for(let E=0;E<c.length;E++){const A=new s.pointGeometry(c[E][0]*this.width,p+c[E][1]*(this.height-p)),L=i.pointCoordinate(A);if(!L)continue;const z=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);v+=L[3]*z,x+=z}return x===0?NaN:v/x}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*c,v=this._mercatorZfromZoom(i),x=this._mercatorZfromZoom(this._maxZoom),E=Math.max(v-p,x);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[c.x,c.y,c.z]:[i.x,i.y,i.z];const v=s.length(s.sub([],this._camera.position,p));return s.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let c=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(p,this._camera.position)||(this._setCameraPosition(p),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,c=new Z;return c.position=new s.MercatorCoordinate(i[0],i[1],i[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const c=s.transformQuat([],[0,0,-1],i),p=s.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const v=Cs(c,p);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(i){const c=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;i[2]=s.clamp(i[2],v/p,v/c),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new s.pointGeometry(0,0)),v=this.pointCoordinate(new s.pointGeometry(this.width,0)),x=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),E=this.pointCoordinate(new s.pointGeometry(0,this.height)),A=Math.floor(Math.min(p.x,v.x,x.x,E.x)),L=Math.floor(Math.max(p.x,v.x,x.x,E.x)),z=1;for(let N=A-z;N<=L+z;N++)N!==0&&c.push(new s.UnwrappedTileID(N,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const p=c,v=this.elevation&&!i.isTerrainDEM,x=this.projection.name==="mercator";if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const E=this.locationCoordinate(this.center),A=this.center.lat,L=1<<c,z=[L*E.x,L*E.y,0],N=this.projection.name==="globe",U=!N,X=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,U),ne=N?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Y=L*s.mercatorZfromAltitude(1,this.center.lat),W=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),fe=[L*ne.x,L*ne.y,W*(U?1:Y)],ae=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),ue=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,he=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ye=i.isTerrainDEM?-he:this._elevation?this._elevation.getMinElevationBelowMSL():0,ce=this.projection.isReprojectedInTileSpace?ie(this):1,we=ft=>{const Jt=1/4e4,yn=new s.MercatorCoordinate(ft.x+Jt,ft.y,ft.z),en=new s.MercatorCoordinate(ft.x,ft.y+Jt,ft.z),tn=ft.toLngLat(),xn=yn.toLngLat(),Bn=en.toLngLat(),_n=this.locationCoordinate(tn),wn=this.locationCoordinate(xn),ii=this.locationCoordinate(Bn),Bi=Math.hypot(wn.x-_n.x,wn.y-_n.y),Br=Math.hypot(ii.x-_n.x,ii.y-_n.y);return Math.sqrt(Bi*Br)*ce/Jt},Ve=ft=>{const Jt=he,yn=ye;return{aabb:s.tileAABB(this,L,0,0,0,ft,yn,Jt,this.projection),zoom:0,x:0,y:0,minZ:yn,maxZ:Jt,wrap:ft,fullyVisible:!1}},tt=[];let ut=[];const st=c,Dt=i.reparseOverscaled?p:c,Ge=ft=>ft*ft,Ot=Ge((W-this._centerAltitude)*Y),Mt=ft=>{if(!this._elevation||!ft.tileID||!x)return;const Jt=this._elevation.getMinMaxForTile(ft.tileID),yn=ft.aabb;Jt?(yn.min[2]=Jt.min,yn.max[2]=Jt.max,yn.center[2]=(yn.min[2]+yn.max[2])/2):(ft.shouldSplit=nn(ft),ft.shouldSplit||(yn.min[2]=yn.max[2]=yn.center[2]=this._centerAltitude))},nn=ft=>{if(ft.zoom<ue)return!0;if(ft.zoom===st)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const Jt=ft.aabb.distanceX(fe),yn=ft.aabb.distanceY(fe);let en=Ot,tn=1;if(N){en=Ge(ft.aabb.distanceZ(fe));const Bn=Math.pow(2,ft.zoom),_n=s.latFromMercatorY((ft.y+1)/Bn),wn=s.latFromMercatorY(ft.y/Bn),ii=Math.min(Math.max(A,_n),wn),Bi=s.circumferenceAtLatitude(ii)/s.circumferenceAtLatitude(A);tn=Math.min(Bi,1)}else if(v&&(en=Ge(ft.aabb.distanceZ(fe)*Y)),this.projection.isReprojectedInTileSpace&&p<=5){const Bn=Math.pow(2,ft.zoom),_n=we(new s.MercatorCoordinate((ft.x+.5)/Bn,(ft.y+.5)/Bn));tn=_n>.85?1:_n}const xn=Jt*Jt+yn*yn+en;return xn<Ge((1<<st-ft.zoom)*ae*tn*((Bn,_n)=>{if(_n*Ge(.707)<Bn)return 1;const wn=Math.sqrt(_n/Bn);return wn/(1.4144271570014144+(Math.pow(1.1,wn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(en,Ot),xn))};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)tt.push(Ve(-ft)),tt.push(Ve(ft));for(tt.push(Ve(0));tt.length>0;){const ft=tt.pop(),Jt=ft.x,yn=ft.y;let en=ft.fullyVisible;if(!en){const tn=ft.aabb.intersects(X);if(tn===0)continue;en=tn===2}if(ft.zoom!==st&&nn(ft))for(let tn=0;tn<4;tn++){const xn=(Jt<<1)+tn%2,Bn=(yn<<1)+(tn>>1),_n={aabb:x?ft.aabb.quadrant(tn):s.tileAABB(this,L,ft.zoom+1,xn,Bn,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:xn,y:Bn,wrap:ft.wrap,fullyVisible:en,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};v&&!N&&(_n.tileID=new s.OverscaledTileID(ft.zoom+1===st?Dt:ft.zoom+1,ft.wrap,ft.zoom+1,xn,Bn),Mt(_n)),tt.push(_n)}else{const tn=ft.zoom===st?Dt:ft.zoom;if(i.minzoom&&i.minzoom>tn)continue;const xn=z[0]-(.5+Jt+(ft.wrap<<ft.zoom))*(1<<c-ft.zoom),Bn=z[1]-.5-yn,_n=ft.tileID?ft.tileID:new s.OverscaledTileID(tn,ft.wrap,ft.zoom,Jt,yn);ut.push({tileID:_n,distanceSq:xn*xn+Bn*Bn})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,Jt=this.horizonLineFromTop();ut=ut.filter(yn=>{const en=[0,0,0,1],tn=[s.EXTENT,s.EXTENT,0,1],xn=this.calculateFogTileMatrix(yn.tileID.toUnwrapped());s.transformMat4$1(en,en,xn),s.transformMat4$1(tn,tn,xn);const Bn=s.getAABBPointSquareDist(en,tn);if(Bn===0)return!0;let _n=!1;const wn=this._elevation;if(wn&&Bn>ft&&Jt!==0){const ii=this.calculateProjMatrix(yn.tileID.toUnwrapped());let Bi;i.isTerrainDEM||(Bi=wn.getMinMaxForTile(yn.tileID)),Bi||(Bi={min:ye,max:he});const Br=s.furthestTileCorner(this.rotation),Fr=[Br[0]*s.EXTENT,Br[1]*s.EXTENT,Bi.max];s.transformMat4(Fr,Fr,ii),_n=(1-Fr[1])*this.height*.5<Jt}return Bn<ft||_n})}return ut.sort((ft,Jt)=>ft.distanceSq-Jt.distanceSq).map(ft=>ft.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=this.projection.project(i.lng,c);return new s.pointGeometry(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,c){let p,v;const x=this.centerPoint;if(this.projection.name==="globe"){const A=this.worldSize;p=(c.x-x.x)/A,v=(c.y-x.y)/A}else{const A=this.pointCoordinate(c),L=this.pointCoordinate(x);p=A.x-L.x,v=A.y-L.y}const E=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(E.x-p,E.y-v))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this._coordinatePoint(this.locationCoordinate(i),!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,c){const p=c?s.mercatorZfromAltitude(c,i.lat):void 0,v=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(v.x,v.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,c){const p=c!=null?c:this._centerAltitude,v=[i.x,i.y,0,1],x=[i.x,i.y,1,1];s.transformMat4$1(v,v,this.pixelMatrixInverse),s.transformMat4$1(x,x,this.pixelMatrixInverse);const E=x[3];s.scale$1(v,v,1/v[3]),s.scale$1(x,x,1/E);const A=v[2],L=x[2];return{p0:v,p1:x,t:A===L?0:(p-A)/(L-A)}}screenPointToMercatorRay(i){const c=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return s.transformMat4$1(c,c,this.pixelMatrixInverse),s.transformMat4$1(p,p,this.pixelMatrixInverse),s.scale$1(c,c,1/c[3]),s.scale$1(p,p,1/p[3]),c[2]=s.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,p[2]=s.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,s.scale$1(c,c,1/this.worldSize),s.scale$1(p,p,1/this.worldSize),new s.Ray([c[0],c[1],c[2]],s.normalize([],s.sub([],p,c)))}rayIntersectionCoordinate(i){const{p0:c,p1:p,t:v}=i,x=s.mercatorZfromAltitude(c[2],this._center.lat),E=s.mercatorZfromAltitude(p[2],this._center.lat);return new s.MercatorCoordinate(s.number(c[0],p[0],v)/this.worldSize,s.number(c[1],p[1],v)/this.worldSize,s.number(x,E,v))}pointCoordinate(i,c=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,c)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);const c=this.elevation;let p=this.elevation.pointCoordinate(i);if(p)return new s.MercatorCoordinate(p[0],p[1],p[2]);let v=0,x=this.horizonLineFromTop();if(i.y>x)return this.pointCoordinate(i);const E=.02*x,A=i.clone();for(let L=0;L<10&&x-v>E;L++){A.y=s.number(v,x,.66);const z=c.pointCoordinate(A);z?(x=A.y,p=z):v=A.y}return p?new s.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){if(this.elevation)return!this.elevation.pointCoordinate(i);{const c=this.horizonLineFromTop();return i.y<c}}_coordinatePoint(i,c){const p=c&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,v=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return s.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new s.pointGeometry(v[0]/v[3],v[1]/v[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(i,c){const p=new s.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),v=new s.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),x=new s.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),E=new s.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let A=this.pointCoordinate(p,i),L=this.pointCoordinate(v,i);const z=this.pointCoordinate(x,c),N=this.pointCoordinate(E,c),U=(X,ne)=>(ne.y-X.y)/(ne.x-X.x);return A.y>1&&L.y>=0?A=new s.MercatorCoordinate((1-N.y)/U(N,A)+N.x,1):A.y<0&&L.y<=1&&(A=new s.MercatorCoordinate(-N.y/U(N,A)+N.x,0)),L.y>1&&A.y>=0?L=new s.MercatorCoordinate((1-z.y)/U(z,L)+z.x,1):L.y<0&&A.y<=1&&(L=new s.MercatorCoordinate(-z.y/U(z,L)+z.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(A)).extend(this.coordinateLocation(L)).extend(this.coordinateLocation(N)).extend(this.coordinateLocation(z))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length)return this._getBounds(0,0);const c=i.visibleDemTiles.reduce((p,v)=>{if(v.dem){const x=v.dem.tree;p.min=Math.min(p.min,x.minimums[0]),p.max=Math.max(p.max,x.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBounds(c.min*i.exaggeration(),c.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,p=this.height/2-c*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,c){return this.projection.createTileMatrix(this,c,i)}calculateDistanceTileData(i){const c=i.key,p=this._distanceTileDataCache;if(p[c])return p[c];const v=i.canonical,x=1/this.height,E=this.cameraWorldSize/this.zoomScale(v.z),A=(v.x+Math.pow(2,v.z)*i.wrap)*E,L=v.y*E,z=this.point,N=this.angle,U=Math.sin(-N),X=-Math.cos(-N);return p[c]={bearing:[U,X],center:[(z.x-A)*x,(z.y-L)*x],scale:E/s.EXTENT*x},p[c]}calculateFogTileMatrix(i){const c=i.key,p=this._fogTileMatrixCache;if(p[c])return p[c];const v=this.calculatePosMatrix(i,this.cameraWorldSize);return s.multiply$1(v,this.worldToFogMatrix,v),p[c]=new Float32Array(v),p[c]}calculateProjMatrix(i,c=!1){const p=i.key,v=c?this._alignedProjMatrixCache:this._projMatrixCache;if(v[p])return v[p];const x=this.calculatePosMatrix(i,this.worldSize);return s.multiply$1(x,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,x),v[p]=new Float32Array(x),v[p]}calculatePixelsToTileUnitsMatrix(i){const c=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[c])return p[c];const v=function(x,E){const{scale:A}=x.tileTransform,L=A*s.EXTENT/(x.tileSize*Math.pow(2,E.zoom-x.tileID.overscaledZ+x.tileID.canonical.z));return z=new Float32Array(4),X=(N=E.inverseAdjustmentMatrix)[1],ne=N[2],Y=N[3],fe=(U=[L,L])[1],z[0]=N[0]*(W=U[0]),z[1]=X*W,z[2]=ne*fe,z[3]=Y*fe,z;var z,N,U,X,ne,Y,W,fe}(i,this);return p[c]=v,p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(c),v=this._camera.forward(),x=s.mercatorZfromAltitude(1,this._center.lat);p[2]/=x,v[2]/=x,s.normalize(v,v);const E=i.raycast(p,v,i.exaggeration());if(E){const A=s.scaleAndAdd([],p,v,E),L=new s.MercatorCoordinate(A[0],A[1],s.mercatorZfromAltitude(A[2],s.latFromMercatorY(A[1]))),z=(L.z+s.length([L.x-p[0],L.y-p[1],L.z-p[2]*x]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(c),v=i.getAtPointOrZero(new s.MercatorCoordinate(...p)),x=this._minimumHeightOverTerrain()*Math.cos(s.degToRad(this._maxPitch)),E=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*v;if(E<x){const A=this.locationCoordinate(this._center,this._centerAltitude),L=[A.x-p[0],A.y-p[1],A.z-p[2]],z=s.length(L);L[2]-=(x-E)/this._projectionScaler;const N=s.length(L);if(N===0)return;s.scale$2(L,L,z/N*this._projectionScaler),this._camera.position=[A.x-L[0],A.y-L[1],A.z*this._projectionScaler-L[2]],this._camera.orientation=Cs(L,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const U=this.center;return U.lat=s.clamp(U.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(U.lng=s.clamp(U.lng,this.minLng,this.maxLng)),this.center=U,void(this._constraining=!1)}const i=this._unmodified,{x:c,y:p}=this.point;let v=0,x=c,E=p;const A=this.width/2,L=this.height/2,z=this.worldMinY*this.scale,N=this.worldMaxY*this.scale;if(p-L<z&&(E=z+L),p+L>N&&(E=N-L),N-z<this.height&&(v=Math.max(v,this.height/(N-z)),E=(N+z)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const U=this.worldMinX*this.scale,X=this.worldMaxX*this.scale,ne=this.worldSize/2-(U+X)/2;x=(c+ne+this.worldSize)%this.worldSize-ne,x-A<U&&(x=U+A),x+A>X&&(x=X-A),X-U<this.width&&(v=Math.max(v,this.width/(X-U)),x=(X+U)/2)}x===c&&E===p||(this.center=this.unproject(new s.pointGeometry(x,E))),v&&(this.zoom+=this.scaleZoom(v)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this._fov/2,c=this.centerOffset,p=this.pixelsPerMeter;this._projectionScaler=p/(s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(i)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?p:1),x=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);x[8]=2*-c.x/this.width,x[9]=2*c.y/this.height;let E=s.mul([],x,v);if(this.projection.isReprojectedInTileSpace){const ye=this.locationCoordinate(this.center),ce=s.identity([]);s.translate(ce,ce,[ye.x*this.worldSize,ye.y*this.worldSize,0]),s.multiply$1(ce,ce,R(this)),s.translate(ce,ce,[-ye.x*this.worldSize,-ye.y*this.worldSize,0]),s.multiply$1(E,E,ce),this.inverseAdjustmentMatrix=function(we){const Ve=R(we,!0);return nt([],[Ve[0],Ve[1],Ve[4],Ve[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],E,[this.worldSize,this.worldSize,this.worldSize/p,1]),this.projMatrix=E,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const A=new Float32Array(16);s.identity(A),s.scale(A,A,[1,-1,1]),s.rotateX(A,A,this._pitch),s.rotateZ(A,A,this.angle);const L=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;L[8]=2*-c.x/this.width,L[9]=2*(c.y+z)/this.height,this.skyboxMatrix=s.multiply$1(A,L,A);const N=this.point,U=N.x,X=N.y,ne=this.width%2/2,Y=this.height%2/2,W=Math.cos(this.angle),fe=Math.sin(this.angle),ae=U-Math.round(U)+W*ne+fe*Y,ue=X-Math.round(X)+W*Y+fe*ne,he=new Float64Array(E);if(s.translate(he,he,[ae>.5?ae-1:ae,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=he,E=s.create(),s.scale(E,E,[this.width/2,-this.height/2,1]),s.translate(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=s.create(),s.scale(E,E,[1,-1,1]),s.translate(E,E,[-1,-1,0]),s.scale(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E,this.pixelMatrix=s.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},E=s.invert(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");this.pixelMatrixInverse=E,this.globeMatrix=this.projection.name==="globe"?s.calculateGlobeMatrix(this):E,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,c=this.cameraPixelsPerMeter,p=this._camera.position,v=1/this.height,x=[i,i,c];s.scale$2(x,x,v),s.scale$2(p,p,-1),s.multiply$2(p,p,x);const E=s.create();s.translate(E,E,p),s.scale(E,E,x),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,c,v)}_computeCameraPosition(i){const c=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),v=this.point,x=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-i/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-p[0]*x,v.y/this.worldSize-p[1]*x,i/this.worldSize*this._centerAltitude-p[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=i[2];let v=1;p>0&&(v=Math.min((c-this._camera.position[2])/p,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,v),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const i=this._camera.position,c=this._camera.forward(),{pitch:p,bearing:v}=this._camera.getPitchBearing(),x=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),A=Math.max((i[2]-x)/Math.cos(p),E),L=this._zoomFromMercatorZ(A);s.scaleAndAdd(i,i,c,A),this._pitch=s.clamp(p,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(v,-Math.PI,Math.PI),this._setZoom(s.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(i,c){const p=Math.min(i.x,c.x),v=Math.max(i.x,c.x),x=Math.min(i.y,c.y),E=Math.max(i.y,c.y);if(x<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const A=[new s.pointGeometry(p,x),new s.pointGeometry(v,E),new s.pointGeometry(p,E),new s.pointGeometry(v,x)],L=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const N of A){const U=this.pointRayIntersection(N);if(U.t<0)return!0;const X=this.rayIntersectionCoordinate(U);if(X.x<L||X.y<0||X.x>z||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,c){const p=s.length(s.sub([],this._camera.position,i)),v=this._zoomFromMercatorZ(p)+c;return p-this._mercatorZfromZoom(v)}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,i))}}function ln(f,i){let c=!1,p=null;const v=()=>{p=null,c&&(f(),p=setTimeout(v,i),c=!1)};return()=>(c=!0,p||v(),p)}class pn{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ln(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(i){const c=this._map;if(!c)return"";const p=c.getCenter(),v=Math.round(100*c.getZoom())/100,x=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,x),A=Math.round(p.lng*E)/E,L=Math.round(p.lat*E)/E,z=c.getBearing(),N=c.getPitch();let U="";if(U+=i?`/${A}/${L}/${v}`:`${v}/${L}/${A}`,(z||N)&&(U+="/"+Math.round(10*z)/10),N&&(U+=`/${Math.round(N)}`),this._hashName){const X=this._hashName;let ne=!1;const Y=s.window.location.hash.slice(1).split("&").map(W=>{const fe=W.split("=")[0];return fe===X?(ne=!0,`${fe}=${U}`):W}).filter(W=>W);return ne||Y.push(`${X}=${U}`),`#${Y.join("&")}`}return`#${U}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(c=p)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(c[3]||0):i.getBearing();return i.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}const $t={linearity:.3,easing:s.bezier(0,0,.3,1)},Xn=s.extend({deceleration:2500,maxSpeed:1400},$t),Pn=s.extend({deceleration:20,maxSpeed:1400},$t),Dn=s.extend({deceleration:1e3,maxSpeed:360},$t),$n=s.extend({deceleration:1e3,maxSpeed:90},$t);class Nn{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=s.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const x=Mn(c.pan.mag(),p,s.extend({},Xn,i||{}));v.offset=c.pan.mult(x.amount/c.pan.mag()),v.center=this._map.transform.center,di(v,x)}if(c.zoom){const x=Mn(c.zoom,p,Pn);v.zoom=this._map.transform.zoom+x.amount,di(v,x)}if(c.bearing){const x=Mn(c.bearing,p,Dn);v.bearing=this._map.transform.bearing+s.clamp(x.amount,-179,179),di(v,x)}if(c.pitch){const x=Mn(c.pitch,p,$n);v.pitch=this._map.transform.pitch+x.amount,di(v,x)}if(v.zoom||v.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;v.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function di(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function Mn(f,i,c){const{maxSpeed:p,linearity:v,deceleration:x}=c,E=s.clamp(f*v/(i/1e3),-p,p),A=Math.abs(E)/(x*v);return{easing:c.easing,duration:1e3*A,amount:E*(A/2)}}class Cn extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,v={}){const x=Ae(c.getCanvasContainer(),p),E=c.unproject(x);super(i,s.extend({point:x,lngLat:E,originalEvent:p},v)),this._defaultPrevented=!1,this.target=c}}class ni extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const v=i==="touchend"?p.changedTouches:p.touches,x=Pe(c.getCanvasContainer(),v),E=x.map(L=>c.unproject(L)),A=x.reduce((L,z,N,U)=>L.add(z.div(U.length)),new s.pointGeometry(0,0));super(i,{points:x,point:A,lngLats:E,lngLat:c.unproject(A),originalEvent:p}),this._defaultPrevented=!1}}class li extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class ci{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new li(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Cn(i.type,this._map,i))}mouseup(i){this._map.fire(new Cn(i.type,this._map,i))}preclick(i){const c=s.extend({},i);c.type="preclick",this._map.fire(new Cn(c.type,this._map,c))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Cn(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Cn(i.type,this._map,i))}mouseover(i){this._map.fire(new Cn(i.type,this._map,i))}mouseout(i){this._map.fire(new Cn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ni(i.type,this._map,i))}touchmove(i){this._map.fire(new ni(i.type,this._map,i))}touchend(i){this._map.fire(new ni(i.type,this._map,i))}touchcancel(i){this._map.fire(new ni(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Cn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Cn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _i{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(H(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=p,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(v.x,p.x),E=Math.max(v.x,p.x),A=Math.min(v.y,p.y),L=Math.max(v.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${x}px,${A}px)`,this._box.style.width=E-x+"px",this._box.style.height=L-A+"px")})}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,v=c;if(this.reset(),ke(),p.x!==v.x||p.y!==v.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),te(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new s.Event(i,{originalEvent:c}))}}function pi(f,i){const c={};for(let p=0;p<f.length;p++)c[f[p].identifier]=i[p];return c}class Di{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(v){const x=new s.pointGeometry(0,0);for(const E of v)x._add(E);return x.div(v.length)}(c),this.touches=pi(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const v=pi(p,c);for(const x in this.touches){const E=this.touches[x],A=v[x];(!A||A.dist(E)>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ji{constructor(i){this.singleTap=new Di(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const v=this.singleTap.touchend(i,c,p);if(v){const x=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(v)<30;if(x&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Bt{constructor(){this._zoomIn=new Ji({numTouches:1,numTaps:2}),this._zoomOut=new Ji({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const v=this._zoomIn.touchend(i,c,p),x=this._zoomOut.touchend(i,c,p);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(v)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ji={0:1,2:2};class Do{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const p=Qe(i);this._correctButton(i,p)&&(this._lastPoint=c,this._eventButton=p)}mousemoveWindow(i,c){const p=this._lastPoint;if(p){if(i.preventDefault(),this._eventButton!=null&&function(v,x){const E=ji[x];return v.buttons===void 0||(v.buttons&E)!==E}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(p,c)}}mouseupWindow(i){this._lastPoint&&Qe(i)===this._eventButton&&(this._moved&&ke(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yr extends Do{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Nr extends Do{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const p=.8*(c.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class hr extends Do{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const p=-.5*(c.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class Ni{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(p.length===1)return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.preventDefault(),this._calculateTransform(i,c,p)}}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const v=pi(p,c),x=new s.pointGeometry(0,0),E=new s.pointGeometry(0,0);let A=0;for(const z in v){const N=v[z],U=this._touches[z];U&&(x._add(N),E._add(N.sub(U)),A++,v[z]=N)}if(this._touches=v,A<this._minTouches||!E.mag())return;const L=E.div(A);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(A),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Oo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,c,p){return{}}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){const v=this._firstTwoTouches;if(!v)return;i.preventDefault();const[x,E]=v,A=fr(p,c,x),L=fr(p,c,E);if(!A||!L)return;const z=this._aroundCenter?null:A.add(L).div(2);return this._move([A,L],z,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[v,x]=this._firstTwoTouches,E=fr(p,c,v),A=fr(p,c,x);E&&A||(this._active&&ke(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fr(f,i,c){for(let p=0;p<f.length;p++)if(f[p].identifier===c)return i[p]}function gr(f,i){return Math.log(f/i)/Math.LN2}class Kr extends Oo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(gr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gr(this._distance,p),pinchAround:c}}}function wa(f,i){return 180*f.angleWith(i)/Math.PI}class Is extends Oo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wa(this._vector,p),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=wa(i,this._startVector);return Math.abs(p)<c}}function zo(f){return Math.abs(f.y)>Math.abs(f.x)}class ec extends Oo{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,zo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){const v=this._lastPoints;if(!v)return;const x=i[0].sub(v[0]),E=i[1].sub(v[1]);return this._map._cooperativeGestures&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(x,E,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(x.y+E.y)/2*-.5})}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,x=c.mag()>=2;if(!v&&!x)return;if(!v||!x)return this._firstMove==null&&(this._firstMove=p),p-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return zo(i)&&zo(c)&&E}}const kh={panStep:100,bearingStep:15,pitchStep:10};class tc{constructor(){const i=kh;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,v=0,x=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:A=>{const L=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:Lh,zoom:c?Math.round(L)+c*(i.shiftKey?2:1):L,bearing:A.getBearing()+p*this._bearingStep,pitch:A.getPitch()+v*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:A.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lh(f){return f*(2-f)}const nc=4.000244140625;class cu{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=s.exported.now(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%nc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Ae(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,c=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>nc?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&z!==0&&(z=1/z);const N=c(),U=Math.pow(2,N),X=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):U;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(X*z))),this._type==="wheel"&&(this._startZoom=c(),this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:c(),v=this._startZoom,x=this._easing;let E,A=!1;if(this._type==="wheel"&&v&&x){const L=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),z=x(L);E=s.number(v,p,z),L<1?this._frameId||(this._frameId=!0):A=!0}else E=p,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:E-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=s.ease;if(this._prevEase){const p=this._prevEase,v=(s.exported.now()-p.start)/p.duration,x=p.easing(v+.01)-p.easing(v),E=.27/Math.sqrt(x*x+1e-4)*.01,A=Math.sqrt(.0729-E*E);c=s.bezier(E,A,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!s.window.document.fullscreenElement||!!s.window.document.webkitFullscreenElement}_showBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class uu{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hu{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fu{constructor(){this._tap=new Ji({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,c,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=c[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,c,p))}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=c[0],x=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,c,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ph{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sl{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class du{constructor(i,c,p,v){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ea=f=>f.zoom||f.drag||f.pitch||f.rotate;class ic extends s.Event{}class Op{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,c){const p=s.sub([],c,i);this.radius=s.length(p[2]<0?s.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const c=s.scale$2([],i,this.radius);if(c[2]>0){const p=s.scale$2([],[0,0,1],s.dot(c,[0,0,1])),v=s.scale$2([],s.normalize([],[c[0],c[1],0]),this.radius),x=s.add([],c,s.scale$2([],s.sub([],s.add([],v,p),c),2));c[0]=x[0],c[1]=x[1]}return c}}function rc(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class zp{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nn(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Op,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),s.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[v,x,E]of this._listeners)v.addEventListener(x,v===s.window.document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,p]of this._listeners)i.removeEventListener(c,i===s.window.document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new ci(c,i));const v=c.boxZoom=new _i(c,i);this._add("boxZoom",v);const x=new Bt,E=new hu;c.doubleClickZoom=new uu(E,x),this._add("tapZoom",x),this._add("clickZoom",E);const A=new fu;this._add("tapDragZoom",A);const L=c.touchPitch=new ec(c);this._add("touchPitch",L);const z=new Nr(i),N=new hr(i);c.dragRotate=new sl(i,z,N),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const U=new Yr(i),X=new Ni(c,i);c.dragPan=new Ph(p,U,X),this._add("mousePan",U),this._add("touchPan",X,["touchZoom","touchRotate"]);const ne=new Is,Y=new Kr;c.touchZoomRotate=new du(p,Y,ne,A),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Qn(c));const W=c.scrollZoom=new cu(c,this);this._add("scrollZoom",W,["mousePan"]);const fe=c.keyboard=new tc;this._add("keyboard",fe);for(const ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[ae]&&c[ae].enable(i[ae])}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ea(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const v in i)if(v!==p&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}handleEvent(i,c){this._updatingCamera=!0;const p=i.type==="renderFrame",v=p?void 0:i,x={needsRenderFrame:!1},E={},A={},L=i.touches?this._getMapTouches(i.touches):void 0,z=L?Pe(this._el,L):p?void 0:Ae(this._el,i);for(const{handlerName:X,handler:ne,allowed:Y}of this._handlers){if(!ne.isEnabled())continue;let W;this._blockedByActive(A,Y,X)?ne.reset():ne[c||i.type]&&(W=ne[c||i.type](i,z,L),this.mergeHandlerResult(x,E,W,X,v),W&&W.needsRenderFrame&&this._triggerRenderFrame()),(W||ne.isActive())&&(A[X]=ne)}const N={};for(const X in this._previousActiveHandlers)A[X]||(N[X]=v);this._previousActiveHandlers=A,(Object.keys(N).length||rc(x))&&(this._changes.push([x,E,N]),this._triggerRenderFrame()),(Object.keys(A).length||rc(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=x;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))}mergeHandlerResult(i,c,p,v,x){if(!p)return;s.extend(i,p);const E={handlerName:v,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(c.zoom=E),p.panDelta!==void 0&&(c.drag=E),p.pitchDelta!==void 0&&(c.pitch=E),p.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},p={};for(const[v,x,E]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new s.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.aroundCoord!==void 0&&(i.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),s.extend(c,x),s.extend(p,E);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const v=this._map,x=v.transform,E=ue=>[ue.x,ue.y,ue.z];if((ue=>{const he=this._eventsInProgress.drag;return he&&!this._handlersById[he.handlerName].isActive()})()&&!rc(i)){const ue=x.zoom;x.cameraElevationReference="sea",x.recenterOnTerrain(),x.cameraElevationReference="ground",ue!==x.zoom&&this._map._update(!0)}if(!rc(i))return void this._fireEvents(c,p,!0);let{panDelta:A,zoomDelta:L,bearingDelta:z,pitchDelta:N,around:U,aroundCoord:X,pinchAround:ne}=i;ne!==void 0&&(U=ne),(ue=>c.drag&&!this._eventsInProgress.drag)()&&U&&(this._dragOrigin=E(x.pointCoordinate3D(U)),this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",v._stop(!0),U=U||v.transform.centerPoint,z&&(x.bearing+=z),N&&(x.pitch+=N),x._updateCameraState();const Y=[0,0,0];if(A){const ue=x.pointCoordinate(U);if(x.projection.name==="globe"){const he=s.latFromMercatorY(ue.y),ye=x.center.lat,ce=Math.min(s.mercatorZfromAltitude(1,he)/s.mercatorZfromAltitude(1,ye),2);A=A.rotate(-x.angle),Y[0]=-A.x/x.worldSize*ce,Y[1]=-A.y/x.worldSize*ce}else{const he=x.pointCoordinate(U.sub(A));ue&&he&&(Y[0]=he.x-ue.x,Y[1]=he.y-ue.y)}}const W=x.zoom,fe=[0,0,0];if(L){const ue=E(X||x.pointCoordinate3D(U)),he={dir:s.normalize([],s.sub([],ue,x._camera.position))};if(he.dir[2]<0){const ye=x.zoomDeltaToMovement(ue,L);s.scale$2(fe,he.dir,ye)}}const ae=s.add(Y,Y,fe);x._translateCameraConstrained(ae),L&&Math.abs(x.zoom-W)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const v=Ea(this._eventsInProgress),x=Ea(i),E={};for(const N in i){const{originalEvent:U}=i[N];this._eventsInProgress[N]||(E[`${N}start`]=U),this._eventsInProgress[N]=i[N]}!v&&x&&this._fireEvent("movestart",x.originalEvent);for(const N in E)this._fireEvent(N,E[N]);x&&this._fireEvent("move",x.originalEvent);for(const N in i){const{originalEvent:U}=i[N];this._fireEvent(N,U)}const A={};let L;for(const N in this._eventsInProgress){const{handlerName:U,originalEvent:X}=this._eventsInProgress[N];this._handlersById[U].isActive()||(delete this._eventsInProgress[N],L=c[U]||X,A[`${N}end`]=L)}for(const N in A)this._fireEvent(N,A[N]);const z=Ea(this._eventsInProgress);if(p&&(v||x)&&!z){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;N?(U(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:L})):(this._map.fire(new s.Event("moveend",{originalEvent:L})),U(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new s.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new ic("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Dh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Jf extends s.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=s.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},c),p)}panTo(i,c,p){return this.easeTo(s.extend({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(s.extend({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(s.extend({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,s.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=s.LngLatBounds.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_extendCameraOptions(i){const c={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const p=i.padding;i.padding={top:p,bottom:p,right:p,left:p}}return i.padding=s.extend(c,i.padding),i}_cameraForBoxAndBearing(i,c,p,v){const x=this._extendCameraOptions(v),E=this.transform,A=E.padding,L=E.project(s.LngLat.convert(i)),z=E.project(s.LngLat.convert(c)),N=new s.pointGeometry(L.x,z.y),U=new s.pointGeometry(z.x,L.y),X=-s.degToRad(p),ne=L.rotate(X),Y=z.rotate(X),W=N.rotate(X),fe=U.rotate(X),ae=new s.pointGeometry(Math.max(ne.x,Y.x,W.x,fe.x),Math.max(ne.y,Y.y,W.y,fe.y)),ue=new s.pointGeometry(Math.min(ne.x,Y.x,W.x,fe.x),Math.min(ne.y,Y.y,W.y,fe.y)),he=ae.sub(ue),ye=(E.width-((A.left||0)+(A.right||0)+x.padding.left+x.padding.right))/he.x,ce=(E.height-((A.top||0)+(A.bottom||0)+x.padding.top+x.padding.bottom))/he.y;if(ce<0||ye<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const we=Math.min(E.scaleZoom(E.scale*Math.min(ye,ce)),x.maxZoom),Ve=typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new s.pointGeometry(x.offset.x,x.offset.y):s.pointGeometry.convert(x.offset),tt=new s.pointGeometry((x.padding.left-x.padding.right)/2,(x.padding.top-x.padding.bottom)/2).rotate(p*Math.PI/180),ut=Ve.add(tt).mult(E.scale/E.zoomScale(we));return{center:E.unproject(L.add(z).div(2).sub(ut)),zoom:we,bearing:p}}_cameraForBox(i,c,p,v,x){const E=this._extendCameraOptions(x);p=p||0,v=v||0,i=s.LngLat.convert(i),c=s.LngLat.convert(c);const A=this.transform.clone();A.padding=E.padding;const L=this.getFreeCameraOptions(),z=new s.LngLat(.5*(i.lng+c.lng),.5*(i.lat+c.lat)),N=.5*(p+v);if(A._camera.position[2]<s.mercatorZfromAltitude(N,z.lat))return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");L.lookAtPoint(z),A.setFreeCameraOptions(L);const U=s.MercatorCoordinate.fromLngLat(i),X=s.MercatorCoordinate.fromLngLat(c),ne=A.pointRayIntersection(A.centerPoint,N),Y=[(W=A.rayIntersectionCoordinate(ne)).x,W.y,W.z];var W;const fe=A.screenPointToMercatorRay(A.centerPoint),ae=A.projection.name!=="globe";let ue,he=0;do{const ye=Math.floor(A.zoom),ce=1<<ye,we=Math.min(ce*U.x,ce*X.x),Ve=Math.min(ce*U.y,ce*X.y),tt=Math.max(ce*U.x,ce*X.x),ut=Math.max(ce*U.y,ce*X.y),st=new s.Aabb([we,Ve,p],[tt,ut,v]),Dt=s.Frustum.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ye,ae);if(st.intersects(Dt)!==2){ue&&(A._camera.position=s.scaleAndAdd([],A._camera.position,fe.dir,-ue),A._updateStateFromCamera());break}const Ge=s.sub([],A._camera.position,Y);ue=.5*s.length(Ge),A._camera.position=s.scaleAndAdd([],A._camera.position,fe.dir,ue);try{A._updateStateFromCamera()}catch{return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++he<10);return{center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}_raycastElevationBox(i,c){const p=this.transform.elevation;if(!p)return;const v=new s.pointGeometry(i.x,c.y),x=new s.pointGeometry(c.x,i.y),E=p.pointCoordinate(i);if(!E)return;const A=p.pointCoordinate(c);if(!A)return;const L=p.pointCoordinate(v);if(!L)return;const z=p.pointCoordinate(x);if(!z)return;const N=new s.MercatorCoordinate(E[0],E[1]).toLngLat(),U=new s.MercatorCoordinate(A[0],A[1]).toLngLat(),X=new s.MercatorCoordinate(L[0],L[1]).toLngLat(),ne=new s.MercatorCoordinate(z[0],z[1]).toLngLat(),Y=Math.min(N.lng,Math.min(U.lng,Math.min(X.lng,ne.lng))),W=Math.min(N.lat,Math.min(U.lat,Math.min(X.lat,ne.lat))),fe=Math.max(N.lng,Math.max(U.lng,Math.max(X.lng,ne.lng))),ae=Math.max(N.lat,Math.max(U.lat,Math.max(X.lat,ne.lat))),ue=Math.min(E[3],Math.min(A[3],Math.min(L[3],z[3]))),he=Math.max(E[3],Math.max(A[3],Math.max(L[3],z[3])));return{minLngLat:new s.LngLat(Y,W),maxLngLat:new s.LngLat(fe,ae),minAltitude:ue,maxAltitude:he}}fitScreenCoordinates(i,c,p,v,x){let E,A,L,z;const N=s.pointGeometry.convert(i),U=s.pointGeometry.convert(c),X=this._raycastElevationBox(N,U);if(X)E=X.minLngLat,A=X.maxLngLat,L=X.minAltitude,z=X.maxAltitude;else{if(this.transform.anyCornerOffEdge(N,U))return this;E=this.transform.pointLocation(N),A=this.transform.pointLocation(U)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(i)),this.transform.pointLocation(s.pointGeometry.convert(c)),p,v):this._cameraForBox(E,A,L,z,v),v,x)}_fitInternal(i,c,p){return i?(delete(c=s.extend(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let v=!1,x=!1,E=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(v=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=s.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(E=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),v&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),x&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),E&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Dh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,c){const p=this.transform;if(!p.projection.supportsFreeCamera)return s.warnOnce(Dh),this;this.stop();const v=p.zoom,x=p.pitch,E=p.bearing;p.setFreeCameraOptions(i);const A=v!==p.zoom,L=x!==p.pitch,z=E!==p.bearing;return this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),A&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),z&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),L&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)),this}easeTo(i,c){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||!i.essential&&s.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,v=this.getZoom(),x=this.getBearing(),E=this.getPitch(),A=this.getPadding(),L="zoom"in i?+i.zoom:v,z="bearing"in i?this._normalizeBearing(i.bearing,x):x,N="pitch"in i?+i.pitch:E,U="padding"in i?i.padding:p.padding,X=s.pointGeometry.convert(i.offset);let ne,Y,W;if(p.projection.name==="globe"){const ut=s.MercatorCoordinate.fromLngLat(p.center),st=X.rotate(-p.angle);ut.x+=st.x/p.worldSize,ut.y+=st.y/p.worldSize;const Dt=ut.toLngLat(),Ge=s.LngLat.convert(i.center||Dt);this._normalizeCenter(Ge),ne=p.centerPoint.add(st),Y=new s.pointGeometry(ut.x,ut.y).mult(p.worldSize),W=new s.pointGeometry(s.mercatorXfromLng(Ge.lng),s.mercatorYfromLat(Ge.lat)).mult(p.worldSize).sub(Y)}else{ne=p.centerPoint.add(X);const ut=p.pointLocation(ne),st=s.LngLat.convert(i.center||ut);this._normalizeCenter(st),Y=p.project(ut),W=p.project(st).sub(Y)}const fe=p.zoomScale(L-v);let ae,ue;i.around&&(ae=s.LngLat.convert(i.around),ue=p.locationPoint(ae));const he=this._zooming||L!==v,ye=this._rotating||x!==z,ce=this._pitching||N!==E,we=!p.isPaddingEqual(U),Ve=ut=>st=>{if(he&&(ut.zoom=s.number(v,L,st)),ye&&(ut.bearing=s.number(x,z,st)),ce&&(ut.pitch=s.number(E,N,st)),we&&(ut.interpolatePadding(A,U,st),ne=ut.centerPoint.add(X)),ae)ut.setLocationAtPoint(ae,ue);else{const Dt=ut.zoomScale(ut.zoom-v),Ge=L>v?Math.min(2,fe):Math.max(.5,fe),Ot=Math.pow(Ge,1-st),Mt=ut.unproject(Y.add(W.mult(st*Ot)).mult(Dt));ut.setLocationAtPoint(ut.renderWorldCopies?Mt.wrap():Mt,ne)}return i.preloadOnly||this._fireMoveEvents(c),ut};if(i.preloadOnly){const ut=this._emulate(Ve,i.duration,p);return this._preloadTiles(ut),this}const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=he,this._rotating=ye,this._pitching=ce,this._padding=we,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,tt),this._ease(Ve(p),ut=>{p.recenterOnTerrain(),this._afterEase(c,ut)},i),this}_prepareEase(i,c,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||p.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new s.Event("zoomend",i)),v&&this.fire(new s.Event("rotateend",i)),x&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,c){if(!i.essential&&s.exported.prefersReducedMotion){const en=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(en,c)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const p=this.transform,v=this.getZoom(),x=this.getBearing(),E=this.getPitch(),A=this.getPadding(),L="zoom"in i?s.clamp(+i.zoom,p.minZoom,p.maxZoom):v,z="bearing"in i?this._normalizeBearing(i.bearing,x):x,N="pitch"in i?+i.pitch:E,U="padding"in i?i.padding:p.padding,X=p.zoomScale(L-v),ne=s.pointGeometry.convert(i.offset);let Y=p.centerPoint.add(ne);const W=p.pointLocation(Y),fe=s.LngLat.convert(i.center||W);this._normalizeCenter(fe);const ae=p.project(W),ue=p.project(fe).sub(ae);let he=i.curve;const ye=Math.max(p.width,p.height),ce=ye/X,we=ue.mag();if("minZoom"in i){const en=s.clamp(Math.min(i.minZoom,v,L),p.minZoom,p.maxZoom),tn=ye/p.zoomScale(en-v);he=Math.sqrt(tn/we*2)}const Ve=he*he;function tt(en){const tn=(ce*ce-ye*ye+(en?-1:1)*Ve*Ve*we*we)/(2*(en?ce:ye)*Ve*we);return Math.log(Math.sqrt(tn*tn+1)-tn)}function ut(en){return(Math.exp(en)-Math.exp(-en))/2}function st(en){return(Math.exp(en)+Math.exp(-en))/2}const Dt=tt(0);let Ge=function(en){return st(Dt)/st(Dt+he*en)},Ot=function(en){return ye*((st(Dt)*(ut(tn=Dt+he*en)/st(tn))-ut(Dt))/Ve)/we;var tn},Mt=(tt(1)-Dt)/he;if(Math.abs(we)<1e-6||!isFinite(Mt)){if(Math.abs(ye-ce)<1e-6)return this.easeTo(i,c);const en=ce<ye?-1:1;Mt=Math.abs(Math.log(ce/ye))/he,Ot=function(){return 0},Ge=function(tn){return Math.exp(en*he*tn)}}i.duration="duration"in i?+i.duration:1e3*Mt/("screenSpeed"in i?+i.screenSpeed/he:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const nn=x!==z,ft=N!==E,Jt=!p.isPaddingEqual(U),yn=en=>tn=>{const xn=tn*Mt,Bn=1/Ge(xn);en.zoom=tn===1?L:v+en.scaleZoom(Bn),nn&&(en.bearing=s.number(x,z,tn)),ft&&(en.pitch=s.number(E,N,tn)),Jt&&(en.interpolatePadding(A,U,tn),Y=en.centerPoint.add(ne));const _n=tn===1?fe:en.unproject(ae.add(ue.mult(Ot(xn))).mult(Bn));return en.setLocationAtPoint(en.renderWorldCopies?_n.wrap():_n,Y),en._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(c),en};if(i.preloadOnly){const en=this._emulate(yn,i.duration,p);return this._preloadTiles(en),this}return this._zooming=!0,this._rotating=nn,this._pitching=ft,this._padding=Jt,this._prepareEase(c,!1),this._ease(yn(p),()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=s.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=s.wrap(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}_emulate(i,c,p){const v=Math.ceil(15*c/1e3),x=[],E=i(p.clone());for(let A=0;A<=v;A++){const L=E(A/v);x.push(L.clone())}return x}}class Oh{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const c=this.options&&this.options.compact;return this._map=i,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),F("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.setAttribute("aria-label",p),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",p)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const p=c.reduce((v,x,E)=>(x.value&&(v+=`${x.key}=${x.value}${E<c.length-1?"&":""}`),v),"?");i.href=`${s.config.FEEDBACK_URL}/${p}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style._sourceCaches;for(const v in c){const x=c[v];if(x.used){const E=x.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i.sort((v,x)=>v.length-x.length),i=i.filter((v,x)=>{for(let E=x+1;E<i.length;E++)if(i[E].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Rp{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=F("div","mapboxgl-ctrl");const c=F("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const c in i){const p=i[c].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Np{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const v of p)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function zh(f,i,c){if(f=new s.LngLat(f.lng,f.lat),i){const p=new s.LngLat(f.lng-360,f.lat),v=new s.LngLat(f.lng+360,f.lat),x=360*Math.ceil(Math.abs(f.lng-c.center.lng)/360),E=c.locationPoint(f).distSqr(i),A=i.x<0||i.y<0||i.x>c.width||i.y>c.height;c.locationPoint(p).distSqr(i)<E&&(A||Math.abs(p.lng-c.center.lng)<x)?f=p:c.locationPoint(v).distSqr(i)<E&&(A||Math.abs(v.lng-c.center.lng)<x)&&(f=v)}for(;Math.abs(f.lng-c.center.lng)>180;){const p=c.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;f.lng>c.center.lng?f.lng-=360:f.lng+=360}return f}const Rh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Nh extends s.Evented{constructor(i,c){if(super(),(i instanceof s.window.HTMLElement||c)&&(i=s.extend({element:i},c)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),i&&i.element)this._element=i.element,this._offset=s.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=F("div");const v=41,x=27,E=K("svg",{display:"block",height:v*this._scale+"px",width:x*this._scale+"px",viewBox:`0 0 ${x} ${v}`},this._element),A=K("radialGradient",{id:"shadowGradient"},K("defs",{},E));K("stop",{offset:"10%","stop-opacity":.4},A),K("stop",{offset:"100%","stop-opacity":.05},A),K("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},E),K("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},E),K("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},E),K("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},E),this._offset=s.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const p=this._element.classList;for(const v in Rh)p.remove(`mapboxgl-marker-anchor-${v}`);p.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const c=38.1,p=13.5,v=Math.sqrt(Math.pow(p,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-c],"bottom-left":[v,-1*(c-p+v)],"bottom-right":[-v,-1*(c-p+v)],left:[p,-1*(c-p)],right:[-p,-1*(c-p)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const c=i.code,p=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,p=this._element;this._popup&&(c===p||p.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const i=this._map;if(!i)return;const c=this._pos;if(!c||c.x<0||c.x>i.transform.width||c.y<0||c.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(c);let v=!1;if(i.transform._terrainEnabled()&&i.getTerrain()){const E=i.getFreeCameraOptions();if(E.position){const A=E.position.toLngLat();v=A.distanceTo(p)<.9*A.distanceTo(this._lngLat)}}const x=(1-i._queryFogOpacity(p))*(v?.2:1);this._element.style.opacity=`${x}`,this._popup&&this._popup._setOpacity(`${x}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i)return;const c=this._offset.mult(this._scale),p=this._calculatePitch(),v=this._calculateRotation();this._element.style.transform=`
            translate(${i.x}px, ${i.y}px) ${Rh[this._anchor]}
            rotateX(${p}deg) rotateZ(${v}deg)
            translate(${c.x}px, ${c.y}px)
        `}_calculatePitch(){return this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?0:this._map&&this._pitchAlignment==="map"?this._map.getPitch():0}_calculateRotation(){return this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?this._rotation:this._map&&this._rotationAlignment==="map"?this._rotation-this._map.getBearing():0}_update(i){s.window.cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=zh(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!c.getTerrain()&&!c.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.pointGeometry.convert(i),this._update(),this}_onMove(i){const c=this._map;if(c){if(!this._isDragging){const p=this._clickTolerance||c._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){const c=this._map;c&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos),this._pointerdownPos=i.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const c=this._map;return c&&(i?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class ng{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const c=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,c,p){this._start=this.getValue(c),this._end=i,this._startTime=c,this._endTime=c+p}}const ig={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Qf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function pu(f){f.parentNode&&f.parentNode.removeChild(f)}const ed={showCompass:!0,showZoom:!0,visualizePitch:!1};class td{constructor(i,c,p=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Nr({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new hr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),H()}move(i,c){const p=this.map,v=this.mouseRotate.mousemoveWindow(i,c),x=v&&v.bearingDelta;if(x&&p.setBearing(p.getBearing()+x),this.mousePitch){const E=this.mousePitch.mousemoveWindow(i,c),A=E&&E.pitchDelta;A&&p.setPitch(p.getPitch()+A)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){te(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Ae(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Ae(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Pe(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=Pe(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ao={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let vo,mu=0,al=!1;const nd={maxWidth:100,unit:"metric"};function Bh(f,i,c){const p=c&&c.maxWidth||100,v=f._containerHeight/2,x=f._containerWidth/2-p/2,E=f.unproject([x,v]),A=f.unproject([x+p,v]),L=E.distanceTo(A);if(c&&c.unit==="imperial"){const z=3.2808*L;z>5280?oc(i,p,z/5280,f._getUIString("ScaleControl.Miles"),f):oc(i,p,z,f._getUIString("ScaleControl.Feet"),f)}else c&&c.unit==="nautical"?oc(i,p,L/1852,f._getUIString("ScaleControl.NauticalMiles"),f):L>=1e3?oc(i,p,L/1e3,f._getUIString("ScaleControl.Kilometers"),f):oc(i,p,L,f._getUIString("ScaleControl.Meters"),f)}function oc(f,i,c,p,v){const x=function(A){const L=Math.pow(10,`${Math.floor(A)}`.length-1);let z=A/L;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(N){const U=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*U)/U}(z),L*z}(c),E=x/c;v._requestDomTask(()=>{f.style.width=i*E+"px",f.innerHTML=`${x}&nbsp;${p}`})}const Ro={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ii=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _u(f=new s.pointGeometry(0,0),i="bottom"){if(typeof f=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(i){case"top":return new s.pointGeometry(0,f);case"top-left":return new s.pointGeometry(c,c);case"top-right":return new s.pointGeometry(-c,c);case"bottom":return new s.pointGeometry(0,-f);case"bottom-left":return new s.pointGeometry(c,-c);case"bottom-right":return new s.pointGeometry(-c,-c);case"left":return new s.pointGeometry(f,0);case"right":return new s.pointGeometry(-f,0)}return new s.pointGeometry(0,0)}return f instanceof s.pointGeometry||Array.isArray(f)?s.pointGeometry.convert(f):s.pointGeometry.convert(f[i]||[0,0])}const sc={version:s.version,supported:C,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Jf{constructor(f){if((f=s.extend({},Qf,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(f.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ht(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._renderTaskQueue=new Np,this._domRenderTaskQueue=new Np,this._controls=[],this._markers=[],this._mapId=s.uniqueId(),this._locale=s.extend({},ig,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ng(0),this._explicitProjection=null,this._requestManager=new s.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=s.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new zp(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new pn(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,s.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new Oh({customAttribution:f.customAttribution})),this._logoControl=new Rp,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",f)).fire(new s.Event("move",f)),this.fire(new s.Event("resize",f)),i&&this.fire(new s.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(s.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?85:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._updateProjection(f)}_updateProjection(f){f===null&&(this._explicitProjection=null);const i=f||this.getProjection(),c=this.transform.setProjection(i);if(f&&(this._explicitProjection=this.transform.getProjection()),c){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this.style.applyProjectionUpdate(),this._update(!0)}return this}project(f){return this.transform.locationPoint3D(s.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(s.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(f,i,c){if(f==="mouseenter"||f==="mouseover"){let p=!1;const v=E=>{const A=i.filter(z=>this.getLayer(z)),L=A.length?this.queryRenderedFeatures(E.point,{layers:A}):[];L.length?p||(p=!0,c.call(this,new Cn(f,this,E.originalEvent,{features:L}))):p=!1},x=()=>{p=!1};return{layers:new Set(i),listener:c,delegates:{mousemove:v,mouseout:x}}}if(f==="mouseleave"||f==="mouseout"){let p=!1;const v=E=>{const A=i.filter(L=>this.getLayer(L));(A.length?this.queryRenderedFeatures(E.point,{layers:A}):[]).length?p=!0:p&&(p=!1,c.call(this,new Cn(f,this,E.originalEvent)))},x=E=>{p&&(p=!1,c.call(this,new Cn(f,this,E.originalEvent)))};return{layers:new Set(i),listener:c,delegates:{mousemove:v,mouseout:x}}}{const p=v=>{const x=i.filter(A=>this.getLayer(A)),E=x.length?this.queryRenderedFeatures(v.point,{layers:x}):[];E.length&&(v.features=E,c.call(this,v),delete v.features)};return{layers:new Set(i),listener:c,delegates:{[f]:p}}}}on(f,i,c){if(c===void 0)return super.on(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const v in p.delegates)this.on(v,p.delegates[v]);return this}once(f,i,c){if(c===void 0)return super.once(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,c);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(f,i,c){if(c===void 0)return super.off(f,i);i=new Set(Array.isArray(i)?i:[i]);const p=(x,E)=>{if(x.size!==E.size)return!1;for(const A of x)if(!E.has(A))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(x=>{for(let E=0;E<x.length;E++){const A=x[E];if(A.listener===c&&p(A.layers,i)){for(const L in A.delegates)this.off(L,A.delegates[L]);return x.splice(E,1),this}}})(v),this}queryRenderedFeatures(f,i){return this.style?(i!==void 0||f===void 0||f instanceof s.pointGeometry||Array.isArray(f)||(i=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}queryTerrainElevation(f,i){const c=this.transform.elevation;return c?(i=s.extend({},{exaggerated:!0},i),c.getAtPoint(s.MercatorCoordinate.fromLngLat(f),null,i.exaggerated)):null}setStyle(f,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new ir(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if(typeof f=="string"){const c=this._requestManager.normalizeStyleURL(f),p=this._requestManager.transformRequest(c,s.ResourceType.Style);s.getJSON(p,(v,x)=>{v?this.fire(new s.ErrorEvent(v)):x&&this._updateDiff(x,i)})}else typeof f=="object"&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(c){s.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const i in f){const c=f[i]._tiles;for(const p in c){const v=c[p];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,i,c){this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,c)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:c=1,sdf:p=!1,stretchX:v,stretchY:x,content:E}={}){if(this._lazyInitEmptyStyle(),i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap){const{width:A,height:L,data:z}=s.exported.getImageData(i);this.style.addImage(f,{data:new s.RGBAImage({width:A,height:L},z),pixelRatio:c,stretchX:v,stretchY:x,content:E,sdf:p,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:L}=i,z=i;this.style.addImage(f,{data:new s.RGBAImage({width:A,height:L},new Uint8Array(z.data)),pixelRatio:c,stretchX:v,stretchY:x,content:E,sdf:p,version:0,userImage:z}),z.onAdd&&z.onAdd(this,f)}}updateImage(f,i){const c=this.style.getImage(f);if(!c)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap?s.exported.getImageData(i):i,{width:v,height:x}=p;v!==void 0&&x!==void 0?v===c.data.width&&x===c.data.height?(c.data.replace(p.data,!(i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap)),this.style.updateImage(f,c)):this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){s.getImage(this._requestManager.transformRequest(f,s.ResourceType.Image),(c,p)=>{i(c,p instanceof s.window.HTMLImageElement?s.exported.getImageData(p):p)})}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,c){return this.style.setLayerZoomRange(f,i,c),this._update(!0)}setFilter(f,i,c={}){return this.style.setFilter(f,i,c),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,c,p={}){return this.style.setPaintProperty(f,i,c,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,c,p={}){return this.style.setLayoutProperty(f,i,c,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(f),this.transform):0}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let c,p,v,x=this._container;for(;x&&(!p||!v);){const E=s.window.getComputedStyle(x).transform;E&&E!=="none"&&(c=E.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(p=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(v=c[3])),x=x.parentElement}this._containerWidth=p?Math.abs(f/p):f,this._containerHeight=v?Math.abs(i/v):i}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=F("div","mapboxgl-canvas-container",f);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=F("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=F("div","mapboxgl-control-container",f),p=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{p[v]=F("div",`mapboxgl-ctrl-${v}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const c=s.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(f),this._canvas.height=c*Math.ceil(i),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);i!==-1&&this._markers.splice(i,1)}_setupPainter(){const f=s.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(s.storeAuthState(i,!0),this.painter=new ba(i,this.transform),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(i)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;const c=this.painter.context.extTimerQuery,p=s.exported.now();if(this.listens("gpu-timing-frame")&&(i=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;let v=!1;const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const L=this.transform.zoom,z=this.transform.pitch,N=s.exported.now();this.style.zoomHistory.update(L,N);const U=new s.EvaluationParameters(L,{now:N,fadeDuration:x,pitch:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=U.crossFadingFactor();X===1&&X===this._crossFadingFactor||(v=!0,this._crossFadingFactor=X),this.style.update(U)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(p),this.style._updateSources(this.transform),this._forceMarkerUpdate()):E=this._updateAverageElevation(p),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const L=s.exported.now()-p;c.endQueryEXT(c.TIME_ELAPSED_EXT,i),setTimeout(()=>{const z=c.getQueryObjectEXT(i,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:L,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const L=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(L);this.fire(new s.Event("gpu-timing-layer",{layerTimes:z}))},50)}const A=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(A||this._repaint)this.triggerRepaint();else{const L=!this.isMoving()&&this.loaded();if(L&&(E=this._updateAverageElevation(p,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),L&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const z=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const f of this._markers)f._update()}_updateAverageElevation(f,i=!1){const c=p=>(this.transform.averageElevation=p,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);if((i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const p=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),x=!1;this.transform.elevation&&(x=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const E=Math.abs(p-v);if(E>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(v),c(v);this._averageElevation.easeTo(v,f,300)}else if(E>1e-4)return this._averageElevation.jumpTo(v),c(v)}return!!this._averageElevation.isEasing(f)&&c(this._averageElevation.getValue(f))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===s.AUTH_ERR_MSG||f.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof Rp&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const c=this.painter.context.gl,p=c.createFramebuffer();function v(x){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,x,0);const E=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,E),E}return c.bindFramebuffer(c.FRAMEBUFFER,p),this._canvasPixelComparison(v(f),i.canvasCopies.map(v),i.timeStamps)}_canvasPixelComparison(f,i,c){let p=c[1]-c[0];const v=f.length/4;for(let x=0;x<i.length;x++){const E=i[x];let A=0;for(let L=0;L<E.length;L+=4)E[L]===f[L]&&E[L+1]===f[L+1]&&E[L+2]===f[L+2]&&E[L+3]===f[L+3]&&(A+=1);p+=(c[x+2]-c[x+1])*(1-A/v)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),pu(this._canvasContainer),pu(this._controlContainer),pu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(i)}))}_preloadTiles(f){const i=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(i,(c,p)=>c._preloadTiles(f,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){s.setCacheLimits(f,i)}get version(){return s.version}},NavigationControl:class{constructor(f){this.options=s.extend({},ed,f),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:i}):c.resetNorth({},{originalEvent:i}))}),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const i=f.getZoom(),c=i===f.getMaxZoom(),p=i===f.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new td(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,i){const c=F("button",f,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(f,i){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${i}`);f.setAttribute("aria-label",c),f.firstElementChild&&f.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends s.Evented{constructor(f){super(),this.options=s.extend({},ao,f),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ln(this._updateMarkerRotation,20)}onAdd(f){var i;return this._map=f,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,vo!==void 0?i(vo):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(c=>{vo=c.state!=="denied",i(vo)}):(vo=!!s.window.navigator.geolocation,i(vo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,mu=0,al=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),c=f.coords;return!!i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude),c=f.coords.accuracy,p=this._map.getBearing(),v=s.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),v,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._containerHeight/2,i=this._map.unproject([0,f]),c=this._map.unproject([100,f]),p=i.distanceTo(c)/100,v=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&al)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Nh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mu--,al=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),mu++,mu>1?(f={maximumAge:6e5,timeout:0},al=!0):(f=this.options.positionOptions,al=!1),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&f()}).catch(console.error):f()}_clearWatch(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Oh,ScaleControl:class{constructor(f){this.options=s.extend({},nd,f),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Bh(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Bh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof s.window.HTMLElement?this._container=f.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(f){super(),this.options=s.extend(Object.create(Ro),f),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=s.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(s.window.document.createTextNode(f))}setHTML(f){const i=s.window.document.createDocumentFragment(),c=s.window.document.createElement("body");let p;for(c.innerHTML=f;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(f),this.options.closeButton){const c=this._closeButton=F("button","mapboxgl-popup-close-button",i);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let i;return this._classList.delete(f)?i=!1:(this._classList.add(f),i=!0),this._updateClassList(),i}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const i=this._map,c=this._container,p=this._pos;if(!i||!c||!p)return"bottom";const v=c.offsetWidth,x=c.offsetHeight,E=p.x<v/2,A=p.x>i.transform.width-v/2;if(p.y+f<x)return E?"top-left":A?"top-right":"top";if(p.y>i.transform.height-x){if(E)return"bottom-left";if(A)return"bottom-right"}return E?"left":A?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),f.className=i.join(" ")}_update(f){const i=this._map,c=this._content;if(!i||!this._lngLat&&!this._trackPointer||!c)return;let p=this._container;if(p||(p=this._container=F("div","mapboxgl-popup",i.getContainer()),this._tip=F("div","mapboxgl-popup-tip",p),p.appendChild(c)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zh(this._lngLat,this._pos,i.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:i.project(this._lngLat),x=_u(this.options.offset),E=this._anchor=this._getAnchor(x.y),A=_u(this.options.offset,E),L=v.add(A).round();i._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Rh[E]} translate(${L.x}px,${L.y}px)`)})}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Ii);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._content&&(this._content.style.opacity=f),this._tip&&(this._tip.style.opacity=f)}},Marker:Nh,Style:ir,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Z,Evented:s.Evented,config:s.config,prewarm:function(){gn().acquire(un)},clearPrewarmedResources:function(){const f=an;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(un),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(f){s.config.ACCESS_TOKEN=f},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(f){s.config.API_URL=f},get workerCount(){return Xt.workerCount},set workerCount(f){Xt.workerCount=f},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){s.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){s.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return sc});var w=_;return w})})(xA);var i8=xA.exports,x5={exports:{}};/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,n){(function(l,h){t.exports=h()})(zs,function(){const l="transitionend",h=Z=>{let S=Z.getAttribute("data-bs-target");if(!S||S==="#"){let R=Z.getAttribute("href");if(!R||!R.includes("#")&&!R.startsWith("."))return null;R.includes("#")&&!R.startsWith("#")&&(R=`#${R.split("#")[1]}`),S=R&&R!=="#"?R.trim():null}return S},_=Z=>{const S=h(Z);return S&&document.querySelector(S)?S:null},g=Z=>{const S=h(Z);return S?document.querySelector(S):null},w=Z=>{Z.dispatchEvent(new Event(l))},s=Z=>!(!Z||typeof Z!="object")&&(Z.jquery!==void 0&&(Z=Z[0]),Z.nodeType!==void 0),C=Z=>s(Z)?Z.jquery?Z[0]:Z:typeof Z=="string"&&Z.length>0?document.querySelector(Z):null,O=(Z,S,R)=>{Object.keys(R).forEach(ie=>{const be=R[ie],De=S[ie],Je=De&&s(De)?"element":(At=De)==null?`${At}`:{}.toString.call(At).match(/\s([a-z]+)/i)[1].toLowerCase();var At;if(!new RegExp(be).test(Je))throw new TypeError(`${Z.toUpperCase()}: Option "${ie}" provided type "${Je}" but expected type "${be}".`)})},k=Z=>!(!s(Z)||Z.getClientRects().length===0)&&getComputedStyle(Z).getPropertyValue("visibility")==="visible",D=Z=>!Z||Z.nodeType!==Node.ELEMENT_NODE||!!Z.classList.contains("disabled")||(Z.disabled!==void 0?Z.disabled:Z.hasAttribute("disabled")&&Z.getAttribute("disabled")!=="false"),F=Z=>{if(!document.documentElement.attachShadow)return null;if(typeof Z.getRootNode=="function"){const S=Z.getRootNode();return S instanceof ShadowRoot?S:null}return Z instanceof ShadowRoot?Z:Z.parentNode?F(Z.parentNode):null},K=()=>{},Se=Z=>{Z.offsetHeight},pe=()=>{const{jQuery:Z}=window;return Z&&!document.body.hasAttribute("data-bs-no-jquery")?Z:null},J=[],H=()=>document.documentElement.dir==="rtl",te=Z=>{var S;S=()=>{const R=pe();if(R){const ie=Z.NAME,be=R.fn[ie];R.fn[ie]=Z.jQueryInterface,R.fn[ie].Constructor=Z,R.fn[ie].noConflict=()=>(R.fn[ie]=be,Z.jQueryInterface)}},document.readyState==="loading"?(J.length||document.addEventListener("DOMContentLoaded",()=>{J.forEach(R=>R())}),J.push(S)):S()},ge=Z=>{typeof Z=="function"&&Z()},ke=(Z,S,R=!0)=>{if(!R)return void ge(Z);const ie=(Je=>{if(!Je)return 0;let{transitionDuration:At,transitionDelay:Ht}=window.getComputedStyle(Je);const ln=Number.parseFloat(At),pn=Number.parseFloat(Ht);return ln||pn?(At=At.split(",")[0],Ht=Ht.split(",")[0],1e3*(Number.parseFloat(At)+Number.parseFloat(Ht))):0})(S)+5;let be=!1;const De=({target:Je})=>{Je===S&&(be=!0,S.removeEventListener(l,De),ge(Z))};S.addEventListener(l,De),setTimeout(()=>{be||w(S)},ie)},Ae=(Z,S,R,ie)=>{let be=Z.indexOf(S);if(be===-1)return Z[!R&&ie?Z.length-1:0];const De=Z.length;return be+=R?1:-1,ie&&(be=(be+De)%De),Z[Math.max(0,Math.min(be,De-1))]},Pe=/[^.]*(?=\..*)\.|.*/,Qe=/\..*/,wt=/::\d+$/,nt={};let Ee=1;const Xe={mouseenter:"mouseover",mouseleave:"mouseout"},ot=/^(mouseenter|mouseleave)/i,Be=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ve(Z,S){return S&&`${S}::${Ee++}`||Z.uidEvent||Ee++}function He(Z){const S=ve(Z);return Z.uidEvent=S,nt[S]=nt[S]||{},nt[S]}function ct(Z,S,R=null){const ie=Object.keys(Z);for(let be=0,De=ie.length;be<De;be++){const Je=Z[ie[be]];if(Je.originalHandler===S&&Je.delegationSelector===R)return Je}return null}function Ye(Z,S,R){const ie=typeof S=="string",be=ie?R:S;let De=Ut(Z);return Be.has(De)||(De=Z),[ie,be,De]}function ht(Z,S,R,ie,be){if(typeof S!="string"||!Z)return;if(R||(R=ie,ie=null),ot.test(S)){const Pn=Dn=>function($n){if(!$n.relatedTarget||$n.relatedTarget!==$n.delegateTarget&&!$n.delegateTarget.contains($n.relatedTarget))return Dn.call(this,$n)};ie?ie=Pn(ie):R=Pn(R)}const[De,Je,At]=Ye(S,R,ie),Ht=He(Z),ln=Ht[At]||(Ht[At]={}),pn=ct(ln,Je,De?R:null);if(pn)return void(pn.oneOff=pn.oneOff&&be);const $t=ve(Je,S.replace(Pe,"")),Xn=De?function(Pn,Dn,$n){return function Nn(di){const Mn=Pn.querySelectorAll(Dn);for(let{target:Cn}=di;Cn&&Cn!==this;Cn=Cn.parentNode)for(let ni=Mn.length;ni--;)if(Mn[ni]===Cn)return di.delegateTarget=Cn,Nn.oneOff&&qe.off(Pn,di.type,Dn,$n),$n.apply(Cn,[di]);return null}}(Z,R,ie):function(Pn,Dn){return function $n(Nn){return Nn.delegateTarget=Pn,$n.oneOff&&qe.off(Pn,Nn.type,Dn),Dn.apply(Pn,[Nn])}}(Z,R);Xn.delegationSelector=De?R:null,Xn.originalHandler=Je,Xn.oneOff=be,Xn.uidEvent=$t,ln[$t]=Xn,Z.addEventListener(At,Xn,De)}function lt(Z,S,R,ie,be){const De=ct(S[R],ie,be);De&&(Z.removeEventListener(R,De,Boolean(be)),delete S[R][De.uidEvent])}function Ut(Z){return Z=Z.replace(Qe,""),Xe[Z]||Z}const qe={on(Z,S,R,ie){ht(Z,S,R,ie,!1)},one(Z,S,R,ie){ht(Z,S,R,ie,!0)},off(Z,S,R,ie){if(typeof S!="string"||!Z)return;const[be,De,Je]=Ye(S,R,ie),At=Je!==S,Ht=He(Z),ln=S.startsWith(".");if(De!==void 0)return!Ht||!Ht[Je]?void 0:void lt(Z,Ht,Je,De,be?R:null);ln&&Object.keys(Ht).forEach($t=>{(function(Xn,Pn,Dn,$n){const Nn=Pn[Dn]||{};Object.keys(Nn).forEach(di=>{if(di.includes($n)){const Mn=Nn[di];lt(Xn,Pn,Dn,Mn.originalHandler,Mn.delegationSelector)}})})(Z,Ht,$t,S.slice(1))});const pn=Ht[Je]||{};Object.keys(pn).forEach($t=>{const Xn=$t.replace(wt,"");if(!At||S.includes(Xn)){const Pn=pn[$t];lt(Z,Ht,Je,Pn.originalHandler,Pn.delegationSelector)}})},trigger(Z,S,R){if(typeof S!="string"||!Z)return null;const ie=pe(),be=Ut(S),De=S!==be,Je=Be.has(be);let At,Ht=!0,ln=!0,pn=!1,$t=null;return De&&ie&&(At=ie.Event(S,R),ie(Z).trigger(At),Ht=!At.isPropagationStopped(),ln=!At.isImmediatePropagationStopped(),pn=At.isDefaultPrevented()),Je?($t=document.createEvent("HTMLEvents"),$t.initEvent(be,Ht,!0)):$t=new CustomEvent(S,{bubbles:Ht,cancelable:!0}),R!==void 0&&Object.keys(R).forEach(Xn=>{Object.defineProperty($t,Xn,{get:()=>R[Xn]})}),pn&&$t.preventDefault(),ln&&Z.dispatchEvent($t),$t.defaultPrevented&&At!==void 0&&At.preventDefault(),$t}},hn=new Map,Gt={set(Z,S,R){hn.has(Z)||hn.set(Z,new Map);const ie=hn.get(Z);ie.has(S)||ie.size===0?ie.set(S,R):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ie.keys())[0]}.`)},get:(Z,S)=>hn.has(Z)&&hn.get(Z).get(S)||null,remove(Z,S){if(!hn.has(Z))return;const R=hn.get(Z);R.delete(S),R.size===0&&hn.delete(Z)}};class dn{constructor(S){(S=C(S))&&(this._element=S,Gt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Gt.remove(this._element,this.constructor.DATA_KEY),qe.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(S=>{this[S]=null})}_queueCallback(S,R,ie=!0){ke(S,R,ie)}static getInstance(S){return Gt.get(C(S),this.DATA_KEY)}static getOrCreateInstance(S,R={}){return this.getInstance(S)||new this(S,typeof R=="object"?R:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Fe=(Z,S="hide")=>{const R=`click.dismiss${Z.EVENT_KEY}`,ie=Z.NAME;qe.on(document,R,`[data-bs-dismiss="${ie}"]`,function(be){if(["A","AREA"].includes(this.tagName)&&be.preventDefault(),D(this))return;const De=g(this)||this.closest(`.${ie}`);Z.getOrCreateInstance(De)[S]()})};class bt extends dn{static get NAME(){return"alert"}close(){if(qe.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const S=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,S)}_destroyElement(){this._element.remove(),qe.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(S){return this.each(function(){const R=bt.getOrCreateInstance(this);if(typeof S=="string"){if(R[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);R[S](this)}})}}Fe(bt,"close"),te(bt);const kt='[data-bs-toggle="button"]';class Et extends dn{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(S){return this.each(function(){const R=Et.getOrCreateInstance(this);S==="toggle"&&R[S]()})}}function sn(Z){return Z==="true"||Z!=="false"&&(Z===Number(Z).toString()?Number(Z):Z===""||Z==="null"?null:Z)}function En(Z){return Z.replace(/[A-Z]/g,S=>`-${S.toLowerCase()}`)}qe.on(document,"click.bs.button.data-api",kt,Z=>{Z.preventDefault();const S=Z.target.closest(kt);Et.getOrCreateInstance(S).toggle()}),te(Et);const me={setDataAttribute(Z,S,R){Z.setAttribute(`data-bs-${En(S)}`,R)},removeDataAttribute(Z,S){Z.removeAttribute(`data-bs-${En(S)}`)},getDataAttributes(Z){if(!Z)return{};const S={};return Object.keys(Z.dataset).filter(R=>R.startsWith("bs")).forEach(R=>{let ie=R.replace(/^bs/,"");ie=ie.charAt(0).toLowerCase()+ie.slice(1,ie.length),S[ie]=sn(Z.dataset[R])}),S},getDataAttribute:(Z,S)=>sn(Z.getAttribute(`data-bs-${En(S)}`)),offset(Z){const S=Z.getBoundingClientRect();return{top:S.top+window.pageYOffset,left:S.left+window.pageXOffset}},position:Z=>({top:Z.offsetTop,left:Z.offsetLeft})},oe={find:(Z,S=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(S,Z)),findOne:(Z,S=document.documentElement)=>Element.prototype.querySelector.call(S,Z),children:(Z,S)=>[].concat(...Z.children).filter(R=>R.matches(S)),parents(Z,S){const R=[];let ie=Z.parentNode;for(;ie&&ie.nodeType===Node.ELEMENT_NODE&&ie.nodeType!==3;)ie.matches(S)&&R.push(ie),ie=ie.parentNode;return R},prev(Z,S){let R=Z.previousElementSibling;for(;R;){if(R.matches(S))return[R];R=R.previousElementSibling}return[]},next(Z,S){let R=Z.nextElementSibling;for(;R;){if(R.matches(S))return[R];R=R.nextElementSibling}return[]},focusableChildren(Z){const S=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(R=>`${R}:not([tabindex^="-"])`).join(", ");return this.find(S,Z).filter(R=>!D(R)&&k(R))}},rt="carousel",ee={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},_e={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},We="next",Ze="prev",pt="left",St="right",jt={ArrowLeft:St,ArrowRight:pt},Ct="slid.bs.carousel",yt="active",Ie=".active.carousel-item";class Ke extends dn{constructor(S,R){super(S),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(R),this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ee}static get NAME(){return rt}next(){this._slide(We)}nextWhenVisible(){!document.hidden&&k(this._element)&&this.next()}prev(){this._slide(Ze)}pause(S){S||(this._isPaused=!0),oe.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(w(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(S){S||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(S){this._activeElement=oe.findOne(Ie,this._element);const R=this._getItemIndex(this._activeElement);if(S>this._items.length-1||S<0)return;if(this._isSliding)return void qe.one(this._element,Ct,()=>this.to(S));if(R===S)return this.pause(),void this.cycle();const ie=S>R?We:Ze;this._slide(ie,this._items[S])}_getConfig(S){return S=rn(rn(rn({},ee),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),O(rt,S,_e),S}_handleSwipe(){const S=Math.abs(this.touchDeltaX);if(S<=40)return;const R=S/this.touchDeltaX;this.touchDeltaX=0,R&&this._slide(R>0?St:pt)}_addEventListeners(){this._config.keyboard&&qe.on(this._element,"keydown.bs.carousel",S=>this._keydown(S)),this._config.pause==="hover"&&(qe.on(this._element,"mouseenter.bs.carousel",S=>this.pause(S)),qe.on(this._element,"mouseleave.bs.carousel",S=>this.cycle(S))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const S=De=>this._pointerEvent&&(De.pointerType==="pen"||De.pointerType==="touch"),R=De=>{S(De)?this.touchStartX=De.clientX:this._pointerEvent||(this.touchStartX=De.touches[0].clientX)},ie=De=>{this.touchDeltaX=De.touches&&De.touches.length>1?0:De.touches[0].clientX-this.touchStartX},be=De=>{S(De)&&(this.touchDeltaX=De.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(Je=>this.cycle(Je),500+this._config.interval))};oe.find(".carousel-item img",this._element).forEach(De=>{qe.on(De,"dragstart.bs.carousel",Je=>Je.preventDefault())}),this._pointerEvent?(qe.on(this._element,"pointerdown.bs.carousel",De=>R(De)),qe.on(this._element,"pointerup.bs.carousel",De=>be(De)),this._element.classList.add("pointer-event")):(qe.on(this._element,"touchstart.bs.carousel",De=>R(De)),qe.on(this._element,"touchmove.bs.carousel",De=>ie(De)),qe.on(this._element,"touchend.bs.carousel",De=>be(De)))}_keydown(S){if(/input|textarea/i.test(S.target.tagName))return;const R=jt[S.key];R&&(S.preventDefault(),this._slide(R))}_getItemIndex(S){return this._items=S&&S.parentNode?oe.find(".carousel-item",S.parentNode):[],this._items.indexOf(S)}_getItemByOrder(S,R){const ie=S===We;return Ae(this._items,R,ie,this._config.wrap)}_triggerSlideEvent(S,R){const ie=this._getItemIndex(S),be=this._getItemIndex(oe.findOne(Ie,this._element));return qe.trigger(this._element,"slide.bs.carousel",{relatedTarget:S,direction:R,from:be,to:ie})}_setActiveIndicatorElement(S){if(this._indicatorsElement){const R=oe.findOne(".active",this._indicatorsElement);R.classList.remove(yt),R.removeAttribute("aria-current");const ie=oe.find("[data-bs-target]",this._indicatorsElement);for(let be=0;be<ie.length;be++)if(Number.parseInt(ie[be].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(S)){ie[be].classList.add(yt),ie[be].setAttribute("aria-current","true");break}}}_updateInterval(){const S=this._activeElement||oe.findOne(Ie,this._element);if(!S)return;const R=Number.parseInt(S.getAttribute("data-bs-interval"),10);R?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=R):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(S,R){const ie=this._directionToOrder(S),be=oe.findOne(Ie,this._element),De=this._getItemIndex(be),Je=R||this._getItemByOrder(ie,be),At=this._getItemIndex(Je),Ht=Boolean(this._interval),ln=ie===We,pn=ln?"carousel-item-start":"carousel-item-end",$t=ln?"carousel-item-next":"carousel-item-prev",Xn=this._orderToDirection(ie);if(Je&&Je.classList.contains(yt))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(Je,Xn).defaultPrevented||!be||!Je)return;this._isSliding=!0,Ht&&this.pause(),this._setActiveIndicatorElement(Je),this._activeElement=Je;const Pn=()=>{qe.trigger(this._element,Ct,{relatedTarget:Je,direction:Xn,from:De,to:At})};if(this._element.classList.contains("slide")){Je.classList.add($t),Se(Je),be.classList.add(pn),Je.classList.add(pn);const Dn=()=>{Je.classList.remove(pn,$t),Je.classList.add(yt),be.classList.remove(yt,$t,pn),this._isSliding=!1,setTimeout(Pn,0)};this._queueCallback(Dn,be,!0)}else be.classList.remove(yt),Je.classList.add(yt),this._isSliding=!1,Pn();Ht&&this.cycle()}_directionToOrder(S){return[St,pt].includes(S)?H()?S===pt?Ze:We:S===pt?We:Ze:S}_orderToDirection(S){return[We,Ze].includes(S)?H()?S===Ze?pt:St:S===Ze?St:pt:S}static carouselInterface(S,R){const ie=Ke.getOrCreateInstance(S,R);let{_config:be}=ie;typeof R=="object"&&(be=rn(rn({},be),R));const De=typeof R=="string"?R:be.slide;if(typeof R=="number")ie.to(R);else if(typeof De=="string"){if(ie[De]===void 0)throw new TypeError(`No method named "${De}"`);ie[De]()}else be.interval&&be.ride&&(ie.pause(),ie.cycle())}static jQueryInterface(S){return this.each(function(){Ke.carouselInterface(this,S)})}static dataApiClickHandler(S){const R=g(this);if(!R||!R.classList.contains("carousel"))return;const ie=rn(rn({},me.getDataAttributes(R)),me.getDataAttributes(this)),be=this.getAttribute("data-bs-slide-to");be&&(ie.interval=!1),Ke.carouselInterface(R,ie),be&&Ke.getInstance(R).to(be),S.preventDefault()}}qe.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Ke.dataApiClickHandler),qe.on(window,"load.bs.carousel.data-api",()=>{const Z=oe.find('[data-bs-ride="carousel"]');for(let S=0,R=Z.length;S<R;S++)Ke.carouselInterface(Z[S],Ke.getInstance(Z[S]))}),te(Ke);const Vt="collapse",qt={toggle:!0,parent:null},bn={toggle:"boolean",parent:"(null|element)"},Tn="show",An="collapse",Sn="collapsing",oi="collapsed",Ci=":scope .collapse .collapse",lr='[data-bs-toggle="collapse"]';class vr extends dn{constructor(S,R){super(S),this._isTransitioning=!1,this._config=this._getConfig(R),this._triggerArray=[];const ie=oe.find(lr);for(let be=0,De=ie.length;be<De;be++){const Je=ie[be],At=_(Je),Ht=oe.find(At).filter(ln=>ln===this._element);At!==null&&Ht.length&&(this._selector=At,this._triggerArray.push(Je))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return qt}static get NAME(){return Vt}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let S,R=[];if(this._config.parent){const Je=oe.find(Ci,this._config.parent);R=oe.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(At=>!Je.includes(At))}const ie=oe.findOne(this._selector);if(R.length){const Je=R.find(At=>ie!==At);if(S=Je?vr.getInstance(Je):null,S&&S._isTransitioning)return}if(qe.trigger(this._element,"show.bs.collapse").defaultPrevented)return;R.forEach(Je=>{ie!==Je&&vr.getOrCreateInstance(Je,{toggle:!1}).hide(),S||Gt.set(Je,"bs.collapse",null)});const be=this._getDimension();this._element.classList.remove(An),this._element.classList.add(Sn),this._element.style[be]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const De=`scroll${be[0].toUpperCase()+be.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(An,Tn),this._element.style[be]="",qe.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[be]=`${this._element[De]}px`}hide(){if(this._isTransitioning||!this._isShown()||qe.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const S=this._getDimension();this._element.style[S]=`${this._element.getBoundingClientRect()[S]}px`,Se(this._element),this._element.classList.add(Sn),this._element.classList.remove(An,Tn);const R=this._triggerArray.length;for(let ie=0;ie<R;ie++){const be=this._triggerArray[ie],De=g(be);De&&!this._isShown(De)&&this._addAriaAndCollapsedClass([be],!1)}this._isTransitioning=!0,this._element.style[S]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(An),qe.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(S=this._element){return S.classList.contains(Tn)}_getConfig(S){return(S=rn(rn(rn({},qt),me.getDataAttributes(this._element)),S)).toggle=Boolean(S.toggle),S.parent=C(S.parent),O(Vt,S,bn),S}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const S=oe.find(Ci,this._config.parent);oe.find(lr,this._config.parent).filter(R=>!S.includes(R)).forEach(R=>{const ie=g(R);ie&&this._addAriaAndCollapsedClass([R],this._isShown(ie))})}_addAriaAndCollapsedClass(S,R){S.length&&S.forEach(ie=>{R?ie.classList.remove(oi):ie.classList.add(oi),ie.setAttribute("aria-expanded",R)})}static jQueryInterface(S){return this.each(function(){const R={};typeof S=="string"&&/show|hide/.test(S)&&(R.toggle=!1);const ie=vr.getOrCreateInstance(this,R);if(typeof S=="string"){if(ie[S]===void 0)throw new TypeError(`No method named "${S}"`);ie[S]()}})}}qe.on(document,"click.bs.collapse.data-api",lr,function(Z){(Z.target.tagName==="A"||Z.delegateTarget&&Z.delegateTarget.tagName==="A")&&Z.preventDefault();const S=_(this);oe.find(S).forEach(R=>{vr.getOrCreateInstance(R,{toggle:!1}).toggle()})}),te(vr);var Ti="top",$i="bottom",ti="right",gi="left",Cr="auto",_r=[Ti,$i,ti,gi],Wi="start",tr="end",Hr="clippingParents",Dr="viewport",Ki="popper",mo="reference",Wr=_r.reduce(function(Z,S){return Z.concat([S+"-"+Wi,S+"-"+tr])},[]),se=[].concat(_r,[Cr]).reduce(function(Z,S){return Z.concat([S,S+"-"+Wi,S+"-"+tr])},[]),$="beforeRead",V="read",re="afterRead",de="beforeMain",Te="main",$e="afterMain",Ne="beforeWrite",Ce="write",je="afterWrite",_t=[$,V,re,de,Te,$e,Ne,Ce,je];function Pt(Z){return Z?(Z.nodeName||"").toLowerCase():null}function gt(Z){if(Z==null)return window;if(Z.toString()!=="[object Window]"){var S=Z.ownerDocument;return S&&S.defaultView||window}return Z}function un(Z){return Z instanceof gt(Z).Element||Z instanceof Element}function Xt(Z){return Z instanceof gt(Z).HTMLElement||Z instanceof HTMLElement}function an(Z){return typeof ShadowRoot!="undefined"&&(Z instanceof gt(Z).ShadowRoot||Z instanceof ShadowRoot)}const gn={name:"applyStyles",enabled:!0,phase:"write",fn:function(Z){var S=Z.state;Object.keys(S.elements).forEach(function(R){var ie=S.styles[R]||{},be=S.attributes[R]||{},De=S.elements[R];Xt(De)&&Pt(De)&&(Object.assign(De.style,ie),Object.keys(be).forEach(function(Je){var At=be[Je];At===!1?De.removeAttribute(Je):De.setAttribute(Je,At===!0?"":At)}))})},effect:function(Z){var S=Z.state,R={popper:{position:S.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(S.elements.popper.style,R.popper),S.styles=R,S.elements.arrow&&Object.assign(S.elements.arrow.style,R.arrow),function(){Object.keys(S.elements).forEach(function(ie){var be=S.elements[ie],De=S.attributes[ie]||{},Je=Object.keys(S.styles.hasOwnProperty(ie)?S.styles[ie]:R[ie]).reduce(function(At,Ht){return At[Ht]="",At},{});Xt(be)&&Pt(be)&&(Object.assign(be.style,Je),Object.keys(De).forEach(function(At){be.removeAttribute(At)}))})}},requires:["computeStyles"]};function Ue(Z){return Z.split("-")[0]}function jn(Z,S){var R=Z.getBoundingClientRect();return{width:R.width/1,height:R.height/1,top:R.top/1,right:R.right/1,bottom:R.bottom/1,left:R.left/1,x:R.left/1,y:R.top/1}}function Kt(Z){var S=jn(Z),R=Z.offsetWidth,ie=Z.offsetHeight;return Math.abs(S.width-R)<=1&&(R=S.width),Math.abs(S.height-ie)<=1&&(ie=S.height),{x:Z.offsetLeft,y:Z.offsetTop,width:R,height:ie}}function Yn(Z,S){var R=S.getRootNode&&S.getRootNode();if(Z.contains(S))return!0;if(R&&an(R)){var ie=S;do{if(ie&&Z.isSameNode(ie))return!0;ie=ie.parentNode||ie.host}while(ie)}return!1}function zn(Z){return gt(Z).getComputedStyle(Z)}function ko(Z){return["table","td","th"].indexOf(Pt(Z))>=0}function nr(Z){return((un(Z)?Z.ownerDocument:Z.document)||window.document).documentElement}function zt(Z){return Pt(Z)==="html"?Z:Z.assignedSlot||Z.parentNode||(an(Z)?Z.host:null)||nr(Z)}function Un(Z){return Xt(Z)&&zn(Z).position!=="fixed"?Z.offsetParent:null}function Ln(Z){for(var S=gt(Z),R=Un(Z);R&&ko(R)&&zn(R).position==="static";)R=Un(R);return R&&(Pt(R)==="html"||Pt(R)==="body"&&zn(R).position==="static")?S:R||function(ie){var be=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&Xt(ie)&&zn(ie).position==="fixed")return null;for(var De=zt(ie);Xt(De)&&["html","body"].indexOf(Pt(De))<0;){var Je=zn(De);if(Je.transform!=="none"||Je.perspective!=="none"||Je.contain==="paint"||["transform","perspective"].indexOf(Je.willChange)!==-1||be&&Je.willChange==="filter"||be&&Je.filter&&Je.filter!=="none")return De;De=De.parentNode}return null}(Z)||S}function Or(Z){return["top","bottom"].indexOf(Z)>=0?"x":"y"}var xr=Math.max,G=Math.min,Oe=Math.round;function It(Z,S,R){return xr(Z,G(S,R))}function mt(Z){return Object.assign({},{top:0,right:0,bottom:0,left:0},Z)}function vn(Z,S){return S.reduce(function(R,ie){return R[ie]=Z,R},{})}const on={name:"arrow",enabled:!0,phase:"main",fn:function(Z){var S,R=Z.state,ie=Z.name,be=Z.options,De=R.elements.arrow,Je=R.modifiersData.popperOffsets,At=Ue(R.placement),Ht=Or(At),ln=[gi,ti].indexOf(At)>=0?"height":"width";if(De&&Je){var pn=function(_i,pi){return mt(typeof(_i=typeof _i=="function"?_i(Object.assign({},pi.rects,{placement:pi.placement})):_i)!="number"?_i:vn(_i,_r))}(be.padding,R),$t=Kt(De),Xn=Ht==="y"?Ti:gi,Pn=Ht==="y"?$i:ti,Dn=R.rects.reference[ln]+R.rects.reference[Ht]-Je[Ht]-R.rects.popper[ln],$n=Je[Ht]-R.rects.reference[Ht],Nn=Ln(De),di=Nn?Ht==="y"?Nn.clientHeight||0:Nn.clientWidth||0:0,Mn=Dn/2-$n/2,Cn=pn[Xn],ni=di-$t[ln]-pn[Pn],li=di/2-$t[ln]/2+Mn,ci=It(Cn,li,ni),Qn=Ht;R.modifiersData[ie]=((S={})[Qn]=ci,S.centerOffset=ci-li,S)}},effect:function(Z){var S=Z.state,R=Z.options.element,ie=R===void 0?"[data-popper-arrow]":R;ie!=null&&(typeof ie!="string"||(ie=S.elements.popper.querySelector(ie)))&&Yn(S.elements.popper,ie)&&(S.elements.arrow=ie)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function si(Z){return Z.split("-")[1]}var Vn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zt(Z){var S,R=Z.popper,ie=Z.popperRect,be=Z.placement,De=Z.variation,Je=Z.offsets,At=Z.position,Ht=Z.gpuAcceleration,ln=Z.adaptive,pn=Z.roundOffsets,$t=pn===!0?function(Di){var Ji=Di.x,Bt=Di.y,ji=window.devicePixelRatio||1;return{x:Oe(Oe(Ji*ji)/ji)||0,y:Oe(Oe(Bt*ji)/ji)||0}}(Je):typeof pn=="function"?pn(Je):Je,Xn=$t.x,Pn=Xn===void 0?0:Xn,Dn=$t.y,$n=Dn===void 0?0:Dn,Nn=Je.hasOwnProperty("x"),di=Je.hasOwnProperty("y"),Mn=gi,Cn=Ti,ni=window;if(ln){var li=Ln(R),ci="clientHeight",Qn="clientWidth";li===gt(R)&&zn(li=nr(R)).position!=="static"&&At==="absolute"&&(ci="scrollHeight",Qn="scrollWidth"),li=li,be!==Ti&&(be!==gi&&be!==ti||De!==tr)||(Cn=$i,$n-=li[ci]-ie.height,$n*=Ht?1:-1),be!==gi&&(be!==Ti&&be!==$i||De!==tr)||(Mn=ti,Pn-=li[Qn]-ie.width,Pn*=Ht?1:-1)}var _i,pi=Object.assign({position:At},ln&&Vn);return Ht?Object.assign({},pi,((_i={})[Cn]=di?"0":"",_i[Mn]=Nn?"0":"",_i.transform=(ni.devicePixelRatio||1)<=1?"translate("+Pn+"px, "+$n+"px)":"translate3d("+Pn+"px, "+$n+"px, 0)",_i)):Object.assign({},pi,((S={})[Cn]=di?$n+"px":"",S[Mn]=Nn?Pn+"px":"",S.transform="",S))}const cr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(Z){var S=Z.state,R=Z.options,ie=R.gpuAcceleration,be=ie===void 0||ie,De=R.adaptive,Je=De===void 0||De,At=R.roundOffsets,Ht=At===void 0||At,ln={placement:Ue(S.placement),variation:si(S.placement),popper:S.elements.popper,popperRect:S.rects.popper,gpuAcceleration:be};S.modifiersData.popperOffsets!=null&&(S.styles.popper=Object.assign({},S.styles.popper,Zt(Object.assign({},ln,{offsets:S.modifiersData.popperOffsets,position:S.options.strategy,adaptive:Je,roundOffsets:Ht})))),S.modifiersData.arrow!=null&&(S.styles.arrow=Object.assign({},S.styles.arrow,Zt(Object.assign({},ln,{offsets:S.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ht})))),S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-placement":S.placement})},data:{}};var Oi={passive:!0};const Lo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(Z){var S=Z.state,R=Z.instance,ie=Z.options,be=ie.scroll,De=be===void 0||be,Je=ie.resize,At=Je===void 0||Je,Ht=gt(S.elements.popper),ln=[].concat(S.scrollParents.reference,S.scrollParents.popper);return De&&ln.forEach(function(pn){pn.addEventListener("scroll",R.update,Oi)}),At&&Ht.addEventListener("resize",R.update,Oi),function(){De&&ln.forEach(function(pn){pn.removeEventListener("scroll",R.update,Oi)}),At&&Ht.removeEventListener("resize",R.update,Oi)}},data:{}};var Rn={left:"right",right:"left",bottom:"top",top:"bottom"};function Qo(Z){return Z.replace(/left|right|bottom|top/g,function(S){return Rn[S]})}var Zc={start:"end",end:"start"};function qi(Z){return Z.replace(/start|end/g,function(S){return Zc[S]})}function Ir(Z){var S=gt(Z);return{scrollLeft:S.pageXOffset,scrollTop:S.pageYOffset}}function qr(Z){return jn(nr(Z)).left+Ir(Z).scrollLeft}function aa(Z){var S=zn(Z),R=S.overflow,ie=S.overflowX,be=S.overflowY;return/auto|scroll|overlay|hidden/.test(R+be+ie)}function Ui(Z){return["html","body","#document"].indexOf(Pt(Z))>=0?Z.ownerDocument.body:Xt(Z)&&aa(Z)?Z:Ui(zt(Z))}function Zr(Z,S){var R;S===void 0&&(S=[]);var ie=Ui(Z),be=ie===((R=Z.ownerDocument)==null?void 0:R.body),De=gt(ie),Je=be?[De].concat(De.visualViewport||[],aa(ie)?ie:[]):ie,At=S.concat(Je);return be?At:At.concat(Zr(zt(Je)))}function _o(Z){return Object.assign({},Z,{left:Z.x,top:Z.y,right:Z.x+Z.width,bottom:Z.y+Z.height})}function ur(Z,S){return S===Dr?_o(function(R){var ie=gt(R),be=nr(R),De=ie.visualViewport,Je=be.clientWidth,At=be.clientHeight,Ht=0,ln=0;return De&&(Je=De.width,At=De.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Ht=De.offsetLeft,ln=De.offsetTop)),{width:Je,height:At,x:Ht+qr(R),y:ln}}(Z)):Xt(S)?function(R){var ie=jn(R);return ie.top=ie.top+R.clientTop,ie.left=ie.left+R.clientLeft,ie.bottom=ie.top+R.clientHeight,ie.right=ie.left+R.clientWidth,ie.width=R.clientWidth,ie.height=R.clientHeight,ie.x=ie.left,ie.y=ie.top,ie}(S):_o(function(R){var ie,be=nr(R),De=Ir(R),Je=(ie=R.ownerDocument)==null?void 0:ie.body,At=xr(be.scrollWidth,be.clientWidth,Je?Je.scrollWidth:0,Je?Je.clientWidth:0),Ht=xr(be.scrollHeight,be.clientHeight,Je?Je.scrollHeight:0,Je?Je.clientHeight:0),ln=-De.scrollLeft+qr(R),pn=-De.scrollTop;return zn(Je||be).direction==="rtl"&&(ln+=xr(be.clientWidth,Je?Je.clientWidth:0)-At),{width:At,height:Ht,x:ln,y:pn}}(nr(Z)))}function Ml(Z){var S,R=Z.reference,ie=Z.element,be=Z.placement,De=be?Ue(be):null,Je=be?si(be):null,At=R.x+R.width/2-ie.width/2,Ht=R.y+R.height/2-ie.height/2;switch(De){case Ti:S={x:At,y:R.y-ie.height};break;case $i:S={x:At,y:R.y+R.height};break;case ti:S={x:R.x+R.width,y:Ht};break;case gi:S={x:R.x-ie.width,y:Ht};break;default:S={x:R.x,y:R.y}}var ln=De?Or(De):null;if(ln!=null){var pn=ln==="y"?"height":"width";switch(Je){case Wi:S[ln]=S[ln]-(R[pn]/2-ie[pn]/2);break;case tr:S[ln]=S[ln]+(R[pn]/2-ie[pn]/2)}}return S}function br(Z,S){S===void 0&&(S={});var R=S,ie=R.placement,be=ie===void 0?Z.placement:ie,De=R.boundary,Je=De===void 0?Hr:De,At=R.rootBoundary,Ht=At===void 0?Dr:At,ln=R.elementContext,pn=ln===void 0?Ki:ln,$t=R.altBoundary,Xn=$t!==void 0&&$t,Pn=R.padding,Dn=Pn===void 0?0:Pn,$n=mt(typeof Dn!="number"?Dn:vn(Dn,_r)),Nn=pn===Ki?mo:Ki,di=Z.rects.popper,Mn=Z.elements[Xn?Nn:pn],Cn=function(Ji,Bt,ji){var Do=Bt==="clippingParents"?function(Ni){var Oo=Zr(zt(Ni)),fr=["absolute","fixed"].indexOf(zn(Ni).position)>=0&&Xt(Ni)?Ln(Ni):Ni;return un(fr)?Oo.filter(function(gr){return un(gr)&&Yn(gr,fr)&&Pt(gr)!=="body"}):[]}(Ji):[].concat(Bt),Yr=[].concat(Do,[ji]),Nr=Yr[0],hr=Yr.reduce(function(Ni,Oo){var fr=ur(Ji,Oo);return Ni.top=xr(fr.top,Ni.top),Ni.right=G(fr.right,Ni.right),Ni.bottom=G(fr.bottom,Ni.bottom),Ni.left=xr(fr.left,Ni.left),Ni},ur(Ji,Nr));return hr.width=hr.right-hr.left,hr.height=hr.bottom-hr.top,hr.x=hr.left,hr.y=hr.top,hr}(un(Mn)?Mn:Mn.contextElement||nr(Z.elements.popper),Je,Ht),ni=jn(Z.elements.reference),li=Ml({reference:ni,element:di,strategy:"absolute",placement:be}),ci=_o(Object.assign({},di,li)),Qn=pn===Ki?ci:ni,_i={top:Cn.top-Qn.top+$n.top,bottom:Qn.bottom-Cn.bottom+$n.bottom,left:Cn.left-Qn.left+$n.left,right:Qn.right-Cn.right+$n.right},pi=Z.modifiersData.offset;if(pn===Ki&&pi){var Di=pi[be];Object.keys(_i).forEach(function(Ji){var Bt=[ti,$i].indexOf(Ji)>=0?1:-1,ji=[Ti,$i].indexOf(Ji)>=0?"y":"x";_i[Ji]+=Di[ji]*Bt})}return _i}function la(Z,S){S===void 0&&(S={});var R=S,ie=R.placement,be=R.boundary,De=R.rootBoundary,Je=R.padding,At=R.flipVariations,Ht=R.allowedAutoPlacements,ln=Ht===void 0?se:Ht,pn=si(ie),$t=pn?At?Wr:Wr.filter(function(Dn){return si(Dn)===pn}):_r,Xn=$t.filter(function(Dn){return ln.indexOf(Dn)>=0});Xn.length===0&&(Xn=$t);var Pn=Xn.reduce(function(Dn,$n){return Dn[$n]=br(Z,{placement:$n,boundary:be,rootBoundary:De,padding:Je})[Ue($n)],Dn},{});return Object.keys(Pn).sort(function(Dn,$n){return Pn[Dn]-Pn[$n]})}const Ns={name:"flip",enabled:!0,phase:"main",fn:function(Z){var S=Z.state,R=Z.options,ie=Z.name;if(!S.modifiersData[ie]._skip){for(var be=R.mainAxis,De=be===void 0||be,Je=R.altAxis,At=Je===void 0||Je,Ht=R.fallbackPlacements,ln=R.padding,pn=R.boundary,$t=R.rootBoundary,Xn=R.altBoundary,Pn=R.flipVariations,Dn=Pn===void 0||Pn,$n=R.allowedAutoPlacements,Nn=S.options.placement,di=Ue(Nn),Mn=Ht||(di!==Nn&&Dn?function(gr){if(Ue(gr)===Cr)return[];var Kr=Qo(gr);return[qi(gr),Kr,qi(Kr)]}(Nn):[Qo(Nn)]),Cn=[Nn].concat(Mn).reduce(function(gr,Kr){return gr.concat(Ue(Kr)===Cr?la(S,{placement:Kr,boundary:pn,rootBoundary:$t,padding:ln,flipVariations:Dn,allowedAutoPlacements:$n}):Kr)},[]),ni=S.rects.reference,li=S.rects.popper,ci=new Map,Qn=!0,_i=Cn[0],pi=0;pi<Cn.length;pi++){var Di=Cn[pi],Ji=Ue(Di),Bt=si(Di)===Wi,ji=[Ti,$i].indexOf(Ji)>=0,Do=ji?"width":"height",Yr=br(S,{placement:Di,boundary:pn,rootBoundary:$t,altBoundary:Xn,padding:ln}),Nr=ji?Bt?ti:gi:Bt?$i:Ti;ni[Do]>li[Do]&&(Nr=Qo(Nr));var hr=Qo(Nr),Ni=[];if(De&&Ni.push(Yr[Ji]<=0),At&&Ni.push(Yr[Nr]<=0,Yr[hr]<=0),Ni.every(function(gr){return gr})){_i=Di,Qn=!1;break}ci.set(Di,Ni)}if(Qn)for(var Oo=function(gr){var Kr=Cn.find(function(wa){var Is=ci.get(wa);if(Is)return Is.slice(0,gr).every(function(zo){return zo})});if(Kr)return _i=Kr,"break"},fr=Dn?3:1;fr>0&&Oo(fr)!=="break";fr--);S.placement!==_i&&(S.modifiersData[ie]._skip=!0,S.placement=_i,S.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _h(Z,S,R){return R===void 0&&(R={x:0,y:0}),{top:Z.top-S.height-R.y,right:Z.right-S.width+R.x,bottom:Z.bottom-S.height+R.y,left:Z.left-S.width-R.x}}function oo(Z){return[Ti,ti,$i,gi].some(function(S){return Z[S]>=0})}const gh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(Z){var S=Z.state,R=Z.name,ie=S.rects.reference,be=S.rects.popper,De=S.modifiersData.preventOverflow,Je=br(S,{elementContext:"reference"}),At=br(S,{altBoundary:!0}),Ht=_h(Je,ie),ln=_h(At,be,De),pn=oo(Ht),$t=oo(ln);S.modifiersData[R]={referenceClippingOffsets:Ht,popperEscapeOffsets:ln,isReferenceHidden:pn,hasPopperEscaped:$t},S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-reference-hidden":pn,"data-popper-escaped":$t})}},Xc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(Z){var S=Z.state,R=Z.options,ie=Z.name,be=R.offset,De=be===void 0?[0,0]:be,Je=se.reduce(function(pn,$t){return pn[$t]=function(Xn,Pn,Dn){var $n=Ue(Xn),Nn=[gi,Ti].indexOf($n)>=0?-1:1,di=typeof Dn=="function"?Dn(Object.assign({},Pn,{placement:Xn})):Dn,Mn=di[0],Cn=di[1];return Mn=Mn||0,Cn=(Cn||0)*Nn,[gi,ti].indexOf($n)>=0?{x:Cn,y:Mn}:{x:Mn,y:Cn}}($t,S.rects,De),pn},{}),At=Je[S.placement],Ht=At.x,ln=At.y;S.modifiersData.popperOffsets!=null&&(S.modifiersData.popperOffsets.x+=Ht,S.modifiersData.popperOffsets.y+=ln),S.modifiersData[ie]=Je}},Mr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(Z){var S=Z.state,R=Z.name;S.modifiersData[R]=Ml({reference:S.rects.reference,element:S.rects.popper,strategy:"absolute",placement:S.placement})},data:{}},qa={name:"preventOverflow",enabled:!0,phase:"main",fn:function(Z){var S=Z.state,R=Z.options,ie=Z.name,be=R.mainAxis,De=be===void 0||be,Je=R.altAxis,At=Je!==void 0&&Je,Ht=R.boundary,ln=R.rootBoundary,pn=R.altBoundary,$t=R.padding,Xn=R.tether,Pn=Xn===void 0||Xn,Dn=R.tetherOffset,$n=Dn===void 0?0:Dn,Nn=br(S,{boundary:Ht,rootBoundary:ln,padding:$t,altBoundary:pn}),di=Ue(S.placement),Mn=si(S.placement),Cn=!Mn,ni=Or(di),li=ni==="x"?"y":"x",ci=S.modifiersData.popperOffsets,Qn=S.rects.reference,_i=S.rects.popper,pi=typeof $n=="function"?$n(Object.assign({},S.rects,{placement:S.placement})):$n,Di={x:0,y:0};if(ci){if(De||At){var Ji=ni==="y"?Ti:gi,Bt=ni==="y"?$i:ti,ji=ni==="y"?"height":"width",Do=ci[ni],Yr=ci[ni]+Nn[Ji],Nr=ci[ni]-Nn[Bt],hr=Pn?-_i[ji]/2:0,Ni=Mn===Wi?Qn[ji]:_i[ji],Oo=Mn===Wi?-_i[ji]:-Qn[ji],fr=S.elements.arrow,gr=Pn&&fr?Kt(fr):{width:0,height:0},Kr=S.modifiersData["arrow#persistent"]?S.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},wa=Kr[Ji],Is=Kr[Bt],zo=It(0,Qn[ji],gr[ji]),ec=Cn?Qn[ji]/2-hr-zo-wa-pi:Ni-zo-wa-pi,kh=Cn?-Qn[ji]/2+hr+zo+Is+pi:Oo+zo+Is+pi,tc=S.elements.arrow&&Ln(S.elements.arrow),Lh=tc?ni==="y"?tc.clientTop||0:tc.clientLeft||0:0,nc=S.modifiersData.offset?S.modifiersData.offset[S.placement][ni]:0,cu=ci[ni]+ec-nc-Lh,uu=ci[ni]+kh-nc;if(De){var hu=It(Pn?G(Yr,cu):Yr,Do,Pn?xr(Nr,uu):Nr);ci[ni]=hu,Di[ni]=hu-Do}if(At){var fu=ni==="x"?Ti:gi,Ph=ni==="x"?$i:ti,sl=ci[li],du=sl+Nn[fu],Ea=sl-Nn[Ph],ic=It(Pn?G(du,cu):du,sl,Pn?xr(Ea,uu):Ea);ci[li]=ic,Di[li]=ic-sl}}S.modifiersData[ie]=Di}},requiresIfExists:["offset"]};function xs(Z,S,R){R===void 0&&(R=!1);var ie=Xt(S);Xt(S)&&function(pn){var $t=pn.getBoundingClientRect();$t.width,pn.offsetWidth,$t.height,pn.offsetHeight}(S);var be,De,Je=nr(S),At=jn(Z),Ht={scrollLeft:0,scrollTop:0},ln={x:0,y:0};return(ie||!ie&&!R)&&((Pt(S)!=="body"||aa(Je))&&(Ht=(be=S)!==gt(be)&&Xt(be)?{scrollLeft:(De=be).scrollLeft,scrollTop:De.scrollTop}:Ir(be)),Xt(S)?((ln=jn(S)).x+=S.clientLeft,ln.y+=S.clientTop):Je&&(ln.x=qr(Je))),{x:At.left+Ht.scrollLeft-ln.x,y:At.top+Ht.scrollTop-ln.y,width:At.width,height:At.height}}function Yc(Z){var S=new Map,R=new Set,ie=[];function be(De){R.add(De.name),[].concat(De.requires||[],De.requiresIfExists||[]).forEach(function(Je){if(!R.has(Je)){var At=S.get(Je);At&&be(At)}}),ie.push(De)}return Z.forEach(function(De){S.set(De.name,De)}),Z.forEach(function(De){R.has(De.name)||be(De)}),ie}var Za={placement:"bottom",modifiers:[],strategy:"absolute"};function Kc(){for(var Z=arguments.length,S=new Array(Z),R=0;R<Z;R++)S[R]=arguments[R];return!S.some(function(ie){return!(ie&&typeof ie.getBoundingClientRect=="function")})}function Bs(Z){Z===void 0&&(Z={});var S=Z,R=S.defaultModifiers,ie=R===void 0?[]:R,be=S.defaultOptions,De=be===void 0?Za:be;return function(Je,At,Ht){Ht===void 0&&(Ht=De);var ln,pn,$t={placement:"bottom",orderedModifiers:[],options:Object.assign({},Za,De),modifiersData:{},elements:{reference:Je,popper:At},attributes:{},styles:{}},Xn=[],Pn=!1,Dn={state:$t,setOptions:function(Nn){var di=typeof Nn=="function"?Nn($t.options):Nn;$n(),$t.options=Object.assign({},De,$t.options,di),$t.scrollParents={reference:un(Je)?Zr(Je):Je.contextElement?Zr(Je.contextElement):[],popper:Zr(At)};var Mn,Cn,ni=function(li){var ci=Yc(li);return _t.reduce(function(Qn,_i){return Qn.concat(ci.filter(function(pi){return pi.phase===_i}))},[])}((Mn=[].concat(ie,$t.options.modifiers),Cn=Mn.reduce(function(li,ci){var Qn=li[ci.name];return li[ci.name]=Qn?Object.assign({},Qn,ci,{options:Object.assign({},Qn.options,ci.options),data:Object.assign({},Qn.data,ci.data)}):ci,li},{}),Object.keys(Cn).map(function(li){return Cn[li]})));return $t.orderedModifiers=ni.filter(function(li){return li.enabled}),$t.orderedModifiers.forEach(function(li){var ci=li.name,Qn=li.options,_i=Qn===void 0?{}:Qn,pi=li.effect;if(typeof pi=="function"){var Di=pi({state:$t,name:ci,instance:Dn,options:_i});Xn.push(Di||function(){})}}),Dn.update()},forceUpdate:function(){if(!Pn){var Nn=$t.elements,di=Nn.reference,Mn=Nn.popper;if(Kc(di,Mn)){$t.rects={reference:xs(di,Ln(Mn),$t.options.strategy==="fixed"),popper:Kt(Mn)},$t.reset=!1,$t.placement=$t.options.placement,$t.orderedModifiers.forEach(function(pi){return $t.modifiersData[pi.name]=Object.assign({},pi.data)});for(var Cn=0;Cn<$t.orderedModifiers.length;Cn++)if($t.reset!==!0){var ni=$t.orderedModifiers[Cn],li=ni.fn,ci=ni.options,Qn=ci===void 0?{}:ci,_i=ni.name;typeof li=="function"&&($t=li({state:$t,options:Qn,name:_i,instance:Dn})||$t)}else $t.reset=!1,Cn=-1}}},update:(ln=function(){return new Promise(function(Nn){Dn.forceUpdate(),Nn($t)})},function(){return pn||(pn=new Promise(function(Nn){Promise.resolve().then(function(){pn=void 0,Nn(ln())})})),pn}),destroy:function(){$n(),Pn=!0}};if(!Kc(Je,At))return Dn;function $n(){Xn.forEach(function(Nn){return Nn()}),Xn=[]}return Dn.setOptions(Ht).then(function(Nn){!Pn&&Ht.onFirstUpdate&&Ht.onFirstUpdate(Nn)}),Dn}}var Jc=Bs(),Yf=Bs({defaultModifiers:[Lo,Mr,cr,gn]}),kl=Bs({defaultModifiers:[Lo,Mr,cr,gn,Xc,Ns,qa,on,gh]});const yh=Object.freeze({__proto__:null,popperGenerator:Bs,detectOverflow:br,createPopperBase:Jc,createPopper:kl,createPopperLite:Yf,top:Ti,bottom:$i,right:ti,left:gi,auto:Cr,basePlacements:_r,start:Wi,end:tr,clippingParents:Hr,viewport:Dr,popper:Ki,reference:mo,variationPlacements:Wr,placements:se,beforeRead:$,read:V,afterRead:re,beforeMain:de,main:Te,afterMain:$e,beforeWrite:Ne,write:Ce,afterWrite:je,modifierPhases:_t,applyStyles:gn,arrow:on,computeStyles:cr,eventListeners:Lo,flip:Ns,hide:gh,offset:Xc,popperOffsets:Mr,preventOverflow:qa}),Ll="dropdown",Qc="Escape",Xa="Space",ca="ArrowUp",Pl="ArrowDown",vh=new RegExp("ArrowUp|ArrowDown|Escape"),eu="click.bs.dropdown.data-api",bs="keydown.bs.dropdown.data-api",ir="show",es='[data-bs-toggle="dropdown"]',Fs=".dropdown-menu",$s=H()?"top-end":"top-start",ws=H()?"top-start":"top-end",Dl=H()?"bottom-end":"bottom-start",Ya=H()?"bottom-start":"bottom-end",Ka=H()?"left-start":"right-start",mn=H()?"right-start":"left-start",Ol={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},xh={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class zr extends dn{constructor(S,R){super(S),this._popper=null,this._config=this._getConfig(R),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Ol}static get DefaultType(){return xh}static get NAME(){return Ll}toggle(){return this._isShown()?this.hide():this.show()}show(){if(D(this._element)||this._isShown(this._menu))return;const S={relatedTarget:this._element};if(qe.trigger(this._element,"show.bs.dropdown",S).defaultPrevented)return;const R=zr.getParentFromElement(this._element);this._inNavbar?me.setDataAttribute(this._menu,"popper","none"):this._createPopper(R),"ontouchstart"in document.documentElement&&!R.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(ie=>qe.on(ie,"mouseover",K)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ir),this._element.classList.add(ir),qe.trigger(this._element,"shown.bs.dropdown",S)}hide(){if(D(this._element)||!this._isShown(this._menu))return;const S={relatedTarget:this._element};this._completeHide(S)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(S){qe.trigger(this._element,"hide.bs.dropdown",S).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(R=>qe.off(R,"mouseover",K)),this._popper&&this._popper.destroy(),this._menu.classList.remove(ir),this._element.classList.remove(ir),this._element.setAttribute("aria-expanded","false"),me.removeDataAttribute(this._menu,"popper"),qe.trigger(this._element,"hidden.bs.dropdown",S))}_getConfig(S){if(S=rn(rn(rn({},this.constructor.Default),me.getDataAttributes(this._element)),S),O(Ll,S,this.constructor.DefaultType),typeof S.reference=="object"&&!s(S.reference)&&typeof S.reference.getBoundingClientRect!="function")throw new TypeError(`${Ll.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return S}_createPopper(S){if(yh===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let R=this._element;this._config.reference==="parent"?R=S:s(this._config.reference)?R=C(this._config.reference):typeof this._config.reference=="object"&&(R=this._config.reference);const ie=this._getPopperConfig(),be=ie.modifiers.find(De=>De.name==="applyStyles"&&De.enabled===!1);this._popper=kl(R,this._menu,ie),be&&me.setDataAttribute(this._menu,"popper","static")}_isShown(S=this._element){return S.classList.contains(ir)}_getMenuElement(){return oe.next(this._element,Fs)[0]}_getPlacement(){const S=this._element.parentNode;if(S.classList.contains("dropend"))return Ka;if(S.classList.contains("dropstart"))return mn;const R=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return S.classList.contains("dropup")?R?ws:$s:R?Ya:Dl}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(R=>Number.parseInt(R,10)):typeof S=="function"?R=>S(R,this._element):S}_getPopperConfig(){const S={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(S.modifiers=[{name:"applyStyles",enabled:!1}]),rn(rn({},S),typeof this._config.popperConfig=="function"?this._config.popperConfig(S):this._config.popperConfig)}_selectMenuItem({key:S,target:R}){const ie=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(k);ie.length&&Ae(ie,R,S===Pl,!ie.includes(R)).focus()}static jQueryInterface(S){return this.each(function(){const R=zr.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S]()}})}static clearMenus(S){if(S&&(S.button===2||S.type==="keyup"&&S.key!=="Tab"))return;const R=oe.find(es);for(let ie=0,be=R.length;ie<be;ie++){const De=zr.getInstance(R[ie]);if(!De||De._config.autoClose===!1||!De._isShown())continue;const Je={relatedTarget:De._element};if(S){const At=S.composedPath(),Ht=At.includes(De._menu);if(At.includes(De._element)||De._config.autoClose==="inside"&&!Ht||De._config.autoClose==="outside"&&Ht||De._menu.contains(S.target)&&(S.type==="keyup"&&S.key==="Tab"||/input|select|option|textarea|form/i.test(S.target.tagName)))continue;S.type==="click"&&(Je.clickEvent=S)}De._completeHide(Je)}}static getParentFromElement(S){return g(S)||S.parentNode}static dataApiKeydownHandler(S){if(/input|textarea/i.test(S.target.tagName)?S.key===Xa||S.key!==Qc&&(S.key!==Pl&&S.key!==ca||S.target.closest(Fs)):!vh.test(S.key))return;const R=this.classList.contains(ir);if(!R&&S.key===Qc||(S.preventDefault(),S.stopPropagation(),D(this)))return;const ie=this.matches(es)?this:oe.prev(this,es)[0],be=zr.getOrCreateInstance(ie);if(S.key!==Qc)return S.key===ca||S.key===Pl?(R||be.show(),void be._selectMenuItem(S)):void(R&&S.key!==Xa||zr.clearMenus());be.hide()}}qe.on(document,bs,es,zr.dataApiKeydownHandler),qe.on(document,bs,Fs,zr.dataApiKeydownHandler),qe.on(document,eu,zr.clearMenus),qe.on(document,"keyup.bs.dropdown.data-api",zr.clearMenus),qe.on(document,eu,es,function(Z){Z.preventDefault(),zr.getOrCreateInstance(this).toggle()}),te(zr);const zl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Rl=".sticky-top";class Ja{constructor(){this._element=document.body}getWidth(){const S=document.documentElement.clientWidth;return Math.abs(window.innerWidth-S)}hide(){const S=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",R=>R+S),this._setElementAttributes(zl,"paddingRight",R=>R+S),this._setElementAttributes(Rl,"marginRight",R=>R-S)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(S,R,ie){const be=this.getWidth();this._applyManipulationCallback(S,De=>{if(De!==this._element&&window.innerWidth>De.clientWidth+be)return;this._saveInitialAttribute(De,R);const Je=window.getComputedStyle(De)[R];De.style[R]=`${ie(Number.parseFloat(Je))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(zl,"paddingRight"),this._resetElementAttributes(Rl,"marginRight")}_saveInitialAttribute(S,R){const ie=S.style[R];ie&&me.setDataAttribute(S,R,ie)}_resetElementAttributes(S,R){this._applyManipulationCallback(S,ie=>{const be=me.getDataAttribute(ie,R);be===void 0?ie.style.removeProperty(R):(me.removeDataAttribute(ie,R),ie.style[R]=be)})}_applyManipulationCallback(S,R){s(S)?R(S):oe.find(S,this._element).forEach(R)}isOverflowing(){return this.getWidth()>0}}const bh={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},wh={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},Qa="show",ts="mousedown.bs.backdrop";class Us{constructor(S){this._config=this._getConfig(S),this._isAppended=!1,this._element=null}show(S){this._config.isVisible?(this._append(),this._config.isAnimated&&Se(this._getElement()),this._getElement().classList.add(Qa),this._emulateAnimation(()=>{ge(S)})):ge(S)}hide(S){this._config.isVisible?(this._getElement().classList.remove(Qa),this._emulateAnimation(()=>{this.dispose(),ge(S)})):ge(S)}_getElement(){if(!this._element){const S=document.createElement("div");S.className=this._config.className,this._config.isAnimated&&S.classList.add("fade"),this._element=S}return this._element}_getConfig(S){return(S=rn(rn({},bh),typeof S=="object"?S:{})).rootElement=C(S.rootElement),O("backdrop",S,wh),S}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),qe.on(this._getElement(),ts,()=>{ge(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(qe.off(this._element,ts),this._element.remove(),this._isAppended=!1)}_emulateAnimation(S){ke(S,this._getElement(),this._config.isAnimated)}}const tu={trapElement:null,autofocus:!0},Nl={trapElement:"element",autofocus:"boolean"},Bl=".bs.focustrap",Eh="backward";class ua{constructor(S){this._config=this._getConfig(S),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:S,autofocus:R}=this._config;this._isActive||(R&&S.focus(),qe.off(document,Bl),qe.on(document,"focusin.bs.focustrap",ie=>this._handleFocusin(ie)),qe.on(document,"keydown.tab.bs.focustrap",ie=>this._handleKeydown(ie)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,qe.off(document,Bl))}_handleFocusin(S){const{target:R}=S,{trapElement:ie}=this._config;if(R===document||R===ie||ie.contains(R))return;const be=oe.focusableChildren(ie);be.length===0?ie.focus():this._lastTabNavDirection===Eh?be[be.length-1].focus():be[0].focus()}_handleKeydown(S){S.key==="Tab"&&(this._lastTabNavDirection=S.shiftKey?Eh:"forward")}_getConfig(S){return S=rn(rn({},tu),typeof S=="object"?S:{}),O("focustrap",S,Nl),S}}const ha="modal",Fl="Escape",Rr={backdrop:!0,keyboard:!0,focus:!0},$l={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},fa="hidden.bs.modal",da="show.bs.modal",Ul="resize.bs.modal",el="click.dismiss.bs.modal",tl="keydown.dismiss.bs.modal",nl="mousedown.dismiss.bs.modal",il="modal-open",rl="show",jl="modal-static";class Es extends dn{constructor(S,R){super(S),this._config=this._getConfig(R),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Ja}static get Default(){return Rr}static get NAME(){return ha}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||this._isTransitioning||qe.trigger(this._element,da,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(il),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),qe.on(this._dialog,nl,()=>{qe.one(this._element,"mouseup.dismiss.bs.modal",R=>{R.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(S)))}hide(){if(!this._isShown||this._isTransitioning||qe.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const S=this._isAnimated();S&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(rl),qe.off(this._element,el),qe.off(this._dialog,nl),this._queueCallback(()=>this._hideModal(),this._element,S)}dispose(){[window,this._dialog].forEach(S=>qe.off(S,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Us({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ua({trapElement:this._element})}_getConfig(S){return S=rn(rn(rn({},Rr),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),O(ha,S,$l),S}_showElement(S){const R=this._isAnimated(),ie=oe.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,ie&&(ie.scrollTop=0),R&&Se(this._element),this._element.classList.add(rl),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,qe.trigger(this._element,"shown.bs.modal",{relatedTarget:S})},this._dialog,R)}_setEscapeEvent(){this._isShown?qe.on(this._element,tl,S=>{this._config.keyboard&&S.key===Fl?(S.preventDefault(),this.hide()):this._config.keyboard||S.key!==Fl||this._triggerBackdropTransition()}):qe.off(this._element,tl)}_setResizeEvent(){this._isShown?qe.on(window,Ul,()=>this._adjustDialog()):qe.off(window,Ul)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(il),this._resetAdjustments(),this._scrollBar.reset(),qe.trigger(this._element,fa)})}_showBackdrop(S){qe.on(this._element,el,R=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:R.target===R.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(S)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(qe.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:S,scrollHeight:R,style:ie}=this._element,be=R>document.documentElement.clientHeight;!be&&ie.overflowY==="hidden"||S.contains(jl)||(be||(ie.overflowY="hidden"),S.add(jl),this._queueCallback(()=>{S.remove(jl),be||this._queueCallback(()=>{ie.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const S=this._element.scrollHeight>document.documentElement.clientHeight,R=this._scrollBar.getWidth(),ie=R>0;(!ie&&S&&!H()||ie&&!S&&H())&&(this._element.style.paddingLeft=`${R}px`),(ie&&!S&&!H()||!ie&&S&&H())&&(this._element.style.paddingRight=`${R}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(S,R){return this.each(function(){const ie=Es.getOrCreateInstance(this,S);if(typeof S=="string"){if(ie[S]===void 0)throw new TypeError(`No method named "${S}"`);ie[S](R)}})}}qe.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(Z){const S=g(this);["A","AREA"].includes(this.tagName)&&Z.preventDefault(),qe.one(S,da,ie=>{ie.defaultPrevented||qe.one(S,fa,()=>{k(this)&&this.focus()})});const R=oe.findOne(".modal.show");R&&Es.getInstance(R).hide(),Es.getOrCreateInstance(S).toggle(this)}),Fe(Es),te(Es);const js="offcanvas",Th={backdrop:!0,keyboard:!0,scroll:!1},Kf={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},nu="show",Ah=".offcanvas.show",Sh="hidden.bs.offcanvas";class Ts extends dn{constructor(S,R){super(S),this._config=this._getConfig(R),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return js}static get Default(){return Th}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||qe.trigger(this._element,"show.bs.offcanvas",{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Ja().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(nu),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),qe.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:S})},this._element,!0))}hide(){this._isShown&&(qe.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(nu),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Ja().reset(),qe.trigger(this._element,Sh)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(S){return S=rn(rn(rn({},Th),me.getDataAttributes(this._element)),typeof S=="object"?S:{}),O(js,S,Kf),S}_initializeBackDrop(){return new Us({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new ua({trapElement:this._element})}_addEventListeners(){qe.on(this._element,"keydown.dismiss.bs.offcanvas",S=>{this._config.keyboard&&S.key==="Escape"&&this.hide()})}static jQueryInterface(S){return this.each(function(){const R=Ts.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);R[S](this)}})}}qe.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(Z){const S=g(this);if(["A","AREA"].includes(this.tagName)&&Z.preventDefault(),D(this))return;qe.one(S,Sh,()=>{k(this)&&this.focus()});const R=oe.findOne(Ah);R&&R!==S&&Ts.getInstance(R).hide(),Ts.getOrCreateInstance(S).toggle(this)}),qe.on(window,"load.bs.offcanvas.data-api",()=>oe.find(Ah).forEach(Z=>Ts.getOrCreateInstance(Z).show())),Fe(Ts),te(Ts);const iu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Vl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Vs=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,ru=(Z,S)=>{const R=Z.nodeName.toLowerCase();if(S.includes(R))return!iu.has(R)||Boolean(Vl.test(Z.nodeValue)||Vs.test(Z.nodeValue));const ie=S.filter(be=>be instanceof RegExp);for(let be=0,De=ie.length;be<De;be++)if(ie[be].test(R))return!0;return!1};function ou(Z,S,R){if(!Z.length)return Z;if(R&&typeof R=="function")return R(Z);const ie=new window.DOMParser().parseFromString(Z,"text/html"),be=[].concat(...ie.body.querySelectorAll("*"));for(let De=0,Je=be.length;De<Je;De++){const At=be[De],Ht=At.nodeName.toLowerCase();if(!Object.keys(S).includes(Ht)){At.remove();continue}const ln=[].concat(...At.attributes),pn=[].concat(S["*"]||[],S[Ht]||[]);ln.forEach($t=>{ru($t,pn)||At.removeAttribute($t.nodeName)})}return ie.body.innerHTML}const Gl="tooltip",As=new Set(["sanitize","allowList","sanitizeFn"]),su={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Gs={AUTO:"auto",TOP:"top",RIGHT:H()?"left":"right",BOTTOM:"bottom",LEFT:H()?"right":"left"},pa={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Ch={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},ma="fade",Jn="show",go="show",Hl="out",Wl=".tooltip-inner",_a=".modal",Ih="hide.bs.modal",ql="hover",Zl="focus";class Ss extends dn{constructor(S,R){if(yh===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(S),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(R),this.tip=null,this._setListeners()}static get Default(){return pa}static get NAME(){return Gl}static get Event(){return Ch}static get DefaultType(){return su}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(S){if(this._isEnabled)if(S){const R=this._initializeOnDelegatedTarget(S);R._activeTrigger.click=!R._activeTrigger.click,R._isWithActiveTrigger()?R._enter(null,R):R._leave(null,R)}else{if(this.getTipElement().classList.contains(Jn))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),qe.off(this._element.closest(_a),Ih,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const S=qe.trigger(this._element,this.constructor.Event.SHOW),R=F(this._element),ie=R===null?this._element.ownerDocument.documentElement.contains(this._element):R.contains(this._element);if(S.defaultPrevented||!ie)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(Wl).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const be=this.getTipElement(),De=($t=>{do $t+=Math.floor(1e6*Math.random());while(document.getElementById($t));return $t})(this.constructor.NAME);be.setAttribute("id",De),this._element.setAttribute("aria-describedby",De),this._config.animation&&be.classList.add(ma);const Je=typeof this._config.placement=="function"?this._config.placement.call(this,be,this._element):this._config.placement,At=this._getAttachment(Je);this._addAttachmentClass(At);const{container:Ht}=this._config;Gt.set(be,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(Ht.append(be),qe.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=kl(this._element,be,this._getPopperConfig(At)),be.classList.add(Jn);const ln=this._resolvePossibleFunction(this._config.customClass);ln&&be.classList.add(...ln.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach($t=>{qe.on($t,"mouseover",K)});const pn=this.tip.classList.contains(ma);this._queueCallback(()=>{const $t=this._hoverState;this._hoverState=null,qe.trigger(this._element,this.constructor.Event.SHOWN),$t===Hl&&this._leave(null,this)},this.tip,pn)}hide(){if(!this._popper)return;const S=this.getTipElement();if(qe.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;S.classList.remove(Jn),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(ie=>qe.off(ie,"mouseover",K)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const R=this.tip.classList.contains(ma);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==go&&S.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),qe.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,R),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const S=document.createElement("div");S.innerHTML=this._config.template;const R=S.children[0];return this.setContent(R),R.classList.remove(ma,Jn),this.tip=R,this.tip}setContent(S){this._sanitizeAndSetContent(S,this.getTitle(),Wl)}_sanitizeAndSetContent(S,R,ie){const be=oe.findOne(ie,S);R||!be?this.setElementContent(be,R):be.remove()}setElementContent(S,R){if(S!==null)return s(R)?(R=C(R),void(this._config.html?R.parentNode!==S&&(S.innerHTML="",S.append(R)):S.textContent=R.textContent)):void(this._config.html?(this._config.sanitize&&(R=ou(R,this._config.allowList,this._config.sanitizeFn)),S.innerHTML=R):S.textContent=R)}getTitle(){const S=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(S)}updateAttachment(S){return S==="right"?"end":S==="left"?"start":S}_initializeOnDelegatedTarget(S,R){return R||this.constructor.getOrCreateInstance(S.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(R=>Number.parseInt(R,10)):typeof S=="function"?R=>S(R,this._element):S}_resolvePossibleFunction(S){return typeof S=="function"?S.call(this._element):S}_getPopperConfig(S){const R={placement:S,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:ie=>this._handlePopperPlacementChange(ie)}],onFirstUpdate:ie=>{ie.options.placement!==ie.placement&&this._handlePopperPlacementChange(ie)}};return rn(rn({},R),typeof this._config.popperConfig=="function"?this._config.popperConfig(R):this._config.popperConfig)}_addAttachmentClass(S){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(S)}`)}_getAttachment(S){return Gs[S.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(S=>{if(S==="click")qe.on(this._element,this.constructor.Event.CLICK,this._config.selector,R=>this.toggle(R));else if(S!=="manual"){const R=S===ql?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,ie=S===ql?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;qe.on(this._element,R,this._config.selector,be=>this._enter(be)),qe.on(this._element,ie,this._config.selector,be=>this._leave(be))}}),this._hideModalHandler=()=>{this._element&&this.hide()},qe.on(this._element.closest(_a),Ih,this._hideModalHandler),this._config.selector?this._config=Su(rn({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const S=this._element.getAttribute("title"),R=typeof this._element.getAttribute("data-bs-original-title");(S||R!=="string")&&(this._element.setAttribute("data-bs-original-title",S||""),!S||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",S),this._element.setAttribute("title",""))}_enter(S,R){R=this._initializeOnDelegatedTarget(S,R),S&&(R._activeTrigger[S.type==="focusin"?Zl:ql]=!0),R.getTipElement().classList.contains(Jn)||R._hoverState===go?R._hoverState=go:(clearTimeout(R._timeout),R._hoverState=go,R._config.delay&&R._config.delay.show?R._timeout=setTimeout(()=>{R._hoverState===go&&R.show()},R._config.delay.show):R.show())}_leave(S,R){R=this._initializeOnDelegatedTarget(S,R),S&&(R._activeTrigger[S.type==="focusout"?Zl:ql]=R._element.contains(S.relatedTarget)),R._isWithActiveTrigger()||(clearTimeout(R._timeout),R._hoverState=Hl,R._config.delay&&R._config.delay.hide?R._timeout=setTimeout(()=>{R._hoverState===Hl&&R.hide()},R._config.delay.hide):R.hide())}_isWithActiveTrigger(){for(const S in this._activeTrigger)if(this._activeTrigger[S])return!0;return!1}_getConfig(S){const R=me.getDataAttributes(this._element);return Object.keys(R).forEach(ie=>{As.has(ie)&&delete R[ie]}),(S=rn(rn(rn({},this.constructor.Default),R),typeof S=="object"&&S?S:{})).container=S.container===!1?document.body:C(S.container),typeof S.delay=="number"&&(S.delay={show:S.delay,hide:S.delay}),typeof S.title=="number"&&(S.title=S.title.toString()),typeof S.content=="number"&&(S.content=S.content.toString()),O(Gl,S,this.constructor.DefaultType),S.sanitize&&(S.template=ou(S.template,S.allowList,S.sanitizeFn)),S}_getDelegateConfig(){const S={};for(const R in this._config)this.constructor.Default[R]!==this._config[R]&&(S[R]=this._config[R]);return S}_cleanTipClass(){const S=this.getTipElement(),R=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),ie=S.getAttribute("class").match(R);ie!==null&&ie.length>0&&ie.map(be=>be.trim()).forEach(be=>S.classList.remove(be))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(S){const{state:R}=S;R&&(this.tip=R.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(R.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(S){return this.each(function(){const R=Ss.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S]()}})}}te(Ss);const Xl=Su(rn({},Ss.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ga=Su(rn({},Ss.DefaultType),{content:"(string|element|function)"}),ol={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class ya extends Ss{static get Default(){return Xl}static get NAME(){return"popover"}static get Event(){return ol}static get DefaultType(){return ga}isWithContent(){return this.getTitle()||this._getContent()}setContent(S){this._sanitizeAndSetContent(S,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(S,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(S){return this.each(function(){const R=ya.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S]()}})}}te(ya);const Yl="scrollspy",au={offset:10,method:"auto",target:""},Kl={offset:"number",method:"string",target:"(string|element)"},ns="active",Wt=".nav-link, .list-group-item, .dropdown-item",Xr="position";class is extends dn{constructor(S,R){super(S),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(R),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,qe.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return au}static get NAME(){return Yl}refresh(){const S=this._scrollElement===this._scrollElement.window?"offset":Xr,R=this._config.method==="auto"?S:this._config.method,ie=R===Xr?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),oe.find(Wt,this._config.target).map(be=>{const De=_(be),Je=De?oe.findOne(De):null;if(Je){const At=Je.getBoundingClientRect();if(At.width||At.height)return[me[R](Je).top+ie,De]}return null}).filter(be=>be).sort((be,De)=>be[0]-De[0]).forEach(be=>{this._offsets.push(be[0]),this._targets.push(be[1])})}dispose(){qe.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(S){return(S=rn(rn(rn({},au),me.getDataAttributes(this._element)),typeof S=="object"&&S?S:{})).target=C(S.target)||document.documentElement,O(Yl,S,Kl),S}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const S=this._getScrollTop()+this._config.offset,R=this._getScrollHeight(),ie=this._config.offset+R-this._getOffsetHeight();if(this._scrollHeight!==R&&this.refresh(),S>=ie){const be=this._targets[this._targets.length-1];this._activeTarget!==be&&this._activate(be)}else{if(this._activeTarget&&S<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let be=this._offsets.length;be--;)this._activeTarget!==this._targets[be]&&S>=this._offsets[be]&&(this._offsets[be+1]===void 0||S<this._offsets[be+1])&&this._activate(this._targets[be])}}_activate(S){this._activeTarget=S,this._clear();const R=Wt.split(",").map(be=>`${be}[data-bs-target="${S}"],${be}[href="${S}"]`),ie=oe.findOne(R.join(","),this._config.target);ie.classList.add(ns),ie.classList.contains("dropdown-item")?oe.findOne(".dropdown-toggle",ie.closest(".dropdown")).classList.add(ns):oe.parents(ie,".nav, .list-group").forEach(be=>{oe.prev(be,".nav-link, .list-group-item").forEach(De=>De.classList.add(ns)),oe.prev(be,".nav-item").forEach(De=>{oe.children(De,".nav-link").forEach(Je=>Je.classList.add(ns))})}),qe.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:S})}_clear(){oe.find(Wt,this._config.target).filter(S=>S.classList.contains(ns)).forEach(S=>S.classList.remove(ns))}static jQueryInterface(S){return this.each(function(){const R=is.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S]()}})}}qe.on(window,"load.bs.scrollspy.data-api",()=>{oe.find('[data-bs-spy="scroll"]').forEach(Z=>new is(Z))}),te(is);const va="active",lu="fade",Hs="show",Po=".active",xa=":scope > li > .active";class so extends dn{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(va))return;let S;const R=g(this._element),ie=this._element.closest(".nav, .list-group");if(ie){const Je=ie.nodeName==="UL"||ie.nodeName==="OL"?xa:Po;S=oe.find(Je,ie),S=S[S.length-1]}const be=S?qe.trigger(S,"hide.bs.tab",{relatedTarget:this._element}):null;if(qe.trigger(this._element,"show.bs.tab",{relatedTarget:S}).defaultPrevented||be!==null&&be.defaultPrevented)return;this._activate(this._element,ie);const De=()=>{qe.trigger(S,"hidden.bs.tab",{relatedTarget:this._element}),qe.trigger(this._element,"shown.bs.tab",{relatedTarget:S})};R?this._activate(R,R.parentNode,De):De()}_activate(S,R,ie){const be=(!R||R.nodeName!=="UL"&&R.nodeName!=="OL"?oe.children(R,Po):oe.find(xa,R))[0],De=ie&&be&&be.classList.contains(lu),Je=()=>this._transitionComplete(S,be,ie);be&&De?(be.classList.remove(Hs),this._queueCallback(Je,S,!0)):Je()}_transitionComplete(S,R,ie){if(R){R.classList.remove(va);const De=oe.findOne(":scope > .dropdown-menu .active",R.parentNode);De&&De.classList.remove(va),R.getAttribute("role")==="tab"&&R.setAttribute("aria-selected",!1)}S.classList.add(va),S.getAttribute("role")==="tab"&&S.setAttribute("aria-selected",!0),Se(S),S.classList.contains(lu)&&S.classList.add(Hs);let be=S.parentNode;if(be&&be.nodeName==="LI"&&(be=be.parentNode),be&&be.classList.contains("dropdown-menu")){const De=S.closest(".dropdown");De&&oe.find(".dropdown-toggle",De).forEach(Je=>Je.classList.add(va)),S.setAttribute("aria-expanded",!0)}ie&&ie()}static jQueryInterface(S){return this.each(function(){const R=so.getOrCreateInstance(this);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S]()}})}}qe.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(Z){["A","AREA"].includes(this.tagName)&&Z.preventDefault(),D(this)||so.getOrCreateInstance(this).show()}),te(so);const rs="toast",Jl="hide",ba="show",yo="showing",Mh={animation:"boolean",autohide:"boolean",delay:"number"},Ql={animation:!0,autohide:!0,delay:5e3};class Cs extends dn{constructor(S,R){super(S),this._config=this._getConfig(R),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Mh}static get Default(){return Ql}static get NAME(){return rs}show(){qe.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Jl),Se(this._element),this._element.classList.add(ba),this._element.classList.add(yo),this._queueCallback(()=>{this._element.classList.remove(yo),qe.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(ba)&&(qe.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(yo),this._queueCallback(()=>{this._element.classList.add(Jl),this._element.classList.remove(yo),this._element.classList.remove(ba),qe.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(ba)&&this._element.classList.remove(ba),super.dispose()}_getConfig(S){return S=rn(rn(rn({},Ql),me.getDataAttributes(this._element)),typeof S=="object"&&S?S:{}),O(rs,S,this.constructor.DefaultType),S}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(S,R){switch(S.type){case"mouseover":case"mouseout":this._hasMouseInteraction=R;break;case"focusin":case"focusout":this._hasKeyboardInteraction=R}if(R)return void this._clearTimeout();const ie=S.relatedTarget;this._element===ie||this._element.contains(ie)||this._maybeScheduleHide()}_setListeners(){qe.on(this._element,"mouseover.bs.toast",S=>this._onInteraction(S,!0)),qe.on(this._element,"mouseout.bs.toast",S=>this._onInteraction(S,!1)),qe.on(this._element,"focusin.bs.toast",S=>this._onInteraction(S,!0)),qe.on(this._element,"focusout.bs.toast",S=>this._onInteraction(S,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(S){return this.each(function(){const R=Cs.getOrCreateInstance(this,S);if(typeof S=="string"){if(R[S]===void 0)throw new TypeError(`No method named "${S}"`);R[S](this)}})}}return Fe(Cs),te(Cs),{Alert:bt,Button:Et,Carousel:Ke,Collapse:vr,Dropdown:zr,Modal:Es,Offcanvas:Ts,Popover:ya,ScrollSpy:is,Tab:so,Toast:Cs,Tooltip:Ss}})})(x5);function i0(t){return(i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function vp(t,n){if(!vp.installed){var l=wA(n)?E5(n):n;if(T5(l)){vp.installed=!0;var h=A5(t);if(h){var _=h<3?b5:w5;Object.keys(l).forEach(function(g){_(t,g,l[g])})}else console.error("[vue-axios] unknown Vue version")}else console.error("[vue-axios] configuration is invalid, expected options are either <axios_instance> or { <registration_key>: <axios_instance> }")}}function b5(t,n,l){Object.defineProperty(t.prototype,n,{get:function(){return l}}),t[n]=l}function w5(t,n,l){t.config.globalProperties[n]=l,t[n]=l}function wA(t){return t&&typeof t.get=="function"&&typeof t.post=="function"}function E5(t){return{axios:t,$http:t}}function T5(t){return i0(t)==="object"&&Object.keys(t).every(function(n){return wA(t[n])})}function A5(t){return t&&t.version&&Number(t.version.split(".")[0])}(typeof exports=="undefined"?"undefined":i0(exports))=="object"?module.exports=vp:typeof define=="function"&&define.amd?define([],function(){return vp}):window.Vue&&window.axios&&window.Vue.use&&Vue.use(vp,window.axios);/*!
  * shared v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const lh=typeof window!="undefined";let _s,ch;{const t=lh&&window.performance;t&&t.mark&&t.measure&&t.clearMarks&&t.clearMeasures&&(_s=n=>t.mark(n),ch=(n,l,h)=>{t.measure(n,l,h),t.clearMarks(l),t.clearMarks(h)})}const S5=/\{([0-9a-zA-Z]+)\}/g;function A_(t,...n){return n.length===1&&er(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),t.replace(S5,(l,h)=>n.hasOwnProperty(h)?n[h]:"")}const C5=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",$a=t=>C5?Symbol(t):t,I5=(t,n,l)=>M5({l:t,k:n,s:l}),M5=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),jr=t=>typeof t=="number"&&isFinite(t),k5=t=>o0(t)==="[object Date]",Rf=t=>o0(t)==="[object RegExp]",S_=t=>ri(t)&&Object.keys(t).length===0;function Jo(t,n){typeof console!="undefined"&&(console.warn("[intlify] "+t),n&&console.warn(n.stack))}const Vr=Object.assign;let EA;const xp=()=>EA||(EA=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function TA(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const L5=Object.prototype.hasOwnProperty;function r0(t,n){return L5.call(t,n)}const ar=Array.isArray,Sr=t=>typeof t=="function",fn=t=>typeof t=="string",Li=t=>typeof t=="boolean",er=t=>t!==null&&typeof t=="object",AA=Object.prototype.toString,o0=t=>AA.call(t),ri=t=>o0(t)==="[object Object]",P5=t=>t==null?"":ar(t)||ri(t)&&t.toString===AA?JSON.stringify(t,null,2):String(t),SA=2;function D5(t,n=0,l=t.length){const h=t.split(/\r?\n/);let _=0;const g=[];for(let w=0;w<h.length;w++)if(_+=h[w].length+1,_>=n){for(let s=w-SA;s<=w+SA||l>_;s++){if(s<0||s>=h.length)continue;const C=s+1;g.push(`${C}${" ".repeat(3-String(C).length)}|  ${h[s]}`);const O=h[s].length;if(s===w){const k=n-(_-O)+1,D=Math.max(1,l>_?O-k:l-n);g.push("   |  "+" ".repeat(k)+"^".repeat(D))}else if(s>w){if(l>_){const k=Math.max(Math.min(l-_,O),1);g.push("   |  "+"^".repeat(k))}_+=O+1}}break}return g.join(`
`)}function s0(){const t=new Map;return{events:t,on(l,h){const _=t.get(l);_&&_.push(h)||t.set(l,[h])},off(l,h){const _=t.get(l);_&&_.splice(_.indexOf(h)>>>0,1)},emit(l,h){(t.get(l)||[]).slice().map(_=>_(h)),(t.get("*")||[]).slice().map(_=>_(l,h))}}}/*!
  * message-compiler v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Zn={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15},O5={[Zn.EXPECTED_TOKEN]:"Expected token: '{0}'",[Zn.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Zn.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Zn.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Zn.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Zn.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Zn.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Zn.EMPTY_PLACEHOLDER]:"Empty placeholder",[Zn.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Zn.INVALID_LINKED_FORMAT]:"Invalid linked format",[Zn.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Zn.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Zn.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Zn.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'"};function C_(t,n,l={}){const{domain:h,messages:_,args:g}=l,w=A_((_||O5)[t]||"",...g||[]),s=new SyntaxError(String(w));return s.code=t,n&&(s.location=n),s.domain=h,s}function z5(t){throw t}function R5(t,n,l){return{line:t,column:n,offset:l}}function a0(t,n,l){const h={start:t,end:n};return l!=null&&(h.source=l),h}const Al=" ",N5="\r",Io=`
`,B5=String.fromCharCode(8232),F5=String.fromCharCode(8233);function $5(t){const n=t;let l=0,h=1,_=1,g=0;const w=Qe=>n[Qe]===N5&&n[Qe+1]===Io,s=Qe=>n[Qe]===Io,C=Qe=>n[Qe]===F5,O=Qe=>n[Qe]===B5,k=Qe=>w(Qe)||s(Qe)||C(Qe)||O(Qe),D=()=>l,F=()=>h,K=()=>_,Se=()=>g,pe=Qe=>w(Qe)||C(Qe)||O(Qe)?Io:n[Qe],J=()=>pe(l),H=()=>pe(l+g);function te(){return g=0,k(l)&&(h++,_=0),w(l)&&l++,l++,_++,n[l]}function ge(){return w(l+g)&&g++,g++,n[l+g]}function ke(){l=0,h=1,_=1,g=0}function Ae(Qe=0){g=Qe}function Pe(){const Qe=l+g;for(;Qe!==l;)te();g=0}return{index:D,line:F,column:K,peekOffset:Se,charAt:pe,currentChar:J,currentPeek:H,next:te,peek:ge,reset:ke,resetPeek:Ae,skipToPeek:Pe}}const $c=void 0,CA="'",U5="tokenizer";function j5(t,n={}){const l=n.location!==!1,h=$5(t),_=()=>h.index(),g=()=>R5(h.line(),h.column(),h.index()),w=g(),s=_(),C={currentType:14,offset:s,startLoc:w,endLoc:w,lastType:14,lastOffset:s,lastStartLoc:w,lastEndLoc:w,braceNest:0,inLinked:!1,text:""},O=()=>C,{onError:k}=n;function D(me,oe,rt,...ee){const _e=O();if(oe.column+=rt,oe.offset+=rt,k){const We=a0(_e.startLoc,oe),Ze=C_(me,We,{domain:U5,args:ee});k(Ze)}}function F(me,oe,rt){me.endLoc=g(),me.currentType=oe;const ee={type:oe};return l&&(ee.loc=a0(me.startLoc,me.endLoc)),rt!=null&&(ee.value=rt),ee}const K=me=>F(me,14);function Se(me,oe){return me.currentChar()===oe?(me.next(),oe):(D(Zn.EXPECTED_TOKEN,g(),0,oe),"")}function pe(me){let oe="";for(;me.currentPeek()===Al||me.currentPeek()===Io;)oe+=me.currentPeek(),me.peek();return oe}function J(me){const oe=pe(me);return me.skipToPeek(),oe}function H(me){if(me===$c)return!1;const oe=me.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe===95}function te(me){if(me===$c)return!1;const oe=me.charCodeAt(0);return oe>=48&&oe<=57}function ge(me,oe){const{currentType:rt}=oe;if(rt!==2)return!1;pe(me);const ee=H(me.currentPeek());return me.resetPeek(),ee}function ke(me,oe){const{currentType:rt}=oe;if(rt!==2)return!1;pe(me);const ee=me.currentPeek()==="-"?me.peek():me.currentPeek(),_e=te(ee);return me.resetPeek(),_e}function Ae(me,oe){const{currentType:rt}=oe;if(rt!==2)return!1;pe(me);const ee=me.currentPeek()===CA;return me.resetPeek(),ee}function Pe(me,oe){const{currentType:rt}=oe;if(rt!==8)return!1;pe(me);const ee=me.currentPeek()===".";return me.resetPeek(),ee}function Qe(me,oe){const{currentType:rt}=oe;if(rt!==9)return!1;pe(me);const ee=H(me.currentPeek());return me.resetPeek(),ee}function wt(me,oe){const{currentType:rt}=oe;if(!(rt===8||rt===12))return!1;pe(me);const ee=me.currentPeek()===":";return me.resetPeek(),ee}function nt(me,oe){const{currentType:rt}=oe;if(rt!==10)return!1;const ee=()=>{const We=me.currentPeek();return We==="{"?H(me.peek()):We==="@"||We==="%"||We==="|"||We===":"||We==="."||We===Al||!We?!1:We===Io?(me.peek(),ee()):H(We)},_e=ee();return me.resetPeek(),_e}function Ee(me){pe(me);const oe=me.currentPeek()==="|";return me.resetPeek(),oe}function Xe(me,oe=!0){const rt=(_e=!1,We="",Ze=!1)=>{const pt=me.currentPeek();return pt==="{"?We==="%"?!1:_e:pt==="@"||!pt?We==="%"?!0:_e:pt==="%"?(me.peek(),rt(_e,"%",!0)):pt==="|"?We==="%"||Ze?!0:!(We===Al||We===Io):pt===Al?(me.peek(),rt(!0,Al,Ze)):pt===Io?(me.peek(),rt(!0,Io,Ze)):!0},ee=rt();return oe&&me.resetPeek(),ee}function ot(me,oe){const rt=me.currentChar();return rt===$c?$c:oe(rt)?(me.next(),rt):null}function Be(me){return ot(me,rt=>{const ee=rt.charCodeAt(0);return ee>=97&&ee<=122||ee>=65&&ee<=90||ee>=48&&ee<=57||ee===95||ee===36})}function ve(me){return ot(me,rt=>{const ee=rt.charCodeAt(0);return ee>=48&&ee<=57})}function He(me){return ot(me,rt=>{const ee=rt.charCodeAt(0);return ee>=48&&ee<=57||ee>=65&&ee<=70||ee>=97&&ee<=102})}function ct(me){let oe="",rt="";for(;oe=ve(me);)rt+=oe;return rt}function Ye(me){let oe="";for(;;){const rt=me.currentChar();if(rt==="{"||rt==="}"||rt==="@"||rt==="|"||!rt)break;if(rt==="%")if(Xe(me))oe+=rt,me.next();else break;else if(rt===Al||rt===Io)if(Xe(me))oe+=rt,me.next();else{if(Ee(me))break;oe+=rt,me.next()}else oe+=rt,me.next()}return oe}function ht(me){J(me);let oe="",rt="";for(;oe=Be(me);)rt+=oe;return me.currentChar()===$c&&D(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),rt}function lt(me){J(me);let oe="";return me.currentChar()==="-"?(me.next(),oe+=`-${ct(me)}`):oe+=ct(me),me.currentChar()===$c&&D(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),oe}function Ut(me){J(me),Se(me,"'");let oe="",rt="";const ee=We=>We!==CA&&We!==Io;for(;oe=ot(me,ee);)oe==="\\"?rt+=qe(me):rt+=oe;const _e=me.currentChar();return _e===Io||_e===$c?(D(Zn.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,g(),0),_e===Io&&(me.next(),Se(me,"'")),rt):(Se(me,"'"),rt)}function qe(me){const oe=me.currentChar();switch(oe){case"\\":case"'":return me.next(),`\\${oe}`;case"u":return hn(me,oe,4);case"U":return hn(me,oe,6);default:return D(Zn.UNKNOWN_ESCAPE_SEQUENCE,g(),0,oe),""}}function hn(me,oe,rt){Se(me,oe);let ee="";for(let _e=0;_e<rt;_e++){const We=He(me);if(!We){D(Zn.INVALID_UNICODE_ESCAPE_SEQUENCE,g(),0,`\\${oe}${ee}${me.currentChar()}`);break}ee+=We}return`\\${oe}${ee}`}function Gt(me){J(me);let oe="",rt="";const ee=_e=>_e!=="{"&&_e!=="}"&&_e!==Al&&_e!==Io;for(;oe=ot(me,ee);)rt+=oe;return rt}function dn(me){let oe="",rt="";for(;oe=Be(me);)rt+=oe;return rt}function Fe(me){const oe=(rt=!1,ee)=>{const _e=me.currentChar();return _e==="{"||_e==="%"||_e==="@"||_e==="|"||!_e||_e===Al?ee:_e===Io?(ee+=_e,me.next(),oe(rt,ee)):(ee+=_e,me.next(),oe(!0,ee))};return oe(!1,"")}function bt(me){J(me);const oe=Se(me,"|");return J(me),oe}function kt(me,oe){let rt=null;switch(me.currentChar()){case"{":return oe.braceNest>=1&&D(Zn.NOT_ALLOW_NEST_PLACEHOLDER,g(),0),me.next(),rt=F(oe,2,"{"),J(me),oe.braceNest++,rt;case"}":return oe.braceNest>0&&oe.currentType===2&&D(Zn.EMPTY_PLACEHOLDER,g(),0),me.next(),rt=F(oe,3,"}"),oe.braceNest--,oe.braceNest>0&&J(me),oe.inLinked&&oe.braceNest===0&&(oe.inLinked=!1),rt;case"@":return oe.braceNest>0&&D(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),rt=Et(me,oe)||K(oe),oe.braceNest=0,rt;default:let _e=!0,We=!0,Ze=!0;if(Ee(me))return oe.braceNest>0&&D(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),rt=F(oe,1,bt(me)),oe.braceNest=0,oe.inLinked=!1,rt;if(oe.braceNest>0&&(oe.currentType===5||oe.currentType===6||oe.currentType===7))return D(Zn.UNTERMINATED_CLOSING_BRACE,g(),0),oe.braceNest=0,sn(me,oe);if(_e=ge(me,oe))return rt=F(oe,5,ht(me)),J(me),rt;if(We=ke(me,oe))return rt=F(oe,6,lt(me)),J(me),rt;if(Ze=Ae(me,oe))return rt=F(oe,7,Ut(me)),J(me),rt;if(!_e&&!We&&!Ze)return rt=F(oe,13,Gt(me)),D(Zn.INVALID_TOKEN_IN_PLACEHOLDER,g(),0,rt.value),J(me),rt;break}return rt}function Et(me,oe){const{currentType:rt}=oe;let ee=null;const _e=me.currentChar();switch((rt===8||rt===9||rt===12||rt===10)&&(_e===Io||_e===Al)&&D(Zn.INVALID_LINKED_FORMAT,g(),0),_e){case"@":return me.next(),ee=F(oe,8,"@"),oe.inLinked=!0,ee;case".":return J(me),me.next(),F(oe,9,".");case":":return J(me),me.next(),F(oe,10,":");default:return Ee(me)?(ee=F(oe,1,bt(me)),oe.braceNest=0,oe.inLinked=!1,ee):Pe(me,oe)||wt(me,oe)?(J(me),Et(me,oe)):Qe(me,oe)?(J(me),F(oe,12,dn(me))):nt(me,oe)?(J(me),_e==="{"?kt(me,oe)||ee:F(oe,11,Fe(me))):(rt===8&&D(Zn.INVALID_LINKED_FORMAT,g(),0),oe.braceNest=0,oe.inLinked=!1,sn(me,oe))}}function sn(me,oe){let rt={type:14};if(oe.braceNest>0)return kt(me,oe)||K(oe);if(oe.inLinked)return Et(me,oe)||K(oe);const ee=me.currentChar();switch(ee){case"{":return kt(me,oe)||K(oe);case"}":return D(Zn.UNBALANCED_CLOSING_BRACE,g(),0),me.next(),F(oe,3,"}");case"@":return Et(me,oe)||K(oe);default:if(Ee(me))return rt=F(oe,1,bt(me)),oe.braceNest=0,oe.inLinked=!1,rt;if(Xe(me))return F(oe,0,Ye(me));if(ee==="%")return me.next(),F(oe,4,"%");break}return rt}function En(){const{currentType:me,offset:oe,startLoc:rt,endLoc:ee}=C;return C.lastType=me,C.lastOffset=oe,C.lastStartLoc=rt,C.lastEndLoc=ee,C.offset=_(),C.startLoc=g(),h.currentChar()===$c?F(C,14):sn(h,C)}return{nextToken:En,currentOffset:_,currentPosition:g,context:O}}const V5="parser",G5=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function H5(t,n,l){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const h=parseInt(n||l,16);return h<=55295||h>=57344?String.fromCodePoint(h):"\uFFFD"}}}function W5(t={}){const n=t.location!==!1,{onError:l}=t;function h(H,te,ge,ke,...Ae){const Pe=H.currentPosition();if(Pe.offset+=ke,Pe.column+=ke,l){const Qe=a0(ge,Pe),wt=C_(te,Qe,{domain:V5,args:Ae});l(wt)}}function _(H,te,ge){const ke={type:H,start:te,end:te};return n&&(ke.loc={start:ge,end:ge}),ke}function g(H,te,ge,ke){H.end=te,ke&&(H.type=ke),n&&H.loc&&(H.loc.end=ge)}function w(H,te){const ge=H.context(),ke=_(3,ge.offset,ge.startLoc);return ke.value=te,g(ke,H.currentOffset(),H.currentPosition()),ke}function s(H,te){const ge=H.context(),{lastOffset:ke,lastStartLoc:Ae}=ge,Pe=_(5,ke,Ae);return Pe.index=parseInt(te,10),H.nextToken(),g(Pe,H.currentOffset(),H.currentPosition()),Pe}function C(H,te){const ge=H.context(),{lastOffset:ke,lastStartLoc:Ae}=ge,Pe=_(4,ke,Ae);return Pe.key=te,H.nextToken(),g(Pe,H.currentOffset(),H.currentPosition()),Pe}function O(H,te){const ge=H.context(),{lastOffset:ke,lastStartLoc:Ae}=ge,Pe=_(9,ke,Ae);return Pe.value=te.replace(G5,H5),H.nextToken(),g(Pe,H.currentOffset(),H.currentPosition()),Pe}function k(H){const te=H.nextToken(),ge=H.context(),{lastOffset:ke,lastStartLoc:Ae}=ge,Pe=_(8,ke,Ae);return te.type!==12?(h(H,Zn.UNEXPECTED_EMPTY_LINKED_MODIFIER,ge.lastStartLoc,0),Pe.value="",g(Pe,ke,Ae),{nextConsumeToken:te,node:Pe}):(te.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,ge.lastStartLoc,0,Ua(te)),Pe.value=te.value||"",g(Pe,H.currentOffset(),H.currentPosition()),{node:Pe})}function D(H,te){const ge=H.context(),ke=_(7,ge.offset,ge.startLoc);return ke.value=te,g(ke,H.currentOffset(),H.currentPosition()),ke}function F(H){const te=H.context(),ge=_(6,te.offset,te.startLoc);let ke=H.nextToken();if(ke.type===9){const Ae=k(H);ge.modifier=Ae.node,ke=Ae.nextConsumeToken||H.nextToken()}switch(ke.type!==10&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(ke)),ke=H.nextToken(),ke.type===2&&(ke=H.nextToken()),ke.type){case 11:ke.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(ke)),ge.key=D(H,ke.value||"");break;case 5:ke.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(ke)),ge.key=C(H,ke.value||"");break;case 6:ke.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(ke)),ge.key=s(H,ke.value||"");break;case 7:ke.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(ke)),ge.key=O(H,ke.value||"");break;default:h(H,Zn.UNEXPECTED_EMPTY_LINKED_KEY,te.lastStartLoc,0);const Ae=H.context(),Pe=_(7,Ae.offset,Ae.startLoc);return Pe.value="",g(Pe,Ae.offset,Ae.startLoc),ge.key=Pe,g(ge,Ae.offset,Ae.startLoc),{nextConsumeToken:ke,node:ge}}return g(ge,H.currentOffset(),H.currentPosition()),{node:ge}}function K(H){const te=H.context(),ge=te.currentType===1?H.currentOffset():te.offset,ke=te.currentType===1?te.endLoc:te.startLoc,Ae=_(2,ge,ke);Ae.items=[];let Pe=null;do{const nt=Pe||H.nextToken();switch(Pe=null,nt.type){case 0:nt.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(nt)),Ae.items.push(w(H,nt.value||""));break;case 6:nt.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(nt)),Ae.items.push(s(H,nt.value||""));break;case 5:nt.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(nt)),Ae.items.push(C(H,nt.value||""));break;case 7:nt.value==null&&h(H,Zn.UNEXPECTED_LEXICAL_ANALYSIS,te.lastStartLoc,0,Ua(nt)),Ae.items.push(O(H,nt.value||""));break;case 8:const Ee=F(H);Ae.items.push(Ee.node),Pe=Ee.nextConsumeToken||null;break}}while(te.currentType!==14&&te.currentType!==1);const Qe=te.currentType===1?te.lastOffset:H.currentOffset(),wt=te.currentType===1?te.lastEndLoc:H.currentPosition();return g(Ae,Qe,wt),Ae}function Se(H,te,ge,ke){const Ae=H.context();let Pe=ke.items.length===0;const Qe=_(1,te,ge);Qe.cases=[],Qe.cases.push(ke);do{const wt=K(H);Pe||(Pe=wt.items.length===0),Qe.cases.push(wt)}while(Ae.currentType!==14);return Pe&&h(H,Zn.MUST_HAVE_MESSAGES_IN_PLURAL,ge,0),g(Qe,H.currentOffset(),H.currentPosition()),Qe}function pe(H){const te=H.context(),{offset:ge,startLoc:ke}=te,Ae=K(H);return te.currentType===14?Ae:Se(H,ge,ke,Ae)}function J(H){const te=j5(H,Vr({},t)),ge=te.context(),ke=_(0,ge.offset,ge.startLoc);return n&&ke.loc&&(ke.loc.source=H),ke.body=pe(te),ge.currentType!==14&&h(te,Zn.UNEXPECTED_LEXICAL_ANALYSIS,ge.lastStartLoc,0,H[ge.offset]||""),g(ke,te.currentOffset(),te.currentPosition()),ke}return{parse:J}}function Ua(t){if(t.type===14)return"EOF";const n=(t.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"\u2026":n}function q5(t,n={}){const l={ast:t,helpers:new Set};return{context:()=>l,helper:g=>(l.helpers.add(g),g)}}function IA(t,n){for(let l=0;l<t.length;l++)l0(t[l],n)}function l0(t,n){switch(t.type){case 1:IA(t.cases,n),n.helper("plural");break;case 2:IA(t.items,n);break;case 6:l0(t.key,n),n.helper("linked");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function Z5(t,n={}){const l=q5(t);l.helper("normalize"),t.body&&l0(t.body,l);const h=l.context();t.helpers=Array.from(h.helpers)}function X5(t,n){const{sourceMap:l,filename:h,breakLineCode:_,needIndent:g}=n,w={source:t.loc.source,filename:h,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:_,needIndent:g,indentLevel:0},s=()=>w;function C(pe,J){w.code+=pe}function O(pe,J=!0){const H=J?_:"";C(g?H+"  ".repeat(pe):H)}function k(pe=!0){const J=++w.indentLevel;pe&&O(J)}function D(pe=!0){const J=--w.indentLevel;pe&&O(J)}function F(){O(w.indentLevel)}return{context:s,push:C,indent:k,deindent:D,newline:F,helper:pe=>`_${pe}`,needIndent:()=>w.needIndent}}function Y5(t,n){const{helper:l}=t;t.push(`${l("linked")}(`),Nf(t,n.key),n.modifier&&(t.push(", "),Nf(t,n.modifier)),t.push(")")}function K5(t,n){const{helper:l,needIndent:h}=t;t.push(`${l("normalize")}([`),t.indent(h());const _=n.items.length;for(let g=0;g<_&&(Nf(t,n.items[g]),g!==_-1);g++)t.push(", ");t.deindent(h()),t.push("])")}function J5(t,n){const{helper:l,needIndent:h}=t;if(n.cases.length>1){t.push(`${l("plural")}([`),t.indent(h());const _=n.cases.length;for(let g=0;g<_&&(Nf(t,n.cases[g]),g!==_-1);g++)t.push(", ");t.deindent(h()),t.push("])")}}function Q5(t,n){n.body?Nf(t,n.body):t.push("null")}function Nf(t,n){const{helper:l}=t;switch(n.type){case 0:Q5(t,n);break;case 1:J5(t,n);break;case 2:K5(t,n);break;case 6:Y5(t,n);break;case 8:t.push(JSON.stringify(n.value),n);break;case 7:t.push(JSON.stringify(n.value),n);break;case 5:t.push(`${l("interpolate")}(${l("list")}(${n.index}))`,n);break;case 4:t.push(`${l("interpolate")}(${l("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:t.push(JSON.stringify(n.value),n);break;case 3:t.push(JSON.stringify(n.value),n);break;default:throw new Error(`unhandled codegen node type: ${n.type}`)}}const eN=(t,n={})=>{const l=fn(n.mode)?n.mode:"normal",h=fn(n.filename)?n.filename:"message.intl",_=!!n.sourceMap,g=n.breakLineCode!=null?n.breakLineCode:l==="arrow"?";":`
`,w=n.needIndent?n.needIndent:l!=="arrow",s=t.helpers||[],C=X5(t,{mode:l,filename:h,sourceMap:_,breakLineCode:g,needIndent:w});C.push(l==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),C.indent(w),s.length>0&&(C.push(`const { ${s.map(D=>`${D}: _${D}`).join(", ")} } = ctx`),C.newline()),C.push("return "),Nf(C,t),C.deindent(w),C.push("}");const{code:O,map:k}=C.context();return{ast:t,code:O,map:k?k.toJSON():void 0}};function tN(t,n={}){const l=Vr({},n),_=W5(l).parse(t);return Z5(_,l),eN(_,l)}/*!
  * devtools-if v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const MA={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Uc=[];Uc[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Uc[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Uc[2]={w:[2],i:[3,0],["0"]:[3,0]};Uc[3]={i:[3,0],["0"]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Uc[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Uc[5]={["'"]:[4,0],o:8,l:[5,0]};Uc[6]={['"']:[4,0],o:8,l:[6,0]};const nN=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function iN(t){return nN.test(t)}function rN(t){const n=t.charCodeAt(0),l=t.charCodeAt(t.length-1);return n===l&&(n===34||n===39)?t.slice(1,-1):t}function oN(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function sN(t){const n=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:iN(n)?rN(n):"*"+n}function aN(t){const n=[];let l=-1,h=0,_=0,g,w,s,C,O,k,D;const F=[];F[0]=()=>{w===void 0?w=s:w+=s},F[1]=()=>{w!==void 0&&(n.push(w),w=void 0)},F[2]=()=>{F[0](),_++},F[3]=()=>{if(_>0)_--,h=4,F[0]();else{if(_=0,w===void 0||(w=sN(w),w===!1))return!1;F[1]()}};function K(){const Se=t[l+1];if(h===5&&Se==="'"||h===6&&Se==='"')return l++,s="\\"+Se,F[0](),!0}for(;h!==null;)if(l++,g=t[l],!(g==="\\"&&K())){if(C=oN(g),D=Uc[h],O=D[C]||D.l||8,O===8||(h=O[0],O[1]!==void 0&&(k=F[O[1]],k&&(s=g,k()===!1))))return;if(h===7)return n}}const kA=new Map;function lN(t,n){return er(t)?t[n]:null}function cN(t,n){if(!er(t))return null;let l=kA.get(n);if(l||(l=aN(n),l&&kA.set(n,l)),!l)return null;const h=l.length;let _=t,g=0;for(;g<h;){const w=_[l[g]];if(w===void 0)return null;_=w,g++}return _}const uN=t=>t,hN=t=>"",fN="text",dN=t=>t.length===0?"":t.join(""),pN=P5;function LA(t,n){return t=Math.abs(t),n===2?t?t>1?1:0:1:t?Math.min(t,2):0}function mN(t){const n=jr(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(jr(t.named.count)||jr(t.named.n))?jr(t.named.count)?t.named.count:jr(t.named.n)?t.named.n:n:n}function _N(t,n){n.count||(n.count=t),n.n||(n.n=t)}function gN(t={}){const n=t.locale,l=mN(t),h=er(t.pluralRules)&&fn(n)&&Sr(t.pluralRules[n])?t.pluralRules[n]:LA,_=er(t.pluralRules)&&fn(n)&&Sr(t.pluralRules[n])?LA:void 0,g=J=>J[h(l,J.length,_)],w=t.list||[],s=J=>w[J],C=t.named||{};jr(t.pluralIndex)&&_N(l,C);const O=J=>C[J];function k(J){const H=Sr(t.messages)?t.messages(J):er(t.messages)?t.messages[J]:!1;return H||(t.parent?t.parent.message(J):hN)}const D=J=>t.modifiers?t.modifiers[J]:uN,F=ri(t.processor)&&Sr(t.processor.normalize)?t.processor.normalize:dN,K=ri(t.processor)&&Sr(t.processor.interpolate)?t.processor.interpolate:pN,Se=ri(t.processor)&&fn(t.processor.type)?t.processor.type:fN,pe={list:s,named:O,plural:g,linked:(J,H)=>{const te=k(J)(pe);return fn(H)?D(H)(te):te},message:k,type:Se,interpolate:K,normalize:F};return pe}let bp=null;function yN(t){bp=t}function vN(t,n,l){bp&&bp.emit(MA.I18nInit,{timestamp:Date.now(),i18n:t,version:n,meta:l})}const xN=bN(MA.FunctionTranslate);function bN(t){return n=>bp&&bp.emit(t,n)}const gs={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7},wN={[gs.NOT_FOUND_KEY]:"Not found '{key}' key in '{locale}' locale messages.",[gs.FALLBACK_TO_TRANSLATE]:"Fall back to translate '{key}' key with '{target}' locale.",[gs.CANNOT_FORMAT_NUMBER]:"Cannot format a number value due to not supported Intl.NumberFormat.",[gs.FALLBACK_TO_NUMBER_FORMAT]:"Fall back to number format '{key}' key with '{target}' locale.",[gs.CANNOT_FORMAT_DATE]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[gs.FALLBACK_TO_DATE_FORMAT]:"Fall back to datetime format '{key}' key with '{target}' locale."};function Bf(t,...n){return A_(wN[t],...n)}function EN(t,n,l){return[...new Set([l,...ar(n)?n:er(n)?Object.keys(n):fn(n)?[n]:[l]])]}function PA(t,n,l){const h=fn(l)?l:M_,_=t;_.__localeChainCache||(_.__localeChainCache=new Map);let g=_.__localeChainCache.get(h);if(!g){g=[];let w=[l];for(;ar(w);)w=DA(g,w,n);const s=ar(n)||!ri(n)?n:n.default?n.default:null;w=fn(s)?[s]:s,ar(w)&&DA(g,w,!1),_.__localeChainCache.set(h,g)}return g}function DA(t,n,l){let h=!0;for(let _=0;_<n.length&&Li(h);_++){const g=n[_];fn(g)&&(h=TN(t,n[_],l))}return h}function TN(t,n,l){let h;const _=n.split("-");do{const g=_.join("-");h=AN(t,g,l),_.splice(-1,1)}while(_.length&&h===!0);return h}function AN(t,n,l){let h=!1;if(!t.includes(n)&&(h=!0,n)){h=n[n.length-1]!=="!";const _=n.replace(/!/g,"");t.push(_),(ar(l)||ri(l))&&l[_]&&(h=l[_])}return h}const SN="9.2.0-beta.17",I_=-1,M_="en-US",k_="";function CN(){return{upper:t=>fn(t)?t.toUpperCase():t,lower:t=>fn(t)?t.toLowerCase():t,capitalize:t=>fn(t)?`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`:t}}let OA;function IN(t){OA=t}let zA;function MN(t){zA=t}let RA;function kN(t){RA=t}let NA=null;const BA=t=>{NA=t},LN=()=>NA;let FA=0;function PN(t={}){const n=fn(t.version)?t.version:SN,l=fn(t.locale)?t.locale:M_,h=ar(t.fallbackLocale)||ri(t.fallbackLocale)||fn(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:l,_=ri(t.messages)?t.messages:{[l]:{}},g=ri(t.datetimeFormats)?t.datetimeFormats:{[l]:{}},w=ri(t.numberFormats)?t.numberFormats:{[l]:{}},s=Vr({},t.modifiers||{},CN()),C=t.pluralRules||{},O=Sr(t.missing)?t.missing:null,k=Li(t.missingWarn)||Rf(t.missingWarn)?t.missingWarn:!0,D=Li(t.fallbackWarn)||Rf(t.fallbackWarn)?t.fallbackWarn:!0,F=!!t.fallbackFormat,K=!!t.unresolving,Se=Sr(t.postTranslation)?t.postTranslation:null,pe=ri(t.processor)?t.processor:null,J=Li(t.warnHtmlMessage)?t.warnHtmlMessage:!0,H=!!t.escapeParameter,te=Sr(t.messageCompiler)?t.messageCompiler:OA,ge=Sr(t.messageResolver)?t.messageResolver:zA||lN,ke=Sr(t.localeFallbacker)?t.localeFallbacker:RA||EN,Ae=Sr(t.onWarn)?t.onWarn:Jo,Pe=t,Qe=er(Pe.__datetimeFormatters)?Pe.__datetimeFormatters:new Map,wt=er(Pe.__numberFormatters)?Pe.__numberFormatters:new Map,nt=er(Pe.__meta)?Pe.__meta:{};FA++;const Ee={version:n,cid:FA,locale:l,fallbackLocale:h,messages:_,modifiers:s,pluralRules:C,missing:O,missingWarn:k,fallbackWarn:D,fallbackFormat:F,unresolving:K,postTranslation:Se,processor:pe,warnHtmlMessage:J,escapeParameter:H,messageCompiler:te,messageResolver:ge,localeFallbacker:ke,onWarn:Ae,__meta:nt};return Ee.datetimeFormats=g,Ee.numberFormats=w,Ee.__datetimeFormatters=Qe,Ee.__numberFormatters=wt,Ee.__v_emitter=Pe.__v_emitter!=null?Pe.__v_emitter:void 0,vN(Ee,n,nt),Ee}function L_(t,n){return t instanceof RegExp?t.test(n):t}function $A(t,n){return t instanceof RegExp?t.test(n):t}function c0(t,n,l,h,_){const{missing:g,onWarn:w}=t;{const s=t.__v_emitter;s&&s.emit("missing",{locale:l,key:n,type:_,groupId:`${_}:${n}`})}if(g!==null){const s=g(t,l,n,_);return fn(s)?s:n}else return $A(h,n)&&w(Bf(gs.NOT_FOUND_KEY,{key:n,locale:l})),n}function wp(t,n,l){const h=t;h.__localeChainCache=new Map,t.localeFallbacker(t,l,n)}const DN=/<\/?[\w\s="/.':;#-\/]+>/,ON="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function zN(t,n){(Li(n.warnHtmlMessage)?n.warnHtmlMessage:!0)&&DN.test(t)&&Jo(A_(ON,{source:t}))}const RN=t=>t;let UA=Object.create(null);function NN(t,n={}){{zN(t,n);const h=(n.onCacheKey||RN)(t),_=UA[h];if(_)return _;let g=!1;const w=n.onError||z5;n.onError=O=>{g=!0,w(O)};const{code:s}=tN(t,n),C=new Function(`return ${s}`)();return g?C:UA[h]=C}}let jA=Zn.__EXTEND_POINT__;const u0=()=>jA++,Sl={INVALID_ARGUMENT:jA,INVALID_DATE_ARGUMENT:u0(),INVALID_ISO_DATE_ARGUMENT:u0(),__EXTEND_POINT__:u0()};function Ff(t){return C_(t,null,{messages:BN})}const BN={[Sl.INVALID_ARGUMENT]:"Invalid arguments",[Sl.INVALID_DATE_ARGUMENT]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[Sl.INVALID_ISO_DATE_ARGUMENT]:"The argument provided is not a valid ISO date string"},VA=()=>"",ja=t=>Sr(t);function GA(t,...n){const{fallbackFormat:l,postTranslation:h,unresolving:_,fallbackLocale:g,messages:w}=t,[s,C]=h0(...n),O=Li(C.missingWarn)?C.missingWarn:t.missingWarn,k=Li(C.fallbackWarn)?C.fallbackWarn:t.fallbackWarn,D=Li(C.escapeParameter)?C.escapeParameter:t.escapeParameter,F=!!C.resolvedMessage,K=fn(C.default)||Li(C.default)?Li(C.default)?s:C.default:l?s:"",Se=l||K!=="",pe=fn(C.locale)?C.locale:t.locale;D&&FN(C);let[J,H,te]=F?[s,pe,w[pe]||{}]:$N(t,s,pe,g,k,O),ge=J,ke=s;if(!F&&!(fn(ge)||ja(ge))&&Se&&(ge=K,ke=ge),!F&&(!(fn(ge)||ja(ge))||!fn(H)))return _?I_:s;if(fn(ge)&&t.messageCompiler==null)return Jo(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${s}'.`),s;let Ae=!1;const Pe=()=>{Ae=!0},Qe=ja(ge)?ge:HA(t,s,H,ge,ke,Pe);if(Ae)return ge;const wt=VN(t,H,te,C),nt=gN(wt),Ee=UN(t,Qe,nt),Xe=h?h(Ee):Ee;{const ot={timestamp:Date.now(),key:fn(s)?s:ja(ge)?ge.key:"",locale:H||(ja(ge)?ge.locale:""),format:fn(ge)?ge:ja(ge)?ge.source:"",message:Xe};ot.meta=Vr({},t.__meta,LN()||{}),xN(ot)}return Xe}function FN(t){ar(t.list)?t.list=t.list.map(n=>fn(n)?TA(n):n):er(t.named)&&Object.keys(t.named).forEach(n=>{fn(t.named[n])&&(t.named[n]=TA(t.named[n]))})}function $N(t,n,l,h,_,g){const{messages:w,onWarn:s,messageResolver:C,localeFallbacker:O}=t,k=O(t,h,l);let D={},F,K=null,Se=l,pe=null;const J="translate";for(let H=0;H<k.length;H++){if(F=pe=k[H],l!==F&&L_(_,n)&&s(Bf(gs.FALLBACK_TO_TRANSLATE,{key:n,target:F})),l!==F){const Pe=t.__v_emitter;Pe&&Pe.emit("fallback",{type:J,key:n,from:Se,to:pe,groupId:`${J}:${n}`})}D=w[F]||{};let te=null,ge,ke;if(lh&&(te=window.performance.now(),ge="intlify-message-resolve-start",ke="intlify-message-resolve-end",_s&&_s(ge)),(K=C(D,n))===null&&(K=D[n]),lh){const Pe=window.performance.now(),Qe=t.__v_emitter;Qe&&te&&K&&Qe.emit("message-resolve",{type:"message-resolve",key:n,message:K,time:Pe-te,groupId:`${J}:${n}`}),ge&&ke&&_s&&ch&&(_s(ke),ch("intlify message resolve",ge,ke))}if(fn(K)||Sr(K))break;const Ae=c0(t,n,F,g,J);Ae!==n&&(K=Ae),Se=pe}return[K,F,D]}function HA(t,n,l,h,_,g){const{messageCompiler:w,warnHtmlMessage:s}=t;if(ja(h)){const F=h;return F.locale=F.locale||l,F.key=F.key||n,F}let C=null,O,k;lh&&(C=window.performance.now(),O="intlify-message-compilation-start",k="intlify-message-compilation-end",_s&&_s(O));const D=w(h,jN(t,l,_,h,s,g));if(lh){const F=window.performance.now(),K=t.__v_emitter;K&&C&&K.emit("message-compilation",{type:"message-compilation",message:h,time:F-C,groupId:`translate:${n}`}),O&&k&&_s&&ch&&(_s(k),ch("intlify message compilation",O,k))}return D.locale=l,D.key=n,D.source=h,D}function UN(t,n,l){let h=null,_,g;lh&&(h=window.performance.now(),_="intlify-message-evaluation-start",g="intlify-message-evaluation-end",_s&&_s(_));const w=n(l);if(lh){const s=window.performance.now(),C=t.__v_emitter;C&&h&&C.emit("message-evaluation",{type:"message-evaluation",value:w,time:s-h,groupId:`translate:${n.key}`}),_&&g&&_s&&ch&&(_s(g),ch("intlify message evaluation",_,g))}return w}function h0(...t){const[n,l,h]=t,_={};if(!fn(n)&&!jr(n)&&!ja(n))throw Ff(Sl.INVALID_ARGUMENT);const g=jr(n)?String(n):(ja(n),n);return jr(l)?_.plural=l:fn(l)?_.default=l:ri(l)&&!S_(l)?_.named=l:ar(l)&&(_.list=l),jr(h)?_.plural=h:fn(h)?_.default=h:ri(h)&&Vr(_,h),[g,_]}function jN(t,n,l,h,_,g){return{warnHtmlMessage:_,onError:w=>{g&&g(w);{const s=`Message compilation error: ${w.message}`,C=w.location&&D5(h,w.location.start.offset,w.location.end.offset),O=t.__v_emitter;O&&O.emit("compile-error",{message:h,error:w.message,start:w.location&&w.location.start.offset,end:w.location&&w.location.end.offset,groupId:`translate:${l}`}),console.error(C?`${s}
${C}`:s)}},onCacheKey:w=>I5(n,l,w)}}function VN(t,n,l,h){const{modifiers:_,pluralRules:g,messageResolver:w}=t,C={locale:n,modifiers:_,pluralRules:g,messages:O=>{const k=w(l,O);if(fn(k)){let D=!1;const K=HA(t,O,n,k,O,()=>{D=!0});return D?VA:K}else return ja(k)?k:VA}};return t.processor&&(C.processor=t.processor),h.list&&(C.list=h.list),h.named&&(C.named=h.named),jr(h.plural)&&(C.pluralIndex=h.plural),C}const WA=typeof Intl!="undefined",qA={dateTimeFormat:WA&&typeof Intl.DateTimeFormat!="undefined",numberFormat:WA&&typeof Intl.NumberFormat!="undefined"};function ZA(t,...n){const{datetimeFormats:l,unresolving:h,fallbackLocale:_,onWarn:g,localeFallbacker:w}=t,{__datetimeFormatters:s}=t;if(!qA.dateTimeFormat)return g(Bf(gs.CANNOT_FORMAT_DATE)),k_;const[C,O,k,D]=f0(...n),F=Li(k.missingWarn)?k.missingWarn:t.missingWarn,K=Li(k.fallbackWarn)?k.fallbackWarn:t.fallbackWarn,Se=!!k.part,pe=fn(k.locale)?k.locale:t.locale,J=w(t,_,pe);if(!fn(C)||C==="")return new Intl.DateTimeFormat(pe).format(O);let H={},te,ge=null,ke=pe,Ae=null;const Pe="datetime format";for(let nt=0;nt<J.length;nt++){if(te=Ae=J[nt],pe!==te&&L_(K,C)&&g(Bf(gs.FALLBACK_TO_DATE_FORMAT,{key:C,target:te})),pe!==te){const Ee=t.__v_emitter;Ee&&Ee.emit("fallback",{type:Pe,key:C,from:ke,to:Ae,groupId:`${Pe}:${C}`})}if(H=l[te]||{},ge=H[C],ri(ge))break;c0(t,C,te,F,Pe),ke=Ae}if(!ri(ge)||!fn(te))return h?I_:C;let Qe=`${te}__${C}`;S_(D)||(Qe=`${Qe}__${JSON.stringify(D)}`);let wt=s.get(Qe);return wt||(wt=new Intl.DateTimeFormat(te,Vr({},ge,D)),s.set(Qe,wt)),Se?wt.formatToParts(O):wt.format(O)}function f0(...t){const[n,l,h,_]=t;let g={},w={},s;if(fn(n)){const C=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!C)throw Ff(Sl.INVALID_ISO_DATE_ARGUMENT);const O=C[3]?C[3].trim().startsWith("T")?`${C[1].trim()}${C[3].trim()}`:`${C[1].trim()}T${C[3].trim()}`:C[1].trim();s=new Date(O);try{s.toISOString()}catch{throw Ff(Sl.INVALID_ISO_DATE_ARGUMENT)}}else if(k5(n)){if(isNaN(n.getTime()))throw Ff(Sl.INVALID_DATE_ARGUMENT);s=n}else if(jr(n))s=n;else throw Ff(Sl.INVALID_ARGUMENT);return fn(l)?g.key=l:ri(l)&&(g=l),fn(h)?g.locale=h:ri(h)&&(w=h),ri(_)&&(w=_),[g.key||"",s,g,w]}function XA(t,n,l){const h=t;for(const _ in l){const g=`${n}__${_}`;!h.__datetimeFormatters.has(g)||h.__datetimeFormatters.delete(g)}}function YA(t,...n){const{numberFormats:l,unresolving:h,fallbackLocale:_,onWarn:g,localeFallbacker:w}=t,{__numberFormatters:s}=t;if(!qA.numberFormat)return g(Bf(gs.CANNOT_FORMAT_NUMBER)),k_;const[C,O,k,D]=d0(...n),F=Li(k.missingWarn)?k.missingWarn:t.missingWarn,K=Li(k.fallbackWarn)?k.fallbackWarn:t.fallbackWarn,Se=!!k.part,pe=fn(k.locale)?k.locale:t.locale,J=w(t,_,pe);if(!fn(C)||C==="")return new Intl.NumberFormat(pe).format(O);let H={},te,ge=null,ke=pe,Ae=null;const Pe="number format";for(let nt=0;nt<J.length;nt++){if(te=Ae=J[nt],pe!==te&&L_(K,C)&&g(Bf(gs.FALLBACK_TO_NUMBER_FORMAT,{key:C,target:te})),pe!==te){const Ee=t.__v_emitter;Ee&&Ee.emit("fallback",{type:Pe,key:C,from:ke,to:Ae,groupId:`${Pe}:${C}`})}if(H=l[te]||{},ge=H[C],ri(ge))break;c0(t,C,te,F,Pe),ke=Ae}if(!ri(ge)||!fn(te))return h?I_:C;let Qe=`${te}__${C}`;S_(D)||(Qe=`${Qe}__${JSON.stringify(D)}`);let wt=s.get(Qe);return wt||(wt=new Intl.NumberFormat(te,Vr({},ge,D)),s.set(Qe,wt)),Se?wt.formatToParts(O):wt.format(O)}function d0(...t){const[n,l,h,_]=t;let g={},w={};if(!jr(n))throw Ff(Sl.INVALID_ARGUMENT);const s=n;return fn(l)?g.key=l:ri(l)&&(g=l),fn(h)?g.locale=h:ri(h)&&(w=h),ri(_)&&(w=_),[g.key||"",s,g,w]}function KA(t,n,l){const h=t;for(const _ in l){const g=`${n}__${_}`;!h.__numberFormatters.has(g)||h.__numberFormatters.delete(g)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xp().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-devtools v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const p0={["vue-devtools-plugin-vue-i18n"]:"Vue I18n devtools",["vue-i18n-resource-inspector"]:"I18n Resources",["vue-i18n-timeline"]:"Vue I18n"},GN={["vue-i18n-resource-inspector"]:"Search for scopes ..."},HN={["vue-i18n-timeline"]:16764185};/*!
  * vue-i18n v9.2.0-beta.17
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const WN="9.2.0-beta.17";function qN(){let t=!1;typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(t=!0,xp().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(t=!0,xp().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xp().__INTLIFY_PROD_DEVTOOLS__=!1),t&&console.warn("You are running the esm-bundler build of vue-i18n. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle.")}let JA=gs.__EXTEND_POINT__;const uh=()=>JA++,Pr={FALLBACK_TO_ROOT:JA,NOT_SUPPORTED_PRESERVE:uh(),NOT_SUPPORTED_FORMATTER:uh(),NOT_SUPPORTED_PRESERVE_DIRECTIVE:uh(),NOT_SUPPORTED_GET_CHOICE_INDEX:uh(),COMPONENT_NAME_LEGACY_COMPATIBLE:uh(),NOT_FOUND_PARENT_SCOPE:uh(),NOT_SUPPORT_MULTI_I18N_INSTANCE:uh()},ZN={[Pr.FALLBACK_TO_ROOT]:"Fall back to {type} '{key}' with root locale.",[Pr.NOT_SUPPORTED_PRESERVE]:"Not supported 'preserve'.",[Pr.NOT_SUPPORTED_FORMATTER]:"Not supported 'formatter'.",[Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE]:"Not supported 'preserveDirectiveContent'.",[Pr.NOT_SUPPORTED_GET_CHOICE_INDEX]:"Not supported 'getChoiceIndex'.",[Pr.COMPONENT_NAME_LEGACY_COMPATIBLE]:"Component name legacy compatible: '{name}' -> 'i18n'",[Pr.NOT_FOUND_PARENT_SCOPE]:"Not found parent scope. use the global scope.",[Pr.NOT_SUPPORT_MULTI_I18N_INSTANCE]:"Not support multi i18n instance."};function sa(t,...n){return A_(ZN[t],...n)}let QA=Zn.__EXTEND_POINT__;const Rs=()=>QA++,Pi={UNEXPECTED_RETURN_TYPE:QA,INVALID_ARGUMENT:Rs(),MUST_BE_CALL_SETUP_TOP:Rs(),NOT_INSLALLED:Rs(),NOT_AVAILABLE_IN_LEGACY_MODE:Rs(),REQUIRED_VALUE:Rs(),INVALID_VALUE:Rs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Rs(),NOT_INSLALLED_WITH_PROVIDE:Rs(),UNEXPECTED_ERROR:Rs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Rs(),BRIDGE_SUPPORT_VUE_2_ONLY:Rs(),__EXTEND_POINT__:Rs()};function no(t,...n){return C_(t,null,{messages:XN,args:n})}const XN={[Pi.UNEXPECTED_RETURN_TYPE]:"Unexpected return type in composer",[Pi.INVALID_ARGUMENT]:"Invalid argument",[Pi.MUST_BE_CALL_SETUP_TOP]:"Must be called at the top of a `setup` function",[Pi.NOT_INSLALLED]:"Need to install with `app.use` function",[Pi.UNEXPECTED_ERROR]:"Unexpected error",[Pi.NOT_AVAILABLE_IN_LEGACY_MODE]:"Not available in legacy mode",[Pi.REQUIRED_VALUE]:"Required in value: {0}",[Pi.INVALID_VALUE]:"Invalid value",[Pi.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN]:"Cannot setup vue-devtools plugin",[Pi.NOT_INSLALLED_WITH_PROVIDE]:"Need to install with `provide` function",[Pi.NOT_COMPATIBLE_LEGACY_VUE_I18N]:"Not compatible legacy VueI18n.",[Pi.BRIDGE_SUPPORT_VUE_2_ONLY]:"vue-i18n-bridge support Vue 2.x only"},m0=$a("__transrateVNode"),_0=$a("__datetimeParts"),g0=$a("__numberParts"),hh=$a("__enableEmitter"),Ep=$a("__disableEmitter"),eS=$a("__setPluralRules");$a("__intlifyMeta");const tS=$a("__injectWithOption");function y0(t){if(!er(t))return t;for(const n in t)if(!!r0(t,n))if(!n.includes("."))er(t[n])&&y0(t[n]);else{const l=n.split("."),h=l.length-1;let _=t;for(let g=0;g<h;g++)l[g]in _||(_[l[g]]={}),_=_[l[g]];_[l[h]]=t[n],delete t[n],er(_[l[h]])&&y0(_[l[h]])}return t}function v0(t,n){const{messages:l,__i18n:h,messageResolver:_,flatJson:g}=n,w=ri(l)?l:ar(h)?{}:{[t]:{}};if(ar(h)&&h.forEach(s=>{if("locale"in s&&"resource"in s){const{locale:C,resource:O}=s;C?(w[C]=w[C]||{},Tp(O,w[C])):Tp(O,w)}else fn(s)&&Tp(JSON.parse(s),w)}),_==null&&g)for(const s in w)r0(w,s)&&y0(w[s]);return w}const P_=t=>!er(t)||ar(t);function Tp(t,n){if(P_(t)||P_(n))throw no(Pi.INVALID_VALUE);for(const l in t)r0(t,l)&&(P_(t[l])||P_(n[l])?n[l]=t[l]:Tp(t[l],n[l]))}function nS(t){return t.type}const iS="__INTLIFY_META__";let rS=0;function oS(t){return(n,l,h,_)=>t(l,h,Mc()||void 0,_)}const YN=()=>{const t=Mc();let n=null;return t&&(n=nS(t)[iS])?{[iS]:n}:null};function x0(t={},n){const{__root:l}=t,h=l===void 0;let _=Li(t.inheritLocale)?t.inheritLocale:!0;const g=cf(l&&_?l.locale.value:fn(t.locale)?t.locale:M_),w=cf(l&&_?l.fallbackLocale.value:fn(t.fallbackLocale)||ar(t.fallbackLocale)||ri(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:g.value),s=cf(v0(g.value,t)),C=cf(ri(t.datetimeFormats)?t.datetimeFormats:{[g.value]:{}}),O=cf(ri(t.numberFormats)?t.numberFormats:{[g.value]:{}});let k=l?l.missingWarn:Li(t.missingWarn)||Rf(t.missingWarn)?t.missingWarn:!0,D=l?l.fallbackWarn:Li(t.fallbackWarn)||Rf(t.fallbackWarn)?t.fallbackWarn:!0,F=l?l.fallbackRoot:Li(t.fallbackRoot)?t.fallbackRoot:!0,K=!!t.fallbackFormat,Se=Sr(t.missing)?t.missing:null,pe=Sr(t.missing)?oS(t.missing):null,J=Sr(t.postTranslation)?t.postTranslation:null,H=Li(t.warnHtmlMessage)?t.warnHtmlMessage:!0,te=!!t.escapeParameter;const ge=l?l.modifiers:ri(t.modifiers)?t.modifiers:{};let ke=t.pluralRules||l&&l.pluralRules,Ae;function Pe(){const Ie={version:WN,locale:g.value,fallbackLocale:w.value,messages:s.value,modifiers:ge,pluralRules:ke,missing:pe===null?void 0:pe,missingWarn:k,fallbackWarn:D,fallbackFormat:K,unresolving:!0,postTranslation:J===null?void 0:J,warnHtmlMessage:H,escapeParameter:te,messageResolver:t.messageResolver,__meta:{framework:"vue"}};return Ie.datetimeFormats=C.value,Ie.numberFormats=O.value,Ie.__datetimeFormatters=ri(Ae)?Ae.__datetimeFormatters:void 0,Ie.__numberFormatters=ri(Ae)?Ae.__numberFormatters:void 0,Ie.__v_emitter=ri(Ae)?Ae.__v_emitter:void 0,PN(Ie)}Ae=Pe(),wp(Ae,g.value,w.value);function Qe(){return[g.value,w.value,s.value,C.value,O.value]}const wt=Hi({get:()=>g.value,set:Ie=>{g.value=Ie,Ae.locale=g.value}}),nt=Hi({get:()=>w.value,set:Ie=>{w.value=Ie,Ae.fallbackLocale=w.value,wp(Ae,g.value,Ie)}}),Ee=Hi(()=>s.value),Xe=Hi(()=>C.value),ot=Hi(()=>O.value);function Be(){return Sr(J)?J:null}function ve(Ie){J=Ie,Ae.postTranslation=Ie}function He(){return Se}function ct(Ie){Ie!==null&&(pe=oS(Ie)),Se=Ie,Ae.missing=pe}function Ye(Ie,Ke){return Ie!=="translate"||!Ke.resolvedMessage}function ht(Ie,Ke,Vt,qt,bn,Tn){Qe();let An;try{BA(YN()),An=Ie(Ae)}finally{BA(null)}if(jr(An)&&An===I_){const[Sn,oi]=Ke();if(l&&fn(Sn)&&Ye(Vt,oi)){F&&(L_(D,Sn)||$A(k,Sn))&&Jo(sa(Pr.FALLBACK_TO_ROOT,{key:Sn,type:Vt}));{const{__v_emitter:Ci}=Ae;Ci&&F&&Ci.emit("fallback",{type:Vt,key:Sn,to:"global",groupId:`${Vt}:${Sn}`})}}return l&&F?qt(l):bn(Sn)}else{if(Tn(An))return An;throw no(Pi.UNEXPECTED_RETURN_TYPE)}}function lt(...Ie){return ht(Ke=>Reflect.apply(GA,null,[Ke,...Ie]),()=>h0(...Ie),"translate",Ke=>Reflect.apply(Ke.t,Ke,[...Ie]),Ke=>Ke,Ke=>fn(Ke))}function Ut(...Ie){const[Ke,Vt,qt]=Ie;if(qt&&!er(qt))throw no(Pi.INVALID_ARGUMENT);return lt(Ke,Vt,Vr({resolvedMessage:!0},qt||{}))}function qe(...Ie){return ht(Ke=>Reflect.apply(ZA,null,[Ke,...Ie]),()=>f0(...Ie),"datetime format",Ke=>Reflect.apply(Ke.d,Ke,[...Ie]),()=>k_,Ke=>fn(Ke))}function hn(...Ie){return ht(Ke=>Reflect.apply(YA,null,[Ke,...Ie]),()=>d0(...Ie),"number format",Ke=>Reflect.apply(Ke.n,Ke,[...Ie]),()=>k_,Ke=>fn(Ke))}function Gt(Ie){return Ie.map(Ke=>fn(Ke)?eo(hf,null,Ke,0):Ke)}const Fe={normalize:Gt,interpolate:Ie=>Ie,type:"vnode"};function bt(...Ie){return ht(Ke=>{let Vt;const qt=Ke;try{qt.processor=Fe,Vt=Reflect.apply(GA,null,[qt,...Ie])}finally{qt.processor=null}return Vt},()=>h0(...Ie),"translate",Ke=>Ke[m0](...Ie),Ke=>[eo(hf,null,Ke,0)],Ke=>ar(Ke))}function kt(...Ie){return ht(Ke=>Reflect.apply(YA,null,[Ke,...Ie]),()=>d0(...Ie),"number format",Ke=>Ke[g0](...Ie),()=>[],Ke=>fn(Ke)||ar(Ke))}function Et(...Ie){return ht(Ke=>Reflect.apply(ZA,null,[Ke,...Ie]),()=>f0(...Ie),"datetime format",Ke=>Ke[_0](...Ie),()=>[],Ke=>fn(Ke)||ar(Ke))}function sn(Ie){ke=Ie,Ae.pluralRules=ke}function En(Ie,Ke){const Vt=fn(Ke)?Ke:g.value,qt=rt(Vt);return Ae.messageResolver(qt,Ie)!==null}function me(Ie){let Ke=null;const Vt=PA(Ae,w.value,g.value);for(let qt=0;qt<Vt.length;qt++){const bn=s.value[Vt[qt]]||{},Tn=Ae.messageResolver(bn,Ie);if(Tn!=null){Ke=Tn;break}}return Ke}function oe(Ie){const Ke=me(Ie);return Ke!=null?Ke:l?l.tm(Ie)||{}:{}}function rt(Ie){return s.value[Ie]||{}}function ee(Ie,Ke){s.value[Ie]=Ke,Ae.messages=s.value}function _e(Ie,Ke){s.value[Ie]=s.value[Ie]||{},Tp(Ke,s.value[Ie]),Ae.messages=s.value}function We(Ie){return C.value[Ie]||{}}function Ze(Ie,Ke){C.value[Ie]=Ke,Ae.datetimeFormats=C.value,XA(Ae,Ie,Ke)}function pt(Ie,Ke){C.value[Ie]=Vr(C.value[Ie]||{},Ke),Ae.datetimeFormats=C.value,XA(Ae,Ie,Ke)}function St(Ie){return O.value[Ie]||{}}function jt(Ie,Ke){O.value[Ie]=Ke,Ae.numberFormats=O.value,KA(Ae,Ie,Ke)}function Ct(Ie,Ke){O.value[Ie]=Vr(O.value[Ie]||{},Ke),Ae.numberFormats=O.value,KA(Ae,Ie,Ke)}rS++,l&&(za(l.locale,Ie=>{_&&(g.value=Ie,Ae.locale=Ie,wp(Ae,g.value,w.value))}),za(l.fallbackLocale,Ie=>{_&&(w.value=Ie,Ae.fallbackLocale=Ie,wp(Ae,g.value,w.value))}));const yt={id:rS,locale:wt,fallbackLocale:nt,get inheritLocale(){return _},set inheritLocale(Ie){_=Ie,Ie&&l&&(g.value=l.locale.value,w.value=l.fallbackLocale.value,wp(Ae,g.value,w.value))},get availableLocales(){return Object.keys(s.value).sort()},messages:Ee,get modifiers(){return ge},get pluralRules(){return ke||{}},get isGlobal(){return h},get missingWarn(){return k},set missingWarn(Ie){k=Ie,Ae.missingWarn=k},get fallbackWarn(){return D},set fallbackWarn(Ie){D=Ie,Ae.fallbackWarn=D},get fallbackRoot(){return F},set fallbackRoot(Ie){F=Ie},get fallbackFormat(){return K},set fallbackFormat(Ie){K=Ie,Ae.fallbackFormat=K},get warnHtmlMessage(){return H},set warnHtmlMessage(Ie){H=Ie,Ae.warnHtmlMessage=Ie},get escapeParameter(){return te},set escapeParameter(Ie){te=Ie,Ae.escapeParameter=Ie},t:lt,getLocaleMessage:rt,setLocaleMessage:ee,mergeLocaleMessage:_e,getPostTranslationHandler:Be,setPostTranslationHandler:ve,getMissingHandler:He,setMissingHandler:ct,[eS]:sn};return yt.datetimeFormats=Xe,yt.numberFormats=ot,yt.rt=Ut,yt.te=En,yt.tm=oe,yt.d=qe,yt.n=hn,yt.getDateTimeFormat=We,yt.setDateTimeFormat=Ze,yt.mergeDateTimeFormat=pt,yt.getNumberFormat=St,yt.setNumberFormat=jt,yt.mergeNumberFormat=Ct,yt[tS]=t.__injectWithOption,yt[m0]=bt,yt[g0]=kt,yt[_0]=Et,yt[hh]=Ie=>{Ae.__v_emitter=Ie},yt[Ep]=()=>{Ae.__v_emitter=void 0},yt}function KN(t){const n=fn(t.locale)?t.locale:M_,l=fn(t.fallbackLocale)||ar(t.fallbackLocale)||ri(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,h=Sr(t.missing)?t.missing:void 0,_=Li(t.silentTranslationWarn)||Rf(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,g=Li(t.silentFallbackWarn)||Rf(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,w=Li(t.fallbackRoot)?t.fallbackRoot:!0,s=!!t.formatFallbackMessages,C=ri(t.modifiers)?t.modifiers:{},O=t.pluralizationRules,k=Sr(t.postTranslation)?t.postTranslation:void 0,D=fn(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,F=!!t.escapeParameterHtml,K=Li(t.sync)?t.sync:!0;t.formatter&&Jo(sa(Pr.NOT_SUPPORTED_FORMATTER)),t.preserveDirectiveContent&&Jo(sa(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE));let Se=t.messages;if(ri(t.sharedMessages)){const Ae=t.sharedMessages;Se=Object.keys(Ae).reduce((Qe,wt)=>{const nt=Qe[wt]||(Qe[wt]={});return Vr(nt,Ae[wt]),Qe},Se||{})}const{__i18n:pe,__root:J,__injectWithOption:H}=t,te=t.datetimeFormats,ge=t.numberFormats,ke=t.flatJson;return{locale:n,fallbackLocale:l,messages:Se,flatJson:ke,datetimeFormats:te,numberFormats:ge,missing:h,missingWarn:_,fallbackWarn:g,fallbackRoot:w,fallbackFormat:s,modifiers:C,pluralRules:O,postTranslation:k,warnHtmlMessage:D,escapeParameter:F,messageResolver:t.messageResolver,inheritLocale:K,__i18n:pe,__root:J,__injectWithOption:H}}function b0(t={},n){{const l=x0(KN(t)),h={id:l.id,get locale(){return l.locale.value},set locale(_){l.locale.value=_},get fallbackLocale(){return l.fallbackLocale.value},set fallbackLocale(_){l.fallbackLocale.value=_},get messages(){return l.messages.value},get datetimeFormats(){return l.datetimeFormats.value},get numberFormats(){return l.numberFormats.value},get availableLocales(){return l.availableLocales},get formatter(){return Jo(sa(Pr.NOT_SUPPORTED_FORMATTER)),{interpolate(){return[]}}},set formatter(_){Jo(sa(Pr.NOT_SUPPORTED_FORMATTER))},get missing(){return l.getMissingHandler()},set missing(_){l.setMissingHandler(_)},get silentTranslationWarn(){return Li(l.missingWarn)?!l.missingWarn:l.missingWarn},set silentTranslationWarn(_){l.missingWarn=Li(_)?!_:_},get silentFallbackWarn(){return Li(l.fallbackWarn)?!l.fallbackWarn:l.fallbackWarn},set silentFallbackWarn(_){l.fallbackWarn=Li(_)?!_:_},get modifiers(){return l.modifiers},get formatFallbackMessages(){return l.fallbackFormat},set formatFallbackMessages(_){l.fallbackFormat=_},get postTranslation(){return l.getPostTranslationHandler()},set postTranslation(_){l.setPostTranslationHandler(_)},get sync(){return l.inheritLocale},set sync(_){l.inheritLocale=_},get warnHtmlInMessage(){return l.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(_){l.warnHtmlMessage=_!=="off"},get escapeParameterHtml(){return l.escapeParameter},set escapeParameterHtml(_){l.escapeParameter=_},get preserveDirectiveContent(){return Jo(sa(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE)),!0},set preserveDirectiveContent(_){Jo(sa(Pr.NOT_SUPPORTED_PRESERVE_DIRECTIVE))},get pluralizationRules(){return l.pluralRules||{}},__composer:l,t(..._){const[g,w,s]=_,C={};let O=null,k=null;if(!fn(g))throw no(Pi.INVALID_ARGUMENT);const D=g;return fn(w)?C.locale=w:ar(w)?O=w:ri(w)&&(k=w),ar(s)?O=s:ri(s)&&(k=s),Reflect.apply(l.t,l,[D,O||k||{},C])},rt(..._){return Reflect.apply(l.rt,l,[..._])},tc(..._){const[g,w,s]=_,C={plural:1};let O=null,k=null;if(!fn(g))throw no(Pi.INVALID_ARGUMENT);const D=g;return fn(w)?C.locale=w:jr(w)?C.plural=w:ar(w)?O=w:ri(w)&&(k=w),fn(s)?C.locale=s:ar(s)?O=s:ri(s)&&(k=s),Reflect.apply(l.t,l,[D,O||k||{},C])},te(_,g){return l.te(_,g)},tm(_){return l.tm(_)},getLocaleMessage(_){return l.getLocaleMessage(_)},setLocaleMessage(_,g){l.setLocaleMessage(_,g)},mergeLocaleMessage(_,g){l.mergeLocaleMessage(_,g)},d(..._){return Reflect.apply(l.d,l,[..._])},getDateTimeFormat(_){return l.getDateTimeFormat(_)},setDateTimeFormat(_,g){l.setDateTimeFormat(_,g)},mergeDateTimeFormat(_,g){l.mergeDateTimeFormat(_,g)},n(..._){return Reflect.apply(l.n,l,[..._])},getNumberFormat(_){return l.getNumberFormat(_)},setNumberFormat(_,g){l.setNumberFormat(_,g)},mergeNumberFormat(_,g){l.mergeNumberFormat(_,g)},getChoiceIndex(_,g){return Jo(sa(Pr.NOT_SUPPORTED_GET_CHOICE_INDEX)),-1},__onComponentInstanceCreated(_){const{componentInstanceCreatedListener:g}=t;g&&g(_,h)}};return h.__enableEmitter=_=>{const g=l;g[hh]&&g[hh](_)},h.__disableEmitter=()=>{const _=l;_[Ep]&&_[Ep]()},h}}const w0={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}},E0=Sc({name:"i18n-t",props:Vr({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>jr(t)||!isNaN(t)}},w0),setup(t,n){const{slots:l,attrs:h}=n,_=t.i18n||S0({useScope:t.scope,__useComponent:!0}),g=Object.keys(l).filter(w=>w!=="_");return()=>{const w={};t.locale&&(w.locale=t.locale),t.plural!==void 0&&(w.plural=fn(t.plural)?+t.plural:t.plural);const s=JN(n,g),C=_[m0](t.keypath,s,w),O=Vr({},h),k=fn(t.tag)||er(t.tag)?t.tag:qo;return _f(k,O,C)}}});function JN({slots:t},n){return n.length===1&&n[0]==="default"?t.default?t.default():[]:n.reduce((l,h)=>{const _=t[h];return _&&(l[h]=_()),l},{})}function sS(t,n,l,h){const{slots:_,attrs:g}=n;return()=>{const w={part:!0};let s={};t.locale&&(w.locale=t.locale),fn(t.format)?w.key=t.format:er(t.format)&&(fn(t.format.key)&&(w.key=t.format.key),s=Object.keys(t.format).reduce((F,K)=>l.includes(K)?Vr({},F,{[K]:t.format[K]}):F,{}));const C=h(t.value,w,s);let O=[w.key];ar(C)?O=C.map((F,K)=>{const Se=_[F.type];return Se?Se({[F.type]:F.value,index:K,parts:C}):[F.value]}):fn(C)&&(O=[C]);const k=Vr({},g),D=fn(t.tag)||er(t.tag)?t.tag:qo;return _f(D,k,O)}}const QN=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],aS=Sc({name:"i18n-n",props:Vr({value:{type:Number,required:!0},format:{type:[String,Object]}},w0),setup(t,n){const l=t.i18n||S0({useScope:"parent",__useComponent:!0});return sS(t,n,QN,(...h)=>l[g0](...h))}}),eB=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],lS=Sc({name:"i18n-d",props:Vr({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},w0),setup(t,n){const l=t.i18n||S0({useScope:"parent",__useComponent:!0});return sS(t,n,eB,(...h)=>l[_0](...h))}});function tB(t,n){const l=t;if(t.mode==="composition")return l.__getInstance(n)||t.global;{const h=l.__getInstance(n);return h!=null?h.__composer:t.global.__composer}}function nB(t){const n=(l,{instance:h,value:_,modifiers:g})=>{if(!h||!h.$)throw no(Pi.UNEXPECTED_ERROR);const w=tB(t,h.$);g.preserve&&Jo(sa(Pr.NOT_SUPPORTED_PRESERVE));const s=iB(_);l.textContent=Reflect.apply(w.t,w,[...rB(s)])};return{beforeMount:n,beforeUpdate:n}}function iB(t){if(fn(t))return{path:t};if(ri(t)){if(!("path"in t))throw no(Pi.REQUIRED_VALUE,"path");return t}else throw no(Pi.INVALID_VALUE)}function rB(t){const{path:n,locale:l,args:h,choice:_,plural:g}=t,w={},s=h||{};return fn(l)&&(w.locale=l),jr(_)&&(w.plural=_),jr(g)&&(w.plural=g),[n,s,w]}function oB(t,n,...l){const h=ri(l[0])?l[0]:{},_=!!h.useI18nComponentName,g=Li(h.globalInstall)?h.globalInstall:!0;g&&_&&Jo(sa(Pr.COMPONENT_NAME_LEGACY_COMPATIBLE,{name:E0.name})),g&&(t.component(_?"i18n":E0.name,E0),t.component(aS.name,aS),t.component(lS.name,lS)),t.directive("t",nB(n))}const cS="vue-i18n: composer properties";let T0;async function sB(t,n){return new Promise((l,h)=>{try{ov({id:"vue-devtools-plugin-vue-i18n",label:p0["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[cS],app:t},_=>{T0=_,_.on.visitComponentTree(({componentInstance:w,treeNode:s})=>{aB(w,s,n)}),_.on.inspectComponent(({componentInstance:w,instanceData:s})=>{w.vnode.el&&w.vnode.el.__VUE_I18N__&&s&&(n.mode==="legacy"?w.vnode.el.__VUE_I18N__!==n.global.__composer&&hS(s,w.vnode.el.__VUE_I18N__):hS(s,w.vnode.el.__VUE_I18N__))}),_.addInspector({id:"vue-i18n-resource-inspector",label:p0["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:GN["vue-i18n-resource-inspector"]}),_.on.getInspectorTree(w=>{w.app===t&&w.inspectorId==="vue-i18n-resource-inspector"&&fB(w,n)});const g=new Map;_.on.getInspectorState(async w=>{if(w.app===t&&w.inspectorId==="vue-i18n-resource-inspector")if(_.unhighlightElement(),pB(w,n),w.nodeId==="global"){if(!g.has(w.app)){const[s]=await _.getComponentInstances(w.app);g.set(w.app,s)}_.highlightElement(g.get(w.app))}else{const s=dB(w.nodeId,n);s&&_.highlightElement(s)}}),_.on.editInspectorState(w=>{w.app===t&&w.inspectorId==="vue-i18n-resource-inspector"&&_B(w,n)}),_.addTimelineLayer({id:"vue-i18n-timeline",label:p0["vue-i18n-timeline"],color:HN["vue-i18n-timeline"]}),l(!0)})}catch(_){console.error(_),h(!1)}})}function uS(t){return t.type.name||t.type.displayName||t.type.__file||"Anonymous"}function aB(t,n,l){const h=l.mode==="composition"?l.global:l.global.__composer;if(t&&t.vnode.el&&t.vnode.el.__VUE_I18N__&&t.vnode.el.__VUE_I18N__!==h){const _={label:`i18n (${uS(t)} Scope)`,textColor:0,backgroundColor:16764185};n.tags.push(_)}}function hS(t,n){const l=cS;t.state.push({type:l,key:"locale",editable:!0,value:n.locale.value}),t.state.push({type:l,key:"availableLocales",editable:!1,value:n.availableLocales}),t.state.push({type:l,key:"fallbackLocale",editable:!0,value:n.fallbackLocale.value}),t.state.push({type:l,key:"inheritLocale",editable:!0,value:n.inheritLocale}),t.state.push({type:l,key:"messages",editable:!1,value:A0(n.messages.value)}),t.state.push({type:l,key:"datetimeFormats",editable:!1,value:n.datetimeFormats.value}),t.state.push({type:l,key:"numberFormats",editable:!1,value:n.numberFormats.value})}function A0(t){const n={};return Object.keys(t).forEach(l=>{const h=t[l];Sr(h)&&"source"in h?n[l]=hB(h):er(h)?n[l]=A0(h):n[l]=h}),n}const lB={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function cB(t){return t.replace(/[<>"&]/g,uB)}function uB(t){return lB[t]||t}function hB(t){const n=t.source?`("${cB(t.source)}")`:"(?)";return{_custom:{type:"function",display:`<span>\u0192</span> ${n}`}}}function fB(t,n){t.rootNodes.push({id:"global",label:"Global Scope"});const l=n.mode==="composition"?n.global:n.global.__composer;for(const[h,_]of n.__instances){const g=n.mode==="composition"?_:_.__composer;l!==g&&t.rootNodes.push({id:g.id.toString(),label:`${uS(h)} Scope`})}}function dB(t,n){let l=null;if(t!=="global"){for(const[h,_]of n.__instances.entries())if(_.id.toString()===t){l=h;break}}return l}function fS(t,n){if(t==="global")return n.mode==="composition"?n.global:n.global.__composer;{const l=Array.from(n.__instances.values()).find(h=>h.id.toString()===t);return l?n.mode==="composition"?l:l.__composer:null}}function pB(t,n){const l=fS(t.nodeId,n);return l&&(t.state=mB(l)),null}function mB(t){const n={},l="Locale related info",h=[{type:l,key:"locale",editable:!0,value:t.locale.value},{type:l,key:"fallbackLocale",editable:!0,value:t.fallbackLocale.value},{type:l,key:"availableLocales",editable:!1,value:t.availableLocales},{type:l,key:"inheritLocale",editable:!0,value:t.inheritLocale}];n[l]=h;const _="Locale messages info",g=[{type:_,key:"messages",editable:!1,value:A0(t.messages.value)}];n[_]=g;{const w="Datetime formats info",s=[{type:w,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}];n[w]=s;const C="Datetime formats info",O=[{type:C,key:"numberFormats",editable:!1,value:t.numberFormats.value}];n[C]=O}return n}function Ap(t,n){if(T0){let l;n&&"groupId"in n&&(l=n.groupId,delete n.groupId),T0.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:t,groupId:l,time:Date.now(),meta:{},data:n||{},logType:t==="compile-error"?"error":t==="fallback"||t==="missing"?"warning":"default"}})}}function _B(t,n){const l=fS(t.nodeId,n);if(l){const[h]=t.path;h==="locale"&&fn(t.state.value)?l.locale.value=t.state.value:h==="fallbackLocale"&&(fn(t.state.value)||ar(t.state.value)||er(t.state.value))?l.fallbackLocale.value=t.state.value:h==="inheritLocale"&&Li(t.state.value)&&(l.inheritLocale=t.state.value)}}function gB(t,n,l){return{beforeCreate(){const h=Mc();if(!h)throw no(Pi.UNEXPECTED_ERROR);const _=this.$options;if(_.i18n){const g=_.i18n;_.__i18n&&(g.__i18n=_.__i18n),g.__root=n,this===this.$root?this.$i18n=dS(t,g):(g.__injectWithOption=!0,this.$i18n=b0(g))}else _.__i18n?this===this.$root?this.$i18n=dS(t,_):this.$i18n=b0({__i18n:_.__i18n,__injectWithOption:!0,__root:n}):this.$i18n=t;t.__onComponentInstanceCreated(this.$i18n),l.__setInstance(h,this.$i18n),this.$t=(...g)=>this.$i18n.t(...g),this.$rt=(...g)=>this.$i18n.rt(...g),this.$tc=(...g)=>this.$i18n.tc(...g),this.$te=(g,w)=>this.$i18n.te(g,w),this.$d=(...g)=>this.$i18n.d(...g),this.$n=(...g)=>this.$i18n.n(...g),this.$tm=g=>this.$i18n.tm(g)},mounted(){{this.$el.__VUE_I18N__=this.$i18n.__composer;const h=this.__v_emitter=s0(),_=this.$i18n;_.__enableEmitter&&_.__enableEmitter(h),h.on("*",Ap)}},unmounted(){const h=Mc();if(!h)throw no(Pi.UNEXPECTED_ERROR);Ky(()=>{{this.__v_emitter&&(this.__v_emitter.off("*",Ap),delete this.__v_emitter);const _=this.$i18n;_.__disableEmitter&&_.__disableEmitter(),delete this.$el.__VUE_I18N__}delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,l.__deleteInstance(h),delete this.$i18n})}}}function dS(t,n){t.locale=n.locale||t.locale,t.fallbackLocale=n.fallbackLocale||t.fallbackLocale,t.missing=n.missing||t.missing,t.silentTranslationWarn=n.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=n.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=n.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=n.postTranslation||t.postTranslation,t.warnHtmlInMessage=n.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=n.escapeParameterHtml||t.escapeParameterHtml,t.sync=n.sync||t.sync,t.__composer[eS](n.pluralizationRules||t.pluralizationRules);const l=v0(t.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(l).forEach(h=>t.mergeLocaleMessage(h,l[h])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(h=>t.mergeDateTimeFormat(h,n.datetimeFormats[h])),n.numberFormats&&Object.keys(n.numberFormats).forEach(h=>t.mergeNumberFormat(h,n.numberFormats[h])),t}const yB=$a("global-vue-i18n");function r8(t={},n){const l=__VUE_I18N_LEGACY_API__&&Li(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,h=!!t.globalInjection,_=new Map,g=vB(t,l),w=$a("vue-i18n");function s(k){return _.get(k)||null}function C(k,D){_.set(k,D)}function O(k){_.delete(k)}{const k={get mode(){return __VUE_I18N_LEGACY_API__&&l?"legacy":"composition"},async install(D,...F){D.__VUE_I18N__=k,D.__VUE_I18N_SYMBOL__=w,D.provide(D.__VUE_I18N_SYMBOL__,k),!l&&h&&IB(D,k.global),__VUE_I18N_FULL_INSTALL__&&oB(D,k,...F),__VUE_I18N_LEGACY_API__&&l&&D.mixin(gB(g,g.__composer,k));{if(!await sB(D,k))throw no(Pi.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN);const Se=s0();if(l){const pe=g;pe.__enableEmitter&&pe.__enableEmitter(Se)}else{const pe=g;pe[hh]&&pe[hh](Se)}Se.on("*",Ap)}},get global(){return g},__instances:_,__getInstance:s,__setInstance:C,__deleteInstance:O};return k}}function S0(t={}){const n=Mc();if(n==null)throw no(Pi.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw no(Pi.NOT_INSLALLED);const l=xB(n),h=wB(l),_=nS(n),g=bB(t,_);if(g==="global")return EB(h,t,_),h;if(g==="parent"){let C=TB(l,n,t.__useComponent);return C==null&&(Jo(sa(Pr.NOT_FOUND_PARENT_SCOPE)),C=h),C}if(l.mode==="legacy")throw no(Pi.NOT_AVAILABLE_IN_LEGACY_MODE);const w=l;let s=w.__getInstance(n);if(s==null){const C=Vr({},t);"__i18n"in _&&(C.__i18n=_.__i18n),h&&(C.__root=h),s=x0(C),AB(w,n,s),w.__setInstance(n,s)}return s}function vB(t,n,l){return __VUE_I18N_LEGACY_API__&&n?b0(t):x0(t)}function xB(t){{const n=cs(t.isCE?yB:t.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw no(t.isCE?Pi.NOT_INSLALLED_WITH_PROVIDE:Pi.UNEXPECTED_ERROR);return n}}function bB(t,n){return S_(t)?"__i18n"in n?"local":"global":t.useScope?t.useScope:"local"}function wB(t){return t.mode==="composition"?t.global:t.global.__composer}function EB(t,n,l){let h=er(n.messages)?n.messages:{};"__i18nGlobal"in l&&(h=v0(t.locale.value,{messages:h,__i18n:l.__i18nGlobal}));const _=Object.keys(h);_.length&&_.forEach(g=>{t.mergeLocaleMessage(g,h[g])});{if(er(n.datetimeFormats)){const g=Object.keys(n.datetimeFormats);g.length&&g.forEach(w=>{t.mergeDateTimeFormat(w,n.datetimeFormats[w])})}if(er(n.numberFormats)){const g=Object.keys(n.numberFormats);g.length&&g.forEach(w=>{t.mergeNumberFormat(w,n.numberFormats[w])})}}}function TB(t,n,l=!1){let h=null;const _=n.root;let g=n.parent;for(;g!=null;){const w=t;if(t.mode==="composition")h=w.__getInstance(g);else if(__VUE_I18N_LEGACY_API__){const s=w.__getInstance(g);s!=null&&(h=s.__composer,l&&h&&!h[tS]&&(h=null))}if(h!=null||_===g)break;g=g.parent}return h}function AB(t,n,l){let h=null;Tw(()=>{if(n.vnode.el){n.vnode.el.__VUE_I18N__=l,h=s0();const _=l;_[hh]&&_[hh](h),h.on("*",Ap)}},n),Nm(()=>{if(n.vnode.el&&n.vnode.el.__VUE_I18N__){h&&h.off("*",Ap);const _=l;_[Ep]&&_[Ep](),delete n.vnode.el.__VUE_I18N__}t.__deleteInstance(n)},n)}const SB=["locale","fallbackLocale","availableLocales"],CB=["t","rt","d","n","tm"];function IB(t,n){const l=Object.create(null);SB.forEach(h=>{const _=Object.getOwnPropertyDescriptor(n,h);if(!_)throw no(Pi.UNEXPECTED_ERROR);const g=Qr(_.value)?{get(){return _.value.value},set(w){_.value.value=w}}:{get(){return _.get&&_.get()}};Object.defineProperty(l,h,g)}),t.config.globalProperties.$i18n=l,CB.forEach(h=>{const _=Object.getOwnPropertyDescriptor(n,h);if(!_||!_.value)throw no(Pi.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${h}`,_)})}IN(NN);MN(cN);kN(PA);qN();{const t=xp();t.__INTLIFY__=!0,yN(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var MB=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},l=Symbol("test"),h=Object(l);if(typeof l=="string"||Object.prototype.toString.call(l)!=="[object Symbol]"||Object.prototype.toString.call(h)!=="[object Symbol]")return!1;var _=42;n[l]=_;for(l in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var g=Object.getOwnPropertySymbols(n);if(g.length!==1||g[0]!==l||!Object.prototype.propertyIsEnumerable.call(n,l))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var w=Object.getOwnPropertyDescriptor(n,l);if(w.value!==_||w.enumerable!==!0)return!1}return!0},pS=typeof Symbol!="undefined"&&Symbol,kB=MB,LB=function(){return typeof pS!="function"||typeof Symbol!="function"||typeof pS("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:kB()},PB="Function.prototype.bind called on incompatible ",C0=Array.prototype.slice,DB=Object.prototype.toString,OB="[object Function]",zB=function(n){var l=this;if(typeof l!="function"||DB.call(l)!==OB)throw new TypeError(PB+l);for(var h=C0.call(arguments,1),_,g=function(){if(this instanceof _){var k=l.apply(this,h.concat(C0.call(arguments)));return Object(k)===k?k:this}else return l.apply(n,h.concat(C0.call(arguments)))},w=Math.max(0,l.length-h.length),s=[],C=0;C<w;C++)s.push("$"+C);if(_=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(g),l.prototype){var O=function(){};O.prototype=l.prototype,_.prototype=new O,O.prototype=null}return _},RB=zB,I0=Function.prototype.bind||RB,NB=I0,BB=NB.call(Function.call,Object.prototype.hasOwnProperty),yi,Sp=SyntaxError,mS=Function,$f=TypeError,M0=function(t){try{return mS('"use strict"; return ('+t+").constructor;")()}catch{}},fh=Object.getOwnPropertyDescriptor;if(fh)try{fh({},"")}catch{fh=null}var k0=function(){throw new $f},FB=fh?function(){try{return arguments.callee,k0}catch{try{return fh(arguments,"callee").get}catch{return k0}}}():k0,Uf=LB(),jc=Object.getPrototypeOf||function(t){return t.__proto__},jf={},$B=typeof Uint8Array=="undefined"?yi:jc(Uint8Array),Vf={"%AggregateError%":typeof AggregateError=="undefined"?yi:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?yi:ArrayBuffer,"%ArrayIteratorPrototype%":Uf?jc([][Symbol.iterator]()):yi,"%AsyncFromSyncIteratorPrototype%":yi,"%AsyncFunction%":jf,"%AsyncGenerator%":jf,"%AsyncGeneratorFunction%":jf,"%AsyncIteratorPrototype%":jf,"%Atomics%":typeof Atomics=="undefined"?yi:Atomics,"%BigInt%":typeof BigInt=="undefined"?yi:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?yi:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?yi:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?yi:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?yi:FinalizationRegistry,"%Function%":mS,"%GeneratorFunction%":jf,"%Int8Array%":typeof Int8Array=="undefined"?yi:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?yi:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?yi:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uf?jc(jc([][Symbol.iterator]())):yi,"%JSON%":typeof JSON=="object"?JSON:yi,"%Map%":typeof Map=="undefined"?yi:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Uf?yi:jc(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?yi:Promise,"%Proxy%":typeof Proxy=="undefined"?yi:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?yi:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?yi:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Uf?yi:jc(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?yi:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uf?jc(""[Symbol.iterator]()):yi,"%Symbol%":Uf?Symbol:yi,"%SyntaxError%":Sp,"%ThrowTypeError%":FB,"%TypedArray%":$B,"%TypeError%":$f,"%Uint8Array%":typeof Uint8Array=="undefined"?yi:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?yi:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?yi:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?yi:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?yi:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?yi:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?yi:WeakSet},UB=function t(n){var l;if(n==="%AsyncFunction%")l=M0("async function () {}");else if(n==="%GeneratorFunction%")l=M0("function* () {}");else if(n==="%AsyncGeneratorFunction%")l=M0("async function* () {}");else if(n==="%AsyncGenerator%"){var h=t("%AsyncGeneratorFunction%");h&&(l=h.prototype)}else if(n==="%AsyncIteratorPrototype%"){var _=t("%AsyncGenerator%");_&&(l=jc(_.prototype))}return Vf[n]=l,l},_S={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D_=I0,O_=BB,jB=D_.call(Function.call,Array.prototype.concat),VB=D_.call(Function.apply,Array.prototype.splice),gS=D_.call(Function.call,String.prototype.replace),z_=D_.call(Function.call,String.prototype.slice),GB=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,HB=/\\(\\)?/g,WB=function(n){var l=z_(n,0,1),h=z_(n,-1);if(l==="%"&&h!=="%")throw new Sp("invalid intrinsic syntax, expected closing `%`");if(h==="%"&&l!=="%")throw new Sp("invalid intrinsic syntax, expected opening `%`");var _=[];return gS(n,GB,function(g,w,s,C){_[_.length]=s?gS(C,HB,"$1"):w||g}),_},qB=function(n,l){var h=n,_;if(O_(_S,h)&&(_=_S[h],h="%"+_[0]+"%"),O_(Vf,h)){var g=Vf[h];if(g===jf&&(g=UB(h)),typeof g=="undefined"&&!l)throw new $f("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:_,name:h,value:g}}throw new Sp("intrinsic "+n+" does not exist!")},L0=function(n,l){if(typeof n!="string"||n.length===0)throw new $f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof l!="boolean")throw new $f('"allowMissing" argument must be a boolean');var h=WB(n),_=h.length>0?h[0]:"",g=qB("%"+_+"%",l),w=g.name,s=g.value,C=!1,O=g.alias;O&&(_=O[0],VB(h,jB([0,1],O)));for(var k=1,D=!0;k<h.length;k+=1){var F=h[k],K=z_(F,0,1),Se=z_(F,-1);if((K==='"'||K==="'"||K==="`"||Se==='"'||Se==="'"||Se==="`")&&K!==Se)throw new Sp("property names with quotes must have matching quotes");if((F==="constructor"||!D)&&(C=!0),_+="."+F,w="%"+_+"%",O_(Vf,w))s=Vf[w];else if(s!=null){if(!(F in s)){if(!l)throw new $f("base intrinsic for "+n+" exists, but the property is not available.");return}if(fh&&k+1>=h.length){var pe=fh(s,F);D=!!pe,D&&"get"in pe&&!("originalValue"in pe.get)?s=pe.get:s=s[F]}else D=O_(s,F),s=s[F];D&&!C&&(Vf[w]=s)}}return s},yS={exports:{}};(function(t){var n=I0,l=L0,h=l("%Function.prototype.apply%"),_=l("%Function.prototype.call%"),g=l("%Reflect.apply%",!0)||n.call(_,h),w=l("%Object.getOwnPropertyDescriptor%",!0),s=l("%Object.defineProperty%",!0),C=l("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(D){var F=g(n,_,arguments);if(w&&s){var K=w(F,"length");K.configurable&&s(F,"length",{value:1+C(0,D.length-(arguments.length-1))})}return F};var O=function(){return g(n,h,arguments)};s?s(t.exports,"apply",{value:O}):t.exports.apply=O})(yS);var vS=L0,xS=yS.exports,ZB=xS(vS("String.prototype.indexOf")),XB=function(n,l){var h=vS(n,!!l);return typeof h=="function"&&ZB(n,".prototype.")>-1?xS(h):h},YB=new Proxy({},{get(){throw new Error('Module "" has been externalized for browser compatibility and cannot be accessed in client code.')}}),KB=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:YB}),JB=v5(KB),P0=typeof Map=="function"&&Map.prototype,D0=Object.getOwnPropertyDescriptor&&P0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,R_=P0&&D0&&typeof D0.get=="function"?D0.get:null,QB=P0&&Map.prototype.forEach,O0=typeof Set=="function"&&Set.prototype,z0=Object.getOwnPropertyDescriptor&&O0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,N_=O0&&z0&&typeof z0.get=="function"?z0.get:null,eF=O0&&Set.prototype.forEach,tF=typeof WeakMap=="function"&&WeakMap.prototype,Cp=tF?WeakMap.prototype.has:null,nF=typeof WeakSet=="function"&&WeakSet.prototype,Ip=nF?WeakSet.prototype.has:null,iF=typeof WeakRef=="function"&&WeakRef.prototype,bS=iF?WeakRef.prototype.deref:null,rF=Boolean.prototype.valueOf,oF=Object.prototype.toString,sF=Function.prototype.toString,aF=String.prototype.match,R0=String.prototype.slice,Vc=String.prototype.replace,lF=String.prototype.toUpperCase,wS=String.prototype.toLowerCase,ES=RegExp.prototype.test,TS=Array.prototype.concat,Va=Array.prototype.join,cF=Array.prototype.slice,AS=Math.floor,N0=typeof BigInt=="function"?BigInt.prototype.valueOf:null,B0=Object.getOwnPropertySymbols,F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fo=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Gf?"object":"symbol")?Symbol.toStringTag:null,SS=Object.prototype.propertyIsEnumerable,CS=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function IS(t,n){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||ES.call(/e/,n))return n;var l=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var h=t<0?-AS(-t):AS(t);if(h!==t){var _=String(h),g=R0.call(n,_.length+1);return Vc.call(_,l,"$&_")+"."+Vc.call(Vc.call(g,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Vc.call(n,l,"$&_")}var $0=JB.custom,U0=$0&&kS($0)?$0:null,uF=function t(n,l,h,_){var g=l||{};if(Gc(g,"quoteStyle")&&g.quoteStyle!=="single"&&g.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Gc(g,"maxStringLength")&&(typeof g.maxStringLength=="number"?g.maxStringLength<0&&g.maxStringLength!==1/0:g.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=Gc(g,"customInspect")?g.customInspect:!0;if(typeof w!="boolean"&&w!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Gc(g,"indent")&&g.indent!==null&&g.indent!=="	"&&!(parseInt(g.indent,10)===g.indent&&g.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Gc(g,"numericSeparator")&&typeof g.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=g.numericSeparator;if(typeof n=="undefined")return"undefined";if(n===null)return"null";if(typeof n=="boolean")return n?"true":"false";if(typeof n=="string")return PS(n,g);if(typeof n=="number"){if(n===0)return 1/0/n>0?"0":"-0";var C=String(n);return s?IS(n,C):C}if(typeof n=="bigint"){var O=String(n)+"n";return s?IS(n,O):O}var k=typeof g.depth=="undefined"?5:g.depth;if(typeof h=="undefined"&&(h=0),h>=k&&k>0&&typeof n=="object")return j0(n)?"[Array]":"[Object]";var D=MF(g,h);if(typeof _=="undefined")_=[];else if(LS(_,n)>=0)return"[Circular]";function F(Be,ve,He){if(ve&&(_=cF.call(_),_.push(ve)),He){var ct={depth:g.depth};return Gc(g,"quoteStyle")&&(ct.quoteStyle=g.quoteStyle),t(Be,ct,h+1,_)}return t(Be,g,h+1,_)}if(typeof n=="function"){var K=xF(n),Se=B_(n,F);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(Se.length>0?" { "+Va.call(Se,", ")+" }":"")}if(kS(n)){var pe=Gf?Vc.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):F0.call(n);return typeof n=="object"&&!Gf?Mp(pe):pe}if(SF(n)){for(var J="<"+wS.call(String(n.nodeName)),H=n.attributes||[],te=0;te<H.length;te++)J+=" "+H[te].name+"="+MS(hF(H[te].value),"double",g);return J+=">",n.childNodes&&n.childNodes.length&&(J+="..."),J+="</"+wS.call(String(n.nodeName))+">",J}if(j0(n)){if(n.length===0)return"[]";var ge=B_(n,F);return D&&!IF(ge)?"["+G0(ge,D)+"]":"[ "+Va.call(ge,", ")+" ]"}if(pF(n)){var ke=B_(n,F);return"cause"in n&&!SS.call(n,"cause")?"{ ["+String(n)+"] "+Va.call(TS.call("[cause]: "+F(n.cause),ke),", ")+" }":ke.length===0?"["+String(n)+"]":"{ ["+String(n)+"] "+Va.call(ke,", ")+" }"}if(typeof n=="object"&&w){if(U0&&typeof n[U0]=="function")return n[U0]();if(w!=="symbol"&&typeof n.inspect=="function")return n.inspect()}if(bF(n)){var Ae=[];return QB.call(n,function(Be,ve){Ae.push(F(ve,n,!0)+" => "+F(Be,n))}),DS("Map",R_.call(n),Ae,D)}if(TF(n)){var Pe=[];return eF.call(n,function(Be){Pe.push(F(Be,n))}),DS("Set",N_.call(n),Pe,D)}if(wF(n))return V0("WeakMap");if(AF(n))return V0("WeakSet");if(EF(n))return V0("WeakRef");if(_F(n))return Mp(F(Number(n)));if(yF(n))return Mp(F(N0.call(n)));if(gF(n))return Mp(rF.call(n));if(mF(n))return Mp(F(String(n)));if(!fF(n)&&!dF(n)){var Qe=B_(n,F),wt=CS?CS(n)===Object.prototype:n instanceof Object||n.constructor===Object,nt=n instanceof Object?"":"null prototype",Ee=!wt&&fo&&Object(n)===n&&fo in n?R0.call(Hc(n),8,-1):nt?"Object":"",Xe=wt||typeof n.constructor!="function"?"":n.constructor.name?n.constructor.name+" ":"",ot=Xe+(Ee||nt?"["+Va.call(TS.call([],Ee||[],nt||[]),": ")+"] ":"");return Qe.length===0?ot+"{}":D?ot+"{"+G0(Qe,D)+"}":ot+"{ "+Va.call(Qe,", ")+" }"}return String(n)};function MS(t,n,l){var h=(l.quoteStyle||n)==="double"?'"':"'";return h+t+h}function hF(t){return Vc.call(String(t),/"/g,"&quot;")}function j0(t){return Hc(t)==="[object Array]"&&(!fo||!(typeof t=="object"&&fo in t))}function fF(t){return Hc(t)==="[object Date]"&&(!fo||!(typeof t=="object"&&fo in t))}function dF(t){return Hc(t)==="[object RegExp]"&&(!fo||!(typeof t=="object"&&fo in t))}function pF(t){return Hc(t)==="[object Error]"&&(!fo||!(typeof t=="object"&&fo in t))}function mF(t){return Hc(t)==="[object String]"&&(!fo||!(typeof t=="object"&&fo in t))}function _F(t){return Hc(t)==="[object Number]"&&(!fo||!(typeof t=="object"&&fo in t))}function gF(t){return Hc(t)==="[object Boolean]"&&(!fo||!(typeof t=="object"&&fo in t))}function kS(t){if(Gf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!F0)return!1;try{return F0.call(t),!0}catch{}return!1}function yF(t){if(!t||typeof t!="object"||!N0)return!1;try{return N0.call(t),!0}catch{}return!1}var vF=Object.prototype.hasOwnProperty||function(t){return t in this};function Gc(t,n){return vF.call(t,n)}function Hc(t){return oF.call(t)}function xF(t){if(t.name)return t.name;var n=aF.call(sF.call(t),/^function\s*([\w$]+)/);return n?n[1]:null}function LS(t,n){if(t.indexOf)return t.indexOf(n);for(var l=0,h=t.length;l<h;l++)if(t[l]===n)return l;return-1}function bF(t){if(!R_||!t||typeof t!="object")return!1;try{R_.call(t);try{N_.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function wF(t){if(!Cp||!t||typeof t!="object")return!1;try{Cp.call(t,Cp);try{Ip.call(t,Ip)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function EF(t){if(!bS||!t||typeof t!="object")return!1;try{return bS.call(t),!0}catch{}return!1}function TF(t){if(!N_||!t||typeof t!="object")return!1;try{N_.call(t);try{R_.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function AF(t){if(!Ip||!t||typeof t!="object")return!1;try{Ip.call(t,Ip);try{Cp.call(t,Cp)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function SF(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function PS(t,n){if(t.length>n.maxStringLength){var l=t.length-n.maxStringLength,h="... "+l+" more character"+(l>1?"s":"");return PS(R0.call(t,0,n.maxStringLength),n)+h}var _=Vc.call(Vc.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,CF);return MS(_,"single",n)}function CF(t){var n=t.charCodeAt(0),l={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return l?"\\"+l:"\\x"+(n<16?"0":"")+lF.call(n.toString(16))}function Mp(t){return"Object("+t+")"}function V0(t){return t+" { ? }"}function DS(t,n,l,h){var _=h?G0(l,h):Va.call(l,", ");return t+" ("+n+") {"+_+"}"}function IF(t){for(var n=0;n<t.length;n++)if(LS(t[n],`
`)>=0)return!1;return!0}function MF(t,n){var l;if(t.indent==="	")l="	";else if(typeof t.indent=="number"&&t.indent>0)l=Va.call(Array(t.indent+1)," ");else return null;return{base:l,prev:Va.call(Array(n+1),l)}}function G0(t,n){if(t.length===0)return"";var l=`
`+n.prev+n.base;return l+Va.call(t,","+l)+`
`+n.prev}function B_(t,n){var l=j0(t),h=[];if(l){h.length=t.length;for(var _=0;_<t.length;_++)h[_]=Gc(t,_)?n(t[_],t):""}var g=typeof B0=="function"?B0(t):[],w;if(Gf){w={};for(var s=0;s<g.length;s++)w["$"+g[s]]=g[s]}for(var C in t)!Gc(t,C)||l&&String(Number(C))===C&&C<t.length||Gf&&w["$"+C]instanceof Symbol||(ES.call(/[^\w$]/,C)?h.push(n(C,t)+": "+n(t[C],t)):h.push(C+": "+n(t[C],t)));if(typeof B0=="function")for(var O=0;O<g.length;O++)SS.call(t,g[O])&&h.push("["+n(g[O])+"]: "+n(t[g[O]],t));return h}var H0=L0,Hf=XB,kF=uF,LF=H0("%TypeError%"),F_=H0("%WeakMap%",!0),$_=H0("%Map%",!0),PF=Hf("WeakMap.prototype.get",!0),DF=Hf("WeakMap.prototype.set",!0),OF=Hf("WeakMap.prototype.has",!0),zF=Hf("Map.prototype.get",!0),RF=Hf("Map.prototype.set",!0),NF=Hf("Map.prototype.has",!0),W0=function(t,n){for(var l=t,h;(h=l.next)!==null;l=h)if(h.key===n)return l.next=h.next,h.next=t.next,t.next=h,h},BF=function(t,n){var l=W0(t,n);return l&&l.value},FF=function(t,n,l){var h=W0(t,n);h?h.value=l:t.next={key:n,next:t.next,value:l}},$F=function(t,n){return!!W0(t,n)},UF=function(){var n,l,h,_={assert:function(g){if(!_.has(g))throw new LF("Side channel does not contain "+kF(g))},get:function(g){if(F_&&g&&(typeof g=="object"||typeof g=="function")){if(n)return PF(n,g)}else if($_){if(l)return zF(l,g)}else if(h)return BF(h,g)},has:function(g){if(F_&&g&&(typeof g=="object"||typeof g=="function")){if(n)return OF(n,g)}else if($_){if(l)return NF(l,g)}else if(h)return $F(h,g);return!1},set:function(g,w){F_&&g&&(typeof g=="object"||typeof g=="function")?(n||(n=new F_),DF(n,g,w)):$_?(l||(l=new $_),RF(l,g,w)):(h||(h={key:{},next:null}),FF(h,g,w))}};return _},jF=String.prototype.replace,VF=/%20/g,q0={RFC1738:"RFC1738",RFC3986:"RFC3986"},Z0={default:q0.RFC3986,formatters:{RFC1738:function(t){return jF.call(t,VF,"+")},RFC3986:function(t){return String(t)}},RFC1738:q0.RFC1738,RFC3986:q0.RFC3986},GF=Z0,X0=Object.prototype.hasOwnProperty,dh=Array.isArray,Ga=function(){for(var t=[],n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t}(),HF=function(n){for(;n.length>1;){var l=n.pop(),h=l.obj[l.prop];if(dh(h)){for(var _=[],g=0;g<h.length;++g)typeof h[g]!="undefined"&&_.push(h[g]);l.obj[l.prop]=_}}},OS=function(n,l){for(var h=l&&l.plainObjects?Object.create(null):{},_=0;_<n.length;++_)typeof n[_]!="undefined"&&(h[_]=n[_]);return h},WF=function t(n,l,h){if(!l)return n;if(typeof l!="object"){if(dh(n))n.push(l);else if(n&&typeof n=="object")(h&&(h.plainObjects||h.allowPrototypes)||!X0.call(Object.prototype,l))&&(n[l]=!0);else return[n,l];return n}if(!n||typeof n!="object")return[n].concat(l);var _=n;return dh(n)&&!dh(l)&&(_=OS(n,h)),dh(n)&&dh(l)?(l.forEach(function(g,w){if(X0.call(n,w)){var s=n[w];s&&typeof s=="object"&&g&&typeof g=="object"?n[w]=t(s,g,h):n.push(g)}else n[w]=g}),n):Object.keys(l).reduce(function(g,w){var s=l[w];return X0.call(g,w)?g[w]=t(g[w],s,h):g[w]=s,g},_)},qF=function(n,l){return Object.keys(l).reduce(function(h,_){return h[_]=l[_],h},n)},ZF=function(t,n,l){var h=t.replace(/\+/g," ");if(l==="iso-8859-1")return h.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(h)}catch{return h}},XF=function(n,l,h,_,g){if(n.length===0)return n;var w=n;if(typeof n=="symbol"?w=Symbol.prototype.toString.call(n):typeof n!="string"&&(w=String(n)),h==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(k){return"%26%23"+parseInt(k.slice(2),16)+"%3B"});for(var s="",C=0;C<w.length;++C){var O=w.charCodeAt(C);if(O===45||O===46||O===95||O===126||O>=48&&O<=57||O>=65&&O<=90||O>=97&&O<=122||g===GF.RFC1738&&(O===40||O===41)){s+=w.charAt(C);continue}if(O<128){s=s+Ga[O];continue}if(O<2048){s=s+(Ga[192|O>>6]+Ga[128|O&63]);continue}if(O<55296||O>=57344){s=s+(Ga[224|O>>12]+Ga[128|O>>6&63]+Ga[128|O&63]);continue}C+=1,O=65536+((O&1023)<<10|w.charCodeAt(C)&1023),s+=Ga[240|O>>18]+Ga[128|O>>12&63]+Ga[128|O>>6&63]+Ga[128|O&63]}return s},YF=function(n){for(var l=[{obj:{o:n},prop:"o"}],h=[],_=0;_<l.length;++_)for(var g=l[_],w=g.obj[g.prop],s=Object.keys(w),C=0;C<s.length;++C){var O=s[C],k=w[O];typeof k=="object"&&k!==null&&h.indexOf(k)===-1&&(l.push({obj:w,prop:O}),h.push(k))}return HF(l),n},KF=function(n){return Object.prototype.toString.call(n)==="[object RegExp]"},JF=function(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},QF=function(n,l){return[].concat(n,l)},e6=function(n,l){if(dh(n)){for(var h=[],_=0;_<n.length;_+=1)h.push(l(n[_]));return h}return l(n)},zS={arrayToObject:OS,assign:qF,combine:QF,compact:YF,decode:ZF,encode:XF,isBuffer:JF,isRegExp:KF,maybeMap:e6,merge:WF},RS=UF,Y0=zS,kp=Z0,t6=Object.prototype.hasOwnProperty,NS={brackets:function(n){return n+"[]"},comma:"comma",indices:function(n,l){return n+"["+l+"]"},repeat:function(n){return n}},ph=Array.isArray,n6=String.prototype.split,i6=Array.prototype.push,BS=function(t,n){i6.apply(t,ph(n)?n:[n])},r6=Date.prototype.toISOString,FS=kp.default,io={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Y0.encode,encodeValuesOnly:!1,format:FS,formatter:kp.formatters[FS],indices:!1,serializeDate:function(n){return r6.call(n)},skipNulls:!1,strictNullHandling:!1},o6=function(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"},K0={},s6=function t(n,l,h,_,g,w,s,C,O,k,D,F,K,Se,pe){for(var J=n,H=pe,te=0,ge=!1;(H=H.get(K0))!==void 0&&!ge;){var ke=H.get(n);if(te+=1,typeof ke!="undefined"){if(ke===te)throw new RangeError("Cyclic object value");ge=!0}typeof H.get(K0)=="undefined"&&(te=0)}if(typeof s=="function"?J=s(l,J):J instanceof Date?J=k(J):h==="comma"&&ph(J)&&(J=Y0.maybeMap(J,function(Ye){return Ye instanceof Date?k(Ye):Ye})),J===null){if(_)return w&&!K?w(l,io.encoder,Se,"key",D):l;J=""}if(o6(J)||Y0.isBuffer(J)){if(w){var Ae=K?l:w(l,io.encoder,Se,"key",D);if(h==="comma"&&K){for(var Pe=n6.call(String(J),","),Qe="",wt=0;wt<Pe.length;++wt)Qe+=(wt===0?"":",")+F(w(Pe[wt],io.encoder,Se,"value",D));return[F(Ae)+"="+Qe]}return[F(Ae)+"="+F(w(J,io.encoder,Se,"value",D))]}return[F(l)+"="+F(String(J))]}var nt=[];if(typeof J=="undefined")return nt;var Ee;if(h==="comma"&&ph(J))Ee=[{value:J.length>0?J.join(",")||null:void 0}];else if(ph(s))Ee=s;else{var Xe=Object.keys(J);Ee=C?Xe.sort(C):Xe}for(var ot=0;ot<Ee.length;++ot){var Be=Ee[ot],ve=typeof Be=="object"&&typeof Be.value!="undefined"?Be.value:J[Be];if(!(g&&ve===null)){var He=ph(J)?typeof h=="function"?h(l,Be):l:l+(O?"."+Be:"["+Be+"]");pe.set(n,te);var ct=RS();ct.set(K0,pe),BS(nt,t(ve,He,h,_,g,w,s,C,O,k,D,F,K,Se,ct))}}return nt},a6=function(n){if(!n)return io;if(n.encoder!==null&&typeof n.encoder!="undefined"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");var l=n.charset||io.charset;if(typeof n.charset!="undefined"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var h=kp.default;if(typeof n.format!="undefined"){if(!t6.call(kp.formatters,n.format))throw new TypeError("Unknown format option provided.");h=n.format}var _=kp.formatters[h],g=io.filter;return(typeof n.filter=="function"||ph(n.filter))&&(g=n.filter),{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:io.addQueryPrefix,allowDots:typeof n.allowDots=="undefined"?io.allowDots:!!n.allowDots,charset:l,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:io.charsetSentinel,delimiter:typeof n.delimiter=="undefined"?io.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:io.encode,encoder:typeof n.encoder=="function"?n.encoder:io.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:io.encodeValuesOnly,filter:g,format:h,formatter:_,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:io.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:io.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:io.strictNullHandling}},l6=function(t,n){var l=t,h=a6(n),_,g;typeof h.filter=="function"?(g=h.filter,l=g("",l)):ph(h.filter)&&(g=h.filter,_=g);var w=[];if(typeof l!="object"||l===null)return"";var s;n&&n.arrayFormat in NS?s=n.arrayFormat:n&&"indices"in n?s=n.indices?"indices":"repeat":s="indices";var C=NS[s];_||(_=Object.keys(l)),h.sort&&_.sort(h.sort);for(var O=RS(),k=0;k<_.length;++k){var D=_[k];h.skipNulls&&l[D]===null||BS(w,s6(l[D],D,C,h.strictNullHandling,h.skipNulls,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.format,h.formatter,h.encodeValuesOnly,h.charset,O))}var F=w.join(h.delimiter),K=h.addQueryPrefix===!0?"?":"";return h.charsetSentinel&&(h.charset==="iso-8859-1"?K+="utf8=%26%2310003%3B&":K+="utf8=%E2%9C%93&"),F.length>0?K+F:""},Wf=zS,J0=Object.prototype.hasOwnProperty,c6=Array.isArray,Gr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Wf.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},u6=function(t){return t.replace(/&#(\d+);/g,function(n,l){return String.fromCharCode(parseInt(l,10))})},$S=function(t,n){return t&&typeof t=="string"&&n.comma&&t.indexOf(",")>-1?t.split(","):t},h6="utf8=%26%2310003%3B",f6="utf8=%E2%9C%93",d6=function(n,l){var h={},_=l.ignoreQueryPrefix?n.replace(/^\?/,""):n,g=l.parameterLimit===1/0?void 0:l.parameterLimit,w=_.split(l.delimiter,g),s=-1,C,O=l.charset;if(l.charsetSentinel)for(C=0;C<w.length;++C)w[C].indexOf("utf8=")===0&&(w[C]===f6?O="utf-8":w[C]===h6&&(O="iso-8859-1"),s=C,C=w.length);for(C=0;C<w.length;++C)if(C!==s){var k=w[C],D=k.indexOf("]="),F=D===-1?k.indexOf("="):D+1,K,Se;F===-1?(K=l.decoder(k,Gr.decoder,O,"key"),Se=l.strictNullHandling?null:""):(K=l.decoder(k.slice(0,F),Gr.decoder,O,"key"),Se=Wf.maybeMap($S(k.slice(F+1),l),function(pe){return l.decoder(pe,Gr.decoder,O,"value")})),Se&&l.interpretNumericEntities&&O==="iso-8859-1"&&(Se=u6(Se)),k.indexOf("[]=")>-1&&(Se=c6(Se)?[Se]:Se),J0.call(h,K)?h[K]=Wf.combine(h[K],Se):h[K]=Se}return h},p6=function(t,n,l,h){for(var _=h?n:$S(n,l),g=t.length-1;g>=0;--g){var w,s=t[g];if(s==="[]"&&l.parseArrays)w=[].concat(_);else{w=l.plainObjects?Object.create(null):{};var C=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,O=parseInt(C,10);!l.parseArrays&&C===""?w={0:_}:!isNaN(O)&&s!==C&&String(O)===C&&O>=0&&l.parseArrays&&O<=l.arrayLimit?(w=[],w[O]=_):C!=="__proto__"&&(w[C]=_)}_=w}return _},m6=function(n,l,h,_){if(!!n){var g=h.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,w=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,C=h.depth>0&&w.exec(g),O=C?g.slice(0,C.index):g,k=[];if(O){if(!h.plainObjects&&J0.call(Object.prototype,O)&&!h.allowPrototypes)return;k.push(O)}for(var D=0;h.depth>0&&(C=s.exec(g))!==null&&D<h.depth;){if(D+=1,!h.plainObjects&&J0.call(Object.prototype,C[1].slice(1,-1))&&!h.allowPrototypes)return;k.push(C[1])}return C&&k.push("["+g.slice(C.index)+"]"),p6(k,l,h,_)}},_6=function(n){if(!n)return Gr;if(n.decoder!==null&&n.decoder!==void 0&&typeof n.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof n.charset!="undefined"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var l=typeof n.charset=="undefined"?Gr.charset:n.charset;return{allowDots:typeof n.allowDots=="undefined"?Gr.allowDots:!!n.allowDots,allowPrototypes:typeof n.allowPrototypes=="boolean"?n.allowPrototypes:Gr.allowPrototypes,allowSparse:typeof n.allowSparse=="boolean"?n.allowSparse:Gr.allowSparse,arrayLimit:typeof n.arrayLimit=="number"?n.arrayLimit:Gr.arrayLimit,charset:l,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Gr.charsetSentinel,comma:typeof n.comma=="boolean"?n.comma:Gr.comma,decoder:typeof n.decoder=="function"?n.decoder:Gr.decoder,delimiter:typeof n.delimiter=="string"||Wf.isRegExp(n.delimiter)?n.delimiter:Gr.delimiter,depth:typeof n.depth=="number"||n.depth===!1?+n.depth:Gr.depth,ignoreQueryPrefix:n.ignoreQueryPrefix===!0,interpretNumericEntities:typeof n.interpretNumericEntities=="boolean"?n.interpretNumericEntities:Gr.interpretNumericEntities,parameterLimit:typeof n.parameterLimit=="number"?n.parameterLimit:Gr.parameterLimit,parseArrays:n.parseArrays!==!1,plainObjects:typeof n.plainObjects=="boolean"?n.plainObjects:Gr.plainObjects,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Gr.strictNullHandling}},g6=function(t,n){var l=_6(n);if(t===""||t===null||typeof t=="undefined")return l.plainObjects?Object.create(null):{};for(var h=typeof t=="string"?d6(t,l):t,_=l.plainObjects?Object.create(null):{},g=Object.keys(h),w=0;w<g.length;++w){var s=g[w],C=m6(s,h[s],l,typeof t=="string");_=Wf.merge(_,C,l)}return l.allowSparse===!0?_:Wf.compact(_)},y6=l6,v6=g6,x6=Z0,o8={formats:x6,parse:v6,stringify:y6},Q0={exports:{}},US=function(n,l){return function(){for(var _=new Array(arguments.length),g=0;g<_.length;g++)_[g]=arguments[g];return n.apply(l,_)}},b6=US,mh=Object.prototype.toString;function ex(t){return mh.call(t)==="[object Array]"}function tx(t){return typeof t=="undefined"}function w6(t){return t!==null&&!tx(t)&&t.constructor!==null&&!tx(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function E6(t){return mh.call(t)==="[object ArrayBuffer]"}function T6(t){return typeof FormData!="undefined"&&t instanceof FormData}function A6(t){var n;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&t.buffer instanceof ArrayBuffer,n}function S6(t){return typeof t=="string"}function C6(t){return typeof t=="number"}function jS(t){return t!==null&&typeof t=="object"}function U_(t){if(mh.call(t)!=="[object Object]")return!1;var n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}function I6(t){return mh.call(t)==="[object Date]"}function M6(t){return mh.call(t)==="[object File]"}function k6(t){return mh.call(t)==="[object Blob]"}function VS(t){return mh.call(t)==="[object Function]"}function L6(t){return jS(t)&&VS(t.pipe)}function P6(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function D6(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function O6(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function nx(t,n){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),ex(t))for(var l=0,h=t.length;l<h;l++)n.call(null,t[l],l,t);else for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&n.call(null,t[_],_,t)}function ix(){var t={};function n(_,g){U_(t[g])&&U_(_)?t[g]=ix(t[g],_):U_(_)?t[g]=ix({},_):ex(_)?t[g]=_.slice():t[g]=_}for(var l=0,h=arguments.length;l<h;l++)nx(arguments[l],n);return t}function z6(t,n,l){return nx(n,function(_,g){l&&typeof _=="function"?t[g]=b6(_,l):t[g]=_}),t}function R6(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var ys={isArray:ex,isArrayBuffer:E6,isBuffer:w6,isFormData:T6,isArrayBufferView:A6,isString:S6,isNumber:C6,isObject:jS,isPlainObject:U_,isUndefined:tx,isDate:I6,isFile:M6,isBlob:k6,isFunction:VS,isStream:L6,isURLSearchParams:P6,isStandardBrowserEnv:O6,forEach:nx,merge:ix,extend:z6,trim:D6,stripBOM:R6},qf=ys;function GS(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var HS=function(n,l,h){if(!l)return n;var _;if(h)_=h(l);else if(qf.isURLSearchParams(l))_=l.toString();else{var g=[];qf.forEach(l,function(C,O){C===null||typeof C=="undefined"||(qf.isArray(C)?O=O+"[]":C=[C],qf.forEach(C,function(D){qf.isDate(D)?D=D.toISOString():qf.isObject(D)&&(D=JSON.stringify(D)),g.push(GS(O)+"="+GS(D))}))}),_=g.join("&")}if(_){var w=n.indexOf("#");w!==-1&&(n=n.slice(0,w)),n+=(n.indexOf("?")===-1?"?":"&")+_}return n},N6=ys;function j_(){this.handlers=[]}j_.prototype.use=function(n,l,h){return this.handlers.push({fulfilled:n,rejected:l,synchronous:h?h.synchronous:!1,runWhen:h?h.runWhen:null}),this.handlers.length-1};j_.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)};j_.prototype.forEach=function(n){N6.forEach(this.handlers,function(h){h!==null&&n(h)})};var B6=j_,F6=ys,$6=function(n,l){F6.forEach(n,function(_,g){g!==l&&g.toUpperCase()===l.toUpperCase()&&(n[l]=_,delete n[g])})},WS=function(n,l,h,_,g){return n.config=l,h&&(n.code=h),n.request=_,n.response=g,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},n},U6=WS,qS=function(n,l,h,_,g){var w=new Error(n);return U6(w,l,h,_,g)},j6=qS,V6=function(n,l,h){var _=h.config.validateStatus;!h.status||!_||_(h.status)?n(h):l(j6("Request failed with status code "+h.status,h.config,null,h.request,h))},V_=ys,G6=V_.isStandardBrowserEnv()?function(){return{write:function(l,h,_,g,w,s){var C=[];C.push(l+"="+encodeURIComponent(h)),V_.isNumber(_)&&C.push("expires="+new Date(_).toGMTString()),V_.isString(g)&&C.push("path="+g),V_.isString(w)&&C.push("domain="+w),s===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(l){var h=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return h?decodeURIComponent(h[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),H6=function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)},W6=function(n,l){return l?n.replace(/\/+$/,"")+"/"+l.replace(/^\/+/,""):n},q6=H6,Z6=W6,X6=function(n,l){return n&&!q6(l)?Z6(n,l):l},rx=ys,Y6=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],K6=function(n){var l={},h,_,g;return n&&rx.forEach(n.split(`
`),function(s){if(g=s.indexOf(":"),h=rx.trim(s.substr(0,g)).toLowerCase(),_=rx.trim(s.substr(g+1)),h){if(l[h]&&Y6.indexOf(h)>=0)return;h==="set-cookie"?l[h]=(l[h]?l[h]:[]).concat([_]):l[h]=l[h]?l[h]+", "+_:_}}),l},ZS=ys,J6=ZS.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a"),h;function _(g){var w=g;return n&&(l.setAttribute("href",w),w=l.href),l.setAttribute("href",w),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return h=_(window.location.href),function(w){var s=ZS.isString(w)?_(w):w;return s.protocol===h.protocol&&s.host===h.host}}():function(){return function(){return!0}}();function ox(t){this.message=t}ox.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ox.prototype.__CANCEL__=!0;var G_=ox,H_=ys,Q6=V6,e$=G6,t$=HS,n$=X6,i$=K6,r$=J6,sx=qS,o$=q_,s$=G_,XS=function(n){return new Promise(function(h,_){var g=n.data,w=n.headers,s=n.responseType,C;function O(){n.cancelToken&&n.cancelToken.unsubscribe(C),n.signal&&n.signal.removeEventListener("abort",C)}H_.isFormData(g)&&delete w["Content-Type"];var k=new XMLHttpRequest;if(n.auth){var D=n.auth.username||"",F=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";w.Authorization="Basic "+btoa(D+":"+F)}var K=n$(n.baseURL,n.url);k.open(n.method.toUpperCase(),t$(K,n.params,n.paramsSerializer),!0),k.timeout=n.timeout;function Se(){if(!!k){var J="getAllResponseHeaders"in k?i$(k.getAllResponseHeaders()):null,H=!s||s==="text"||s==="json"?k.responseText:k.response,te={data:H,status:k.status,statusText:k.statusText,headers:J,config:n,request:k};Q6(function(ke){h(ke),O()},function(ke){_(ke),O()},te),k=null}}if("onloadend"in k?k.onloadend=Se:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(Se)},k.onabort=function(){!k||(_(sx("Request aborted",n,"ECONNABORTED",k)),k=null)},k.onerror=function(){_(sx("Network Error",n,null,k)),k=null},k.ontimeout=function(){var H=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",te=n.transitional||o$.transitional;n.timeoutErrorMessage&&(H=n.timeoutErrorMessage),_(sx(H,n,te.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},H_.isStandardBrowserEnv()){var pe=(n.withCredentials||r$(K))&&n.xsrfCookieName?e$.read(n.xsrfCookieName):void 0;pe&&(w[n.xsrfHeaderName]=pe)}"setRequestHeader"in k&&H_.forEach(w,function(H,te){typeof g=="undefined"&&te.toLowerCase()==="content-type"?delete w[te]:k.setRequestHeader(te,H)}),H_.isUndefined(n.withCredentials)||(k.withCredentials=!!n.withCredentials),s&&s!=="json"&&(k.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&k.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(C=function(J){!k||(_(!J||J&&J.type?new s$("canceled"):J),k.abort(),k=null)},n.cancelToken&&n.cancelToken.subscribe(C),n.signal&&(n.signal.aborted?C():n.signal.addEventListener("abort",C))),g||(g=null),k.send(g)})},ro=ys,YS=$6,a$=WS,l$={"Content-Type":"application/x-www-form-urlencoded"};function KS(t,n){!ro.isUndefined(t)&&ro.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}function c$(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=XS),t}function u$(t,n,l){if(ro.isString(t))try{return(n||JSON.parse)(t),ro.trim(t)}catch(h){if(h.name!=="SyntaxError")throw h}return(l||JSON.stringify)(t)}var W_={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c$(),transformRequest:[function(n,l){return YS(l,"Accept"),YS(l,"Content-Type"),ro.isFormData(n)||ro.isArrayBuffer(n)||ro.isBuffer(n)||ro.isStream(n)||ro.isFile(n)||ro.isBlob(n)?n:ro.isArrayBufferView(n)?n.buffer:ro.isURLSearchParams(n)?(KS(l,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):ro.isObject(n)||l&&l["Content-Type"]==="application/json"?(KS(l,"application/json"),u$(n)):n}],transformResponse:[function(n){var l=this.transitional||W_.transitional,h=l&&l.silentJSONParsing,_=l&&l.forcedJSONParsing,g=!h&&this.responseType==="json";if(g||_&&ro.isString(n)&&n.length)try{return JSON.parse(n)}catch(w){if(g)throw w.name==="SyntaxError"?a$(w,this,"E_JSON_PARSE"):w}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ro.forEach(["delete","get","head"],function(n){W_.headers[n]={}});ro.forEach(["post","put","patch"],function(n){W_.headers[n]=ro.merge(l$)});var q_=W_,h$=ys,f$=q_,d$=function(n,l,h){var _=this||f$;return h$.forEach(h,function(w){n=w.call(_,n,l)}),n},JS=function(n){return!!(n&&n.__CANCEL__)},QS=ys,ax=d$,p$=JS,m$=q_,_$=G_;function lx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _$("canceled")}var g$=function(n){lx(n),n.headers=n.headers||{},n.data=ax.call(n,n.data,n.headers,n.transformRequest),n.headers=QS.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),QS.forEach(["delete","get","head","post","put","patch","common"],function(_){delete n.headers[_]});var l=n.adapter||m$.adapter;return l(n).then(function(_){return lx(n),_.data=ax.call(n,_.data,_.headers,n.transformResponse),_},function(_){return p$(_)||(lx(n),_&&_.response&&(_.response.data=ax.call(n,_.response.data,_.response.headers,n.transformResponse))),Promise.reject(_)})},vs=ys,eC=function(n,l){l=l||{};var h={};function _(k,D){return vs.isPlainObject(k)&&vs.isPlainObject(D)?vs.merge(k,D):vs.isPlainObject(D)?vs.merge({},D):vs.isArray(D)?D.slice():D}function g(k){if(vs.isUndefined(l[k])){if(!vs.isUndefined(n[k]))return _(void 0,n[k])}else return _(n[k],l[k])}function w(k){if(!vs.isUndefined(l[k]))return _(void 0,l[k])}function s(k){if(vs.isUndefined(l[k])){if(!vs.isUndefined(n[k]))return _(void 0,n[k])}else return _(void 0,l[k])}function C(k){if(k in l)return _(n[k],l[k]);if(k in n)return _(void 0,n[k])}var O={url:w,method:w,data:w,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:C};return vs.forEach(Object.keys(n).concat(Object.keys(l)),function(D){var F=O[D]||g,K=F(D);vs.isUndefined(K)&&F!==C||(h[D]=K)}),h},tC={version:"0.24.0"},y$=tC.version,cx={};["object","boolean","number","function","string","symbol"].forEach(function(t,n){cx[t]=function(h){return typeof h===t||"a"+(n<1?"n ":" ")+t}});var nC={};cx.transitional=function(n,l,h){function _(g,w){return"[Axios v"+y$+"] Transitional option '"+g+"'"+w+(h?". "+h:"")}return function(g,w,s){if(n===!1)throw new Error(_(w," has been removed"+(l?" in "+l:"")));return l&&!nC[w]&&(nC[w]=!0,console.warn(_(w," has been deprecated since v"+l+" and will be removed in the near future"))),n?n(g,w,s):!0}};function v$(t,n,l){if(typeof t!="object")throw new TypeError("options must be an object");for(var h=Object.keys(t),_=h.length;_-- >0;){var g=h[_],w=n[g];if(w){var s=t[g],C=s===void 0||w(s,g,t);if(C!==!0)throw new TypeError("option "+g+" must be "+C);continue}if(l!==!0)throw Error("Unknown option "+g)}}var x$={assertOptions:v$,validators:cx},iC=ys,b$=HS,rC=B6,oC=g$,Z_=eC,sC=x$,Zf=sC.validators;function Lp(t){this.defaults=t,this.interceptors={request:new rC,response:new rC}}Lp.prototype.request=function(n){typeof n=="string"?(n=arguments[1]||{},n.url=arguments[0]):n=n||{},n=Z_(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var l=n.transitional;l!==void 0&&sC.assertOptions(l,{silentJSONParsing:Zf.transitional(Zf.boolean),forcedJSONParsing:Zf.transitional(Zf.boolean),clarifyTimeoutError:Zf.transitional(Zf.boolean)},!1);var h=[],_=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(n)===!1||(_=_&&F.synchronous,h.unshift(F.fulfilled,F.rejected))});var g=[];this.interceptors.response.forEach(function(F){g.push(F.fulfilled,F.rejected)});var w;if(!_){var s=[oC,void 0];for(Array.prototype.unshift.apply(s,h),s=s.concat(g),w=Promise.resolve(n);s.length;)w=w.then(s.shift(),s.shift());return w}for(var C=n;h.length;){var O=h.shift(),k=h.shift();try{C=O(C)}catch(D){k(D);break}}try{w=oC(C)}catch(D){return Promise.reject(D)}for(;g.length;)w=w.then(g.shift(),g.shift());return w};Lp.prototype.getUri=function(n){return n=Z_(this.defaults,n),b$(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")};iC.forEach(["delete","get","head","options"],function(n){Lp.prototype[n]=function(l,h){return this.request(Z_(h||{},{method:n,url:l,data:(h||{}).data}))}});iC.forEach(["post","put","patch"],function(n){Lp.prototype[n]=function(l,h,_){return this.request(Z_(_||{},{method:n,url:l,data:h}))}});var w$=Lp,E$=G_;function Xf(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(_){n=_});var l=this;this.promise.then(function(h){if(!!l._listeners){var _,g=l._listeners.length;for(_=0;_<g;_++)l._listeners[_](h);l._listeners=null}}),this.promise.then=function(h){var _,g=new Promise(function(w){l.subscribe(w),_=w}).then(h);return g.cancel=function(){l.unsubscribe(_)},g},t(function(_){l.reason||(l.reason=new E$(_),n(l.reason))})}Xf.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Xf.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]};Xf.prototype.unsubscribe=function(n){if(!!this._listeners){var l=this._listeners.indexOf(n);l!==-1&&this._listeners.splice(l,1)}};Xf.source=function(){var n,l=new Xf(function(_){n=_});return{token:l,cancel:n}};var T$=Xf,A$=function(n){return function(h){return n.apply(null,h)}},S$=function(n){return typeof n=="object"&&n.isAxiosError===!0},aC=ys,C$=US,X_=w$,I$=eC,M$=q_;function lC(t){var n=new X_(t),l=C$(X_.prototype.request,n);return aC.extend(l,X_.prototype,n),aC.extend(l,n),l.create=function(_){return lC(I$(t,_))},l}var Ha=lC(M$);Ha.Axios=X_;Ha.Cancel=G_;Ha.CancelToken=T$;Ha.isCancel=JS;Ha.VERSION=tC.version;Ha.all=function(n){return Promise.all(n)};Ha.spread=A$;Ha.isAxiosError=S$;Q0.exports=Ha;Q0.exports.default=Ha;var s8=Q0.exports;/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function k$(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function cC(t,n){for(var l=0;l<n.length;l++){var h=n[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function L$(t,n,l){return n&&cC(t.prototype,n),l&&cC(t,l),t}function P$(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function vi(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{},h=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(l).filter(function(_){return Object.getOwnPropertyDescriptor(l,_).enumerable}))),h.forEach(function(_){P$(t,_,l[_])})}return t}function uC(t,n){return z$(t)||N$(t,n)||F$()}function D$(t){return O$(t)||R$(t)||B$()}function O$(t){if(Array.isArray(t)){for(var n=0,l=new Array(t.length);n<t.length;n++)l[n]=t[n];return l}}function z$(t){if(Array.isArray(t))return t}function R$(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function N$(t,n){var l=[],h=!0,_=!1,g=void 0;try{for(var w=t[Symbol.iterator](),s;!(h=(s=w.next()).done)&&(l.push(s.value),!(n&&l.length===n));h=!0);}catch(C){_=!0,g=C}finally{try{!h&&w.return!=null&&w.return()}finally{if(_)throw g}}return l}function B$(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function F$(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var hC=function(){},ux={},fC={},$$=null,dC={mark:hC,measure:hC};try{typeof window!="undefined"&&(ux=window),typeof document!="undefined"&&(fC=document),typeof MutationObserver!="undefined"&&($$=MutationObserver),typeof performance!="undefined"&&(dC=performance)}catch{}var U$=ux.navigator||{},pC=U$.userAgent,mC=pC===void 0?"":pC,Y_=ux,Mo=fC,K_=dC;Y_.document;var hx=!!Mo.documentElement&&!!Mo.head&&typeof Mo.addEventListener=="function"&&typeof Mo.createElement=="function",j$=~mC.indexOf("MSIE")||~mC.indexOf("Trident/"),Cl="___FONT_AWESOME___",fx=16,_C="fa",gC="svg-inline--fa",yC="data-fa-i2svg";(function(){try{return!1}catch{return!1}})();var dx={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},vC=Y_.FontAwesomeConfig||{};function V$(t){var n=Mo.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}function G$(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Mo&&typeof Mo.querySelector=="function"){var H$=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];H$.forEach(function(t){var n=uC(t,2),l=n[0],h=n[1],_=G$(V$(l));_!=null&&(vC[h]=_)})}var W$={familyPrefix:_C,replacementClass:gC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},px=vi({},W$,vC);px.autoReplaceSvg||(px.observeMutations=!1);var po=vi({},px);Y_.FontAwesomeConfig=po;var Il=Y_||{};Il[Cl]||(Il[Cl]={});Il[Cl].styles||(Il[Cl].styles={});Il[Cl].hooks||(Il[Cl].hooks={});Il[Cl].shims||(Il[Cl].shims=[]);var Wa=Il[Cl],q$=[],Z$=function t(){Mo.removeEventListener("DOMContentLoaded",t),mx=1,q$.map(function(n){return n()})},mx=!1;hx&&(mx=(Mo.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Mo.readyState),mx||Mo.addEventListener("DOMContentLoaded",Z$));typeof global!="undefined"&&typeof global.process!="undefined"&&global.process.emit;var Wc=fx,qc={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function X$(t){if(!(!t||!hx)){var n=Mo.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var l=Mo.head.childNodes,h=null,_=l.length-1;_>-1;_--){var g=l[_],w=(g.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(w)>-1&&(h=g)}return Mo.head.insertBefore(n,h),t}}var Y$="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function J_(){for(var t=12,n="";t-- >0;)n+=Y$[Math.random()*62|0];return n}function xC(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function K$(t){return Object.keys(t||{}).reduce(function(n,l){return n+"".concat(l,'="').concat(xC(t[l]),'" ')},"").trim()}function _x(t){return Object.keys(t||{}).reduce(function(n,l){return n+"".concat(l,": ").concat(t[l],";")},"")}function gx(t){return t.size!==qc.size||t.x!==qc.x||t.y!==qc.y||t.rotate!==qc.rotate||t.flipX||t.flipY}function bC(t){var n=t.transform,l=t.containerWidth,h=t.iconWidth,_={transform:"translate(".concat(l/2," 256)")},g="translate(".concat(n.x*32,", ").concat(n.y*32,") "),w="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),s="rotate(".concat(n.rotate," 0 0)"),C={transform:"".concat(g," ").concat(w," ").concat(s)},O={transform:"translate(".concat(h/2*-1," -256)")};return{outer:_,inner:C,path:O}}function J$(t){var n=t.transform,l=t.width,h=l===void 0?fx:l,_=t.height,g=_===void 0?fx:_,w=t.startCentered,s=w===void 0?!1:w,C="";return s&&j$?C+="translate(".concat(n.x/Wc-h/2,"em, ").concat(n.y/Wc-g/2,"em) "):s?C+="translate(calc(-50% + ".concat(n.x/Wc,"em), calc(-50% + ").concat(n.y/Wc,"em)) "):C+="translate(".concat(n.x/Wc,"em, ").concat(n.y/Wc,"em) "),C+="scale(".concat(n.size/Wc*(n.flipX?-1:1),", ").concat(n.size/Wc*(n.flipY?-1:1),") "),C+="rotate(".concat(n.rotate,"deg) "),C}var yx={x:0,y:0,width:"100%",height:"100%"};function wC(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||n)&&(t.attributes.fill="black"),t}function Q$(t){return t.tag==="g"?t.children:[t]}function eU(t){var n=t.children,l=t.attributes,h=t.main,_=t.mask,g=t.maskId,w=t.transform,s=h.width,C=h.icon,O=_.width,k=_.icon,D=bC({transform:w,containerWidth:O,iconWidth:s}),F={tag:"rect",attributes:vi({},yx,{fill:"white"})},K=C.children?{children:C.children.map(wC)}:{},Se={tag:"g",attributes:vi({},D.inner),children:[wC(vi({tag:C.tag,attributes:vi({},C.attributes,D.path)},K))]},pe={tag:"g",attributes:vi({},D.outer),children:[Se]},J="mask-".concat(g||J_()),H="clip-".concat(g||J_()),te={tag:"mask",attributes:vi({},yx,{id:J,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[F,pe]},ge={tag:"defs",children:[{tag:"clipPath",attributes:{id:H},children:Q$(k)},te]};return n.push(ge,{tag:"rect",attributes:vi({fill:"currentColor","clip-path":"url(#".concat(H,")"),mask:"url(#".concat(J,")")},yx)}),{children:n,attributes:l}}function tU(t){var n=t.children,l=t.attributes,h=t.main,_=t.transform,g=t.styles,w=_x(g);if(w.length>0&&(l.style=w),gx(_)){var s=bC({transform:_,containerWidth:h.width,iconWidth:h.width});n.push({tag:"g",attributes:vi({},s.outer),children:[{tag:"g",attributes:vi({},s.inner),children:[{tag:h.icon.tag,children:h.icon.children,attributes:vi({},h.icon.attributes,s.path)}]}]})}else n.push(h.icon);return{children:n,attributes:l}}function nU(t){var n=t.children,l=t.main,h=t.mask,_=t.attributes,g=t.styles,w=t.transform;if(gx(w)&&l.found&&!h.found){var s=l.width,C=l.height,O={x:s/C/2,y:.5};_.style=_x(vi({},g,{"transform-origin":"".concat(O.x+w.x/16,"em ").concat(O.y+w.y/16,"em")}))}return[{tag:"svg",attributes:_,children:n}]}function iU(t){var n=t.prefix,l=t.iconName,h=t.children,_=t.attributes,g=t.symbol,w=g===!0?"".concat(n,"-").concat(po.familyPrefix,"-").concat(l):g;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:vi({},_,{id:w}),children:h}]}]}function rU(t){var n=t.icons,l=n.main,h=n.mask,_=t.prefix,g=t.iconName,w=t.transform,s=t.symbol,C=t.title,O=t.maskId,k=t.titleId,D=t.extra,F=t.watchable,K=F===void 0?!1:F,Se=h.found?h:l,pe=Se.width,J=Se.height,H=_==="fak",te=H?"":"fa-w-".concat(Math.ceil(pe/J*16)),ge=[po.replacementClass,g?"".concat(po.familyPrefix,"-").concat(g):"",te].filter(function(Ee){return D.classes.indexOf(Ee)===-1}).filter(function(Ee){return Ee!==""||!!Ee}).concat(D.classes).join(" "),ke={children:[],attributes:vi({},D.attributes,{"data-prefix":_,"data-icon":g,class:ge,role:D.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(pe," ").concat(J)})},Ae=H&&!~D.classes.indexOf("fa-fw")?{width:"".concat(pe/J*16*.0625,"em")}:{};K&&(ke.attributes[yC]=""),C&&ke.children.push({tag:"title",attributes:{id:ke.attributes["aria-labelledby"]||"title-".concat(k||J_())},children:[C]});var Pe=vi({},ke,{prefix:_,iconName:g,main:l,mask:h,maskId:O,transform:w,symbol:s,styles:vi({},Ae,D.styles)}),Qe=h.found&&l.found?eU(Pe):tU(Pe),wt=Qe.children,nt=Qe.attributes;return Pe.children=wt,Pe.attributes=nt,s?iU(Pe):nU(Pe)}function oU(t){var n=t.content,l=t.width,h=t.height,_=t.transform,g=t.title,w=t.extra,s=t.watchable,C=s===void 0?!1:s,O=vi({},w.attributes,g?{title:g}:{},{class:w.classes.join(" ")});C&&(O[yC]="");var k=vi({},w.styles);gx(_)&&(k.transform=J$({transform:_,startCentered:!0,width:l,height:h}),k["-webkit-transform"]=k.transform);var D=_x(k);D.length>0&&(O.style=D);var F=[];return F.push({tag:"span",attributes:O,children:[n]}),g&&F.push({tag:"span",attributes:{class:"sr-only"},children:[g]}),F}var EC=function(){};po.measurePerformance&&K_&&K_.mark&&K_.measure;var sU=function(n,l){return function(h,_,g,w){return n.call(l,h,_,g,w)}},vx=function(n,l,h,_){var g=Object.keys(n),w=g.length,s=_!==void 0?sU(l,_):l,C,O,k;for(h===void 0?(C=1,k=n[g[0]]):(C=0,k=h);C<w;C++)O=g[C],k=s(k,n[O],O,n);return k};function TC(t,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=l.skipHooks,_=h===void 0?!1:h,g=Object.keys(n).reduce(function(w,s){var C=n[s],O=!!C.icon;return O?w[C.iconName]=C.icon:w[s]=C,w},{});typeof Wa.hooks.addPack=="function"&&!_?Wa.hooks.addPack(t,g):Wa.styles[t]=vi({},Wa.styles[t]||{},g),t==="fas"&&TC("fa",n)}var AC=Wa.styles,aU=Wa.shims,SC=function(){var n=function(_){return vx(AC,function(g,w,s){return g[s]=vx(w,_,{}),g},{})};n(function(h,_,g){return _[3]&&(h[_[3]]=g),h}),n(function(h,_,g){var w=_[2];return h[g]=g,w.forEach(function(s){h[s]=g}),h});var l="far"in AC;vx(aU,function(h,_){var g=_[0],w=_[1],s=_[2];return w==="far"&&!l&&(w="fas"),h[g]={prefix:w,iconName:s},h},{})};SC();Wa.styles;function CC(t,n,l){if(t&&t[n]&&t[n][l])return{prefix:n,iconName:l,icon:t[n][l]}}function IC(t){var n=t.tag,l=t.attributes,h=l===void 0?{}:l,_=t.children,g=_===void 0?[]:_;return typeof t=="string"?xC(t):"<".concat(n," ").concat(K$(h),">").concat(g.map(IC).join(""),"</").concat(n,">")}var lU=function(n){var l={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n?n.toLowerCase().split(" ").reduce(function(h,_){var g=_.toLowerCase().split("-"),w=g[0],s=g.slice(1).join("-");if(w&&s==="h")return h.flipX=!0,h;if(w&&s==="v")return h.flipY=!0,h;if(s=parseFloat(s),isNaN(s))return h;switch(w){case"grow":h.size=h.size+s;break;case"shrink":h.size=h.size-s;break;case"left":h.x=h.x-s;break;case"right":h.x=h.x+s;break;case"up":h.y=h.y-s;break;case"down":h.y=h.y+s;break;case"rotate":h.rotate=h.rotate+s;break}return h},l):l};function xx(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}xx.prototype=Object.create(Error.prototype);xx.prototype.constructor=xx;var Q_={fill:"currentColor"},MC={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};vi({},Q_,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var bx=vi({},MC,{attributeName:"opacity"});vi({},Q_,{cx:"256",cy:"364",r:"28"}),vi({},MC,{attributeName:"r",values:"28;14;28;28;14;28;"}),vi({},bx,{values:"1;0;1;1;0;1;"});vi({},Q_,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),vi({},bx,{values:"1;0;0;0;0;1;"});vi({},Q_,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),vi({},bx,{values:"0;0;1;1;0;0;"});Wa.styles;function kC(t){var n=t[0],l=t[1],h=t.slice(4),_=uC(h,1),g=_[0],w=null;return Array.isArray(g)?w={tag:"g",attributes:{class:"".concat(po.familyPrefix,"-").concat(dx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(po.familyPrefix,"-").concat(dx.SECONDARY),fill:"currentColor",d:g[0]}},{tag:"path",attributes:{class:"".concat(po.familyPrefix,"-").concat(dx.PRIMARY),fill:"currentColor",d:g[1]}}]}:w={tag:"path",attributes:{fill:"currentColor",d:g}},{found:!0,width:n,height:l,icon:w}}Wa.styles;var cU=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function uU(){var t=_C,n=gC,l=po.familyPrefix,h=po.replacementClass,_=cU;if(l!==t||h!==n){var g=new RegExp("\\.".concat(t,"\\-"),"g"),w=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(n),"g");_=_.replace(g,".".concat(l,"-")).replace(w,"--".concat(l,"-")).replace(s,".".concat(h))}return _}var hU=function(){function t(){k$(this,t),this.definitions={}}return L$(t,[{key:"add",value:function(){for(var l=this,h=arguments.length,_=new Array(h),g=0;g<h;g++)_[g]=arguments[g];var w=_.reduce(this._pullDefinitions,{});Object.keys(w).forEach(function(s){l.definitions[s]=vi({},l.definitions[s]||{},w[s]),TC(s,w[s]),SC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(l,h){var _=h.prefix&&h.iconName&&h.icon?{0:h}:h;return Object.keys(_).map(function(g){var w=_[g],s=w.prefix,C=w.iconName,O=w.icon;l[s]||(l[s]={}),l[s][C]=O}),l}}]),t}();function LC(){po.autoAddCss&&!OC&&(X$(uU()),OC=!0)}function PC(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(h){return IC(h)})}}),Object.defineProperty(t,"node",{get:function(){if(!!hx){var h=Mo.createElement("div");return h.innerHTML=t.html,h.children}}}),t}function DC(t){var n=t.prefix,l=n===void 0?"fa":n,h=t.iconName;if(!!h)return CC(dU.definitions,l,h)||CC(Wa.styles,l,h)}function fU(t){return function(n){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=(n||{}).icon?n:DC(n||{}),_=l.mask;return _&&(_=(_||{}).icon?_:DC(_||{})),t(h,vi({},l,{mask:_}))}}var dU=new hU,OC=!1,zC={transform:function(n){return lU(n)}},pU=fU(function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=n.transform,h=l===void 0?qc:l,_=n.symbol,g=_===void 0?!1:_,w=n.mask,s=w===void 0?null:w,C=n.maskId,O=C===void 0?null:C,k=n.title,D=k===void 0?null:k,F=n.titleId,K=F===void 0?null:F,Se=n.classes,pe=Se===void 0?[]:Se,J=n.attributes,H=J===void 0?{}:J,te=n.styles,ge=te===void 0?{}:te;if(!!t){var ke=t.prefix,Ae=t.iconName,Pe=t.icon;return PC(vi({type:"icon"},t),function(){return LC(),po.autoA11y&&(D?H["aria-labelledby"]="".concat(po.replacementClass,"-title-").concat(K||J_()):(H["aria-hidden"]="true",H.focusable="false")),rU({icons:{main:kC(Pe),mask:s?kC(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ke,iconName:Ae,transform:vi({},qc,h),symbol:g,title:D,maskId:O,titleId:K,extra:{attributes:H,styles:ge,classes:pe}})})}}),mU=function(n){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.transform,_=h===void 0?qc:h,g=l.title,w=g===void 0?null:g,s=l.classes,C=s===void 0?[]:s,O=l.attributes,k=O===void 0?{}:O,D=l.styles,F=D===void 0?{}:D;return PC({type:"text",content:n},function(){return LC(),oU({content:n,transform:vi({},qc,_),title:w,extra:{attributes:k,styles:F,classes:["".concat(po.familyPrefix,"-layers-text")].concat(D$(C))}})})},_U=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function gU(t,n){return n={exports:{}},t(n,n.exports),n.exports}var yU=gU(function(t){(function(n){var l=function(H,te,ge){if(!O(te)||D(te)||F(te)||K(te)||C(te))return te;var ke,Ae=0,Pe=0;if(k(te))for(ke=[],Pe=te.length;Ae<Pe;Ae++)ke.push(l(H,te[Ae],ge));else{ke={};for(var Qe in te)Object.prototype.hasOwnProperty.call(te,Qe)&&(ke[H(Qe,ge)]=l(H,te[Qe],ge))}return ke},h=function(H,te){te=te||{};var ge=te.separator||"_",ke=te.split||/(?=[A-Z])/;return H.split(ke).join(ge)},_=function(H){return Se(H)?H:(H=H.replace(/[\-_\s]+(.)?/g,function(te,ge){return ge?ge.toUpperCase():""}),H.substr(0,1).toLowerCase()+H.substr(1))},g=function(H){var te=_(H);return te.substr(0,1).toUpperCase()+te.substr(1)},w=function(H,te){return h(H,te).toLowerCase()},s=Object.prototype.toString,C=function(H){return typeof H=="function"},O=function(H){return H===Object(H)},k=function(H){return s.call(H)=="[object Array]"},D=function(H){return s.call(H)=="[object Date]"},F=function(H){return s.call(H)=="[object RegExp]"},K=function(H){return s.call(H)=="[object Boolean]"},Se=function(H){return H=H-0,H===H},pe=function(H,te){var ge=te&&"process"in te?te.process:te;return typeof ge!="function"?H:function(ke,Ae){return ge(ke,H,Ae)}},J={camelize:_,decamelize:w,pascalize:g,depascalize:w,camelizeKeys:function(H,te){return l(pe(_,te),H)},decamelizeKeys:function(H,te){return l(pe(w,te),H,te)},pascalizeKeys:function(H,te){return l(pe(g,te),H)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=J:n.humps=J})(_U)}),vU=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp=function(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t},eg=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(t[h]=l[h])}return t},xU=function(t,n){var l={};for(var h in t)n.indexOf(h)>=0||!Object.prototype.hasOwnProperty.call(t,h)||(l[h]=t[h]);return l},wx=function(t){if(Array.isArray(t)){for(var n=0,l=Array(t.length);n<t.length;n++)l[n]=t[n];return l}else return Array.from(t)};function bU(t){return t.split(";").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,l){var h=l.indexOf(":"),_=yU.camelize(l.slice(0,h)),g=l.slice(h+1).trim();return n[_]=g,n},{})}function wU(t){return t.split(/\s+/).reduce(function(n,l){return n[l]=!0,n},{})}function Ex(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var h=(t.children||[]).map(function(C){return Ex(C)}),_=Object.keys(t.attributes||{}).reduce(function(C,O){var k=t.attributes[O];switch(O){case"class":C.class=wU(k);break;case"style":C.style=bU(k);break;default:C.attrs[O]=k}return C},{attrs:{},class:{},style:{}});l.class;var g=l.style,w=g===void 0?{}:g,s=xU(l,["class","style"]);return _f(t.tag,eg({},n,{class:_.class,style:eg({},_.style,w)},_.attrs,s),h)}var RC=!1;try{RC=!1}catch{}function EU(){if(!RC&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function Dp(t,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?Pp({},t,n):{}}function TU(t){var n,l=(n={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Pp(n,"fa-"+t.size,t.size!==null),Pp(n,"fa-rotate-"+t.rotation,t.rotation!==null),Pp(n,"fa-pull-"+t.pull,t.pull!==null),Pp(n,"fa-swap-opacity",t.swapOpacity),n);return Object.keys(l).map(function(h){return l[h]?h:null}).filter(function(h){return h})}function NC(t){if(t===null)return null;if((typeof t=="undefined"?"undefined":vU(t))==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var a8=Sc({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:String,default:null,validator:function(n){return["horizontal","vertical","both"].indexOf(n)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(n){return["right","left"].indexOf(n)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(n){return[90,180,270].indexOf(Number.parseInt(n,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(n){return["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(n)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1}},setup:function(n,l){var h=l.attrs,_=Hi(function(){return NC(n.icon)}),g=Hi(function(){return Dp("classes",TU(n))}),w=Hi(function(){return Dp("transform",typeof n.transform=="string"?zC.transform(n.transform):n.transform)}),s=Hi(function(){return Dp("mask",NC(n.mask))}),C=Hi(function(){return pU(_.value,eg({},g.value,w.value,s.value,{symbol:n.symbol,title:n.title}))});za(C,function(k){if(!k)return EU("Could not find one or more icon(s)",_.value,s.value)},{immediate:!0});var O=Hi(function(){return C.value?Ex(C.value.abstract[0],{},h):null});return function(){return O.value}}});Sc({name:"FontAwesomeLayers",props:{fixedWidth:{type:Boolean,default:!1}},setup:function(n,l){var h=l.slots,_=po.familyPrefix,g=Hi(function(){return[_+"-layers"].concat(wx(n.fixedWidth?[_+"-fw"]:[]))});return function(){return _f("div",{class:g.value},h.default?h.default():[])}}});Sc({name:"FontAwesomeLayersText",props:{value:{type:[String,Number],default:""},transform:{type:[String,Object],default:null},counter:{type:Boolean,default:!1},position:{type:String,default:null,validator:function(n){return["bottom-left","bottom-right","top-left","top-right"].indexOf(n)>-1}}},setup:function(n,l){var h=l.attrs,_=po.familyPrefix,g=Hi(function(){return Dp("classes",[].concat(wx(n.counter?[_+"-layers-counter"]:[]),wx(n.position?[_+"-layers-"+n.position]:[])))}),w=Hi(function(){return Dp("transform",typeof n.transform=="string"?zC.transform(n.transform):n.transform)}),s=Hi(function(){var O=mU(n.value.toString(),eg({},w.value,g.value)),k=O.abstract;return n.counter&&(k[0].attributes.class=k[0].attributes.class.replace("fa-layers-text","")),k[0]}),C=Hi(function(){return Ex(s.value,{},h)});return function(){return C.value}}});/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var l8={prefix:"fas",iconName:"angle-down",icon:[320,512,[],"f107","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]},c8={prefix:"fas",iconName:"angle-left",icon:[256,512,[],"f104","M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"]},u8={prefix:"fas",iconName:"angle-right",icon:[256,512,[],"f105","M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"]},h8={prefix:"fas",iconName:"angle-up",icon:[320,512,[],"f106","M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"]},f8={prefix:"fas",iconName:"brain",icon:[576,512,[],"f5dc","M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"]},d8={prefix:"fas",iconName:"check",icon:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"]},p8={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},m8={prefix:"fas",iconName:"chevron-left",icon:[320,512,[],"f053","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"]},_8={prefix:"fas",iconName:"chevron-right",icon:[320,512,[],"f054","M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"]},g8={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"]},y8={prefix:"fas",iconName:"clock",icon:[512,512,[],"f017","M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"]},v8={prefix:"fas",iconName:"dollar-sign",icon:[288,512,[],"f155","M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"]},x8={prefix:"fas",iconName:"euro-sign",icon:[320,512,[],"f153","M310.706 413.765c-1.314-6.63-7.835-10.872-14.424-9.369-10.692 2.439-27.422 5.413-45.426 5.413-56.763 0-101.929-34.79-121.461-85.449h113.689a12 12 0 0 0 11.708-9.369l6.373-28.36c1.686-7.502-4.019-14.631-11.708-14.631H115.22c-1.21-14.328-1.414-28.287.137-42.245H261.95a12 12 0 0 0 11.723-9.434l6.512-29.755c1.638-7.484-4.061-14.566-11.723-14.566H130.184c20.633-44.991 62.69-75.03 117.619-75.03 14.486 0 28.564 2.25 37.851 4.145 6.216 1.268 12.347-2.498 14.002-8.623l11.991-44.368c1.822-6.741-2.465-13.616-9.326-14.917C290.217 34.912 270.71 32 249.635 32 152.451 32 74.03 92.252 45.075 176H12c-6.627 0-12 5.373-12 12v29.755c0 6.627 5.373 12 12 12h21.569c-1.009 13.607-1.181 29.287-.181 42.245H12c-6.627 0-12 5.373-12 12v28.36c0 6.627 5.373 12 12 12h30.114C67.139 414.692 145.264 480 249.635 480c26.301 0 48.562-4.544 61.101-7.788 6.167-1.595 10.027-7.708 8.788-13.957l-8.818-44.49z"]},b8={prefix:"fas",iconName:"eye",icon:[576,512,[],"f06e","M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"]},w8={prefix:"fas",iconName:"file-alt",icon:[384,512,[],"f15c","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"]},E8={prefix:"fas",iconName:"lira-sign",icon:[384,512,[],"f195","M371.994 256h-48.019C317.64 256 312 260.912 312 267.246 312 368 230.179 416 144 416V256.781l134.603-29.912A12 12 0 0 0 288 215.155v-40.976c0-7.677-7.109-13.38-14.603-11.714L144 191.219V160.78l134.603-29.912A12 12 0 0 0 288 119.154V78.179c0-7.677-7.109-13.38-14.603-11.714L144 95.219V44c0-6.627-5.373-12-12-12H76c-6.627 0-12 5.373-12 12v68.997L9.397 125.131A12 12 0 0 0 0 136.845v40.976c0 7.677 7.109 13.38 14.603 11.714L64 178.558v30.439L9.397 221.131A12 12 0 0 0 0 232.845v40.976c0 7.677 7.109 13.38 14.603 11.714L64 274.558V468c0 6.627 5.373 12 12 12h79.583c134.091 0 223.255-77.834 228.408-211.592.261-6.782-5.211-12.408-11.997-12.408z"]},T8={prefix:"fas",iconName:"lock",icon:[448,512,[],"f023","M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"]},A8={prefix:"fas",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"]},S8={prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},C8={prefix:"fas",iconName:"question",icon:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"]},I8={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"]},M8={prefix:"fas",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]},k8={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]},L8={prefix:"fas",iconName:"unlock",icon:[448,512,[],"f09c","M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"]},P8={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},D8={prefix:"fas",iconName:"user-friends",icon:[640,512,[],"f500","M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"]},O8={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"]},z8={prefix:"fas",iconName:"won-sign",icon:[576,512,[],"f159","M564 192c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-48l18.6-80.6c1.7-7.5-4-14.7-11.7-14.7h-46.1c-5.7 0-10.6 4-11.7 9.5L450.7 128H340.8l-19.7-86c-1.3-5.5-6.1-9.3-11.7-9.3h-44c-5.6 0-10.4 3.8-11.7 9.3l-20 86H125l-17.5-85.7c-1.1-5.6-6.1-9.6-11.8-9.6H53.6c-7.7 0-13.4 7.1-11.7 14.6L60 128H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h62.3l7.2 32H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h83.9l40.9 182.6c1.2 5.5 6.1 9.4 11.7 9.4h56.8c5.6 0 10.4-3.9 11.7-9.3L259.3 288h55.1l42.4 182.7c1.3 5.4 6.1 9.3 11.7 9.3h56.8c5.6 0 10.4-3.9 11.7-9.3L479.1 288H564c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-70.1l7.4-32zM183.8 342c-6.2 25.8-6.8 47.2-7.3 47.2h-1.1s-1.7-22-6.8-47.2l-11-54h38.8zm27.5-118h-66.8l-6.5-32h80.8zm62.9 0l2-8.6c1.9-8 3.5-16 4.8-23.4h11.8c1.3 7.4 2.9 15.4 4.8 23.4l2 8.6zm130.9 118c-5.1 25.2-6.8 47.2-6.8 47.2h-1.1c-.6 0-1.1-21.4-7.3-47.2l-12.4-54h39.1zm25.2-118h-67.4l-7.3-32h81.6z"]},R8={prefix:"fas",iconName:"yen-sign",icon:[384,512,[],"f157","M351.2 32h-65.3c-4.6 0-8.8 2.6-10.8 6.7l-55.4 113.2c-14.5 34.7-27.1 71.9-27.1 71.9h-1.3s-12.6-37.2-27.1-71.9L108.8 38.7c-2-4.1-6.2-6.7-10.8-6.7H32.8c-9.1 0-14.8 9.7-10.6 17.6L102.3 200H44c-6.6 0-12 5.4-12 12v32c0 6.6 5.4 12 12 12h88.2l19.8 37.2V320H44c-6.6 0-12 5.4-12 12v32c0 6.6 5.4 12 12 12h108v92c0 6.6 5.4 12 12 12h56c6.6 0 12-5.4 12-12v-92h108c6.6 0 12-5.4 12-12v-32c0-6.6-5.4-12-12-12H232v-26.8l19.8-37.2H340c6.6 0 12-5.4 12-12v-32c0-6.6-5.4-12-12-12h-58.3l80.1-150.4c4.3-7.9-1.5-17.6-10.6-17.6z"]},tg={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){var l=1e3,h=6e4,_=36e5,g="millisecond",w="second",s="minute",C="hour",O="day",k="week",D="month",F="quarter",K="year",Se="date",pe="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,H=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},ge=function(Be,ve,He){var ct=String(Be);return!ct||ct.length>=ve?Be:""+Array(ve+1-ct.length).join(He)+Be},ke={s:ge,z:function(Be){var ve=-Be.utcOffset(),He=Math.abs(ve),ct=Math.floor(He/60),Ye=He%60;return(ve<=0?"+":"-")+ge(ct,2,"0")+":"+ge(Ye,2,"0")},m:function Be(ve,He){if(ve.date()<He.date())return-Be(He,ve);var ct=12*(He.year()-ve.year())+(He.month()-ve.month()),Ye=ve.clone().add(ct,D),ht=He-Ye<0,lt=ve.clone().add(ct+(ht?-1:1),D);return+(-(ct+(He-Ye)/(ht?Ye-lt:lt-Ye))||0)},a:function(Be){return Be<0?Math.ceil(Be)||0:Math.floor(Be)},p:function(Be){return{M:D,y:K,w:k,d:O,D:Se,h:C,m:s,s:w,ms:g,Q:F}[Be]||String(Be||"").toLowerCase().replace(/s$/,"")},u:function(Be){return Be===void 0}},Ae="en",Pe={};Pe[Ae]=te;var Qe=function(Be){return Be instanceof Xe},wt=function(Be,ve,He){var ct;if(!Be)return Ae;if(typeof Be=="string")Pe[Be]&&(ct=Be),ve&&(Pe[Be]=ve,ct=Be);else{var Ye=Be.name;Pe[Ye]=Be,ct=Ye}return!He&&ct&&(Ae=ct),ct||!He&&Ae},nt=function(Be,ve){if(Qe(Be))return Be.clone();var He=typeof ve=="object"?ve:{};return He.date=Be,He.args=arguments,new Xe(He)},Ee=ke;Ee.l=wt,Ee.i=Qe,Ee.w=function(Be,ve){return nt(Be,{locale:ve.$L,utc:ve.$u,x:ve.$x,$offset:ve.$offset})};var Xe=function(){function Be(He){this.$L=wt(He.locale,null,!0),this.parse(He)}var ve=Be.prototype;return ve.parse=function(He){this.$d=function(ct){var Ye=ct.date,ht=ct.utc;if(Ye===null)return new Date(NaN);if(Ee.u(Ye))return new Date;if(Ye instanceof Date)return new Date(Ye);if(typeof Ye=="string"&&!/Z$/i.test(Ye)){var lt=Ye.match(J);if(lt){var Ut=lt[2]-1||0,qe=(lt[7]||"0").substring(0,3);return ht?new Date(Date.UTC(lt[1],Ut,lt[3]||1,lt[4]||0,lt[5]||0,lt[6]||0,qe)):new Date(lt[1],Ut,lt[3]||1,lt[4]||0,lt[5]||0,lt[6]||0,qe)}}return new Date(Ye)}(He),this.$x=He.x||{},this.init()},ve.init=function(){var He=this.$d;this.$y=He.getFullYear(),this.$M=He.getMonth(),this.$D=He.getDate(),this.$W=He.getDay(),this.$H=He.getHours(),this.$m=He.getMinutes(),this.$s=He.getSeconds(),this.$ms=He.getMilliseconds()},ve.$utils=function(){return Ee},ve.isValid=function(){return this.$d.toString()!==pe},ve.isSame=function(He,ct){var Ye=nt(He);return this.startOf(ct)<=Ye&&Ye<=this.endOf(ct)},ve.isAfter=function(He,ct){return nt(He)<this.startOf(ct)},ve.isBefore=function(He,ct){return this.endOf(ct)<nt(He)},ve.$g=function(He,ct,Ye){return Ee.u(He)?this[ct]:this.set(Ye,He)},ve.unix=function(){return Math.floor(this.valueOf()/1e3)},ve.valueOf=function(){return this.$d.getTime()},ve.startOf=function(He,ct){var Ye=this,ht=!!Ee.u(ct)||ct,lt=Ee.p(He),Ut=function(Et,sn){var En=Ee.w(Ye.$u?Date.UTC(Ye.$y,sn,Et):new Date(Ye.$y,sn,Et),Ye);return ht?En:En.endOf(O)},qe=function(Et,sn){return Ee.w(Ye.toDate()[Et].apply(Ye.toDate("s"),(ht?[0,0,0,0]:[23,59,59,999]).slice(sn)),Ye)},hn=this.$W,Gt=this.$M,dn=this.$D,Fe="set"+(this.$u?"UTC":"");switch(lt){case K:return ht?Ut(1,0):Ut(31,11);case D:return ht?Ut(1,Gt):Ut(0,Gt+1);case k:var bt=this.$locale().weekStart||0,kt=(hn<bt?hn+7:hn)-bt;return Ut(ht?dn-kt:dn+(6-kt),Gt);case O:case Se:return qe(Fe+"Hours",0);case C:return qe(Fe+"Minutes",1);case s:return qe(Fe+"Seconds",2);case w:return qe(Fe+"Milliseconds",3);default:return this.clone()}},ve.endOf=function(He){return this.startOf(He,!1)},ve.$set=function(He,ct){var Ye,ht=Ee.p(He),lt="set"+(this.$u?"UTC":""),Ut=(Ye={},Ye[O]=lt+"Date",Ye[Se]=lt+"Date",Ye[D]=lt+"Month",Ye[K]=lt+"FullYear",Ye[C]=lt+"Hours",Ye[s]=lt+"Minutes",Ye[w]=lt+"Seconds",Ye[g]=lt+"Milliseconds",Ye)[ht],qe=ht===O?this.$D+(ct-this.$W):ct;if(ht===D||ht===K){var hn=this.clone().set(Se,1);hn.$d[Ut](qe),hn.init(),this.$d=hn.set(Se,Math.min(this.$D,hn.daysInMonth())).$d}else Ut&&this.$d[Ut](qe);return this.init(),this},ve.set=function(He,ct){return this.clone().$set(He,ct)},ve.get=function(He){return this[Ee.p(He)]()},ve.add=function(He,ct){var Ye,ht=this;He=Number(He);var lt=Ee.p(ct),Ut=function(Gt){var dn=nt(ht);return Ee.w(dn.date(dn.date()+Math.round(Gt*He)),ht)};if(lt===D)return this.set(D,this.$M+He);if(lt===K)return this.set(K,this.$y+He);if(lt===O)return Ut(1);if(lt===k)return Ut(7);var qe=(Ye={},Ye[s]=h,Ye[C]=_,Ye[w]=l,Ye)[lt]||1,hn=this.$d.getTime()+He*qe;return Ee.w(hn,this)},ve.subtract=function(He,ct){return this.add(-1*He,ct)},ve.format=function(He){var ct=this,Ye=this.$locale();if(!this.isValid())return Ye.invalidDate||pe;var ht=He||"YYYY-MM-DDTHH:mm:ssZ",lt=Ee.z(this),Ut=this.$H,qe=this.$m,hn=this.$M,Gt=Ye.weekdays,dn=Ye.months,Fe=function(sn,En,me,oe){return sn&&(sn[En]||sn(ct,ht))||me[En].substr(0,oe)},bt=function(sn){return Ee.s(Ut%12||12,sn,"0")},kt=Ye.meridiem||function(sn,En,me){var oe=sn<12?"AM":"PM";return me?oe.toLowerCase():oe},Et={YY:String(this.$y).slice(-2),YYYY:this.$y,M:hn+1,MM:Ee.s(hn+1,2,"0"),MMM:Fe(Ye.monthsShort,hn,dn,3),MMMM:Fe(dn,hn),D:this.$D,DD:Ee.s(this.$D,2,"0"),d:String(this.$W),dd:Fe(Ye.weekdaysMin,this.$W,Gt,2),ddd:Fe(Ye.weekdaysShort,this.$W,Gt,3),dddd:Gt[this.$W],H:String(Ut),HH:Ee.s(Ut,2,"0"),h:bt(1),hh:bt(2),a:kt(Ut,qe,!0),A:kt(Ut,qe,!1),m:String(qe),mm:Ee.s(qe,2,"0"),s:String(this.$s),ss:Ee.s(this.$s,2,"0"),SSS:Ee.s(this.$ms,3,"0"),Z:lt};return ht.replace(H,function(sn,En){return En||Et[sn]||lt.replace(":","")})},ve.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ve.diff=function(He,ct,Ye){var ht,lt=Ee.p(ct),Ut=nt(He),qe=(Ut.utcOffset()-this.utcOffset())*h,hn=this-Ut,Gt=Ee.m(this,Ut);return Gt=(ht={},ht[K]=Gt/12,ht[D]=Gt,ht[F]=Gt/3,ht[k]=(hn-qe)/6048e5,ht[O]=(hn-qe)/864e5,ht[C]=hn/_,ht[s]=hn/h,ht[w]=hn/l,ht)[lt]||hn,Ye?Gt:Ee.a(Gt)},ve.daysInMonth=function(){return this.endOf(D).$D},ve.$locale=function(){return Pe[this.$L]},ve.locale=function(He,ct){if(!He)return this.$L;var Ye=this.clone(),ht=wt(He,ct,!0);return ht&&(Ye.$L=ht),Ye},ve.clone=function(){return Ee.w(this.$d,this)},ve.toDate=function(){return new Date(this.valueOf())},ve.toJSON=function(){return this.isValid()?this.toISOString():null},ve.toISOString=function(){return this.$d.toISOString()},ve.toString=function(){return this.$d.toUTCString()},Be}(),ot=Xe.prototype;return nt.prototype=ot,[["$ms",g],["$s",w],["$m",s],["$H",C],["$W",O],["$M",D],["$y",K],["$D",Se]].forEach(function(Be){ot[Be[1]]=function(ve){return this.$g(ve,Be[0],Be[1])}}),nt.extend=function(Be,ve){return Be.$i||(Be(ve,Xe,nt),Be.$i=!0),nt},nt.locale=wt,nt.isDayjs=Qe,nt.unix=function(Be){return nt(1e3*Be)},nt.en=Pe[Ae],nt.Ls=Pe,nt.p={},nt})})(tg);var N8=tg.exports,BC={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){return function(l,h){h.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(BC);var B8=BC.exports,FC={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){var l={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(h,_,g){var w=_.prototype,s=w.format;g.en.formats=l,w.format=function(C){C===void 0&&(C="YYYY-MM-DDTHH:mm:ssZ");var O=this.$locale().formats,k=function(D,F){return D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,Se,pe){var J=pe&&pe.toUpperCase();return Se||F[pe]||l[pe]||F[J].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(H,te,ge){return te||ge.slice(1)})})}(C,O===void 0?{}:O);return s.call(this,k)}}})})(FC);var F8=FC.exports,$C={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){var l={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},h=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,_=/\d\d/,g=/\d\d?/,w=/\d*[^\s\d-_:/()]+/,s={},C=function(pe){return(pe=+pe)+(pe>68?1900:2e3)},O=function(pe){return function(J){this[pe]=+J}},k=[/[+-]\d\d:?(\d\d)?|Z/,function(pe){(this.zone||(this.zone={})).offset=function(J){if(!J||J==="Z")return 0;var H=J.match(/([+-]|\d\d)/g),te=60*H[1]+(+H[2]||0);return te===0?0:H[0]==="+"?-te:te}(pe)}],D=function(pe){var J=s[pe];return J&&(J.indexOf?J:J.s.concat(J.f))},F=function(pe,J){var H,te=s.meridiem;if(te){for(var ge=1;ge<=24;ge+=1)if(pe.indexOf(te(ge,0,J))>-1){H=ge>12;break}}else H=pe===(J?"pm":"PM");return H},K={A:[w,function(pe){this.afternoon=F(pe,!1)}],a:[w,function(pe){this.afternoon=F(pe,!0)}],S:[/\d/,function(pe){this.milliseconds=100*+pe}],SS:[_,function(pe){this.milliseconds=10*+pe}],SSS:[/\d{3}/,function(pe){this.milliseconds=+pe}],s:[g,O("seconds")],ss:[g,O("seconds")],m:[g,O("minutes")],mm:[g,O("minutes")],H:[g,O("hours")],h:[g,O("hours")],HH:[g,O("hours")],hh:[g,O("hours")],D:[g,O("day")],DD:[_,O("day")],Do:[w,function(pe){var J=s.ordinal,H=pe.match(/\d+/);if(this.day=H[0],J)for(var te=1;te<=31;te+=1)J(te).replace(/\[|\]/g,"")===pe&&(this.day=te)}],M:[g,O("month")],MM:[_,O("month")],MMM:[w,function(pe){var J=D("months"),H=(D("monthsShort")||J.map(function(te){return te.substr(0,3)})).indexOf(pe)+1;if(H<1)throw new Error;this.month=H%12||H}],MMMM:[w,function(pe){var J=D("months").indexOf(pe)+1;if(J<1)throw new Error;this.month=J%12||J}],Y:[/[+-]?\d+/,O("year")],YY:[_,function(pe){this.year=C(pe)}],YYYY:[/\d{4}/,O("year")],Z:k,ZZ:k};function Se(pe){var J,H;J=pe,H=s&&s.formats;for(var te=(pe=J.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(nt,Ee,Xe){var ot=Xe&&Xe.toUpperCase();return Ee||H[Xe]||l[Xe]||H[ot].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Be,ve,He){return ve||He.slice(1)})})).match(h),ge=te.length,ke=0;ke<ge;ke+=1){var Ae=te[ke],Pe=K[Ae],Qe=Pe&&Pe[0],wt=Pe&&Pe[1];te[ke]=wt?{regex:Qe,parser:wt}:Ae.replace(/^\[|\]$/g,"")}return function(nt){for(var Ee={},Xe=0,ot=0;Xe<ge;Xe+=1){var Be=te[Xe];if(typeof Be=="string")ot+=Be.length;else{var ve=Be.regex,He=Be.parser,ct=nt.substr(ot),Ye=ve.exec(ct)[0];He.call(Ee,Ye),nt=nt.replace(Ye,"")}}return function(ht){var lt=ht.afternoon;if(lt!==void 0){var Ut=ht.hours;lt?Ut<12&&(ht.hours+=12):Ut===12&&(ht.hours=0),delete ht.afternoon}}(Ee),Ee}}return function(pe,J,H){H.p.customParseFormat=!0,pe&&pe.parseTwoDigitYear&&(C=pe.parseTwoDigitYear);var te=J.prototype,ge=te.parse;te.parse=function(ke){var Ae=ke.date,Pe=ke.utc,Qe=ke.args;this.$u=Pe;var wt=Qe[1];if(typeof wt=="string"){var nt=Qe[2]===!0,Ee=Qe[3]===!0,Xe=nt||Ee,ot=Qe[2];Ee&&(ot=Qe[2]),s=this.$locale(),!nt&&ot&&(s=H.Ls[ot]),this.$d=function(ct,Ye,ht){try{if(["x","X"].indexOf(Ye)>-1)return new Date((Ye==="X"?1e3:1)*ct);var lt=Se(Ye)(ct),Ut=lt.year,qe=lt.month,hn=lt.day,Gt=lt.hours,dn=lt.minutes,Fe=lt.seconds,bt=lt.milliseconds,kt=lt.zone,Et=new Date,sn=hn||(Ut||qe?1:Et.getDate()),En=Ut||Et.getFullYear(),me=0;Ut&&!qe||(me=qe>0?qe-1:Et.getMonth());var oe=Gt||0,rt=dn||0,ee=Fe||0,_e=bt||0;return kt?new Date(Date.UTC(En,me,sn,oe,rt,ee,_e+60*kt.offset*1e3)):ht?new Date(Date.UTC(En,me,sn,oe,rt,ee,_e)):new Date(En,me,sn,oe,rt,ee,_e)}catch{return new Date("")}}(Ae,wt,Pe),this.init(),ot&&ot!==!0&&(this.$L=this.locale(ot).$L),Xe&&Ae!=this.format(wt)&&(this.$d=new Date("")),s={}}else if(wt instanceof Array)for(var Be=wt.length,ve=1;ve<=Be;ve+=1){Qe[1]=wt[ve-1];var He=H.apply(this,Qe);if(He.isValid()){this.$d=He.$d,this.$L=He.$L,this.init();break}ve===Be&&(this.$d=new Date(""))}else ge.call(this,ke)}}})})($C);var $8=$C.exports,AU={exports:{}};(function(t,n){(function(l,h){t.exports=h(tg.exports)})(zs,function(l){function h(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}var _=h(l),g={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xE9._jue._vie._s\xE1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xE1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xEDa",dd:"%d d\xEDas",M:"un mes",MM:"%d meses",y:"un a\xF1o",yy:"%d a\xF1os"},ordinal:function(w){return w+"\xBA"}};return _.default.locale(g,null,!0),g})})(AU);var SU={exports:{}};(function(t,n){(function(l,h){t.exports=h(tg.exports)})(zs,function(l){function h(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}var _=h(l),g={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre".split("_"),monthsShort:"janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(w){return""+w+(w===1?"er":"")}};return _.default.locale(g,null,!0),g})})(SU);var CU={exports:{}};(function(t,n){(function(l,h){t.exports=h()})(zs,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}})})(CU);var Tx={exports:{}};(function(t,n){(function(l,h){h(n)})(zs,function(l){function h(pe,J,H){return J in pe?Object.defineProperty(pe,J,{value:H,enumerable:!0,configurable:!0,writable:!0}):pe[J]=H,pe}function _(pe,J){return function(H){if(Array.isArray(H))return H}(pe)||function(H,te){var ge=H==null?null:typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(ge!=null){var ke,Ae,Pe=[],Qe=!0,wt=!1;try{for(ge=ge.call(H);!(Qe=(ke=ge.next()).done)&&(Pe.push(ke.value),!te||Pe.length!==te);Qe=!0);}catch(nt){wt=!0,Ae=nt}finally{try{Qe||ge.return==null||ge.return()}finally{if(wt)throw Ae}}return Pe}}(pe,J)||function(H,te){if(!!H){if(typeof H=="string")return g(H,te);var ge=Object.prototype.toString.call(H).slice(8,-1);if(ge==="Object"&&H.constructor&&(ge=H.constructor.name),ge==="Map"||ge==="Set")return Array.from(H);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return g(H,te)}}(pe,J)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(pe,J){(J==null||J>pe.length)&&(J=pe.length);for(var H=0,te=new Array(J);H<J;H++)te[H]=pe[H];return te}function w(pe,J){var H,te,ge,ke,Ae=null,Pe=typeof J=="number"?J:(H=_(String(J).split(/(ms|s)/i),2),te=H[0],ge=H[1],ke=ge===void 0?"ms":ge,Number(te)*{ms:1,s:1e3}[ke]),Qe=function(){for(var wt=this,nt=arguments.length,Ee=new Array(nt),Xe=0;Xe<nt;Xe++)Ee[Xe]=arguments[Xe];var ot=function(){Ae=null,pe.apply(wt,Ee)};clearTimeout(Ae),(Ae=setTimeout(ot,Pe))||pe.apply(this,Ee)};return Qe.cancel=function(){clearTimeout(Ae),Ae=null},Qe}function s(pe){return pe.map(function(J){return J.toLowerCase()})}function C(pe,J){var H=(pe.getNamedItem("debounce-events")||{}).value,te=H!==void 0&&H;return s(te?te.split(","):function(ge){return Array.isArray(ge)?ge:ge==null?[]:[ge]}(J))}function O(pe){return pe===""}function k(pe,J){return pe==="Enter"&&(!J.lock||J.unlock)}function D(pe,J,H){return O(pe)&&H.fireonempty&&(J==="Enter"||J===" ")}function F(pe){var J=_(String(pe).split("."),1)[0];return Number(J)>=3?"mounted":"bind"}function K(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"2",J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=J.lock,te=H!==void 0&&H,ge=J.listenTo,ke=ge===void 0?"keyup":ge,Ae=J.defaultTime,Pe=Ae===void 0?"300ms":Ae,Qe=J.fireOnEmpty,wt=Qe!==void 0&&Qe,nt=J.cancelOnEmpty,Ee=nt!==void 0&&nt,Xe=J.trim,ot=Xe!==void 0&&Xe;return h({},F(pe),function(Be,ve){var He=ve.value,ct=ve.arg,Ye=ct===void 0?Pe:ct,ht=ve.modifiers,lt=Object.assign({lock:te,trim:ot,fireonempty:wt,cancelonempty:Ee},ht),Ut=C(Be.attributes,ke),qe=w(function(Gt){He(Gt.target.value,Gt)},Ye);function hn(Gt){var dn=lt.trim?Gt.target.value.trim():Gt.target.value;O(dn)&&lt.cancelonempty?qe.cancel():k(Gt.key,lt)||D(dn,Gt.key,lt)?(qe.cancel(),He(Gt.target.value,Gt)):qe(Gt)}Ut.forEach(function(Gt){Be.addEventListener(Gt,hn)})})}K();var Se={install:function(pe){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pe.directive("debounce",K(pe.version,J))}};l.debounce=w,l.default=Se,l.getDirective=K,Object.defineProperty(l,"__esModule",{value:!0})})})(Tx,Tx.exports);var U8=y5(Tx.exports);export{v8 as $,i8 as A,cy as B,kU as C,LU as D,n8 as E,qo as F,Zw as G,OU as H,r8 as I,s8 as J,o8 as K,KU as L,Df as M,dU as N,d8 as O,P8 as P,h8 as Q,l8 as R,u8 as S,c8 as T,g8 as U,p8 as V,_8 as W,m8 as X,f8 as Y,O8 as Z,I8 as _,HU as a,x8 as a0,z8 as a1,R8 as a2,E8 as a3,w8 as a4,A8 as a5,L8 as a6,y8 as a7,M8 as a8,k8 as a9,Nv as aA,jU as aB,NU as aC,zm as aD,Ky as aE,Nm as aF,za as aG,NP as aH,_f as aI,cs as aJ,T8 as aa,D8 as ab,C8 as ac,b8 as ad,S8 as ae,a8 as af,B8 as ag,F8 as ah,$8 as ai,N8 as aj,GU as ak,vp as al,U8 as am,WU as an,e0 as ao,ZU as ap,XU as aq,cf as ar,af as as,Ds as at,yA as au,FU as av,zs as aw,Tx as ax,UU as ay,Q2 as az,e8 as b,qU as c,Sc as d,zU as e,RU as f,eo as g,PU as h,Yw as i,BU as j,$U as k,QU as l,JU as m,uy as n,Hw as o,VU as p,fP as q,DU as r,Hi as s,MU as t,YU as u,t8 as v,xL as w,Tw as x,x5 as y,$d as z};
