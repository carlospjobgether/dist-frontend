var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var V=(e,s,o)=>s in e?Y(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,y=(e,s)=>{for(var o in s||(s={}))te.call(s,o)&&V(e,o,s[o]);if(T)for(var o of T(s))se.call(s,o)&&V(e,o,s[o]);return e},B=(e,s)=>Z(e,ee(s));import{d as S,k as F,r as L,o as p,f as b,g as v,m as ae,s as re,w as O,al as J,am as oe,an as U,ac as j,ad as k,ag as le,ah as I,e as ne,i as a,h as d,t as z,ao as _,n as D,ap as ie,aa as ce,ab as de,q as _e,p as C,aq as ue,ar as pe}from"./vendor.aec0b27f.js";import{P as he,D as fe}from"./bootstrap.esm.f2db94b8.js";import{_ as M,S as P,D as me}from"./SearchableList.0074d2a3.js";import{_ as x}from"./index.8db448b6.js";const be=S({components:{FilterLayout:M,SearchableList:P},props:{filters_input:{type:Object},disabled:{type:Boolean}},data(){return{options:[],filtersNames:[],filters:[]}},computed:{placeholder_location(){return this.filters_input?this.filters_input.location.name:""}},async created(){this.axios.get("/locations/getContinents").then(e=>{let s=e.data.findIndex(i=>i.name=="Other Europe");e.data[s].name="Europe (Other)";let o=e.data[s];e.data.splice(s,1),e.data.splice(5,0,o),this.options=e.data})},methods:B(y({},F("talent",["update_selected_value"])),{save_input(){this.$emit("save_input_to_search")},async filter(e){await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},save_data(e){e.pop();let s=e[e.length-1];this.filter(s)},save_searched_data(e){this.filter(e)},async check_filter_obj(e){await this.axios.get("/locations/by-ids",{params:{locations:[e]}}).then(s=>{let o=[...s.data.contients,...s.data.countries,...s.data.regions,...s.data.cities];if(console.log(o),o.length>0){let i={type:"selected_searchable_location",value:o[0].name,id:o[0]._id};this.update_selected_value(i)}})}})}),ve={class:"list_container searchable_list_searchbar"};function ge(e,s,o,i,r,u){const h=L("SearchableList");return p(),b("div",ve,[v(h,{options:e.options,requestLevel:["/locations/continent/:id/countries","/locations/country/:id/regions","/locations/region/:id/cities"],allItems:["Worldwide","All countries","All location_regions","All location_cities"],allItemsSelectable:!0,propertyToValidate:"_id",values:[e.filters,e.filters,e.filters,e.filters],placeholder:e.placeholder_location==""?e.$t("SearchBar.location.select"):e.placeholder_location,closeOnSaveSearched:!1,is_location:!0,disabled:e.disabled,onSelectOption:e.save_data,onSelectSearchedOption:e.save_searched_data,onUpdate_input_value:e.save_input},null,8,["options","values","placeholder","disabled","onSelectOption","onSelectSearchedOption","onUpdate_input_value"])])}var ye=x(be,[["render",ge]]);const Se=S({components:{FilterLayout:M,SearchableList:P},props:{clear:{type:Boolean,default:!1}},data(){return{options:[],filter_name:"job_reference",filterObjs:[],job_reference:[],lang:"fr",activeDevfilter:!1,popover_selected_id:""}},computed:y({},ae("talent",["selected_searchable_job_reference","selected_searchable_id"])),watch:{clear:function(){this.clear&&(this.filterObjs=[],this.job_reference=[],this.$emit("clearLock"),this.$emit("activeDevelopment",!1))}},mounted(){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(s){return new he(s)})},async created(){let e=window.localStorage.getItem("userLang");if(e?this.lang=window.localStorage.getItem("userLang")?window.localStorage.getItem("userLang"):"en":(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/job-reference/categories").then(s=>{this.options=s.data}),this.$route.query.job_reference){let s=[];typeof this.$route.query.job_reference=="string"?s.push(this.$route.query.job_reference):s=this.$route.query.job_reference,this.job_reference=this.job_reference.concat(s)}this.filterObjs.length>0&&(this.filterObjs.some(s=>s.job_reference_sub_category=="62312eb71cccbfccd84b3ced")||this.filterObjs.some(s=>s.name_en=="Development"))&&(this.activeDevfilter=!0,this.$emit("activeDevelopment",this.activeDevfilter))},methods:B(y({},F("talent",["update_selected_value"])),{show_popover(e){this.popover_selected_id=e},hide_popover(){this.popover_selected_id=""},async filter(e){await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},clear_oid(e){let s="";return e.includes("0-")&&(s=e.split("-")[1]),s},async check_filter_obj(e){await this.axios.get("/job-reference/by-ids",{params:{job_reference:[e]}}).then(s=>{if(this.filterObjs=s.data,this.filterObjs.length>0){let o={type:"selected_searchable_job_reference",value:this.filterObjs[0].name_en,id:this.filterObjs[0]._id};this.$i18n.locale=="fr"?o.value=s.data[0].name_fr:this.$i18n.locale=="es"?o.value=s.data[0].name_es:this.$i18n.locale=="en"&&(o.value=s.data[0].name_en),this.update_selected_value(o)}})},show_item(e){let s=e.name_en;return this.lang=="fr"?s=e.name_fr:this.lang=="en"?s=e.name_en:this.lang=="es"&&(s=e.name_es),s}})});function je(e,s,o,i,r,u){const h=L("SearchableList"),w=L("FilterLayout");return p(),re(w,null,{default:O(()=>[v(h,{saveObject:!0,options:e.options,values:[[],[],e.job_reference],is_job_reference:!0,requestLevel:["/job-reference/subcategory/:id/categories","/job-reference/reference/:id/subcategory"],allItems:["All categories","All subcategories","All references"],allItemsSelectable:!0,placeholder:e.selected_searchable_job_reference==""?e.$t("SearchBar.job_reference.select"):e.selected_searchable_job_reference,searchURL:"/job-reference/searchJobreference/",onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"])]),_:1})}var $e=x(Se,[["render",je]]);const $=e=>(ue("data-v-0c5d6009"),e=e(),pe(),e),we={id:"search-bar",class:"w-100 bg-white border-0 p-3 rounded-12 fs-14"},Be={class:"row"},Le={class:"col-12 col-lg-11"},Oe={class:"row mx-0"},ke={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0"},Ie={class:"fw-medium mb-2"},De={class:"position-relative right-bar"},Ce={class:"",style:{"padding-top":"12px","padding-bottom":"12px"}},xe={class:"fs-14"},qe={class:"mb-1"},Ae=C(),Ee=$(()=>a("br",null,null,-1)),Ne={class:"fs-10"},Re={class:"mb-1"},Te=C(),Ve=$(()=>a("br",null,null,-1)),Fe={class:"fs-10"},Je={class:"mb-1"},Ue=C(),ze=$(()=>a("br",null,null,-1)),Me={class:"fs-10"},Pe={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0 z-index-2"},We={class:"fw-medium mb-2"},Ge={class:"position-relative right-bar"},He={class:"col-12 col-md-6 col-lg-4 offset-md-3 offset-lg-0 mt-md-2 mt-lg-0"},Ke={class:"fw-medium mb-2"},Qe={class:"position-relative"},Xe={key:0,class:"position-relative"},Ye={class:"dropdown-menu w-100 show","aria-labelledby":"btn_search"},Ze=["onClick"],et={class:"col-12 col-md-4 col-lg-1 offset-md-4 offset-lg-0 mt-5 pt-4 mt-lg-0 px-4 px-md-3 d-flex align-items-end search_button_container"},tt={class:"d-lg-none"},st=$(()=>a("i",{class:"ms-2 ms-lg-0 fas fa-search fs-20 align-middle"},null,-1)),at=S({setup(e){const s=J();oe();const o=U();j(null);const i=j(null);let r=k({remote:"",location:{name:"",id:""},job_reference:{name:"",id:""}}),u=window.localStorage.getItem("userLang");u||(u=navigator.language,u.includes("es")||u.includes("fr")),le(()=>{const t=document.getElementById("loading");t&&(t.style.display="none"),[].slice.call(document.querySelectorAll(".search-bar__dropdown-toggle")).map(function(l){return new fe(l)})});const h=I(()=>r.remote=="nomad"&&r.job_reference.id!=""||r.remote!=""&&r.location.id!=""&&r.job_reference.id!=""),w=I(()=>r.remote=="nomad"),W=()=>{var t;r.remote="nomad",r.location.name="Worldwide",r.location.id="",E.value="",i.value&&((t=i.value)==null||t.focus())},q=(t,n)=>{r[t].name=o.state.talent[n],r[t].id=o.state.talent.selected_searchable_id,t=="location"&&o.commit("talent/clear_selected_value")},A=t=>{var n;r.remote=t,i.value&&((n=i.value)==null||n.focus())};let E=j(""),g=k([]);const G=t=>{var n,l;t.value!="undefined"&&(((n=t.value)==null?void 0:n.length)==3?r.location.name=`${t[0].name}`:((l=t.value)==null?void 0:l.length)==4&&(r.location.name=`${t[0].name}`),r.location.id=t[0].id)},H=(t,n)=>{var c,f,m,R;let l="";return t.region?l=`${(f=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:f.name}, ${(m=t==null?void 0:t.region)==null?void 0:m.name}, ${t==null?void 0:t.name}`:t.country?l=`${(R=t==null?void 0:t.country)==null?void 0:R.name}, ${t==null?void 0:t.name}`:l=t==null?void 0:t.name,l},N=()=>{E.value="",g.splice(0)},K=(t,n)=>{var l,c,f,m;r.location.name=t.name,r.location.id=t._id,t.region?r.location.name=`${t==null?void 0:t.name}, ${(l=t==null?void 0:t.region)==null?void 0:l.name}, ${(f=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:f.name}`:t.country?r.location.name=`${(m=t==null?void 0:t.country)==null?void 0:m.name}, ${t==null?void 0:t.name}`:r.location.name=t==null?void 0:t.name,N()};j("");let Q=k([]);const X=()=>{if(h.value){const t={};r.remote!=""&&(t.remote=r.remote),r.job_reference.id!=""&&(t.jobReferences=r.job_reference.id),r.location.id!=""&&(t.locations=r.location.id),t.refresh=!0,s.push({name:"TalentOpportunities",query:t})}};return(t,n)=>{const l=ne("t");return p(),b("div",we,[a("div",Be,[a("div",Le,[a("div",Oe,[a("div",ke,[d(a("p",Ie,null,512),[[l,"SearchBar.remote.title"]]),a("div",De,[v(me,{class:"remote"},{dropdown_btn:O(()=>[a("div",Ce,[a("span",xe,z(_(r).remote==""?t.$t("SearchBar.remote.select"):t.$t(`SearchBar.remote.${_(r).remote}_title`)),1)])]),dropdown_li:O(()=>[a("ul",null,[a("li",{class:"my-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:n[0]||(n[0]=c=>A("full_remote"))},[d(a("span",qe,null,512),[[l,"SearchBar.remote.full_remote_title"]]),Ae,Ee,d(a("span",Ne,null,512),[[l,"SearchBar.remote.full_remote_sub-title"]])]),a("li",{class:"py-2 mb-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:n[1]||(n[1]=c=>A("hybrid"))},[d(a("span",Re,null,512),[[l,"SearchBar.remote.hybrid_title"]]),Te,Ve,d(a("span",Fe,null,512),[[l,"SearchBar.remote.hybrid_sub-title"]])]),a("li",{class:"mb-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:W},[d(a("span",Je,null,512),[[l,"SearchBar.remote.nomad_title"]]),Ue,ze,d(a("span",Me,null,512),[[l,"SearchBar.remote.nomad_sub-title"]])])])]),_:1})])]),a("div",Pe,[d(a("p",We,null,512),[[l,"SearchBar.job_reference.title"]]),a("div",Ge,[v($e,{onSave_input_to_search:n[2]||(n[2]=c=>q("job_reference","selected_searchable_job_reference"))}),a("div",{class:D(["position-absolute custom-scroll w-100",{h_0:_(Q).length<=0}])},null,2)])]),a("div",He,[d(a("p",Ke,null,512),[[l,"SearchBar.location.title"]]),a("div",Qe,[v(ye,{disabled:_(w),filters_input:_(r),onSelect_location:G,onSave_input_to_search:n[3]||(n[3]=c=>q("location","selected_searchable_location"))},null,8,["disabled","filters_input"]),a("div",{class:D(["position-absolute custom-scroll w-100",{h_0:_(g).length<=0}])},[_(g).length>0?d((p(),b("div",Xe,[a("ul",Ye,[(p(!0),b(ce,null,de(_(g),(c,f)=>(p(),b("li",{class:"clickable break-spaces dropdown-item fs-14",onClick:m=>K(c)},[a("span",null,z(H(c)),1)],8,Ze))),256))])],512)),[[_(ie.exports.directive),N]]):_e("",!0)],2)])])])]),a("div",et,[a("button",{type:"button",class:D(["btn text-white bg-green-app w-100 px-2 py-2 search-bar-button",{disabled:!_(h)}]),style:{height:"47px"},onClick:X},[d(a("span",tt,null,512),[[l,"SearchBar.search_button"]]),st],2)])])])}}});var rt=x(at,[["__scopeId","data-v-0c5d6009"]]);const ot={id:"searh_bar_page",class:"container"},lt={class:"row"},nt={class:"col-12 col-md-12 col-xl-10 offset-xl-1"},pt=S({setup(e){const s=U(),o=J();s.commit("setLayout","BaseLayout");const i=I(()=>s.state.auth.userData);return i.value.filters&&i.value.filters.length>0&&o.push({name:"TalentOpportunities"}),(r,u)=>(p(),b("div",ot,[a("div",lt,[a("div",nt,[v(rt)])])]))}});export{pt as default};
