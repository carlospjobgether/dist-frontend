var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var V=(e,s,o)=>s in e?Y(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,y=(e,s)=>{for(var o in s||(s={}))te.call(s,o)&&V(e,o,s[o]);if(T)for(var o of T(s))se.call(s,o)&&V(e,o,s[o]);return e},L=(e,s)=>Z(e,ee(s));import{d as S,l as F,r as O,o as p,f as b,g as v,m as ae,s as re,w as k,al as J,am as oe,an as U,ac as j,ad as I,ag as le,ah as x,e as ne,i as a,h as d,n as $,ao as _,t as z,ap as ie,aa as ce,ab as de,j as _e,q as D,aq as ue,ar as pe}from"./vendor.fddf60e6.js";import{P as he,D as me}from"./bootstrap.esm.29a9ab19.js";import{_ as M,S as P,D as fe}from"./SearchableList.17540919.js";import{_ as C}from"./index.701aed9d.js";const be=S({components:{FilterLayout:M,SearchableList:P},props:{filters_input:{type:Object},disabled:{type:Boolean}},data(){return{options:[],filtersNames:[],filters:[]}},computed:{placeholder_location(){return this.filters_input?this.filters_input.location.name:""}},async created(){this.axios.get("/locations/getContinents").then(e=>{let s=e.data.findIndex(i=>i.name=="Other Europe");e.data[s].name="Europe (Other)";let o=e.data[s];e.data.splice(s,1),e.data.splice(5,0,o),this.options=e.data})},methods:L(y({},F("talent",["update_selected_value"])),{save_input(){this.$emit("save_input_to_search")},async filter(e){await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},save_data(e){this.filter(e)},save_searched_data(e){this.filter(e)},async check_filter_obj(e){await this.axios.get("/locations/by-ids",{params:{locations:[e]}}).then(s=>{let o=[...s.data.contients,...s.data.countries,...s.data.regions,...s.data.cities];if(o.length>0){let i={type:"selected_searchable_location",value:o[0].name,id:o[0]._id};this.update_selected_value(i)}})}})}),ve={class:"list_container searchable_list_searchbar"};function ge(e,s,o,i,r,u){const h=O("SearchableList");return p(),b("div",ve,[v(h,{options:e.options,requestLevel:["/locations/continent/:id/countries","/locations/country/:id/regions","/locations/region/:id/cities"],allItems:["Worldwide","All countries","All location_regions","All location_cities"],allItemsSelectable:!0,propertyToValidate:"_id",values:[e.filters,e.filters,e.filters,e.filters],placeholder:e.placeholder_location==""?e.$t("SearchBar.location.select"):e.placeholder_location,closeOnSaveSearched:!1,is_location:!0,is_job_reference:!0,saveObject:!0,disabled:e.disabled,onSelectOption:e.save_data,onSelectSearchedOption:e.save_searched_data,onUpdate_input_value:e.save_input},null,8,["options","values","placeholder","disabled","onSelectOption","onSelectSearchedOption","onUpdate_input_value"])])}var ye=C(be,[["render",ge]]);const Se=S({components:{FilterLayout:M,SearchableList:P},props:{clear:{type:Boolean,default:!1}},data(){return{options:[],filter_name:"job_reference",filterObjs:[],job_reference:[],lang:"fr",activeDevfilter:!1,popover_selected_id:""}},computed:y({},ae("talent",["selected_searchable_job_reference","selected_searchable_id"])),watch:{clear:function(){this.clear&&(this.filterObjs=[],this.job_reference=[],this.$emit("clearLock"),this.$emit("activeDevelopment",!1))}},mounted(){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(s){return new he(s)})},async created(){let e=window.localStorage.getItem("userLang");if(e?this.lang=window.localStorage.getItem("userLang")?window.localStorage.getItem("userLang"):"en":(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/job-reference/categories").then(s=>{this.options=s.data}),this.$route.query.job_reference){let s=[];typeof this.$route.query.job_reference=="string"?s.push(this.$route.query.job_reference):s=this.$route.query.job_reference,this.job_reference=this.job_reference.concat(s)}this.filterObjs.length>0&&(this.filterObjs.some(s=>s.job_reference_sub_category=="62312eb71cccbfccd84b3ced")||this.filterObjs.some(s=>s.name_en=="Development"))&&(this.activeDevfilter=!0,this.$emit("activeDevelopment",this.activeDevfilter))},methods:L(y({},F("talent",["update_selected_value"])),{show_popover(e){this.popover_selected_id=e},hide_popover(){this.popover_selected_id=""},async filter(e){await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},clear_oid(e){let s="";return e.includes("0-")&&(s=e.split("-")[1]),s},async check_filter_obj(e){await this.axios.get("/job-reference/by-ids",{params:{job_reference:[e]}}).then(s=>{if(this.filterObjs=s.data,this.filterObjs.length>0){let o={type:"selected_searchable_job_reference",value:this.filterObjs[0].name_en,id:this.filterObjs[0]._id};this.$i18n.locale=="fr"?o.value=s.data[0].name_fr:this.$i18n.locale=="es"?o.value=s.data[0].name_es:this.$i18n.locale=="en"&&(o.value=s.data[0].name_en),this.update_selected_value(o)}})},show_item(e){let s=e.name_en;return this.lang=="fr"?s=e.name_fr:this.lang=="en"?s=e.name_en:this.lang=="es"&&(s=e.name_es),s}})});function je(e,s,o,i,r,u){const h=O("SearchableList"),B=O("FilterLayout");return p(),re(B,null,{default:k(()=>[v(h,{saveObject:!0,options:e.options,values:[[],[],e.job_reference],is_job_reference:!0,requestLevel:["/job-reference/subcategory/:id/categories","/job-reference/reference/:id/subcategory"],allItems:["All categories","All subcategories","All references"],allItemsSelectable:!0,placeholder:e.selected_searchable_job_reference==""?e.$t("SearchBar.job_reference.select"):e.selected_searchable_job_reference,searchURL:"/job-reference/searchJobreference/",onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"])]),_:1})}var $e=C(Se,[["render",je]]);const w=e=>(ue("data-v-7693da0d"),e=e(),pe(),e),we={id:"search-bar",class:"w-100 bg-white border-0 p-3 rounded-12 fs-14"},Be={class:"row"},Le={class:"col-12 col-lg-11"},Oe={class:"row mx-0"},ke={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0"},Ie={class:"fw-medium mb-2 text-primary"},xe={class:"position-relative right-bar"},De={class:"",style:{"padding-top":"12px","padding-bottom":"12px"}},Ce={class:"mb-1"},qe=D(),Ae=w(()=>a("br",null,null,-1)),Ee={class:"fs-10"},Ne={class:"mb-1"},Re=D(),Te=w(()=>a("br",null,null,-1)),Ve={class:"fs-10"},Fe={class:"mb-1"},Je=D(),Ue=w(()=>a("br",null,null,-1)),ze={class:"fs-10"},Me={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0 z-index-2"},Pe={class:"fw-medium mb-2 text-primary"},We={class:"position-relative right-bar"},Ge={class:"col-12 col-md-6 col-lg-4 offset-md-3 offset-lg-0 mt-md-2 mt-lg-0"},He={class:"fw-medium mb-2 text-primary"},Ke={class:"position-relative right-bar"},Qe={key:0,class:"position-relative"},Xe={class:"dropdown-menu w-100 show","aria-labelledby":"btn_search"},Ye=["onClick"],Ze={class:"col-12 col-md-4 col-lg-1 offset-md-4 offset-lg-0 mt-5 pt-4 mt-lg-0 px-4 px-md-3 d-flex align-items-center search_button_container"},et={class:"d-lg-none"},tt=w(()=>a("i",{class:"ms-2 ms-lg-0 fas fa-search fs-20 align-middle"},null,-1)),st=S({setup(e){const s=J();oe();const o=U();j(null);const i=j(null);let r=I({remote:"",location:{name:"",id:""},job_reference:{name:"",id:""}}),u=window.localStorage.getItem("userLang");u||(u=navigator.language,u.includes("es")||u.includes("fr")),le(()=>{const t=document.getElementById("loading");t&&(t.style.display="none"),[].slice.call(document.querySelectorAll(".search-bar__dropdown-toggle")).map(function(l){return new me(l)})});const h=x(()=>r.remote=="nomad"&&r.job_reference.id!=""||r.remote!=""&&r.location.id!=""&&r.job_reference.id!=""),B=x(()=>r.remote=="nomad"),W=()=>{var t;r.remote="nomad",r.location.name="Worldwide",r.location.id="",E.value="",i.value&&((t=i.value)==null||t.focus())},q=(t,n)=>{r[t].name=o.state.talent[n],r[t].id=o.state.talent.selected_searchable_id,t=="location"&&o.commit("talent/clear_selected_value")},A=t=>{var n;r.remote=t,i.value&&((n=i.value)==null||n.focus())};let E=j(""),g=I([]);const G=t=>{var n,l;t.value!="undefined"&&(((n=t.value)==null?void 0:n.length)==3?r.location.name=`${t[0].name}`:((l=t.value)==null?void 0:l.length)==4&&(r.location.name=`${t[0].name}`),r.location.id=t[0].id)},H=(t,n)=>{var c,m,f,R;let l="";return t.region?l=`${(m=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:m.name}, ${(f=t==null?void 0:t.region)==null?void 0:f.name}, ${t==null?void 0:t.name}`:t.country?l=`${(R=t==null?void 0:t.country)==null?void 0:R.name}, ${t==null?void 0:t.name}`:l=t==null?void 0:t.name,l},N=()=>{E.value="",g.splice(0)},K=(t,n)=>{var l,c,m,f;r.location.name=t.name,r.location.id=t._id,t.region?r.location.name=`${t==null?void 0:t.name}, ${(l=t==null?void 0:t.region)==null?void 0:l.name}, ${(m=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:m.name}`:t.country?r.location.name=`${(f=t==null?void 0:t.country)==null?void 0:f.name}, ${t==null?void 0:t.name}`:r.location.name=t==null?void 0:t.name,N()};j("");let Q=I([]);const X=()=>{if(h.value){const t={};r.remote!=""&&(t.remote=r.remote),r.job_reference.id!=""&&(t.jobReferences=r.job_reference.id),r.location.id!=""&&(t.locations=r.location.id),t.refresh=!0,s.push({name:"TalentOpportunities",query:t})}};return(t,n)=>{const l=ne("t");return p(),b("div",we,[a("div",Be,[a("div",Le,[a("div",Oe,[a("div",ke,[d(a("p",Ie,null,512),[[l,"SearchBar.remote.title"]]),a("div",xe,[v(fe,{id:"remote"},{dropdown_btn:k(()=>[a("div",De,[a("span",{class:$(["fs-14",{"text-select":_(r).remote!=""}])},z(_(r).remote==""?t.$t("SearchBar.remote.select"):t.$t(`SearchBar.remote.${_(r).remote}_title`)),3)])]),dropdown_li:k(()=>[a("ul",null,[a("li",{class:"my-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:n[0]||(n[0]=c=>A("full_remote"))},[d(a("span",Ce,null,512),[[l,"SearchBar.remote.full_remote_title"]]),qe,Ae,d(a("span",Ee,null,512),[[l,"SearchBar.remote.full_remote_sub-title"]])]),a("li",{class:"py-2 mb-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:n[1]||(n[1]=c=>A("hybrid"))},[d(a("span",Ne,null,512),[[l,"SearchBar.remote.hybrid_title"]]),Re,Te,d(a("span",Ve,null,512),[[l,"SearchBar.remote.hybrid_sub-title"]])]),a("li",{class:"mb-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:W},[d(a("span",Fe,null,512),[[l,"SearchBar.remote.nomad_title"]]),Je,Ue,d(a("span",ze,null,512),[[l,"SearchBar.remote.nomad_sub-title"]])])])]),_:1})])]),a("div",Me,[d(a("p",Pe,null,512),[[l,"SearchBar.job_reference.title"]]),a("div",We,[v($e,{class:"text-select",onSave_input_to_search:n[2]||(n[2]=c=>q("job_reference","selected_searchable_job_reference"))}),a("div",{class:$(["position-absolute custom-scroll w-100",{h_0:_(Q).length<=0}])},null,2)])]),a("div",Ge,[d(a("p",He,null,512),[[l,"SearchBar.location.title"]]),a("div",Ke,[v(ye,{disabled:_(B),filters_input:_(r),onSelect_location:G,onSave_input_to_search:n[3]||(n[3]=c=>q("location","selected_searchable_location"))},null,8,["disabled","filters_input"]),a("div",{class:$(["position-absolute custom-scroll w-100",{h_0:_(g).length<=0}])},[_(g).length>0?d((p(),b("div",Qe,[a("ul",Xe,[(p(!0),b(ce,null,de(_(g),(c,m)=>(p(),b("li",{class:"clickable break-spaces dropdown-item fs-14",onClick:f=>K(c)},[a("span",null,z(H(c)),1)],8,Ye))),256))])],512)),[[_(ie.exports.directive),N]]):_e("v-if",!0)],2)])])])]),a("div",Ze,[a("button",{type:"button",class:$(["btn text-white bg-green-app w-100 px-2 py-2 search-bar-button",{disabled:!_(h)}]),style:{height:"47px"},onClick:X},[d(a("span",et,null,512),[[l,"SearchBar.search_button"]]),tt],2)])])])}}});var at=C(st,[["__scopeId","data-v-7693da0d"]]);const rt={id:"searh_bar_page",class:"container"},ot={class:"row"},lt={class:"col-12 col-md-12 col-xl-12 ms-md-auto me-md-auto ms-auto me-auto"},ut=S({setup(e){const s=U(),o=J();s.commit("setLayout","BaseLayout");const i=x(()=>s.state.auth.userData);return i.value.filters&&i.value.filters.length>0&&o.push({name:"TalentOpportunities"}),(r,u)=>(p(),b("div",rt,[a("div",ot,[a("div",lt,[v(at)])])]))}});export{ut as default};
