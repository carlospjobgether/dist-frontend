var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var R=(e,s,l)=>s in e?Y(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l,j=(e,s)=>{for(var l in s||(s={}))te.call(s,l)&&R(e,l,s[l]);if(N)for(var l of N(s))se.call(s,l)&&R(e,l,s[l]);return e},S=(e,s)=>Z(e,ee(s));import{d as $,l as V,r as O,o as h,f as b,g as v,m as ae,ao as re,G as le,w as L,ap as W,aq as ne,u as z,ar as w,as as x,x as oe,at as ie,s as D,e as ce,i as a,h as _,n as g,z as i,t as J,au as de,F as _e,av as ue,j as he,q as C,C as pe,D as me}from"./vendor.1286b3e0.js";import{_ as U,S as M,D as fe}from"./SearchableList.fb87bad5.js";import{_ as I}from"./index.4a6239e3.js";const be=$({components:{FilterLayout:U,SearchableList:M},props:{filters_input:{type:Object},disabled:{type:Boolean}},data(){return{options:[],filtersNames:[],filters:[],place_holder_location_text:""}},computed:{placeholder_location(){return this.filters_input.name=="Worldwide"||this.filters_input.location.name=="Worldwide"?this.filters_input.location.name:this.place_holder_location_text},location_selected(){return this.filters_input.location.id?[this.filters_input.location.id]:[]}},async created(){this.axios.get("/locations/getContinents",{params:{lang:this.$i18n.locale}}).then(e=>{this.options=e.data})},mounted(){},methods:S(j({},V("talent",["update_selected_value"])),{save_input(){this.$emit("save_input_to_search")},save_placeholder(e){this.place_holder_location_text=e},async filter(e){await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},save_data(e){this.filter(e)},save_searched_data(e){this.filter(e)},async check_filter_obj(e){await this.axios.get("/locations/by-ids",{params:{locations:[e],lang:this.$i18n.locale}}).then(s=>{let l=[...s.data.contients,...s.data.countries,...s.data.regions,...s.data.cities];if(l.length>0){let d={type:"selected_searchable_location",value:l[0].name,id:l[0]._id};this.update_selected_value(d)}})}})}),ve={class:"list_container searchable_list_searchbar"};function ge(e,s,l,d,r,u){const p=O("SearchableList");return h(),b("div",ve,[v(p,{id:"infinite-list",options:e.options,requestLevel:["/locations/continent/:id/countries","/locations/country/:id/regions","/locations/region/:id/cities"],allItems:["Worldwide","all_countries","all_location_regions","all_location_cities"],allItemsSelectable:!0,propertyToValidate:"_id",values:[e.location_selected,e.location_selected,e.location_selected,e.location_selected],placeholder:e.placeholder_location==""?e.$t("SearchBar.location.select"):e.placeholder_location,closeOnSaveSearched:!1,is_location:!0,is_job_reference:!0,is_location_search_engine:!0,saveObject:!0,disabled:e.disabled,show_check_box:!1,onSelectOption:e.save_data,onSelectSearchedOption:e.save_searched_data,onUpdate_input_value:e.save_input,onSave_placeholder:e.save_placeholder},null,8,["options","values","placeholder","disabled","onSelectOption","onSelectSearchedOption","onUpdate_input_value","onSave_placeholder"])])}var ye=I(be,[["render",ge]]);const je=$({components:{FilterLayout:U,SearchableList:M},props:{clear:{type:Boolean,default:!1},select_item:{type:Object}},data(){return{options:[],filter_name:"job_reference",filterObjs:[],job_reference:[],lang:"fr",activeDevfilter:!1,popover_selected_id:""}},computed:S(j({},ae("talent",["selected_searchable_job_reference","selected_searchable_id"])),{translate_all_categories(){return""},translate_all_subcategories(){return this.lang=="fr"?"Toutes les sous-cat\xE9gories":this.lang=="es"?"Todas las subcategor\xEDas":"All subcategories"},translate_all_references(){return this.lang=="fr"?"Toutes les r\xE9f\xE9rences":this.lang=="es"?"Todas las referencias":"All references"},jobreference_selected(){return this.select_item.id?[this.select_item.id]:[]}}),watch:{clear:function(){this.clear&&(this.filterObjs=[],this.job_reference=[],this.$emit("clearLock"),this.$emit("activeDevelopment",!1))}},mounted(){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(s){return new re(s)})},async created(){let e=document.documentElement.lang;if(e?this.lang=document.documentElement.lang?document.documentElement.lang:"en":(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/job-reference/categories").then(s=>{this.options=s.data}),this.$route.query.job_reference){let s=[];typeof this.$route.query.job_reference=="string"?s.push(this.$route.query.job_reference):s=this.$route.query.job_reference,this.job_reference=this.job_reference.concat(s)}this.filterObjs.length>0&&(this.filterObjs.some(s=>s.job_reference_sub_category=="62312eb71cccbfccd84b3ced")||this.filterObjs.some(s=>s.name_en=="Development"))&&(this.activeDevfilter=!0,this.$emit("activeDevelopment",this.activeDevfilter))},methods:S(j({},V("talent",["update_selected_value"])),{show_popover(e){this.popover_selected_id=e},hide_popover(){this.popover_selected_id=""},async filter(e){e.name_en.includes("All subcategories")?e._id=e.job_reference_category:e.name_en.includes("All references")&&(e._id=e.job_reference_sub_category),await this.check_filter_obj(e._id.toString()),await this.$emit("save_input_to_search")},clear_oid(e){let s="";return e.includes("0-")&&(s=e.split("-")[1]),s},async check_filter_obj(e){await this.axios.get("/job-reference/by-ids",{params:{job_reference:[e]}}).then(s=>{if(this.filterObjs=s.data,this.filterObjs.length>0){let l={type:"selected_searchable_job_reference",value:this.filterObjs[0].name_en,id:this.filterObjs[0]._id};this.$i18n.locale=="fr"?l.value=s.data[0].name_fr:this.$i18n.locale=="es"?l.value=s.data[0].name_es:this.$i18n.locale=="en"&&(l.value=s.data[0].name_en),this.update_selected_value(l)}})},show_item(e){let s=e.name_en;return this.lang=="fr"?s=e.name_fr:this.lang=="en"?s=e.name_en:this.lang=="es"&&(s=e.name_es),s}})});function Se(e,s,l,d,r,u){const p=O("SearchableList"),k=O("FilterLayout");return h(),le(k,null,{default:L(()=>[v(p,{saveObject:!0,options:e.options,values:[e.jobreference_selected,e.jobreference_selected,e.jobreference_selected],is_job_reference:!0,requestLevel:["/job-reference/subcategory/:id/categories","/job-reference/reference/:id/subcategory"],allItems:[e.translate_all_categories,e.translate_all_subcategories,e.translate_all_references],allItemsSelectable:!0,placeholder:e.selected_searchable_job_reference==""?e.$t("SearchBar.job_reference.select"):e.selected_searchable_job_reference,searchURL:"/job-reference/searchJobreference/",show_check_box:!1,onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","allItems","placeholder","onSelectOption","onSelectSearchedOption"])]),_:1})}var $e=I(je,[["render",Se]]);const B=e=>(pe("data-v-7693da0d"),e=e(),me(),e),we={id:"search-bar",class:"w-100 bg-white border-0 p-3 rounded-12 fs-14"},Be={class:"row"},ke={class:"col-12 col-lg-11"},Oe={class:"row mx-0"},Le={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0"},xe={class:"fw-medium mb-2 text-primary"},De={class:"position-relative right-bar"},Ce={class:"",style:{"padding-top":"12px","padding-bottom":"12px"}},Ie={class:"mb-1"},Ee=C(),qe=B(()=>a("br",null,null,-1)),Te={class:"fs-10"},Ae={class:"mb-1"},Fe=C(),Ne=B(()=>a("br",null,null,-1)),Re={class:"fs-10"},Ve={class:"mb-1"},We=C(),ze=B(()=>a("br",null,null,-1)),Je={class:"fs-10"},Ue={class:"col-12 col-md-6 col-lg-4 mb-3 mb-lg-0 z-index-2"},Me={class:"fw-medium mb-2 text-primary"},Ge={class:"position-relative right-bar"},Pe={class:"col-12 col-md-6 col-lg-4 offset-md-3 offset-lg-0 mt-md-2 mt-lg-0"},He={class:"fw-medium mb-2 text-primary"},Ke={class:"position-relative right-bar"},Qe={key:0,class:"position-relative"},Xe={class:"dropdown-menu w-100 show","aria-labelledby":"btn_search"},Ye=["onClick"],Ze={class:"col-12 col-md-4 col-lg-1 offset-md-4 offset-lg-0 mt-5 pt-4 mt-lg-0 px-4 px-md-3 d-flex align-items-center search_button_container"},et={class:"d-lg-none"},tt=B(()=>a("i",{class:"ms-2 ms-lg-0 fas fa-search fs-20 align-middle"},null,-1)),st=$({setup(e){const s=W();ne();const l=z();w(null);const d=w(null);let r=x({remote:"",location:{name:"",id:""},job_reference:{name:"",id:""}}),u=document.documentElement.lang;u||(u=navigator.language,u.includes("es")||u.includes("fr")),oe(()=>{const t=document.getElementById("loading");t&&(t.style.display="none"),[].slice.call(document.querySelectorAll(".search-bar__dropdown-toggle")).map(function(n){return new ie(n)})});const p=D(()=>r.remote=="nomad"&&r.job_reference.id!=""||r.remote!=""&&r.location.id!=""&&r.job_reference.id!=""),k=D(()=>r.remote=="nomad"),G=()=>{var t;r.remote="nomad",r.location.name="Worldwide",r.location.id="",T.value="",d.value&&((t=d.value)==null||t.focus())},E=(t,o)=>{r[t].name=l.state.talent[o],r[t].id=l.state.talent.selected_searchable_id,t=="location"&&l.commit("talent/clear_selected_value")},q=t=>{var o;r.remote=t,d.value&&((o=d.value)==null||o.focus())};let T=w(""),y=x([]);const P=t=>{var o,n;t.value!="undefined"&&(((o=t.value)==null?void 0:o.length)==3?r.location.name=`${t[0].name}`:((n=t.value)==null?void 0:n.length)==4&&(r.location.name=`${t[0].name}`),r.location.id=t[0].id)},H=(t,o)=>{var c,m,f,F;let n="";return t.region?n=`${(m=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:m.name}, ${(f=t==null?void 0:t.region)==null?void 0:f.name}, ${t==null?void 0:t.name}`:t.country?n=`${(F=t==null?void 0:t.country)==null?void 0:F.name}, ${t==null?void 0:t.name}`:n=t==null?void 0:t.name,n},A=()=>{T.value="",y.splice(0)},K=(t,o)=>{var n,c,m,f;r.location.name=t.name,r.location.id=t._id,t.region?r.location.name=`${t==null?void 0:t.name}, ${(n=t==null?void 0:t.region)==null?void 0:n.name}, ${(m=(c=t==null?void 0:t.region)==null?void 0:c.country)==null?void 0:m.name}`:t.country?r.location.name=`${(f=t==null?void 0:t.country)==null?void 0:f.name}, ${t==null?void 0:t.name}`:r.location.name=t==null?void 0:t.name,A()};w("");let Q=x([]);const X=()=>{if(p.value){const t={};r.remote!=""&&(t.remote=r.remote),r.job_reference.id!=""&&(t["meta.jobReferences"]=r.job_reference.id),r.location.id!=""&&(t["meta.locations"]=r.location.id),r.remote=="nomad"&&(t["meta.locations"]="622a659af0bac38678ed1388"),t.refresh=!0,s.push({name:"TalentOpportunities",query:t})}};return(t,o)=>{const n=ce("t");return h(),b("div",we,[a("div",Be,[a("div",ke,[a("div",Oe,[a("div",Le,[_(a("p",xe,null,512),[[n,"SearchBar.remote.title"]]),a("div",De,[v(fe,{id:"remote",class:g({no_dropdown_arrow:i(r).remote!=""})},{dropdown_btn:L(()=>[a("div",Ce,[a("span",{class:g(["fs-14 text-gray",{"text-select":i(r).remote!=""}])},J(i(r).remote==""?t.$t("SearchBar.remote.select"):t.$t(`SearchBar.remote.${i(r).remote}_title`)),3)])]),dropdown_li:L(()=>[a("ul",null,[a("li",{class:"my-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:o[0]||(o[0]=c=>q("full_remote"))},[_(a("span",Ie,null,512),[[n,"SearchBar.remote.full_remote_title"]]),Ee,qe,_(a("span",Te,null,512),[[n,"SearchBar.remote.full_remote_sub-title"]])]),a("li",{class:"py-2 mb-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:o[1]||(o[1]=c=>q("hybrid"))},[_(a("span",Ae,null,512),[[n,"SearchBar.remote.hybrid_title"]]),Fe,Ne,_(a("span",Re,null,512),[[n,"SearchBar.remote.hybrid_sub-title"]])]),a("li",{class:"mb-2 py-2 clickable break-spaces dropdown-item fs-14 rounded",onClick:G},[_(a("span",Ve,null,512),[[n,"SearchBar.remote.nomad_title"]]),We,ze,_(a("span",Je,null,512),[[n,"SearchBar.remote.nomad_sub-title"]])])])]),_:1},8,["class"])])]),a("div",Ue,[_(a("p",Me,null,512),[[n,"SearchBar.job_reference.title"]]),a("div",Ge,[v($e,{class:"text-select",select_item:i(r).job_reference,onSave_input_to_search:o[2]||(o[2]=c=>E("job_reference","selected_searchable_job_reference"))},null,8,["select_item"]),a("div",{class:g(["position-absolute custom-scroll w-100",{h_0:i(Q).length<=0}])},null,2)])]),a("div",Pe,[_(a("p",He,null,512),[[n,"SearchBar.location.title"]]),a("div",Ke,[v(ye,{disabled:i(k),filters_input:i(r),onSelect_location:P,onSave_input_to_search:o[3]||(o[3]=c=>E("location","selected_searchable_location"))},null,8,["disabled","filters_input"]),a("div",{class:g(["position-absolute custom-scroll w-100",{h_0:i(y).length<=0}])},[i(y).length>0?_((h(),b("div",Qe,[a("ul",Xe,[(h(!0),b(_e,null,ue(i(y),(c,m)=>(h(),b("li",{class:"clickable break-spaces dropdown-item fs-14",onClick:f=>K(c)},[a("span",null,J(H(c)),1)],8,Ye))),256))])],512)),[[i(de.exports.directive),A]]):he("v-if",!0)],2)])])])]),a("div",Ze,[a("button",{type:"button",class:g(["btn text-white bg-green-app w-100 px-2 py-2 search-bar-button",{disabled:!i(p)}]),style:{height:"47px"},onClick:X},[_(a("span",et,null,512),[[n,"SearchBar.search_button"]]),tt],2)])])])}}});var at=I(st,[["__scopeId","data-v-7693da0d"]]);const rt={id:"searh_bar_page",class:"container"},lt={class:"row"},nt={class:"col-12 col-md-12 col-xl-12 ms-md-auto me-md-auto ms-auto me-auto"},_t=$({setup(e){const s=z(),l=W();s.commit("setLayout","BaseLayout");const d=D(()=>s.state.auth.userData);return d.value.filters&&d.value.filters.length>0&&l.push({name:"TalentOpportunities"}),(r,u)=>(h(),b("div",rt,[a("div",lt,[a("div",nt,[v(at)])])]))}});export{_t as default};
